{"version":3,"file":"server.js","sourceRoot":"","sources":["../../../../src/server/subscription/websocket-server/server.ts"],"names":[],"mappings":"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"}