"use strict";
const fs = require('fs');
async function copyBatch(context, jobs, props, force, writeParams) {
    const { template, prompt, filesystem } = context;
    const { confirm } = prompt;
    const shouldGenerate = async (target) => {
        if (!filesystem.exists(target) || force)
            return true;
        return confirm(`overwrite ${target}`);
    };
    for (let index = 0; index < jobs.length; index += 1) {
        const job = jobs[index];
        if (!job) {
            continue;
        }
        if (await shouldGenerate(job.target, force)) {
            template.generate({
                directory: job.dir,
                template: job.template,
                target: job.target,
                props,
            });
            if (writeParams && job.paramsFile) {
                const params = writeParams && Object.keys(writeParams) && Object.keys(writeParams).length > 0 ? writeParams : props;
                const jsonString = JSON.stringify(params, null, 4);
                fs.writeFileSync(job.paramsFile, jsonString, 'utf8');
            }
        }
    }
}
module.exports = {
    copyBatch,
};
//# sourceMappingURL=copy-batch.js.map