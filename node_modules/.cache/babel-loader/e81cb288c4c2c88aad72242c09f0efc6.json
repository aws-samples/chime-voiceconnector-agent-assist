{"ast":null,"code":"'use strict';\n\nvar Observable = require('zen-observable');\n\nfunction addMethods(target, methods) {\n  Object.keys(methods).forEach(function (k) {\n    var desc = Object.getOwnPropertyDescriptor(methods, k);\n    desc.enumerable = false;\n    Object.defineProperty(target, k, desc);\n  });\n}\n\nfunction send(p, message, value) {\n  if (p._observer) {\n    sendMessage(p._observer, message, value);\n  } else if (p._observers) {\n    var list = [];\n\n    p._observers.forEach(function (to) {\n      list.push(to);\n    });\n\n    list.forEach(function (to) {\n      sendMessage(to, message, value);\n    });\n  }\n}\n\nfunction sendMessage(observer, message, value) {\n  if (observer.closed) {\n    return;\n  }\n\n  switch (message) {\n    case 'next':\n      return observer.next(value);\n\n    case 'error':\n      return observer.error(value);\n\n    case 'complete':\n      return observer.complete(value);\n  }\n}\n\nfunction hasObserver(p) {\n  return p._observer || p._observers && p._observers.size > 0;\n}\n\nfunction addObserver(p, observer) {\n  if (p._observers) {\n    p._observers.add(observer);\n  } else if (!p._observer) {\n    p._observer = observer;\n  } else {\n    p._observers = new Set();\n\n    p._observers.add(p._observer);\n\n    p._observers.add(observer);\n\n    p._observer = null;\n  }\n}\n\nfunction deleteObserver(p, observer) {\n  if (p._observers) {\n    p._observers.delete(observer);\n  } else if (p._observer === observer) {\n    p._observer = null;\n  }\n}\n\nfunction notifyStart(p, opts) {\n  !hasObserver(p) && opts && opts.start && opts.start();\n}\n\nfunction notifyPause(p, opts) {\n  !hasObserver(p) && opts && opts.pause && opts.pause();\n}\n\nfunction PushStream(opts) {\n  var p = this;\n  this._observer = null;\n  this._observers = null;\n  this._observable = new Observable(function (observer) {\n    notifyStart(p, opts);\n    addObserver(p, observer);\n    return function () {\n      deleteObserver(p, observer);\n      notifyPause(p, opts);\n    };\n  });\n}\n\naddMethods(PushStream.prototype, {\n  get observable() {\n    return this._observable;\n  },\n\n  get observed() {\n    return hasObserver(this);\n  },\n\n  next: function next(x) {\n    send(this, 'next', x);\n  },\n  error: function error(e) {\n    send(this, 'error', e);\n  },\n  complete: function complete(x) {\n    send(this, 'complete', x);\n  }\n});\nmodule.exports = PushStream;","map":{"version":3,"sources":["/home/ec2-user/chime-voiceconnector-agent-assist/node_modules/zen-push/index.js"],"names":["Observable","require","addMethods","target","methods","Object","keys","forEach","k","desc","getOwnPropertyDescriptor","enumerable","defineProperty","send","p","message","value","_observer","sendMessage","_observers","list","to","push","observer","closed","next","error","complete","hasObserver","size","addObserver","add","Set","deleteObserver","delete","notifyStart","opts","start","notifyPause","pause","PushStream","_observable","prototype","observable","observed","x","e","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nvar Observable = require('zen-observable');\n\nfunction addMethods(target, methods) {\n  Object.keys(methods).forEach(function(k) {\n    var desc = Object.getOwnPropertyDescriptor(methods, k);\n    desc.enumerable = false;\n    Object.defineProperty(target, k, desc);\n  });\n}\n\nfunction send(p, message, value) {\n  if (p._observer) {\n    sendMessage(p._observer, message, value);\n  } else if (p._observers) {\n    var list = [];\n    p._observers.forEach(function(to) { list.push(to); });\n    list.forEach(function(to) { sendMessage(to, message, value); });\n  }\n}\n\nfunction sendMessage(observer, message, value) {\n  if (observer.closed) {\n    return;\n  }\n  switch (message) {\n    case 'next': return observer.next(value);\n    case 'error': return observer.error(value);\n    case 'complete': return observer.complete(value);\n  }\n}\n\nfunction hasObserver(p) {\n  return p._observer || p._observers && p._observers.size > 0;\n}\n\nfunction addObserver(p, observer) {\n  if (p._observers) {\n    p._observers.add(observer);\n  } else if (!p._observer) {\n    p._observer = observer;\n  } else {\n    p._observers = new Set();\n    p._observers.add(p._observer);\n    p._observers.add(observer);\n    p._observer = null;\n  }\n}\n\nfunction deleteObserver(p, observer) {\n  if (p._observers) {\n    p._observers.delete(observer);\n  } else if (p._observer === observer) {\n    p._observer = null;\n  }\n}\n\nfunction notifyStart(p, opts) {\n  !hasObserver(p) && opts && opts.start && opts.start();\n}\n\nfunction notifyPause(p, opts) {\n  !hasObserver(p) && opts && opts.pause && opts.pause();\n}\n\nfunction PushStream(opts) {\n  var p = this;\n  this._observer = null;\n  this._observers = null;\n  this._observable = new Observable(function(observer) {\n    notifyStart(p, opts);\n    addObserver(p, observer);\n    return function() {\n      deleteObserver(p, observer);\n      notifyPause(p, opts);\n    };\n  });\n}\n\naddMethods(PushStream.prototype, {\n  get observable() { return this._observable; },\n  get observed() { return hasObserver(this); },\n  next: function(x) { send(this, 'next', x); },\n  error: function(e) { send(this, 'error', e); },\n  complete: function(x) { send(this, 'complete', x); },\n});\n\nmodule.exports = PushStream;\n"]},"metadata":{},"sourceType":"script"}