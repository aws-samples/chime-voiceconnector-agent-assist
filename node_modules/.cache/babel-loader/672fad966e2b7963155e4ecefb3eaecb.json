{"ast":null,"code":"var util = require('../util');\n\nvar XmlNode = require('./xml-node').XmlNode;\n\nvar XmlText = require('./xml-text').XmlText;\n\nfunction XmlBuilder() {}\n\nXmlBuilder.prototype.toXML = function (params, shape, rootElement, noEmpty) {\n  var xml = new XmlNode(rootElement);\n  applyNamespaces(xml, shape, true);\n  serialize(xml, params, shape);\n  return xml.children.length > 0 || noEmpty ? xml.toString() : '';\n};\n\nfunction serialize(xml, value, shape) {\n  switch (shape.type) {\n    case 'structure':\n      return serializeStructure(xml, value, shape);\n\n    case 'map':\n      return serializeMap(xml, value, shape);\n\n    case 'list':\n      return serializeList(xml, value, shape);\n\n    default:\n      return serializeScalar(xml, value, shape);\n  }\n}\n\nfunction serializeStructure(xml, params, shape) {\n  util.arrayEach(shape.memberNames, function (memberName) {\n    var memberShape = shape.members[memberName];\n    if (memberShape.location !== 'body') return;\n    var value = params[memberName];\n    var name = memberShape.name;\n\n    if (value !== undefined && value !== null) {\n      if (memberShape.isXmlAttribute) {\n        xml.addAttribute(name, value);\n      } else if (memberShape.flattened) {\n        serialize(xml, value, memberShape);\n      } else {\n        var element = new XmlNode(name);\n        xml.addChildNode(element);\n        applyNamespaces(element, memberShape);\n        serialize(element, value, memberShape);\n      }\n    }\n  });\n}\n\nfunction serializeMap(xml, map, shape) {\n  var xmlKey = shape.key.name || 'key';\n  var xmlValue = shape.value.name || 'value';\n  util.each(map, function (key, value) {\n    var entry = new XmlNode(shape.flattened ? shape.name : 'entry');\n    xml.addChildNode(entry);\n    var entryKey = new XmlNode(xmlKey);\n    var entryValue = new XmlNode(xmlValue);\n    entry.addChildNode(entryKey);\n    entry.addChildNode(entryValue);\n    serialize(entryKey, key, shape.key);\n    serialize(entryValue, value, shape.value);\n  });\n}\n\nfunction serializeList(xml, list, shape) {\n  if (shape.flattened) {\n    util.arrayEach(list, function (value) {\n      var name = shape.member.name || shape.name;\n      var element = new XmlNode(name);\n      xml.addChildNode(element);\n      serialize(element, value, shape.member);\n    });\n  } else {\n    util.arrayEach(list, function (value) {\n      var name = shape.member.name || 'member';\n      var element = new XmlNode(name);\n      xml.addChildNode(element);\n      serialize(element, value, shape.member);\n    });\n  }\n}\n\nfunction serializeScalar(xml, value, shape) {\n  xml.addChildNode(new XmlText(shape.toWireFormat(value)));\n}\n\nfunction applyNamespaces(xml, shape, isRoot) {\n  var uri,\n      prefix = 'xmlns';\n\n  if (shape.xmlNamespaceUri) {\n    uri = shape.xmlNamespaceUri;\n    if (shape.xmlNamespacePrefix) prefix += ':' + shape.xmlNamespacePrefix;\n  } else if (isRoot && shape.api.xmlNamespaceUri) {\n    uri = shape.api.xmlNamespaceUri;\n  }\n\n  if (uri) xml.addAttribute(prefix, uri);\n}\n/**\n * @api private\n */\n\n\nmodule.exports = XmlBuilder;","map":{"version":3,"sources":["/home/ec2-user/chime-voiceconnector-agent-assist/node_modules/@aws-amplify/core/node_modules/aws-sdk/lib/xml/builder.js"],"names":["util","require","XmlNode","XmlText","XmlBuilder","prototype","toXML","params","shape","rootElement","noEmpty","xml","applyNamespaces","serialize","children","length","toString","value","type","serializeStructure","serializeMap","serializeList","serializeScalar","arrayEach","memberNames","memberName","memberShape","members","location","name","undefined","isXmlAttribute","addAttribute","flattened","element","addChildNode","map","xmlKey","key","xmlValue","each","entry","entryKey","entryValue","list","member","toWireFormat","isRoot","uri","prefix","xmlNamespaceUri","xmlNamespacePrefix","api","module","exports"],"mappings":"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","sourcesContent":["var util = require('../util');\nvar XmlNode = require('./xml-node').XmlNode;\nvar XmlText = require('./xml-text').XmlText;\n\nfunction XmlBuilder() { }\n\nXmlBuilder.prototype.toXML = function(params, shape, rootElement, noEmpty) {\n  var xml = new XmlNode(rootElement);\n  applyNamespaces(xml, shape, true);\n  serialize(xml, params, shape);\n  return xml.children.length > 0 || noEmpty ? xml.toString() : '';\n};\n\nfunction serialize(xml, value, shape) {\n  switch (shape.type) {\n    case 'structure': return serializeStructure(xml, value, shape);\n    case 'map': return serializeMap(xml, value, shape);\n    case 'list': return serializeList(xml, value, shape);\n    default: return serializeScalar(xml, value, shape);\n  }\n}\n\nfunction serializeStructure(xml, params, shape) {\n  util.arrayEach(shape.memberNames, function(memberName) {\n    var memberShape = shape.members[memberName];\n    if (memberShape.location !== 'body') return;\n\n    var value = params[memberName];\n    var name = memberShape.name;\n    if (value !== undefined && value !== null) {\n      if (memberShape.isXmlAttribute) {\n        xml.addAttribute(name, value);\n      } else if (memberShape.flattened) {\n        serialize(xml, value, memberShape);\n      } else {\n        var element = new XmlNode(name);\n        xml.addChildNode(element);\n        applyNamespaces(element, memberShape);\n        serialize(element, value, memberShape);\n      }\n    }\n  });\n}\n\nfunction serializeMap(xml, map, shape) {\n  var xmlKey = shape.key.name || 'key';\n  var xmlValue = shape.value.name || 'value';\n\n  util.each(map, function(key, value) {\n    var entry = new XmlNode(shape.flattened ? shape.name : 'entry');\n    xml.addChildNode(entry);\n\n    var entryKey = new XmlNode(xmlKey);\n    var entryValue = new XmlNode(xmlValue);\n    entry.addChildNode(entryKey);\n    entry.addChildNode(entryValue);\n\n    serialize(entryKey, key, shape.key);\n    serialize(entryValue, value, shape.value);\n  });\n}\n\nfunction serializeList(xml, list, shape) {\n  if (shape.flattened) {\n    util.arrayEach(list, function(value) {\n      var name = shape.member.name || shape.name;\n      var element = new XmlNode(name);\n      xml.addChildNode(element);\n      serialize(element, value, shape.member);\n    });\n  } else {\n    util.arrayEach(list, function(value) {\n      var name = shape.member.name || 'member';\n      var element = new XmlNode(name);\n      xml.addChildNode(element);\n      serialize(element, value, shape.member);\n    });\n  }\n}\n\nfunction serializeScalar(xml, value, shape) {\n  xml.addChildNode(\n    new XmlText(shape.toWireFormat(value))\n  );\n}\n\nfunction applyNamespaces(xml, shape, isRoot) {\n  var uri, prefix = 'xmlns';\n  if (shape.xmlNamespaceUri) {\n    uri = shape.xmlNamespaceUri;\n    if (shape.xmlNamespacePrefix) prefix += ':' + shape.xmlNamespacePrefix;\n  } else if (isRoot && shape.api.xmlNamespaceUri) {\n    uri = shape.api.xmlNamespaceUri;\n  }\n\n  if (uri) xml.addAttribute(prefix, uri);\n}\n\n/**\n * @api private\n */\nmodule.exports = XmlBuilder;\n"]},"metadata":{},"sourceType":"script"}