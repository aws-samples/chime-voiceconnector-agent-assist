{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: MIT-0\nimport React from'react';import{withAuthenticator}from'aws-amplify-react';import TextField from'@material-ui/core/TextField';import StreamingRecord from'./StreamingRecord';import{queryCall}from'../utils/elasticsearch';import'../styles/HistorySearch.css';class HistorySearch extends React.Component{constructor(props){super(props);this.handleSearch=event=>{this.setState({currInput:event.target.value});};this.state={metadata:[],currInput:''};}componentDidMount(){queryCall(this.props.accountId).then(data=>{this.setState({currInput:this.props.accountId,metadata:data});});}componentDidUpdate(prevProps,prevState){const input=this.state.currInput;if(this.state.currInput!==prevState.currInput){queryCall(this.state.currInput).then(data=>{// If current input remains unchanged after callback, then set the state.\nif(input===this.state.currInput){this.setState({metadata:[]});this.setState({metadata:data});}});}}render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"HistorySearch\",hidden:this.props.value!==this.props.index},/*#__PURE__*/React.createElement(\"div\",{className:\"search-text-field\"},/*#__PURE__*/React.createElement(\"form\",{noValidate:true,autoComlete:\"off\"},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",label:\"Search\",id:\"searchField\",fullWidth:true,onChange:this.handleSearch,helperText:\"Keyword includes metadata(account id, voice connector id, phone number, header, timestamp, etc) or Transcription\"}))),/*#__PURE__*/React.createElement(\"div\",null,this.state.metadata.map((r,i)=>{return/*#__PURE__*/React.createElement(StreamingRecord,{key:i,metadata:r,keyword:this.state.currInput});})));}}export default withAuthenticator(HistorySearch,false);","map":{"version":3,"sources":["/home/ec2-user/chime-voiceconnector-agent-assist/src/search/HistorySearch.js"],"names":["React","withAuthenticator","TextField","StreamingRecord","queryCall","HistorySearch","Component","constructor","props","handleSearch","event","setState","currInput","target","value","state","metadata","componentDidMount","accountId","then","data","componentDidUpdate","prevProps","prevState","input","render","index","map","r","i"],"mappings":"AAAA;AACA;AAEA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,iBAAT,KAAkC,mBAAlC,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CAEA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CACA,OAASC,SAAT,KAA0B,wBAA1B,CACA,MAAO,6BAAP,CAEA,KAAMC,CAAAA,aAAN,QAA4BL,CAAAA,KAAK,CAACM,SAAU,CAC1CC,WAAW,CAACC,KAAD,CAAQ,CACjB,MAAMA,KAAN,EADiB,KA2BnBC,YA3BmB,CA2BJC,KAAK,EAAI,CACtB,KAAKC,QAAL,CAAc,CAAEC,SAAS,CAAEF,KAAK,CAACG,MAAN,CAAaC,KAA1B,CAAd,EACD,CA7BkB,CAEjB,KAAKC,KAAL,CAAa,CACXC,QAAQ,CAAE,EADC,CAEXJ,SAAS,CAAE,EAFA,CAAb,CAID,CAEDK,iBAAiB,EAAG,CAClBb,SAAS,CAAC,KAAKI,KAAL,CAAWU,SAAZ,CAAT,CAAgCC,IAAhC,CAAqCC,IAAI,EAAI,CAC3C,KAAKT,QAAL,CAAc,CAAEC,SAAS,CAAE,KAAKJ,KAAL,CAAWU,SAAxB,CAAmCF,QAAQ,CAAEI,IAA7C,CAAd,EACD,CAFD,EAGD,CAEDC,kBAAkB,CAACC,SAAD,CAAYC,SAAZ,CAAuB,CACvC,KAAMC,CAAAA,KAAK,CAAG,KAAKT,KAAL,CAAWH,SAAzB,CACA,GAAI,KAAKG,KAAL,CAAWH,SAAX,GAAyBW,SAAS,CAACX,SAAvC,CAAkD,CAChDR,SAAS,CAAC,KAAKW,KAAL,CAAWH,SAAZ,CAAT,CAAgCO,IAAhC,CAAqCC,IAAI,EAAI,CAC3C;AACA,GAAII,KAAK,GAAK,KAAKT,KAAL,CAAWH,SAAzB,CAAoC,CAClC,KAAKD,QAAL,CAAc,CAAEK,QAAQ,CAAE,EAAZ,CAAd,EACA,KAAKL,QAAL,CAAc,CAAEK,QAAQ,CAAEI,IAAZ,CAAd,EACD,CACF,CAND,EAOD,CACF,CAMDK,MAAM,EAAG,CACP,mBACE,2BAAK,SAAS,CAAC,eAAf,CAA+B,MAAM,CAAE,KAAKjB,KAAL,CAAWM,KAAX,GAAqB,KAAKN,KAAL,CAAWkB,KAAvE,eACE,2BAAK,SAAS,CAAC,mBAAf,eACE,4BAAM,UAAU,KAAhB,CAAiB,WAAW,CAAC,KAA7B,eACE,oBAAC,SAAD,EACE,OAAO,CAAC,UADV,CAEE,KAAK,CAAC,QAFR,CAGE,EAAE,CAAC,aAHL,CAIE,SAAS,KAJX,CAKE,QAAQ,CAAE,KAAKjB,YALjB,CAME,UAAU,CAAC,kHANb,EADF,CADF,CADF,cAaE,+BACG,KAAKM,KAAL,CAAWC,QAAX,CAAoBW,GAApB,CAAwB,CAACC,CAAD,CAAIC,CAAJ,GAAU,CACjC,mBAAO,oBAAC,eAAD,EAAiB,GAAG,CAAEA,CAAtB,CAAyB,QAAQ,CAAED,CAAnC,CAAsC,OAAO,CAAE,KAAKb,KAAL,CAAWH,SAA1D,EAAP,CACD,CAFA,CADH,CAbF,CADF,CAqBD,CAtDyC,CAyD5C,cAAeX,CAAAA,iBAAiB,CAACI,aAAD,CAAgB,KAAhB,CAAhC","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: MIT-0\n\nimport React from 'react';\nimport { withAuthenticator } from 'aws-amplify-react';\nimport TextField from '@material-ui/core/TextField';\n\nimport StreamingRecord from './StreamingRecord';\nimport { queryCall } from '../utils/elasticsearch';\nimport '../styles/HistorySearch.css';\n\nclass HistorySearch extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      metadata: [],\n      currInput: '',\n    };\n  }\n\n  componentDidMount() {\n    queryCall(this.props.accountId).then(data => {\n      this.setState({ currInput: this.props.accountId, metadata: data });\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const input = this.state.currInput;\n    if (this.state.currInput !== prevState.currInput) {\n      queryCall(this.state.currInput).then(data => {\n        // If current input remains unchanged after callback, then set the state.\n        if (input === this.state.currInput) {\n          this.setState({ metadata: [] });\n          this.setState({ metadata: data });\n        }\n      });\n    }\n  }\n\n  handleSearch = event => {\n    this.setState({ currInput: event.target.value });\n  };\n\n  render() {\n    return (\n      <div className=\"HistorySearch\" hidden={this.props.value !== this.props.index}>\n        <div className=\"search-text-field\">\n          <form noValidate autoComlete=\"off\">\n            <TextField\n              variant=\"outlined\"\n              label=\"Search\"\n              id=\"searchField\"\n              fullWidth\n              onChange={this.handleSearch}\n              helperText=\"Keyword includes metadata(account id, voice connector id, phone number, header, timestamp, etc) or Transcription\"\n            />\n          </form>\n        </div>\n        <div>\n          {this.state.metadata.map((r, i) => {\n            return <StreamingRecord key={i} metadata={r} keyword={this.state.currInput} />;\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withAuthenticator(HistorySearch, false);\n"]},"metadata":{},"sourceType":"module"}