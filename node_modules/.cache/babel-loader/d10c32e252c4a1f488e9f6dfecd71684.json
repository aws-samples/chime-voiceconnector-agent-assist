{"ast":null,"code":"/**\n * Copyright 2012-2013 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You\n * may not use this file except in compliance with the License. A copy of\n * the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\nvar AWS = require('./core');\n\nvar inherit = AWS.util.inherit;\n\nvar jmespath = require('jmespath');\n/**\n * @api private\n */\n\n\nfunction CHECK_ACCEPTORS(resp) {\n  var waiter = resp.request._waiter;\n  var acceptors = waiter.config.acceptors;\n  var acceptorMatched = false;\n  var state = 'retry';\n  acceptors.forEach(function (acceptor) {\n    if (!acceptorMatched) {\n      var matcher = waiter.matchers[acceptor.matcher];\n\n      if (matcher && matcher(resp, acceptor.expected, acceptor.argument)) {\n        acceptorMatched = true;\n        state = acceptor.state;\n      }\n    }\n  });\n  if (!acceptorMatched && resp.error) state = 'failure';\n\n  if (state === 'success') {\n    waiter.setSuccess(resp);\n  } else {\n    waiter.setError(resp, state === 'retry');\n  }\n}\n/**\n * @api private\n */\n\n\nAWS.ResourceWaiter = inherit({\n  /**\n   * Waits for a given state on a service object\n   * @param service [Service] the service object to wait on\n   * @param state [String] the state (defined in waiter configuration) to wait\n   *   for.\n   * @example Create a waiter for running EC2 instances\n   *   var ec2 = new AWS.EC2;\n   *   var waiter = new AWS.ResourceWaiter(ec2, 'instanceRunning');\n   */\n  constructor: function constructor(service, state) {\n    this.service = service;\n    this.state = state;\n    this.loadWaiterConfig(this.state);\n  },\n  service: null,\n  state: null,\n  config: null,\n  matchers: {\n    path: function path(resp, expected, argument) {\n      try {\n        var result = jmespath.search(resp.data, argument);\n      } catch (err) {\n        return false;\n      }\n\n      return jmespath.strictDeepEqual(result, expected);\n    },\n    pathAll: function pathAll(resp, expected, argument) {\n      try {\n        var results = jmespath.search(resp.data, argument);\n      } catch (err) {\n        return false;\n      }\n\n      if (!Array.isArray(results)) results = [results];\n      var numResults = results.length;\n      if (!numResults) return false;\n\n      for (var ind = 0; ind < numResults; ind++) {\n        if (!jmespath.strictDeepEqual(results[ind], expected)) {\n          return false;\n        }\n      }\n\n      return true;\n    },\n    pathAny: function pathAny(resp, expected, argument) {\n      try {\n        var results = jmespath.search(resp.data, argument);\n      } catch (err) {\n        return false;\n      }\n\n      if (!Array.isArray(results)) results = [results];\n      var numResults = results.length;\n\n      for (var ind = 0; ind < numResults; ind++) {\n        if (jmespath.strictDeepEqual(results[ind], expected)) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n    status: function status(resp, expected) {\n      var statusCode = resp.httpResponse.statusCode;\n      return typeof statusCode === 'number' && statusCode === expected;\n    },\n    error: function error(resp, expected) {\n      if (typeof expected === 'string' && resp.error) {\n        return expected === resp.error.code;\n      } // if expected is not string, can be boolean indicating presence of error\n\n\n      return expected === !!resp.error;\n    }\n  },\n  listeners: new AWS.SequentialExecutor().addNamedListeners(function (add) {\n    add('RETRY_CHECK', 'retry', function (resp) {\n      var waiter = resp.request._waiter;\n\n      if (resp.error && resp.error.code === 'ResourceNotReady') {\n        resp.error.retryDelay = (waiter.config.delay || 0) * 1000;\n      }\n    });\n    add('CHECK_OUTPUT', 'extractData', CHECK_ACCEPTORS);\n    add('CHECK_ERROR', 'extractError', CHECK_ACCEPTORS);\n  }),\n\n  /**\n   * @return [AWS.Request]\n   */\n  wait: function wait(params, callback) {\n    if (typeof params === 'function') {\n      callback = params;\n      params = undefined;\n    }\n\n    if (params && params.$waiter) {\n      params = AWS.util.copy(params);\n\n      if (typeof params.$waiter.delay === 'number') {\n        this.config.delay = params.$waiter.delay;\n      }\n\n      if (typeof params.$waiter.maxAttempts === 'number') {\n        this.config.maxAttempts = params.$waiter.maxAttempts;\n      }\n\n      delete params.$waiter;\n    }\n\n    var request = this.service.makeRequest(this.config.operation, params);\n    request._waiter = this;\n    request.response.maxRetries = this.config.maxAttempts;\n    request.addListeners(this.listeners);\n    if (callback) request.send(callback);\n    return request;\n  },\n  setSuccess: function setSuccess(resp) {\n    resp.error = null;\n    resp.data = resp.data || {};\n    resp.request.removeAllListeners('extractData');\n  },\n  setError: function setError(resp, retryable) {\n    resp.data = null;\n    resp.error = AWS.util.error(resp.error || new Error(), {\n      code: 'ResourceNotReady',\n      message: 'Resource is not in the state ' + this.state,\n      retryable: retryable\n    });\n  },\n\n  /**\n   * Loads waiter configuration from API configuration\n   *\n   * @api private\n   */\n  loadWaiterConfig: function loadWaiterConfig(state) {\n    if (!this.service.api.waiters[state]) {\n      throw new AWS.util.error(new Error(), {\n        code: 'StateNotFoundError',\n        message: 'State ' + state + ' not found.'\n      });\n    }\n\n    this.config = AWS.util.copy(this.service.api.waiters[state]);\n  }\n});","map":{"version":3,"sources":["/home/ec2-user/chime-voiceconnector-agent-assist/node_modules/@aws-amplify/core/node_modules/aws-sdk/lib/resource_waiter.js"],"names":["AWS","require","inherit","util","jmespath","CHECK_ACCEPTORS","resp","waiter","request","_waiter","acceptors","config","acceptorMatched","state","forEach","acceptor","matcher","matchers","expected","argument","error","setSuccess","setError","ResourceWaiter","constructor","service","loadWaiterConfig","path","result","search","data","err","strictDeepEqual","pathAll","results","Array","isArray","numResults","length","ind","pathAny","status","statusCode","httpResponse","code","listeners","SequentialExecutor","addNamedListeners","add","retryDelay","delay","wait","params","callback","undefined","$waiter","copy","maxAttempts","makeRequest","operation","response","maxRetries","addListeners","send","removeAllListeners","retryable","Error","message","api","waiters"],"mappings":"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","sourcesContent":["/**\n * Copyright 2012-2013 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You\n * may not use this file except in compliance with the License. A copy of\n * the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n\nvar AWS = require('./core');\nvar inherit = AWS.util.inherit;\nvar jmespath = require('jmespath');\n\n/**\n * @api private\n */\nfunction CHECK_ACCEPTORS(resp) {\n  var waiter = resp.request._waiter;\n  var acceptors = waiter.config.acceptors;\n  var acceptorMatched = false;\n  var state = 'retry';\n\n  acceptors.forEach(function(acceptor) {\n    if (!acceptorMatched) {\n      var matcher = waiter.matchers[acceptor.matcher];\n      if (matcher && matcher(resp, acceptor.expected, acceptor.argument)) {\n        acceptorMatched = true;\n        state = acceptor.state;\n      }\n    }\n  });\n\n  if (!acceptorMatched && resp.error) state = 'failure';\n\n  if (state === 'success') {\n    waiter.setSuccess(resp);\n  } else {\n    waiter.setError(resp, state === 'retry');\n  }\n}\n\n/**\n * @api private\n */\nAWS.ResourceWaiter = inherit({\n  /**\n   * Waits for a given state on a service object\n   * @param service [Service] the service object to wait on\n   * @param state [String] the state (defined in waiter configuration) to wait\n   *   for.\n   * @example Create a waiter for running EC2 instances\n   *   var ec2 = new AWS.EC2;\n   *   var waiter = new AWS.ResourceWaiter(ec2, 'instanceRunning');\n   */\n  constructor: function constructor(service, state) {\n    this.service = service;\n    this.state = state;\n    this.loadWaiterConfig(this.state);\n  },\n\n  service: null,\n\n  state: null,\n\n  config: null,\n\n  matchers: {\n    path: function(resp, expected, argument) {\n      try {\n        var result = jmespath.search(resp.data, argument);\n      } catch (err) {\n        return false;\n      }\n\n      return jmespath.strictDeepEqual(result,expected);\n    },\n\n    pathAll: function(resp, expected, argument) {\n      try {\n        var results = jmespath.search(resp.data, argument);\n      } catch (err) {\n        return false;\n      }\n\n      if (!Array.isArray(results)) results = [results];\n      var numResults = results.length;\n      if (!numResults) return false;\n      for (var ind = 0 ; ind < numResults; ind++) {\n        if (!jmespath.strictDeepEqual(results[ind], expected)) {\n          return false;\n        }\n      }\n      return true;\n    },\n\n    pathAny: function(resp, expected, argument) {\n      try {\n        var results = jmespath.search(resp.data, argument);\n      } catch (err) {\n        return false;\n      }\n\n      if (!Array.isArray(results)) results = [results];\n      var numResults = results.length;\n      for (var ind = 0 ; ind < numResults; ind++) {\n        if (jmespath.strictDeepEqual(results[ind], expected)) {\n          return true;\n        }\n      }\n      return false;\n    },\n\n    status: function(resp, expected) {\n      var statusCode = resp.httpResponse.statusCode;\n      return (typeof statusCode === 'number') && (statusCode === expected);\n    },\n\n    error: function(resp, expected) {\n      if (typeof expected === 'string' && resp.error) {\n        return expected === resp.error.code;\n      }\n      // if expected is not string, can be boolean indicating presence of error\n      return expected === !!resp.error;\n    }\n  },\n\n  listeners: new AWS.SequentialExecutor().addNamedListeners(function(add) {\n    add('RETRY_CHECK', 'retry', function(resp) {\n      var waiter = resp.request._waiter;\n      if (resp.error && resp.error.code === 'ResourceNotReady') {\n        resp.error.retryDelay = (waiter.config.delay || 0) * 1000;\n      }\n    });\n\n    add('CHECK_OUTPUT', 'extractData', CHECK_ACCEPTORS);\n\n    add('CHECK_ERROR', 'extractError', CHECK_ACCEPTORS);\n  }),\n\n  /**\n   * @return [AWS.Request]\n   */\n  wait: function wait(params, callback) {\n    if (typeof params === 'function') {\n      callback = params; params = undefined;\n    }\n\n    if (params && params.$waiter) {\n      params = AWS.util.copy(params);\n      if (typeof params.$waiter.delay === 'number') {\n        this.config.delay = params.$waiter.delay;\n      }\n      if (typeof params.$waiter.maxAttempts === 'number') {\n        this.config.maxAttempts = params.$waiter.maxAttempts;\n      }\n      delete params.$waiter;\n    }\n\n    var request = this.service.makeRequest(this.config.operation, params);\n    request._waiter = this;\n    request.response.maxRetries = this.config.maxAttempts;\n    request.addListeners(this.listeners);\n\n    if (callback) request.send(callback);\n    return request;\n  },\n\n  setSuccess: function setSuccess(resp) {\n    resp.error = null;\n    resp.data = resp.data || {};\n    resp.request.removeAllListeners('extractData');\n  },\n\n  setError: function setError(resp, retryable) {\n    resp.data = null;\n    resp.error = AWS.util.error(resp.error || new Error(), {\n      code: 'ResourceNotReady',\n      message: 'Resource is not in the state ' + this.state,\n      retryable: retryable\n    });\n  },\n\n  /**\n   * Loads waiter configuration from API configuration\n   *\n   * @api private\n   */\n  loadWaiterConfig: function loadWaiterConfig(state) {\n    if (!this.service.api.waiters[state]) {\n      throw new AWS.util.error(new Error(), {\n        code: 'StateNotFoundError',\n        message: 'State ' + state + ' not found.'\n      });\n    }\n\n    this.config = AWS.util.copy(this.service.api.waiters[state]);\n  }\n});\n"]},"metadata":{},"sourceType":"script"}