{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///../../src/Logger/ConsoleLogger.ts","webpack:///../src/Amplify.ts","webpack:///../../src/ClientDevice/browser.ts","webpack:///../../src/ClientDevice/index.ts","webpack:///../src/Hub.ts","webpack:///../../src/I18n/I18n.ts","webpack:///../../src/I18n/index.ts","webpack:///../../src/Util/Retry.ts","webpack:///../../src/Util/Mutex.ts","webpack:///../../src/Util/Reachability.ts","webpack:///../../src/Util/DateUtils.ts","webpack:///../src/Signer.ts","webpack:///../src/Parser.ts","webpack:///../../src/OAuthHelper/GoogleOAuth.ts","webpack:///../../src/OAuthHelper/FacebookOAuth.ts","webpack:///../../src/OAuthHelper/index.ts","webpack:///../../src/StorageHelper/index.ts","webpack:///../../src/RNComponents/index.ts","webpack:///../src/Credentials.ts","webpack:///../../src/ServiceWorker/ServiceWorker.ts","webpack:///../../src/Platform/index.ts","webpack:///../src/constants.ts","webpack:///../src/index.ts","webpack:///./node_modules/aws-sdk/lib/core.js","webpack:///./node_modules/aws-sdk/lib/browser_loader.js","webpack:///../src/util.ts","webpack:///../src/types.ts","webpack:///./node_modules/node-libs-browser/node_modules/buffer/index.js","webpack:///../../src/predicates/index.ts","webpack:///../../src/sync/utils.ts","webpack:///./node_modules/aws-sdk/lib/util.js","webpack:///./node_modules/graphql/language/visitor.mjs","webpack:///./node_modules/graphql/language/printer.mjs","webpack:///./node_modules/graphql/jsutils/inspect.mjs","webpack:///./node_modules/graphql/jsutils/invariant.mjs","webpack:///./node_modules/graphql/language/source.mjs","webpack:///./node_modules/graphql/jsutils/defineToStringTag.mjs","webpack:///./node_modules/graphql/error/syntaxError.mjs","webpack:///./node_modules/graphql/language/blockStringValue.mjs","webpack:///./node_modules/graphql/language/lexer.mjs","webpack:///./node_modules/graphql/language/kinds.mjs","webpack:///./node_modules/graphql/language/directiveLocation.mjs","webpack:///./node_modules/graphql/language/parser.mjs","webpack:///../../src/types/index.ts","webpack:///../src/RestClient.ts","webpack:///../src/API.ts","webpack:///./node_modules/lodash/lodash.js","webpack:///./node_modules/uuid/index.js","webpack:///./node_modules/crypto-js/core.js","webpack:///../src/JS.ts","webpack:///./node_modules/zen-observable/index.js","webpack:///../../src/Utils/CacheUtils.ts","webpack:///../../src/Utils/CacheList.ts","webpack:///../src/StorageCache.ts","webpack:///../src/BrowserStorageCache.ts","webpack:///../src/InMemoryCache.ts","webpack:///./node_modules/axios/lib/utils.js","webpack:///./node_modules/url/url.js","webpack:///../../src/types/Predictions.ts","webpack:///../../src/types/Auth.ts","webpack:///./node_modules/amazon-cognito-identity-js/es/BigInteger.js","webpack:///./node_modules/amazon-cognito-identity-js/es/AuthenticationDetails.js","webpack:///./node_modules/amazon-cognito-identity-js/es/AuthenticationHelper.js","webpack:///./node_modules/amazon-cognito-identity-js/es/CognitoJwtToken.js","webpack:///./node_modules/amazon-cognito-identity-js/es/CognitoAccessToken.js","webpack:///./node_modules/amazon-cognito-identity-js/es/CognitoIdToken.js","webpack:///./node_modules/amazon-cognito-identity-js/es/CognitoRefreshToken.js","webpack:///./node_modules/amazon-cognito-identity-js/es/CognitoUserSession.js","webpack:///./node_modules/amazon-cognito-identity-js/es/DateHelper.js","webpack:///./node_modules/amazon-cognito-identity-js/es/CognitoUserAttribute.js","webpack:///./node_modules/amazon-cognito-identity-js/es/StorageHelper.js","webpack:///./node_modules/amazon-cognito-identity-js/es/CognitoUser.js","webpack:///./node_modules/amazon-cognito-identity-js/es/UserAgent.js","webpack:///./node_modules/amazon-cognito-identity-js/es/Client.js","webpack:///./node_modules/amazon-cognito-identity-js/es/CognitoUserPool.js","webpack:///./node_modules/amazon-cognito-identity-js/es/CookieStorage.js","webpack:///../../src/OAuth/urlOpener.ts","webpack:///../../src/OAuth/OAuth.ts","webpack:///../../src/OAuth/oauthStorage.ts","webpack:///../src/Errors.ts","webpack:///../src/Auth.ts","webpack:///../src/urlListener.ts","webpack:///./node_modules/zen-observable-ts/lib/bundle.esm.js","webpack:///./node_modules/process/browser.js","webpack:///../../src/Providers/PubSubProvider.ts","webpack:///../../src/Providers/MqttOverWSProvider.ts","webpack:///../../src/Providers/AWSAppSyncRealTimeProvider.ts","webpack:///../../src/Providers/AWSAppSyncProvider.ts","webpack:///../../src/Providers/AWSIotProvider.ts","webpack:///../src/PubSub.ts","webpack:///../../../src/types/Providers/AbstractPredictionsProvider.ts","webpack:///../../../src/types/Providers/AbstractIdentifyPredictionsProvider.ts","webpack:///../../../src/types/Providers/AbstractInterpretPredictionsProvider.ts","webpack:///./node_modules/js-cookie/src/js.cookie.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/aws-sdk/clients/sts.js","webpack:///./node_modules/crypto-js/hmac-sha256.js","webpack:///./node_modules/aws-sdk/lib/model/shape.js","webpack:///./node_modules/aws-sdk/clients/rekognition.js","webpack://aws-amplify/../datastore/node_modules/uuid/index.js?dc3c","webpack:///./node_modules/aws-sdk/lib/protocol/rest.js","webpack:///./node_modules/aws-sdk/lib/browserHashUtils.js","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/crypto-js/sha256.js","webpack:///../../../src/types/Providers/AbstractConvertPredictionsProvider.ts","webpack:///./node_modules/crypto-js/enc-base64.js","webpack:///./node_modules/aws-sdk/clients/lexruntime.js","webpack:///./node_modules/aws-sdk/lib/protocol/json.js","webpack:///./node_modules/aws-sdk/lib/json/builder.js","webpack:///./node_modules/aws-sdk/lib/json/parser.js","webpack:///./node_modules/aws-sdk/lib/protocol/helpers.js","webpack:///./node_modules/jmespath/jmespath.js","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///./node_modules/aws-sdk/clients/kinesis.js","webpack:///./node_modules/aws-sdk/clients/firehose.js","webpack:///./node_modules/aws-sdk/clients/personalizeevents.js","webpack:///./node_modules/aws-sdk/clients/s3.js","webpack:////webpack/universalModuleDefinition","webpack:////webpack/bootstrap","webpack:////src/index.ts","webpack:///aws_amplify_ui/src/Anchor.css?a212","webpack:///aws_amplify_ui/src/Button.css?3605","webpack:///aws_amplify_ui/src/Form.css?0c1e","webpack:///aws_amplify_ui/src/Hint.css?8415","webpack:///aws_amplify_ui/src/Input.css?6c63","webpack:///aws_amplify_ui/src/Nav.css?2528","webpack:///aws_amplify_ui/src/PhotoPicker.css?07be","webpack:///aws_amplify_ui/src/Section.css?9b19","webpack:///aws_amplify_ui/src/SelectInput.css?12a6","webpack:///aws_amplify_ui/src/Strike.css?fcd8","webpack:///aws_amplify_ui/src/Toast.css?b30c","webpack:///aws_amplify_ui/src/Totp.css?55f1","webpack:///aws_amplify_ui/src/XR.css?528c","webpack:///./node_modules/aws-sdk/clients/translate.js","webpack:///./node_modules/aws-sdk/clients/polly.js","webpack:///./node_modules/axios/index.js","webpack:///./node_modules/@aws-sdk/util-utf8-node/build/index.js","webpack:///../../../src/sync/processors/subscription.ts","webpack:///./node_modules/aws-sdk/browser.js","webpack:///./node_modules/aws-sdk/lib/protocol/query.js","webpack:///./node_modules/aws-sdk/lib/model/collection.js","webpack:///./node_modules/aws-sdk/lib/protocol/rest_json.js","webpack:///./node_modules/aws-sdk/lib/protocol/rest_xml.js","webpack:///./node_modules/aws-sdk/lib/model/api.js","webpack:///./node_modules/aws-sdk/lib/model/operation.js","webpack:///./node_modules/aws-sdk/lib/model/paginator.js","webpack:///./node_modules/aws-sdk/lib/model/resource_waiter.js","webpack:///./node_modules/aws-sdk/lib/sequential_executor.js","webpack:///./node_modules/aws-sdk/lib/credentials.js","webpack:///./node_modules/aws-sdk/lib/credentials/credential_provider_chain.js","webpack:///./node_modules/aws-sdk/lib/http.js","webpack:///./node_modules/aws-sdk/lib/signers/v3.js","webpack:///./node_modules/aws-sdk/lib/signers/v4_credentials.js","webpack:///./node_modules/aws-sdk/node_modules/uuid/lib/rng-browser.js","webpack:///./node_modules/aws-sdk/node_modules/uuid/lib/bytesToUuid.js","webpack:///./node_modules/querystring-es3/index.js","webpack:///./node_modules/aws-sdk/clients/cognitoidentity.js","webpack:///./node_modules/uuid/lib/rng-browser.js","webpack:///./node_modules/uuid/lib/bytesToUuid.js","webpack:///./node_modules/crypto-js/lib-typedarrays.js","webpack:///./node_modules/axios/lib/helpers/bind.js","webpack:///./node_modules/axios/lib/helpers/buildURL.js","webpack:///./node_modules/axios/lib/cancel/isCancel.js","webpack:///./node_modules/axios/lib/defaults.js","webpack:///./node_modules/axios/lib/adapters/xhr.js","webpack:///./node_modules/axios/lib/core/createError.js","webpack:///./node_modules/axios/lib/core/mergeConfig.js","webpack:///./node_modules/axios/lib/cancel/Cancel.js","webpack:///../../src/Providers/AmazonAIConvertPredictionsProvider.ts","webpack:///./node_modules/@aws-sdk/util-hex-encoding/build/index.js","webpack:///./node_modules/@aws-sdk/eventstream-marshaller/build/Int64.js","webpack:///./node_modules/@aws-crypto/crc32/build/index.js","webpack:///./node_modules/aws-sdk/lib/dynamodb/types.js","webpack:///./node_modules/aws-sdk/lib/dynamodb/set.js","webpack://aws-amplify/../datastore/node_modules/uuid/lib/rng-browser.js?9c1e","webpack://aws-amplify/../datastore/node_modules/uuid/lib/bytesToUuid.js?2c26","webpack:///./node_modules/aws-sdk/clients/pinpoint.js","webpack:///./node_modules/paho-mqtt/paho-mqtt.js","webpack:///./node_modules/@aws-sdk/eventstream-marshaller/build/index.js","webpack:///./node_modules/aws-sdk/clients/textract.js","webpack:///./node_modules/aws-sdk/lib/browser.js","webpack:///./node_modules/zen-push/index.js","webpack:///../../../../src/storage/adapter/getDefaultAdapter/index.ts","webpack:///./node_modules/graphql/language/location.mjs","webpack:///./node_modules/graphql/error/printError.mjs","webpack:///./node_modules/graphql/error/GraphQLError.mjs","webpack:///./node_modules/timers-browserify/main.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./node_modules/aws-sdk/lib/query/query_param_serializer.js","webpack:///./node_modules/aws-sdk/lib/xml/builder.js","webpack:///./node_modules/aws-sdk/lib/xml/xml-node.js","webpack:///./node_modules/aws-sdk/lib/xml/escape-attribute.js","webpack:///./node_modules/aws-sdk/lib/xml/xml-text.js","webpack:///./node_modules/aws-sdk/lib/xml/escape-element.js","webpack:///./node_modules/aws-sdk/lib/api_loader.js","webpack:///./node_modules/aws-sdk/vendor/endpoint-cache/index.js","webpack:///./node_modules/aws-sdk/vendor/endpoint-cache/utils/LRU.js","webpack:///./node_modules/aws-sdk/lib/service.js","webpack:///./node_modules/aws-sdk/lib/region_config.js","webpack:///./node_modules/aws-sdk/lib/config.js","webpack:///./node_modules/aws-sdk/lib/event_listeners.js","webpack:///./node_modules/aws-sdk/lib/discover_endpoint.js","webpack:///./node_modules/util/util.js","webpack:///./node_modules/util/support/isBufferBrowser.js","webpack:///./node_modules/util/node_modules/inherits/inherits_browser.js","webpack:///./node_modules/aws-sdk/lib/request.js","webpack:///./node_modules/aws-sdk/lib/state_machine.js","webpack:///./node_modules/aws-sdk/lib/response.js","webpack:///./node_modules/aws-sdk/lib/resource_waiter.js","webpack:///./node_modules/aws-sdk/lib/signers/request_signer.js","webpack:///./node_modules/aws-sdk/lib/signers/v2.js","webpack:///./node_modules/aws-sdk/lib/signers/v3https.js","webpack:///./node_modules/aws-sdk/lib/signers/v4.js","webpack:///./node_modules/aws-sdk/lib/signers/s3.js","webpack:///./node_modules/aws-sdk/lib/signers/presign.js","webpack:///./node_modules/aws-sdk/lib/param_validator.js","webpack:///./node_modules/aws-sdk/node_modules/uuid/index.js","webpack:///./node_modules/aws-sdk/node_modules/uuid/v1.js","webpack:///./node_modules/aws-sdk/node_modules/uuid/v4.js","webpack:///./node_modules/aws-sdk/lib/browserCryptoLib.js","webpack:///./node_modules/aws-sdk/lib/browserHmac.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/ieee754/index.js","webpack:///./node_modules/isarray/index.js","webpack:///./node_modules/aws-sdk/lib/browserMd5.js","webpack:///./node_modules/aws-sdk/lib/browserSha1.js","webpack:///./node_modules/aws-sdk/lib/browserSha256.js","webpack:///./node_modules/punycode/punycode.js","webpack:///./node_modules/url/util.js","webpack:///./node_modules/querystring-es3/decode.js","webpack:///./node_modules/querystring-es3/encode.js","webpack:///./node_modules/aws-sdk/lib/realclock/browserClock.js","webpack:///./node_modules/aws-sdk/lib/event-stream/buffered-create-event-stream.js","webpack:///./node_modules/aws-sdk/lib/event-stream/event-message-chunker.js","webpack:///./node_modules/aws-sdk/lib/event-stream/parse-event.js","webpack:///./node_modules/aws-sdk/lib/event-stream/parse-message.js","webpack:///./node_modules/aws-sdk/lib/event-stream/int64.js","webpack:///./node_modules/aws-sdk/lib/event-stream/split-message.js","webpack:///./node_modules/aws-sdk/lib/credentials/temporary_credentials.js","webpack:///./node_modules/aws-sdk/lib/services/sts.js","webpack:///./node_modules/aws-sdk/lib/credentials/chainable_temporary_credentials.js","webpack:///./node_modules/aws-sdk/lib/credentials/web_identity_credentials.js","webpack:///./node_modules/aws-sdk/lib/credentials/cognito_identity_credentials.js","webpack:///./node_modules/aws-sdk/lib/services/cognitoidentity.js","webpack:///./node_modules/aws-sdk/lib/credentials/saml_credentials.js","webpack:///./node_modules/aws-sdk/lib/xml/browser_parser.js","webpack:///./node_modules/aws-sdk/lib/http/xhr.js","webpack:///./node_modules/node-libs-browser/node_modules/events/events.js","webpack:///./node_modules/zen-observable/lib/Observable.js","webpack:///./node_modules/uuid/v1.js","webpack:///./node_modules/uuid/v4.js","webpack:///./node_modules/crypto-js/hmac.js","webpack:///./node_modules/aws-sdk/lib/services/s3.js","webpack:///./node_modules/aws-sdk/lib/s3/managed_upload.js","webpack:///./node_modules/axios/lib/axios.js","webpack:///./node_modules/axios/lib/core/Axios.js","webpack:///./node_modules/axios/lib/core/InterceptorManager.js","webpack:///./node_modules/axios/lib/core/dispatchRequest.js","webpack:///./node_modules/axios/lib/core/transformData.js","webpack:///./node_modules/axios/lib/helpers/normalizeHeaderName.js","webpack:///./node_modules/axios/lib/core/settle.js","webpack:///./node_modules/axios/lib/core/enhanceError.js","webpack:///./node_modules/axios/lib/core/buildFullPath.js","webpack:///./node_modules/axios/lib/helpers/isAbsoluteURL.js","webpack:///./node_modules/axios/lib/helpers/combineURLs.js","webpack:///./node_modules/axios/lib/helpers/parseHeaders.js","webpack:///./node_modules/axios/lib/helpers/isURLSameOrigin.js","webpack:///./node_modules/axios/lib/helpers/cookies.js","webpack:///./node_modules/axios/lib/cancel/CancelToken.js","webpack:///./node_modules/axios/lib/helpers/spread.js","webpack:///./node_modules/aws-sdk/lib/services/polly.js","webpack:///./node_modules/aws-sdk/lib/polly/presigner.js","webpack:///./node_modules/@aws-sdk/eventstream-marshaller/build/EventStreamMarshaller.js","webpack:///./node_modules/@aws-sdk/eventstream-marshaller/build/HeaderMarshaller.js","webpack:///./node_modules/@aws-sdk/eventstream-marshaller/build/splitMessage.js","webpack:///./node_modules/@aws-sdk/util-buffer-from/build/index.js","webpack:///./node_modules/@aws-sdk/is-array-buffer/build/index.js","webpack:///./node_modules/aws-sdk/clients/browser_default.js","webpack:///./node_modules/aws-sdk/clients/acm.js","webpack:///./node_modules/aws-sdk/clients/apigateway.js","webpack:///./node_modules/aws-sdk/lib/services/apigateway.js","webpack:///./node_modules/aws-sdk/clients/applicationautoscaling.js","webpack:///./node_modules/aws-sdk/clients/autoscaling.js","webpack:///./node_modules/aws-sdk/clients/cloudformation.js","webpack:///./node_modules/aws-sdk/clients/cloudfront.js","webpack:///./node_modules/aws-sdk/lib/services/cloudfront.js","webpack:///./node_modules/aws-sdk/lib/cloudfront/signer.js","webpack:///./node_modules/aws-sdk/clients/cloudhsm.js","webpack:///./node_modules/aws-sdk/clients/cloudtrail.js","webpack:///./node_modules/aws-sdk/clients/cloudwatch.js","webpack:///./node_modules/aws-sdk/clients/cloudwatchevents.js","webpack:///./node_modules/aws-sdk/clients/cloudwatchlogs.js","webpack:///./node_modules/aws-sdk/clients/codebuild.js","webpack:///./node_modules/aws-sdk/clients/codecommit.js","webpack:///./node_modules/aws-sdk/clients/codedeploy.js","webpack:///./node_modules/aws-sdk/clients/codepipeline.js","webpack:///./node_modules/aws-sdk/clients/cognitoidentityserviceprovider.js","webpack:///./node_modules/aws-sdk/clients/cognitosync.js","webpack:///./node_modules/aws-sdk/clients/configservice.js","webpack:///./node_modules/aws-sdk/clients/cur.js","webpack:///./node_modules/aws-sdk/clients/devicefarm.js","webpack:///./node_modules/aws-sdk/clients/directconnect.js","webpack:///./node_modules/aws-sdk/clients/dynamodb.js","webpack:///./node_modules/aws-sdk/lib/services/dynamodb.js","webpack:///./node_modules/aws-sdk/lib/dynamodb/document_client.js","webpack:///./node_modules/aws-sdk/lib/dynamodb/translator.js","webpack:///./node_modules/aws-sdk/lib/dynamodb/converter.js","webpack:///./node_modules/aws-sdk/lib/dynamodb/numberValue.js","webpack:///./node_modules/aws-sdk/clients/dynamodbstreams.js","webpack:///./node_modules/aws-sdk/clients/ec2.js","webpack:///./node_modules/aws-sdk/lib/services/ec2.js","webpack:///./node_modules/aws-sdk/clients/ecr.js","webpack:///./node_modules/aws-sdk/clients/ecs.js","webpack:///./node_modules/aws-sdk/clients/efs.js","webpack:///./node_modules/aws-sdk/clients/elasticache.js","webpack:///./node_modules/aws-sdk/clients/elasticbeanstalk.js","webpack:///./node_modules/aws-sdk/clients/elb.js","webpack:///./node_modules/aws-sdk/clients/elbv2.js","webpack:///./node_modules/aws-sdk/clients/emr.js","webpack:///./node_modules/aws-sdk/clients/elastictranscoder.js","webpack:///./node_modules/aws-sdk/clients/gamelift.js","webpack:///./node_modules/aws-sdk/clients/iam.js","webpack:///./node_modules/aws-sdk/clients/inspector.js","webpack:///./node_modules/aws-sdk/clients/iot.js","webpack:///./node_modules/aws-sdk/clients/iotdata.js","webpack:///./node_modules/aws-sdk/lib/services/iotdata.js","webpack:///./node_modules/aws-sdk/clients/kms.js","webpack:///./node_modules/aws-sdk/clients/lambda.js","webpack:///./node_modules/aws-sdk/lib/services/lambda.js","webpack:///./node_modules/aws-sdk/clients/machinelearning.js","webpack:///./node_modules/aws-sdk/lib/services/machinelearning.js","webpack:///./node_modules/aws-sdk/clients/marketplacecommerceanalytics.js","webpack:///./node_modules/aws-sdk/clients/mturk.js","webpack:///./node_modules/aws-sdk/clients/mobileanalytics.js","webpack:///./node_modules/aws-sdk/clients/opsworks.js","webpack:///./node_modules/aws-sdk/clients/rds.js","webpack:///./node_modules/aws-sdk/lib/services/rds.js","webpack:///./node_modules/aws-sdk/lib/rds/signer.js","webpack:///./node_modules/aws-sdk/clients/redshift.js","webpack:///./node_modules/aws-sdk/clients/route53.js","webpack:///./node_modules/aws-sdk/lib/services/route53.js","webpack:///./node_modules/aws-sdk/clients/route53domains.js","webpack:///./node_modules/aws-sdk/clients/servicecatalog.js","webpack:///./node_modules/aws-sdk/clients/ses.js","webpack:///./node_modules/aws-sdk/clients/sns.js","webpack:///./node_modules/aws-sdk/clients/sqs.js","webpack:///./node_modules/aws-sdk/lib/services/sqs.js","webpack:///./node_modules/aws-sdk/clients/ssm.js","webpack:///./node_modules/aws-sdk/clients/storagegateway.js","webpack:///./node_modules/aws-sdk/clients/waf.js","webpack:///./node_modules/aws-sdk/clients/workdocs.js","webpack:///./node_modules/aws-sdk/clients/lexmodelbuildingservice.js","webpack:///./node_modules/aws-sdk/clients/pricing.js","webpack:///./node_modules/aws-sdk/clients/costexplorer.js","webpack:///./node_modules/aws-sdk/clients/mediastoredata.js","webpack:///./node_modules/aws-sdk/clients/comprehend.js","webpack:///./node_modules/aws-sdk/clients/kinesisvideoarchivedmedia.js","webpack:///./node_modules/aws-sdk/clients/kinesisvideomedia.js","webpack:///./node_modules/aws-sdk/clients/kinesisvideo.js","webpack:///./node_modules/aws-sdk/clients/resourcegroups.js","webpack:///./node_modules/aws-sdk/clients/secretsmanager.js","webpack:///./node_modules/aws-sdk/clients/comprehendmedical.js","webpack:///./node_modules/aws-sdk/clients/personalize.js","webpack:///./node_modules/aws-sdk/clients/personalizeruntime.js","webpack://aws-amplify/../datastore/node_modules/uuid/v1.js?9635","webpack://aws-amplify/../datastore/node_modules/uuid/v4.js?fac1","webpack:///./node_modules/zen-push/node_modules/zen-observable/index.js","webpack:///./node_modules/zen-push/node_modules/zen-observable/zen-observable.js","webpack:///../../src/Providers/EventBuffer.ts","webpack:///../../src/Providers/AWSPinpointProvider.ts","webpack:///../../src/utils/MethodEmbed.ts","webpack:///../../src/trackers/PageViewTracker.ts","webpack:///../../../src/vendor/dom-utils/matches.ts","webpack:///../../../src/vendor/dom-utils/delegate.ts","webpack:///../../../src/vendor/dom-utils/closest.ts","webpack:///../../../src/vendor/dom-utils/parents.ts","webpack:///../../../src/vendor/dom-utils/parse-url.ts","webpack:///../../../src/Providers/AmazonPersonalizeHelper/MediaAutoTrack.ts","webpack:///../../src/trackers/EventTracker.ts","webpack:///../../src/trackers/SessionTracker.ts","webpack:///../src/Analytics.ts","webpack:///../../src/Providers/AWSKinesisProvider.ts","webpack:///../../src/Providers/AWSKinesisFirehoseProvider.ts","webpack:///../../../src/Providers/AmazonPersonalizeHelper/SessionInfoManager.ts","webpack:///../../src/Providers/AmazonPersonalizeProvider.ts","webpack:///../../src/Providers/AWSS3Provider.ts","webpack:///../src/Storage.ts","webpack:///../../src/Providers/InteractionsProvider.ts","webpack:///../../src/Providers/AWSLexProvider.ts","webpack:///../src/Interactions.ts","webpack:///../../src/Providers/XRProvider.ts","webpack:///../../src/Providers/SumerianProvider.ts","webpack:///../src/XR.ts","webpack:///../src/Predictions.ts","webpack:///../../src/Providers/Utils.ts","webpack:///../../src/Providers/IdentifyTextUtils.ts","webpack:///../../src/Providers/AmazonAIIdentifyPredictionsProvider.ts","webpack:///../../src/Providers/AmazonAIInterpretPredictionsProvider.ts","webpack:///../../src/Providers/AmazonAIPredictionsProvider.ts","webpack:///./node_modules/immer/dist/immer.esm.js","webpack:///../../src/storage/storage.ts","webpack:///../../src/sync/datastoreConnectivity.ts","webpack:///../../src/sync/merger.ts","webpack:///../../src/sync/outbox.ts","webpack:///../../../src/sync/processors/mutation.ts","webpack:///../../../src/sync/processors/sync.ts","webpack:///../../src/sync/index.ts","webpack:///../../src/datastore/datastore.ts","webpack:///./node_modules/idb/build/esm/chunk.js","webpack:///./node_modules/idb/build/esm/index.js","webpack:///../../../src/storage/adapter/indexeddb.ts"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","log","a","AWS","util","toString","update","VERSION","Signers","Protocol","Json","Query","Rest","RestJson","RestXml","XML","Builder","Parser","JSON","Model","Api","Operation","Shape","Paginator","ResourceWaiter","apiLoader","EndpointCache","events","SequentialExecutor","memoizedProperty","config","endpointCacheSize","crypto","lib","Buffer","url","querystring","realClock","environment","createEventStream","isBrowser","isNode","process","browser","base64","ieee754","isArray","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","that","length","RangeError","Uint8Array","__proto__","arg","encodingOrOffset","Error","allocUnsafe","from","TypeError","ArrayBuffer","array","byteOffset","byteLength","undefined","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","actual","write","slice","fromString","obj","isBuffer","len","checked","copy","buffer","val","type","data","fromObject","assertSize","size","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","start","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","b","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","indexOf","lastIndexOf","arr","indexSize","arrLength","valLength","String","read","buf","readUInt16BE","foundIndex","found","j","hexWrite","offset","Number","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","push","charCodeAt","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","Math","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","fromCharCode","apply","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","e","typedArraySupport","poolSize","_augment","species","configurable","fill","allocUnsafeSlow","_isBuffer","compare","x","y","concat","list","pos","swap16","swap32","swap64","arguments","equals","inspect","max","match","join","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","Array","_arr","ret","out","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","set","code","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","trim","replace","stringtrim","base64clean","src","dst","engine","navigator","userAgent","platform","version","env","AWS_EXECUTION_ENV","agent","uriEscape","output","encodeURIComponent","escape","ch","toUpperCase","uriEscapePath","parts","arrayEach","split","part","urlParse","parse","urlFormat","format","queryStringParse","qs","queryParamsToString","params","items","sortedKeys","keys","sort","ename","result","vals","item","readFileSync","path","encode","error","toBuffer","decode","toStream","readable","stream","_read","buffers","lstatSync","upperFirst","lowerFirst","ini","currentSection","map","line","section","fn","noop","callback","err","makeAsync","expectedArgs","args","pop","date","getDate","systemClockOffset","Date","getTime","iso8601","toISOString","rfc822","toUTCString","unixTimestamp","formatter","parseTimestamp","crc32Table","crc32","tbl","crc","hmac","digest","createHmac","md5","hash","sha256","algorithm","createHash","sliceFn","arraySliceFn","on","chunk","FileReader","index","reader","onerror","onload","_continueReading","back","readAsArrayBuffer","abort","each","iterFunction","idx","obj1","obj2","merge","dupe","isEmpty","prop","webkitSlice","mozSlice","isType","typeName","options","originalError","message","stack","writable","time","inherit","klass","features","newObject","ctor","constructor","__super__","mixin","hideProperties","props","isValue","opts","cachedValue","hoistPayloadMember","resp","req","request","operationName","operation","service","api","operations","payload","hasEventOutput","payloadMember","members","responsePayload","computeSha256","body","done","Stream","fs","settings","createReadStream","sha","isClockSkewed","serverTime","abs","applyClockOffset","extractRequestId","requestId","httpResponse","headers","ResponseMetadata","RequestId","addPromises","constructors","PromiseDependency","deletePromises","getPromisesDependency","Promise","ind","deletePromisesFromClass","addPromisesToClass","promisifyMethod","methodName","self","resolve","reject","isDualstackAvailable","metadata","serviceIdentifier","dualstackAvailable","calculateRetryDelay","retryCount","retryDelayOptions","customBackoff","base","random","handleRequestWithRetries","httpRequest","cb","http","HttpClient","getInstance","httpOptions","errCallback","maxRetries","retryable","delay","setTimeout","sendRequest","retryAfter","handleRequest","statusCode","defer","uuid","v4","convertPayloadToString","rules","nextTick","setImmediate","getRequestPayloadShape","input","getProfilesFromSharedConfig","iniLoader","filename","profiles","profilesFromConfig","configOptInEnv","loadFrom","isConfig","sharedConfigFileEnv","profilesFromCreds","sharedCredentialsFileEnv","profileNames","defaultProfile","imdsDisabledEnv","QueryDocumentKeys","Name","Document","OperationDefinition","VariableDefinition","Variable","SelectionSet","Field","Argument","FragmentSpread","InlineFragment","FragmentDefinition","IntValue","FloatValue","StringValue","BooleanValue","NullValue","EnumValue","ListValue","ObjectValue","ObjectField","Directive","NamedType","ListType","NonNullType","SchemaDefinition","OperationTypeDefinition","ScalarTypeDefinition","ObjectTypeDefinition","FieldDefinition","InputValueDefinition","InterfaceTypeDefinition","UnionTypeDefinition","EnumTypeDefinition","EnumValueDefinition","InputObjectTypeDefinition","DirectiveDefinition","SchemaExtension","ScalarTypeExtension","ObjectTypeExtension","InterfaceTypeExtension","UnionTypeExtension","EnumTypeExtension","InputObjectTypeExtension","BREAK","maybeNode","Boolean","kind","getVisitFn","visitor","isLeaving","kindVisitor","kindSpecificVisitor","leave","enter","specificVisitor","specificKindVisitor","print","ast","visitorKeys","inArray","edits","node","parent","ancestors","newRoot","isEdited","clone","k","editOffset","ii","editKey","editValue","splice","prev","stringify","visitFn","visit","printDocASTReducer","definitions","op","varDefs","wrap","variableDefinitions","directives","selectionSet","_ref","variable","defaultValue","_ref2","block","selections","_ref3","alias","_ref4","_ref5","_ref6","typeCondition","_ref7","_ref8","_ref9","_ref10","isDescription","escaped","indent","printBlockString","_ref11","_ref12","_ref13","values","_ref14","fields","_ref15","_ref16","_ref17","_ref18","_ref19","_ref20","operationTypes","_ref21","addDescription","_ref22","_ref23","interfaces","_ref24","every","_ref25","_ref26","_ref27","types","_ref28","_ref29","_ref30","_ref31","locations","_ref32","_ref33","_ref34","_ref35","_ref36","_ref37","_ref38","description","maybeArray","separator","filter","maybeString","_typeof","iterator","invariant","condition","_defineProperty","classObject","locationOffset","column","syntaxError","source","position","GraphQLError","blockStringValue","rawString","lines","commonIndent","leadingWhitespace","_i","isBlank","shift","createLexer","startOfFileToken","Tok","TokenKind","SOF","lastToken","token","lineStart","advance","advanceLexer","lookahead","EOF","next","readToken","COMMENT","freeze","BANG","DOLLAR","AMP","PAREN_L","PAREN_R","SPREAD","COLON","EQUALS","AT","BRACKET_L","BRACKET_R","BRACE_L","PIPE","BRACE_R","NAME","INT","FLOAT","STRING","BLOCK_STRING","getTokenDesc","printCharCode","lexer","bodyLength","startPosition","positionAfterWhitespace","col","readComment","readName","firstCode","isFloat","readDigits","readNumber","chunkStart","rawValue","readBlockString","charCode","char2hex","readString","unexpectedCharacterMessage","Kind","DOCUMENT","OPERATION_DEFINITION","VARIABLE_DEFINITION","SELECTION_SET","FIELD","ARGUMENT","FRAGMENT_SPREAD","INLINE_FRAGMENT","FRAGMENT_DEFINITION","VARIABLE","BOOLEAN","NULL","ENUM","LIST","OBJECT","OBJECT_FIELD","DIRECTIVE","NAMED_TYPE","LIST_TYPE","NON_NULL_TYPE","SCHEMA_DEFINITION","OPERATION_TYPE_DEFINITION","SCALAR_TYPE_DEFINITION","OBJECT_TYPE_DEFINITION","FIELD_DEFINITION","INPUT_VALUE_DEFINITION","INTERFACE_TYPE_DEFINITION","UNION_TYPE_DEFINITION","ENUM_TYPE_DEFINITION","ENUM_VALUE_DEFINITION","INPUT_OBJECT_TYPE_DEFINITION","DIRECTIVE_DEFINITION","SCHEMA_EXTENSION","SCALAR_TYPE_EXTENSION","OBJECT_TYPE_EXTENSION","INTERFACE_TYPE_EXTENSION","UNION_TYPE_EXTENSION","ENUM_TYPE_EXTENSION","INPUT_OBJECT_TYPE_EXTENSION","DirectiveLocation","QUERY","MUTATION","SUBSCRIPTION","SCHEMA","SCALAR","ARGUMENT_DEFINITION","INTERFACE","UNION","ENUM_VALUE","INPUT_OBJECT","INPUT_FIELD_DEFINITION","sourceObj","many","parseDefinition","loc","parseDocument","parseName","expect","peek","parseExecutableDefinition","parseTypeSystemDefinition","keywordToken","expectKeyword","parseDirectives","parseOperationTypeDefinition","unexpected","parseSchemaExtension","parseScalarTypeExtension","parseImplementsInterfaces","parseFieldsDefinition","parseObjectTypeExtension","parseInterfaceTypeExtension","parseUnionMemberTypes","parseUnionTypeExtension","parseEnumValuesDefinition","parseEnumTypeExtension","parseInputFieldsDefinition","parseInputObjectTypeExtension","parseTypeSystemExtension","peekDescription","parseOperationDefinition","experimentalFragmentVariables","parseFragmentName","parseVariableDefinitions","parseNamedType","parseSelectionSet","parseFragmentDefinition","parseOperationType","operationToken","parseVariableDefinition","experimentalVariableDefinitionDirectives","parseVariable","parseTypeReference","skip","parseValueLiteral","parseSelection","parseFragment","nameOrAlias","parseArguments","parseField","isConst","parseConstArgument","parseArgument","parseConstValue","parseValueValue","any","parseList","parseObjectField","parseObject","parseStringLiteral","parseDirective","parseSchemaDefinition","parseDescription","parseScalarTypeDefinition","parseObjectTypeDefinition","parseInterfaceTypeDefinition","parseUnionTypeDefinition","parseEnumTypeDefinition","parseInputObjectTypeDefinition","parseArgumentDefs","parseDirectiveLocation","parseDirectiveLocations","parseDirectiveDefinition","allowLegacySDLImplementsInterfaces","allowLegacySDLEmptyFields","parseFieldDefinition","parseInputValueDef","parseEnumValueDefinition","startToken","noLocation","Loc","endToken","atToken","openKind","parseFn","closeKind","nodes","FUNC_ERROR_TEXT","PLACEHOLDER","wrapFlags","argsTag","arrayTag","boolTag","dateTag","errorTag","funcTag","genTag","mapTag","numberTag","objectTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint16Tag","uint32Tag","reEmptyStringLeading","reEmptyStringMiddle","reEmptyStringTrailing","reEscapedHtml","reUnescapedHtml","reHasEscapedHtml","RegExp","reHasUnescapedHtml","reEscape","reEvaluate","reInterpolate","reIsDeepProp","reIsPlainProp","rePropName","reRegExpChar","reHasRegExpChar","reTrim","reTrimStart","reTrimEnd","reWrapComment","reWrapDetails","reSplitDetails","reAsciiWord","reEscapeChar","reEsTemplate","reFlags","reIsBadHex","reIsBinary","reIsHostCtor","reIsOctal","reIsUint","reLatin","reNoMatch","reUnescapedString","rsComboRange","rsComboMarksRange","rsBreakRange","rsMathOpRange","rsAstral","rsBreak","rsCombo","rsDigits","rsDingbat","rsLower","rsMisc","rsFitz","rsNonAstral","rsRegional","rsSurrPair","rsUpper","rsMiscLower","rsMiscUpper","reOptMod","rsSeq","rsEmoji","rsSymbol","reApos","reComboMark","reUnicode","reUnicodeWord","reHasUnicode","reHasUnicodeWord","contextProps","templateCounter","typedArrayTags","cloneableTags","stringEscapes","freeParseFloat","parseFloat","freeParseInt","freeGlobal","freeSelf","Function","freeExports","nodeType","freeModule","moduleExports","freeProcess","nodeUtil","require","binding","nodeIsArrayBuffer","isArrayBuffer","nodeIsDate","isDate","nodeIsMap","isMap","nodeIsRegExp","isRegExp","nodeIsSet","isSet","nodeIsTypedArray","isTypedArray","func","thisArg","arrayAggregator","setter","iteratee","accumulator","arrayEachRight","arrayEvery","predicate","arrayFilter","resIndex","arrayIncludes","baseIndexOf","arrayIncludesWith","comparator","arrayMap","arrayPush","arrayReduce","initAccum","arrayReduceRight","arraySome","asciiSize","baseProperty","baseFindKey","collection","eachFunc","baseFindIndex","fromIndex","fromRight","strictIndexOf","baseIsNaN","baseIndexOfWith","baseMean","baseSum","basePropertyOf","baseReduce","current","baseTimes","baseUnary","baseValues","cacheHas","cache","has","charsStartIndex","strSymbols","chrSymbols","charsEndIndex","countHolders","placeholder","deburrLetter","escapeHtmlChar","escapeStringChar","chr","hasUnicode","test","mapToArray","forEach","overArg","transform","replaceHolders","setToArray","setToPairs","stringSize","lastIndex","unicodeSize","stringToArray","unicodeToArray","asciiToArray","unescapeHtmlChar","_","runInContext","context","uid","defaults","pick","arrayProto","funcProto","objectProto","coreJsData","funcToString","idCounter","maskSrcKey","exec","IE_PROTO","nativeObjectToString","objectCtorString","oldDash","reIsNative","getPrototype","getPrototypeOf","objectCreate","propertyIsEnumerable","spreadableSymbol","isConcatSpreadable","symIterator","symToStringTag","getNative","ctxClearTimeout","clearTimeout","ctxNow","now","ctxSetTimeout","nativeCeil","ceil","nativeFloor","nativeGetSymbols","getOwnPropertySymbols","nativeIsBuffer","nativeIsFinite","nativeJoin","nativeKeys","nativeMax","nativeMin","nativeNow","nativeParseInt","nativeRandom","nativeReverse","reverse","DataView","Map","Set","WeakMap","nativeCreate","metaMap","realNames","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","valueOf","symbolToString","lodash","isObjectLike","LazyWrapper","LodashWrapper","wrapperClone","baseCreate","proto","isObject","baseLodash","chainAll","__wrapped__","__actions__","__chain__","__index__","__values__","__dir__","__filtered__","__iteratees__","__takeCount__","__views__","Hash","entries","clear","entry","ListCache","MapCache","SetCache","__data__","add","Stack","arrayLikeKeys","inherited","isArr","isArg","isArguments","isBuff","skipIndexes","isIndex","arraySample","baseRandom","arraySampleSize","shuffleSelf","copyArray","baseClamp","arrayShuffle","assignMergeValue","eq","baseAssignValue","assignValue","objValue","assocIndexOf","baseAggregator","baseEach","baseAssign","copyObject","baseAt","paths","number","lower","upper","baseClone","bitmask","customizer","isDeep","isFlat","isFull","initCloneArray","tag","getTag","isFunc","cloneBuffer","initCloneObject","getSymbolsIn","copySymbolsIn","keysIn","baseAssignIn","getSymbols","copySymbols","Ctor","cloneArrayBuffer","dataView","cloneDataView","cloneTypedArray","regexp","cloneRegExp","symbol","initCloneByTag","stacked","subValue","getAllKeysIn","getAllKeys","baseConformsTo","baseDelay","wait","baseDifference","isCommon","valuesLength","outer","computed","valuesIndex","templateSettings","getMapData","pairs","LARGE_ARRAY_SIZE","createBaseEach","baseForOwn","baseEachRight","baseForOwnRight","baseEvery","baseExtremum","isSymbol","baseFilter","baseFlatten","depth","isStrict","isFlattenable","baseFor","createBaseFor","baseForRight","baseFunctions","isFunction","baseGet","castPath","toKey","baseGetAllKeys","keysFunc","symbolsFunc","baseGetTag","isOwn","unmasked","getRawTag","objectToString","baseGt","other","baseHas","baseHasIn","baseIntersection","arrays","othLength","othIndex","caches","maxLength","seen","baseInvoke","last","baseIsArguments","baseIsEqual","equalFunc","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","convert","isPartial","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","objProps","objLength","skipCtor","othValue","compared","objCtor","othCtor","equalObjects","baseIsEqualDeep","baseIsMatch","matchData","noCustomizer","srcValue","COMPARE_PARTIAL_FLAG","baseIsNative","baseIteratee","identity","baseMatchesProperty","baseMatches","baseKeys","isPrototype","baseKeysIn","nativeKeysIn","isProto","baseLt","baseMap","isArrayLike","getMatchData","matchesStrictComparable","isKey","isStrictComparable","hasIn","baseMerge","srcIndex","mergeFunc","safeGet","newValue","isTyped","isArrayLikeObject","isPlainObject","toPlainObject","baseMergeDeep","baseNth","baseOrderBy","iteratees","orders","getIteratee","comparer","baseSortBy","objCriteria","criteria","othCriteria","ordersLength","compareAscending","order","compareMultiple","basePickBy","baseSet","basePullAll","basePullAt","indexes","previous","baseUnset","baseRepeat","baseRest","setToString","overRest","baseSample","baseSampleSize","nested","baseSetData","baseSetToString","constant","baseShuffle","baseSlice","baseSome","baseSortedIndex","retHighest","low","high","MAX_ARRAY_LENGTH","mid","baseSortedIndexBy","valIsNaN","valIsNull","valIsSymbol","valIsUndefined","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","setLow","baseSortedUniq","baseToNumber","baseToString","baseUniq","createSet","seenIndex","baseUpdate","updater","baseWhile","isDrop","baseWrapperValue","actions","action","baseXor","baseZipObject","assignFunc","valsLength","castArrayLikeObject","castFunction","stringToPath","castRest","castSlice","id","arrayBuffer","typedArray","valIsDefined","valIsReflexive","composeArgs","partials","holders","isCurried","argsIndex","argsLength","holdersLength","leftIndex","leftLength","rangeLength","isUncurried","composeArgsRight","holdersIndex","rightIndex","rightLength","isNew","createAggregator","initializer","createAssigner","assigner","sources","guard","isIterateeCall","iterable","createCaseFirst","charAt","trailing","createCompounder","words","deburr","createCtor","thisBinding","createFind","findIndexFunc","createFlow","flatRest","funcs","prereq","thru","wrapper","getFuncName","funcName","getData","isLaziable","plant","createHybrid","partialsRight","holdersRight","argPos","ary","arity","isAry","isBind","isBindKey","isFlip","getHolder","holdersCount","newHolders","createRecurry","reorder","createInverter","toIteratee","baseInverter","createMathOperation","operator","createOver","arrayFunc","createPadding","chars","charsLength","createRange","step","toFinite","baseRange","createRelationalOperation","toNumber","wrapFunc","isCurry","newData","setData","setWrapToString","createRound","precision","toInteger","pair","createToPairs","baseToPairs","createWrap","srcBitmask","newBitmask","isCombo","mergeData","createCurry","createPartial","createBind","customDefaultsAssignIn","customDefaultsMerge","customOmitClone","arrValue","flatten","otherFunc","getValue","stubArray","hasPath","hasFunc","isLength","ctorString","isMaskable","stubFalse","otherArgs","oldArray","shortOut","reference","details","insertWrapDetails","updateWrapDetails","getWrapDetails","count","lastCalled","stamp","rand","memoize","memoizeCapped","quote","subString","difference","differenceBy","differenceWith","findIndex","findLastIndex","head","intersection","mapped","intersectionBy","intersectionWith","pull","pullAll","pullAt","union","unionBy","unionWith","unzip","group","unzipWith","without","xor","xorBy","xorWith","zip","zipWith","chain","interceptor","wrapperAt","countBy","find","findLast","forEachRight","groupBy","invokeMap","keyBy","partition","sortBy","before","bindKey","WRAP_BIND_FLAG","debounce","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","invokeFunc","leadingEdge","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","cancel","flush","resolver","memoized","Cache","negate","overArgs","transforms","funcsLength","partial","partialRight","rearg","gt","gte","isError","isInteger","isNumber","isString","lt","lte","toArray","iteratorToArray","remainder","toLength","isBinary","assign","assignIn","assignInWith","assignWith","at","propsIndex","propsLength","defaultsDeep","mergeWith","invert","invertBy","invoke","omit","CLONE_DEEP_FLAG","basePick","pickBy","toPairs","toPairsIn","camelCase","word","capitalize","kebabCase","lowerCase","snakeCase","startCase","upperCase","pattern","hasUnicodeWord","unicodeWords","asciiWords","attempt","bindAll","methodNames","flow","flowRight","method","methodOf","over","overEvery","overSome","basePropertyDeep","range","rangeRight","augend","addend","divide","dividend","divisor","multiply","multiplier","multiplicand","round","subtract","minuend","subtrahend","after","castArray","compact","cond","conforms","baseConforms","properties","curry","curryRight","drop","dropRight","dropRightWhile","dropWhile","baseFill","flatMap","flatMapDeep","flatMapDepth","flattenDeep","flattenDepth","flip","fromPairs","functions","functionsIn","initial","mapKeys","mapValues","matches","matchesProperty","nthArg","omitBy","once","orderBy","propertyOf","pullAllBy","pullAllWith","remove","rest","sampleSize","setWith","shuffle","sortedUniq","sortedUniqBy","spread","tail","take","takeRight","takeRightWhile","takeWhile","tap","throttle","toPath","isArrLike","unary","uniq","uniqBy","uniqWith","unset","updateWith","valuesIn","zipObject","zipObjectDeep","entriesIn","extend","extendWith","clamp","cloneDeep","cloneDeepWith","cloneWith","conformsTo","defaultTo","endsWith","escapeRegExp","findKey","findLastKey","forIn","forInRight","forOwn","forOwnRight","inRange","baseInRange","isBoolean","isElement","isEqual","isEqualWith","isMatch","isMatchWith","isNative","isNil","isNull","isSafeInteger","isUndefined","isWeakMap","isWeakSet","strictLastIndexOf","maxBy","mean","meanBy","minBy","stubObject","stubString","stubTrue","nth","noConflict","pad","strLength","padEnd","padStart","radix","floating","temp","reduce","reduceRight","repeat","sample","some","sortedIndex","sortedIndexBy","sortedIndexOf","sortedLastIndex","sortedLastIndexBy","sortedLastIndexOf","startsWith","sum","sumBy","template","isEscaping","isEvaluating","imports","importsKeys","importsValues","interpolate","reDelimiters","evaluate","sourceURL","escapeValue","interpolateValue","esTemplateValue","evaluateValue","times","toLower","toSafeInteger","toUpper","trimEnd","trimStart","truncate","omission","search","substring","newEnd","unescape","uniqueId","prefix","eachRight","first","isFilter","takeName","dropName","checkIteratee","isTaker","lodashFunc","retUnwrapped","isLazy","useLazy","isHybrid","isUnwrapped","onlyLazy","chainName","isRight","view","getView","iterLength","takeCount","iterIndex","commit","wrapped","v1","CryptoJS","F","subtype","C","C_lib","Base","overrides","mixIn","init","$super","instance","propertyName","WordArray","sigBytes","encoder","Hex","wordArray","thisWords","thatWords","thisSigBytes","thatSigBytes","thatByte","nBytes","rcache","m_w","m_z","mask","_r","C_enc","enc","hexChars","bite","hexStr","hexStrLength","Latin1","latin1Chars","latin1Str","latin1StrLength","Utf8","decodeURIComponent","utf8Str","BufferedBlockAlgorithm","reset","_data","_nDataBytes","_append","_process","doFlush","dataWords","dataSigBytes","blockSize","nBlocksReady","nWordsReady","_minBufferSize","nBytesReady","_doProcessBlock","processedWords","C_algo","Hasher","cfg","_doReset","messageUpdate","finalize","_doFinalize","_createHelper","hasher","_createHmacHelper","HMAC","algo","Observable","isFormData","FormData","isArrayBufferView","isFile","isBlob","isStream","pipe","isURLSearchParams","URLSearchParams","isStandardBrowserEnv","product","window","document","deepMerge","punycode","Url","protocol","slashes","auth","host","port","hostname","query","pathname","href","relative","resolveObject","protocolPattern","portPattern","simplePathPattern","unwise","autoEscape","nonHostChars","hostEndingChars","hostnamePartPattern","hostnamePartStart","unsafeProtocol","hostlessProtocol","slashedProtocol","parseQueryString","slashesDenoteHost","u","queryIndex","splitter","uSplit","simplePath","lowerProto","atSign","hostEnd","hec","parseHost","ipv6Hostname","hostparts","newpart","validParts","notHost","bit","unshift","toASCII","h","ae","esc","qm","rel","tkeys","tk","tkey","rkeys","rk","rkey","v","relPath","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","isNullOrUndefined","authInHost","hasTrailingSlash","up","isAbsolute","dbits","AuthenticationDetails","ValidationData","Username","Password","AuthParameters","ClientMetadata","_proto","nbi","inBrowser","BigInteger","w","xl","xh","rr","vv","BI_RC","int2char","BI_RM","intAt","nbv","nbits","Montgomery","mp","subTo","u0","am","mi","sh","DB","bs","cbs","bm","ds","DV","q","pm","pt","copyTo","ts","ms","nsh","ys","y0","yt","d1","FV","d2","qd","km","compareTo","z","g","k1","g2","is1","r2","randomBytes","AuthenticationHelper","hexHash","N","_this","largeAValue","hexRandom","randomBigInt","deviceGroupKey","username","_this2","combinedString","hashedString","padHex","SaltToHashDevices","verifierDevicesNotPadded","_this3","A","B","hashHex","SHA256","ikm","salt","infoBitsWordArray","ikmWordArray","saltWordArray","prk","HmacSHA256","password","serverBValue","_this4","calculateU","UValue","usernamePassword","usernamePasswordHash","xValue","sValue","hkdf","_this5","gModPowXN","intValue2","err2","bigInt","hashStr","CognitoJwtToken","jwtToken","CognitoAccessToken","_CognitoJwtToken","subClass","superClass","_inheritsLoose","Derived","AccessToken","_temp","CognitoIdToken","IdToken","CognitoRefreshToken","RefreshToken","CognitoUserSession","ClockDrift","accessToken","idToken","adjusted","monthNames","weekNames","DateHelper","weekDay","month","day","hours","minutes","seconds","CognitoUserAttribute","Value","dataMemory","MemoryStorage","StorageHelper","exception","CognitoUser","pool","keyPrefix","signInUserSession","authenticationFlowType","authDetails","authParameters","clientMetaData","jsonReq","AuthFlow","ClientId","challengeName","challengeParameters","authenticateUserPlainUsernamePassword","authenticateUserDefaultAuth","authenticationHelper","getUserPoolId","dateHelper","deviceKey","errOnAValue","aValue","errOnHkdf","dateNow","signatureString","Base64","challengeResponses","jsonReqResp","ChallengeName","ChallengeResponses","Session","respondToAuthChallenge","challenge","challengeCallback","errChallenge","dataChallenge","errAuthenticate","dataAuthenticate","getUserContextData","authResult","userAttributes","rawRequiredAttributes","requiredAttributes","userAttributesPrefix","getCognitoUserSession","newDeviceMetadata","errGenHash","deviceSecretVerifierConfig","Salt","PasswordVerifier","DeviceKey","DeviceSecretVerifierConfig","DeviceName","errConfirm","dataConfirm","newPassword","requiredAttributeData","clientMetadata","finalUserAttributes","_this6","errAValue","errHkdf","confirmationCode","forceAliasCreation","ConfirmationCode","ForceAliasCreation","answerChallenge","_this7","mfaType","_this8","mfaTypeSelection","oldUserPassword","newUserPassword","PreviousPassword","ProposedPassword","getAccessToken","mfaOptions","DeliveryMedium","AttributeName","MFAOptions","getJwtToken","smsMfaSettings","softwareTokenMfaSettings","SMSMfaSettings","SoftwareTokenMfaSettings","_this9","attributes","UserAttributes","userData","attributeList","attribute","userAttribute","_this10","bypassCache","storage","getItem","latestUserData","refresh","refreshError","UserAttributeNames","idTokenKey","accessTokenKey","refreshTokenKey","clockDriftKey","refreshToken","clockDrift","cachedSession","_this11","lastUserKey","deviceKeyKey","authenticationResult","getIdToken","getRefreshToken","randomPasswordKey","deviceGroupKeyKey","attributeName","Code","_this12","onFailure","onSuccess","DeviceRememberedStatus","paginationToken","Limit","PaginationToken","_this13","_this14","_this15","totpCode","friendlyDeviceName","_this16","UserCode","FriendlyDeviceName","errRespond","dataRespond","UserAgent","Client","endpoint","region","fetch","response","_error","ex","CognitoUserPool","UserPoolId","AdvancedSecurityDataCollectionFlag","validationData","cognitoUser","Pool","Storage","returnData","user","userConfirmed","userSub","codeDeliveryDetails","CodeDeliveryDetails","lastAuthUser","AmazonCognitoAdvancedSecurityData","amazonCognitoAdvancedSecurityDataConst","advancedSecurityData","EncodedData","CookieStorage","Cookies","expires","domain","secure","cookies","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","title","argv","versions","addListener","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","cwd","chdir","umask","client","observer","OldCookies","converter","stringifiedAttributes","cookie","json","jar","getJSON","withConverter","Service","services","STS","defineService","model","paginators","pagination","Collection","shape","memberName","enum","location","xmlName","queryName","locationName","streaming","isStreaming","requiresLength","isComposite","idempotencyToken","jsonvalue","sensitive","eventstream","event","eventpayload","eventheader","timestampFormat","isTimestampFormatSet","endpointdiscoveryid","hostLabel","documentation","documentationUrl","xmlAttribute","toWireFormat","toType","CompositeShape","flattened","StructureShape","requiredMap","firstInit","isShape","member","xmlOrder","memberNames","iLen","isEventPayload","eventHeaderMemberNames","isEventHeader","required","resultWrapper","xmlNamespace","uri","ListShape","oldName","MapShape","StringShape","nullLessProtocols","isJsonValue","BinaryShape","isSensitive","secureBuf","Base64Shape","BooleanShape","normalizedTypes","character","double","long","short","biginteger","bigdecimal","blob","refShape","shapes","filteredKeys","InlineShape","origType","Rekognition","populateHostPrefix","generateURI","endpointPath","operationPath","queryString","queryStringSet","paramValue","regex","plus","buildRequest","httpMethod","populateMethod","httpPath","populateURI","memberValue","populateHeaders","extractError","extractData","header","isLocationName","viewStrings","isEmptyData","convertToBuffer","BYTES_PER_ELEMENT","webpackPolyfill","deprecate","children","H","K","isPrime","sqrtN","sqrt","factor","getFractionalBits","nPrime","W","_hash","M","f","gamma0x","gamma0","gamma1x","gamma1","maj","sigma0","t1","nBitsTotal","nBitsLeft","_map","base64Chars","triplet","paddingChar","base64Str","base64StrLength","reverseMap","_reverseMap","paddingIndex","bits1","bits2","parseLoop","LexRuntime","JsonBuilder","JsonParser","targetPrefix","jsonVersion","builder","build","__type","Message","statusMessage","convertResponseTypes","parser","translate","structure","struct","memberShape","translateStructure","translateMap","translateList","translateScalar","shapeMembers","hostPrefixEnabled","labels","hostPattern","operationModel","isEndpointOperation","endpointOperation","endpointDiscoveryRequired","hasEndpointDiscover","hostPrefix","hostPrefixNotation","expandHostPrefix","prependEndpointPrefix","label","strictDeepEqual","second","keysSeen","key2","isFalse","trimLeft","TYPE_NUMBER","TYPE_STRING","basicTokens","operatorStartToken","skipChars","isNum","Lexer","tokenize","identifier","tokens","_current","_consumeUnquotedIdentifier","_consumeNumber","_consumeLBracket","_consumeQuotedIdentifier","_consumeRawStringLiteral","literal","_consumeLiteral","_consumeOperator","startingChar","literalString","_looksLikeJSON","bindingPower","TreeInterpreter","runtime","Runtime","interpreter","_interpreter","functionTable","_func","_functionAbs","_signature","avg","_functionAvg","_functionCeil","contains","_functionContains","_functionEndsWith","_functionFloor","_functionLength","_functionMap","_functionMax","_functionMerge","variadic","_functionMaxBy","_functionSum","_functionStartsWith","_functionMin","_functionMinBy","_functionType","_functionKeys","_functionValues","_functionSort","_functionSortBy","_functionJoin","_functionReverse","_functionToArray","_functionToString","_functionToNumber","_functionNotNull","expression","_loadTokens","_lookahead","_lookaheadToken","rbp","leftToken","_advance","left","nud","currentToken","led","right","Not","_parseProjectionRHS","Star","_parseMultiselectHash","Flatten","_parseIndexExpression","_projectIfSlice","_parseMultiselectList","Expref","_match","_errorToken","tokenName","Dot","_parseDotRHS","Pipe","Or","And","Filter","_parseComparator","tokenType","_parseSliceExpression","indexExpr","expressions","keyToken","keyName","identifierTypes","matched","field","collected","sliceParams","computeSliceParams","stop","objValues","filtered","finalResults","original","merged","child","resolvedArgs","callFunction","refNode","jmespathType","arrayLength","stepValueNegative","capSliceRange","actualValue","functionEntry","_validateArgs","signature","pluralized","currentSpec","actualType","typeMatched","_getTypeName","_typeMatches","expected","argValue","searchStr","suffix","originalStr","reversedStr","reversedArray","inputArray","exprefNode","elements","maxElement","localeCompare","minElement","listToSum","joinChar","convertedValue","sortedArray","requiredType","decorated","exprA","exprB","maxRecord","resolvedArray","keyFunction","createKeyFunction","maxNumber","minRecord","minNumber","allowedTypes","msg","compile","extendStatics","setPrototypeOf","__extends","__","__assign","__rest","__decorate","decorators","desc","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","__awaiter","_arguments","P","generator","fulfilled","rejected","then","__generator","sent","trys","ops","verb","__exportStar","__values","__read","ar","__spread","__spreadArrays","il","jl","__await","__asyncGenerator","asyncIterator","resume","fulfill","settle","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","default","__importDefault","__classPrivateFieldGet","receiver","privateMap","__classPrivateFieldSet","Kinesis","waiters","Firehose","PersonalizeEvents","S3","Translate","Polly","util_buffer_from_1","fromUtf8","toUtf8","QueryParamSerializer","Version","apiVersion","Action","serialize","Errors","origRules","tmp","_XAMZRequestId","requestIdShape","nameTr","applyContentTypeHeader","payloadShape","populateBody","isEventStream","streamsApiVersion","rootElement","toXML","endpointPrefix","signingName","globalEndpoint","signatureVersion","serviceAbbreviation","serviceFullName","serviceId","endpointoperation","paginator","waiter","requestUri","authtype","endpointdiscovery","errors","idempotentMembers","isIdempotent","topLevelShape","hasEventStream","input_token","limit_key","more_results","output_token","result_key","_events","eventName","listener","toHead","onAsync","_isAsync","eventArgs","doneCallback","callListeners","prevError","callNextListener","_haltHandlersOnError","addListeners","callbacks","addNamedListener","addNamedAsyncListener","addNamedListeners","Credentials","expired","expireTime","refreshCallbacks","creds","credentials","accessKeyId","secretAccessKey","sessionToken","expiryWindow","needsRefresh","currentTime","adjustedTime","coalesceRefresh","sync","load","getPromise","refreshPromise","CredentialProviderChain","providers","defaultProviders","resolveCallbacks","resolveNext","provider","getErr","resolvePromise","Endpoint","sslEnabled","HttpRequest","_userAgent","setUserAgent","getUserAgentHeaderName","appendToUserAgent","agentPartial","getUserAgent","updateEndpoint","endpointStr","newEndpoint","HttpResponse","createUnbufferedStream","singleton","V3","RequestSigner","addAuthorization","datetime","authorization","signedHeaders","headersToSign","canonicalHeaders","stringToSign","cachedSecret","cacheQueue","v4Identifier","createScope","serviceName","getSigningKey","shouldCache","cacheKey","kDate","kRegion","kService","signingKey","emptyCache","getRandomValues","msCrypto","rnds8","rnds","byteToHex","bth","CognitoIdentity","superInit","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","typedArrayByteLength","utils","paramsSerializer","serializedParams","hashmarkIndex","__CANCEL__","normalizeHeaderName","DEFAULT_CONTENT_TYPE","setContentTypeIfUnset","adapter","XMLHttpRequest","transformRequest","transformResponse","xsrfCookieName","xsrfHeaderName","maxContentLength","validateStatus","status","common","buildURL","buildFullPath","parseHeaders","isURLSameOrigin","createError","requestData","requestHeaders","Authorization","btoa","fullPath","baseURL","open","onreadystatechange","readyState","responseURL","responseHeaders","getAllResponseHeaders","responseType","responseText","statusText","onabort","ontimeout","timeoutErrorMessage","xsrfValue","withCredentials","setRequestHeader","onDownloadProgress","addEventListener","onUploadProgress","upload","cancelToken","promise","send","enhanceError","config1","config2","valueFromConfig2Keys","mergeDeepPropertiesKeys","defaultToConfig2Keys","axiosKeys","otherKeys","Cancel","SHORT_TO_HEX","HEX_TO_SHORT","encodedByte","fromHex","encoded","util_hex_encoding_1","Int64","fromNumber","negative","tslib_1","Crc32","checksum","e_1","_a","data_1","data_1_1","byte","lookupTable","e_1_1","return","typeOf","wrapperName","memberTypeToSetType","DynamoDBSet","initialize","validate","detectType","Pinpoint","localStorage","setItem","removeItem","MESSAGE_TYPE","errorStr","validKey","ERROR","INVALID_TYPE","scope","OK","text","CONNECT_TIMEOUT","SUBSCRIBE_TIMEOUT","UNSUBSCRIBE_TIMEOUT","PING_TIMEOUT","INTERNAL_ERROR","CONNACK_RETURNCODE","SOCKET_ERROR","SOCKET_CLOSE","MALFORMED_UTF","UNSUPPORTED","INVALID_STATE","INVALID_ARGUMENT","UNSUPPORTED_OPERATION","INVALID_STORED_DATA","INVALID_MQTT_MESSAGE_TYPE","MALFORMED_UNICODE","BUFFER_FULL","CONNACK_RC","0","1","2","3","4","5","substitutions","part1","part2","MqttProtoIdentifierv3","MqttProtoIdentifierv4","WireMessage","decodeMessage","digit","startingPos","messageInfo","remLength","endPos","wireMessage","sessionPresent","returnCode","qos","readUint16","topicName","parseUTF8","messageIdentifier","retained","duplicate","destinationName","payloadMessage","writeUint16","writeString","utf8Length","stringToUTF8","UTF8Length","lowCharCode","utf16","byte1","byte2","byte3","byte4","willMessagePayloadBytes","topicStrLength","destinationNameLength","mqttVersion","clientId","willMessage","payloadBytes","userName","topics","requestedQos","mbi","numBytes","encodeMBI","byteStream","connectFlags","cleanSession","keepAliveInterval","Pinger","_client","_keepAliveInterval","isReset","pingReq","doTimeout","pinger","doPing","_trace","socket","_disconnected","Timeout","timeoutSeconds","ClientImpl","WebSocket","_wsuri","_localKey","_msg_queue","_buffered_msg_queue","_sentMessages","_receivedMessages","_notify_msg_sent","_message_identifier","_sequence","restore","connected","maxMessageIdentifier","connectOptions","hostIndex","onConnected","onConnectionLost","onMessageDelivered","onMessageArrived","traceFunction","_connectTimeout","sendPinger","receivePinger","_reconnectInterval","_reconnecting","_reconnectTimeout","disconnectedPublishing","disconnectedBufferSize","receiveBuffer","_traceBuffer","_MAX_TRACE_ENTRIES","connect","connectOptionsMasked","_traceMask","uris","_doConnect","subscribe","subscribeOptions","grantedQos","invocationContext","errorCode","errorMessage","timeOut","_requires_ack","_schedule_message","unsubscribe","unsubscribeOptions","sequence","disconnect","getTraceLog","startTrace","stopTrace","wsurl","useSSL","uriParts","binaryType","onopen","_on_socket_open","onmessage","_on_socket_message","_on_socket_error","onclose","_on_socket_close","_process_queue","store","storedMessage","pubRecReceived","hex","messageBytes","payloadHex","_socket_send","messageCount","messages","_deframeMessages","_handleMessage","errorStack","sentMessage","receivedMessage","sequencedMessages","msgId","pubRelMessage","reconnected","_connected","_receivePublish","_receiveMessage","pubCompMessage","wireMessageMasked","pubAckMessage","pubRecMessage","reconnect","_reconnect","errorText","close","mqttVersionExplicit","record","severity","traceObject","masked","traceObjectMasked","attr","newPayload","defineProperties","newDestinationName","newQos","newRetained","newTopic","newDuplicate","ipv6AddSBracket","clientIdLength","newOnConnected","newDisconnectedPublishing","newDisconnectedBufferSize","newOnConnectionLost","newOnMessageDelivered","newOnMessageArrived","trace","hosts","ports","stringPayload","usingURIs","ipv6","topic","publish","isConnected","Textract","methods","_observer","sendMessage","_observers","to","closed","complete","hasObserver","PushStream","_observable","notifyStart","addObserver","delete","deleteObserver","pause","notifyPause","getLocation","lineRegexp","highlightSourceAtLocation","firstLineColumnOffset","whitespace","lineIndex","lineOffset","lineNum","columnOffset","columnNum","existingLines","padLen","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","printPrefixedLines","positions","extensions","_nodes","_source","_locations","_positions","_extensions","captureStackTrace","printedLocations","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","printError","clearFn","_id","_clearFn","setInterval","clearInterval","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","registerImmediate","html","channel","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","handle","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","canUsePostMessage","MessageChannel","port1","port2","createElement","documentElement","script","removeChild","appendChild","attachEvent","task","ucfirst","isQueryName","serializeStructure","serializeMember","memberRules","serializeList","valueName","serializeMap","XmlNode","XmlText","XmlBuilder","xml","isXmlAttribute","addAttribute","element","addChildNode","applyNamespaces","xmlKey","xmlValue","entryKey","entryValue","serializeScalar","isRoot","xmlNamespaceUri","xmlNamespacePrefix","noEmpty","escapeAttribute","removeAttribute","hasChildren","xmlText","attributeNames","escapeElement","svc","LRU_1","maxSize","LRUCache","put","keyString","getKeyString","endpointRecord","populateValue","records","Expire","identifiers","identifierNames","identifierName","endpoints","Address","CachePeriodInMinutes","empty","LinkedListNode","nodeMap","sizeLimit","prependToList","headerNode","tailNode","removeFromTail","prevNode","detachFromList","key_1","newNode","regionConfig","clientCount","loadServiceClass","ServiceClass","originalConfig","_clientId","svcConfig","Config","validateService","endpointFromTemplate","setEndpoint","addDefaultMonitoringListeners","clientSideMonitoring","_clientSideMonitoring","publisher","eventHandler","serviceConfig","apiConfig","defineServiceApi","apiVersions","getLatestServiceClass","getLatestServiceVersion","selectedVersion","defaultRetryCount","customizeRequests","customRequestHandler","makeRequest","Request","addAllRequestListeners","attachMonitoringEmitter","makeUnauthenticatedRequest","toUnauthenticated","waitFor","state","EventListeners","Core","serviceInterface","CorePost","paramValidation","VALIDATE_PARAMETERS","logger","Logger","setupRequestListeners","apiCallEvent","monitoringEvent","Type","Region","MaxRetriesExceeded","FinalHttpStatusCode","FinalAwsException","FinalAwsExceptionMessage","FinalSdkException","FinalSdkExceptionMessage","apiAttemptEvent","Fqdn","HttpStatusCode","_unAuthenticated","AccessKey","SessionToken","XAmznRequestId","XAmzRequestId","XAmzId2","attemptFailEvent","AwsException","AwsExceptionMessage","SdkException","SdkExceptionMessage","attemptTimestamp","attemptStartRealTime","attemptLatency","callStartRealTime","callTimestamp","attemptCount","Timestamp","AttemptLatency","AttemptCount","latency","Latency","getSignerClass","getVersion","successfulResponse","numRetries","retryDelays","retryableError","timeoutError","networkingError","expiredCredentialsError","throttledError","clockSkewError","getSkewCorrectedDate","newServerTime","paginationConfig","throwException","defineMethods","_serviceMap","addVersions","Publisher","publisherConfig","configProvider","enabled","superclass","setApi","isApi","hasService","attachOn","baseClass","applyConfig","regionPrefix","generateRegionPrefix","derivedKeys","patterns","useDualstack","isGlobalEndpoint","PromisesDependency","extractCredentials","getCredentials","finish","credError","credentialProvider","allowUnknownKeys","loadFromPath","fileSystemCreds","FileSystemCredentials","maxRedirects","s3ForcePathStyle","s3BucketEndpoint","s3DisableBodySigning","computeChecksums","correctClockSkew","customUserAgent","dynamoDbCrc32","signatureCache","useAccelerateEndpoint","endpointDiscoveryEnabled","setPromisesDependency","dep","ManagedUpload","DISCOVER_ENDPOINT","discoverEndpoint","addAsync","validation","ParamValidator","haltHandlersOnError","V4","getOperationAuthtype","signer","setServiceClientId","signedAt","httpResp","didCallback","errCode","executeSend","_abortCallback","dateHeader","total","progress","loaded","redirect","redirectCount","retryDelay","willRetry","errno","delta","startTime","ansi","isTTY","censoredParams","filterSensitiveLog","inputShape","subShapeName","subShape","buildMessage","endpointDiscoveryEnabledEnvs","getCacheKey","marshallCustomIdentifiers","marshallCustomIdentifiersHelper","endpointDiscoveryId","optionalDiscoverEndpoint","endpointCache","endpointRequest","Identifiers","addApiVersionHeader","RETRY_CHECK","Endpoints","requestQueue","requiredDiscoverEndpoint","cacheKeyStr","errorParams","pendingRequests","requestContext","invalidateCachedEndpoints","isFalsy","_originalConfig","hasCustomEndpoint","isPresigned","configFile","sharedFileConfig","AWS_PROFILE","endpoint_discovery_enabled","isEndpointDiscoveryApplicable","invalidateCachedEndpoint","getOwnPropertyDescriptors","descriptors","formatRegExp","objects","noDeprecation","warned","throwDeprecation","traceDeprecation","console","debugEnviron","debugs","ctx","stylize","stylizeNoColor","colors","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styleType","style","styles","recurseTimes","primitive","simple","formatPrimitive","visibleKeys","arrayToHash","getOwnPropertyNames","formatError","braces","formatProperty","formatArray","cur","numLinesEst","reduceToSingleString","re","debuglog","NODE_DEBUG","pid","isPrimitive","months","timestamp","getHours","getMinutes","getSeconds","getMonth","inherits","origin","kCustomPromisifiedSymbol","callbackifyOnRejected","reason","newReason","promisify","promiseResolve","promiseReject","custom","callbackify","callbackified","maybeCb","rej","superCtor","super_","TempCtor","AcceptorStateMachine","jmespath","hardErrorStates","success","fsm","setupStates","transition","_asm","currentState","machine","Domain","domainEmitter","domainThrown","addState","Response","states","emitEvent","runTo","eachPage","wrappedCallback","hasNextPage","nextPage","eachItem","resultKey","continueIteration","isPageable","streams","PassThrough","HTTP_DATA","HTTP_ERROR","expectedLen","shouldCheckContentLength","receivedLen","checkContentLengthAndEmit","httpStream","lengthAccumulator","_write","unpipe","eventParameters","presign","Presign","sign","toGet","VALIDATE_CREDENTIALS","SIGN","buildAsGet","finalState","bindObject","inputError","fail","accept","acceptState","failState","nextPageTokens","inputTokens","inputToken","cacheNextPageTokens","moreResults","exprs","outputToken","expr","CHECK_ACCEPTORS","_waiter","acceptors","acceptorMatched","acceptor","matcher","matchers","argument","setSuccess","setError","loadWaiterConfig","pathAll","results","numResults","pathAny","$waiter","maxAttempts","serviceClientId","getServiceClientId","V2","V3Https","SignatureVersion","SignatureMethod","AWSAccessKeyId","SecurityToken","Signature","v4Credentials","updateForPresigned","addHeaders","credString","credentialString","isSignableHeader","lowerKey","sep","hexEncodedHash","canonicalString","hexEncodedBodyHash","canonicalHeaderValues","unsignableHeaders","subResources","canonicalizedAmzHeaders","canonicalizedResource","amzHeaders","resource","virtualHostedBucket","resources","param","subresource","secret","expiresHeader","signedUrlBuilder","signerClass","signedUrlSigner","parsedUrl","queryParams","SET_CONTENT_LENGTH","COMPUTE_SHA256","validateMember","validateStructure","paramName","validateType","memberContext","validateList","validateMap","validateScalar","validateRange","mapCount","validateString","validatePayload","validateNumber","validTypes","validateEnum","validatePattern","validateUri","descriptor","acceptedTypes","foundInvalidType","acceptedType","vowel","castedValue","Blob","_nodeId","_clockseq","rng","bytesToUuid","_lastMSecs","_lastNSecs","clockseq","seedBytes","nsecs","dt","tl","tmh","Hmac","Md5","Sha1","Sha256","alg","createSign","hashUtils","hashCtor","inner","BLOCK_SIZE","bufferHash","bufferFromSecret","toHash","finished","b64","lens","getLens","validLen","placeHoldersLen","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","len2","encodeChunk","lookup","num","isLE","mLen","eLen","eMax","eBias","nBits","NaN","rt","LN2","bufferLength","bytesHashed","cmn","ff","gg","hh","sourceData","setUint8","hashBuffer","undecoratedLength","bitsHashed","setUint32","buff","getUint32","h0","h1","h2","h3","h4","totalLength","processBlock","outView","KEY","MAX_HASHABLE_LENGTH","bufferView","state0","state1","state2","state3","state4","state5","state6","state7","t1_1","t2_1","t2","maxInt","regexPunycode","regexNonASCII","regexSeparators","stringFromCharCode","mapDomain","ucs2decode","extra","counter","ucs2encode","digitToBasic","flag","adapt","numPoints","firstTime","baseMinusTMin","basic","oldi","baseMinusT","inputLength","bias","handledCPCount","basicLength","currentValue","handledCPCountPlusOne","qMinusT","maxKeys","kstr","vstr","xs","stringifyPrimitive","objectKeys","ks","performance","eventMessageChunker","parseEvent","eventMessages","parseMessage","parsedMessage","messageType","parseError","eventType","eventModel","eventPayloadMemberName","eventHeaderNames","splitMessage","nameLength","binaryLength","stringLength","uuidChars","PRELUDE_LENGTH","expectedPreludeChecksum","PRELUDE_MEMBER_LENGTH","expectedMessageChecksum","headersEnd","TemporaryCredentials","masterCredentials","loadMasterCredentials","RoleArn","RoleSessionName","createClients","assumeRole","getSessionToken","credentialsFrom","AccessKeyId","SecretAccessKey","Expiration","assumeRoleWithWebIdentity","assumeRoleWithSAML","ChainableTemporaryCredentials","tokenCodeFn","SerialNumber","stsConfig","getTokenCode","tokenCode","TokenCode","WebIdentityCredentials","clientConfig","_clientConfig","CognitoIdentityCredentials","localStorageKey","_identityId","loadCachedId","IdentityId","identityId","getId","clearIdOnNotAuthorized","getCredentialsFromSTS","getCredentialsForIdentity","clearCachedId","poolId","IdentityPoolId","loginId","LoginId","cognito","loadCredentials","SecretKey","cacheId","getOpenIdToken","WebIdentityToken","Token","webIdentityCredentials","webErr","sts","getStorage","Logins","actualProviders","cognitoConfig","setStorage","SAMLCredentials","DomXmlParser","getElementByTagName","getElementsByTagName","parentNode","parseXml","parseStructure","tagName","firstElementChild","nodeName","textContent","nextElementSibling","parseMap","childNodes","parseUnknown","getAttribute","parseScalar","xmlChild","DOMParser","parseFromString","errorElement","ActiveXObject","async","loadXML","EventEmitter","XHRClient","emitter","xhr","headersEmitted","HEADERS_RECEIVED","DONE","finishRequest","evt","xhrAsync","xhrWithCredentials","rawHeaders","ab","ReflectOwnKeys","R","ReflectApply","ownKeys","NumberIsNaN","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","_getMaxListeners","_addListener","prepend","existing","warning","newListener","warn","onceWrapper","fired","wrapFn","_onceWrap","_listeners","unwrap","evlistener","unwrapListeners","arrayClone","listenerCount","setMaxListeners","getMaxListeners","doError","er","handler","originalListener","spliceOne","rawListeners","eventNames","_classCallCheck","Constructor","_defineProperties","_createClass","protoProps","staticProps","hasSymbols","hasSymbol","getSymbol","observable","SymbolIterator","SymbolObservable","SymbolSpecies","getMethod","getSpecies","isObservable","hostReportError","enqueue","cleanupSubscription","subscription","cleanup","_cleanup","closeSubscription","_queue","_state","notifySubscription","onNotify","flushSubscription","Subscription","subscriber","subscriptionObserver","SubscriptionObserver","_subscription","_subscriber","hasSeed","hasValue","seed","acc","_len","_key","startNext","subscriptions","completeIfDone","_item","_len2","_key2","_hasher","hasherBlockSize","hasherBlockSizeBytes","oKey","_oKey","iKey","_iKey","oKeyWords","iKeyWords","innerHash","operationsWith200StatusCodeError","regionRedirectErrorCodes","getSignatureVersion","defaultApiVersion","userDefinedVersion","regionDefinedVersion","shouldDisableBodySigning","validateScheme","validateBucketEndpoint","correctBucketRegionFromCache","validateBucketName","addContentType","computeContentMd5","computeSseCustomerKeyMd5","addExpect100Continue","VALIDATE_REGION","requestBucketRegion","prepareSignedUrl","reqRegionForNetworkingError","disableBodySigning","scheme","SSECustomerKey","CopySourceSSECustomerKey","Bucket","bucket","Key","slashIndex","isValidAccelerateOperation","pathStyleBucketName","removeVirtualHostedBucketFromPath","encodedS3Key","Body","contentType","charsetName","computableChecksumOperations","putBucketCors","putBucketLifecycle","putBucketLifecycleConfiguration","putBucketTagging","deleteObjects","putBucketReplication","putObjectLegalHold","putObjectRetention","putObjectLockConfiguration","willComputeChecksums","ContentMD5","bucketName","dnsCompatibleBucketName","ipAddress","dots","_requestRegionForBucket","bucketRegionCache","updateReqBucketRegion","s3Config","newConfig","Host","LocationConstraint","createBucketConfiguration","CreateBucketConfiguration","clearBucketRegionCache","extractRequestIds","cachedRegion","codes","304","403","400","404","reqOperation","reqParams","MaxKeys","regionReq","getRegionReq","listObjects","buckets","requestRegion","extendedRequestId","cfId","getSignedUrl","Expires","createPresignedPost","boundParams","finalizePost","preparePostFields","Fields","Conditions","conditions","expiresInSeconds","signingDate","shortDate","credential","Policy","preparePostPolicy","expiration","noPresignedContentLength","ContentLength","createBucket","uploader","completeInfo","fillQueue","configure","partSize","minPartSize","queueSize","leavePartsOnError","tags","bindServiceObject","validateBody","adjustTotalBytes","maxTotalParts","failed","runFill","fillBuffer","fillStream","partBuffers","isDoneChunking","numParts","totalPartNumbers","doneParts","finishMultiPart","singlePart","totalBytes","newPartSize","partPos","totalChunkedBytes","totalUploadedBytes","activeParts","multipartReq","partBufferLength","bodyLen","nextChunk","pbuf","isDoneSending","partNumber","Tagging","getTaggingHeader","putObject","_managedUpload","finishSinglePart","ETag","UploadId","uploadPart","queueChunks","createMultipartUpload","kvPairStrings","partParams","PartNumber","partInfo","_lastUploadedBytes","abortMultipartUpload","completeParams","MultipartUpload","Parts","completeMultipartUpload","Location","putObjectTagging","TagSet","httpReq","info","Axios","mergeConfig","createInstance","defaultConfig","axios","instanceConfig","CancelToken","isCancel","all","promises","InterceptorManager","dispatchRequest","interceptors","getUri","handlers","use","eject","transformData","throwIfCancellationRequested","throwIfRequested","fns","normalizedName","isAxiosError","fileName","lineNumber","columnNumber","isAbsoluteURL","combineURLs","requestedURL","relativeURL","ignoreDuplicateOf","originURL","msie","urlParsingNode","resolveURL","setAttribute","requestURL","toGMTString","executor","Presigner","_operations","modifyInputMembers","modifiedInput","convertPostToGet","getSynthesizeSpeechUrl","HeaderMarshaller_1","splitMessage_1","crc32_1","EventStreamMarshaller","headerMarshaller","HeaderMarshaller","marshall","unmarshall","Int64_1","e_2","_b","chunks","_c","_d","headerName","formatHeaderValue","carry","chunks_1","chunks_1_1","e_2_1","shortView","setInt16","intView","setInt32","longBytes","binView","setUint16","binBytes","utf8Bytes","strView","strBytes","tsBytes","UUID_PATTERN","uuidBytes","getUint8","BOOLEAN_TAG","BYTE_TAG","getInt8","SHORT_TAG","getInt16","INT_TAG","getInt32","LONG_TAG","getUint16","BINARY_TAG","STRING_TAG","TIMESTAMP_TAG","UUID_TAG","messageLength","headerLength","checksummer","buffer_1","is_array_buffer_1","ACM","APIGateway","ApplicationAutoScaling","AutoScaling","CloudFormation","CloudFront","CloudHSM","CloudTrail","CloudWatch","CloudWatchEvents","CloudWatchLogs","CodeBuild","CodeCommit","CodeDeploy","CodePipeline","CognitoIdentityServiceProvider","CognitoSync","ConfigService","CUR","DeviceFarm","DirectConnect","DynamoDB","DynamoDBStreams","EC2","ECR","ECS","EFS","ElastiCache","ElasticBeanstalk","ELB","ELBv2","EMR","ElasticTranscoder","GameLift","IAM","Inspector","Iot","IotData","KMS","Lambda","MachineLearning","MarketplaceCommerceAnalytics","MTurk","MobileAnalytics","OpsWorks","RDS","Redshift","Route53","Route53Domains","ServiceCatalog","SES","SNS","SQS","SSM","StorageGateway","WAF","WorkDocs","LexModelBuildingService","Pricing","CostExplorer","MediaStoreData","Comprehend","KinesisVideoArchivedMedia","KinesisVideoMedia","KinesisVideo","ResourceGroups","SecretsManager","ComprehendMedical","Personalize","PersonalizeRuntime","setAcceptHeader","Accept","exportType","base64Encode","queryEncode","replacements","signPolicy","policy","privateKey","signWithCannedPolicy","keyPairId","Statement","Resource","Condition","DateLessThan","signWithCustomPolicy","determineScheme","getRtmpUrl","rtmpUrl","handleError","handleSuccess","Signer","getSignedCookie","signatureHash","cookieHash","getResource","signedUrl","EXTRACT_DATA","checkCrc32","crc32IsValid","Translator","DocumentClient","attrValue","putItem","makeServiceRequest","setupRequest","setupResponse","serviceClientOperationsMap","batchGet","batchWrite","scan","transactGet","transactWrite","getTranslator","translator","rawParams","translateInput","outputShape","translateOutput","convertEmptyValues","wrapNumbers","NumberValue","convertNumber","formatMap","formatted","Converter","convertInput","L","formatList","nonEmptyValues","Binary","filterEmptySetValues","formatSet","S","BOOL","convertOutput","DynamoDBNumberValue","EXTRACT_ERROR","buildCopySnapshotPresignedUrl","PresignedUrl","_subRequest","DestinationRegion","SourceRegion","newReq","RequestID","blobPayloadOutputOps","validateResponseBody","bodyCheck","buildEndpoint","PredictEndpoint","crossRegionOperations","PreSignedUrl","doesParamValidation","buildCrossRegionPresignedUrl","destinationRegion","requiredAuthTokenOptions","convertUrlToAuthToken","getAuthToken","hasCallback","optionsValidation","validateAuthTokenOptions","serviceOptions","modifyRequestForAuthToken","DBUser","sanitizeUrl","verifySendMessageChecksum","verifySendMessageBatchChecksum","verifyReceiveMessageChecksum","MD5OfMessageBody","MessageBody","calculatedMd5","calculateChecksum","throwInvalidChecksumError","MessageId","messageIds","Successful","Id","Entries","isChecksumValid","Messages","MD5OfBody","ids","QueueUrl","addMethods","subscriptionClosed","start$0","cleanup$0","m$0","m$1","m$2","__$0","__this","observable$0","__$1","item$0","i$0","of","i$1","observableSymbol","setHostReportError","prov","G","V","isFrozen","J","O","U","I","D","T","X","Y","Proxy","revocable","revoke","proxy","$","deleteProperty","nn","useProxies","setUseProxies","autoFreeze","setAutoFreeze","produce","produceWithPatches","createDraft","finishDraft","applyPatches","en","opResult","idbProxyableTypes","cursorAdvanceMethods","cursorRequestMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","idbProxyTraps","IDBTransaction","objectStoreNames","objectStore","wrapFunction","IDBDatabase","transaction","IDBCursor","continue","continuePrimaryKey","storeNames","tx","transformCachableValue","unlisten","removeEventListener","cacheDonePromiseForTransaction","IDBObjectStore","IDBIndex","IDBRequest","catch","promisifyRequest","openDB","blocked","upgrade","blocking","indexedDB","openPromise","oldVersion","newVersion","db","deleteDB","deleteDatabase","readMethods","writeMethods","cachedMethods","targetFuncName","useIndex","isWrite","storeName","returnVal","oldTraps"],"mappings":"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","file":"aws-amplify.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"aws-amplify\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"aws-amplify\"] = factory();\n\telse\n\t\troot[\"aws-amplify\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 501);\n","/*\n * Copyright 2017-2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nvar LOG_LEVELS = {\n    VERBOSE: 1,\n    DEBUG: 2,\n    INFO: 3,\n    WARN: 4,\n    ERROR: 5,\n};\n/**\n * Write logs\n * @class Logger\n */\nvar ConsoleLogger = /** @class */ (function () {\n    /**\n     * @constructor\n     * @param {string} name - Name of the logger\n     */\n    function ConsoleLogger(name, level) {\n        if (level === void 0) { level = 'WARN'; }\n        this.name = name;\n        this.level = level;\n    }\n    ConsoleLogger.prototype._padding = function (n) {\n        return n < 10 ? '0' + n : '' + n;\n    };\n    ConsoleLogger.prototype._ts = function () {\n        var dt = new Date();\n        return ([this._padding(dt.getMinutes()), this._padding(dt.getSeconds())].join(':') +\n            '.' +\n            dt.getMilliseconds());\n    };\n    /**\n     * Write log\n     * @method\n     * @memeberof Logger\n     * @param {string} type - log type, default INFO\n     * @param {string|object} msg - Logging message or object\n     */\n    ConsoleLogger.prototype._log = function (type) {\n        var msg = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            msg[_i - 1] = arguments[_i];\n        }\n        var logger_level_name = this.level;\n        if (ConsoleLogger.LOG_LEVEL) {\n            logger_level_name = ConsoleLogger.LOG_LEVEL;\n        }\n        if (typeof window !== 'undefined' && window.LOG_LEVEL) {\n            logger_level_name = window.LOG_LEVEL;\n        }\n        var logger_level = LOG_LEVELS[logger_level_name];\n        var type_level = LOG_LEVELS[type];\n        if (!(type_level >= logger_level)) {\n            // Do nothing if type is not greater than or equal to logger level (handle undefined)\n            return;\n        }\n        var log = console.log.bind(console);\n        if (type === 'ERROR' && console.error) {\n            log = console.error.bind(console);\n        }\n        if (type === 'WARN' && console.warn) {\n            log = console.warn.bind(console);\n        }\n        var prefix = \"[\" + type + \"] \" + this._ts() + \" \" + this.name;\n        if (msg.length === 1 && typeof msg[0] === 'string') {\n            log(prefix + \" - \" + msg[0]);\n        }\n        else if (msg.length === 1) {\n            log(prefix, msg[0]);\n        }\n        else if (typeof msg[0] === 'string') {\n            var obj = msg.slice(1);\n            if (obj.length === 1) {\n                obj = obj[0];\n            }\n            log(prefix + \" - \" + msg[0], obj);\n        }\n        else {\n            log(prefix, msg);\n        }\n    };\n    /**\n     * Write General log. Default to INFO\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    ConsoleLogger.prototype.log = function () {\n        var msg = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            msg[_i] = arguments[_i];\n        }\n        this._log.apply(this, __spreadArrays(['INFO'], msg));\n    };\n    /**\n     * Write INFO log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    ConsoleLogger.prototype.info = function () {\n        var msg = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            msg[_i] = arguments[_i];\n        }\n        this._log.apply(this, __spreadArrays(['INFO'], msg));\n    };\n    /**\n     * Write WARN log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    ConsoleLogger.prototype.warn = function () {\n        var msg = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            msg[_i] = arguments[_i];\n        }\n        this._log.apply(this, __spreadArrays(['WARN'], msg));\n    };\n    /**\n     * Write ERROR log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    ConsoleLogger.prototype.error = function () {\n        var msg = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            msg[_i] = arguments[_i];\n        }\n        this._log.apply(this, __spreadArrays(['ERROR'], msg));\n    };\n    /**\n     * Write DEBUG log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    ConsoleLogger.prototype.debug = function () {\n        var msg = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            msg[_i] = arguments[_i];\n        }\n        this._log.apply(this, __spreadArrays(['DEBUG'], msg));\n    };\n    /**\n     * Write VERBOSE log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    ConsoleLogger.prototype.verbose = function () {\n        var msg = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            msg[_i] = arguments[_i];\n        }\n        this._log.apply(this, __spreadArrays(['VERBOSE'], msg));\n    };\n    ConsoleLogger.LOG_LEVEL = null;\n    return ConsoleLogger;\n}());\nexport { ConsoleLogger };\n//# sourceMappingURL=ConsoleLogger.js.map","import { ConsoleLogger as LoggerClass } from './Logger';\nvar logger = new LoggerClass('Amplify');\nvar Amplify = /** @class */ (function () {\n    function Amplify() {\n    }\n    Amplify.register = function (comp) {\n        logger.debug('component registered in amplify', comp);\n        this._components.push(comp);\n        if (typeof comp.getModuleName === 'function') {\n            Amplify[comp.getModuleName()] = comp;\n        }\n        else {\n            logger.debug('no getModuleName method for component', comp);\n        }\n    };\n    Amplify.configure = function (config) {\n        var _this = this;\n        if (!config)\n            return this._config;\n        this._config = Object.assign(this._config, config);\n        logger.debug('amplify config', this._config);\n        this._components.map(function (comp) {\n            comp.configure(_this._config);\n        });\n        return this._config;\n    };\n    Amplify.addPluggable = function (pluggable) {\n        if (pluggable &&\n            pluggable['getCategory'] &&\n            typeof pluggable['getCategory'] === 'function') {\n            this._components.map(function (comp) {\n                if (comp['addPluggable'] &&\n                    typeof comp['addPluggable'] === 'function') {\n                    comp.addPluggable(pluggable);\n                }\n            });\n        }\n    };\n    Amplify._components = [];\n    Amplify._config = {};\n    // for backward compatibility to avoid breaking change\n    // if someone is using like Amplify.Auth\n    Amplify.Auth = null;\n    Amplify.Analytics = null;\n    Amplify.API = null;\n    Amplify.Storage = null;\n    Amplify.I18n = null;\n    Amplify.Cache = null;\n    Amplify.PubSub = null;\n    Amplify.Interactions = null;\n    Amplify.Pushnotification = null;\n    Amplify.UI = null;\n    Amplify.XR = null;\n    Amplify.Predictions = null;\n    Amplify.DataStore = null;\n    Amplify.Logger = LoggerClass;\n    Amplify.ServiceWorker = null;\n    return Amplify;\n}());\nexport default Amplify;\n//# sourceMappingURL=Amplify.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { ConsoleLogger as Logger } from '../Logger';\nvar logger = new Logger('ClientDevice_Browser');\nexport function clientInfo() {\n    if (typeof window === 'undefined') {\n        return {};\n    }\n    return browserClientInfo();\n}\nfunction browserClientInfo() {\n    if (typeof window === 'undefined') {\n        logger.warn('No window object available to get browser client info');\n        return {};\n    }\n    var nav = window.navigator;\n    if (!nav) {\n        logger.warn('No navigator object available to get browser client info');\n        return {};\n    }\n    var platform = nav.platform, product = nav.product, vendor = nav.vendor, userAgent = nav.userAgent, language = nav.language;\n    var type = browserType(userAgent);\n    var timezone = browserTimezone();\n    return {\n        platform: platform,\n        make: product || vendor,\n        model: type.type,\n        version: type.version,\n        appVersion: [type.type, type.version].join('/'),\n        language: language,\n        timezone: timezone,\n    };\n}\nexport function dimension() {\n    if (typeof window === 'undefined') {\n        logger.warn('No window object available to get browser client info');\n        return { width: 320, height: 320 };\n    }\n    return {\n        width: window.innerWidth,\n        height: window.innerHeight,\n    };\n}\nfunction browserTimezone() {\n    var tzMatch = /\\(([A-Za-z\\s].*)\\)/.exec(new Date().toString());\n    return tzMatch ? tzMatch[1] || '' : '';\n}\nfunction browserType(userAgent) {\n    var operaMatch = /.+(Opera[\\s[A-Z]*|OPR[\\sA-Z]*)\\/([0-9\\.]+).*/i.exec(userAgent);\n    if (operaMatch) {\n        return { type: operaMatch[1], version: operaMatch[2] };\n    }\n    var ieMatch = /.+(Trident|Edge)\\/([0-9\\.]+).*/i.exec(userAgent);\n    if (ieMatch) {\n        return { type: ieMatch[1], version: ieMatch[2] };\n    }\n    var cfMatch = /.+(Chrome|Firefox|FxiOS)\\/([0-9\\.]+).*/i.exec(userAgent);\n    if (cfMatch) {\n        return { type: cfMatch[1], version: cfMatch[2] };\n    }\n    var sMatch = /.+(Safari)\\/([0-9\\.]+).*/i.exec(userAgent);\n    if (sMatch) {\n        return { type: sMatch[1], version: sMatch[2] };\n    }\n    var awkMatch = /.+(AppleWebKit)\\/([0-9\\.]+).*/i.exec(userAgent);\n    if (awkMatch) {\n        return { type: awkMatch[1], version: awkMatch[2] };\n    }\n    var anyMatch = /.*([A-Z]+)\\/([0-9\\.]+).*/i.exec(userAgent);\n    if (anyMatch) {\n        return { type: anyMatch[1], version: anyMatch[2] };\n    }\n    return { type: '', version: '' };\n}\n//# sourceMappingURL=browser.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport * as Browser from './browser';\nvar ClientDevice = /** @class */ (function () {\n    function ClientDevice() {\n    }\n    ClientDevice.clientInfo = function () {\n        return Browser.clientInfo();\n    };\n    ClientDevice.dimension = function () {\n        return Browser.dimension();\n    };\n    return ClientDevice;\n}());\nexport default ClientDevice;\n//# sourceMappingURL=index.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { ConsoleLogger as Logger } from './Logger';\nvar logger = new Logger('Hub');\nvar AMPLIFY_SYMBOL = (typeof Symbol !== 'undefined' &&\n    typeof Symbol.for === 'function'\n    ? Symbol.for('amplify_default')\n    : '@@amplify_default');\nfunction isLegacyCallback(callback) {\n    return callback.onHubCapsule !== undefined;\n}\nvar HubClass = /** @class */ (function () {\n    function HubClass(name) {\n        this.listeners = [];\n        this.patterns = [];\n        this.protectedChannels = [\n            'core',\n            'auth',\n            'api',\n            'analytics',\n            'interactions',\n            'pubsub',\n            'storage',\n            'xr',\n        ];\n        this.name = name;\n    }\n    // Note - Need to pass channel as a reference for removal to work and not anonymous function\n    HubClass.prototype.remove = function (channel, listener) {\n        if (channel instanceof RegExp) {\n            var pattern_1 = this.patterns.find(function (_a) {\n                var pattern = _a.pattern;\n                return pattern.source === channel.source;\n            });\n            if (!pattern_1) {\n                logger.warn(\"No listeners for \" + channel);\n                return;\n            }\n            this.patterns = __spreadArrays(this.patterns.filter(function (x) { return x !== pattern_1; }));\n        }\n        else {\n            var holder = this.listeners[channel];\n            if (!holder) {\n                logger.warn(\"No listeners for \" + channel);\n                return;\n            }\n            this.listeners[channel] = __spreadArrays(holder.filter(function (_a) {\n                var callback = _a.callback;\n                return callback !== listener;\n            }));\n        }\n    };\n    HubClass.prototype.dispatch = function (channel, payload, source, ampSymbol) {\n        if (source === void 0) { source = ''; }\n        if (this.protectedChannels.indexOf(channel) > -1) {\n            var hasAccess = ampSymbol === AMPLIFY_SYMBOL;\n            if (!hasAccess) {\n                logger.warn(\"WARNING: \" + channel + \" is protected and dispatching on it can have unintended consequences\");\n            }\n        }\n        var capsule = {\n            channel: channel,\n            payload: __assign({}, payload),\n            source: source,\n            patternInfo: [],\n        };\n        try {\n            this._toListeners(capsule);\n        }\n        catch (e) {\n            logger.error(e);\n        }\n    };\n    HubClass.prototype.listen = function (channel, callback, listenerName) {\n        if (listenerName === void 0) { listenerName = 'noname'; }\n        var cb;\n        // Check for legacy onHubCapsule callback for backwards compatability\n        if (isLegacyCallback(callback)) {\n            logger.warn(\"WARNING onHubCapsule is Deprecated. Please pass in a callback.\");\n            cb = callback.onHubCapsule.bind(callback);\n        }\n        else if (typeof callback !== 'function') {\n            throw new Error('No callback supplied to Hub');\n        }\n        else {\n            cb = callback;\n        }\n        if (channel instanceof RegExp) {\n            this.patterns.push({\n                pattern: channel,\n                callback: cb,\n            });\n        }\n        else {\n            var holder = this.listeners[channel];\n            if (!holder) {\n                holder = [];\n                this.listeners[channel] = holder;\n            }\n            holder.push({\n                name: listenerName,\n                callback: cb,\n            });\n        }\n    };\n    HubClass.prototype._toListeners = function (capsule) {\n        var channel = capsule.channel, payload = capsule.payload;\n        var holder = this.listeners[channel];\n        if (holder) {\n            holder.forEach(function (listener) {\n                logger.debug(\"Dispatching to \" + channel + \" with \", payload);\n                try {\n                    listener.callback(capsule);\n                }\n                catch (e) {\n                    logger.error(e);\n                }\n            });\n        }\n        if (this.patterns.length > 0) {\n            if (!payload.message) {\n                logger.warn(\"Cannot perform pattern matching without a message key\");\n                return;\n            }\n            var payloadStr_1 = payload.message;\n            this.patterns.forEach(function (pattern) {\n                var match = payloadStr_1.match(pattern.pattern);\n                if (match) {\n                    var groups = match.slice(1);\n                    var dispatchingCapsule = __assign(__assign({}, capsule), { patternInfo: groups });\n                    try {\n                        pattern.callback(dispatchingCapsule);\n                    }\n                    catch (e) {\n                        logger.error(e);\n                    }\n                }\n            });\n        }\n    };\n    return HubClass;\n}());\nexport { HubClass };\n/*We export a __default__ instance of HubClass to use it as a\npsuedo Singleton for the main messaging bus, however you can still create\nyour own instance of HubClass() for a separate \"private bus\" of events.*/\nvar Hub = new HubClass('__default__');\nexport default Hub;\n//# sourceMappingURL=Hub.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { ConsoleLogger as Logger } from '../Logger';\nvar logger = new Logger('I18n');\n/**\n * Language transition class\n */\nvar I18n = /** @class */ (function () {\n    /**\n     * @constructor\n     * Initialize with configurations\n     * @param {Object} options\n     */\n    function I18n(options) {\n        /**\n         * @private\n         */\n        this._options = null;\n        /**\n         * @private\n         */\n        this._lang = null;\n        /**\n         * @private\n         */\n        this._dict = {};\n        this._options = Object.assign({}, options);\n        this._lang = this._options.language;\n        if (!this._lang &&\n            typeof window !== 'undefined' &&\n            window &&\n            window.navigator) {\n            this._lang = window.navigator.language;\n        }\n        logger.debug(this._lang);\n    }\n    /**\n     * @method\n     * Explicitly setting language\n     * @param {String} lang\n     */\n    I18n.prototype.setLanguage = function (lang) {\n        this._lang = lang;\n    };\n    /**\n     * @method\n     * Get value\n     * @param {String} key\n     * @param {String} defVal - Default value\n     */\n    I18n.prototype.get = function (key, defVal) {\n        if (defVal === void 0) { defVal = undefined; }\n        if (!this._lang) {\n            return typeof defVal !== 'undefined' ? defVal : key;\n        }\n        var lang = this._lang;\n        var val = this.getByLanguage(key, lang);\n        if (val) {\n            return val;\n        }\n        if (lang.indexOf('-') > 0) {\n            val = this.getByLanguage(key, lang.split('-')[0]);\n        }\n        if (val) {\n            return val;\n        }\n        return typeof defVal !== 'undefined' ? defVal : key;\n    };\n    /**\n     * @method\n     * Get value according to specified language\n     * @param {String} key\n     * @param {String} language - Specified langurage to be used\n     * @param {String} defVal - Default value\n     */\n    I18n.prototype.getByLanguage = function (key, language, defVal) {\n        if (defVal === void 0) { defVal = null; }\n        if (!language) {\n            return defVal;\n        }\n        var lang_dict = this._dict[language];\n        if (!lang_dict) {\n            return defVal;\n        }\n        return lang_dict[key];\n    };\n    /**\n     * @method\n     * Add vocabularies for one language\n     * @param {String} langurage - Language of the dictionary\n     * @param {Object} vocabularies - Object that has key-value as dictionary entry\n     */\n    I18n.prototype.putVocabulariesForLanguage = function (language, vocabularies) {\n        var lang_dict = this._dict[language];\n        if (!lang_dict) {\n            lang_dict = this._dict[language] = {};\n        }\n        Object.assign(lang_dict, vocabularies);\n    };\n    /**\n     * @method\n     * Add vocabularies for one language\n     * @param {Object} vocabularies - Object that has language as key,\n     *                                vocabularies of each language as value\n     */\n    I18n.prototype.putVocabularies = function (vocabularies) {\n        var _this = this;\n        Object.keys(vocabularies).map(function (key) {\n            _this.putVocabulariesForLanguage(key, vocabularies[key]);\n        });\n    };\n    return I18n;\n}());\nexport { I18n };\n//# sourceMappingURL=I18n.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { I18n as I18nClass } from './I18n';\nimport { ConsoleLogger as Logger } from '../Logger';\nimport Amplify from '../Amplify';\nvar logger = new Logger('I18n');\nvar _config = null;\nvar _i18n = null;\n/**\n * Export I18n APIs\n */\nvar I18n = /** @class */ (function () {\n    function I18n() {\n    }\n    /**\n     * @static\n     * @method\n     * Configure I18n part\n     * @param {Object} config - Configuration of the I18n\n     */\n    I18n.configure = function (config) {\n        logger.debug('configure I18n');\n        if (!config) {\n            return _config;\n        }\n        _config = Object.assign({}, _config, config.I18n || config);\n        I18n.createInstance();\n        return _config;\n    };\n    I18n.getModuleName = function () {\n        return 'I18n';\n    };\n    /**\n     * @static\n     * @method\n     * Create an instance of I18n for the library\n     */\n    I18n.createInstance = function () {\n        logger.debug('create I18n instance');\n        if (_i18n) {\n            return;\n        }\n        _i18n = new I18nClass(_config);\n    };\n    /**\n     * @static @method\n     * Explicitly setting language\n     * @param {String} lang\n     */\n    I18n.setLanguage = function (lang) {\n        I18n.checkConfig();\n        return _i18n.setLanguage(lang);\n    };\n    /**\n     * @static @method\n     * Get value\n     * @param {String} key\n     * @param {String} defVal - Default value\n     */\n    I18n.get = function (key, defVal) {\n        if (!I18n.checkConfig()) {\n            return typeof defVal === 'undefined' ? key : defVal;\n        }\n        return _i18n.get(key, defVal);\n    };\n    /**\n     * @static\n     * @method\n     * Add vocabularies for one language\n     * @param {String} langurage - Language of the dictionary\n     * @param {Object} vocabularies - Object that has key-value as dictionary entry\n     */\n    I18n.putVocabulariesForLanguage = function (language, vocabularies) {\n        I18n.checkConfig();\n        return _i18n.putVocabulariesForLanguage(language, vocabularies);\n    };\n    /**\n     * @static\n     * @method\n     * Add vocabularies for one language\n     * @param {Object} vocabularies - Object that has language as key,\n     *                                vocabularies of each language as value\n     */\n    I18n.putVocabularies = function (vocabularies) {\n        I18n.checkConfig();\n        return _i18n.putVocabularies(vocabularies);\n    };\n    I18n.checkConfig = function () {\n        if (!_i18n) {\n            _i18n = new I18nClass(_config);\n        }\n        return true;\n    };\n    return I18n;\n}());\nAmplify.register(I18n);\nexport default I18n;\n//# sourceMappingURL=index.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { ConsoleLogger as Logger } from '../Logger/ConsoleLogger';\nvar logger = new Logger('Util');\nvar NonRetryableError = /** @class */ (function (_super) {\n    __extends(NonRetryableError, _super);\n    function NonRetryableError(message) {\n        var _this = _super.call(this, message) || this;\n        _this.nonRetryable = true;\n        return _this;\n    }\n    return NonRetryableError;\n}(Error));\nexport { NonRetryableError };\nvar isNonRetryableError = function (obj) {\n    var key = 'nonRetryable';\n    return obj && obj[key];\n};\n/**\n * @private\n * Internal use of Amplify only\n */\nexport function retry(functionToRetry, args, delayFn, attempt) {\n    if (attempt === void 0) { attempt = 1; }\n    return __awaiter(this, void 0, void 0, function () {\n        var err_1, retryIn_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (typeof functionToRetry !== 'function') {\n                        throw Error('functionToRetry must be a function');\n                    }\n                    logger.debug(functionToRetry.name + \" attempt #\" + attempt + \" with this vars: \" + JSON.stringify(args));\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 8]);\n                    return [4 /*yield*/, functionToRetry.apply(void 0, args)];\n                case 2: return [2 /*return*/, _a.sent()];\n                case 3:\n                    err_1 = _a.sent();\n                    logger.debug(\"error on \" + functionToRetry.name + \": \" + err_1 + \" \");\n                    if (isNonRetryableError(err_1)) {\n                        logger.debug(functionToRetry.name + \" non retryable error \" + err_1);\n                        throw err_1;\n                    }\n                    retryIn_1 = delayFn(attempt, args, err_1);\n                    logger.debug(functionToRetry.name + \" retrying in \" + retryIn_1 + \" ms\");\n                    if (!(retryIn_1 !== false)) return [3 /*break*/, 6];\n                    return [4 /*yield*/, new Promise(function (res) { return setTimeout(res, retryIn_1); })];\n                case 4:\n                    _a.sent();\n                    return [4 /*yield*/, retry(functionToRetry, args, delayFn, attempt + 1)];\n                case 5: return [2 /*return*/, _a.sent()];\n                case 6: throw err_1;\n                case 7: return [3 /*break*/, 8];\n                case 8: return [2 /*return*/];\n            }\n        });\n    });\n}\nvar MAX_DELAY_MS = 5 * 60 * 1000;\nfunction jitteredBackoff(maxDelayMs) {\n    var BASE_TIME_MS = 100;\n    var JITTER_FACTOR = 100;\n    return function (attempt) {\n        var delay = Math.pow(2, attempt) * BASE_TIME_MS + JITTER_FACTOR * Math.random();\n        return delay > maxDelayMs ? false : delay;\n    };\n}\n/**\n * @private\n * Internal use of Amplify only\n */\nexport var jitteredExponentialRetry = function (functionToRetry, args, maxDelayMs) {\n    if (maxDelayMs === void 0) { maxDelayMs = MAX_DELAY_MS; }\n    return retry(functionToRetry, args, jitteredBackoff(maxDelayMs));\n};\n//# sourceMappingURL=Retry.js.map","/*!\n * The MIT License (MIT)\n *\n * Copyright (c) 2016 Christian Speckner <cnspeckn@googlemail.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nvar Mutex = /** @class */ (function () {\n    function Mutex() {\n        this._queue = [];\n        this._pending = false;\n    }\n    Mutex.prototype.isLocked = function () {\n        return this._pending;\n    };\n    Mutex.prototype.acquire = function () {\n        var _this = this;\n        var ticket = new Promise(function (resolve) {\n            return _this._queue.push(resolve);\n        });\n        if (!this._pending) {\n            this._dispatchNext();\n        }\n        return ticket;\n    };\n    Mutex.prototype.runExclusive = function (callback) {\n        return this.acquire().then(function (release) {\n            var result;\n            try {\n                result = callback();\n            }\n            catch (e) {\n                release();\n                throw e;\n            }\n            return Promise.resolve(result).then(function (x) { return (release(), x); }, function (e) {\n                release();\n                throw e;\n            });\n        });\n    };\n    Mutex.prototype._dispatchNext = function () {\n        if (this._queue.length > 0) {\n            this._pending = true;\n            this._queue.shift()(this._dispatchNext.bind(this));\n        }\n        else {\n            this._pending = false;\n        }\n    };\n    return Mutex;\n}());\nexport default Mutex;\n//# sourceMappingURL=Mutex.js.map","import * as Observable from 'zen-observable';\nvar ReachabilityNavigator = /** @class */ (function () {\n    function ReachabilityNavigator() {\n    }\n    ReachabilityNavigator.prototype.networkMonitor = function () {\n        return new Observable(function (observer) {\n            observer.next({ online: window.navigator.onLine });\n            var notifyOnline = function () { return observer.next({ online: true }); };\n            var notifyOffline = function () { return observer.next({ online: false }); };\n            window.addEventListener('online', notifyOnline);\n            window.addEventListener('offline', notifyOffline);\n            return function () {\n                window.removeEventListener('online', notifyOnline);\n                window.removeEventListener('offline', notifyOffline);\n            };\n        });\n    };\n    return ReachabilityNavigator;\n}());\nexport default ReachabilityNavigator;\n//# sourceMappingURL=Reachability.js.map","/**\n * Date & time utility functions to abstract the `aws-sdk` away from users.\n * (v2 => v3 modularization is a breaking change)\n *\n * @see https://github.com/aws/aws-sdk-js/blob/6edf586dcc1de7fe8fbfbbd9a0d2b1847921e6e1/lib/util.js#L262\n */\nexport var DateUtils = {\n    /**\n     * Milliseconds to offset the date to compensate for clock skew between device & services\n     */\n    clockOffset: 0,\n    getDateWithClockOffset: function () {\n        if (DateUtils.clockOffset) {\n            return new Date(new Date().getTime() + DateUtils.clockOffset);\n        }\n        else {\n            return new Date();\n        }\n    },\n    /**\n     * @returns {number} Clock offset in milliseconds\n     */\n    getClockOffset: function () {\n        return DateUtils.clockOffset;\n    },\n    /**\n     * @param {number} offset Clock offset in milliseconds\n     */\n    setClockOffset: function (offset) {\n        DateUtils.clockOffset = offset;\n    },\n};\n//# sourceMappingURL=DateUtils.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ConsoleLogger as Logger } from './Logger';\nimport { DateUtils } from './Util';\nimport { AWS } from './Facet';\nvar logger = new Logger('Signer'), url = require('url'), crypto = AWS['util'].crypto;\nvar DEFAULT_ALGORITHM = 'AWS4-HMAC-SHA256';\nvar IOT_SERVICE_NAME = 'iotdevicegateway';\nvar encrypt = function (key, src, encoding) {\n    return crypto.lib\n        .createHmac('sha256', key)\n        .update(src, 'utf8')\n        .digest(encoding);\n};\nvar hash = function (src) {\n    var arg = src || '';\n    return crypto\n        .createHash('sha256')\n        .update(arg, 'utf8')\n        .digest('hex');\n};\n/**\n * @private\n * RFC 3986 compliant version of encodeURIComponent\n */\nvar escape_RFC3986 = function (component) {\n    return component.replace(/[!'()*]/g, function (c) {\n        return ('%' +\n            c\n                .charCodeAt(0)\n                .toString(16)\n                .toUpperCase());\n    });\n};\n/**\n * @private\n * Create canonical query string\n *\n */\nvar canonical_query = function (query) {\n    if (!query || query.length === 0) {\n        return '';\n    }\n    return query\n        .split('&')\n        .map(function (e) {\n        var key_val = e.split('=');\n        if (key_val.length === 1) {\n            return e;\n        }\n        else {\n            var reencoded_val = escape_RFC3986(key_val[1]);\n            return key_val[0] + '=' + reencoded_val;\n        }\n    })\n        .sort(function (a, b) {\n        var key_a = a.split('=')[0];\n        var key_b = b.split('=')[0];\n        if (key_a === key_b) {\n            return a < b ? -1 : 1;\n        }\n        else {\n            return key_a < key_b ? -1 : 1;\n        }\n    })\n        .join('&');\n};\n/**\n* @private\n* Create canonical headers\n*\n<pre>\nCanonicalHeaders =\n    CanonicalHeadersEntry0 + CanonicalHeadersEntry1 + ... + CanonicalHeadersEntryN\nCanonicalHeadersEntry =\n    Lowercase(HeaderName) + ':' + Trimall(HeaderValue) + '\\n'\n</pre>\n*/\nvar canonical_headers = function (headers) {\n    if (!headers || Object.keys(headers).length === 0) {\n        return '';\n    }\n    return (Object.keys(headers)\n        .map(function (key) {\n        return {\n            key: key.toLowerCase(),\n            value: headers[key] ? headers[key].trim().replace(/\\s+/g, ' ') : '',\n        };\n    })\n        .sort(function (a, b) {\n        return a.key < b.key ? -1 : 1;\n    })\n        .map(function (item) {\n        return item.key + ':' + item.value;\n    })\n        .join('\\n') + '\\n');\n};\n/**\n * List of header keys included in the canonical headers.\n * @access private\n */\nvar signed_headers = function (headers) {\n    return Object.keys(headers)\n        .map(function (key) {\n        return key.toLowerCase();\n    })\n        .sort()\n        .join(';');\n};\n/**\n* @private\n* Create canonical request\n* Refer to\n* {@link http://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html|Create a Canonical Request}\n*\n<pre>\nCanonicalRequest =\n    HTTPRequestMethod + '\\n' +\n    CanonicalURI + '\\n' +\n    CanonicalQueryString + '\\n' +\n    CanonicalHeaders + '\\n' +\n    SignedHeaders + '\\n' +\n    HexEncode(Hash(RequestPayload))\n</pre>\n*/\nvar canonical_request = function (request) {\n    var url_info = url.parse(request.url);\n    return [\n        request.method || '/',\n        encodeURIComponent(url_info.pathname).replace(/%2F/gi, '/'),\n        canonical_query(url_info.query),\n        canonical_headers(request.headers),\n        signed_headers(request.headers),\n        hash(request.data),\n    ].join('\\n');\n};\nvar parse_service_info = function (request) {\n    var url_info = url.parse(request.url), host = url_info.host;\n    var matched = host.match(/([^\\.]+)\\.(?:([^\\.]*)\\.)?amazonaws\\.com$/);\n    var parsed = (matched || []).slice(1, 3);\n    if (parsed[1] === 'es') {\n        // Elastic Search\n        parsed = parsed.reverse();\n    }\n    return {\n        service: request.service || parsed[0],\n        region: request.region || parsed[1],\n    };\n};\nvar credential_scope = function (d_str, region, service) {\n    return [d_str, region, service, 'aws4_request'].join('/');\n};\n/**\n* @private\n* Create a string to sign\n* Refer to\n* {@link http://docs.aws.amazon.com/general/latest/gr/sigv4-create-string-to-sign.html|Create String to Sign}\n*\n<pre>\nStringToSign =\n    Algorithm + \\n +\n    RequestDateTime + \\n +\n    CredentialScope + \\n +\n    HashedCanonicalRequest\n</pre>\n*/\nvar string_to_sign = function (algorithm, canonical_request, dt_str, scope) {\n    return [algorithm, dt_str, scope, hash(canonical_request)].join('\\n');\n};\n/**\n* @private\n* Create signing key\n* Refer to\n* {@link http://docs.aws.amazon.com/general/latest/gr/sigv4-calculate-signature.html|Calculate Signature}\n*\n<pre>\nkSecret = your secret access key\nkDate = HMAC(\"AWS4\" + kSecret, Date)\nkRegion = HMAC(kDate, Region)\nkService = HMAC(kRegion, Service)\nkSigning = HMAC(kService, \"aws4_request\")\n</pre>\n*/\nvar get_signing_key = function (secret_key, d_str, service_info) {\n    logger.debug(service_info);\n    var k = 'AWS4' + secret_key, k_date = encrypt(k, d_str), k_region = encrypt(k_date, service_info.region), k_service = encrypt(k_region, service_info.service), k_signing = encrypt(k_service, 'aws4_request');\n    return k_signing;\n};\nvar get_signature = function (signing_key, str_to_sign) {\n    return encrypt(signing_key, str_to_sign, 'hex');\n};\n/**\n * @private\n * Create authorization header\n * Refer to\n * {@link http://docs.aws.amazon.com/general/latest/gr/sigv4-add-signature-to-request.html|Add the Signing Information}\n */\nvar get_authorization_header = function (algorithm, access_key, scope, signed_headers, signature) {\n    return [\n        algorithm + ' ' + 'Credential=' + access_key + '/' + scope,\n        'SignedHeaders=' + signed_headers,\n        'Signature=' + signature,\n    ].join(', ');\n};\n/**\n * AWS request signer.\n * Refer to {@link http://docs.aws.amazon.com/general/latest/gr/sigv4_signing.html|Signature Version 4}\n *\n * @class Signer\n */\nvar Signer = /** @class */ (function () {\n    function Signer() {\n    }\n    /**\n    * Sign a HTTP request, add 'Authorization' header to request param\n    * @method sign\n    * @memberof Signer\n    * @static\n    *\n    * @param {object} request - HTTP request object\n    <pre>\n    request: {\n        method: GET | POST | PUT ...\n        url: ...,\n        headers: {\n            header1: ...\n        },\n        data: data\n    }\n    </pre>\n    * @param {object} access_info - AWS access credential info\n    <pre>\n    access_info: {\n        access_key: ...,\n        secret_key: ...,\n        session_token: ...\n    }\n    </pre>\n    * @param {object} [service_info] - AWS service type and region, optional,\n    *                                  if not provided then parse out from url\n    <pre>\n    service_info: {\n        service: ...,\n        region: ...\n    }\n    </pre>\n    *\n    * @returns {object} Signed HTTP request\n    */\n    Signer.sign = function (request, access_info, service_info) {\n        if (service_info === void 0) { service_info = null; }\n        request.headers = request.headers || {};\n        // datetime string and date string\n        var dt = DateUtils.getDateWithClockOffset(), dt_str = dt.toISOString().replace(/[:\\-]|\\.\\d{3}/g, ''), d_str = dt_str.substr(0, 8);\n        var url_info = url.parse(request.url);\n        request.headers['host'] = url_info.host;\n        request.headers['x-amz-date'] = dt_str;\n        if (access_info.session_token) {\n            request.headers['X-Amz-Security-Token'] = access_info.session_token;\n        }\n        // Task 1: Create a Canonical Request\n        var request_str = canonical_request(request);\n        logger.debug(request_str);\n        // Task 2: Create a String to Sign\n        var serviceInfo = service_info || parse_service_info(request), scope = credential_scope(d_str, serviceInfo.region, serviceInfo.service), str_to_sign = string_to_sign(DEFAULT_ALGORITHM, request_str, dt_str, scope);\n        // Task 3: Calculate the Signature\n        var signing_key = get_signing_key(access_info.secret_key, d_str, serviceInfo), signature = get_signature(signing_key, str_to_sign);\n        // Task 4: Adding the Signing information to the Request\n        var authorization_header = get_authorization_header(DEFAULT_ALGORITHM, access_info.access_key, scope, signed_headers(request.headers), signature);\n        request.headers['Authorization'] = authorization_header;\n        return request;\n    };\n    Signer.signUrl = function (urlOrRequest, accessInfo, serviceInfo, expiration) {\n        var urlToSign = typeof urlOrRequest === 'object' ? urlOrRequest.url : urlOrRequest;\n        var method = typeof urlOrRequest === 'object' ? urlOrRequest.method : 'GET';\n        var body = typeof urlOrRequest === 'object' ? urlOrRequest.body : undefined;\n        var now = DateUtils.getDateWithClockOffset()\n            .toISOString()\n            .replace(/[:\\-]|\\.\\d{3}/g, '');\n        var today = now.substr(0, 8);\n        // Intentionally discarding search\n        var _a = url.parse(urlToSign, true, true), search = _a.search, parsedUrl = __rest(_a, [\"search\"]);\n        var host = parsedUrl.host;\n        var signedHeaders = { host: host };\n        var _b = serviceInfo || parse_service_info({ url: url.format(parsedUrl) }), region = _b.region, service = _b.service;\n        var credentialScope = credential_scope(today, region, service);\n        // IoT service does not allow the session token in the canonical request\n        // https://docs.aws.amazon.com/general/latest/gr/sigv4-add-signature-to-request.html\n        var sessionTokenRequired = accessInfo.session_token && service !== IOT_SERVICE_NAME;\n        var queryParams = __assign(__assign(__assign({ 'X-Amz-Algorithm': DEFAULT_ALGORITHM, 'X-Amz-Credential': [accessInfo.access_key, credentialScope].join('/'), 'X-Amz-Date': now.substr(0, 16) }, (sessionTokenRequired\n            ? { 'X-Amz-Security-Token': \"\" + accessInfo.session_token }\n            : {})), (expiration ? { 'X-Amz-Expires': \"\" + expiration } : {})), { 'X-Amz-SignedHeaders': Object.keys(signedHeaders).join(',') });\n        var canonicalRequest = canonical_request({\n            method: method,\n            url: url.format(__assign(__assign({}, parsedUrl), { query: __assign(__assign({}, parsedUrl.query), queryParams) })),\n            headers: signedHeaders,\n            data: body,\n        });\n        var stringToSign = string_to_sign(DEFAULT_ALGORITHM, canonicalRequest, now, credentialScope);\n        var signing_key = get_signing_key(accessInfo.secret_key, today, {\n            region: region,\n            service: service,\n        });\n        var signature = get_signature(signing_key, stringToSign);\n        var additionalQueryParams = __assign({ 'X-Amz-Signature': signature }, (accessInfo.session_token && {\n            'X-Amz-Security-Token': accessInfo.session_token,\n        }));\n        var result = url.format({\n            protocol: parsedUrl.protocol,\n            slashes: true,\n            hostname: parsedUrl.hostname,\n            port: parsedUrl.port,\n            pathname: parsedUrl.pathname,\n            query: __assign(__assign(__assign({}, parsedUrl.query), queryParams), additionalQueryParams),\n        });\n        return result;\n    };\n    return Signer;\n}());\nexport default Signer;\n//# sourceMappingURL=Signer.js.map","import { ConsoleLogger as Logger } from './Logger';\nvar logger = new Logger('Parser');\nvar Parser = /** @class */ (function () {\n    function Parser() {\n    }\n    Parser.parseMobilehubConfig = function (config) {\n        var amplifyConfig = {};\n        // Analytics\n        if (config['aws_mobile_analytics_app_id']) {\n            var Analytics = {\n                AWSPinpoint: {\n                    appId: config['aws_mobile_analytics_app_id'],\n                    region: config['aws_mobile_analytics_app_region'],\n                },\n            };\n            amplifyConfig.Analytics = Analytics;\n        }\n        // Auth\n        if (config['aws_cognito_identity_pool_id'] || config['aws_user_pools_id']) {\n            var Auth = {\n                userPoolId: config['aws_user_pools_id'],\n                userPoolWebClientId: config['aws_user_pools_web_client_id'],\n                region: config['aws_cognito_region'],\n                identityPoolId: config['aws_cognito_identity_pool_id'],\n                identityPoolRegion: config['aws_cognito_region'],\n                mandatorySignIn: config['aws_mandatory_sign_in'] === 'enable' ? true : false,\n            };\n            amplifyConfig.Auth = Auth;\n        }\n        // Storage\n        var storageConfig;\n        if (config['aws_user_files_s3_bucket']) {\n            storageConfig = {\n                AWSS3: {\n                    bucket: config['aws_user_files_s3_bucket'],\n                    region: config['aws_user_files_s3_bucket_region'],\n                    dangerouslyConnectToHttpEndpointForTesting: config['aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing'],\n                },\n            };\n        }\n        else {\n            storageConfig = config ? config.Storage || config : {};\n        }\n        amplifyConfig.Analytics = Object.assign({}, amplifyConfig.Analytics, config.Analytics);\n        amplifyConfig.Auth = Object.assign({}, amplifyConfig.Auth, config.Auth);\n        amplifyConfig.Storage = Object.assign({}, storageConfig);\n        logger.debug('parse config', config, 'to amplifyconfig', amplifyConfig);\n        return amplifyConfig;\n    };\n    return Parser;\n}());\nexport default Parser;\n//# sourceMappingURL=Parser.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { ConsoleLogger as Logger } from '../Logger';\nimport JS from '../JS';\nvar logger = new Logger('CognitoCredentials');\nvar waitForInit = new Promise(function (res, rej) {\n    if (!JS.browserOrNode().isBrowser) {\n        logger.debug('not in the browser, directly resolved');\n        return res();\n    }\n    var ga = window['gapi'] && window['gapi'].auth2 ? window['gapi'].auth2 : null;\n    if (ga) {\n        logger.debug('google api already loaded');\n        return res();\n    }\n    else {\n        setTimeout(function () {\n            return res();\n        }, 2000);\n    }\n});\nvar GoogleOAuth = /** @class */ (function () {\n    function GoogleOAuth() {\n        this.initialized = false;\n        this.refreshGoogleToken = this.refreshGoogleToken.bind(this);\n        this._refreshGoogleTokenImpl = this._refreshGoogleTokenImpl.bind(this);\n    }\n    GoogleOAuth.prototype.refreshGoogleToken = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this.initialized) return [3 /*break*/, 2];\n                        logger.debug('need to wait for the Google SDK loaded');\n                        return [4 /*yield*/, waitForInit];\n                    case 1:\n                        _a.sent();\n                        this.initialized = true;\n                        logger.debug('finish waiting');\n                        _a.label = 2;\n                    case 2: return [2 /*return*/, this._refreshGoogleTokenImpl()];\n                }\n            });\n        });\n    };\n    GoogleOAuth.prototype._refreshGoogleTokenImpl = function () {\n        var ga = null;\n        if (JS.browserOrNode().isBrowser)\n            ga = window['gapi'] && window['gapi'].auth2 ? window['gapi'].auth2 : null;\n        if (!ga) {\n            logger.debug('no gapi auth2 available');\n            return Promise.reject('no gapi auth2 available');\n        }\n        return new Promise(function (res, rej) {\n            ga.getAuthInstance()\n                .then(function (googleAuth) {\n                if (!googleAuth) {\n                    console.log('google Auth undefiend');\n                    rej('google Auth undefiend');\n                }\n                var googleUser = googleAuth.currentUser.get();\n                // refresh the token\n                if (googleUser.isSignedIn()) {\n                    logger.debug('refreshing the google access token');\n                    googleUser.reloadAuthResponse().then(function (authResponse) {\n                        var id_token = authResponse.id_token, expires_at = authResponse.expires_at;\n                        var profile = googleUser.getBasicProfile();\n                        var user = {\n                            email: profile.getEmail(),\n                            name: profile.getName(),\n                        };\n                        res({ token: id_token, expires_at: expires_at });\n                    });\n                }\n                else {\n                    rej('User is not signed in with Google');\n                }\n            })\n                .catch(function (err) {\n                logger.debug('Failed to refresh google token', err);\n                rej('Failed to refresh google token');\n            });\n        });\n    };\n    return GoogleOAuth;\n}());\nexport default GoogleOAuth;\n//# sourceMappingURL=GoogleOAuth.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { ConsoleLogger as Logger } from '../Logger';\nimport JS from '../JS';\nvar logger = new Logger('CognitoCredentials');\nvar waitForInit = new Promise(function (res, rej) {\n    if (!JS.browserOrNode().isBrowser) {\n        logger.debug('not in the browser, directly resolved');\n        return res();\n    }\n    var fb = window['FB'];\n    if (fb) {\n        logger.debug('FB SDK already loaded');\n        return res();\n    }\n    else {\n        setTimeout(function () {\n            return res();\n        }, 2000);\n    }\n});\nvar FacebookOAuth = /** @class */ (function () {\n    function FacebookOAuth() {\n        this.initialized = false;\n        this.refreshFacebookToken = this.refreshFacebookToken.bind(this);\n        this._refreshFacebookTokenImpl = this._refreshFacebookTokenImpl.bind(this);\n    }\n    FacebookOAuth.prototype.refreshFacebookToken = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this.initialized) return [3 /*break*/, 2];\n                        logger.debug('need to wait for the Facebook SDK loaded');\n                        return [4 /*yield*/, waitForInit];\n                    case 1:\n                        _a.sent();\n                        this.initialized = true;\n                        logger.debug('finish waiting');\n                        _a.label = 2;\n                    case 2: return [2 /*return*/, this._refreshFacebookTokenImpl()];\n                }\n            });\n        });\n    };\n    FacebookOAuth.prototype._refreshFacebookTokenImpl = function () {\n        var fb = null;\n        if (JS.browserOrNode().isBrowser)\n            fb = window['FB'];\n        if (!fb) {\n            logger.debug('no fb sdk available');\n            return Promise.reject('no fb sdk available');\n        }\n        return new Promise(function (res, rej) {\n            fb.getLoginStatus(function (fbResponse) {\n                if (!fbResponse || !fbResponse.authResponse) {\n                    logger.debug('no response from facebook when refreshing the jwt token');\n                    rej('no response from facebook when refreshing the jwt token');\n                }\n                var response = fbResponse.authResponse;\n                var accessToken = response.accessToken, expiresIn = response.expiresIn;\n                var date = new Date();\n                var expires_at = expiresIn * 1000 + date.getTime();\n                if (!accessToken) {\n                    logger.debug('the jwtToken is undefined');\n                    rej('the jwtToken is undefined');\n                }\n                res({ token: accessToken, expires_at: expires_at });\n            }, { scope: 'public_profile,email' });\n        });\n    };\n    return FacebookOAuth;\n}());\nexport default FacebookOAuth;\n//# sourceMappingURL=FacebookOAuth.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport GoogleOAuthClass from './GoogleOAuth';\nimport FacebookOAuthClass from './FacebookOAuth';\nvar GoogleOAuth = new GoogleOAuthClass();\nvar FacebookOAuth = new FacebookOAuthClass();\nexport { GoogleOAuth, FacebookOAuth };\n//# sourceMappingURL=index.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar dataMemory = {};\n/** @class */\nvar MemoryStorage = /** @class */ (function () {\n    function MemoryStorage() {\n    }\n    /**\n     * This is used to set a specific item in storage\n     * @param {string} key - the key for the item\n     * @param {object} value - the value\n     * @returns {string} value that was set\n     */\n    MemoryStorage.setItem = function (key, value) {\n        dataMemory[key] = value;\n        return dataMemory[key];\n    };\n    /**\n     * This is used to get a specific key from storage\n     * @param {string} key - the key for the item\n     * This is used to clear the storage\n     * @returns {string} the data item\n     */\n    MemoryStorage.getItem = function (key) {\n        return Object.prototype.hasOwnProperty.call(dataMemory, key)\n            ? dataMemory[key]\n            : undefined;\n    };\n    /**\n     * This is used to remove an item from storage\n     * @param {string} key - the key being set\n     * @returns {string} value - value that was deleted\n     */\n    MemoryStorage.removeItem = function (key) {\n        return delete dataMemory[key];\n    };\n    /**\n     * This is used to clear the storage\n     * @returns {string} nothing\n     */\n    MemoryStorage.clear = function () {\n        dataMemory = {};\n        return dataMemory;\n    };\n    return MemoryStorage;\n}());\nexport { MemoryStorage };\nvar StorageHelper = /** @class */ (function () {\n    /**\n     * This is used to get a storage object\n     * @returns {object} the storage\n     */\n    function StorageHelper() {\n        try {\n            this.storageWindow = window.localStorage;\n            this.storageWindow.setItem('aws.amplify.test-ls', 1);\n            this.storageWindow.removeItem('aws.amplify.test-ls');\n        }\n        catch (exception) {\n            this.storageWindow = MemoryStorage;\n        }\n    }\n    /**\n     * This is used to return the storage\n     * @returns {object} the storage\n     */\n    StorageHelper.prototype.getStorage = function () {\n        return this.storageWindow;\n    };\n    return StorageHelper;\n}());\nexport default StorageHelper;\n//# sourceMappingURL=index.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport JS from '../JS';\nimport MemoryStorage from '../StorageHelper';\nvar Linking = {};\nvar AppState = {\n    addEventListener: function (action, handler) {\n        return;\n    },\n};\n// if not in react native, just use local storage\nvar AsyncStorage = JS.browserOrNode().isBrowser\n    ? new MemoryStorage().getStorage()\n    : undefined;\nexport { Linking, AppState, AsyncStorage };\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { ConsoleLogger as Logger } from './Logger';\nimport StorageHelper from './StorageHelper';\nimport { AWS } from './Facet';\nimport JS from './JS';\nimport { FacebookOAuth, GoogleOAuth } from './OAuthHelper';\nimport Amplify from './Amplify';\nvar logger = new Logger('Credentials');\nvar CREDENTIALS_TTL = 50 * 60 * 1000; // 50 min, can be modified on config if required in the future\nvar Credentials = /** @class */ (function () {\n    function Credentials(config) {\n        this._gettingCredPromise = null;\n        this._refreshHandlers = {};\n        this.configure(config);\n        this._refreshHandlers['google'] = GoogleOAuth.refreshGoogleToken;\n        this._refreshHandlers['facebook'] = FacebookOAuth.refreshFacebookToken;\n    }\n    Credentials.prototype.getCredSource = function () {\n        return this._credentials_source;\n    };\n    Credentials.prototype.configure = function (config) {\n        if (!config)\n            return this._config || {};\n        this._config = Object.assign({}, this._config, config);\n        var refreshHandlers = this._config.refreshHandlers;\n        // If the developer has provided an object of refresh handlers,\n        // then we can merge the provided handlers with the current handlers.\n        if (refreshHandlers) {\n            this._refreshHandlers = __assign(__assign({}, this._refreshHandlers), refreshHandlers);\n        }\n        this._storage = this._config.storage;\n        if (!this._storage) {\n            this._storage = new StorageHelper().getStorage();\n        }\n        this._storageSync = Promise.resolve();\n        if (typeof this._storage['sync'] === 'function') {\n            this._storageSync = this._storage['sync']();\n        }\n        return this._config;\n    };\n    Credentials.prototype.get = function () {\n        logger.debug('getting credentials');\n        return this._pickupCredentials();\n    };\n    Credentials.prototype._pickupCredentials = function () {\n        logger.debug('picking up credentials');\n        if (!this._gettingCredPromise || !this._gettingCredPromise.isPending()) {\n            logger.debug('getting new cred promise');\n            if (AWS.config &&\n                AWS.config.credentials &&\n                AWS.config.credentials instanceof AWS.Credentials) {\n                this._gettingCredPromise = JS.makeQuerablePromise(this._setCredentialsFromAWS());\n            }\n            else {\n                this._gettingCredPromise = JS.makeQuerablePromise(this._keepAlive());\n            }\n        }\n        else {\n            logger.debug('getting old cred promise');\n        }\n        return this._gettingCredPromise;\n    };\n    Credentials.prototype._keepAlive = function () {\n        logger.debug('checking if credentials exists and not expired');\n        var cred = this._credentials;\n        if (cred && !this._isExpired(cred)) {\n            logger.debug('credentials not changed and not expired, directly return');\n            return Promise.resolve(cred);\n        }\n        logger.debug('need to get a new credential or refresh the existing one');\n        if (Amplify.Auth &&\n            typeof Amplify.Auth.currentUserCredentials === 'function') {\n            return Amplify.Auth.currentUserCredentials();\n        }\n        else {\n            return Promise.reject('No Auth module registered in Amplify');\n        }\n    };\n    Credentials.prototype.refreshFederatedToken = function (federatedInfo) {\n        var _this = this;\n        logger.debug('Getting federated credentials');\n        var provider = federatedInfo.provider, user = federatedInfo.user;\n        var token = federatedInfo.token, expires_at = federatedInfo.expires_at, identity_id = federatedInfo.identity_id;\n        var that = this;\n        logger.debug('checking if federated jwt token expired');\n        if (expires_at > new Date().getTime()) {\n            // if not expired\n            logger.debug('token not expired');\n            return this._setCredentialsFromFederation({\n                provider: provider,\n                token: token,\n                user: user,\n                identity_id: identity_id,\n                expires_at: expires_at,\n            });\n        }\n        else {\n            // if refresh handler exists\n            if (that._refreshHandlers[provider] &&\n                typeof that._refreshHandlers[provider] === 'function') {\n                logger.debug('getting refreshed jwt token from federation provider');\n                return that._refreshHandlers[provider]()\n                    .then(function (data) {\n                    logger.debug('refresh federated token sucessfully', data);\n                    token = data.token;\n                    identity_id = data.identity_id;\n                    expires_at = data.expires_at;\n                    return that._setCredentialsFromFederation({\n                        provider: provider,\n                        token: token,\n                        user: user,\n                        identity_id: identity_id,\n                        expires_at: expires_at,\n                    });\n                })\n                    .catch(function (e) {\n                    logger.debug('refresh federated token failed', e);\n                    _this.clear();\n                    return Promise.reject('refreshing federation token failed: ' + e);\n                });\n            }\n            else {\n                logger.debug('no refresh handler for provider:', provider);\n                this.clear();\n                return Promise.reject('no refresh handler for provider');\n            }\n        }\n    };\n    Credentials.prototype._isExpired = function (credentials) {\n        if (!credentials) {\n            logger.debug('no credentials for expiration check');\n            return true;\n        }\n        logger.debug('is this credentials expired?', credentials);\n        var ts = new Date().getTime();\n        var delta = 10 * 60 * 1000; // 10 minutes\n        var expired = credentials.expired, expireTime = credentials.expireTime;\n        if (!expired &&\n            expireTime > ts + delta &&\n            ts < this._nextCredentialsRefresh) {\n            return false;\n        }\n        return true;\n    };\n    Credentials.prototype._setCredentialsForGuest = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var attempted, _a, identityPoolId, region, mandatorySignIn, identityId, e_1, credentials, that;\n            var _this = this;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        attempted = false;\n                        logger.debug('setting credentials for guest');\n                        _a = this._config, identityPoolId = _a.identityPoolId, region = _a.region, mandatorySignIn = _a.mandatorySignIn;\n                        if (mandatorySignIn) {\n                            return [2 /*return*/, Promise.reject('cannot get guest credentials when mandatory signin enabled')];\n                        }\n                        if (!identityPoolId) {\n                            logger.debug('No Cognito Federated Identity pool provided');\n                            return [2 /*return*/, Promise.reject('No Cognito Federated Identity pool provided')];\n                        }\n                        identityId = undefined;\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this._storageSync];\n                    case 2:\n                        _b.sent();\n                        identityId = this._storage.getItem('CognitoIdentityId-' + identityPoolId);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _b.sent();\n                        logger.debug('Failed to get the cached identityId', e_1);\n                        return [3 /*break*/, 4];\n                    case 4:\n                        credentials = new AWS.CognitoIdentityCredentials({\n                            IdentityPoolId: identityPoolId,\n                            IdentityId: identityId ? identityId : undefined,\n                        }, {\n                            region: region,\n                        });\n                        that = this;\n                        return [2 /*return*/, this._loadCredentials(credentials, 'guest', false, null)\n                                .then(function (res) {\n                                return res;\n                            })\n                                .catch(function (e) { return __awaiter(_this, void 0, void 0, function () {\n                                var newCredentials;\n                                return __generator(this, function (_a) {\n                                    // If identity id is deleted in the console, we make one attempt to recreate it\n                                    // and remove existing id from cache.\n                                    if (e.code === 'ResourceNotFoundException' &&\n                                        e.message === \"Identity '\" + identityId + \"' not found.\" &&\n                                        !attempted) {\n                                        attempted = true;\n                                        logger.debug('Failed to load guest credentials');\n                                        this._storage.removeItem('CognitoIdentityId-' + identityPoolId);\n                                        credentials.clearCachedId();\n                                        newCredentials = new AWS.CognitoIdentityCredentials({\n                                            IdentityPoolId: identityPoolId,\n                                            IdentityId: undefined,\n                                        }, {\n                                            region: region,\n                                        });\n                                        return [2 /*return*/, this._loadCredentials(newCredentials, 'guest', false, null)];\n                                    }\n                                    else {\n                                        return [2 /*return*/, e];\n                                    }\n                                    return [2 /*return*/];\n                                });\n                            }); })];\n                }\n            });\n        });\n    };\n    Credentials.prototype._setCredentialsFromAWS = function () {\n        var credentials = AWS.config.credentials;\n        logger.debug('setting credentials from aws');\n        var that = this;\n        if (credentials instanceof AWS.Credentials) {\n            return Promise.resolve(credentials);\n        }\n        else {\n            logger.debug('AWS.config.credentials is not an instance of AWS Credentials');\n            return Promise.reject('AWS.config.credentials is not an instance of AWS Credentials');\n        }\n    };\n    Credentials.prototype._setCredentialsFromFederation = function (params) {\n        var provider = params.provider, token = params.token, identity_id = params.identity_id, user = params.user, expires_at = params.expires_at;\n        var domains = {\n            google: 'accounts.google.com',\n            facebook: 'graph.facebook.com',\n            amazon: 'www.amazon.com',\n            developer: 'cognito-identity.amazonaws.com',\n        };\n        // Use custom provider url instead of the predefined ones\n        var domain = domains[provider] || provider;\n        if (!domain) {\n            return Promise.reject('You must specify a federated provider');\n        }\n        var logins = {};\n        logins[domain] = token;\n        var _a = this._config, identityPoolId = _a.identityPoolId, region = _a.region;\n        if (!identityPoolId) {\n            logger.debug('No Cognito Federated Identity pool provided');\n            return Promise.reject('No Cognito Federated Identity pool provided');\n        }\n        var credentials = new AWS.CognitoIdentityCredentials({\n            IdentityPoolId: identityPoolId,\n            IdentityId: identity_id,\n            Logins: logins,\n        }, {\n            region: region,\n        });\n        return this._loadCredentials(credentials, 'federated', true, params);\n    };\n    Credentials.prototype._setCredentialsFromSession = function (session) {\n        logger.debug('set credentials from session');\n        var idToken = session.getIdToken().getJwtToken();\n        var _a = this._config, region = _a.region, userPoolId = _a.userPoolId, identityPoolId = _a.identityPoolId;\n        if (!identityPoolId) {\n            logger.debug('No Cognito Federated Identity pool provided');\n            return Promise.reject('No Cognito Federated Identity pool provided');\n        }\n        var key = 'cognito-idp.' + region + '.amazonaws.com/' + userPoolId;\n        var logins = {};\n        logins[key] = idToken;\n        var credentials = new AWS.CognitoIdentityCredentials({\n            IdentityPoolId: identityPoolId,\n            Logins: logins,\n        }, {\n            region: region,\n        });\n        return this._loadCredentials(credentials, 'userPool', true, null);\n    };\n    Credentials.prototype._loadCredentials = function (credentials, source, authenticated, info) {\n        var _this = this;\n        var that = this;\n        var identityPoolId = this._config.identityPoolId;\n        return new Promise(function (res, rej) {\n            credentials.get(function (err) { return __awaiter(_this, void 0, void 0, function () {\n                var user, provider, token, expires_at, identity_id, e_2;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            if (err) {\n                                logger.debug('Failed to load credentials', credentials);\n                                rej(err);\n                                return [2 /*return*/];\n                            }\n                            logger.debug('Load credentials successfully', credentials);\n                            that._credentials = credentials;\n                            that._credentials.authenticated = authenticated;\n                            that._credentials_source = source;\n                            that._nextCredentialsRefresh = new Date().getTime() + CREDENTIALS_TTL;\n                            if (!(source === 'federated')) return [3 /*break*/, 3];\n                            user = Object.assign({ id: this._credentials.identityId }, info.user);\n                            provider = info.provider, token = info.token, expires_at = info.expires_at, identity_id = info.identity_id;\n                            try {\n                                this._storage.setItem('aws-amplify-federatedInfo', JSON.stringify({\n                                    provider: provider,\n                                    token: token,\n                                    user: user,\n                                    expires_at: expires_at,\n                                    identity_id: identity_id,\n                                }));\n                            }\n                            catch (e) {\n                                logger.debug('Failed to put federated info into auth storage', e);\n                            }\n                            if (!(Amplify.Cache && typeof Amplify.Cache.setItem === 'function')) return [3 /*break*/, 2];\n                            return [4 /*yield*/, Amplify.Cache.setItem('federatedInfo', {\n                                    provider: provider,\n                                    token: token,\n                                    user: user,\n                                    expires_at: expires_at,\n                                    identity_id: identity_id,\n                                }, { priority: 1 })];\n                        case 1:\n                            _a.sent();\n                            return [3 /*break*/, 3];\n                        case 2:\n                            logger.debug('No Cache module registered in Amplify');\n                            _a.label = 3;\n                        case 3:\n                            if (!(source === 'guest')) return [3 /*break*/, 7];\n                            _a.label = 4;\n                        case 4:\n                            _a.trys.push([4, 6, , 7]);\n                            return [4 /*yield*/, this._storageSync];\n                        case 5:\n                            _a.sent();\n                            this._storage.setItem('CognitoIdentityId-' + identityPoolId, credentials.identityId);\n                            return [3 /*break*/, 7];\n                        case 6:\n                            e_2 = _a.sent();\n                            logger.debug('Failed to cache identityId', e_2);\n                            return [3 /*break*/, 7];\n                        case 7:\n                            res(that._credentials);\n                            return [2 /*return*/];\n                    }\n                });\n            }); });\n        });\n    };\n    Credentials.prototype.set = function (params, source) {\n        if (source === 'session') {\n            return this._setCredentialsFromSession(params);\n        }\n        else if (source === 'federation') {\n            return this._setCredentialsFromFederation(params);\n        }\n        else if (source === 'guest') {\n            return this._setCredentialsForGuest();\n        }\n        else {\n            logger.debug('no source specified for setting credentials');\n            return Promise.reject('invalid source');\n        }\n    };\n    Credentials.prototype.clear = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, identityPoolId, region, credentials;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = this._config, identityPoolId = _a.identityPoolId, region = _a.region;\n                        if (identityPoolId) {\n                            credentials = new AWS.CognitoIdentityCredentials({\n                                IdentityPoolId: identityPoolId,\n                            }, {\n                                region: region,\n                            });\n                            credentials.clearCachedId();\n                        }\n                        this._credentials = null;\n                        this._credentials_source = null;\n                        this._storage.removeItem('aws-amplify-federatedInfo');\n                        if (!(Amplify.Cache && typeof Amplify.Cache.setItem === 'function')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, Amplify.Cache.removeItem('federatedInfo')];\n                    case 1:\n                        _b.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        logger.debug('No Cache module registered in Amplify');\n                        _b.label = 3;\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Compact version of credentials\n     * @param {Object} credentials\n     * @return {Object} - Credentials\n     */\n    Credentials.prototype.shear = function (credentials) {\n        return {\n            accessKeyId: credentials.accessKeyId,\n            sessionToken: credentials.sessionToken,\n            secretAccessKey: credentials.secretAccessKey,\n            identityId: credentials.identityId,\n            authenticated: credentials.authenticated,\n        };\n    };\n    return Credentials;\n}());\nexport { Credentials };\nvar instance = new Credentials(null);\nexport default instance;\n//# sourceMappingURL=Credentials.js.map","/**\n * Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { ConsoleLogger as Logger } from '../Logger';\nimport JS from '../JS';\nimport Amplify from '../Amplify';\n/**\n * Provides a means to registering a service worker in the browser\n * and communicating with it via postMessage events.\n * https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/\n *\n * postMessage events are currently not supported in all browsers. See:\n * https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API\n *\n * At the minmum this class will register the service worker and listen\n * and attempt to dispatch messages on state change and record analytics\n * events based on the service worker lifecycle.\n */\nvar ServiceWorkerClass = /** @class */ (function () {\n    function ServiceWorkerClass() {\n        // The AWS Amplify logger\n        this._logger = new Logger('ServiceWorker');\n    }\n    Object.defineProperty(ServiceWorkerClass.prototype, \"serviceWorker\", {\n        /**\n         * Get the currently active service worker\n         */\n        get: function () {\n            return this._serviceWorker;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Register the service-worker.js file in the browser\n     * Make sure the service-worker.js is part of the build\n     * for example with Angular, modify the angular-cli.json file\n     * and add to \"assets\" array \"service-worker.js\"\n     * @param {string} - (optional) Service worker file. Defaults to \"/service-worker.js\"\n     * @param {string} - (optional) The service worker scope. Defaults to \"/\"\n     *  - API Doc: https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register\n     * @returns {Promise}\n     *\t- resolve(ServiceWorkerRegistration)\n     *\t- reject(Error)\n     **/\n    ServiceWorkerClass.prototype.register = function (filePath, scope) {\n        var _this = this;\n        if (filePath === void 0) { filePath = '/service-worker.js'; }\n        if (scope === void 0) { scope = '/'; }\n        this._logger.debug(\"registering \" + filePath);\n        this._logger.debug(\"registering service worker with scope \" + scope);\n        return new Promise(function (resolve, reject) {\n            if (navigator && 'serviceWorker' in navigator) {\n                navigator.serviceWorker\n                    .register(filePath, {\n                    scope: scope,\n                })\n                    .then(function (registration) {\n                    if (registration.installing) {\n                        _this._serviceWorker = registration.installing;\n                    }\n                    else if (registration.waiting) {\n                        _this._serviceWorker = registration.waiting;\n                    }\n                    else if (registration.active) {\n                        _this._serviceWorker = registration.active;\n                    }\n                    _this._registration = registration;\n                    _this._setupListeners();\n                    _this._logger.debug(\"Service Worker Registration Success: \" + registration);\n                    return resolve(registration);\n                })\n                    .catch(function (error) {\n                    _this._logger.debug(\"Service Worker Registration Failed \" + error);\n                    return reject(error);\n                });\n            }\n            else {\n                return reject(new Error('Service Worker not available'));\n            }\n        });\n    };\n    /**\n     * Enable web push notifications. If not subscribed, a new subscription will\n     * be created and registered.\n     * \tTest Push Server: https://web-push-codelab.glitch.me/\n     * \tPush Server Libraries: https://github.com/web-push-libs/\n     * \tAPI Doc: https://developers.google.com/web/fundamentals/codelabs/push-notifications/\n     * @param publicKey\n     * @returns {Promise}\n     * \t- resolve(PushSubscription)\n     *  - reject(Error)\n     */\n    ServiceWorkerClass.prototype.enablePush = function (publicKey) {\n        var _this = this;\n        if (!this._registration)\n            throw new Error('Service Worker not registered');\n        this._publicKey = publicKey;\n        return new Promise(function (resolve, reject) {\n            if (JS.browserOrNode().isBrowser) {\n                _this._registration.pushManager.getSubscription().then(function (subscription) {\n                    if (subscription) {\n                        _this._subscription = subscription;\n                        _this._logger.debug(\"User is subscribed to push: \" + JSON.stringify(subscription));\n                        resolve(subscription);\n                    }\n                    else {\n                        _this._logger.debug(\"User is NOT subscribed to push\");\n                        return _this._registration.pushManager\n                            .subscribe({\n                            userVisibleOnly: true,\n                            applicationServerKey: _this._urlB64ToUint8Array(publicKey),\n                        })\n                            .then(function (subscription) {\n                            _this._subscription = subscription;\n                            _this._logger.debug(\"User subscribed: \" + JSON.stringify(subscription));\n                            resolve(subscription);\n                        })\n                            .catch(function (error) {\n                            _this._logger.error(error);\n                        });\n                    }\n                });\n            }\n            else {\n                return reject(new Error('Service Worker not available'));\n            }\n        });\n    };\n    /**\n     * Convert a base64 encoded string to a Uint8 array for the push server key\n     * @param base64String\n     */\n    ServiceWorkerClass.prototype._urlB64ToUint8Array = function (base64String) {\n        var padding = '='.repeat((4 - (base64String.length % 4)) % 4);\n        var base64 = (base64String + padding)\n            .replace(/\\-/g, '+')\n            .replace(/_/g, '/');\n        var rawData = window.atob(base64);\n        var outputArray = new Uint8Array(rawData.length);\n        for (var i = 0; i < rawData.length; ++i) {\n            outputArray[i] = rawData.charCodeAt(i);\n        }\n        return outputArray;\n    };\n    /**\n     * Send a message to the service worker. The service worker needs\n     * to implement `self.addEventListener('message') to handle the\n     * message. This ***currently*** does not work in Safari or IE.\n     * @param {object | string} - An arbitrary JSON object or string message to send to the service worker\n     *\t- see: https://developer.mozilla.org/en-US/docs/Web/API/Transferable\n     * @returns {Promise}\n     **/\n    ServiceWorkerClass.prototype.send = function (message) {\n        if (this._serviceWorker) {\n            this._serviceWorker.postMessage(typeof message === 'object' ? JSON.stringify(message) : message);\n        }\n    };\n    /**\n     * Listen for service worker state change and message events\n     * https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorker/state\n     **/\n    ServiceWorkerClass.prototype._setupListeners = function () {\n        var _this = this;\n        this._serviceWorker.addEventListener('statechange', function (event) {\n            var currentState = _this._serviceWorker.state;\n            _this._logger.debug(\"ServiceWorker statechange: \" + currentState);\n            if (Amplify.Analytics && typeof Amplify.Analytics.record === 'function') {\n                Amplify.Analytics.record({\n                    name: 'ServiceWorker',\n                    attributes: {\n                        state: currentState,\n                    },\n                });\n            }\n        });\n        this._serviceWorker.addEventListener('message', function (event) {\n            _this._logger.debug(\"ServiceWorker message event: \" + event);\n        });\n    };\n    return ServiceWorkerClass;\n}());\nexport default ServiceWorkerClass;\n//# sourceMappingURL=ServiceWorker.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar packageInfo = require('../../package.json');\nvar Platform = {\n    userAgent: \"aws-amplify/\" + packageInfo.version + \" js\",\n    product: '',\n    navigator: null,\n    isReactNative: false,\n};\nif (typeof navigator !== 'undefined' && navigator.product) {\n    Platform.product = navigator.product || '';\n    Platform.navigator = navigator || null;\n    switch (navigator.product) {\n        case 'ReactNative':\n            Platform.userAgent = \"aws-amplify/\" + packageInfo.version + \" react-native\";\n            Platform.isReactNative = true;\n            break;\n        default:\n            Platform.userAgent = \"aws-amplify/\" + packageInfo.version + \" js\";\n            Platform.isReactNative = false;\n            break;\n    }\n}\nexport default Platform;\n//# sourceMappingURL=index.js.map","/*\n * Copyright 2018-2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n/**\n * This Symbol is used to reference an internal-only PubSub provider that\n * is used for AppSync/GraphQL subscriptions in the API category.\n */\nvar hasSymbol = typeof Symbol !== 'undefined' && typeof Symbol.for === 'function';\nexport var INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER = hasSymbol\n    ? Symbol.for('INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER')\n    : '@@INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER';\nexport var INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER = hasSymbol\n    ? Symbol.for('INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER')\n    : '@@INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER';\nexport var USER_AGENT_HEADER = 'x-amz-user-agent';\n//# sourceMappingURL=constants.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport Analytics, { AnalyticsClass, AWSPinpointProvider, AWSKinesisProvider, AWSKinesisFirehoseProvider, AmazonPersonalizeProvider, } from '@aws-amplify/analytics';\nimport Auth, { AuthClass } from '@aws-amplify/auth';\nimport Storage, { StorageClass } from '@aws-amplify/storage';\nimport API, { APIClass, graphqlOperation } from '@aws-amplify/api';\nimport PubSub, { PubSubClass } from '@aws-amplify/pubsub';\nimport Cache from '@aws-amplify/cache';\nimport Interactions, { InteractionsClass } from '@aws-amplify/interactions';\nimport * as UI from '@aws-amplify/ui';\nimport XR, { XRClass } from '@aws-amplify/xr';\nimport Predictions from '@aws-amplify/predictions';\nimport { DataStore } from '@aws-amplify/datastore';\nimport Amplify, { ConsoleLogger as Logger, Hub, JS, ClientDevice, Signer, I18n, ServiceWorker, } from '@aws-amplify/core';\nexport default Amplify;\nAmplify.Auth = Auth;\nAmplify.Analytics = Analytics;\nAmplify.API = API;\nAmplify.Storage = Storage;\nAmplify.I18n = I18n;\nAmplify.Cache = Cache;\nAmplify.PubSub = PubSub;\nAmplify.Logger = Logger;\nAmplify.ServiceWorker = ServiceWorker;\nAmplify.Interactions = Interactions;\nAmplify.UI = UI;\nAmplify.XR = XR;\nAmplify.Predictions = Predictions;\nAmplify.DataStore = DataStore;\nexport { Auth, Analytics, Storage, API, PubSub, I18n, Logger, Hub, Cache, JS, ClientDevice, Signer, ServiceWorker, Interactions, UI, XR, Predictions, };\nexport { AuthClass, AnalyticsClass, APIClass, StorageClass, PubSubClass, InteractionsClass, XRClass, AWSPinpointProvider, AWSKinesisProvider, AWSKinesisFirehoseProvider, AmazonPersonalizeProvider, };\nexport { graphqlOperation };\n//# sourceMappingURL=index.js.map","/**\n * The main AWS namespace\n */\nvar AWS = { util: require('./util') };\n\n/**\n * @api private\n * @!macro [new] nobrowser\n *   @note This feature is not supported in the browser environment of the SDK.\n */\nvar _hidden = {}; _hidden.toString(); // hack to parse macro\n\n/**\n * @api private\n */\nmodule.exports = AWS;\n\nAWS.util.update(AWS, {\n\n  /**\n   * @constant\n   */\n  VERSION: '2.518.0',\n\n  /**\n   * @api private\n   */\n  Signers: {},\n\n  /**\n   * @api private\n   */\n  Protocol: {\n    Json: require('./protocol/json'),\n    Query: require('./protocol/query'),\n    Rest: require('./protocol/rest'),\n    RestJson: require('./protocol/rest_json'),\n    RestXml: require('./protocol/rest_xml')\n  },\n\n  /**\n   * @api private\n   */\n  XML: {\n    Builder: require('./xml/builder'),\n    Parser: null // conditionally set based on environment\n  },\n\n  /**\n   * @api private\n   */\n  JSON: {\n    Builder: require('./json/builder'),\n    Parser: require('./json/parser')\n  },\n\n  /**\n   * @api private\n   */\n  Model: {\n    Api: require('./model/api'),\n    Operation: require('./model/operation'),\n    Shape: require('./model/shape'),\n    Paginator: require('./model/paginator'),\n    ResourceWaiter: require('./model/resource_waiter')\n  },\n\n  /**\n   * @api private\n   */\n  apiLoader: require('./api_loader'),\n\n  /**\n   * @api private\n   */\n  EndpointCache: require('../vendor/endpoint-cache').EndpointCache\n});\nrequire('./sequential_executor');\nrequire('./service');\nrequire('./config');\nrequire('./http');\nrequire('./event_listeners');\nrequire('./request');\nrequire('./response');\nrequire('./resource_waiter');\nrequire('./signers/request_signer');\nrequire('./param_validator');\n\n/**\n * @readonly\n * @return [AWS.SequentialExecutor] a collection of global event listeners that\n *   are attached to every sent request.\n * @see AWS.Request AWS.Request for a list of events to listen for\n * @example Logging the time taken to send a request\n *   AWS.events.on('send', function startSend(resp) {\n *     resp.startTime = new Date().getTime();\n *   }).on('complete', function calculateTime(resp) {\n *     var time = (new Date().getTime() - resp.startTime) / 1000;\n *     console.log('Request took ' + time + ' seconds');\n *   });\n *\n *   new AWS.S3().listBuckets(); // prints 'Request took 0.285 seconds'\n */\nAWS.events = new AWS.SequentialExecutor();\n\n//create endpoint cache lazily\nAWS.util.memoizedProperty(AWS, 'endpointCache', function() {\n  return new AWS.EndpointCache(AWS.config.endpointCacheSize);\n}, true);\n","var util = require('./util');\n\n// browser specific modules\nutil.crypto.lib = require('./browserCryptoLib');\nutil.Buffer = require('buffer/').Buffer;\nutil.url = require('url/');\nutil.querystring = require('querystring/');\nutil.realClock = require('./realclock/browserClock');\nutil.environment = 'js';\nutil.createEventStream = require('./event-stream/buffered-create-event-stream').createEventStream;\nutil.isBrowser = function() { return true; };\nutil.isNode = function() { return false; };\n\nvar AWS = require('./core');\n\n/**\n * @api private\n */\nmodule.exports = AWS;\n\nrequire('./credentials');\nrequire('./credentials/credential_provider_chain');\nrequire('./credentials/temporary_credentials');\nrequire('./credentials/chainable_temporary_credentials');\nrequire('./credentials/web_identity_credentials');\nrequire('./credentials/cognito_identity_credentials');\nrequire('./credentials/saml_credentials');\n\n// Load the DOMParser XML parser\nAWS.XML.Parser = require('./xml/browser_parser');\n\n// Load the XHR HttpClient\nrequire('./http/xhr');\n\nif (typeof process === 'undefined') {\n  var process = {\n    browser: true\n  };\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { isPredicateGroup, isPredicateObj, } from './types';\nimport { v4 as uuid } from 'uuid';\nexport var exhaustiveCheck = function (obj, throwOnError) {\n    if (throwOnError === void 0) { throwOnError = true; }\n    if (throwOnError) {\n        throw new Error(\"Invalid \" + obj);\n    }\n};\nexport var validatePredicate = function (model, groupType, predicatesOrGroups) {\n    var filterType;\n    var isNegation = false;\n    if (predicatesOrGroups.length === 0) {\n        return true;\n    }\n    switch (groupType) {\n        case 'not':\n            filterType = 'every';\n            isNegation = true;\n            break;\n        case 'and':\n            filterType = 'every';\n            break;\n        case 'or':\n            filterType = 'some';\n            break;\n        default:\n            exhaustiveCheck(groupType);\n    }\n    var result = predicatesOrGroups[filterType](function (predicateOrGroup) {\n        if (isPredicateObj(predicateOrGroup)) {\n            var field = predicateOrGroup.field, operator = predicateOrGroup.operator, operand = predicateOrGroup.operand;\n            var value = model[field];\n            return validatePredicateField(value, operator, operand);\n        }\n        if (isPredicateGroup(predicateOrGroup)) {\n            var type = predicateOrGroup.type, predicates = predicateOrGroup.predicates;\n            return validatePredicate(model, type, predicates);\n        }\n        throw new Error('Not a predicate or group');\n    });\n    return isNegation ? !result : result;\n};\nvar validatePredicateField = function (value, operator, operand) {\n    switch (operator) {\n        case 'ne':\n            return value !== operand;\n        case 'eq':\n            return value === operand;\n        case 'le':\n            return value <= operand;\n        case 'lt':\n            return value < operand;\n        case 'ge':\n            return value >= operand;\n        case 'gt':\n            return value > operand;\n        case 'between':\n            var _a = operand, min = _a[0], max = _a[1];\n            return value >= min && value <= max;\n        case 'beginsWith':\n            return value.startsWith(operand);\n        case 'contains':\n            return (value.indexOf(operand) > -1);\n        case 'notContains':\n            return (value.indexOf(operand) === -1);\n        default:\n            exhaustiveCheck(operator, false);\n            return false;\n    }\n};\nexport var isModelConstructor = function (obj) {\n    return (obj && typeof obj.copyOf === 'function');\n};\nexport var establishRelation = function (namespace) {\n    var relationship = {};\n    Object.keys(namespace.models).forEach(function (mKey) {\n        relationship[mKey] = { indexes: [], relationTypes: [] };\n        var model = namespace.models[mKey];\n        Object.keys(model.fields).forEach(function (attr) {\n            var fieldAttribute = model.fields[attr];\n            if (typeof fieldAttribute.type === 'object' &&\n                'model' in fieldAttribute.type) {\n                var connectionType = fieldAttribute.association.connectionType;\n                relationship[mKey].relationTypes.push({\n                    fieldName: fieldAttribute.name,\n                    modelName: fieldAttribute.type.model,\n                    relationType: connectionType,\n                    targetName: fieldAttribute.association['targetName'],\n                });\n                if (connectionType === 'BELONGS_TO') {\n                    relationship[mKey].indexes.push(fieldAttribute.association['targetName']);\n                }\n            }\n        });\n    });\n    return relationship;\n};\nvar topologicallySortedModels = new WeakMap();\nexport var traverseModel = function (srcModelName, instance, namespace, modelInstanceCreator, getModelConstructorByModelName) {\n    var relationships = namespace.relationships;\n    var modelConstructor = getModelConstructorByModelName(namespace.name, srcModelName);\n    var relation = relationships[srcModelName];\n    var result = [];\n    var newInstance = modelConstructor.copyOf(instance, function (draftInstance) {\n        relation.relationTypes.forEach(function (rItem) {\n            var modelConstructor = getModelConstructorByModelName(namespace.name, rItem.modelName);\n            switch (rItem.relationType) {\n                case 'HAS_ONE':\n                    if (instance[rItem.fieldName]) {\n                        var modelInstance = void 0;\n                        try {\n                            modelInstance = modelInstanceCreator(modelConstructor, instance[rItem.fieldName]);\n                        }\n                        catch (error) {\n                            // Do nothing\n                        }\n                        result.push({\n                            modelName: rItem.modelName,\n                            item: instance[rItem.fieldName],\n                            instance: modelInstance,\n                        });\n                        draftInstance[rItem.fieldName] = (draftInstance[rItem.fieldName]).id;\n                    }\n                    break;\n                case 'BELONGS_TO':\n                    if (instance[rItem.fieldName]) {\n                        var modelInstance = void 0;\n                        try {\n                            modelInstance = modelInstanceCreator(modelConstructor, instance[rItem.fieldName]);\n                        }\n                        catch (error) {\n                            // Do nothing\n                        }\n                        var isDeleted = (draftInstance[rItem.fieldName])._deleted;\n                        if (!isDeleted) {\n                            result.push({\n                                modelName: rItem.modelName,\n                                item: instance[rItem.fieldName],\n                                instance: modelInstance,\n                            });\n                        }\n                    }\n                    draftInstance[rItem.targetName] = draftInstance[rItem.fieldName]\n                        ? draftInstance[rItem.fieldName].id\n                        : null;\n                    delete draftInstance[rItem.fieldName];\n                    break;\n                case 'HAS_MANY':\n                    // Intentionally blank\n                    break;\n                default:\n                    exhaustiveCheck(rItem.relationType);\n                    break;\n            }\n        });\n    });\n    result.unshift({\n        modelName: srcModelName,\n        item: newInstance,\n        instance: newInstance,\n    });\n    if (!topologicallySortedModels.has(namespace)) {\n        topologicallySortedModels.set(namespace, Array.from(namespace.modelTopologicalOrdering.keys()));\n    }\n    var sortedModels = topologicallySortedModels.get(namespace);\n    result.sort(function (a, b) {\n        return (sortedModels.indexOf(a.modelName) - sortedModels.indexOf(b.modelName));\n    });\n    return result;\n};\nexport var getIndex = function (rel, src) {\n    var index = '';\n    rel.some(function (relItem) {\n        if (relItem.modelName === src) {\n            index = relItem.targetName;\n        }\n    });\n    return index;\n};\nexport var NAMESPACES;\n(function (NAMESPACES) {\n    NAMESPACES[\"DATASTORE\"] = \"datastore\";\n    NAMESPACES[\"USER\"] = \"user\";\n    NAMESPACES[\"SYNC\"] = \"sync\";\n    NAMESPACES[\"STORAGE\"] = \"storage\";\n})(NAMESPACES || (NAMESPACES = {}));\nvar DATASTORE = NAMESPACES.DATASTORE;\nvar USER = NAMESPACES.USER;\nvar SYNC = NAMESPACES.SYNC;\nvar STORAGE = NAMESPACES.STORAGE;\nexport { USER, SYNC, STORAGE, DATASTORE };\nvar privateModeCheckResult;\nexport var isPrivateMode = function () {\n    return new Promise(function (resolve) {\n        var dbname = uuid();\n        var db;\n        var isPrivate = function () {\n            privateModeCheckResult = false;\n            resolve(true);\n        };\n        var isNotPrivate = function () { return __awaiter(void 0, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(db && db.result && typeof db.result.close === 'function')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, db.result.close()];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2: return [4 /*yield*/, indexedDB.deleteDatabase(dbname)];\n                    case 3:\n                        _a.sent();\n                        privateModeCheckResult = true;\n                        return [2 /*return*/, resolve(false)];\n                }\n            });\n        }); };\n        if (privateModeCheckResult === true) {\n            return isNotPrivate();\n        }\n        if (privateModeCheckResult === false) {\n            return isPrivate();\n        }\n        if (indexedDB === null)\n            return isPrivate();\n        db = indexedDB.open(dbname);\n        db.onerror = isPrivate;\n        db.onsuccess = isNotPrivate;\n    });\n};\n//# sourceMappingURL=util.js.map","import { exhaustiveCheck } from './util';\nexport function isSchemaModel(obj) {\n    return obj && obj.pluralName !== undefined;\n}\nexport function isAssociatedWith(obj) {\n    return obj && obj.associatedWith;\n}\nexport function isTargetNameAssociation(obj) {\n    return obj && obj.targetName;\n}\nexport var GraphQLScalarType;\n(function (GraphQLScalarType) {\n    GraphQLScalarType[GraphQLScalarType[\"ID\"] = 0] = \"ID\";\n    GraphQLScalarType[GraphQLScalarType[\"String\"] = 1] = \"String\";\n    GraphQLScalarType[GraphQLScalarType[\"Int\"] = 2] = \"Int\";\n    GraphQLScalarType[GraphQLScalarType[\"Float\"] = 3] = \"Float\";\n    GraphQLScalarType[GraphQLScalarType[\"Boolean\"] = 4] = \"Boolean\";\n    GraphQLScalarType[GraphQLScalarType[\"AWSDate\"] = 5] = \"AWSDate\";\n    GraphQLScalarType[GraphQLScalarType[\"AWSTime\"] = 6] = \"AWSTime\";\n    GraphQLScalarType[GraphQLScalarType[\"AWSDateTime\"] = 7] = \"AWSDateTime\";\n    GraphQLScalarType[GraphQLScalarType[\"AWSTimestamp\"] = 8] = \"AWSTimestamp\";\n    GraphQLScalarType[GraphQLScalarType[\"AWSEmail\"] = 9] = \"AWSEmail\";\n    GraphQLScalarType[GraphQLScalarType[\"AWSJSON\"] = 10] = \"AWSJSON\";\n    GraphQLScalarType[GraphQLScalarType[\"AWSURL\"] = 11] = \"AWSURL\";\n    GraphQLScalarType[GraphQLScalarType[\"AWSPhone\"] = 12] = \"AWSPhone\";\n    GraphQLScalarType[GraphQLScalarType[\"AWSIPAddress\"] = 13] = \"AWSIPAddress\";\n})(GraphQLScalarType || (GraphQLScalarType = {}));\n(function (GraphQLScalarType) {\n    function getJSType(scalar) {\n        switch (scalar) {\n            case 'Boolean':\n                return 'boolean';\n            case 'ID':\n            case 'String':\n            case 'AWSDate':\n            case 'AWSTime':\n            case 'AWSDateTime':\n            case 'AWSEmail':\n            case 'AWSJSON':\n            case 'AWSURL':\n            case 'AWSPhone':\n            case 'AWSIPAddress':\n                return 'string';\n            case 'Int':\n            case 'Float':\n            case 'AWSTimestamp':\n                return 'number';\n            default:\n                exhaustiveCheck(scalar);\n        }\n    }\n    GraphQLScalarType.getJSType = getJSType;\n})(GraphQLScalarType || (GraphQLScalarType = {}));\nexport function isGraphQLScalarType(obj) {\n    return obj && GraphQLScalarType[obj] !== undefined;\n}\nexport function isModelFieldType(obj) {\n    var modelField = 'model';\n    if (obj && obj[modelField])\n        return true;\n    return false;\n}\nexport function isNonModelFieldType(obj) {\n    var typeField = 'nonModel';\n    if (obj && obj[typeField])\n        return true;\n    return false;\n}\nexport function isEnumFieldType(obj) {\n    var modelField = 'enum';\n    if (obj && obj[modelField])\n        return true;\n    return false;\n}\n//#endregion\n//#region Subscription messages\nexport var OpType;\n(function (OpType) {\n    OpType[\"INSERT\"] = \"INSERT\";\n    OpType[\"UPDATE\"] = \"UPDATE\";\n    OpType[\"DELETE\"] = \"DELETE\";\n})(OpType || (OpType = {}));\nexport function isPredicateObj(obj) {\n    return obj && obj.field !== undefined;\n}\nexport function isPredicateGroup(obj) {\n    return obj && obj.type !== undefined;\n}\nexport var QueryOne;\n(function (QueryOne) {\n    QueryOne[QueryOne[\"FIRST\"] = 0] = \"FIRST\";\n    QueryOne[QueryOne[\"LAST\"] = 1] = \"LAST\";\n})(QueryOne || (QueryOne = {}));\nexport var DISCARD = Symbol('DISCARD');\n//#endregion\n//# sourceMappingURL=types.js.map","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","import { exhaustiveCheck } from '../util';\nvar predicatesAllSet = new WeakSet();\nexport function isPredicatesAll(predicate) {\n    return predicatesAllSet.has(predicate);\n}\n// This symbol is not used at runtime, only its type (unique symbol)\nexport var PredicateAll = Symbol('A predicate that matches all records');\nvar Predicates = /** @class */ (function () {\n    function Predicates() {\n    }\n    Object.defineProperty(Predicates, \"ALL\", {\n        get: function () {\n            var predicate = (function (c) { return c; });\n            predicatesAllSet.add(predicate);\n            return predicate;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Predicates;\n}());\nexport { Predicates };\nvar ModelPredicateCreator = /** @class */ (function () {\n    function ModelPredicateCreator() {\n    }\n    ModelPredicateCreator.createPredicateBuilder = function (modelDefinition) {\n        var modelName = modelDefinition.name;\n        var fieldNames = new Set(Object.keys(modelDefinition.fields));\n        var handler;\n        var predicate = new Proxy({}, (handler = {\n            get: function (_target, propertyKey, receiver) {\n                var groupType = propertyKey;\n                switch (groupType) {\n                    case 'and':\n                    case 'or':\n                    case 'not':\n                        var result_1 = function (newPredicate) {\n                            var group = {\n                                type: groupType,\n                                predicates: [],\n                            };\n                            // Create a new recorder\n                            var tmpPredicateRecorder = new Proxy({}, handler);\n                            // Set the recorder group\n                            ModelPredicateCreator.predicateGroupsMap.set(tmpPredicateRecorder, group);\n                            // Apply the predicates to the recorder (this is the step that records the changes)\n                            newPredicate(tmpPredicateRecorder);\n                            // Push the group to the top-level recorder\n                            ModelPredicateCreator.predicateGroupsMap\n                                .get(receiver)\n                                .predicates.push(group);\n                            return receiver;\n                        };\n                        return result_1;\n                    default:\n                        exhaustiveCheck(groupType, false);\n                }\n                var field = propertyKey;\n                if (!fieldNames.has(field)) {\n                    throw new Error(\"Invalid field for model. field: \" + field + \", model: \" + modelName);\n                }\n                var result = function (operator, operand) {\n                    ModelPredicateCreator.predicateGroupsMap\n                        .get(receiver)\n                        .predicates.push({ field: field, operator: operator, operand: operand });\n                    return receiver;\n                };\n                return result;\n            },\n        }));\n        var group = {\n            type: 'and',\n            predicates: [],\n        };\n        ModelPredicateCreator.predicateGroupsMap.set(predicate, group);\n        return predicate;\n    };\n    ModelPredicateCreator.isValidPredicate = function (predicate) {\n        return ModelPredicateCreator.predicateGroupsMap.has(predicate);\n    };\n    ModelPredicateCreator.getPredicates = function (predicate, throwOnInvalid) {\n        if (throwOnInvalid === void 0) { throwOnInvalid = true; }\n        if (throwOnInvalid && !ModelPredicateCreator.isValidPredicate(predicate)) {\n            throw new Error('The predicate is not valid');\n        }\n        return ModelPredicateCreator.predicateGroupsMap.get(predicate);\n    };\n    ModelPredicateCreator.createFromExisting = function (modelDefinition, existing) {\n        if (!existing || !modelDefinition) {\n            return undefined;\n        }\n        return existing(ModelPredicateCreator.createPredicateBuilder(modelDefinition));\n    };\n    ModelPredicateCreator.createForId = function (modelDefinition, id) {\n        return ModelPredicateCreator.createPredicateBuilder(modelDefinition).id('eq', id);\n    };\n    ModelPredicateCreator.predicateGroupsMap = new WeakMap();\n    return ModelPredicateCreator;\n}());\nexport { ModelPredicateCreator };\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { isEnumFieldType, isGraphQLScalarType, isPredicateObj, isSchemaModel, isTargetNameAssociation, isNonModelFieldType, OpType, } from '../types';\nimport { exhaustiveCheck } from '../util';\nvar GraphQLOperationType;\n(function (GraphQLOperationType) {\n    GraphQLOperationType[\"LIST\"] = \"query\";\n    GraphQLOperationType[\"CREATE\"] = \"mutation\";\n    GraphQLOperationType[\"UPDATE\"] = \"mutation\";\n    GraphQLOperationType[\"DELETE\"] = \"mutation\";\n    GraphQLOperationType[\"GET\"] = \"query\";\n})(GraphQLOperationType || (GraphQLOperationType = {}));\nexport var TransformerMutationType;\n(function (TransformerMutationType) {\n    TransformerMutationType[\"CREATE\"] = \"Create\";\n    TransformerMutationType[\"UPDATE\"] = \"Update\";\n    TransformerMutationType[\"DELETE\"] = \"Delete\";\n    TransformerMutationType[\"GET\"] = \"Get\";\n})(TransformerMutationType || (TransformerMutationType = {}));\nvar dummyMetadata = {\n    _version: undefined,\n    _lastChangedAt: undefined,\n    _deleted: undefined,\n};\nvar metadataFields = (Object.keys(dummyMetadata));\nexport function getMetadataFields() {\n    return metadataFields;\n}\nfunction generateSelectionSet(namespace, modelDefinition) {\n    var scalarFields = getScalarFields(modelDefinition);\n    var nonModelFields = getNonModelFields(namespace, modelDefinition);\n    var scalarAndMetadataFields = Object.values(scalarFields)\n        .map(function (_a) {\n        var name = _a.name;\n        return name;\n    })\n        .concat(nonModelFields);\n    if (isSchemaModel(modelDefinition)) {\n        scalarAndMetadataFields = scalarAndMetadataFields\n            .concat(getMetadataFields())\n            .concat(getConnectionFields(modelDefinition));\n    }\n    var result = scalarAndMetadataFields.join('\\n');\n    return result;\n}\nfunction getScalarFields(modelDefinition) {\n    var fields = modelDefinition.fields;\n    var result = Object.values(fields)\n        .filter(function (field) {\n        if (isGraphQLScalarType(field.type) || isEnumFieldType(field.type)) {\n            return true;\n        }\n        return false;\n    })\n        .reduce(function (acc, field) {\n        acc[field.name] = field;\n        return acc;\n    }, {});\n    return result;\n}\nfunction getConnectionFields(modelDefinition) {\n    var result = [];\n    Object.values(modelDefinition.fields)\n        .filter(function (_a) {\n        var association = _a.association;\n        return association && Object.keys(association).length;\n    })\n        .forEach(function (_a) {\n        var name = _a.name, association = _a.association;\n        var connectionType = association.connectionType;\n        switch (connectionType) {\n            case 'HAS_ONE':\n            case 'HAS_MANY':\n                // Intentionally blank\n                break;\n            case 'BELONGS_TO':\n                if (isTargetNameAssociation(association)) {\n                    result.push(name + \" { id _deleted }\");\n                }\n                break;\n            default:\n                exhaustiveCheck(connectionType);\n        }\n    });\n    return result;\n}\nfunction getNonModelFields(namespace, modelDefinition) {\n    var result = [];\n    Object.values(modelDefinition.fields).forEach(function (_a) {\n        var name = _a.name, type = _a.type;\n        if (isNonModelFieldType(type)) {\n            var typeDefinition = namespace.nonModels[type.nonModel];\n            var scalarFields = Object.values(getScalarFields(typeDefinition)).map(function (_a) {\n                var name = _a.name;\n                return name;\n            });\n            var nested_1 = [];\n            Object.values(typeDefinition.fields).forEach(function (field) {\n                var type = field.type, name = field.name;\n                if (isNonModelFieldType(type)) {\n                    var typeDefinition_1 = namespace.nonModels[type.nonModel];\n                    nested_1.push(name + \" { \" + generateSelectionSet(namespace, typeDefinition_1) + \" }\");\n                }\n            });\n            result.push(name + \" { \" + scalarFields.join(' ') + \" \" + nested_1.join(' ') + \" }\");\n        }\n    });\n    return result;\n}\nexport function getAuthorizationRules(modelDefinition, transformerOpType) {\n    // Searching for owner authorization on attributes\n    var authConfig = []\n        .concat(modelDefinition.attributes)\n        .find(function (attr) { return attr && attr.type === 'auth'; });\n    var _a = (authConfig || {}).properties, _b = (_a === void 0 ? {} : _a).rules, rules = _b === void 0 ? [] : _b;\n    var resultRules = [];\n    // Multiple rules can be declared for allow: owner\n    rules.forEach(function (rule) {\n        // setting defaults for backwards compatibility with old cli\n        var _a = rule.identityClaim, identityClaim = _a === void 0 ? 'cognito:username' : _a, _b = rule.ownerField, ownerField = _b === void 0 ? 'owner' : _b, _c = rule.operations, operations = _c === void 0 ? ['create', 'update', 'delete'] : _c, _d = rule.provider, provider = _d === void 0 ? 'userPools' : _d, _e = rule.groupClaim, groupClaim = _e === void 0 ? 'cognito:groups' : _e, _f = rule.allow, authStrategy = _f === void 0 ? 'iam' : _f, _g = rule.groups, groups = _g === void 0 ? [] : _g;\n        var isOperationAuthorized = operations.find(function (operation) { return operation.toLowerCase() === transformerOpType.toLowerCase(); });\n        if (isOperationAuthorized) {\n            var rule_1 = {\n                identityClaim: identityClaim,\n                ownerField: ownerField,\n                provider: provider,\n                groupClaim: groupClaim,\n                authStrategy: authStrategy,\n                groups: groups,\n            };\n            // owner rules has least priority\n            if (authStrategy === 'owner') {\n                resultRules.push(rule_1);\n            }\n            else {\n                resultRules.unshift(rule_1);\n            }\n        }\n    });\n    return resultRules;\n}\nexport function buildSubscriptionGraphQLOperation(namespace, modelDefinition, transformerMutationType, isOwnerAuthorization, ownerField) {\n    var selectionSet = generateSelectionSet(namespace, modelDefinition);\n    var typeName = modelDefinition.name, pluralTypeName = modelDefinition.pluralName;\n    var opName = \"on\" + transformerMutationType + typeName;\n    var docArgs = '';\n    var opArgs = '';\n    if (isOwnerAuthorization) {\n        docArgs = \"($\" + ownerField + \": String!)\";\n        opArgs = \"(\" + ownerField + \": $\" + ownerField + \")\";\n    }\n    return [\n        transformerMutationType,\n        opName,\n        \"subscription operation\" + docArgs + \"{\\n\\t\\t\\t\" + opName + opArgs + \"{\\n\\t\\t\\t\\t\" + selectionSet + \"\\n\\t\\t\\t}\\n\\t\\t}\",\n    ];\n}\nexport function buildGraphQLOperation(namespace, modelDefinition, graphQLOpType) {\n    var selectionSet = generateSelectionSet(namespace, modelDefinition);\n    var typeName = modelDefinition.name, pluralTypeName = modelDefinition.pluralName;\n    var operation;\n    var documentArgs = ' ';\n    var operationArgs = ' ';\n    var transformerMutationType;\n    switch (graphQLOpType) {\n        case 'LIST':\n            operation = \"sync\" + pluralTypeName;\n            documentArgs = \"($limit: Int, $nextToken: String, $lastSync: AWSTimestamp)\";\n            operationArgs =\n                '(limit: $limit, nextToken: $nextToken, lastSync: $lastSync)';\n            selectionSet = \"items {\\n\\t\\t\\t\\t\\t\\t\\t\" + selectionSet + \"\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\tnextToken\\n\\t\\t\\t\\t\\t\\tstartedAt\";\n            break;\n        case 'CREATE':\n            operation = \"create\" + typeName;\n            documentArgs = \"($input: Create\" + typeName + \"Input!)\";\n            operationArgs = '(input: $input)';\n            transformerMutationType = TransformerMutationType.CREATE;\n            break;\n        case 'UPDATE':\n            operation = \"update\" + typeName;\n            documentArgs = \"($input: Update\" + typeName + \"Input!, $condition: Model\" + typeName + \"ConditionInput)\";\n            operationArgs = '(input: $input, condition: $condition)';\n            transformerMutationType = TransformerMutationType.UPDATE;\n            break;\n        case 'DELETE':\n            operation = \"delete\" + typeName;\n            documentArgs = \"($input: Delete\" + typeName + \"Input!, $condition: Model\" + typeName + \"ConditionInput)\";\n            operationArgs = '(input: $input, condition: $condition)';\n            transformerMutationType = TransformerMutationType.DELETE;\n            break;\n        case 'GET':\n            operation = \"get\" + typeName;\n            documentArgs = \"($id: ID!)\";\n            operationArgs = '(id: $id)';\n            transformerMutationType = TransformerMutationType.GET;\n            break;\n        default:\n            exhaustiveCheck(graphQLOpType);\n    }\n    return [\n        [\n            transformerMutationType,\n            operation,\n            GraphQLOperationType[graphQLOpType] + \" operation\" + documentArgs + \"{\\n\\t\\t\" + operation + operationArgs + \"{\\n\\t\\t\\t\" + selectionSet + \"\\n\\t\\t}\\n\\t}\",\n        ],\n    ];\n}\nexport function createMutationInstanceFromModelOperation(relationships, modelDefinition, opType, model, element, condition, MutationEventConstructor, modelInstanceCreator, id) {\n    var operation;\n    switch (opType) {\n        case OpType.INSERT:\n            operation = TransformerMutationType.CREATE;\n            break;\n        case OpType.UPDATE:\n            operation = TransformerMutationType.UPDATE;\n            break;\n        case OpType.DELETE:\n            operation = TransformerMutationType.DELETE;\n            break;\n        default:\n            exhaustiveCheck(opType);\n    }\n    var mutationEvent = modelInstanceCreator(MutationEventConstructor, __assign(__assign({}, (id ? { id: id } : {})), { data: JSON.stringify(element), modelId: element.id, model: model.name, operation: operation, condition: JSON.stringify(condition) }));\n    return mutationEvent;\n}\nexport function predicateToGraphQLCondition(predicate) {\n    var result = {};\n    if (!predicate || !Array.isArray(predicate.predicates)) {\n        return result;\n    }\n    predicate.predicates.forEach(function (p) {\n        var _a;\n        if (isPredicateObj(p)) {\n            var field = p.field, operator = p.operator, operand = p.operand;\n            if (field === 'id') {\n                return;\n            }\n            result[field] = (_a = {}, _a[operator] = operand, _a);\n        }\n        else {\n            result[p.type] = predicateToGraphQLCondition(p);\n        }\n    });\n    return result;\n}\n//# sourceMappingURL=utils.js.map","/* eslint guard-for-in:0 */\nvar AWS;\n\n/**\n * A set of utility methods for use with the AWS SDK.\n *\n * @!attribute abort\n *   Return this value from an iterator function {each} or {arrayEach}\n *   to break out of the iteration.\n *   @example Breaking out of an iterator function\n *     AWS.util.each({a: 1, b: 2, c: 3}, function(key, value) {\n *       if (key == 'b') return AWS.util.abort;\n *     });\n *   @see each\n *   @see arrayEach\n * @api private\n */\nvar util = {\n  environment: 'nodejs',\n  engine: function engine() {\n    if (util.isBrowser() && typeof navigator !== 'undefined') {\n      return navigator.userAgent;\n    } else {\n      var engine = process.platform + '/' + process.version;\n      if (process.env.AWS_EXECUTION_ENV) {\n        engine += ' exec-env/' + process.env.AWS_EXECUTION_ENV;\n      }\n      return engine;\n    }\n  },\n\n  userAgent: function userAgent() {\n    var name = util.environment;\n    var agent = 'aws-sdk-' + name + '/' + require('./core').VERSION;\n    if (name === 'nodejs') agent += ' ' + util.engine();\n    return agent;\n  },\n\n  uriEscape: function uriEscape(string) {\n    var output = encodeURIComponent(string);\n    output = output.replace(/[^A-Za-z0-9_.~\\-%]+/g, escape);\n\n    // AWS percent-encodes some extra non-standard characters in a URI\n    output = output.replace(/[*]/g, function(ch) {\n      return '%' + ch.charCodeAt(0).toString(16).toUpperCase();\n    });\n\n    return output;\n  },\n\n  uriEscapePath: function uriEscapePath(string) {\n    var parts = [];\n    util.arrayEach(string.split('/'), function (part) {\n      parts.push(util.uriEscape(part));\n    });\n    return parts.join('/');\n  },\n\n  urlParse: function urlParse(url) {\n    return util.url.parse(url);\n  },\n\n  urlFormat: function urlFormat(url) {\n    return util.url.format(url);\n  },\n\n  queryStringParse: function queryStringParse(qs) {\n    return util.querystring.parse(qs);\n  },\n\n  queryParamsToString: function queryParamsToString(params) {\n    var items = [];\n    var escape = util.uriEscape;\n    var sortedKeys = Object.keys(params).sort();\n\n    util.arrayEach(sortedKeys, function(name) {\n      var value = params[name];\n      var ename = escape(name);\n      var result = ename + '=';\n      if (Array.isArray(value)) {\n        var vals = [];\n        util.arrayEach(value, function(item) { vals.push(escape(item)); });\n        result = ename + '=' + vals.sort().join('&' + ename + '=');\n      } else if (value !== undefined && value !== null) {\n        result = ename + '=' + escape(value);\n      }\n      items.push(result);\n    });\n\n    return items.join('&');\n  },\n\n  readFileSync: function readFileSync(path) {\n    if (util.isBrowser()) return null;\n    return require('fs').readFileSync(path, 'utf-8');\n  },\n\n  base64: {\n    encode: function encode64(string) {\n      if (typeof string === 'number') {\n        throw util.error(new Error('Cannot base64 encode number ' + string));\n      }\n      if (string === null || typeof string === 'undefined') {\n        return string;\n      }\n      var buf = util.buffer.toBuffer(string);\n      return buf.toString('base64');\n    },\n\n    decode: function decode64(string) {\n      if (typeof string === 'number') {\n        throw util.error(new Error('Cannot base64 decode number ' + string));\n      }\n      if (string === null || typeof string === 'undefined') {\n        return string;\n      }\n      return util.buffer.toBuffer(string, 'base64');\n    }\n\n  },\n\n  buffer: {\n    /**\n     * Buffer constructor for Node buffer and buffer pollyfill\n     */\n    toBuffer: function(data, encoding) {\n      return (typeof util.Buffer.from === 'function' && util.Buffer.from !== Uint8Array.from) ?\n        util.Buffer.from(data, encoding) : new util.Buffer(data, encoding);\n    },\n\n    alloc: function(size, fill, encoding) {\n      if (typeof size !== 'number') {\n        throw new Error('size passed to alloc must be a number.');\n      }\n      if (typeof util.Buffer.alloc === 'function') {\n        return util.Buffer.alloc(size, fill, encoding);\n      } else {\n        var buf = new util.Buffer(size);\n        if (fill !== undefined && typeof buf.fill === 'function') {\n          buf.fill(fill, undefined, undefined, encoding);\n        }\n        return buf;\n      }\n    },\n\n    toStream: function toStream(buffer) {\n      if (!util.Buffer.isBuffer(buffer)) buffer =  util.buffer.toBuffer(buffer);\n\n      var readable = new (util.stream.Readable)();\n      var pos = 0;\n      readable._read = function(size) {\n        if (pos >= buffer.length) return readable.push(null);\n\n        var end = pos + size;\n        if (end > buffer.length) end = buffer.length;\n        readable.push(buffer.slice(pos, end));\n        pos = end;\n      };\n\n      return readable;\n    },\n\n    /**\n     * Concatenates a list of Buffer objects.\n     */\n    concat: function(buffers) {\n      var length = 0,\n          offset = 0,\n          buffer = null, i;\n\n      for (i = 0; i < buffers.length; i++) {\n        length += buffers[i].length;\n      }\n\n      buffer = util.buffer.alloc(length);\n\n      for (i = 0; i < buffers.length; i++) {\n        buffers[i].copy(buffer, offset);\n        offset += buffers[i].length;\n      }\n\n      return buffer;\n    }\n  },\n\n  string: {\n    byteLength: function byteLength(string) {\n      if (string === null || string === undefined) return 0;\n      if (typeof string === 'string') string = util.buffer.toBuffer(string);\n\n      if (typeof string.byteLength === 'number') {\n        return string.byteLength;\n      } else if (typeof string.length === 'number') {\n        return string.length;\n      } else if (typeof string.size === 'number') {\n        return string.size;\n      } else if (typeof string.path === 'string') {\n        return require('fs').lstatSync(string.path).size;\n      } else {\n        throw util.error(new Error('Cannot determine length of ' + string),\n          { object: string });\n      }\n    },\n\n    upperFirst: function upperFirst(string) {\n      return string[0].toUpperCase() + string.substr(1);\n    },\n\n    lowerFirst: function lowerFirst(string) {\n      return string[0].toLowerCase() + string.substr(1);\n    }\n  },\n\n  ini: {\n    parse: function string(ini) {\n      var currentSection, map = {};\n      util.arrayEach(ini.split(/\\r?\\n/), function(line) {\n        line = line.split(/(^|\\s)[;#]/)[0]; // remove comments\n        var section = line.match(/^\\s*\\[([^\\[\\]]+)\\]\\s*$/);\n        if (section) {\n          currentSection = section[1];\n        } else if (currentSection) {\n          var item = line.match(/^\\s*(.+?)\\s*=\\s*(.+?)\\s*$/);\n          if (item) {\n            map[currentSection] = map[currentSection] || {};\n            map[currentSection][item[1]] = item[2];\n          }\n        }\n      });\n\n      return map;\n    }\n  },\n\n  fn: {\n    noop: function() {},\n    callback: function (err) { if (err) throw err; },\n\n    /**\n     * Turn a synchronous function into as \"async\" function by making it call\n     * a callback. The underlying function is called with all but the last argument,\n     * which is treated as the callback. The callback is passed passed a first argument\n     * of null on success to mimick standard node callbacks.\n     */\n    makeAsync: function makeAsync(fn, expectedArgs) {\n      if (expectedArgs && expectedArgs <= fn.length) {\n        return fn;\n      }\n\n      return function() {\n        var args = Array.prototype.slice.call(arguments, 0);\n        var callback = args.pop();\n        var result = fn.apply(null, args);\n        callback(result);\n      };\n    }\n  },\n\n  /**\n   * Date and time utility functions.\n   */\n  date: {\n\n    /**\n     * @return [Date] the current JavaScript date object. Since all\n     *   AWS services rely on this date object, you can override\n     *   this function to provide a special time value to AWS service\n     *   requests.\n     */\n    getDate: function getDate() {\n      if (!AWS) AWS = require('./core');\n      if (AWS.config.systemClockOffset) { // use offset when non-zero\n        return new Date(new Date().getTime() + AWS.config.systemClockOffset);\n      } else {\n        return new Date();\n      }\n    },\n\n    /**\n     * @return [String] the date in ISO-8601 format\n     */\n    iso8601: function iso8601(date) {\n      if (date === undefined) { date = util.date.getDate(); }\n      return date.toISOString().replace(/\\.\\d{3}Z$/, 'Z');\n    },\n\n    /**\n     * @return [String] the date in RFC 822 format\n     */\n    rfc822: function rfc822(date) {\n      if (date === undefined) { date = util.date.getDate(); }\n      return date.toUTCString();\n    },\n\n    /**\n     * @return [Integer] the UNIX timestamp value for the current time\n     */\n    unixTimestamp: function unixTimestamp(date) {\n      if (date === undefined) { date = util.date.getDate(); }\n      return date.getTime() / 1000;\n    },\n\n    /**\n     * @param [String,number,Date] date\n     * @return [Date]\n     */\n    from: function format(date) {\n      if (typeof date === 'number') {\n        return new Date(date * 1000); // unix timestamp\n      } else {\n        return new Date(date);\n      }\n    },\n\n    /**\n     * Given a Date or date-like value, this function formats the\n     * date into a string of the requested value.\n     * @param [String,number,Date] date\n     * @param [String] formatter Valid formats are:\n     #   * 'iso8601'\n     #   * 'rfc822'\n     #   * 'unixTimestamp'\n     * @return [String]\n     */\n    format: function format(date, formatter) {\n      if (!formatter) formatter = 'iso8601';\n      return util.date[formatter](util.date.from(date));\n    },\n\n    parseTimestamp: function parseTimestamp(value) {\n      if (typeof value === 'number') { // unix timestamp (number)\n        return new Date(value * 1000);\n      } else if (value.match(/^\\d+$/)) { // unix timestamp\n        return new Date(value * 1000);\n      } else if (value.match(/^\\d{4}/)) { // iso8601\n        return new Date(value);\n      } else if (value.match(/^\\w{3},/)) { // rfc822\n        return new Date(value);\n      } else {\n        throw util.error(\n          new Error('unhandled timestamp format: ' + value),\n          {code: 'TimestampParserError'});\n      }\n    }\n\n  },\n\n  crypto: {\n    crc32Table: [\n     0x00000000, 0x77073096, 0xEE0E612C, 0x990951BA, 0x076DC419,\n     0x706AF48F, 0xE963A535, 0x9E6495A3, 0x0EDB8832, 0x79DCB8A4,\n     0xE0D5E91E, 0x97D2D988, 0x09B64C2B, 0x7EB17CBD, 0xE7B82D07,\n     0x90BF1D91, 0x1DB71064, 0x6AB020F2, 0xF3B97148, 0x84BE41DE,\n     0x1ADAD47D, 0x6DDDE4EB, 0xF4D4B551, 0x83D385C7, 0x136C9856,\n     0x646BA8C0, 0xFD62F97A, 0x8A65C9EC, 0x14015C4F, 0x63066CD9,\n     0xFA0F3D63, 0x8D080DF5, 0x3B6E20C8, 0x4C69105E, 0xD56041E4,\n     0xA2677172, 0x3C03E4D1, 0x4B04D447, 0xD20D85FD, 0xA50AB56B,\n     0x35B5A8FA, 0x42B2986C, 0xDBBBC9D6, 0xACBCF940, 0x32D86CE3,\n     0x45DF5C75, 0xDCD60DCF, 0xABD13D59, 0x26D930AC, 0x51DE003A,\n     0xC8D75180, 0xBFD06116, 0x21B4F4B5, 0x56B3C423, 0xCFBA9599,\n     0xB8BDA50F, 0x2802B89E, 0x5F058808, 0xC60CD9B2, 0xB10BE924,\n     0x2F6F7C87, 0x58684C11, 0xC1611DAB, 0xB6662D3D, 0x76DC4190,\n     0x01DB7106, 0x98D220BC, 0xEFD5102A, 0x71B18589, 0x06B6B51F,\n     0x9FBFE4A5, 0xE8B8D433, 0x7807C9A2, 0x0F00F934, 0x9609A88E,\n     0xE10E9818, 0x7F6A0DBB, 0x086D3D2D, 0x91646C97, 0xE6635C01,\n     0x6B6B51F4, 0x1C6C6162, 0x856530D8, 0xF262004E, 0x6C0695ED,\n     0x1B01A57B, 0x8208F4C1, 0xF50FC457, 0x65B0D9C6, 0x12B7E950,\n     0x8BBEB8EA, 0xFCB9887C, 0x62DD1DDF, 0x15DA2D49, 0x8CD37CF3,\n     0xFBD44C65, 0x4DB26158, 0x3AB551CE, 0xA3BC0074, 0xD4BB30E2,\n     0x4ADFA541, 0x3DD895D7, 0xA4D1C46D, 0xD3D6F4FB, 0x4369E96A,\n     0x346ED9FC, 0xAD678846, 0xDA60B8D0, 0x44042D73, 0x33031DE5,\n     0xAA0A4C5F, 0xDD0D7CC9, 0x5005713C, 0x270241AA, 0xBE0B1010,\n     0xC90C2086, 0x5768B525, 0x206F85B3, 0xB966D409, 0xCE61E49F,\n     0x5EDEF90E, 0x29D9C998, 0xB0D09822, 0xC7D7A8B4, 0x59B33D17,\n     0x2EB40D81, 0xB7BD5C3B, 0xC0BA6CAD, 0xEDB88320, 0x9ABFB3B6,\n     0x03B6E20C, 0x74B1D29A, 0xEAD54739, 0x9DD277AF, 0x04DB2615,\n     0x73DC1683, 0xE3630B12, 0x94643B84, 0x0D6D6A3E, 0x7A6A5AA8,\n     0xE40ECF0B, 0x9309FF9D, 0x0A00AE27, 0x7D079EB1, 0xF00F9344,\n     0x8708A3D2, 0x1E01F268, 0x6906C2FE, 0xF762575D, 0x806567CB,\n     0x196C3671, 0x6E6B06E7, 0xFED41B76, 0x89D32BE0, 0x10DA7A5A,\n     0x67DD4ACC, 0xF9B9DF6F, 0x8EBEEFF9, 0x17B7BE43, 0x60B08ED5,\n     0xD6D6A3E8, 0xA1D1937E, 0x38D8C2C4, 0x4FDFF252, 0xD1BB67F1,\n     0xA6BC5767, 0x3FB506DD, 0x48B2364B, 0xD80D2BDA, 0xAF0A1B4C,\n     0x36034AF6, 0x41047A60, 0xDF60EFC3, 0xA867DF55, 0x316E8EEF,\n     0x4669BE79, 0xCB61B38C, 0xBC66831A, 0x256FD2A0, 0x5268E236,\n     0xCC0C7795, 0xBB0B4703, 0x220216B9, 0x5505262F, 0xC5BA3BBE,\n     0xB2BD0B28, 0x2BB45A92, 0x5CB36A04, 0xC2D7FFA7, 0xB5D0CF31,\n     0x2CD99E8B, 0x5BDEAE1D, 0x9B64C2B0, 0xEC63F226, 0x756AA39C,\n     0x026D930A, 0x9C0906A9, 0xEB0E363F, 0x72076785, 0x05005713,\n     0x95BF4A82, 0xE2B87A14, 0x7BB12BAE, 0x0CB61B38, 0x92D28E9B,\n     0xE5D5BE0D, 0x7CDCEFB7, 0x0BDBDF21, 0x86D3D2D4, 0xF1D4E242,\n     0x68DDB3F8, 0x1FDA836E, 0x81BE16CD, 0xF6B9265B, 0x6FB077E1,\n     0x18B74777, 0x88085AE6, 0xFF0F6A70, 0x66063BCA, 0x11010B5C,\n     0x8F659EFF, 0xF862AE69, 0x616BFFD3, 0x166CCF45, 0xA00AE278,\n     0xD70DD2EE, 0x4E048354, 0x3903B3C2, 0xA7672661, 0xD06016F7,\n     0x4969474D, 0x3E6E77DB, 0xAED16A4A, 0xD9D65ADC, 0x40DF0B66,\n     0x37D83BF0, 0xA9BCAE53, 0xDEBB9EC5, 0x47B2CF7F, 0x30B5FFE9,\n     0xBDBDF21C, 0xCABAC28A, 0x53B39330, 0x24B4A3A6, 0xBAD03605,\n     0xCDD70693, 0x54DE5729, 0x23D967BF, 0xB3667A2E, 0xC4614AB8,\n     0x5D681B02, 0x2A6F2B94, 0xB40BBE37, 0xC30C8EA1, 0x5A05DF1B,\n     0x2D02EF8D],\n\n    crc32: function crc32(data) {\n      var tbl = util.crypto.crc32Table;\n      var crc = 0 ^ -1;\n\n      if (typeof data === 'string') {\n        data = util.buffer.toBuffer(data);\n      }\n\n      for (var i = 0; i < data.length; i++) {\n        var code = data.readUInt8(i);\n        crc = (crc >>> 8) ^ tbl[(crc ^ code) & 0xFF];\n      }\n      return (crc ^ -1) >>> 0;\n    },\n\n    hmac: function hmac(key, string, digest, fn) {\n      if (!digest) digest = 'binary';\n      if (digest === 'buffer') { digest = undefined; }\n      if (!fn) fn = 'sha256';\n      if (typeof string === 'string') string = util.buffer.toBuffer(string);\n      return util.crypto.lib.createHmac(fn, key).update(string).digest(digest);\n    },\n\n    md5: function md5(data, digest, callback) {\n      return util.crypto.hash('md5', data, digest, callback);\n    },\n\n    sha256: function sha256(data, digest, callback) {\n      return util.crypto.hash('sha256', data, digest, callback);\n    },\n\n    hash: function(algorithm, data, digest, callback) {\n      var hash = util.crypto.createHash(algorithm);\n      if (!digest) { digest = 'binary'; }\n      if (digest === 'buffer') { digest = undefined; }\n      if (typeof data === 'string') data = util.buffer.toBuffer(data);\n      var sliceFn = util.arraySliceFn(data);\n      var isBuffer = util.Buffer.isBuffer(data);\n      //Identifying objects with an ArrayBuffer as buffers\n      if (util.isBrowser() && typeof ArrayBuffer !== 'undefined' && data && data.buffer instanceof ArrayBuffer) isBuffer = true;\n\n      if (callback && typeof data === 'object' &&\n          typeof data.on === 'function' && !isBuffer) {\n        data.on('data', function(chunk) { hash.update(chunk); });\n        data.on('error', function(err) { callback(err); });\n        data.on('end', function() { callback(null, hash.digest(digest)); });\n      } else if (callback && sliceFn && !isBuffer &&\n                 typeof FileReader !== 'undefined') {\n        // this might be a File/Blob\n        var index = 0, size = 1024 * 512;\n        var reader = new FileReader();\n        reader.onerror = function() {\n          callback(new Error('Failed to read data.'));\n        };\n        reader.onload = function() {\n          var buf = new util.Buffer(new Uint8Array(reader.result));\n          hash.update(buf);\n          index += buf.length;\n          reader._continueReading();\n        };\n        reader._continueReading = function() {\n          if (index >= data.size) {\n            callback(null, hash.digest(digest));\n            return;\n          }\n\n          var back = index + size;\n          if (back > data.size) back = data.size;\n          reader.readAsArrayBuffer(sliceFn.call(data, index, back));\n        };\n\n        reader._continueReading();\n      } else {\n        if (util.isBrowser() && typeof data === 'object' && !isBuffer) {\n          data = new util.Buffer(new Uint8Array(data));\n        }\n        var out = hash.update(data).digest(digest);\n        if (callback) callback(null, out);\n        return out;\n      }\n    },\n\n    toHex: function toHex(data) {\n      var out = [];\n      for (var i = 0; i < data.length; i++) {\n        out.push(('0' + data.charCodeAt(i).toString(16)).substr(-2, 2));\n      }\n      return out.join('');\n    },\n\n    createHash: function createHash(algorithm) {\n      return util.crypto.lib.createHash(algorithm);\n    }\n\n  },\n\n  /** @!ignore */\n\n  /* Abort constant */\n  abort: {},\n\n  each: function each(object, iterFunction) {\n    for (var key in object) {\n      if (Object.prototype.hasOwnProperty.call(object, key)) {\n        var ret = iterFunction.call(this, key, object[key]);\n        if (ret === util.abort) break;\n      }\n    }\n  },\n\n  arrayEach: function arrayEach(array, iterFunction) {\n    for (var idx in array) {\n      if (Object.prototype.hasOwnProperty.call(array, idx)) {\n        var ret = iterFunction.call(this, array[idx], parseInt(idx, 10));\n        if (ret === util.abort) break;\n      }\n    }\n  },\n\n  update: function update(obj1, obj2) {\n    util.each(obj2, function iterator(key, item) {\n      obj1[key] = item;\n    });\n    return obj1;\n  },\n\n  merge: function merge(obj1, obj2) {\n    return util.update(util.copy(obj1), obj2);\n  },\n\n  copy: function copy(object) {\n    if (object === null || object === undefined) return object;\n    var dupe = {};\n    // jshint forin:false\n    for (var key in object) {\n      dupe[key] = object[key];\n    }\n    return dupe;\n  },\n\n  isEmpty: function isEmpty(obj) {\n    for (var prop in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n        return false;\n      }\n    }\n    return true;\n  },\n\n  arraySliceFn: function arraySliceFn(obj) {\n    var fn = obj.slice || obj.webkitSlice || obj.mozSlice;\n    return typeof fn === 'function' ? fn : null;\n  },\n\n  isType: function isType(obj, type) {\n    // handle cross-\"frame\" objects\n    if (typeof type === 'function') type = util.typeName(type);\n    return Object.prototype.toString.call(obj) === '[object ' + type + ']';\n  },\n\n  typeName: function typeName(type) {\n    if (Object.prototype.hasOwnProperty.call(type, 'name')) return type.name;\n    var str = type.toString();\n    var match = str.match(/^\\s*function (.+)\\(/);\n    return match ? match[1] : str;\n  },\n\n  error: function error(err, options) {\n    var originalError = null;\n    if (typeof err.message === 'string' && err.message !== '') {\n      if (typeof options === 'string' || (options && options.message)) {\n        originalError = util.copy(err);\n        originalError.message = err.message;\n      }\n    }\n    err.message = err.message || null;\n\n    if (typeof options === 'string') {\n      err.message = options;\n    } else if (typeof options === 'object' && options !== null) {\n      util.update(err, options);\n      if (options.message)\n        err.message = options.message;\n      if (options.code || options.name)\n        err.code = options.code || options.name;\n      if (options.stack)\n        err.stack = options.stack;\n    }\n\n    if (typeof Object.defineProperty === 'function') {\n      Object.defineProperty(err, 'name', {writable: true, enumerable: false});\n      Object.defineProperty(err, 'message', {enumerable: true});\n    }\n\n    err.name = options && options.name || err.name || err.code || 'Error';\n    err.time = new Date();\n\n    if (originalError) err.originalError = originalError;\n\n    return err;\n  },\n\n  /**\n   * @api private\n   */\n  inherit: function inherit(klass, features) {\n    var newObject = null;\n    if (features === undefined) {\n      features = klass;\n      klass = Object;\n      newObject = {};\n    } else {\n      var ctor = function ConstructorWrapper() {};\n      ctor.prototype = klass.prototype;\n      newObject = new ctor();\n    }\n\n    // constructor not supplied, create pass-through ctor\n    if (features.constructor === Object) {\n      features.constructor = function() {\n        if (klass !== Object) {\n          return klass.apply(this, arguments);\n        }\n      };\n    }\n\n    features.constructor.prototype = newObject;\n    util.update(features.constructor.prototype, features);\n    features.constructor.__super__ = klass;\n    return features.constructor;\n  },\n\n  /**\n   * @api private\n   */\n  mixin: function mixin() {\n    var klass = arguments[0];\n    for (var i = 1; i < arguments.length; i++) {\n      // jshint forin:false\n      for (var prop in arguments[i].prototype) {\n        var fn = arguments[i].prototype[prop];\n        if (prop !== 'constructor') {\n          klass.prototype[prop] = fn;\n        }\n      }\n    }\n    return klass;\n  },\n\n  /**\n   * @api private\n   */\n  hideProperties: function hideProperties(obj, props) {\n    if (typeof Object.defineProperty !== 'function') return;\n\n    util.arrayEach(props, function (key) {\n      Object.defineProperty(obj, key, {\n        enumerable: false, writable: true, configurable: true });\n    });\n  },\n\n  /**\n   * @api private\n   */\n  property: function property(obj, name, value, enumerable, isValue) {\n    var opts = {\n      configurable: true,\n      enumerable: enumerable !== undefined ? enumerable : true\n    };\n    if (typeof value === 'function' && !isValue) {\n      opts.get = value;\n    }\n    else {\n      opts.value = value; opts.writable = true;\n    }\n\n    Object.defineProperty(obj, name, opts);\n  },\n\n  /**\n   * @api private\n   */\n  memoizedProperty: function memoizedProperty(obj, name, get, enumerable) {\n    var cachedValue = null;\n\n    // build enumerable attribute for each value with lazy accessor.\n    util.property(obj, name, function() {\n      if (cachedValue === null) {\n        cachedValue = get();\n      }\n      return cachedValue;\n    }, enumerable);\n  },\n\n  /**\n   * TODO Remove in major version revision\n   * This backfill populates response data without the\n   * top-level payload name.\n   *\n   * @api private\n   */\n  hoistPayloadMember: function hoistPayloadMember(resp) {\n    var req = resp.request;\n    var operationName = req.operation;\n    var operation = req.service.api.operations[operationName];\n    var output = operation.output;\n    if (output.payload && !operation.hasEventOutput) {\n      var payloadMember = output.members[output.payload];\n      var responsePayload = resp.data[output.payload];\n      if (payloadMember.type === 'structure') {\n        util.each(responsePayload, function(key, value) {\n          util.property(resp.data, key, value, false);\n        });\n      }\n    }\n  },\n\n  /**\n   * Compute SHA-256 checksums of streams\n   *\n   * @api private\n   */\n  computeSha256: function computeSha256(body, done) {\n    if (util.isNode()) {\n      var Stream = util.stream.Stream;\n      var fs = require('fs');\n      if (typeof Stream === 'function' && body instanceof Stream) {\n        if (typeof body.path === 'string') { // assume file object\n          var settings = {};\n          if (typeof body.start === 'number') {\n            settings.start = body.start;\n          }\n          if (typeof body.end === 'number') {\n            settings.end = body.end;\n          }\n          body = fs.createReadStream(body.path, settings);\n        } else { // TODO support other stream types\n          return done(new Error('Non-file stream objects are ' +\n                                'not supported with SigV4'));\n        }\n      }\n    }\n\n    util.crypto.sha256(body, 'hex', function(err, sha) {\n      if (err) done(err);\n      else done(null, sha);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  isClockSkewed: function isClockSkewed(serverTime) {\n    if (serverTime) {\n      util.property(AWS.config, 'isClockSkewed',\n        Math.abs(new Date().getTime() - serverTime) >= 300000, false);\n      return AWS.config.isClockSkewed;\n    }\n  },\n\n  applyClockOffset: function applyClockOffset(serverTime) {\n    if (serverTime)\n      AWS.config.systemClockOffset = serverTime - new Date().getTime();\n  },\n\n  /**\n   * @api private\n   */\n  extractRequestId: function extractRequestId(resp) {\n    var requestId = resp.httpResponse.headers['x-amz-request-id'] ||\n                     resp.httpResponse.headers['x-amzn-requestid'];\n\n    if (!requestId && resp.data && resp.data.ResponseMetadata) {\n      requestId = resp.data.ResponseMetadata.RequestId;\n    }\n\n    if (requestId) {\n      resp.requestId = requestId;\n    }\n\n    if (resp.error) {\n      resp.error.requestId = requestId;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  addPromises: function addPromises(constructors, PromiseDependency) {\n    var deletePromises = false;\n    if (PromiseDependency === undefined && AWS && AWS.config) {\n      PromiseDependency = AWS.config.getPromisesDependency();\n    }\n    if (PromiseDependency === undefined && typeof Promise !== 'undefined') {\n      PromiseDependency = Promise;\n    }\n    if (typeof PromiseDependency !== 'function') deletePromises = true;\n    if (!Array.isArray(constructors)) constructors = [constructors];\n\n    for (var ind = 0; ind < constructors.length; ind++) {\n      var constructor = constructors[ind];\n      if (deletePromises) {\n        if (constructor.deletePromisesFromClass) {\n          constructor.deletePromisesFromClass();\n        }\n      } else if (constructor.addPromisesToClass) {\n        constructor.addPromisesToClass(PromiseDependency);\n      }\n    }\n  },\n\n  /**\n   * @api private\n   */\n  promisifyMethod: function promisifyMethod(methodName, PromiseDependency) {\n    return function promise() {\n      var self = this;\n      return new PromiseDependency(function(resolve, reject) {\n        self[methodName](function(err, data) {\n          if (err) {\n            reject(err);\n          } else {\n            resolve(data);\n          }\n        });\n      });\n    };\n  },\n\n  /**\n   * @api private\n   */\n  isDualstackAvailable: function isDualstackAvailable(service) {\n    if (!service) return false;\n    var metadata = require('../apis/metadata.json');\n    if (typeof service !== 'string') service = service.serviceIdentifier;\n    if (typeof service !== 'string' || !metadata.hasOwnProperty(service)) return false;\n    return !!metadata[service].dualstackAvailable;\n  },\n\n  /**\n   * @api private\n   */\n  calculateRetryDelay: function calculateRetryDelay(retryCount, retryDelayOptions) {\n    if (!retryDelayOptions) retryDelayOptions = {};\n    var customBackoff = retryDelayOptions.customBackoff || null;\n    if (typeof customBackoff === 'function') {\n      return customBackoff(retryCount);\n    }\n    var base = typeof retryDelayOptions.base === 'number' ? retryDelayOptions.base : 100;\n    var delay = Math.random() * (Math.pow(2, retryCount) * base);\n    return delay;\n  },\n\n  /**\n   * @api private\n   */\n  handleRequestWithRetries: function handleRequestWithRetries(httpRequest, options, cb) {\n    if (!options) options = {};\n    var http = AWS.HttpClient.getInstance();\n    var httpOptions = options.httpOptions || {};\n    var retryCount = 0;\n\n    var errCallback = function(err) {\n      var maxRetries = options.maxRetries || 0;\n      if (err && err.code === 'TimeoutError') err.retryable = true;\n      if (err && err.retryable && retryCount < maxRetries) {\n        retryCount++;\n        var delay = util.calculateRetryDelay(retryCount, options.retryDelayOptions);\n        setTimeout(sendRequest, delay + (err.retryAfter || 0));\n      } else {\n        cb(err);\n      }\n    };\n\n    var sendRequest = function() {\n      var data = '';\n      http.handleRequest(httpRequest, httpOptions, function(httpResponse) {\n        httpResponse.on('data', function(chunk) { data += chunk.toString(); });\n        httpResponse.on('end', function() {\n          var statusCode = httpResponse.statusCode;\n          if (statusCode < 300) {\n            cb(null, data);\n          } else {\n            var retryAfter = parseInt(httpResponse.headers['retry-after'], 10) * 1000 || 0;\n            var err = util.error(new Error(),\n              { retryable: statusCode >= 500 || statusCode === 429 }\n            );\n            if (retryAfter && err.retryable) err.retryAfter = retryAfter;\n            errCallback(err);\n          }\n        });\n      }, errCallback);\n    };\n\n    AWS.util.defer(sendRequest);\n  },\n\n  /**\n   * @api private\n   */\n  uuid: {\n    v4: function uuidV4() {\n      return require('uuid').v4();\n    }\n  },\n\n  /**\n   * @api private\n   */\n  convertPayloadToString: function convertPayloadToString(resp) {\n    var req = resp.request;\n    var operation = req.operation;\n    var rules = req.service.api.operations[operation].output || {};\n    if (rules.payload && resp.data[rules.payload]) {\n      resp.data[rules.payload] = resp.data[rules.payload].toString();\n    }\n  },\n\n  /**\n   * @api private\n   */\n  defer: function defer(callback) {\n    if (typeof process === 'object' && typeof process.nextTick === 'function') {\n      process.nextTick(callback);\n    } else if (typeof setImmediate === 'function') {\n      setImmediate(callback);\n    } else {\n      setTimeout(callback, 0);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  getRequestPayloadShape: function getRequestPayloadShape(req) {\n    var operations = req.service.api.operations;\n    if (!operations) return undefined;\n    var operation = (operations || {})[req.operation];\n    if (!operation || !operation.input || !operation.input.payload) return undefined;\n    return operation.input.members[operation.input.payload];\n  },\n\n  getProfilesFromSharedConfig: function getProfilesFromSharedConfig(iniLoader, filename) {\n    var profiles = {};\n    var profilesFromConfig = {};\n    if (process.env[util.configOptInEnv]) {\n      var profilesFromConfig = iniLoader.loadFrom({\n        isConfig: true,\n        filename: process.env[util.sharedConfigFileEnv]\n      });\n    }\n    var profilesFromCreds = iniLoader.loadFrom({\n      filename: filename ||\n        (process.env[util.configOptInEnv] && process.env[util.sharedCredentialsFileEnv])\n    });\n    for (var i = 0, profileNames = Object.keys(profilesFromConfig); i < profileNames.length; i++) {\n      profiles[profileNames[i]] = profilesFromConfig[profileNames[i]];\n    }\n    for (var i = 0, profileNames = Object.keys(profilesFromCreds); i < profileNames.length; i++) {\n      profiles[profileNames[i]] = profilesFromCreds[profileNames[i]];\n    }\n    return profiles;\n  },\n\n  /**\n   * @api private\n   */\n  defaultProfile: 'default',\n\n  /**\n   * @api private\n   */\n  configOptInEnv: 'AWS_SDK_LOAD_CONFIG',\n\n  /**\n   * @api private\n   */\n  sharedCredentialsFileEnv: 'AWS_SHARED_CREDENTIALS_FILE',\n\n  /**\n   * @api private\n   */\n  sharedConfigFileEnv: 'AWS_CONFIG_FILE',\n\n  /**\n   * @api private\n   */\n  imdsDisabledEnv: 'AWS_EC2_METADATA_DISABLED'\n};\n\n/**\n * @api private\n */\nmodule.exports = util;\n","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\n\n/**\n * A visitor is provided to visit, it contains the collection of\n * relevant functions to be called during the visitor's traversal.\n */\n\n/**\n * A visitor is comprised of visit functions, which are called on each node\n * during the visitor's traversal.\n */\n\n/**\n * A KeyMap describes each the traversable properties of each kind of node.\n */\nexport var QueryDocumentKeys = {\n  Name: [],\n  Document: ['definitions'],\n  OperationDefinition: ['name', 'variableDefinitions', 'directives', 'selectionSet'],\n  VariableDefinition: ['variable', 'type', 'defaultValue', 'directives'],\n  Variable: ['name'],\n  SelectionSet: ['selections'],\n  Field: ['alias', 'name', 'arguments', 'directives', 'selectionSet'],\n  Argument: ['name', 'value'],\n  FragmentSpread: ['name', 'directives'],\n  InlineFragment: ['typeCondition', 'directives', 'selectionSet'],\n  FragmentDefinition: ['name', // Note: fragment variable definitions are experimental and may be changed\n  // or removed in the future.\n  'variableDefinitions', 'typeCondition', 'directives', 'selectionSet'],\n  IntValue: [],\n  FloatValue: [],\n  StringValue: [],\n  BooleanValue: [],\n  NullValue: [],\n  EnumValue: [],\n  ListValue: ['values'],\n  ObjectValue: ['fields'],\n  ObjectField: ['name', 'value'],\n  Directive: ['name', 'arguments'],\n  NamedType: ['name'],\n  ListType: ['type'],\n  NonNullType: ['type'],\n  SchemaDefinition: ['directives', 'operationTypes'],\n  OperationTypeDefinition: ['type'],\n  ScalarTypeDefinition: ['description', 'name', 'directives'],\n  ObjectTypeDefinition: ['description', 'name', 'interfaces', 'directives', 'fields'],\n  FieldDefinition: ['description', 'name', 'arguments', 'type', 'directives'],\n  InputValueDefinition: ['description', 'name', 'type', 'defaultValue', 'directives'],\n  InterfaceTypeDefinition: ['description', 'name', 'directives', 'fields'],\n  UnionTypeDefinition: ['description', 'name', 'directives', 'types'],\n  EnumTypeDefinition: ['description', 'name', 'directives', 'values'],\n  EnumValueDefinition: ['description', 'name', 'directives'],\n  InputObjectTypeDefinition: ['description', 'name', 'directives', 'fields'],\n  DirectiveDefinition: ['description', 'name', 'arguments', 'locations'],\n  SchemaExtension: ['directives', 'operationTypes'],\n  ScalarTypeExtension: ['name', 'directives'],\n  ObjectTypeExtension: ['name', 'interfaces', 'directives', 'fields'],\n  InterfaceTypeExtension: ['name', 'directives', 'fields'],\n  UnionTypeExtension: ['name', 'directives', 'types'],\n  EnumTypeExtension: ['name', 'directives', 'values'],\n  InputObjectTypeExtension: ['name', 'directives', 'fields']\n};\nexport var BREAK = {};\n/**\n * visit() will walk through an AST using a depth first traversal, calling\n * the visitor's enter function at each node in the traversal, and calling the\n * leave function after visiting that node and all of its child nodes.\n *\n * By returning different values from the enter and leave functions, the\n * behavior of the visitor can be altered, including skipping over a sub-tree of\n * the AST (by returning false), editing the AST by returning a value or null\n * to remove the value, or to stop the whole traversal by returning BREAK.\n *\n * When using visit() to edit an AST, the original AST will not be modified, and\n * a new version of the AST with the changes applied will be returned from the\n * visit function.\n *\n *     const editedAST = visit(ast, {\n *       enter(node, key, parent, path, ancestors) {\n *         // @return\n *         //   undefined: no action\n *         //   false: skip visiting this node\n *         //   visitor.BREAK: stop visiting altogether\n *         //   null: delete this node\n *         //   any value: replace this node with the returned value\n *       },\n *       leave(node, key, parent, path, ancestors) {\n *         // @return\n *         //   undefined: no action\n *         //   false: no action\n *         //   visitor.BREAK: stop visiting altogether\n *         //   null: delete this node\n *         //   any value: replace this node with the returned value\n *       }\n *     });\n *\n * Alternatively to providing enter() and leave() functions, a visitor can\n * instead provide functions named the same as the kinds of AST nodes, or\n * enter/leave visitors at a named key, leading to four permutations of\n * visitor API:\n *\n * 1) Named visitors triggered when entering a node a specific kind.\n *\n *     visit(ast, {\n *       Kind(node) {\n *         // enter the \"Kind\" node\n *       }\n *     })\n *\n * 2) Named visitors that trigger upon entering and leaving a node of\n *    a specific kind.\n *\n *     visit(ast, {\n *       Kind: {\n *         enter(node) {\n *           // enter the \"Kind\" node\n *         }\n *         leave(node) {\n *           // leave the \"Kind\" node\n *         }\n *       }\n *     })\n *\n * 3) Generic visitors that trigger upon entering and leaving any node.\n *\n *     visit(ast, {\n *       enter(node) {\n *         // enter any node\n *       },\n *       leave(node) {\n *         // leave any node\n *       }\n *     })\n *\n * 4) Parallel visitors for entering and leaving nodes of a specific kind.\n *\n *     visit(ast, {\n *       enter: {\n *         Kind(node) {\n *           // enter the \"Kind\" node\n *         }\n *       },\n *       leave: {\n *         Kind(node) {\n *           // leave the \"Kind\" node\n *         }\n *       }\n *     })\n */\n\nexport function visit(root, visitor) {\n  var visitorKeys = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : QueryDocumentKeys;\n\n  /* eslint-disable no-undef-init */\n  var stack = undefined;\n  var inArray = Array.isArray(root);\n  var keys = [root];\n  var index = -1;\n  var edits = [];\n  var node = undefined;\n  var key = undefined;\n  var parent = undefined;\n  var path = [];\n  var ancestors = [];\n  var newRoot = root;\n  /* eslint-enable no-undef-init */\n\n  do {\n    index++;\n    var isLeaving = index === keys.length;\n    var isEdited = isLeaving && edits.length !== 0;\n\n    if (isLeaving) {\n      key = ancestors.length === 0 ? undefined : path[path.length - 1];\n      node = parent;\n      parent = ancestors.pop();\n\n      if (isEdited) {\n        if (inArray) {\n          node = node.slice();\n        } else {\n          var clone = {};\n\n          for (var k in node) {\n            if (node.hasOwnProperty(k)) {\n              clone[k] = node[k];\n            }\n          }\n\n          node = clone;\n        }\n\n        var editOffset = 0;\n\n        for (var ii = 0; ii < edits.length; ii++) {\n          var editKey = edits[ii][0];\n          var editValue = edits[ii][1];\n\n          if (inArray) {\n            editKey -= editOffset;\n          }\n\n          if (inArray && editValue === null) {\n            node.splice(editKey, 1);\n            editOffset++;\n          } else {\n            node[editKey] = editValue;\n          }\n        }\n      }\n\n      index = stack.index;\n      keys = stack.keys;\n      edits = stack.edits;\n      inArray = stack.inArray;\n      stack = stack.prev;\n    } else {\n      key = parent ? inArray ? index : keys[index] : undefined;\n      node = parent ? parent[key] : newRoot;\n\n      if (node === null || node === undefined) {\n        continue;\n      }\n\n      if (parent) {\n        path.push(key);\n      }\n    }\n\n    var result = void 0;\n\n    if (!Array.isArray(node)) {\n      if (!isNode(node)) {\n        throw new Error('Invalid AST Node: ' + JSON.stringify(node));\n      }\n\n      var visitFn = getVisitFn(visitor, node.kind, isLeaving);\n\n      if (visitFn) {\n        result = visitFn.call(visitor, node, key, parent, path, ancestors);\n\n        if (result === BREAK) {\n          break;\n        }\n\n        if (result === false) {\n          if (!isLeaving) {\n            path.pop();\n            continue;\n          }\n        } else if (result !== undefined) {\n          edits.push([key, result]);\n\n          if (!isLeaving) {\n            if (isNode(result)) {\n              node = result;\n            } else {\n              path.pop();\n              continue;\n            }\n          }\n        }\n      }\n    }\n\n    if (result === undefined && isEdited) {\n      edits.push([key, node]);\n    }\n\n    if (isLeaving) {\n      path.pop();\n    } else {\n      stack = {\n        inArray: inArray,\n        index: index,\n        keys: keys,\n        edits: edits,\n        prev: stack\n      };\n      inArray = Array.isArray(node);\n      keys = inArray ? node : visitorKeys[node.kind] || [];\n      index = -1;\n      edits = [];\n\n      if (parent) {\n        ancestors.push(parent);\n      }\n\n      parent = node;\n    }\n  } while (stack !== undefined);\n\n  if (edits.length !== 0) {\n    newRoot = edits[edits.length - 1][1];\n  }\n\n  return newRoot;\n}\n\nfunction isNode(maybeNode) {\n  return Boolean(maybeNode && typeof maybeNode.kind === 'string');\n}\n/**\n * Creates a new visitor instance which delegates to many visitors to run in\n * parallel. Each visitor will be visited for each node before moving on.\n *\n * If a prior visitor edits a node, no following visitors will see that node.\n */\n\n\nexport function visitInParallel(visitors) {\n  var skipping = new Array(visitors.length);\n  return {\n    enter: function enter(node) {\n      for (var i = 0; i < visitors.length; i++) {\n        if (!skipping[i]) {\n          var fn = getVisitFn(visitors[i], node.kind,\n          /* isLeaving */\n          false);\n\n          if (fn) {\n            var result = fn.apply(visitors[i], arguments);\n\n            if (result === false) {\n              skipping[i] = node;\n            } else if (result === BREAK) {\n              skipping[i] = BREAK;\n            } else if (result !== undefined) {\n              return result;\n            }\n          }\n        }\n      }\n    },\n    leave: function leave(node) {\n      for (var i = 0; i < visitors.length; i++) {\n        if (!skipping[i]) {\n          var fn = getVisitFn(visitors[i], node.kind,\n          /* isLeaving */\n          true);\n\n          if (fn) {\n            var result = fn.apply(visitors[i], arguments);\n\n            if (result === BREAK) {\n              skipping[i] = BREAK;\n            } else if (result !== undefined && result !== false) {\n              return result;\n            }\n          }\n        } else if (skipping[i] === node) {\n          skipping[i] = null;\n        }\n      }\n    }\n  };\n}\n/**\n * Creates a new visitor instance which maintains a provided TypeInfo instance\n * along with visiting visitor.\n */\n\nexport function visitWithTypeInfo(typeInfo, visitor) {\n  return {\n    enter: function enter(node) {\n      typeInfo.enter(node);\n      var fn = getVisitFn(visitor, node.kind,\n      /* isLeaving */\n      false);\n\n      if (fn) {\n        var result = fn.apply(visitor, arguments);\n\n        if (result !== undefined) {\n          typeInfo.leave(node);\n\n          if (isNode(result)) {\n            typeInfo.enter(result);\n          }\n        }\n\n        return result;\n      }\n    },\n    leave: function leave(node) {\n      var fn = getVisitFn(visitor, node.kind,\n      /* isLeaving */\n      true);\n      var result;\n\n      if (fn) {\n        result = fn.apply(visitor, arguments);\n      }\n\n      typeInfo.leave(node);\n      return result;\n    }\n  };\n}\n/**\n * Given a visitor instance, if it is leaving or not, and a node kind, return\n * the function the visitor runtime should call.\n */\n\nexport function getVisitFn(visitor, kind, isLeaving) {\n  var kindVisitor = visitor[kind];\n\n  if (kindVisitor) {\n    if (!isLeaving && typeof kindVisitor === 'function') {\n      // { Kind() {} }\n      return kindVisitor;\n    }\n\n    var kindSpecificVisitor = isLeaving ? kindVisitor.leave : kindVisitor.enter;\n\n    if (typeof kindSpecificVisitor === 'function') {\n      // { Kind: { enter() {}, leave() {} } }\n      return kindSpecificVisitor;\n    }\n  } else {\n    var specificVisitor = isLeaving ? visitor.leave : visitor.enter;\n\n    if (specificVisitor) {\n      if (typeof specificVisitor === 'function') {\n        // { enter() {}, leave() {} }\n        return specificVisitor;\n      }\n\n      var specificKindVisitor = specificVisitor[kind];\n\n      if (typeof specificKindVisitor === 'function') {\n        // { enter: { Kind() {} }, leave: { Kind() {} } }\n        return specificKindVisitor;\n      }\n    }\n  }\n}","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { visit } from './visitor';\n/**\n * Converts an AST into a string, using one set of reasonable\n * formatting rules.\n */\n\nexport function print(ast) {\n  return visit(ast, {\n    leave: printDocASTReducer\n  });\n}\nvar printDocASTReducer = {\n  Name: function Name(node) {\n    return node.value;\n  },\n  Variable: function Variable(node) {\n    return '$' + node.name;\n  },\n  // Document\n  Document: function Document(node) {\n    return join(node.definitions, '\\n\\n') + '\\n';\n  },\n  OperationDefinition: function OperationDefinition(node) {\n    var op = node.operation;\n    var name = node.name;\n    var varDefs = wrap('(', join(node.variableDefinitions, ', '), ')');\n    var directives = join(node.directives, ' ');\n    var selectionSet = node.selectionSet; // Anonymous queries with no directives or variable definitions can use\n    // the query short form.\n\n    return !name && !directives && !varDefs && op === 'query' ? selectionSet : join([op, join([name, varDefs]), directives, selectionSet], ' ');\n  },\n  VariableDefinition: function VariableDefinition(_ref) {\n    var variable = _ref.variable,\n        type = _ref.type,\n        defaultValue = _ref.defaultValue,\n        directives = _ref.directives;\n    return variable + ': ' + type + wrap(' = ', defaultValue) + wrap(' ', join(directives, ' '));\n  },\n  SelectionSet: function SelectionSet(_ref2) {\n    var selections = _ref2.selections;\n    return block(selections);\n  },\n  Field: function Field(_ref3) {\n    var alias = _ref3.alias,\n        name = _ref3.name,\n        args = _ref3.arguments,\n        directives = _ref3.directives,\n        selectionSet = _ref3.selectionSet;\n    return join([wrap('', alias, ': ') + name + wrap('(', join(args, ', '), ')'), join(directives, ' '), selectionSet], ' ');\n  },\n  Argument: function Argument(_ref4) {\n    var name = _ref4.name,\n        value = _ref4.value;\n    return name + ': ' + value;\n  },\n  // Fragments\n  FragmentSpread: function FragmentSpread(_ref5) {\n    var name = _ref5.name,\n        directives = _ref5.directives;\n    return '...' + name + wrap(' ', join(directives, ' '));\n  },\n  InlineFragment: function InlineFragment(_ref6) {\n    var typeCondition = _ref6.typeCondition,\n        directives = _ref6.directives,\n        selectionSet = _ref6.selectionSet;\n    return join(['...', wrap('on ', typeCondition), join(directives, ' '), selectionSet], ' ');\n  },\n  FragmentDefinition: function FragmentDefinition(_ref7) {\n    var name = _ref7.name,\n        typeCondition = _ref7.typeCondition,\n        variableDefinitions = _ref7.variableDefinitions,\n        directives = _ref7.directives,\n        selectionSet = _ref7.selectionSet;\n    return (// Note: fragment variable definitions are experimental and may be changed\n      // or removed in the future.\n      \"fragment \".concat(name).concat(wrap('(', join(variableDefinitions, ', '), ')'), \" \") + \"on \".concat(typeCondition, \" \").concat(wrap('', join(directives, ' '), ' ')) + selectionSet\n    );\n  },\n  // Value\n  IntValue: function IntValue(_ref8) {\n    var value = _ref8.value;\n    return value;\n  },\n  FloatValue: function FloatValue(_ref9) {\n    var value = _ref9.value;\n    return value;\n  },\n  StringValue: function StringValue(_ref10, key) {\n    var value = _ref10.value,\n        isBlockString = _ref10.block;\n    return isBlockString ? printBlockString(value, key === 'description') : JSON.stringify(value);\n  },\n  BooleanValue: function BooleanValue(_ref11) {\n    var value = _ref11.value;\n    return value ? 'true' : 'false';\n  },\n  NullValue: function NullValue() {\n    return 'null';\n  },\n  EnumValue: function EnumValue(_ref12) {\n    var value = _ref12.value;\n    return value;\n  },\n  ListValue: function ListValue(_ref13) {\n    var values = _ref13.values;\n    return '[' + join(values, ', ') + ']';\n  },\n  ObjectValue: function ObjectValue(_ref14) {\n    var fields = _ref14.fields;\n    return '{' + join(fields, ', ') + '}';\n  },\n  ObjectField: function ObjectField(_ref15) {\n    var name = _ref15.name,\n        value = _ref15.value;\n    return name + ': ' + value;\n  },\n  // Directive\n  Directive: function Directive(_ref16) {\n    var name = _ref16.name,\n        args = _ref16.arguments;\n    return '@' + name + wrap('(', join(args, ', '), ')');\n  },\n  // Type\n  NamedType: function NamedType(_ref17) {\n    var name = _ref17.name;\n    return name;\n  },\n  ListType: function ListType(_ref18) {\n    var type = _ref18.type;\n    return '[' + type + ']';\n  },\n  NonNullType: function NonNullType(_ref19) {\n    var type = _ref19.type;\n    return type + '!';\n  },\n  // Type System Definitions\n  SchemaDefinition: function SchemaDefinition(_ref20) {\n    var directives = _ref20.directives,\n        operationTypes = _ref20.operationTypes;\n    return join(['schema', join(directives, ' '), block(operationTypes)], ' ');\n  },\n  OperationTypeDefinition: function OperationTypeDefinition(_ref21) {\n    var operation = _ref21.operation,\n        type = _ref21.type;\n    return operation + ': ' + type;\n  },\n  ScalarTypeDefinition: addDescription(function (_ref22) {\n    var name = _ref22.name,\n        directives = _ref22.directives;\n    return join(['scalar', name, join(directives, ' ')], ' ');\n  }),\n  ObjectTypeDefinition: addDescription(function (_ref23) {\n    var name = _ref23.name,\n        interfaces = _ref23.interfaces,\n        directives = _ref23.directives,\n        fields = _ref23.fields;\n    return join(['type', name, wrap('implements ', join(interfaces, ' & ')), join(directives, ' '), block(fields)], ' ');\n  }),\n  FieldDefinition: addDescription(function (_ref24) {\n    var name = _ref24.name,\n        args = _ref24.arguments,\n        type = _ref24.type,\n        directives = _ref24.directives;\n    return name + (args.every(function (arg) {\n      return arg.indexOf('\\n') === -1;\n    }) ? wrap('(', join(args, ', '), ')') : wrap('(\\n', indent(join(args, '\\n')), '\\n)')) + ': ' + type + wrap(' ', join(directives, ' '));\n  }),\n  InputValueDefinition: addDescription(function (_ref25) {\n    var name = _ref25.name,\n        type = _ref25.type,\n        defaultValue = _ref25.defaultValue,\n        directives = _ref25.directives;\n    return join([name + ': ' + type, wrap('= ', defaultValue), join(directives, ' ')], ' ');\n  }),\n  InterfaceTypeDefinition: addDescription(function (_ref26) {\n    var name = _ref26.name,\n        directives = _ref26.directives,\n        fields = _ref26.fields;\n    return join(['interface', name, join(directives, ' '), block(fields)], ' ');\n  }),\n  UnionTypeDefinition: addDescription(function (_ref27) {\n    var name = _ref27.name,\n        directives = _ref27.directives,\n        types = _ref27.types;\n    return join(['union', name, join(directives, ' '), types && types.length !== 0 ? '= ' + join(types, ' | ') : ''], ' ');\n  }),\n  EnumTypeDefinition: addDescription(function (_ref28) {\n    var name = _ref28.name,\n        directives = _ref28.directives,\n        values = _ref28.values;\n    return join(['enum', name, join(directives, ' '), block(values)], ' ');\n  }),\n  EnumValueDefinition: addDescription(function (_ref29) {\n    var name = _ref29.name,\n        directives = _ref29.directives;\n    return join([name, join(directives, ' ')], ' ');\n  }),\n  InputObjectTypeDefinition: addDescription(function (_ref30) {\n    var name = _ref30.name,\n        directives = _ref30.directives,\n        fields = _ref30.fields;\n    return join(['input', name, join(directives, ' '), block(fields)], ' ');\n  }),\n  DirectiveDefinition: addDescription(function (_ref31) {\n    var name = _ref31.name,\n        args = _ref31.arguments,\n        locations = _ref31.locations;\n    return 'directive @' + name + (args.every(function (arg) {\n      return arg.indexOf('\\n') === -1;\n    }) ? wrap('(', join(args, ', '), ')') : wrap('(\\n', indent(join(args, '\\n')), '\\n)')) + ' on ' + join(locations, ' | ');\n  }),\n  SchemaExtension: function SchemaExtension(_ref32) {\n    var directives = _ref32.directives,\n        operationTypes = _ref32.operationTypes;\n    return join(['extend schema', join(directives, ' '), block(operationTypes)], ' ');\n  },\n  ScalarTypeExtension: function ScalarTypeExtension(_ref33) {\n    var name = _ref33.name,\n        directives = _ref33.directives;\n    return join(['extend scalar', name, join(directives, ' ')], ' ');\n  },\n  ObjectTypeExtension: function ObjectTypeExtension(_ref34) {\n    var name = _ref34.name,\n        interfaces = _ref34.interfaces,\n        directives = _ref34.directives,\n        fields = _ref34.fields;\n    return join(['extend type', name, wrap('implements ', join(interfaces, ' & ')), join(directives, ' '), block(fields)], ' ');\n  },\n  InterfaceTypeExtension: function InterfaceTypeExtension(_ref35) {\n    var name = _ref35.name,\n        directives = _ref35.directives,\n        fields = _ref35.fields;\n    return join(['extend interface', name, join(directives, ' '), block(fields)], ' ');\n  },\n  UnionTypeExtension: function UnionTypeExtension(_ref36) {\n    var name = _ref36.name,\n        directives = _ref36.directives,\n        types = _ref36.types;\n    return join(['extend union', name, join(directives, ' '), types && types.length !== 0 ? '= ' + join(types, ' | ') : ''], ' ');\n  },\n  EnumTypeExtension: function EnumTypeExtension(_ref37) {\n    var name = _ref37.name,\n        directives = _ref37.directives,\n        values = _ref37.values;\n    return join(['extend enum', name, join(directives, ' '), block(values)], ' ');\n  },\n  InputObjectTypeExtension: function InputObjectTypeExtension(_ref38) {\n    var name = _ref38.name,\n        directives = _ref38.directives,\n        fields = _ref38.fields;\n    return join(['extend input', name, join(directives, ' '), block(fields)], ' ');\n  }\n};\n\nfunction addDescription(cb) {\n  return function (node) {\n    return join([node.description, cb(node)], '\\n');\n  };\n}\n/**\n * Given maybeArray, print an empty string if it is null or empty, otherwise\n * print all items together separated by separator if provided\n */\n\n\nfunction join(maybeArray, separator) {\n  return maybeArray ? maybeArray.filter(function (x) {\n    return x;\n  }).join(separator || '') : '';\n}\n/**\n * Given array, print each item on its own line, wrapped in an\n * indented \"{ }\" block.\n */\n\n\nfunction block(array) {\n  return array && array.length !== 0 ? '{\\n' + indent(join(array, '\\n')) + '\\n}' : '';\n}\n/**\n * If maybeString is not null or empty, then wrap with start and end, otherwise\n * print an empty string.\n */\n\n\nfunction wrap(start, maybeString, end) {\n  return maybeString ? start + maybeString + (end || '') : '';\n}\n\nfunction indent(maybeString) {\n  return maybeString && '  ' + maybeString.replace(/\\n/g, '\\n  ');\n}\n/**\n * Print a block string in the indented block form by adding a leading and\n * trailing blank line. However, if a block string starts with whitespace and is\n * a single-line, adding a leading blank line would strip that whitespace.\n */\n\n\nfunction printBlockString(value, isDescription) {\n  var escaped = value.replace(/\"\"\"/g, '\\\\\"\"\"');\n  return (value[0] === ' ' || value[0] === '\\t') && value.indexOf('\\n') === -1 ? \"\\\"\\\"\\\"\".concat(escaped.replace(/\"$/, '\"\\n'), \"\\\"\\\"\\\"\") : \"\\\"\\\"\\\"\\n\".concat(isDescription ? escaped : indent(escaped), \"\\n\\\"\\\"\\\"\");\n}","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\n\n/**\n * Used to print values in error messages.\n */\nexport default function inspect(value) {\n  return value && _typeof(value) === 'object' ? typeof value.inspect === 'function' ? value.inspect() : Array.isArray(value) ? '[' + value.map(inspect).join(', ') + ']' : '{' + Object.keys(value).map(function (k) {\n    return \"\".concat(k, \": \").concat(inspect(value[k]));\n  }).join(', ') + '}' : typeof value === 'string' ? '\"' + value + '\"' : typeof value === 'function' ? \"[function \".concat(value.name, \"]\") : String(value);\n}","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\nexport default function invariant(condition, message) {\n  /* istanbul ignore else */\n  if (!condition) {\n    throw new Error(message);\n  }\n}","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\nimport invariant from '../jsutils/invariant';\nimport defineToStringTag from '../jsutils/defineToStringTag';\n\n/**\n * A representation of source input to GraphQL.\n * `name` and `locationOffset` are optional. They are useful for clients who\n * store GraphQL documents in source files; for example, if the GraphQL input\n * starts at line 40 in a file named Foo.graphql, it might be useful for name to\n * be \"Foo.graphql\" and location to be `{ line: 40, column: 0 }`.\n * line and column in locationOffset are 1-indexed\n */\nexport var Source = function Source(body, name, locationOffset) {\n  _defineProperty(this, \"body\", void 0);\n\n  _defineProperty(this, \"name\", void 0);\n\n  _defineProperty(this, \"locationOffset\", void 0);\n\n  this.body = body;\n  this.name = name || 'GraphQL request';\n  this.locationOffset = locationOffset || {\n    line: 1,\n    column: 1\n  };\n  !(this.locationOffset.line > 0) ? invariant(0, 'line in locationOffset is 1-indexed and must be positive') : void 0;\n  !(this.locationOffset.column > 0) ? invariant(0, 'column in locationOffset is 1-indexed and must be positive') : void 0;\n}; // Conditionally apply `[Symbol.toStringTag]` if `Symbol`s are supported\n\ndefineToStringTag(Source);","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\n\n/**\n * The `applyToStringTag()` function checks first to see if the runtime\n * supports the `Symbol` class and then if the `Symbol.toStringTag` constant\n * is defined as a `Symbol` instance. If both conditions are met, the\n * Symbol.toStringTag property is defined as a getter that returns the\n * supplied class constructor's name.\n *\n * @method applyToStringTag\n *\n * @param {Class<any>} classObject a class such as Object, String, Number but\n * typically one of your own creation through the class keyword; `class A {}`,\n * for example.\n */\nexport default function applyToStringTag(classObject) {\n  if (typeof Symbol === 'function' && Symbol.toStringTag) {\n    Object.defineProperty(classObject.prototype, Symbol.toStringTag, {\n      get: function get() {\n        return this.constructor.name;\n      }\n    });\n  }\n}","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\nimport { GraphQLError } from './GraphQLError';\n/**\n * Produces a GraphQLError representing a syntax error, containing useful\n * descriptive information about the syntax error's position in the source.\n */\n\nexport function syntaxError(source, position, description) {\n  return new GraphQLError(\"Syntax Error: \".concat(description), undefined, source, [position]);\n}","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\n\n/**\n * Produces the value of a block string from its parsed raw value, similar to\n * Coffeescript's block string, Python's docstring trim or Ruby's strip_heredoc.\n *\n * This implements the GraphQL spec's BlockStringValue() static algorithm.\n */\nexport default function blockStringValue(rawString) {\n  // Expand a block string's raw value into independent lines.\n  var lines = rawString.split(/\\r\\n|[\\n\\r]/g); // Remove common indentation from all lines but first.\n\n  var commonIndent = null;\n\n  for (var i = 1; i < lines.length; i++) {\n    var line = lines[i];\n    var indent = leadingWhitespace(line);\n\n    if (indent < line.length && (commonIndent === null || indent < commonIndent)) {\n      commonIndent = indent;\n\n      if (commonIndent === 0) {\n        break;\n      }\n    }\n  }\n\n  if (commonIndent) {\n    for (var _i = 1; _i < lines.length; _i++) {\n      lines[_i] = lines[_i].slice(commonIndent);\n    }\n  } // Remove leading and trailing blank lines.\n\n\n  while (lines.length > 0 && isBlank(lines[0])) {\n    lines.shift();\n  }\n\n  while (lines.length > 0 && isBlank(lines[lines.length - 1])) {\n    lines.pop();\n  } // Return a string of the lines joined with U+000A.\n\n\n  return lines.join('\\n');\n}\n\nfunction leadingWhitespace(str) {\n  var i = 0;\n\n  while (i < str.length && (str[i] === ' ' || str[i] === '\\t')) {\n    i++;\n  }\n\n  return i;\n}\n\nfunction isBlank(str) {\n  return leadingWhitespace(str) === str.length;\n}","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\nimport { syntaxError } from '../error';\nimport blockStringValue from './blockStringValue';\n/**\n * Given a Source object, this returns a Lexer for that source.\n * A Lexer is a stateful stream generator in that every time\n * it is advanced, it returns the next token in the Source. Assuming the\n * source lexes, the final Token emitted by the lexer will be of kind\n * EOF, after which the lexer will repeatedly return the same EOF token\n * whenever called.\n */\n\nexport function createLexer(source, options) {\n  var startOfFileToken = new Tok(TokenKind.SOF, 0, 0, 0, 0, null);\n  var lexer = {\n    source: source,\n    options: options,\n    lastToken: startOfFileToken,\n    token: startOfFileToken,\n    line: 1,\n    lineStart: 0,\n    advance: advanceLexer,\n    lookahead: lookahead\n  };\n  return lexer;\n}\n\nfunction advanceLexer() {\n  this.lastToken = this.token;\n  var token = this.token = this.lookahead();\n  return token;\n}\n\nfunction lookahead() {\n  var token = this.token;\n\n  if (token.kind !== TokenKind.EOF) {\n    do {\n      // Note: next is only mutable during parsing, so we cast to allow this.\n      token = token.next || (token.next = readToken(this, token));\n    } while (token.kind === TokenKind.COMMENT);\n  }\n\n  return token;\n}\n/**\n * The return type of createLexer.\n */\n\n\n/**\n * An exported enum describing the different kinds of tokens that the\n * lexer emits.\n */\nexport var TokenKind = Object.freeze({\n  SOF: '<SOF>',\n  EOF: '<EOF>',\n  BANG: '!',\n  DOLLAR: '$',\n  AMP: '&',\n  PAREN_L: '(',\n  PAREN_R: ')',\n  SPREAD: '...',\n  COLON: ':',\n  EQUALS: '=',\n  AT: '@',\n  BRACKET_L: '[',\n  BRACKET_R: ']',\n  BRACE_L: '{',\n  PIPE: '|',\n  BRACE_R: '}',\n  NAME: 'Name',\n  INT: 'Int',\n  FLOAT: 'Float',\n  STRING: 'String',\n  BLOCK_STRING: 'BlockString',\n  COMMENT: 'Comment'\n});\n/**\n * The enum type representing the token kinds values.\n */\n\n/**\n * A helper function to describe a token as a string for debugging\n */\nexport function getTokenDesc(token) {\n  var value = token.value;\n  return value ? \"\".concat(token.kind, \" \\\"\").concat(value, \"\\\"\") : token.kind;\n}\nvar charCodeAt = String.prototype.charCodeAt;\nvar slice = String.prototype.slice;\n/**\n * Helper function for constructing the Token object.\n */\n\nfunction Tok(kind, start, end, line, column, prev, value) {\n  this.kind = kind;\n  this.start = start;\n  this.end = end;\n  this.line = line;\n  this.column = column;\n  this.value = value;\n  this.prev = prev;\n  this.next = null;\n} // Print a simplified form when appearing in JSON/util.inspect.\n\n\nTok.prototype.toJSON = Tok.prototype.inspect = function toJSON() {\n  return {\n    kind: this.kind,\n    value: this.value,\n    line: this.line,\n    column: this.column\n  };\n};\n\nfunction printCharCode(code) {\n  return (// NaN/undefined represents access beyond the end of the file.\n    isNaN(code) ? TokenKind.EOF : // Trust JSON for ASCII.\n    code < 0x007f ? JSON.stringify(String.fromCharCode(code)) : // Otherwise print the escaped form.\n    \"\\\"\\\\u\".concat(('00' + code.toString(16).toUpperCase()).slice(-4), \"\\\"\")\n  );\n}\n/**\n * Gets the next token from the source starting at the given position.\n *\n * This skips over whitespace and comments until it finds the next lexable\n * token, then lexes punctuators immediately or calls the appropriate helper\n * function for more complicated tokens.\n */\n\n\nfunction readToken(lexer, prev) {\n  var source = lexer.source;\n  var body = source.body;\n  var bodyLength = body.length;\n  var pos = positionAfterWhitespace(body, prev.end, lexer);\n  var line = lexer.line;\n  var col = 1 + pos - lexer.lineStart;\n\n  if (pos >= bodyLength) {\n    return new Tok(TokenKind.EOF, bodyLength, bodyLength, line, col, prev);\n  }\n\n  var code = charCodeAt.call(body, pos); // SourceCharacter\n\n  switch (code) {\n    // !\n    case 33:\n      return new Tok(TokenKind.BANG, pos, pos + 1, line, col, prev);\n    // #\n\n    case 35:\n      return readComment(source, pos, line, col, prev);\n    // $\n\n    case 36:\n      return new Tok(TokenKind.DOLLAR, pos, pos + 1, line, col, prev);\n    // &\n\n    case 38:\n      return new Tok(TokenKind.AMP, pos, pos + 1, line, col, prev);\n    // (\n\n    case 40:\n      return new Tok(TokenKind.PAREN_L, pos, pos + 1, line, col, prev);\n    // )\n\n    case 41:\n      return new Tok(TokenKind.PAREN_R, pos, pos + 1, line, col, prev);\n    // .\n\n    case 46:\n      if (charCodeAt.call(body, pos + 1) === 46 && charCodeAt.call(body, pos + 2) === 46) {\n        return new Tok(TokenKind.SPREAD, pos, pos + 3, line, col, prev);\n      }\n\n      break;\n    // :\n\n    case 58:\n      return new Tok(TokenKind.COLON, pos, pos + 1, line, col, prev);\n    // =\n\n    case 61:\n      return new Tok(TokenKind.EQUALS, pos, pos + 1, line, col, prev);\n    // @\n\n    case 64:\n      return new Tok(TokenKind.AT, pos, pos + 1, line, col, prev);\n    // [\n\n    case 91:\n      return new Tok(TokenKind.BRACKET_L, pos, pos + 1, line, col, prev);\n    // ]\n\n    case 93:\n      return new Tok(TokenKind.BRACKET_R, pos, pos + 1, line, col, prev);\n    // {\n\n    case 123:\n      return new Tok(TokenKind.BRACE_L, pos, pos + 1, line, col, prev);\n    // |\n\n    case 124:\n      return new Tok(TokenKind.PIPE, pos, pos + 1, line, col, prev);\n    // }\n\n    case 125:\n      return new Tok(TokenKind.BRACE_R, pos, pos + 1, line, col, prev);\n    // A-Z _ a-z\n\n    case 65:\n    case 66:\n    case 67:\n    case 68:\n    case 69:\n    case 70:\n    case 71:\n    case 72:\n    case 73:\n    case 74:\n    case 75:\n    case 76:\n    case 77:\n    case 78:\n    case 79:\n    case 80:\n    case 81:\n    case 82:\n    case 83:\n    case 84:\n    case 85:\n    case 86:\n    case 87:\n    case 88:\n    case 89:\n    case 90:\n    case 95:\n    case 97:\n    case 98:\n    case 99:\n    case 100:\n    case 101:\n    case 102:\n    case 103:\n    case 104:\n    case 105:\n    case 106:\n    case 107:\n    case 108:\n    case 109:\n    case 110:\n    case 111:\n    case 112:\n    case 113:\n    case 114:\n    case 115:\n    case 116:\n    case 117:\n    case 118:\n    case 119:\n    case 120:\n    case 121:\n    case 122:\n      return readName(source, pos, line, col, prev);\n    // - 0-9\n\n    case 45:\n    case 48:\n    case 49:\n    case 50:\n    case 51:\n    case 52:\n    case 53:\n    case 54:\n    case 55:\n    case 56:\n    case 57:\n      return readNumber(source, pos, code, line, col, prev);\n    // \"\n\n    case 34:\n      if (charCodeAt.call(body, pos + 1) === 34 && charCodeAt.call(body, pos + 2) === 34) {\n        return readBlockString(source, pos, line, col, prev);\n      }\n\n      return readString(source, pos, line, col, prev);\n  }\n\n  throw syntaxError(source, pos, unexpectedCharacterMessage(code));\n}\n/**\n * Report a message that an unexpected character was encountered.\n */\n\n\nfunction unexpectedCharacterMessage(code) {\n  if (code < 0x0020 && code !== 0x0009 && code !== 0x000a && code !== 0x000d) {\n    return \"Cannot contain the invalid character \".concat(printCharCode(code), \".\");\n  }\n\n  if (code === 39) {\n    // '\n    return \"Unexpected single quote character ('), did you mean to use \" + 'a double quote (\")?';\n  }\n\n  return \"Cannot parse the unexpected character \".concat(printCharCode(code), \".\");\n}\n/**\n * Reads from body starting at startPosition until it finds a non-whitespace\n * or commented character, then returns the position of that character for\n * lexing.\n */\n\n\nfunction positionAfterWhitespace(body, startPosition, lexer) {\n  var bodyLength = body.length;\n  var position = startPosition;\n\n  while (position < bodyLength) {\n    var code = charCodeAt.call(body, position); // tab | space | comma | BOM\n\n    if (code === 9 || code === 32 || code === 44 || code === 0xfeff) {\n      ++position;\n    } else if (code === 10) {\n      // new line\n      ++position;\n      ++lexer.line;\n      lexer.lineStart = position;\n    } else if (code === 13) {\n      // carriage return\n      if (charCodeAt.call(body, position + 1) === 10) {\n        position += 2;\n      } else {\n        ++position;\n      }\n\n      ++lexer.line;\n      lexer.lineStart = position;\n    } else {\n      break;\n    }\n  }\n\n  return position;\n}\n/**\n * Reads a comment token from the source file.\n *\n * #[\\u0009\\u0020-\\uFFFF]*\n */\n\n\nfunction readComment(source, start, line, col, prev) {\n  var body = source.body;\n  var code;\n  var position = start;\n\n  do {\n    code = charCodeAt.call(body, ++position);\n  } while (code !== null && ( // SourceCharacter but not LineTerminator\n  code > 0x001f || code === 0x0009));\n\n  return new Tok(TokenKind.COMMENT, start, position, line, col, prev, slice.call(body, start + 1, position));\n}\n/**\n * Reads a number token from the source file, either a float\n * or an int depending on whether a decimal point appears.\n *\n * Int:   -?(0|[1-9][0-9]*)\n * Float: -?(0|[1-9][0-9]*)(\\.[0-9]+)?((E|e)(+|-)?[0-9]+)?\n */\n\n\nfunction readNumber(source, start, firstCode, line, col, prev) {\n  var body = source.body;\n  var code = firstCode;\n  var position = start;\n  var isFloat = false;\n\n  if (code === 45) {\n    // -\n    code = charCodeAt.call(body, ++position);\n  }\n\n  if (code === 48) {\n    // 0\n    code = charCodeAt.call(body, ++position);\n\n    if (code >= 48 && code <= 57) {\n      throw syntaxError(source, position, \"Invalid number, unexpected digit after 0: \".concat(printCharCode(code), \".\"));\n    }\n  } else {\n    position = readDigits(source, position, code);\n    code = charCodeAt.call(body, position);\n  }\n\n  if (code === 46) {\n    // .\n    isFloat = true;\n    code = charCodeAt.call(body, ++position);\n    position = readDigits(source, position, code);\n    code = charCodeAt.call(body, position);\n  }\n\n  if (code === 69 || code === 101) {\n    // E e\n    isFloat = true;\n    code = charCodeAt.call(body, ++position);\n\n    if (code === 43 || code === 45) {\n      // + -\n      code = charCodeAt.call(body, ++position);\n    }\n\n    position = readDigits(source, position, code);\n  }\n\n  return new Tok(isFloat ? TokenKind.FLOAT : TokenKind.INT, start, position, line, col, prev, slice.call(body, start, position));\n}\n/**\n * Returns the new position in the source after reading digits.\n */\n\n\nfunction readDigits(source, start, firstCode) {\n  var body = source.body;\n  var position = start;\n  var code = firstCode;\n\n  if (code >= 48 && code <= 57) {\n    // 0 - 9\n    do {\n      code = charCodeAt.call(body, ++position);\n    } while (code >= 48 && code <= 57); // 0 - 9\n\n\n    return position;\n  }\n\n  throw syntaxError(source, position, \"Invalid number, expected digit but got: \".concat(printCharCode(code), \".\"));\n}\n/**\n * Reads a string token from the source file.\n *\n * \"([^\"\\\\\\u000A\\u000D]|(\\\\(u[0-9a-fA-F]{4}|[\"\\\\/bfnrt])))*\"\n */\n\n\nfunction readString(source, start, line, col, prev) {\n  var body = source.body;\n  var position = start + 1;\n  var chunkStart = position;\n  var code = 0;\n  var value = '';\n\n  while (position < body.length && (code = charCodeAt.call(body, position)) !== null && // not LineTerminator\n  code !== 0x000a && code !== 0x000d) {\n    // Closing Quote (\")\n    if (code === 34) {\n      value += slice.call(body, chunkStart, position);\n      return new Tok(TokenKind.STRING, start, position + 1, line, col, prev, value);\n    } // SourceCharacter\n\n\n    if (code < 0x0020 && code !== 0x0009) {\n      throw syntaxError(source, position, \"Invalid character within String: \".concat(printCharCode(code), \".\"));\n    }\n\n    ++position;\n\n    if (code === 92) {\n      // \\\n      value += slice.call(body, chunkStart, position - 1);\n      code = charCodeAt.call(body, position);\n\n      switch (code) {\n        case 34:\n          value += '\"';\n          break;\n\n        case 47:\n          value += '/';\n          break;\n\n        case 92:\n          value += '\\\\';\n          break;\n\n        case 98:\n          value += '\\b';\n          break;\n\n        case 102:\n          value += '\\f';\n          break;\n\n        case 110:\n          value += '\\n';\n          break;\n\n        case 114:\n          value += '\\r';\n          break;\n\n        case 116:\n          value += '\\t';\n          break;\n\n        case 117:\n          // u\n          var charCode = uniCharCode(charCodeAt.call(body, position + 1), charCodeAt.call(body, position + 2), charCodeAt.call(body, position + 3), charCodeAt.call(body, position + 4));\n\n          if (charCode < 0) {\n            throw syntaxError(source, position, 'Invalid character escape sequence: ' + \"\\\\u\".concat(body.slice(position + 1, position + 5), \".\"));\n          }\n\n          value += String.fromCharCode(charCode);\n          position += 4;\n          break;\n\n        default:\n          throw syntaxError(source, position, \"Invalid character escape sequence: \\\\\".concat(String.fromCharCode(code), \".\"));\n      }\n\n      ++position;\n      chunkStart = position;\n    }\n  }\n\n  throw syntaxError(source, position, 'Unterminated string.');\n}\n/**\n * Reads a block string token from the source file.\n *\n * \"\"\"(\"?\"?(\\\\\"\"\"|\\\\(?!=\"\"\")|[^\"\\\\]))*\"\"\"\n */\n\n\nfunction readBlockString(source, start, line, col, prev) {\n  var body = source.body;\n  var position = start + 3;\n  var chunkStart = position;\n  var code = 0;\n  var rawValue = '';\n\n  while (position < body.length && (code = charCodeAt.call(body, position)) !== null) {\n    // Closing Triple-Quote (\"\"\")\n    if (code === 34 && charCodeAt.call(body, position + 1) === 34 && charCodeAt.call(body, position + 2) === 34) {\n      rawValue += slice.call(body, chunkStart, position);\n      return new Tok(TokenKind.BLOCK_STRING, start, position + 3, line, col, prev, blockStringValue(rawValue));\n    } // SourceCharacter\n\n\n    if (code < 0x0020 && code !== 0x0009 && code !== 0x000a && code !== 0x000d) {\n      throw syntaxError(source, position, \"Invalid character within String: \".concat(printCharCode(code), \".\"));\n    } // Escape Triple-Quote (\\\"\"\")\n\n\n    if (code === 92 && charCodeAt.call(body, position + 1) === 34 && charCodeAt.call(body, position + 2) === 34 && charCodeAt.call(body, position + 3) === 34) {\n      rawValue += slice.call(body, chunkStart, position) + '\"\"\"';\n      position += 4;\n      chunkStart = position;\n    } else {\n      ++position;\n    }\n  }\n\n  throw syntaxError(source, position, 'Unterminated string.');\n}\n/**\n * Converts four hexidecimal chars to the integer that the\n * string represents. For example, uniCharCode('0','0','0','f')\n * will return 15, and uniCharCode('0','0','f','f') returns 255.\n *\n * Returns a negative number on error, if a char was invalid.\n *\n * This is implemented by noting that char2hex() returns -1 on error,\n * which means the result of ORing the char2hex() will also be negative.\n */\n\n\nfunction uniCharCode(a, b, c, d) {\n  return char2hex(a) << 12 | char2hex(b) << 8 | char2hex(c) << 4 | char2hex(d);\n}\n/**\n * Converts a hex character to its integer value.\n * '0' becomes 0, '9' becomes 9\n * 'A' becomes 10, 'F' becomes 15\n * 'a' becomes 10, 'f' becomes 15\n *\n * Returns -1 on error.\n */\n\n\nfunction char2hex(a) {\n  return a >= 48 && a <= 57 ? a - 48 // 0-9\n  : a >= 65 && a <= 70 ? a - 55 // A-F\n  : a >= 97 && a <= 102 ? a - 87 // a-f\n  : -1;\n}\n/**\n * Reads an alphanumeric + underscore name from the source.\n *\n * [_A-Za-z][_0-9A-Za-z]*\n */\n\n\nfunction readName(source, start, line, col, prev) {\n  var body = source.body;\n  var bodyLength = body.length;\n  var position = start + 1;\n  var code = 0;\n\n  while (position !== bodyLength && (code = charCodeAt.call(body, position)) !== null && (code === 95 || // _\n  code >= 48 && code <= 57 || // 0-9\n  code >= 65 && code <= 90 || // A-Z\n  code >= 97 && code <= 122) // a-z\n  ) {\n    ++position;\n  }\n\n  return new Tok(TokenKind.NAME, start, position, line, col, prev, slice.call(body, start, position));\n}","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\n\n/**\n * The set of allowed kind values for AST nodes.\n */\nexport var Kind = Object.freeze({\n  // Name\n  NAME: 'Name',\n  // Document\n  DOCUMENT: 'Document',\n  OPERATION_DEFINITION: 'OperationDefinition',\n  VARIABLE_DEFINITION: 'VariableDefinition',\n  SELECTION_SET: 'SelectionSet',\n  FIELD: 'Field',\n  ARGUMENT: 'Argument',\n  // Fragments\n  FRAGMENT_SPREAD: 'FragmentSpread',\n  INLINE_FRAGMENT: 'InlineFragment',\n  FRAGMENT_DEFINITION: 'FragmentDefinition',\n  // Values\n  VARIABLE: 'Variable',\n  INT: 'IntValue',\n  FLOAT: 'FloatValue',\n  STRING: 'StringValue',\n  BOOLEAN: 'BooleanValue',\n  NULL: 'NullValue',\n  ENUM: 'EnumValue',\n  LIST: 'ListValue',\n  OBJECT: 'ObjectValue',\n  OBJECT_FIELD: 'ObjectField',\n  // Directives\n  DIRECTIVE: 'Directive',\n  // Types\n  NAMED_TYPE: 'NamedType',\n  LIST_TYPE: 'ListType',\n  NON_NULL_TYPE: 'NonNullType',\n  // Type System Definitions\n  SCHEMA_DEFINITION: 'SchemaDefinition',\n  OPERATION_TYPE_DEFINITION: 'OperationTypeDefinition',\n  // Type Definitions\n  SCALAR_TYPE_DEFINITION: 'ScalarTypeDefinition',\n  OBJECT_TYPE_DEFINITION: 'ObjectTypeDefinition',\n  FIELD_DEFINITION: 'FieldDefinition',\n  INPUT_VALUE_DEFINITION: 'InputValueDefinition',\n  INTERFACE_TYPE_DEFINITION: 'InterfaceTypeDefinition',\n  UNION_TYPE_DEFINITION: 'UnionTypeDefinition',\n  ENUM_TYPE_DEFINITION: 'EnumTypeDefinition',\n  ENUM_VALUE_DEFINITION: 'EnumValueDefinition',\n  INPUT_OBJECT_TYPE_DEFINITION: 'InputObjectTypeDefinition',\n  // Directive Definitions\n  DIRECTIVE_DEFINITION: 'DirectiveDefinition',\n  // Type System Extensions\n  SCHEMA_EXTENSION: 'SchemaExtension',\n  // Type Extensions\n  SCALAR_TYPE_EXTENSION: 'ScalarTypeExtension',\n  OBJECT_TYPE_EXTENSION: 'ObjectTypeExtension',\n  INTERFACE_TYPE_EXTENSION: 'InterfaceTypeExtension',\n  UNION_TYPE_EXTENSION: 'UnionTypeExtension',\n  ENUM_TYPE_EXTENSION: 'EnumTypeExtension',\n  INPUT_OBJECT_TYPE_EXTENSION: 'InputObjectTypeExtension'\n});\n/**\n * The enum type representing the possible kind values of AST nodes.\n */","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\n\n/**\n * The set of allowed directive location values.\n */\nexport var DirectiveLocation = Object.freeze({\n  // Request Definitions\n  QUERY: 'QUERY',\n  MUTATION: 'MUTATION',\n  SUBSCRIPTION: 'SUBSCRIPTION',\n  FIELD: 'FIELD',\n  FRAGMENT_DEFINITION: 'FRAGMENT_DEFINITION',\n  FRAGMENT_SPREAD: 'FRAGMENT_SPREAD',\n  INLINE_FRAGMENT: 'INLINE_FRAGMENT',\n  VARIABLE_DEFINITION: 'VARIABLE_DEFINITION',\n  // Type System Definitions\n  SCHEMA: 'SCHEMA',\n  SCALAR: 'SCALAR',\n  OBJECT: 'OBJECT',\n  FIELD_DEFINITION: 'FIELD_DEFINITION',\n  ARGUMENT_DEFINITION: 'ARGUMENT_DEFINITION',\n  INTERFACE: 'INTERFACE',\n  UNION: 'UNION',\n  ENUM: 'ENUM',\n  ENUM_VALUE: 'ENUM_VALUE',\n  INPUT_OBJECT: 'INPUT_OBJECT',\n  INPUT_FIELD_DEFINITION: 'INPUT_FIELD_DEFINITION'\n});\n/**\n * The enum type representing the directive location values.\n */","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\nimport inspect from '../jsutils/inspect';\nimport { Source } from './source';\nimport { syntaxError } from '../error';\nimport { createLexer, TokenKind, getTokenDesc } from './lexer';\nimport { Kind } from './kinds';\nimport { DirectiveLocation } from './directiveLocation';\n/**\n * Configuration options to control parser behavior\n */\n\n/**\n * Given a GraphQL source, parses it into a Document.\n * Throws GraphQLError if a syntax error is encountered.\n */\nexport function parse(source, options) {\n  var sourceObj = typeof source === 'string' ? new Source(source) : source;\n\n  if (!(sourceObj instanceof Source)) {\n    throw new TypeError(\"Must provide Source. Received: \".concat(inspect(sourceObj)));\n  }\n\n  var lexer = createLexer(sourceObj, options || {});\n  return parseDocument(lexer);\n}\n/**\n * Given a string containing a GraphQL value (ex. `[42]`), parse the AST for\n * that value.\n * Throws GraphQLError if a syntax error is encountered.\n *\n * This is useful within tools that operate upon GraphQL Values directly and\n * in isolation of complete GraphQL documents.\n *\n * Consider providing the results to the utility function: valueFromAST().\n */\n\nexport function parseValue(source, options) {\n  var sourceObj = typeof source === 'string' ? new Source(source) : source;\n  var lexer = createLexer(sourceObj, options || {});\n  expect(lexer, TokenKind.SOF);\n  var value = parseValueLiteral(lexer, false);\n  expect(lexer, TokenKind.EOF);\n  return value;\n}\n/**\n * Given a string containing a GraphQL Type (ex. `[Int!]`), parse the AST for\n * that type.\n * Throws GraphQLError if a syntax error is encountered.\n *\n * This is useful within tools that operate upon GraphQL Types directly and\n * in isolation of complete GraphQL documents.\n *\n * Consider providing the results to the utility function: typeFromAST().\n */\n\nexport function parseType(source, options) {\n  var sourceObj = typeof source === 'string' ? new Source(source) : source;\n  var lexer = createLexer(sourceObj, options || {});\n  expect(lexer, TokenKind.SOF);\n  var type = parseTypeReference(lexer);\n  expect(lexer, TokenKind.EOF);\n  return type;\n}\n/**\n * Converts a name lex token into a name parse node.\n */\n\nfunction parseName(lexer) {\n  var token = expect(lexer, TokenKind.NAME);\n  return {\n    kind: Kind.NAME,\n    value: token.value,\n    loc: loc(lexer, token)\n  };\n} // Implements the parsing rules in the Document section.\n\n/**\n * Document : Definition+\n */\n\n\nfunction parseDocument(lexer) {\n  var start = lexer.token;\n  return {\n    kind: Kind.DOCUMENT,\n    definitions: many(lexer, TokenKind.SOF, parseDefinition, TokenKind.EOF),\n    loc: loc(lexer, start)\n  };\n}\n/**\n * Definition :\n *   - ExecutableDefinition\n *   - TypeSystemDefinition\n *   - TypeSystemExtension\n */\n\n\nfunction parseDefinition(lexer) {\n  if (peek(lexer, TokenKind.NAME)) {\n    switch (lexer.token.value) {\n      case 'query':\n      case 'mutation':\n      case 'subscription':\n      case 'fragment':\n        return parseExecutableDefinition(lexer);\n\n      case 'schema':\n      case 'scalar':\n      case 'type':\n      case 'interface':\n      case 'union':\n      case 'enum':\n      case 'input':\n      case 'directive':\n        return parseTypeSystemDefinition(lexer);\n\n      case 'extend':\n        return parseTypeSystemExtension(lexer);\n    }\n  } else if (peek(lexer, TokenKind.BRACE_L)) {\n    return parseExecutableDefinition(lexer);\n  } else if (peekDescription(lexer)) {\n    return parseTypeSystemDefinition(lexer);\n  }\n\n  throw unexpected(lexer);\n}\n/**\n * ExecutableDefinition :\n *   - OperationDefinition\n *   - FragmentDefinition\n */\n\n\nfunction parseExecutableDefinition(lexer) {\n  if (peek(lexer, TokenKind.NAME)) {\n    switch (lexer.token.value) {\n      case 'query':\n      case 'mutation':\n      case 'subscription':\n        return parseOperationDefinition(lexer);\n\n      case 'fragment':\n        return parseFragmentDefinition(lexer);\n    }\n  } else if (peek(lexer, TokenKind.BRACE_L)) {\n    return parseOperationDefinition(lexer);\n  }\n\n  throw unexpected(lexer);\n} // Implements the parsing rules in the Operations section.\n\n/**\n * OperationDefinition :\n *  - SelectionSet\n *  - OperationType Name? VariableDefinitions? Directives? SelectionSet\n */\n\n\nfunction parseOperationDefinition(lexer) {\n  var start = lexer.token;\n\n  if (peek(lexer, TokenKind.BRACE_L)) {\n    return {\n      kind: Kind.OPERATION_DEFINITION,\n      operation: 'query',\n      name: undefined,\n      variableDefinitions: [],\n      directives: [],\n      selectionSet: parseSelectionSet(lexer),\n      loc: loc(lexer, start)\n    };\n  }\n\n  var operation = parseOperationType(lexer);\n  var name;\n\n  if (peek(lexer, TokenKind.NAME)) {\n    name = parseName(lexer);\n  }\n\n  return {\n    kind: Kind.OPERATION_DEFINITION,\n    operation: operation,\n    name: name,\n    variableDefinitions: parseVariableDefinitions(lexer),\n    directives: parseDirectives(lexer, false),\n    selectionSet: parseSelectionSet(lexer),\n    loc: loc(lexer, start)\n  };\n}\n/**\n * OperationType : one of query mutation subscription\n */\n\n\nfunction parseOperationType(lexer) {\n  var operationToken = expect(lexer, TokenKind.NAME);\n\n  switch (operationToken.value) {\n    case 'query':\n      return 'query';\n\n    case 'mutation':\n      return 'mutation';\n\n    case 'subscription':\n      return 'subscription';\n  }\n\n  throw unexpected(lexer, operationToken);\n}\n/**\n * VariableDefinitions : ( VariableDefinition+ )\n */\n\n\nfunction parseVariableDefinitions(lexer) {\n  return peek(lexer, TokenKind.PAREN_L) ? many(lexer, TokenKind.PAREN_L, parseVariableDefinition, TokenKind.PAREN_R) : [];\n}\n/**\n * VariableDefinition : Variable : Type DefaultValue? Directives[Const]?\n */\n\n\nfunction parseVariableDefinition(lexer) {\n  var start = lexer.token;\n\n  if (lexer.options.experimentalVariableDefinitionDirectives) {\n    return {\n      kind: Kind.VARIABLE_DEFINITION,\n      variable: parseVariable(lexer),\n      type: (expect(lexer, TokenKind.COLON), parseTypeReference(lexer)),\n      defaultValue: skip(lexer, TokenKind.EQUALS) ? parseValueLiteral(lexer, true) : undefined,\n      directives: parseDirectives(lexer, true),\n      loc: loc(lexer, start)\n    };\n  }\n\n  return {\n    kind: Kind.VARIABLE_DEFINITION,\n    variable: parseVariable(lexer),\n    type: (expect(lexer, TokenKind.COLON), parseTypeReference(lexer)),\n    defaultValue: skip(lexer, TokenKind.EQUALS) ? parseValueLiteral(lexer, true) : undefined,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * Variable : $ Name\n */\n\n\nfunction parseVariable(lexer) {\n  var start = lexer.token;\n  expect(lexer, TokenKind.DOLLAR);\n  return {\n    kind: Kind.VARIABLE,\n    name: parseName(lexer),\n    loc: loc(lexer, start)\n  };\n}\n/**\n * SelectionSet : { Selection+ }\n */\n\n\nfunction parseSelectionSet(lexer) {\n  var start = lexer.token;\n  return {\n    kind: Kind.SELECTION_SET,\n    selections: many(lexer, TokenKind.BRACE_L, parseSelection, TokenKind.BRACE_R),\n    loc: loc(lexer, start)\n  };\n}\n/**\n * Selection :\n *   - Field\n *   - FragmentSpread\n *   - InlineFragment\n */\n\n\nfunction parseSelection(lexer) {\n  return peek(lexer, TokenKind.SPREAD) ? parseFragment(lexer) : parseField(lexer);\n}\n/**\n * Field : Alias? Name Arguments? Directives? SelectionSet?\n *\n * Alias : Name :\n */\n\n\nfunction parseField(lexer) {\n  var start = lexer.token;\n  var nameOrAlias = parseName(lexer);\n  var alias;\n  var name;\n\n  if (skip(lexer, TokenKind.COLON)) {\n    alias = nameOrAlias;\n    name = parseName(lexer);\n  } else {\n    name = nameOrAlias;\n  }\n\n  return {\n    kind: Kind.FIELD,\n    alias: alias,\n    name: name,\n    arguments: parseArguments(lexer, false),\n    directives: parseDirectives(lexer, false),\n    selectionSet: peek(lexer, TokenKind.BRACE_L) ? parseSelectionSet(lexer) : undefined,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * Arguments[Const] : ( Argument[?Const]+ )\n */\n\n\nfunction parseArguments(lexer, isConst) {\n  var item = isConst ? parseConstArgument : parseArgument;\n  return peek(lexer, TokenKind.PAREN_L) ? many(lexer, TokenKind.PAREN_L, item, TokenKind.PAREN_R) : [];\n}\n/**\n * Argument[Const] : Name : Value[?Const]\n */\n\n\nfunction parseArgument(lexer) {\n  var start = lexer.token;\n  return {\n    kind: Kind.ARGUMENT,\n    name: parseName(lexer),\n    value: (expect(lexer, TokenKind.COLON), parseValueLiteral(lexer, false)),\n    loc: loc(lexer, start)\n  };\n}\n\nfunction parseConstArgument(lexer) {\n  var start = lexer.token;\n  return {\n    kind: Kind.ARGUMENT,\n    name: parseName(lexer),\n    value: (expect(lexer, TokenKind.COLON), parseConstValue(lexer)),\n    loc: loc(lexer, start)\n  };\n} // Implements the parsing rules in the Fragments section.\n\n/**\n * Corresponds to both FragmentSpread and InlineFragment in the spec.\n *\n * FragmentSpread : ... FragmentName Directives?\n *\n * InlineFragment : ... TypeCondition? Directives? SelectionSet\n */\n\n\nfunction parseFragment(lexer) {\n  var start = lexer.token;\n  expect(lexer, TokenKind.SPREAD);\n\n  if (peek(lexer, TokenKind.NAME) && lexer.token.value !== 'on') {\n    return {\n      kind: Kind.FRAGMENT_SPREAD,\n      name: parseFragmentName(lexer),\n      directives: parseDirectives(lexer, false),\n      loc: loc(lexer, start)\n    };\n  }\n\n  var typeCondition;\n\n  if (lexer.token.value === 'on') {\n    lexer.advance();\n    typeCondition = parseNamedType(lexer);\n  }\n\n  return {\n    kind: Kind.INLINE_FRAGMENT,\n    typeCondition: typeCondition,\n    directives: parseDirectives(lexer, false),\n    selectionSet: parseSelectionSet(lexer),\n    loc: loc(lexer, start)\n  };\n}\n/**\n * FragmentDefinition :\n *   - fragment FragmentName on TypeCondition Directives? SelectionSet\n *\n * TypeCondition : NamedType\n */\n\n\nfunction parseFragmentDefinition(lexer) {\n  var start = lexer.token;\n  expectKeyword(lexer, 'fragment'); // Experimental support for defining variables within fragments changes\n  // the grammar of FragmentDefinition:\n  //   - fragment FragmentName VariableDefinitions? on TypeCondition Directives? SelectionSet\n\n  if (lexer.options.experimentalFragmentVariables) {\n    return {\n      kind: Kind.FRAGMENT_DEFINITION,\n      name: parseFragmentName(lexer),\n      variableDefinitions: parseVariableDefinitions(lexer),\n      typeCondition: (expectKeyword(lexer, 'on'), parseNamedType(lexer)),\n      directives: parseDirectives(lexer, false),\n      selectionSet: parseSelectionSet(lexer),\n      loc: loc(lexer, start)\n    };\n  }\n\n  return {\n    kind: Kind.FRAGMENT_DEFINITION,\n    name: parseFragmentName(lexer),\n    typeCondition: (expectKeyword(lexer, 'on'), parseNamedType(lexer)),\n    directives: parseDirectives(lexer, false),\n    selectionSet: parseSelectionSet(lexer),\n    loc: loc(lexer, start)\n  };\n}\n/**\n * FragmentName : Name but not `on`\n */\n\n\nfunction parseFragmentName(lexer) {\n  if (lexer.token.value === 'on') {\n    throw unexpected(lexer);\n  }\n\n  return parseName(lexer);\n} // Implements the parsing rules in the Values section.\n\n/**\n * Value[Const] :\n *   - [~Const] Variable\n *   - IntValue\n *   - FloatValue\n *   - StringValue\n *   - BooleanValue\n *   - NullValue\n *   - EnumValue\n *   - ListValue[?Const]\n *   - ObjectValue[?Const]\n *\n * BooleanValue : one of `true` `false`\n *\n * NullValue : `null`\n *\n * EnumValue : Name but not `true`, `false` or `null`\n */\n\n\nfunction parseValueLiteral(lexer, isConst) {\n  var token = lexer.token;\n\n  switch (token.kind) {\n    case TokenKind.BRACKET_L:\n      return parseList(lexer, isConst);\n\n    case TokenKind.BRACE_L:\n      return parseObject(lexer, isConst);\n\n    case TokenKind.INT:\n      lexer.advance();\n      return {\n        kind: Kind.INT,\n        value: token.value,\n        loc: loc(lexer, token)\n      };\n\n    case TokenKind.FLOAT:\n      lexer.advance();\n      return {\n        kind: Kind.FLOAT,\n        value: token.value,\n        loc: loc(lexer, token)\n      };\n\n    case TokenKind.STRING:\n    case TokenKind.BLOCK_STRING:\n      return parseStringLiteral(lexer);\n\n    case TokenKind.NAME:\n      if (token.value === 'true' || token.value === 'false') {\n        lexer.advance();\n        return {\n          kind: Kind.BOOLEAN,\n          value: token.value === 'true',\n          loc: loc(lexer, token)\n        };\n      } else if (token.value === 'null') {\n        lexer.advance();\n        return {\n          kind: Kind.NULL,\n          loc: loc(lexer, token)\n        };\n      }\n\n      lexer.advance();\n      return {\n        kind: Kind.ENUM,\n        value: token.value,\n        loc: loc(lexer, token)\n      };\n\n    case TokenKind.DOLLAR:\n      if (!isConst) {\n        return parseVariable(lexer);\n      }\n\n      break;\n  }\n\n  throw unexpected(lexer);\n}\n\nfunction parseStringLiteral(lexer) {\n  var token = lexer.token;\n  lexer.advance();\n  return {\n    kind: Kind.STRING,\n    value: token.value,\n    block: token.kind === TokenKind.BLOCK_STRING,\n    loc: loc(lexer, token)\n  };\n}\n\nexport function parseConstValue(lexer) {\n  return parseValueLiteral(lexer, true);\n}\n\nfunction parseValueValue(lexer) {\n  return parseValueLiteral(lexer, false);\n}\n/**\n * ListValue[Const] :\n *   - [ ]\n *   - [ Value[?Const]+ ]\n */\n\n\nfunction parseList(lexer, isConst) {\n  var start = lexer.token;\n  var item = isConst ? parseConstValue : parseValueValue;\n  return {\n    kind: Kind.LIST,\n    values: any(lexer, TokenKind.BRACKET_L, item, TokenKind.BRACKET_R),\n    loc: loc(lexer, start)\n  };\n}\n/**\n * ObjectValue[Const] :\n *   - { }\n *   - { ObjectField[?Const]+ }\n */\n\n\nfunction parseObject(lexer, isConst) {\n  var start = lexer.token;\n  expect(lexer, TokenKind.BRACE_L);\n  var fields = [];\n\n  while (!skip(lexer, TokenKind.BRACE_R)) {\n    fields.push(parseObjectField(lexer, isConst));\n  }\n\n  return {\n    kind: Kind.OBJECT,\n    fields: fields,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * ObjectField[Const] : Name : Value[?Const]\n */\n\n\nfunction parseObjectField(lexer, isConst) {\n  var start = lexer.token;\n  return {\n    kind: Kind.OBJECT_FIELD,\n    name: parseName(lexer),\n    value: (expect(lexer, TokenKind.COLON), parseValueLiteral(lexer, isConst)),\n    loc: loc(lexer, start)\n  };\n} // Implements the parsing rules in the Directives section.\n\n/**\n * Directives[Const] : Directive[?Const]+\n */\n\n\nfunction parseDirectives(lexer, isConst) {\n  var directives = [];\n\n  while (peek(lexer, TokenKind.AT)) {\n    directives.push(parseDirective(lexer, isConst));\n  }\n\n  return directives;\n}\n/**\n * Directive[Const] : @ Name Arguments[?Const]?\n */\n\n\nfunction parseDirective(lexer, isConst) {\n  var start = lexer.token;\n  expect(lexer, TokenKind.AT);\n  return {\n    kind: Kind.DIRECTIVE,\n    name: parseName(lexer),\n    arguments: parseArguments(lexer, isConst),\n    loc: loc(lexer, start)\n  };\n} // Implements the parsing rules in the Types section.\n\n/**\n * Type :\n *   - NamedType\n *   - ListType\n *   - NonNullType\n */\n\n\nexport function parseTypeReference(lexer) {\n  var start = lexer.token;\n  var type;\n\n  if (skip(lexer, TokenKind.BRACKET_L)) {\n    type = parseTypeReference(lexer);\n    expect(lexer, TokenKind.BRACKET_R);\n    type = {\n      kind: Kind.LIST_TYPE,\n      type: type,\n      loc: loc(lexer, start)\n    };\n  } else {\n    type = parseNamedType(lexer);\n  }\n\n  if (skip(lexer, TokenKind.BANG)) {\n    return {\n      kind: Kind.NON_NULL_TYPE,\n      type: type,\n      loc: loc(lexer, start)\n    };\n  }\n\n  return type;\n}\n/**\n * NamedType : Name\n */\n\nexport function parseNamedType(lexer) {\n  var start = lexer.token;\n  return {\n    kind: Kind.NAMED_TYPE,\n    name: parseName(lexer),\n    loc: loc(lexer, start)\n  };\n} // Implements the parsing rules in the Type Definition section.\n\n/**\n * TypeSystemDefinition :\n *   - SchemaDefinition\n *   - TypeDefinition\n *   - DirectiveDefinition\n *\n * TypeDefinition :\n *   - ScalarTypeDefinition\n *   - ObjectTypeDefinition\n *   - InterfaceTypeDefinition\n *   - UnionTypeDefinition\n *   - EnumTypeDefinition\n *   - InputObjectTypeDefinition\n */\n\nfunction parseTypeSystemDefinition(lexer) {\n  // Many definitions begin with a description and require a lookahead.\n  var keywordToken = peekDescription(lexer) ? lexer.lookahead() : lexer.token;\n\n  if (keywordToken.kind === TokenKind.NAME) {\n    switch (keywordToken.value) {\n      case 'schema':\n        return parseSchemaDefinition(lexer);\n\n      case 'scalar':\n        return parseScalarTypeDefinition(lexer);\n\n      case 'type':\n        return parseObjectTypeDefinition(lexer);\n\n      case 'interface':\n        return parseInterfaceTypeDefinition(lexer);\n\n      case 'union':\n        return parseUnionTypeDefinition(lexer);\n\n      case 'enum':\n        return parseEnumTypeDefinition(lexer);\n\n      case 'input':\n        return parseInputObjectTypeDefinition(lexer);\n\n      case 'directive':\n        return parseDirectiveDefinition(lexer);\n    }\n  }\n\n  throw unexpected(lexer, keywordToken);\n}\n\nfunction peekDescription(lexer) {\n  return peek(lexer, TokenKind.STRING) || peek(lexer, TokenKind.BLOCK_STRING);\n}\n/**\n * Description : StringValue\n */\n\n\nfunction parseDescription(lexer) {\n  if (peekDescription(lexer)) {\n    return parseStringLiteral(lexer);\n  }\n}\n/**\n * SchemaDefinition : schema Directives[Const]? { OperationTypeDefinition+ }\n */\n\n\nfunction parseSchemaDefinition(lexer) {\n  var start = lexer.token;\n  expectKeyword(lexer, 'schema');\n  var directives = parseDirectives(lexer, true);\n  var operationTypes = many(lexer, TokenKind.BRACE_L, parseOperationTypeDefinition, TokenKind.BRACE_R);\n  return {\n    kind: Kind.SCHEMA_DEFINITION,\n    directives: directives,\n    operationTypes: operationTypes,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * OperationTypeDefinition : OperationType : NamedType\n */\n\n\nfunction parseOperationTypeDefinition(lexer) {\n  var start = lexer.token;\n  var operation = parseOperationType(lexer);\n  expect(lexer, TokenKind.COLON);\n  var type = parseNamedType(lexer);\n  return {\n    kind: Kind.OPERATION_TYPE_DEFINITION,\n    operation: operation,\n    type: type,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * ScalarTypeDefinition : Description? scalar Name Directives[Const]?\n */\n\n\nfunction parseScalarTypeDefinition(lexer) {\n  var start = lexer.token;\n  var description = parseDescription(lexer);\n  expectKeyword(lexer, 'scalar');\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n  return {\n    kind: Kind.SCALAR_TYPE_DEFINITION,\n    description: description,\n    name: name,\n    directives: directives,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * ObjectTypeDefinition :\n *   Description?\n *   type Name ImplementsInterfaces? Directives[Const]? FieldsDefinition?\n */\n\n\nfunction parseObjectTypeDefinition(lexer) {\n  var start = lexer.token;\n  var description = parseDescription(lexer);\n  expectKeyword(lexer, 'type');\n  var name = parseName(lexer);\n  var interfaces = parseImplementsInterfaces(lexer);\n  var directives = parseDirectives(lexer, true);\n  var fields = parseFieldsDefinition(lexer);\n  return {\n    kind: Kind.OBJECT_TYPE_DEFINITION,\n    description: description,\n    name: name,\n    interfaces: interfaces,\n    directives: directives,\n    fields: fields,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * ImplementsInterfaces :\n *   - implements `&`? NamedType\n *   - ImplementsInterfaces & NamedType\n */\n\n\nfunction parseImplementsInterfaces(lexer) {\n  var types = [];\n\n  if (lexer.token.value === 'implements') {\n    lexer.advance(); // Optional leading ampersand\n\n    skip(lexer, TokenKind.AMP);\n\n    do {\n      types.push(parseNamedType(lexer));\n    } while (skip(lexer, TokenKind.AMP) || // Legacy support for the SDL?\n    lexer.options.allowLegacySDLImplementsInterfaces && peek(lexer, TokenKind.NAME));\n  }\n\n  return types;\n}\n/**\n * FieldsDefinition : { FieldDefinition+ }\n */\n\n\nfunction parseFieldsDefinition(lexer) {\n  // Legacy support for the SDL?\n  if (lexer.options.allowLegacySDLEmptyFields && peek(lexer, TokenKind.BRACE_L) && lexer.lookahead().kind === TokenKind.BRACE_R) {\n    lexer.advance();\n    lexer.advance();\n    return [];\n  }\n\n  return peek(lexer, TokenKind.BRACE_L) ? many(lexer, TokenKind.BRACE_L, parseFieldDefinition, TokenKind.BRACE_R) : [];\n}\n/**\n * FieldDefinition :\n *   - Description? Name ArgumentsDefinition? : Type Directives[Const]?\n */\n\n\nfunction parseFieldDefinition(lexer) {\n  var start = lexer.token;\n  var description = parseDescription(lexer);\n  var name = parseName(lexer);\n  var args = parseArgumentDefs(lexer);\n  expect(lexer, TokenKind.COLON);\n  var type = parseTypeReference(lexer);\n  var directives = parseDirectives(lexer, true);\n  return {\n    kind: Kind.FIELD_DEFINITION,\n    description: description,\n    name: name,\n    arguments: args,\n    type: type,\n    directives: directives,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * ArgumentsDefinition : ( InputValueDefinition+ )\n */\n\n\nfunction parseArgumentDefs(lexer) {\n  if (!peek(lexer, TokenKind.PAREN_L)) {\n    return [];\n  }\n\n  return many(lexer, TokenKind.PAREN_L, parseInputValueDef, TokenKind.PAREN_R);\n}\n/**\n * InputValueDefinition :\n *   - Description? Name : Type DefaultValue? Directives[Const]?\n */\n\n\nfunction parseInputValueDef(lexer) {\n  var start = lexer.token;\n  var description = parseDescription(lexer);\n  var name = parseName(lexer);\n  expect(lexer, TokenKind.COLON);\n  var type = parseTypeReference(lexer);\n  var defaultValue;\n\n  if (skip(lexer, TokenKind.EQUALS)) {\n    defaultValue = parseConstValue(lexer);\n  }\n\n  var directives = parseDirectives(lexer, true);\n  return {\n    kind: Kind.INPUT_VALUE_DEFINITION,\n    description: description,\n    name: name,\n    type: type,\n    defaultValue: defaultValue,\n    directives: directives,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * InterfaceTypeDefinition :\n *   - Description? interface Name Directives[Const]? FieldsDefinition?\n */\n\n\nfunction parseInterfaceTypeDefinition(lexer) {\n  var start = lexer.token;\n  var description = parseDescription(lexer);\n  expectKeyword(lexer, 'interface');\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n  var fields = parseFieldsDefinition(lexer);\n  return {\n    kind: Kind.INTERFACE_TYPE_DEFINITION,\n    description: description,\n    name: name,\n    directives: directives,\n    fields: fields,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * UnionTypeDefinition :\n *   - Description? union Name Directives[Const]? UnionMemberTypes?\n */\n\n\nfunction parseUnionTypeDefinition(lexer) {\n  var start = lexer.token;\n  var description = parseDescription(lexer);\n  expectKeyword(lexer, 'union');\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n  var types = parseUnionMemberTypes(lexer);\n  return {\n    kind: Kind.UNION_TYPE_DEFINITION,\n    description: description,\n    name: name,\n    directives: directives,\n    types: types,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * UnionMemberTypes :\n *   - = `|`? NamedType\n *   - UnionMemberTypes | NamedType\n */\n\n\nfunction parseUnionMemberTypes(lexer) {\n  var types = [];\n\n  if (skip(lexer, TokenKind.EQUALS)) {\n    // Optional leading pipe\n    skip(lexer, TokenKind.PIPE);\n\n    do {\n      types.push(parseNamedType(lexer));\n    } while (skip(lexer, TokenKind.PIPE));\n  }\n\n  return types;\n}\n/**\n * EnumTypeDefinition :\n *   - Description? enum Name Directives[Const]? EnumValuesDefinition?\n */\n\n\nfunction parseEnumTypeDefinition(lexer) {\n  var start = lexer.token;\n  var description = parseDescription(lexer);\n  expectKeyword(lexer, 'enum');\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n  var values = parseEnumValuesDefinition(lexer);\n  return {\n    kind: Kind.ENUM_TYPE_DEFINITION,\n    description: description,\n    name: name,\n    directives: directives,\n    values: values,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * EnumValuesDefinition : { EnumValueDefinition+ }\n */\n\n\nfunction parseEnumValuesDefinition(lexer) {\n  return peek(lexer, TokenKind.BRACE_L) ? many(lexer, TokenKind.BRACE_L, parseEnumValueDefinition, TokenKind.BRACE_R) : [];\n}\n/**\n * EnumValueDefinition : Description? EnumValue Directives[Const]?\n *\n * EnumValue : Name\n */\n\n\nfunction parseEnumValueDefinition(lexer) {\n  var start = lexer.token;\n  var description = parseDescription(lexer);\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n  return {\n    kind: Kind.ENUM_VALUE_DEFINITION,\n    description: description,\n    name: name,\n    directives: directives,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * InputObjectTypeDefinition :\n *   - Description? input Name Directives[Const]? InputFieldsDefinition?\n */\n\n\nfunction parseInputObjectTypeDefinition(lexer) {\n  var start = lexer.token;\n  var description = parseDescription(lexer);\n  expectKeyword(lexer, 'input');\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n  var fields = parseInputFieldsDefinition(lexer);\n  return {\n    kind: Kind.INPUT_OBJECT_TYPE_DEFINITION,\n    description: description,\n    name: name,\n    directives: directives,\n    fields: fields,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * InputFieldsDefinition : { InputValueDefinition+ }\n */\n\n\nfunction parseInputFieldsDefinition(lexer) {\n  return peek(lexer, TokenKind.BRACE_L) ? many(lexer, TokenKind.BRACE_L, parseInputValueDef, TokenKind.BRACE_R) : [];\n}\n/**\n * TypeSystemExtension :\n *   - SchemaExtension\n *   - TypeExtension\n *\n * TypeExtension :\n *   - ScalarTypeExtension\n *   - ObjectTypeExtension\n *   - InterfaceTypeExtension\n *   - UnionTypeExtension\n *   - EnumTypeExtension\n *   - InputObjectTypeDefinition\n */\n\n\nfunction parseTypeSystemExtension(lexer) {\n  var keywordToken = lexer.lookahead();\n\n  if (keywordToken.kind === TokenKind.NAME) {\n    switch (keywordToken.value) {\n      case 'schema':\n        return parseSchemaExtension(lexer);\n\n      case 'scalar':\n        return parseScalarTypeExtension(lexer);\n\n      case 'type':\n        return parseObjectTypeExtension(lexer);\n\n      case 'interface':\n        return parseInterfaceTypeExtension(lexer);\n\n      case 'union':\n        return parseUnionTypeExtension(lexer);\n\n      case 'enum':\n        return parseEnumTypeExtension(lexer);\n\n      case 'input':\n        return parseInputObjectTypeExtension(lexer);\n    }\n  }\n\n  throw unexpected(lexer, keywordToken);\n}\n/**\n * SchemaExtension :\n *  - extend schema Directives[Const]? { OperationTypeDefinition+ }\n *  - extend schema Directives[Const]\n */\n\n\nfunction parseSchemaExtension(lexer) {\n  var start = lexer.token;\n  expectKeyword(lexer, 'extend');\n  expectKeyword(lexer, 'schema');\n  var directives = parseDirectives(lexer, true);\n  var operationTypes = peek(lexer, TokenKind.BRACE_L) ? many(lexer, TokenKind.BRACE_L, parseOperationTypeDefinition, TokenKind.BRACE_R) : [];\n\n  if (directives.length === 0 && operationTypes.length === 0) {\n    throw unexpected(lexer);\n  }\n\n  return {\n    kind: Kind.SCHEMA_EXTENSION,\n    directives: directives,\n    operationTypes: operationTypes,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * ScalarTypeExtension :\n *   - extend scalar Name Directives[Const]\n */\n\n\nfunction parseScalarTypeExtension(lexer) {\n  var start = lexer.token;\n  expectKeyword(lexer, 'extend');\n  expectKeyword(lexer, 'scalar');\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n\n  if (directives.length === 0) {\n    throw unexpected(lexer);\n  }\n\n  return {\n    kind: Kind.SCALAR_TYPE_EXTENSION,\n    name: name,\n    directives: directives,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * ObjectTypeExtension :\n *  - extend type Name ImplementsInterfaces? Directives[Const]? FieldsDefinition\n *  - extend type Name ImplementsInterfaces? Directives[Const]\n *  - extend type Name ImplementsInterfaces\n */\n\n\nfunction parseObjectTypeExtension(lexer) {\n  var start = lexer.token;\n  expectKeyword(lexer, 'extend');\n  expectKeyword(lexer, 'type');\n  var name = parseName(lexer);\n  var interfaces = parseImplementsInterfaces(lexer);\n  var directives = parseDirectives(lexer, true);\n  var fields = parseFieldsDefinition(lexer);\n\n  if (interfaces.length === 0 && directives.length === 0 && fields.length === 0) {\n    throw unexpected(lexer);\n  }\n\n  return {\n    kind: Kind.OBJECT_TYPE_EXTENSION,\n    name: name,\n    interfaces: interfaces,\n    directives: directives,\n    fields: fields,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * InterfaceTypeExtension :\n *   - extend interface Name Directives[Const]? FieldsDefinition\n *   - extend interface Name Directives[Const]\n */\n\n\nfunction parseInterfaceTypeExtension(lexer) {\n  var start = lexer.token;\n  expectKeyword(lexer, 'extend');\n  expectKeyword(lexer, 'interface');\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n  var fields = parseFieldsDefinition(lexer);\n\n  if (directives.length === 0 && fields.length === 0) {\n    throw unexpected(lexer);\n  }\n\n  return {\n    kind: Kind.INTERFACE_TYPE_EXTENSION,\n    name: name,\n    directives: directives,\n    fields: fields,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * UnionTypeExtension :\n *   - extend union Name Directives[Const]? UnionMemberTypes\n *   - extend union Name Directives[Const]\n */\n\n\nfunction parseUnionTypeExtension(lexer) {\n  var start = lexer.token;\n  expectKeyword(lexer, 'extend');\n  expectKeyword(lexer, 'union');\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n  var types = parseUnionMemberTypes(lexer);\n\n  if (directives.length === 0 && types.length === 0) {\n    throw unexpected(lexer);\n  }\n\n  return {\n    kind: Kind.UNION_TYPE_EXTENSION,\n    name: name,\n    directives: directives,\n    types: types,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * EnumTypeExtension :\n *   - extend enum Name Directives[Const]? EnumValuesDefinition\n *   - extend enum Name Directives[Const]\n */\n\n\nfunction parseEnumTypeExtension(lexer) {\n  var start = lexer.token;\n  expectKeyword(lexer, 'extend');\n  expectKeyword(lexer, 'enum');\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n  var values = parseEnumValuesDefinition(lexer);\n\n  if (directives.length === 0 && values.length === 0) {\n    throw unexpected(lexer);\n  }\n\n  return {\n    kind: Kind.ENUM_TYPE_EXTENSION,\n    name: name,\n    directives: directives,\n    values: values,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * InputObjectTypeExtension :\n *   - extend input Name Directives[Const]? InputFieldsDefinition\n *   - extend input Name Directives[Const]\n */\n\n\nfunction parseInputObjectTypeExtension(lexer) {\n  var start = lexer.token;\n  expectKeyword(lexer, 'extend');\n  expectKeyword(lexer, 'input');\n  var name = parseName(lexer);\n  var directives = parseDirectives(lexer, true);\n  var fields = parseInputFieldsDefinition(lexer);\n\n  if (directives.length === 0 && fields.length === 0) {\n    throw unexpected(lexer);\n  }\n\n  return {\n    kind: Kind.INPUT_OBJECT_TYPE_EXTENSION,\n    name: name,\n    directives: directives,\n    fields: fields,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * DirectiveDefinition :\n *   - Description? directive @ Name ArgumentsDefinition? on DirectiveLocations\n */\n\n\nfunction parseDirectiveDefinition(lexer) {\n  var start = lexer.token;\n  var description = parseDescription(lexer);\n  expectKeyword(lexer, 'directive');\n  expect(lexer, TokenKind.AT);\n  var name = parseName(lexer);\n  var args = parseArgumentDefs(lexer);\n  expectKeyword(lexer, 'on');\n  var locations = parseDirectiveLocations(lexer);\n  return {\n    kind: Kind.DIRECTIVE_DEFINITION,\n    description: description,\n    name: name,\n    arguments: args,\n    locations: locations,\n    loc: loc(lexer, start)\n  };\n}\n/**\n * DirectiveLocations :\n *   - `|`? DirectiveLocation\n *   - DirectiveLocations | DirectiveLocation\n */\n\n\nfunction parseDirectiveLocations(lexer) {\n  // Optional leading pipe\n  skip(lexer, TokenKind.PIPE);\n  var locations = [];\n\n  do {\n    locations.push(parseDirectiveLocation(lexer));\n  } while (skip(lexer, TokenKind.PIPE));\n\n  return locations;\n}\n/*\n * DirectiveLocation :\n *   - ExecutableDirectiveLocation\n *   - TypeSystemDirectiveLocation\n *\n * ExecutableDirectiveLocation : one of\n *   `QUERY`\n *   `MUTATION`\n *   `SUBSCRIPTION`\n *   `FIELD`\n *   `FRAGMENT_DEFINITION`\n *   `FRAGMENT_SPREAD`\n *   `INLINE_FRAGMENT`\n *\n * TypeSystemDirectiveLocation : one of\n *   `SCHEMA`\n *   `SCALAR`\n *   `OBJECT`\n *   `FIELD_DEFINITION`\n *   `ARGUMENT_DEFINITION`\n *   `INTERFACE`\n *   `UNION`\n *   `ENUM`\n *   `ENUM_VALUE`\n *   `INPUT_OBJECT`\n *   `INPUT_FIELD_DEFINITION`\n */\n\n\nfunction parseDirectiveLocation(lexer) {\n  var start = lexer.token;\n  var name = parseName(lexer);\n\n  if (DirectiveLocation.hasOwnProperty(name.value)) {\n    return name;\n  }\n\n  throw unexpected(lexer, start);\n} // Core parsing utility functions\n\n/**\n * Returns a location object, used to identify the place in\n * the source that created a given parsed object.\n */\n\n\nfunction loc(lexer, startToken) {\n  if (!lexer.options.noLocation) {\n    return new Loc(startToken, lexer.lastToken, lexer.source);\n  }\n}\n\nfunction Loc(startToken, endToken, source) {\n  this.start = startToken.start;\n  this.end = endToken.end;\n  this.startToken = startToken;\n  this.endToken = endToken;\n  this.source = source;\n} // Print a simplified form when appearing in JSON/util.inspect.\n\n\nLoc.prototype.toJSON = Loc.prototype.inspect = function toJSON() {\n  return {\n    start: this.start,\n    end: this.end\n  };\n};\n/**\n * Determines if the next token is of a given kind\n */\n\n\nfunction peek(lexer, kind) {\n  return lexer.token.kind === kind;\n}\n/**\n * If the next token is of the given kind, return true after advancing\n * the lexer. Otherwise, do not change the parser state and return false.\n */\n\n\nfunction skip(lexer, kind) {\n  var match = lexer.token.kind === kind;\n\n  if (match) {\n    lexer.advance();\n  }\n\n  return match;\n}\n/**\n * If the next token is of the given kind, return that token after advancing\n * the lexer. Otherwise, do not change the parser state and throw an error.\n */\n\n\nfunction expect(lexer, kind) {\n  var token = lexer.token;\n\n  if (token.kind === kind) {\n    lexer.advance();\n    return token;\n  }\n\n  throw syntaxError(lexer.source, token.start, \"Expected \".concat(kind, \", found \").concat(getTokenDesc(token)));\n}\n/**\n * If the next token is a keyword with the given value, return that token after\n * advancing the lexer. Otherwise, do not change the parser state and return\n * false.\n */\n\n\nfunction expectKeyword(lexer, value) {\n  var token = lexer.token;\n\n  if (token.kind === TokenKind.NAME && token.value === value) {\n    lexer.advance();\n    return token;\n  }\n\n  throw syntaxError(lexer.source, token.start, \"Expected \\\"\".concat(value, \"\\\", found \").concat(getTokenDesc(token)));\n}\n/**\n * Helper function for creating an error when an unexpected lexed token\n * is encountered.\n */\n\n\nfunction unexpected(lexer, atToken) {\n  var token = atToken || lexer.token;\n  return syntaxError(lexer.source, token.start, \"Unexpected \".concat(getTokenDesc(token)));\n}\n/**\n * Returns a possibly empty list of parse nodes, determined by\n * the parseFn. This list begins with a lex token of openKind\n * and ends with a lex token of closeKind. Advances the parser\n * to the next lex token after the closing token.\n */\n\n\nfunction any(lexer, openKind, parseFn, closeKind) {\n  expect(lexer, openKind);\n  var nodes = [];\n\n  while (!skip(lexer, closeKind)) {\n    nodes.push(parseFn(lexer));\n  }\n\n  return nodes;\n}\n/**\n * Returns a non-empty list of parse nodes, determined by\n * the parseFn. This list begins with a lex token of openKind\n * and ends with a lex token of closeKind. Advances the parser\n * to the next lex token after the closing token.\n */\n\n\nfunction many(lexer, openKind, parseFn, closeKind) {\n  expect(lexer, openKind);\n  var nodes = [parseFn(lexer)];\n\n  while (!skip(lexer, closeKind)) {\n    nodes.push(parseFn(lexer));\n  }\n\n  return nodes;\n}","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nexport * from './Auth';\n//# sourceMappingURL=index.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ConsoleLogger as Logger, Signer, Platform, Credentials, } from '@aws-amplify/core';\nimport axios from 'axios';\nvar logger = new Logger('RestClient'), urlLib = require('url');\n/**\n* HTTP Client for REST requests. Send and receive JSON data.\n* Sign request with AWS credentials if available\n* Usage:\n<pre>\nconst restClient = new RestClient();\nrestClient.get('...')\n    .then(function(data) {\n        console.log(data);\n    })\n    .catch(err => console.log(err));\n</pre>\n*/\nvar RestClient = /** @class */ (function () {\n    /**\n     * @param {RestClientOptions} [options] - Instance options\n     */\n    function RestClient(options) {\n        this._region = 'us-east-1'; // this will be updated by endpoint function\n        this._service = 'execute-api'; // this can be updated by endpoint function\n        this._custom_header = undefined; // this can be updated by endpoint function\n        var endpoints = options.endpoints;\n        this._options = options;\n        logger.debug('API Options', this._options);\n    }\n    /**\n    * Update AWS credentials\n    * @param {AWSCredentials} credentials - AWS credentials\n    *\n    updateCredentials(credentials: AWSCredentials) {\n        this.options.credentials = credentials;\n    }\n*/\n    /**\n     * Basic HTTP request. Customizable\n     * @param {string} url - Full request URL\n     * @param {string} method - Request HTTP method\n     * @param {json} [init] - Request extra params\n     * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n     */\n    RestClient.prototype.ajax = function (url, method, init) {\n        return __awaiter(this, void 0, void 0, function () {\n            var parsed_url, params, libraryHeaders, userAgent, initParams, isAllResponse, custom_header, _a, _b, search, parsedUrl;\n            var _this = this;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        logger.debug(method + ' ' + url);\n                        parsed_url = this._parseUrl(url);\n                        params = {\n                            method: method,\n                            url: url,\n                            host: parsed_url.host,\n                            path: parsed_url.path,\n                            headers: {},\n                            data: null,\n                            responseType: 'json',\n                            timeout: 0,\n                        };\n                        libraryHeaders = {};\n                        if (Platform.isReactNative) {\n                            userAgent = Platform.userAgent || 'aws-amplify/0.1.x';\n                            libraryHeaders = {\n                                'User-Agent': userAgent,\n                            };\n                        }\n                        initParams = Object.assign({}, init);\n                        isAllResponse = initParams.response;\n                        if (initParams.body) {\n                            libraryHeaders['Content-Type'] = 'application/json; charset=UTF-8';\n                            params.data = JSON.stringify(initParams.body);\n                        }\n                        if (initParams.responseType) {\n                            params.responseType = initParams.responseType;\n                        }\n                        if (initParams.withCredentials) {\n                            params['withCredentials'] = initParams.withCredentials;\n                        }\n                        if (initParams.timeout) {\n                            params.timeout = initParams.timeout;\n                        }\n                        params['signerServiceInfo'] = initParams.signerServiceInfo;\n                        if (!this._custom_header) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this._custom_header()];\n                    case 1:\n                        _a = _c.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        _a = undefined;\n                        _c.label = 3;\n                    case 3:\n                        custom_header = _a;\n                        params.headers = __assign(__assign(__assign({}, libraryHeaders), custom_header), initParams.headers);\n                        _b = urlLib.parse(url, true, true), search = _b.search, parsedUrl = __rest(_b, [\"search\"]);\n                        params.url = urlLib.format(__assign(__assign({}, parsedUrl), { query: __assign(__assign({}, parsedUrl.query), (initParams.queryStringParameters || {})) }));\n                        // Do not sign the request if client has added 'Authorization' header,\n                        // which means custom authorizer.\n                        if (typeof params.headers['Authorization'] !== 'undefined') {\n                            params.headers = Object.keys(params.headers).reduce(function (acc, k) {\n                                if (params.headers[k]) {\n                                    acc[k] = params.headers[k];\n                                }\n                                return acc;\n                                // tslint:disable-next-line:align\n                            }, {});\n                            return [2 /*return*/, this._request(params, isAllResponse)];\n                        }\n                        // Signing the request in case there credentials are available\n                        return [2 /*return*/, Credentials.get().then(function (credentials) { return _this._signed(__assign({}, params), credentials, isAllResponse); }, function (err) {\n                                logger.debug('No credentials available, the request will be unsigned');\n                                return _this._request(params, isAllResponse);\n                            })];\n                }\n            });\n        });\n    };\n    /**\n     * GET HTTP request\n     * @param {string} url - Full request URL\n     * @param {JSON} init - Request extra params\n     * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n     */\n    RestClient.prototype.get = function (url, init) {\n        return this.ajax(url, 'GET', init);\n    };\n    /**\n     * PUT HTTP request\n     * @param {string} url - Full request URL\n     * @param {json} init - Request extra params\n     * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n     */\n    RestClient.prototype.put = function (url, init) {\n        return this.ajax(url, 'PUT', init);\n    };\n    /**\n     * PATCH HTTP request\n     * @param {string} url - Full request URL\n     * @param {json} init - Request extra params\n     * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n     */\n    RestClient.prototype.patch = function (url, init) {\n        return this.ajax(url, 'PATCH', init);\n    };\n    /**\n     * POST HTTP request\n     * @param {string} url - Full request URL\n     * @param {json} init - Request extra params\n     * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n     */\n    RestClient.prototype.post = function (url, init) {\n        return this.ajax(url, 'POST', init);\n    };\n    /**\n     * DELETE HTTP request\n     * @param {string} url - Full request URL\n     * @param {json} init - Request extra params\n     * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n     */\n    RestClient.prototype.del = function (url, init) {\n        return this.ajax(url, 'DELETE', init);\n    };\n    /**\n     * HEAD HTTP request\n     * @param {string} url - Full request URL\n     * @param {json} init - Request extra params\n     * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n     */\n    RestClient.prototype.head = function (url, init) {\n        return this.ajax(url, 'HEAD', init);\n    };\n    /**\n     * Getting endpoint for API\n     * @param {string} apiName - The name of the api\n     * @return {string} - The endpoint of the api\n     */\n    RestClient.prototype.endpoint = function (apiName) {\n        var _this = this;\n        var cloud_logic_array = this._options.endpoints;\n        var response = '';\n        if (!Array.isArray(cloud_logic_array)) {\n            return response;\n        }\n        cloud_logic_array.forEach(function (v) {\n            if (v.name === apiName) {\n                response = v.endpoint;\n                if (typeof v.region === 'string') {\n                    _this._region = v.region;\n                }\n                else if (typeof _this._options.region === 'string') {\n                    _this._region = _this._options.region;\n                }\n                if (typeof v.service === 'string') {\n                    _this._service = v.service || 'execute-api';\n                }\n                else {\n                    _this._service = 'execute-api';\n                }\n                if (typeof v.custom_header === 'function') {\n                    _this._custom_header = v.custom_header;\n                }\n                else {\n                    _this._custom_header = undefined;\n                }\n            }\n        });\n        return response;\n    };\n    /** private methods **/\n    RestClient.prototype._signed = function (params, credentials, isAllResponse) {\n        var signerServiceInfoParams = params.signerServiceInfo, otherParams = __rest(params, [\"signerServiceInfo\"]);\n        var endpoint_region = this._region || this._options.region;\n        var endpoint_service = this._service || this._options.service;\n        var creds = {\n            secret_key: credentials.secretAccessKey,\n            access_key: credentials.accessKeyId,\n            session_token: credentials.sessionToken,\n        };\n        var endpointInfo = {\n            region: endpoint_region,\n            service: endpoint_service,\n        };\n        var signerServiceInfo = Object.assign(endpointInfo, signerServiceInfoParams);\n        var signed_params = Signer.sign(otherParams, creds, signerServiceInfo);\n        if (signed_params.data) {\n            signed_params.body = signed_params.data;\n        }\n        logger.debug('Signed Request: ', signed_params);\n        delete signed_params.headers['host'];\n        return axios(signed_params)\n            .then(function (response) { return (isAllResponse ? response : response.data); })\n            .catch(function (error) {\n            logger.debug(error);\n            throw error;\n        });\n    };\n    RestClient.prototype._request = function (params, isAllResponse) {\n        if (isAllResponse === void 0) { isAllResponse = false; }\n        return axios(params)\n            .then(function (response) { return (isAllResponse ? response : response.data); })\n            .catch(function (error) {\n            logger.debug(error);\n            throw error;\n        });\n    };\n    RestClient.prototype._parseUrl = function (url) {\n        var parts = url.split('/');\n        return {\n            host: parts[2],\n            path: '/' + parts.slice(3).join('/'),\n        };\n    };\n    return RestClient;\n}());\nexport { RestClient };\n//# sourceMappingURL=RestClient.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\n/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { GraphQLError } from 'graphql';\nimport { print } from 'graphql/language/printer';\nimport { parse } from 'graphql/language/parser';\nimport { RestClient as RestClass } from './RestClient';\nimport Amplify, { ConsoleLogger as Logger, Credentials, Constants, INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER, } from '@aws-amplify/core';\nimport Auth from '@aws-amplify/auth';\nimport Cache from '@aws-amplify/cache';\nvar USER_AGENT_HEADER = 'x-amz-user-agent';\nvar logger = new Logger('API');\nexport var graphqlOperation = function (query, variables) {\n    if (variables === void 0) { variables = {}; }\n    return ({\n        query: query,\n        variables: variables,\n    });\n};\n/**\n * Export Cloud Logic APIs\n */\nvar APIClass = /** @class */ (function () {\n    /**\n     * Initialize Storage with AWS configuration\n     * @param {Object} options - Configuration object for storage\n     */\n    function APIClass(options) {\n        this._api = null;\n        this._options = options;\n        logger.debug('API Options', this._options);\n    }\n    APIClass.prototype.getModuleName = function () {\n        return 'API';\n    };\n    /**\n     * Configure API part with aws configurations\n     * @param {Object} config - Configuration of the API\n     * @return {Object} - The current configuration\n     */\n    APIClass.prototype.configure = function (options) {\n        var _a = options || {}, _b = _a.API, API = _b === void 0 ? {} : _b, otherOptions = __rest(_a, [\"API\"]);\n        var opt = __assign(__assign({}, otherOptions), API);\n        logger.debug('configure API', { opt: opt });\n        if (opt['aws_project_region']) {\n            if (opt['aws_cloud_logic_custom']) {\n                var custom = opt['aws_cloud_logic_custom'];\n                opt.endpoints =\n                    typeof custom === 'string' ? JSON.parse(custom) : custom;\n            }\n            opt = Object.assign({}, opt, {\n                region: opt['aws_project_region'],\n                header: {},\n            });\n        }\n        if (!Array.isArray(opt.endpoints)) {\n            opt.endpoints = [];\n        }\n        // Check if endpoints has custom_headers and validate if is a function\n        opt.endpoints.forEach(function (endpoint) {\n            if (typeof endpoint.custom_header !== 'undefined' &&\n                typeof endpoint.custom_header !== 'function') {\n                logger.warn('API ' + endpoint.name + ', custom_header should be a function');\n                endpoint.custom_header = undefined;\n            }\n        });\n        if (typeof opt.graphql_headers !== 'undefined' &&\n            typeof opt.graphql_headers !== 'function') {\n            logger.warn('graphql_headers should be a function');\n            opt.graphql_headers = undefined;\n        }\n        this._options = Object.assign({}, this._options, opt);\n        this.createInstance();\n        return this._options;\n    };\n    /**\n     * Create an instance of API for the library\n     * @return - A promise of true if Success\n     */\n    APIClass.prototype.createInstance = function () {\n        logger.debug('create API instance');\n        if (this._options) {\n            this._api = new RestClass(this._options);\n            return true;\n        }\n        else {\n            return Promise.reject('API not configured');\n        }\n    };\n    /**\n     * Make a GET request\n     * @param {string} apiName  - The api name of the request\n     * @param {string} path - The path of the request\n     * @param {json} [init] - Request extra params\n     * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n     */\n    APIClass.prototype.get = function (apiName, path, init) {\n        return __awaiter(this, void 0, void 0, function () {\n            var error_1, endpoint;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this._api) return [3 /*break*/, 4];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.createInstance()];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_1 = _a.sent();\n                        return [2 /*return*/, Promise.reject(error_1)];\n                    case 4:\n                        endpoint = this._api.endpoint(apiName);\n                        if (endpoint.length === 0) {\n                            return [2 /*return*/, Promise.reject('API ' + apiName + ' does not exist')];\n                        }\n                        return [2 /*return*/, this._api.get(endpoint + path, init)];\n                }\n            });\n        });\n    };\n    /**\n     * Make a POST request\n     * @param {string} apiName  - The api name of the request\n     * @param {string} path - The path of the request\n     * @param {json} [init] - Request extra params\n     * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n     */\n    APIClass.prototype.post = function (apiName, path, init) {\n        return __awaiter(this, void 0, void 0, function () {\n            var error_2, endpoint;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this._api) return [3 /*break*/, 4];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.createInstance()];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_2 = _a.sent();\n                        return [2 /*return*/, Promise.reject(error_2)];\n                    case 4:\n                        endpoint = this._api.endpoint(apiName);\n                        if (endpoint.length === 0) {\n                            return [2 /*return*/, Promise.reject('API ' + apiName + ' does not exist')];\n                        }\n                        return [2 /*return*/, this._api.post(endpoint + path, init)];\n                }\n            });\n        });\n    };\n    /**\n     * Make a PUT request\n     * @param {string} apiName  - The api name of the request\n     * @param {string} path - The path of the request\n     * @param {json} [init] - Request extra params\n     * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n     */\n    APIClass.prototype.put = function (apiName, path, init) {\n        return __awaiter(this, void 0, void 0, function () {\n            var error_3, endpoint;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this._api) return [3 /*break*/, 4];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.createInstance()];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_3 = _a.sent();\n                        return [2 /*return*/, Promise.reject(error_3)];\n                    case 4:\n                        endpoint = this._api.endpoint(apiName);\n                        if (endpoint.length === 0) {\n                            return [2 /*return*/, Promise.reject('API ' + apiName + ' does not exist')];\n                        }\n                        return [2 /*return*/, this._api.put(endpoint + path, init)];\n                }\n            });\n        });\n    };\n    /**\n     * Make a PATCH request\n     * @param {string} apiName  - The api name of the request\n     * @param {string} path - The path of the request\n     * @param {json} [init] - Request extra params\n     * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n     */\n    APIClass.prototype.patch = function (apiName, path, init) {\n        return __awaiter(this, void 0, void 0, function () {\n            var error_4, endpoint;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this._api) return [3 /*break*/, 4];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.createInstance()];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_4 = _a.sent();\n                        return [2 /*return*/, Promise.reject(error_4)];\n                    case 4:\n                        endpoint = this._api.endpoint(apiName);\n                        if (endpoint.length === 0) {\n                            return [2 /*return*/, Promise.reject('API ' + apiName + ' does not exist')];\n                        }\n                        return [2 /*return*/, this._api.patch(endpoint + path, init)];\n                }\n            });\n        });\n    };\n    /**\n     * Make a DEL request\n     * @param {string} apiName  - The api name of the request\n     * @param {string} path - The path of the request\n     * @param {json} [init] - Request extra params\n     * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n     */\n    APIClass.prototype.del = function (apiName, path, init) {\n        return __awaiter(this, void 0, void 0, function () {\n            var error_5, endpoint;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this._api) return [3 /*break*/, 4];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.createInstance()];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_5 = _a.sent();\n                        return [2 /*return*/, Promise.reject(error_5)];\n                    case 4:\n                        endpoint = this._api.endpoint(apiName);\n                        if (endpoint.length === 0) {\n                            return [2 /*return*/, Promise.reject('API ' + apiName + ' does not exist')];\n                        }\n                        return [2 /*return*/, this._api.del(endpoint + path, init)];\n                }\n            });\n        });\n    };\n    /**\n     * Make a HEAD request\n     * @param {string} apiName  - The api name of the request\n     * @param {string} path - The path of the request\n     * @param {json} [init] - Request extra params\n     * @return {Promise} - A promise that resolves to an object with response status and JSON data, if successful.\n     */\n    APIClass.prototype.head = function (apiName, path, init) {\n        return __awaiter(this, void 0, void 0, function () {\n            var error_6, endpoint;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this._api) return [3 /*break*/, 4];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.createInstance()];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_6 = _a.sent();\n                        return [2 /*return*/, Promise.reject(error_6)];\n                    case 4:\n                        endpoint = this._api.endpoint(apiName);\n                        if (endpoint.length === 0) {\n                            return [2 /*return*/, Promise.reject('API ' + apiName + ' does not exist')];\n                        }\n                        return [2 /*return*/, this._api.head(endpoint + path, init)];\n                }\n            });\n        });\n    };\n    /**\n     * Getting endpoint for API\n     * @param {string} apiName - The name of the api\n     * @return {string} - The endpoint of the api\n     */\n    APIClass.prototype.endpoint = function (apiName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var error_7;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this._api) return [3 /*break*/, 4];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.createInstance()];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_7 = _a.sent();\n                        return [2 /*return*/, Promise.reject(error_7)];\n                    case 4: return [2 /*return*/, this._api.endpoint(apiName)];\n                }\n            });\n        });\n    };\n    APIClass.prototype._headerBasedAuth = function (defaultAuthenticationType) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, aws_appsync_authenticationType, apiKey, authenticationType, headers, _b, credentialsOK, federatedInfo, session;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        _a = this._options, aws_appsync_authenticationType = _a.aws_appsync_authenticationType, apiKey = _a.aws_appsync_apiKey;\n                        authenticationType = defaultAuthenticationType || aws_appsync_authenticationType || 'AWS_IAM';\n                        headers = {};\n                        _b = authenticationType;\n                        switch (_b) {\n                            case 'API_KEY': return [3 /*break*/, 1];\n                            case 'AWS_IAM': return [3 /*break*/, 2];\n                            case 'OPENID_CONNECT': return [3 /*break*/, 4];\n                            case 'AMAZON_COGNITO_USER_POOLS': return [3 /*break*/, 6];\n                        }\n                        return [3 /*break*/, 8];\n                    case 1:\n                        if (!apiKey) {\n                            throw new Error('No api-key configured');\n                        }\n                        headers = {\n                            Authorization: null,\n                            'X-Api-Key': apiKey,\n                        };\n                        return [3 /*break*/, 9];\n                    case 2: return [4 /*yield*/, this._ensureCredentials()];\n                    case 3:\n                        credentialsOK = _c.sent();\n                        if (!credentialsOK) {\n                            throw new Error('No credentials');\n                        }\n                        return [3 /*break*/, 9];\n                    case 4: return [4 /*yield*/, Cache.getItem('federatedInfo')];\n                    case 5:\n                        federatedInfo = _c.sent();\n                        if (!federatedInfo || !federatedInfo.token) {\n                            throw new Error('No federated jwt');\n                        }\n                        headers = {\n                            Authorization: federatedInfo.token,\n                        };\n                        return [3 /*break*/, 9];\n                    case 6: return [4 /*yield*/, Auth.currentSession()];\n                    case 7:\n                        session = _c.sent();\n                        headers = {\n                            Authorization: session.getAccessToken().getJwtToken(),\n                        };\n                        return [3 /*break*/, 9];\n                    case 8:\n                        headers = {\n                            Authorization: null,\n                        };\n                        return [3 /*break*/, 9];\n                    case 9: return [2 /*return*/, headers];\n                }\n            });\n        });\n    };\n    /**\n     * to get the operation type\n     * @param operation\n     */\n    APIClass.prototype.getGraphqlOperationType = function (operation) {\n        var doc = parse(operation);\n        var operationType = doc.definitions[0].operation;\n        return operationType;\n    };\n    /**\n     * Executes a GraphQL operation\n     *\n     * @param {GraphQLOptions} GraphQL Options\n     * @param {object} additionalHeaders headers to merge in after any `graphql_headers` set in the config\n     * @returns {Promise<GraphQLResult> | Observable<object>}\n     */\n    APIClass.prototype.graphql = function (_a, additionalHeaders) {\n        var paramQuery = _a.query, _b = _a.variables, variables = _b === void 0 ? {} : _b, authMode = _a.authMode;\n        var query = typeof paramQuery === 'string'\n            ? parse(paramQuery)\n            : parse(print(paramQuery));\n        var _c = query.definitions.filter(function (def) { return def.kind === 'OperationDefinition'; })[0], operationDef = _c === void 0 ? {} : _c;\n        var operationType = operationDef.operation;\n        switch (operationType) {\n            case 'query':\n            case 'mutation':\n                return this._graphql({ query: query, variables: variables, authMode: authMode }, additionalHeaders);\n            case 'subscription':\n                return this._graphqlSubscribe({\n                    query: query,\n                    variables: variables,\n                    authMode: authMode,\n                });\n        }\n        throw new Error(\"invalid operation type: \" + operationType);\n    };\n    APIClass.prototype._graphql = function (_a, additionalHeaders) {\n        var query = _a.query, variables = _a.variables, authMode = _a.authMode;\n        if (additionalHeaders === void 0) { additionalHeaders = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _b, region, appSyncGraphqlEndpoint, _c, graphql_headers, customGraphqlEndpoint, customEndpointRegion, headers, _d, _e, _f, _g, _h, _j, body, init, endpoint, error, response, err_1, errors;\n            var _k;\n            return __generator(this, function (_l) {\n                switch (_l.label) {\n                    case 0:\n                        if (!!this._api) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.createInstance()];\n                    case 1:\n                        _l.sent();\n                        _l.label = 2;\n                    case 2:\n                        _b = this._options, region = _b.aws_appsync_region, appSyncGraphqlEndpoint = _b.aws_appsync_graphqlEndpoint, _c = _b.graphql_headers, graphql_headers = _c === void 0 ? function () { return ({}); } : _c, customGraphqlEndpoint = _b.graphql_endpoint, customEndpointRegion = _b.graphql_endpoint_iam_region;\n                        _d = [{}];\n                        _e = !customGraphqlEndpoint;\n                        if (!_e) return [3 /*break*/, 4];\n                        return [4 /*yield*/, this._headerBasedAuth(authMode)];\n                    case 3:\n                        _e = (_l.sent());\n                        _l.label = 4;\n                    case 4:\n                        _f = [__assign.apply(void 0, _d.concat([(_e)]))];\n                        _g = customGraphqlEndpoint;\n                        if (!_g) return [3 /*break*/, 8];\n                        if (!customEndpointRegion) return [3 /*break*/, 6];\n                        return [4 /*yield*/, this._headerBasedAuth(authMode)];\n                    case 5:\n                        _h = _l.sent();\n                        return [3 /*break*/, 7];\n                    case 6:\n                        _h = { Authorization: null };\n                        _l.label = 7;\n                    case 7:\n                        _g = (_h);\n                        _l.label = 8;\n                    case 8:\n                        _j = [__assign.apply(void 0, _f.concat([(_g)]))];\n                        return [4 /*yield*/, graphql_headers({ query: query, variables: variables })];\n                    case 9:\n                        headers = __assign.apply(void 0, [__assign.apply(void 0, [__assign.apply(void 0, _j.concat([(_l.sent())])), additionalHeaders]), (!customGraphqlEndpoint && (_k = {},\n                                _k[USER_AGENT_HEADER] = Constants.userAgent,\n                                _k))]);\n                        body = {\n                            query: print(query),\n                            variables: variables,\n                        };\n                        init = {\n                            headers: headers,\n                            body: body,\n                            signerServiceInfo: {\n                                service: !customGraphqlEndpoint ? 'appsync' : 'execute-api',\n                                region: !customGraphqlEndpoint ? region : customEndpointRegion,\n                            },\n                        };\n                        endpoint = customGraphqlEndpoint || appSyncGraphqlEndpoint;\n                        if (!endpoint) {\n                            error = new GraphQLError('No graphql endpoint provided.');\n                            throw {\n                                data: {},\n                                errors: [error],\n                            };\n                        }\n                        _l.label = 10;\n                    case 10:\n                        _l.trys.push([10, 12, , 13]);\n                        return [4 /*yield*/, this._api.post(endpoint, init)];\n                    case 11:\n                        response = _l.sent();\n                        return [3 /*break*/, 13];\n                    case 12:\n                        err_1 = _l.sent();\n                        response = {\n                            data: {},\n                            errors: [new GraphQLError(err_1.message)],\n                        };\n                        return [3 /*break*/, 13];\n                    case 13:\n                        errors = response.errors;\n                        if (errors && errors.length) {\n                            throw response;\n                        }\n                        return [2 /*return*/, response];\n                }\n            });\n        });\n    };\n    APIClass.prototype._graphqlSubscribe = function (_a) {\n        var query = _a.query, variables = _a.variables, defaultAuthenticationType = _a.authMode;\n        var _b = this._options, region = _b.aws_appsync_region, appSyncGraphqlEndpoint = _b.aws_appsync_graphqlEndpoint, aws_appsync_authenticationType = _b.aws_appsync_authenticationType, apiKey = _b.aws_appsync_apiKey, _c = _b.graphql_headers, graphql_headers = _c === void 0 ? function () { return ({}); } : _c;\n        var authenticationType = defaultAuthenticationType || aws_appsync_authenticationType || 'AWS_IAM';\n        if (Amplify.PubSub && typeof Amplify.PubSub.subscribe === 'function') {\n            return Amplify.PubSub.subscribe('', {\n                provider: INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER,\n                appSyncGraphqlEndpoint: appSyncGraphqlEndpoint,\n                authenticationType: authenticationType,\n                apiKey: apiKey,\n                query: print(query),\n                region: region,\n                variables: variables,\n                graphql_headers: graphql_headers,\n            });\n        }\n        else {\n            logger.debug('No pubsub module applied for subscription');\n            throw new Error('No pubsub module applied for subscription');\n        }\n    };\n    /**\n     * @private\n     */\n    APIClass.prototype._ensureCredentials = function () {\n        return Credentials.get()\n            .then(function (credentials) {\n            if (!credentials)\n                return false;\n            var cred = Credentials.shear(credentials);\n            logger.debug('set credentials for api', cred);\n            return true;\n        })\n            .catch(function (err) {\n            logger.warn('ensure credentials error', err);\n            return false;\n        });\n    };\n    return APIClass;\n}());\nexport default APIClass;\n//# sourceMappingURL=API.js.map","/**\n * @license\n * Lodash <https://lodash.com/>\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n;(function() {\n\n  /** Used as a safe reference for `undefined` in pre-ES5 environments. */\n  var undefined;\n\n  /** Used as the semantic version number. */\n  var VERSION = '4.17.15';\n\n  /** Used as the size to enable large array optimizations. */\n  var LARGE_ARRAY_SIZE = 200;\n\n  /** Error message constants. */\n  var CORE_ERROR_TEXT = 'Unsupported core-js use. Try https://npms.io/search?q=ponyfill.',\n      FUNC_ERROR_TEXT = 'Expected a function';\n\n  /** Used to stand-in for `undefined` hash values. */\n  var HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n  /** Used as the maximum memoize cache size. */\n  var MAX_MEMOIZE_SIZE = 500;\n\n  /** Used as the internal argument placeholder. */\n  var PLACEHOLDER = '__lodash_placeholder__';\n\n  /** Used to compose bitmasks for cloning. */\n  var CLONE_DEEP_FLAG = 1,\n      CLONE_FLAT_FLAG = 2,\n      CLONE_SYMBOLS_FLAG = 4;\n\n  /** Used to compose bitmasks for value comparisons. */\n  var COMPARE_PARTIAL_FLAG = 1,\n      COMPARE_UNORDERED_FLAG = 2;\n\n  /** Used to compose bitmasks for function metadata. */\n  var WRAP_BIND_FLAG = 1,\n      WRAP_BIND_KEY_FLAG = 2,\n      WRAP_CURRY_BOUND_FLAG = 4,\n      WRAP_CURRY_FLAG = 8,\n      WRAP_CURRY_RIGHT_FLAG = 16,\n      WRAP_PARTIAL_FLAG = 32,\n      WRAP_PARTIAL_RIGHT_FLAG = 64,\n      WRAP_ARY_FLAG = 128,\n      WRAP_REARG_FLAG = 256,\n      WRAP_FLIP_FLAG = 512;\n\n  /** Used as default options for `_.truncate`. */\n  var DEFAULT_TRUNC_LENGTH = 30,\n      DEFAULT_TRUNC_OMISSION = '...';\n\n  /** Used to detect hot functions by number of calls within a span of milliseconds. */\n  var HOT_COUNT = 800,\n      HOT_SPAN = 16;\n\n  /** Used to indicate the type of lazy iteratees. */\n  var LAZY_FILTER_FLAG = 1,\n      LAZY_MAP_FLAG = 2,\n      LAZY_WHILE_FLAG = 3;\n\n  /** Used as references for various `Number` constants. */\n  var INFINITY = 1 / 0,\n      MAX_SAFE_INTEGER = 9007199254740991,\n      MAX_INTEGER = 1.7976931348623157e+308,\n      NAN = 0 / 0;\n\n  /** Used as references for the maximum length and index of an array. */\n  var MAX_ARRAY_LENGTH = 4294967295,\n      MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1,\n      HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;\n\n  /** Used to associate wrap methods with their bit flags. */\n  var wrapFlags = [\n    ['ary', WRAP_ARY_FLAG],\n    ['bind', WRAP_BIND_FLAG],\n    ['bindKey', WRAP_BIND_KEY_FLAG],\n    ['curry', WRAP_CURRY_FLAG],\n    ['curryRight', WRAP_CURRY_RIGHT_FLAG],\n    ['flip', WRAP_FLIP_FLAG],\n    ['partial', WRAP_PARTIAL_FLAG],\n    ['partialRight', WRAP_PARTIAL_RIGHT_FLAG],\n    ['rearg', WRAP_REARG_FLAG]\n  ];\n\n  /** `Object#toString` result references. */\n  var argsTag = '[object Arguments]',\n      arrayTag = '[object Array]',\n      asyncTag = '[object AsyncFunction]',\n      boolTag = '[object Boolean]',\n      dateTag = '[object Date]',\n      domExcTag = '[object DOMException]',\n      errorTag = '[object Error]',\n      funcTag = '[object Function]',\n      genTag = '[object GeneratorFunction]',\n      mapTag = '[object Map]',\n      numberTag = '[object Number]',\n      nullTag = '[object Null]',\n      objectTag = '[object Object]',\n      promiseTag = '[object Promise]',\n      proxyTag = '[object Proxy]',\n      regexpTag = '[object RegExp]',\n      setTag = '[object Set]',\n      stringTag = '[object String]',\n      symbolTag = '[object Symbol]',\n      undefinedTag = '[object Undefined]',\n      weakMapTag = '[object WeakMap]',\n      weakSetTag = '[object WeakSet]';\n\n  var arrayBufferTag = '[object ArrayBuffer]',\n      dataViewTag = '[object DataView]',\n      float32Tag = '[object Float32Array]',\n      float64Tag = '[object Float64Array]',\n      int8Tag = '[object Int8Array]',\n      int16Tag = '[object Int16Array]',\n      int32Tag = '[object Int32Array]',\n      uint8Tag = '[object Uint8Array]',\n      uint8ClampedTag = '[object Uint8ClampedArray]',\n      uint16Tag = '[object Uint16Array]',\n      uint32Tag = '[object Uint32Array]';\n\n  /** Used to match empty string literals in compiled template source. */\n  var reEmptyStringLeading = /\\b__p \\+= '';/g,\n      reEmptyStringMiddle = /\\b(__p \\+=) '' \\+/g,\n      reEmptyStringTrailing = /(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;\n\n  /** Used to match HTML entities and HTML characters. */\n  var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g,\n      reUnescapedHtml = /[&<>\"']/g,\n      reHasEscapedHtml = RegExp(reEscapedHtml.source),\n      reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n\n  /** Used to match template delimiters. */\n  var reEscape = /<%-([\\s\\S]+?)%>/g,\n      reEvaluate = /<%([\\s\\S]+?)%>/g,\n      reInterpolate = /<%=([\\s\\S]+?)%>/g;\n\n  /** Used to match property names within property paths. */\n  var reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n      reIsPlainProp = /^\\w*$/,\n      rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n  /**\n   * Used to match `RegExp`\n   * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n   */\n  var reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g,\n      reHasRegExpChar = RegExp(reRegExpChar.source);\n\n  /** Used to match leading and trailing whitespace. */\n  var reTrim = /^\\s+|\\s+$/g,\n      reTrimStart = /^\\s+/,\n      reTrimEnd = /\\s+$/;\n\n  /** Used to match wrap detail comments. */\n  var reWrapComment = /\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,\n      reWrapDetails = /\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,\n      reSplitDetails = /,? & /;\n\n  /** Used to match words composed of alphanumeric characters. */\n  var reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n  /** Used to match backslashes in property paths. */\n  var reEscapeChar = /\\\\(\\\\)?/g;\n\n  /**\n   * Used to match\n   * [ES template delimiters](http://ecma-international.org/ecma-262/7.0/#sec-template-literal-lexical-components).\n   */\n  var reEsTemplate = /\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g;\n\n  /** Used to match `RegExp` flags from their coerced string values. */\n  var reFlags = /\\w*$/;\n\n  /** Used to detect bad signed hexadecimal string values. */\n  var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n  /** Used to detect binary string values. */\n  var reIsBinary = /^0b[01]+$/i;\n\n  /** Used to detect host constructors (Safari). */\n  var reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n  /** Used to detect octal string values. */\n  var reIsOctal = /^0o[0-7]+$/i;\n\n  /** Used to detect unsigned integer values. */\n  var reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n  /** Used to match Latin Unicode letters (excluding mathematical operators). */\n  var reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n  /** Used to ensure capturing order of template delimiters. */\n  var reNoMatch = /($^)/;\n\n  /** Used to match unescaped characters in compiled string literals. */\n  var reUnescapedString = /['\\n\\r\\u2028\\u2029\\\\]/g;\n\n  /** Used to compose unicode character classes. */\n  var rsAstralRange = '\\\\ud800-\\\\udfff',\n      rsComboMarksRange = '\\\\u0300-\\\\u036f',\n      reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n      rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n      rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n      rsDingbatRange = '\\\\u2700-\\\\u27bf',\n      rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n      rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n      rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n      rsPunctuationRange = '\\\\u2000-\\\\u206f',\n      rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n      rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n      rsVarRange = '\\\\ufe0e\\\\ufe0f',\n      rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n  /** Used to compose unicode capture groups. */\n  var rsApos = \"['\\u2019]\",\n      rsAstral = '[' + rsAstralRange + ']',\n      rsBreak = '[' + rsBreakRange + ']',\n      rsCombo = '[' + rsComboRange + ']',\n      rsDigits = '\\\\d+',\n      rsDingbat = '[' + rsDingbatRange + ']',\n      rsLower = '[' + rsLowerRange + ']',\n      rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n      rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n      rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n      rsNonAstral = '[^' + rsAstralRange + ']',\n      rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n      rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n      rsUpper = '[' + rsUpperRange + ']',\n      rsZWJ = '\\\\u200d';\n\n  /** Used to compose unicode regexes. */\n  var rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',\n      rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',\n      rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n      rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n      reOptMod = rsModifier + '?',\n      rsOptVar = '[' + rsVarRange + ']?',\n      rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n      rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])',\n      rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])',\n      rsSeq = rsOptVar + reOptMod + rsOptJoin,\n      rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq,\n      rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n  /** Used to match apostrophes. */\n  var reApos = RegExp(rsApos, 'g');\n\n  /**\n   * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n   * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n   */\n  var reComboMark = RegExp(rsCombo, 'g');\n\n  /** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\n  var reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n  /** Used to match complex or compound words. */\n  var reUnicodeWord = RegExp([\n    rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n    rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')',\n    rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower,\n    rsUpper + '+' + rsOptContrUpper,\n    rsOrdUpper,\n    rsOrdLower,\n    rsDigits,\n    rsEmoji\n  ].join('|'), 'g');\n\n  /** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\n  var reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n  /** Used to detect strings that need a more robust regexp to match words. */\n  var reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n  /** Used to assign default `context` object properties. */\n  var contextProps = [\n    'Array', 'Buffer', 'DataView', 'Date', 'Error', 'Float32Array', 'Float64Array',\n    'Function', 'Int8Array', 'Int16Array', 'Int32Array', 'Map', 'Math', 'Object',\n    'Promise', 'RegExp', 'Set', 'String', 'Symbol', 'TypeError', 'Uint8Array',\n    'Uint8ClampedArray', 'Uint16Array', 'Uint32Array', 'WeakMap',\n    '_', 'clearTimeout', 'isFinite', 'parseInt', 'setTimeout'\n  ];\n\n  /** Used to make template sourceURLs easier to identify. */\n  var templateCounter = -1;\n\n  /** Used to identify `toStringTag` values of typed arrays. */\n  var typedArrayTags = {};\n  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\n  typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\n  typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\n  typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\n  typedArrayTags[uint32Tag] = true;\n  typedArrayTags[argsTag] = typedArrayTags[arrayTag] =\n  typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\n  typedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\n  typedArrayTags[errorTag] = typedArrayTags[funcTag] =\n  typedArrayTags[mapTag] = typedArrayTags[numberTag] =\n  typedArrayTags[objectTag] = typedArrayTags[regexpTag] =\n  typedArrayTags[setTag] = typedArrayTags[stringTag] =\n  typedArrayTags[weakMapTag] = false;\n\n  /** Used to identify `toStringTag` values supported by `_.clone`. */\n  var cloneableTags = {};\n  cloneableTags[argsTag] = cloneableTags[arrayTag] =\n  cloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\n  cloneableTags[boolTag] = cloneableTags[dateTag] =\n  cloneableTags[float32Tag] = cloneableTags[float64Tag] =\n  cloneableTags[int8Tag] = cloneableTags[int16Tag] =\n  cloneableTags[int32Tag] = cloneableTags[mapTag] =\n  cloneableTags[numberTag] = cloneableTags[objectTag] =\n  cloneableTags[regexpTag] = cloneableTags[setTag] =\n  cloneableTags[stringTag] = cloneableTags[symbolTag] =\n  cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\n  cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\n  cloneableTags[errorTag] = cloneableTags[funcTag] =\n  cloneableTags[weakMapTag] = false;\n\n  /** Used to map Latin Unicode letters to basic Latin letters. */\n  var deburredLetters = {\n    // Latin-1 Supplement block.\n    '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n    '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n    '\\xc7': 'C',  '\\xe7': 'c',\n    '\\xd0': 'D',  '\\xf0': 'd',\n    '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n    '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n    '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n    '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n    '\\xd1': 'N',  '\\xf1': 'n',\n    '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n    '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n    '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n    '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n    '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n    '\\xc6': 'Ae', '\\xe6': 'ae',\n    '\\xde': 'Th', '\\xfe': 'th',\n    '\\xdf': 'ss',\n    // Latin Extended-A block.\n    '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n    '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n    '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n    '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n    '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n    '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n    '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n    '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n    '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n    '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n    '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n    '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n    '\\u0134': 'J',  '\\u0135': 'j',\n    '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n    '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n    '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n    '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n    '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n    '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n    '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n    '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n    '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n    '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n    '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n    '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n    '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n    '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n    '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n    '\\u0174': 'W',  '\\u0175': 'w',\n    '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n    '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n    '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n    '\\u0132': 'IJ', '\\u0133': 'ij',\n    '\\u0152': 'Oe', '\\u0153': 'oe',\n    '\\u0149': \"'n\", '\\u017f': 's'\n  };\n\n  /** Used to map characters to HTML entities. */\n  var htmlEscapes = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  /** Used to map HTML entities to characters. */\n  var htmlUnescapes = {\n    '&amp;': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&quot;': '\"',\n    '&#39;': \"'\"\n  };\n\n  /** Used to escape characters for inclusion in compiled string literals. */\n  var stringEscapes = {\n    '\\\\': '\\\\',\n    \"'\": \"'\",\n    '\\n': 'n',\n    '\\r': 'r',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  /** Built-in method references without a dependency on `root`. */\n  var freeParseFloat = parseFloat,\n      freeParseInt = parseInt;\n\n  /** Detect free variable `global` from Node.js. */\n  var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n  /** Detect free variable `self`. */\n  var freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n  /** Used as a reference to the global object. */\n  var root = freeGlobal || freeSelf || Function('return this')();\n\n  /** Detect free variable `exports`. */\n  var freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n  /** Detect free variable `module`. */\n  var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n  /** Detect the popular CommonJS extension `module.exports`. */\n  var moduleExports = freeModule && freeModule.exports === freeExports;\n\n  /** Detect free variable `process` from Node.js. */\n  var freeProcess = moduleExports && freeGlobal.process;\n\n  /** Used to access faster Node.js helpers. */\n  var nodeUtil = (function() {\n    try {\n      // Use `util.types` for Node.js 10+.\n      var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n      if (types) {\n        return types;\n      }\n\n      // Legacy `process.binding('util')` for Node.js < 10.\n      return freeProcess && freeProcess.binding && freeProcess.binding('util');\n    } catch (e) {}\n  }());\n\n  /* Node.js helper references. */\n  var nodeIsArrayBuffer = nodeUtil && nodeUtil.isArrayBuffer,\n      nodeIsDate = nodeUtil && nodeUtil.isDate,\n      nodeIsMap = nodeUtil && nodeUtil.isMap,\n      nodeIsRegExp = nodeUtil && nodeUtil.isRegExp,\n      nodeIsSet = nodeUtil && nodeUtil.isSet,\n      nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * A faster alternative to `Function#apply`, this function invokes `func`\n   * with the `this` binding of `thisArg` and the arguments of `args`.\n   *\n   * @private\n   * @param {Function} func The function to invoke.\n   * @param {*} thisArg The `this` binding of `func`.\n   * @param {Array} args The arguments to invoke `func` with.\n   * @returns {*} Returns the result of `func`.\n   */\n  function apply(func, thisArg, args) {\n    switch (args.length) {\n      case 0: return func.call(thisArg);\n      case 1: return func.call(thisArg, args[0]);\n      case 2: return func.call(thisArg, args[0], args[1]);\n      case 3: return func.call(thisArg, args[0], args[1], args[2]);\n    }\n    return func.apply(thisArg, args);\n  }\n\n  /**\n   * A specialized version of `baseAggregator` for arrays.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} setter The function to set `accumulator` values.\n   * @param {Function} iteratee The iteratee to transform keys.\n   * @param {Object} accumulator The initial aggregated object.\n   * @returns {Function} Returns `accumulator`.\n   */\n  function arrayAggregator(array, setter, iteratee, accumulator) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      var value = array[index];\n      setter(accumulator, value, iteratee(value), array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.forEach` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayEach(array, iteratee) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (iteratee(array[index], index, array) === false) {\n        break;\n      }\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.forEachRight` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayEachRight(array, iteratee) {\n    var length = array == null ? 0 : array.length;\n\n    while (length--) {\n      if (iteratee(array[length], length, array) === false) {\n        break;\n      }\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.every` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {boolean} Returns `true` if all elements pass the predicate check,\n   *  else `false`.\n   */\n  function arrayEvery(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (!predicate(array[index], index, array)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * A specialized version of `_.filter` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {Array} Returns the new filtered array.\n   */\n  function arrayFilter(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index];\n      if (predicate(value, index, array)) {\n        result[resIndex++] = value;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * A specialized version of `_.includes` for arrays without support for\n   * specifying an index to search from.\n   *\n   * @private\n   * @param {Array} [array] The array to inspect.\n   * @param {*} target The value to search for.\n   * @returns {boolean} Returns `true` if `target` is found, else `false`.\n   */\n  function arrayIncludes(array, value) {\n    var length = array == null ? 0 : array.length;\n    return !!length && baseIndexOf(array, value, 0) > -1;\n  }\n\n  /**\n   * This function is like `arrayIncludes` except that it accepts a comparator.\n   *\n   * @private\n   * @param {Array} [array] The array to inspect.\n   * @param {*} target The value to search for.\n   * @param {Function} comparator The comparator invoked per element.\n   * @returns {boolean} Returns `true` if `target` is found, else `false`.\n   */\n  function arrayIncludesWith(array, value, comparator) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (comparator(value, array[index])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * A specialized version of `_.map` for arrays without support for iteratee\n   * shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the new mapped array.\n   */\n  function arrayMap(array, iteratee) {\n    var index = -1,\n        length = array == null ? 0 : array.length,\n        result = Array(length);\n\n    while (++index < length) {\n      result[index] = iteratee(array[index], index, array);\n    }\n    return result;\n  }\n\n  /**\n   * Appends the elements of `values` to `array`.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {Array} values The values to append.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayPush(array, values) {\n    var index = -1,\n        length = values.length,\n        offset = array.length;\n\n    while (++index < length) {\n      array[offset + index] = values[index];\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.reduce` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} [accumulator] The initial value.\n   * @param {boolean} [initAccum] Specify using the first element of `array` as\n   *  the initial value.\n   * @returns {*} Returns the accumulated value.\n   */\n  function arrayReduce(array, iteratee, accumulator, initAccum) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    if (initAccum && length) {\n      accumulator = array[++index];\n    }\n    while (++index < length) {\n      accumulator = iteratee(accumulator, array[index], index, array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.reduceRight` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} [accumulator] The initial value.\n   * @param {boolean} [initAccum] Specify using the last element of `array` as\n   *  the initial value.\n   * @returns {*} Returns the accumulated value.\n   */\n  function arrayReduceRight(array, iteratee, accumulator, initAccum) {\n    var length = array == null ? 0 : array.length;\n    if (initAccum && length) {\n      accumulator = array[--length];\n    }\n    while (length--) {\n      accumulator = iteratee(accumulator, array[length], length, array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.some` for arrays without support for iteratee\n   * shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {boolean} Returns `true` if any element passes the predicate check,\n   *  else `false`.\n   */\n  function arraySome(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (predicate(array[index], index, array)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Gets the size of an ASCII `string`.\n   *\n   * @private\n   * @param {string} string The string inspect.\n   * @returns {number} Returns the string size.\n   */\n  var asciiSize = baseProperty('length');\n\n  /**\n   * Converts an ASCII `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function asciiToArray(string) {\n    return string.split('');\n  }\n\n  /**\n   * Splits an ASCII `string` into an array of its words.\n   *\n   * @private\n   * @param {string} The string to inspect.\n   * @returns {Array} Returns the words of `string`.\n   */\n  function asciiWords(string) {\n    return string.match(reAsciiWord) || [];\n  }\n\n  /**\n   * The base implementation of methods like `_.findKey` and `_.findLastKey`,\n   * without support for iteratee shorthands, which iterates over `collection`\n   * using `eachFunc`.\n   *\n   * @private\n   * @param {Array|Object} collection The collection to inspect.\n   * @param {Function} predicate The function invoked per iteration.\n   * @param {Function} eachFunc The function to iterate over `collection`.\n   * @returns {*} Returns the found element or its key, else `undefined`.\n   */\n  function baseFindKey(collection, predicate, eachFunc) {\n    var result;\n    eachFunc(collection, function(value, key, collection) {\n      if (predicate(value, key, collection)) {\n        result = key;\n        return false;\n      }\n    });\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.findIndex` and `_.findLastIndex` without\n   * support for iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {Function} predicate The function invoked per iteration.\n   * @param {number} fromIndex The index to search from.\n   * @param {boolean} [fromRight] Specify iterating from right to left.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseFindIndex(array, predicate, fromIndex, fromRight) {\n    var length = array.length,\n        index = fromIndex + (fromRight ? 1 : -1);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (predicate(array[index], index, array)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseIndexOf(array, value, fromIndex) {\n    return value === value\n      ? strictIndexOf(array, value, fromIndex)\n      : baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n\n  /**\n   * This function is like `baseIndexOf` except that it accepts a comparator.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @param {Function} comparator The comparator invoked per element.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseIndexOfWith(array, value, fromIndex, comparator) {\n    var index = fromIndex - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (comparator(array[index], value)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.isNaN` without support for number objects.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n   */\n  function baseIsNaN(value) {\n    return value !== value;\n  }\n\n  /**\n   * The base implementation of `_.mean` and `_.meanBy` without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {number} Returns the mean.\n   */\n  function baseMean(array, iteratee) {\n    var length = array == null ? 0 : array.length;\n    return length ? (baseSum(array, iteratee) / length) : NAN;\n  }\n\n  /**\n   * The base implementation of `_.property` without support for deep paths.\n   *\n   * @private\n   * @param {string} key The key of the property to get.\n   * @returns {Function} Returns the new accessor function.\n   */\n  function baseProperty(key) {\n    return function(object) {\n      return object == null ? undefined : object[key];\n    };\n  }\n\n  /**\n   * The base implementation of `_.propertyOf` without support for deep paths.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @returns {Function} Returns the new accessor function.\n   */\n  function basePropertyOf(object) {\n    return function(key) {\n      return object == null ? undefined : object[key];\n    };\n  }\n\n  /**\n   * The base implementation of `_.reduce` and `_.reduceRight`, without support\n   * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n   *\n   * @private\n   * @param {Array|Object} collection The collection to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} accumulator The initial value.\n   * @param {boolean} initAccum Specify using the first or last element of\n   *  `collection` as the initial value.\n   * @param {Function} eachFunc The function to iterate over `collection`.\n   * @returns {*} Returns the accumulated value.\n   */\n  function baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n    eachFunc(collection, function(value, index, collection) {\n      accumulator = initAccum\n        ? (initAccum = false, value)\n        : iteratee(accumulator, value, index, collection);\n    });\n    return accumulator;\n  }\n\n  /**\n   * The base implementation of `_.sortBy` which uses `comparer` to define the\n   * sort order of `array` and replaces criteria objects with their corresponding\n   * values.\n   *\n   * @private\n   * @param {Array} array The array to sort.\n   * @param {Function} comparer The function to define sort order.\n   * @returns {Array} Returns `array`.\n   */\n  function baseSortBy(array, comparer) {\n    var length = array.length;\n\n    array.sort(comparer);\n    while (length--) {\n      array[length] = array[length].value;\n    }\n    return array;\n  }\n\n  /**\n   * The base implementation of `_.sum` and `_.sumBy` without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {number} Returns the sum.\n   */\n  function baseSum(array, iteratee) {\n    var result,\n        index = -1,\n        length = array.length;\n\n    while (++index < length) {\n      var current = iteratee(array[index]);\n      if (current !== undefined) {\n        result = result === undefined ? current : (result + current);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.times` without support for iteratee shorthands\n   * or max array length checks.\n   *\n   * @private\n   * @param {number} n The number of times to invoke `iteratee`.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the array of results.\n   */\n  function baseTimes(n, iteratee) {\n    var index = -1,\n        result = Array(n);\n\n    while (++index < n) {\n      result[index] = iteratee(index);\n    }\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.toPairs` and `_.toPairsIn` which creates an array\n   * of key-value pairs for `object` corresponding to the property names of `props`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {Array} props The property names to get values for.\n   * @returns {Object} Returns the key-value pairs.\n   */\n  function baseToPairs(object, props) {\n    return arrayMap(props, function(key) {\n      return [key, object[key]];\n    });\n  }\n\n  /**\n   * The base implementation of `_.unary` without support for storing metadata.\n   *\n   * @private\n   * @param {Function} func The function to cap arguments for.\n   * @returns {Function} Returns the new capped function.\n   */\n  function baseUnary(func) {\n    return function(value) {\n      return func(value);\n    };\n  }\n\n  /**\n   * The base implementation of `_.values` and `_.valuesIn` which creates an\n   * array of `object` property values corresponding to the property names\n   * of `props`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {Array} props The property names to get values for.\n   * @returns {Object} Returns the array of property values.\n   */\n  function baseValues(object, props) {\n    return arrayMap(props, function(key) {\n      return object[key];\n    });\n  }\n\n  /**\n   * Checks if a `cache` value for `key` exists.\n   *\n   * @private\n   * @param {Object} cache The cache to query.\n   * @param {string} key The key of the entry to check.\n   * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n   */\n  function cacheHas(cache, key) {\n    return cache.has(key);\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimStart` to get the index of the first string symbol\n   * that is not found in the character symbols.\n   *\n   * @private\n   * @param {Array} strSymbols The string symbols to inspect.\n   * @param {Array} chrSymbols The character symbols to find.\n   * @returns {number} Returns the index of the first unmatched string symbol.\n   */\n  function charsStartIndex(strSymbols, chrSymbols) {\n    var index = -1,\n        length = strSymbols.length;\n\n    while (++index < length && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimEnd` to get the index of the last string symbol\n   * that is not found in the character symbols.\n   *\n   * @private\n   * @param {Array} strSymbols The string symbols to inspect.\n   * @param {Array} chrSymbols The character symbols to find.\n   * @returns {number} Returns the index of the last unmatched string symbol.\n   */\n  function charsEndIndex(strSymbols, chrSymbols) {\n    var index = strSymbols.length;\n\n    while (index-- && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n    return index;\n  }\n\n  /**\n   * Gets the number of `placeholder` occurrences in `array`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} placeholder The placeholder to search for.\n   * @returns {number} Returns the placeholder count.\n   */\n  function countHolders(array, placeholder) {\n    var length = array.length,\n        result = 0;\n\n    while (length--) {\n      if (array[length] === placeholder) {\n        ++result;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n   * letters to basic Latin letters.\n   *\n   * @private\n   * @param {string} letter The matched letter to deburr.\n   * @returns {string} Returns the deburred letter.\n   */\n  var deburrLetter = basePropertyOf(deburredLetters);\n\n  /**\n   * Used by `_.escape` to convert characters to HTML entities.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  var escapeHtmlChar = basePropertyOf(htmlEscapes);\n\n  /**\n   * Used by `_.template` to escape characters for inclusion in compiled string literals.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  function escapeStringChar(chr) {\n    return '\\\\' + stringEscapes[chr];\n  }\n\n  /**\n   * Gets the value at `key` of `object`.\n   *\n   * @private\n   * @param {Object} [object] The object to query.\n   * @param {string} key The key of the property to get.\n   * @returns {*} Returns the property value.\n   */\n  function getValue(object, key) {\n    return object == null ? undefined : object[key];\n  }\n\n  /**\n   * Checks if `string` contains Unicode symbols.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n   */\n  function hasUnicode(string) {\n    return reHasUnicode.test(string);\n  }\n\n  /**\n   * Checks if `string` contains a word composed of Unicode symbols.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {boolean} Returns `true` if a word is found, else `false`.\n   */\n  function hasUnicodeWord(string) {\n    return reHasUnicodeWord.test(string);\n  }\n\n  /**\n   * Converts `iterator` to an array.\n   *\n   * @private\n   * @param {Object} iterator The iterator to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function iteratorToArray(iterator) {\n    var data,\n        result = [];\n\n    while (!(data = iterator.next()).done) {\n      result.push(data.value);\n    }\n    return result;\n  }\n\n  /**\n   * Converts `map` to its key-value pairs.\n   *\n   * @private\n   * @param {Object} map The map to convert.\n   * @returns {Array} Returns the key-value pairs.\n   */\n  function mapToArray(map) {\n    var index = -1,\n        result = Array(map.size);\n\n    map.forEach(function(value, key) {\n      result[++index] = [key, value];\n    });\n    return result;\n  }\n\n  /**\n   * Creates a unary function that invokes `func` with its argument transformed.\n   *\n   * @private\n   * @param {Function} func The function to wrap.\n   * @param {Function} transform The argument transform.\n   * @returns {Function} Returns the new function.\n   */\n  function overArg(func, transform) {\n    return function(arg) {\n      return func(transform(arg));\n    };\n  }\n\n  /**\n   * Replaces all `placeholder` elements in `array` with an internal placeholder\n   * and returns an array of their indexes.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {*} placeholder The placeholder to replace.\n   * @returns {Array} Returns the new array of placeholder indexes.\n   */\n  function replaceHolders(array, placeholder) {\n    var index = -1,\n        length = array.length,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index];\n      if (value === placeholder || value === PLACEHOLDER) {\n        array[index] = PLACEHOLDER;\n        result[resIndex++] = index;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Converts `set` to an array of its values.\n   *\n   * @private\n   * @param {Object} set The set to convert.\n   * @returns {Array} Returns the values.\n   */\n  function setToArray(set) {\n    var index = -1,\n        result = Array(set.size);\n\n    set.forEach(function(value) {\n      result[++index] = value;\n    });\n    return result;\n  }\n\n  /**\n   * Converts `set` to its value-value pairs.\n   *\n   * @private\n   * @param {Object} set The set to convert.\n   * @returns {Array} Returns the value-value pairs.\n   */\n  function setToPairs(set) {\n    var index = -1,\n        result = Array(set.size);\n\n    set.forEach(function(value) {\n      result[++index] = [value, value];\n    });\n    return result;\n  }\n\n  /**\n   * A specialized version of `_.indexOf` which performs strict equality\n   * comparisons of values, i.e. `===`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function strictIndexOf(array, value, fromIndex) {\n    var index = fromIndex - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * A specialized version of `_.lastIndexOf` which performs strict equality\n   * comparisons of values, i.e. `===`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function strictLastIndexOf(array, value, fromIndex) {\n    var index = fromIndex + 1;\n    while (index--) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return index;\n  }\n\n  /**\n   * Gets the number of symbols in `string`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {number} Returns the string size.\n   */\n  function stringSize(string) {\n    return hasUnicode(string)\n      ? unicodeSize(string)\n      : asciiSize(string);\n  }\n\n  /**\n   * Converts `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function stringToArray(string) {\n    return hasUnicode(string)\n      ? unicodeToArray(string)\n      : asciiToArray(string);\n  }\n\n  /**\n   * Used by `_.unescape` to convert HTML entities to characters.\n   *\n   * @private\n   * @param {string} chr The matched character to unescape.\n   * @returns {string} Returns the unescaped character.\n   */\n  var unescapeHtmlChar = basePropertyOf(htmlUnescapes);\n\n  /**\n   * Gets the size of a Unicode `string`.\n   *\n   * @private\n   * @param {string} string The string inspect.\n   * @returns {number} Returns the string size.\n   */\n  function unicodeSize(string) {\n    var result = reUnicode.lastIndex = 0;\n    while (reUnicode.test(string)) {\n      ++result;\n    }\n    return result;\n  }\n\n  /**\n   * Converts a Unicode `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function unicodeToArray(string) {\n    return string.match(reUnicode) || [];\n  }\n\n  /**\n   * Splits a Unicode `string` into an array of its words.\n   *\n   * @private\n   * @param {string} The string to inspect.\n   * @returns {Array} Returns the words of `string`.\n   */\n  function unicodeWords(string) {\n    return string.match(reUnicodeWord) || [];\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Create a new pristine `lodash` function using the `context` object.\n   *\n   * @static\n   * @memberOf _\n   * @since 1.1.0\n   * @category Util\n   * @param {Object} [context=root] The context object.\n   * @returns {Function} Returns a new `lodash` function.\n   * @example\n   *\n   * _.mixin({ 'foo': _.constant('foo') });\n   *\n   * var lodash = _.runInContext();\n   * lodash.mixin({ 'bar': lodash.constant('bar') });\n   *\n   * _.isFunction(_.foo);\n   * // => true\n   * _.isFunction(_.bar);\n   * // => false\n   *\n   * lodash.isFunction(lodash.foo);\n   * // => false\n   * lodash.isFunction(lodash.bar);\n   * // => true\n   *\n   * // Create a suped-up `defer` in Node.js.\n   * var defer = _.runInContext({ 'setTimeout': setImmediate }).defer;\n   */\n  var runInContext = (function runInContext(context) {\n    context = context == null ? root : _.defaults(root.Object(), context, _.pick(root, contextProps));\n\n    /** Built-in constructor references. */\n    var Array = context.Array,\n        Date = context.Date,\n        Error = context.Error,\n        Function = context.Function,\n        Math = context.Math,\n        Object = context.Object,\n        RegExp = context.RegExp,\n        String = context.String,\n        TypeError = context.TypeError;\n\n    /** Used for built-in method references. */\n    var arrayProto = Array.prototype,\n        funcProto = Function.prototype,\n        objectProto = Object.prototype;\n\n    /** Used to detect overreaching core-js shims. */\n    var coreJsData = context['__core-js_shared__'];\n\n    /** Used to resolve the decompiled source of functions. */\n    var funcToString = funcProto.toString;\n\n    /** Used to check objects for own properties. */\n    var hasOwnProperty = objectProto.hasOwnProperty;\n\n    /** Used to generate unique IDs. */\n    var idCounter = 0;\n\n    /** Used to detect methods masquerading as native. */\n    var maskSrcKey = (function() {\n      var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n      return uid ? ('Symbol(src)_1.' + uid) : '';\n    }());\n\n    /**\n     * Used to resolve the\n     * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n     * of values.\n     */\n    var nativeObjectToString = objectProto.toString;\n\n    /** Used to infer the `Object` constructor. */\n    var objectCtorString = funcToString.call(Object);\n\n    /** Used to restore the original `_` reference in `_.noConflict`. */\n    var oldDash = root._;\n\n    /** Used to detect if a method is native. */\n    var reIsNative = RegExp('^' +\n      funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n      .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n    );\n\n    /** Built-in value references. */\n    var Buffer = moduleExports ? context.Buffer : undefined,\n        Symbol = context.Symbol,\n        Uint8Array = context.Uint8Array,\n        allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined,\n        getPrototype = overArg(Object.getPrototypeOf, Object),\n        objectCreate = Object.create,\n        propertyIsEnumerable = objectProto.propertyIsEnumerable,\n        splice = arrayProto.splice,\n        spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined,\n        symIterator = Symbol ? Symbol.iterator : undefined,\n        symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n    var defineProperty = (function() {\n      try {\n        var func = getNative(Object, 'defineProperty');\n        func({}, '', {});\n        return func;\n      } catch (e) {}\n    }());\n\n    /** Mocked built-ins. */\n    var ctxClearTimeout = context.clearTimeout !== root.clearTimeout && context.clearTimeout,\n        ctxNow = Date && Date.now !== root.Date.now && Date.now,\n        ctxSetTimeout = context.setTimeout !== root.setTimeout && context.setTimeout;\n\n    /* Built-in method references for those with the same name as other `lodash` methods. */\n    var nativeCeil = Math.ceil,\n        nativeFloor = Math.floor,\n        nativeGetSymbols = Object.getOwnPropertySymbols,\n        nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n        nativeIsFinite = context.isFinite,\n        nativeJoin = arrayProto.join,\n        nativeKeys = overArg(Object.keys, Object),\n        nativeMax = Math.max,\n        nativeMin = Math.min,\n        nativeNow = Date.now,\n        nativeParseInt = context.parseInt,\n        nativeRandom = Math.random,\n        nativeReverse = arrayProto.reverse;\n\n    /* Built-in method references that are verified to be native. */\n    var DataView = getNative(context, 'DataView'),\n        Map = getNative(context, 'Map'),\n        Promise = getNative(context, 'Promise'),\n        Set = getNative(context, 'Set'),\n        WeakMap = getNative(context, 'WeakMap'),\n        nativeCreate = getNative(Object, 'create');\n\n    /** Used to store function metadata. */\n    var metaMap = WeakMap && new WeakMap;\n\n    /** Used to lookup unminified function names. */\n    var realNames = {};\n\n    /** Used to detect maps, sets, and weakmaps. */\n    var dataViewCtorString = toSource(DataView),\n        mapCtorString = toSource(Map),\n        promiseCtorString = toSource(Promise),\n        setCtorString = toSource(Set),\n        weakMapCtorString = toSource(WeakMap);\n\n    /** Used to convert symbols to primitives and strings. */\n    var symbolProto = Symbol ? Symbol.prototype : undefined,\n        symbolValueOf = symbolProto ? symbolProto.valueOf : undefined,\n        symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` object which wraps `value` to enable implicit method\n     * chain sequences. Methods that operate on and return arrays, collections,\n     * and functions can be chained together. Methods that retrieve a single value\n     * or may return a primitive value will automatically end the chain sequence\n     * and return the unwrapped value. Otherwise, the value must be unwrapped\n     * with `_#value`.\n     *\n     * Explicit chain sequences, which must be unwrapped with `_#value`, may be\n     * enabled using `_.chain`.\n     *\n     * The execution of chained methods is lazy, that is, it's deferred until\n     * `_#value` is implicitly or explicitly called.\n     *\n     * Lazy evaluation allows several methods to support shortcut fusion.\n     * Shortcut fusion is an optimization to merge iteratee calls; this avoids\n     * the creation of intermediate arrays and can greatly reduce the number of\n     * iteratee executions. Sections of a chain sequence qualify for shortcut\n     * fusion if the section is applied to an array and iteratees accept only\n     * one argument. The heuristic for whether a section qualifies for shortcut\n     * fusion is subject to change.\n     *\n     * Chaining is supported in custom builds as long as the `_#value` method is\n     * directly or indirectly included in the build.\n     *\n     * In addition to lodash methods, wrappers have `Array` and `String` methods.\n     *\n     * The wrapper `Array` methods are:\n     * `concat`, `join`, `pop`, `push`, `shift`, `sort`, `splice`, and `unshift`\n     *\n     * The wrapper `String` methods are:\n     * `replace` and `split`\n     *\n     * The wrapper methods that support shortcut fusion are:\n     * `at`, `compact`, `drop`, `dropRight`, `dropWhile`, `filter`, `find`,\n     * `findLast`, `head`, `initial`, `last`, `map`, `reject`, `reverse`, `slice`,\n     * `tail`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, and `toArray`\n     *\n     * The chainable wrapper methods are:\n     * `after`, `ary`, `assign`, `assignIn`, `assignInWith`, `assignWith`, `at`,\n     * `before`, `bind`, `bindAll`, `bindKey`, `castArray`, `chain`, `chunk`,\n     * `commit`, `compact`, `concat`, `conforms`, `constant`, `countBy`, `create`,\n     * `curry`, `debounce`, `defaults`, `defaultsDeep`, `defer`, `delay`,\n     * `difference`, `differenceBy`, `differenceWith`, `drop`, `dropRight`,\n     * `dropRightWhile`, `dropWhile`, `extend`, `extendWith`, `fill`, `filter`,\n     * `flatMap`, `flatMapDeep`, `flatMapDepth`, `flatten`, `flattenDeep`,\n     * `flattenDepth`, `flip`, `flow`, `flowRight`, `fromPairs`, `functions`,\n     * `functionsIn`, `groupBy`, `initial`, `intersection`, `intersectionBy`,\n     * `intersectionWith`, `invert`, `invertBy`, `invokeMap`, `iteratee`, `keyBy`,\n     * `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`, `matchesProperty`,\n     * `memoize`, `merge`, `mergeWith`, `method`, `methodOf`, `mixin`, `negate`,\n     * `nthArg`, `omit`, `omitBy`, `once`, `orderBy`, `over`, `overArgs`,\n     * `overEvery`, `overSome`, `partial`, `partialRight`, `partition`, `pick`,\n     * `pickBy`, `plant`, `property`, `propertyOf`, `pull`, `pullAll`, `pullAllBy`,\n     * `pullAllWith`, `pullAt`, `push`, `range`, `rangeRight`, `rearg`, `reject`,\n     * `remove`, `rest`, `reverse`, `sampleSize`, `set`, `setWith`, `shuffle`,\n     * `slice`, `sort`, `sortBy`, `splice`, `spread`, `tail`, `take`, `takeRight`,\n     * `takeRightWhile`, `takeWhile`, `tap`, `throttle`, `thru`, `toArray`,\n     * `toPairs`, `toPairsIn`, `toPath`, `toPlainObject`, `transform`, `unary`,\n     * `union`, `unionBy`, `unionWith`, `uniq`, `uniqBy`, `uniqWith`, `unset`,\n     * `unshift`, `unzip`, `unzipWith`, `update`, `updateWith`, `values`,\n     * `valuesIn`, `without`, `wrap`, `xor`, `xorBy`, `xorWith`, `zip`,\n     * `zipObject`, `zipObjectDeep`, and `zipWith`\n     *\n     * The wrapper methods that are **not** chainable by default are:\n     * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clamp`, `clone`,\n     * `cloneDeep`, `cloneDeepWith`, `cloneWith`, `conformsTo`, `deburr`,\n     * `defaultTo`, `divide`, `each`, `eachRight`, `endsWith`, `eq`, `escape`,\n     * `escapeRegExp`, `every`, `find`, `findIndex`, `findKey`, `findLast`,\n     * `findLastIndex`, `findLastKey`, `first`, `floor`, `forEach`, `forEachRight`,\n     * `forIn`, `forInRight`, `forOwn`, `forOwnRight`, `get`, `gt`, `gte`, `has`,\n     * `hasIn`, `head`, `identity`, `includes`, `indexOf`, `inRange`, `invoke`,\n     * `isArguments`, `isArray`, `isArrayBuffer`, `isArrayLike`, `isArrayLikeObject`,\n     * `isBoolean`, `isBuffer`, `isDate`, `isElement`, `isEmpty`, `isEqual`,\n     * `isEqualWith`, `isError`, `isFinite`, `isFunction`, `isInteger`, `isLength`,\n     * `isMap`, `isMatch`, `isMatchWith`, `isNaN`, `isNative`, `isNil`, `isNull`,\n     * `isNumber`, `isObject`, `isObjectLike`, `isPlainObject`, `isRegExp`,\n     * `isSafeInteger`, `isSet`, `isString`, `isUndefined`, `isTypedArray`,\n     * `isWeakMap`, `isWeakSet`, `join`, `kebabCase`, `last`, `lastIndexOf`,\n     * `lowerCase`, `lowerFirst`, `lt`, `lte`, `max`, `maxBy`, `mean`, `meanBy`,\n     * `min`, `minBy`, `multiply`, `noConflict`, `noop`, `now`, `nth`, `pad`,\n     * `padEnd`, `padStart`, `parseInt`, `pop`, `random`, `reduce`, `reduceRight`,\n     * `repeat`, `result`, `round`, `runInContext`, `sample`, `shift`, `size`,\n     * `snakeCase`, `some`, `sortedIndex`, `sortedIndexBy`, `sortedLastIndex`,\n     * `sortedLastIndexBy`, `startCase`, `startsWith`, `stubArray`, `stubFalse`,\n     * `stubObject`, `stubString`, `stubTrue`, `subtract`, `sum`, `sumBy`,\n     * `template`, `times`, `toFinite`, `toInteger`, `toJSON`, `toLength`,\n     * `toLower`, `toNumber`, `toSafeInteger`, `toString`, `toUpper`, `trim`,\n     * `trimEnd`, `trimStart`, `truncate`, `unescape`, `uniqueId`, `upperCase`,\n     * `upperFirst`, `value`, and `words`\n     *\n     * @name _\n     * @constructor\n     * @category Seq\n     * @param {*} value The value to wrap in a `lodash` instance.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var wrapped = _([1, 2, 3]);\n     *\n     * // Returns an unwrapped value.\n     * wrapped.reduce(_.add);\n     * // => 6\n     *\n     * // Returns a wrapped value.\n     * var squares = wrapped.map(square);\n     *\n     * _.isArray(squares);\n     * // => false\n     *\n     * _.isArray(squares.value());\n     * // => true\n     */\n    function lodash(value) {\n      if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {\n        if (value instanceof LodashWrapper) {\n          return value;\n        }\n        if (hasOwnProperty.call(value, '__wrapped__')) {\n          return wrapperClone(value);\n        }\n      }\n      return new LodashWrapper(value);\n    }\n\n    /**\n     * The base implementation of `_.create` without support for assigning\n     * properties to the created object.\n     *\n     * @private\n     * @param {Object} proto The object to inherit from.\n     * @returns {Object} Returns the new object.\n     */\n    var baseCreate = (function() {\n      function object() {}\n      return function(proto) {\n        if (!isObject(proto)) {\n          return {};\n        }\n        if (objectCreate) {\n          return objectCreate(proto);\n        }\n        object.prototype = proto;\n        var result = new object;\n        object.prototype = undefined;\n        return result;\n      };\n    }());\n\n    /**\n     * The function whose prototype chain sequence wrappers inherit from.\n     *\n     * @private\n     */\n    function baseLodash() {\n      // No operation performed.\n    }\n\n    /**\n     * The base constructor for creating `lodash` wrapper objects.\n     *\n     * @private\n     * @param {*} value The value to wrap.\n     * @param {boolean} [chainAll] Enable explicit method chain sequences.\n     */\n    function LodashWrapper(value, chainAll) {\n      this.__wrapped__ = value;\n      this.__actions__ = [];\n      this.__chain__ = !!chainAll;\n      this.__index__ = 0;\n      this.__values__ = undefined;\n    }\n\n    /**\n     * By default, the template delimiters used by lodash are like those in\n     * embedded Ruby (ERB) as well as ES2015 template strings. Change the\n     * following template settings to use alternative delimiters.\n     *\n     * @static\n     * @memberOf _\n     * @type {Object}\n     */\n    lodash.templateSettings = {\n\n      /**\n       * Used to detect `data` property values to be HTML-escaped.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'escape': reEscape,\n\n      /**\n       * Used to detect code to be evaluated.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'evaluate': reEvaluate,\n\n      /**\n       * Used to detect `data` property values to inject.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'interpolate': reInterpolate,\n\n      /**\n       * Used to reference the data object in the template text.\n       *\n       * @memberOf _.templateSettings\n       * @type {string}\n       */\n      'variable': '',\n\n      /**\n       * Used to import variables into the compiled template.\n       *\n       * @memberOf _.templateSettings\n       * @type {Object}\n       */\n      'imports': {\n\n        /**\n         * A reference to the `lodash` function.\n         *\n         * @memberOf _.templateSettings.imports\n         * @type {Function}\n         */\n        '_': lodash\n      }\n    };\n\n    // Ensure wrappers are instances of `baseLodash`.\n    lodash.prototype = baseLodash.prototype;\n    lodash.prototype.constructor = lodash;\n\n    LodashWrapper.prototype = baseCreate(baseLodash.prototype);\n    LodashWrapper.prototype.constructor = LodashWrapper;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.\n     *\n     * @private\n     * @constructor\n     * @param {*} value The value to wrap.\n     */\n    function LazyWrapper(value) {\n      this.__wrapped__ = value;\n      this.__actions__ = [];\n      this.__dir__ = 1;\n      this.__filtered__ = false;\n      this.__iteratees__ = [];\n      this.__takeCount__ = MAX_ARRAY_LENGTH;\n      this.__views__ = [];\n    }\n\n    /**\n     * Creates a clone of the lazy wrapper object.\n     *\n     * @private\n     * @name clone\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the cloned `LazyWrapper` object.\n     */\n    function lazyClone() {\n      var result = new LazyWrapper(this.__wrapped__);\n      result.__actions__ = copyArray(this.__actions__);\n      result.__dir__ = this.__dir__;\n      result.__filtered__ = this.__filtered__;\n      result.__iteratees__ = copyArray(this.__iteratees__);\n      result.__takeCount__ = this.__takeCount__;\n      result.__views__ = copyArray(this.__views__);\n      return result;\n    }\n\n    /**\n     * Reverses the direction of lazy iteration.\n     *\n     * @private\n     * @name reverse\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the new reversed `LazyWrapper` object.\n     */\n    function lazyReverse() {\n      if (this.__filtered__) {\n        var result = new LazyWrapper(this);\n        result.__dir__ = -1;\n        result.__filtered__ = true;\n      } else {\n        result = this.clone();\n        result.__dir__ *= -1;\n      }\n      return result;\n    }\n\n    /**\n     * Extracts the unwrapped value from its lazy wrapper.\n     *\n     * @private\n     * @name value\n     * @memberOf LazyWrapper\n     * @returns {*} Returns the unwrapped value.\n     */\n    function lazyValue() {\n      var array = this.__wrapped__.value(),\n          dir = this.__dir__,\n          isArr = isArray(array),\n          isRight = dir < 0,\n          arrLength = isArr ? array.length : 0,\n          view = getView(0, arrLength, this.__views__),\n          start = view.start,\n          end = view.end,\n          length = end - start,\n          index = isRight ? end : (start - 1),\n          iteratees = this.__iteratees__,\n          iterLength = iteratees.length,\n          resIndex = 0,\n          takeCount = nativeMin(length, this.__takeCount__);\n\n      if (!isArr || (!isRight && arrLength == length && takeCount == length)) {\n        return baseWrapperValue(array, this.__actions__);\n      }\n      var result = [];\n\n      outer:\n      while (length-- && resIndex < takeCount) {\n        index += dir;\n\n        var iterIndex = -1,\n            value = array[index];\n\n        while (++iterIndex < iterLength) {\n          var data = iteratees[iterIndex],\n              iteratee = data.iteratee,\n              type = data.type,\n              computed = iteratee(value);\n\n          if (type == LAZY_MAP_FLAG) {\n            value = computed;\n          } else if (!computed) {\n            if (type == LAZY_FILTER_FLAG) {\n              continue outer;\n            } else {\n              break outer;\n            }\n          }\n        }\n        result[resIndex++] = value;\n      }\n      return result;\n    }\n\n    // Ensure `LazyWrapper` is an instance of `baseLodash`.\n    LazyWrapper.prototype = baseCreate(baseLodash.prototype);\n    LazyWrapper.prototype.constructor = LazyWrapper;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a hash object.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function Hash(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the hash.\n     *\n     * @private\n     * @name clear\n     * @memberOf Hash\n     */\n    function hashClear() {\n      this.__data__ = nativeCreate ? nativeCreate(null) : {};\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the hash.\n     *\n     * @private\n     * @name delete\n     * @memberOf Hash\n     * @param {Object} hash The hash to modify.\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function hashDelete(key) {\n      var result = this.has(key) && delete this.__data__[key];\n      this.size -= result ? 1 : 0;\n      return result;\n    }\n\n    /**\n     * Gets the hash value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf Hash\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function hashGet(key) {\n      var data = this.__data__;\n      if (nativeCreate) {\n        var result = data[key];\n        return result === HASH_UNDEFINED ? undefined : result;\n      }\n      return hasOwnProperty.call(data, key) ? data[key] : undefined;\n    }\n\n    /**\n     * Checks if a hash value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf Hash\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function hashHas(key) {\n      var data = this.__data__;\n      return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n    }\n\n    /**\n     * Sets the hash `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf Hash\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the hash instance.\n     */\n    function hashSet(key, value) {\n      var data = this.__data__;\n      this.size += this.has(key) ? 0 : 1;\n      data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n      return this;\n    }\n\n    // Add methods to `Hash`.\n    Hash.prototype.clear = hashClear;\n    Hash.prototype['delete'] = hashDelete;\n    Hash.prototype.get = hashGet;\n    Hash.prototype.has = hashHas;\n    Hash.prototype.set = hashSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an list cache object.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function ListCache(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the list cache.\n     *\n     * @private\n     * @name clear\n     * @memberOf ListCache\n     */\n    function listCacheClear() {\n      this.__data__ = [];\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the list cache.\n     *\n     * @private\n     * @name delete\n     * @memberOf ListCache\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function listCacheDelete(key) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      if (index < 0) {\n        return false;\n      }\n      var lastIndex = data.length - 1;\n      if (index == lastIndex) {\n        data.pop();\n      } else {\n        splice.call(data, index, 1);\n      }\n      --this.size;\n      return true;\n    }\n\n    /**\n     * Gets the list cache value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf ListCache\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function listCacheGet(key) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      return index < 0 ? undefined : data[index][1];\n    }\n\n    /**\n     * Checks if a list cache value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf ListCache\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function listCacheHas(key) {\n      return assocIndexOf(this.__data__, key) > -1;\n    }\n\n    /**\n     * Sets the list cache `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf ListCache\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the list cache instance.\n     */\n    function listCacheSet(key, value) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      if (index < 0) {\n        ++this.size;\n        data.push([key, value]);\n      } else {\n        data[index][1] = value;\n      }\n      return this;\n    }\n\n    // Add methods to `ListCache`.\n    ListCache.prototype.clear = listCacheClear;\n    ListCache.prototype['delete'] = listCacheDelete;\n    ListCache.prototype.get = listCacheGet;\n    ListCache.prototype.has = listCacheHas;\n    ListCache.prototype.set = listCacheSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a map cache object to store key-value pairs.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function MapCache(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the map.\n     *\n     * @private\n     * @name clear\n     * @memberOf MapCache\n     */\n    function mapCacheClear() {\n      this.size = 0;\n      this.__data__ = {\n        'hash': new Hash,\n        'map': new (Map || ListCache),\n        'string': new Hash\n      };\n    }\n\n    /**\n     * Removes `key` and its value from the map.\n     *\n     * @private\n     * @name delete\n     * @memberOf MapCache\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function mapCacheDelete(key) {\n      var result = getMapData(this, key)['delete'](key);\n      this.size -= result ? 1 : 0;\n      return result;\n    }\n\n    /**\n     * Gets the map value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf MapCache\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function mapCacheGet(key) {\n      return getMapData(this, key).get(key);\n    }\n\n    /**\n     * Checks if a map value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf MapCache\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function mapCacheHas(key) {\n      return getMapData(this, key).has(key);\n    }\n\n    /**\n     * Sets the map `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf MapCache\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the map cache instance.\n     */\n    function mapCacheSet(key, value) {\n      var data = getMapData(this, key),\n          size = data.size;\n\n      data.set(key, value);\n      this.size += data.size == size ? 0 : 1;\n      return this;\n    }\n\n    // Add methods to `MapCache`.\n    MapCache.prototype.clear = mapCacheClear;\n    MapCache.prototype['delete'] = mapCacheDelete;\n    MapCache.prototype.get = mapCacheGet;\n    MapCache.prototype.has = mapCacheHas;\n    MapCache.prototype.set = mapCacheSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     *\n     * Creates an array cache object to store unique values.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [values] The values to cache.\n     */\n    function SetCache(values) {\n      var index = -1,\n          length = values == null ? 0 : values.length;\n\n      this.__data__ = new MapCache;\n      while (++index < length) {\n        this.add(values[index]);\n      }\n    }\n\n    /**\n     * Adds `value` to the array cache.\n     *\n     * @private\n     * @name add\n     * @memberOf SetCache\n     * @alias push\n     * @param {*} value The value to cache.\n     * @returns {Object} Returns the cache instance.\n     */\n    function setCacheAdd(value) {\n      this.__data__.set(value, HASH_UNDEFINED);\n      return this;\n    }\n\n    /**\n     * Checks if `value` is in the array cache.\n     *\n     * @private\n     * @name has\n     * @memberOf SetCache\n     * @param {*} value The value to search for.\n     * @returns {number} Returns `true` if `value` is found, else `false`.\n     */\n    function setCacheHas(value) {\n      return this.__data__.has(value);\n    }\n\n    // Add methods to `SetCache`.\n    SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\n    SetCache.prototype.has = setCacheHas;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a stack cache object to store key-value pairs.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function Stack(entries) {\n      var data = this.__data__ = new ListCache(entries);\n      this.size = data.size;\n    }\n\n    /**\n     * Removes all key-value entries from the stack.\n     *\n     * @private\n     * @name clear\n     * @memberOf Stack\n     */\n    function stackClear() {\n      this.__data__ = new ListCache;\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the stack.\n     *\n     * @private\n     * @name delete\n     * @memberOf Stack\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function stackDelete(key) {\n      var data = this.__data__,\n          result = data['delete'](key);\n\n      this.size = data.size;\n      return result;\n    }\n\n    /**\n     * Gets the stack value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf Stack\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function stackGet(key) {\n      return this.__data__.get(key);\n    }\n\n    /**\n     * Checks if a stack value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf Stack\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function stackHas(key) {\n      return this.__data__.has(key);\n    }\n\n    /**\n     * Sets the stack `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf Stack\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the stack cache instance.\n     */\n    function stackSet(key, value) {\n      var data = this.__data__;\n      if (data instanceof ListCache) {\n        var pairs = data.__data__;\n        if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n          pairs.push([key, value]);\n          this.size = ++data.size;\n          return this;\n        }\n        data = this.__data__ = new MapCache(pairs);\n      }\n      data.set(key, value);\n      this.size = data.size;\n      return this;\n    }\n\n    // Add methods to `Stack`.\n    Stack.prototype.clear = stackClear;\n    Stack.prototype['delete'] = stackDelete;\n    Stack.prototype.get = stackGet;\n    Stack.prototype.has = stackHas;\n    Stack.prototype.set = stackSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of the enumerable property names of the array-like `value`.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @param {boolean} inherited Specify returning inherited property names.\n     * @returns {Array} Returns the array of property names.\n     */\n    function arrayLikeKeys(value, inherited) {\n      var isArr = isArray(value),\n          isArg = !isArr && isArguments(value),\n          isBuff = !isArr && !isArg && isBuffer(value),\n          isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n          skipIndexes = isArr || isArg || isBuff || isType,\n          result = skipIndexes ? baseTimes(value.length, String) : [],\n          length = result.length;\n\n      for (var key in value) {\n        if ((inherited || hasOwnProperty.call(value, key)) &&\n            !(skipIndexes && (\n               // Safari 9 has enumerable `arguments.length` in strict mode.\n               key == 'length' ||\n               // Node.js 0.10 has enumerable non-index properties on buffers.\n               (isBuff && (key == 'offset' || key == 'parent')) ||\n               // PhantomJS 2 has enumerable non-index properties on typed arrays.\n               (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n               // Skip index properties.\n               isIndex(key, length)\n            ))) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `_.sample` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to sample.\n     * @returns {*} Returns the random element.\n     */\n    function arraySample(array) {\n      var length = array.length;\n      return length ? array[baseRandom(0, length - 1)] : undefined;\n    }\n\n    /**\n     * A specialized version of `_.sampleSize` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to sample.\n     * @param {number} n The number of elements to sample.\n     * @returns {Array} Returns the random elements.\n     */\n    function arraySampleSize(array, n) {\n      return shuffleSelf(copyArray(array), baseClamp(n, 0, array.length));\n    }\n\n    /**\n     * A specialized version of `_.shuffle` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     */\n    function arrayShuffle(array) {\n      return shuffleSelf(copyArray(array));\n    }\n\n    /**\n     * This function is like `assignValue` except that it doesn't assign\n     * `undefined` values.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function assignMergeValue(object, key, value) {\n      if ((value !== undefined && !eq(object[key], value)) ||\n          (value === undefined && !(key in object))) {\n        baseAssignValue(object, key, value);\n      }\n    }\n\n    /**\n     * Assigns `value` to `key` of `object` if the existing value is not equivalent\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function assignValue(object, key, value) {\n      var objValue = object[key];\n      if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n          (value === undefined && !(key in object))) {\n        baseAssignValue(object, key, value);\n      }\n    }\n\n    /**\n     * Gets the index at which the `key` is found in `array` of key-value pairs.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {*} key The key to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     */\n    function assocIndexOf(array, key) {\n      var length = array.length;\n      while (length--) {\n        if (eq(array[length][0], key)) {\n          return length;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Aggregates elements of `collection` on `accumulator` with keys transformed\n     * by `iteratee` and values set by `setter`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} setter The function to set `accumulator` values.\n     * @param {Function} iteratee The iteratee to transform keys.\n     * @param {Object} accumulator The initial aggregated object.\n     * @returns {Function} Returns `accumulator`.\n     */\n    function baseAggregator(collection, setter, iteratee, accumulator) {\n      baseEach(collection, function(value, key, collection) {\n        setter(accumulator, value, iteratee(value), collection);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The base implementation of `_.assign` without support for multiple sources\n     * or `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @returns {Object} Returns `object`.\n     */\n    function baseAssign(object, source) {\n      return object && copyObject(source, keys(source), object);\n    }\n\n    /**\n     * The base implementation of `_.assignIn` without support for multiple sources\n     * or `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @returns {Object} Returns `object`.\n     */\n    function baseAssignIn(object, source) {\n      return object && copyObject(source, keysIn(source), object);\n    }\n\n    /**\n     * The base implementation of `assignValue` and `assignMergeValue` without\n     * value checks.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function baseAssignValue(object, key, value) {\n      if (key == '__proto__' && defineProperty) {\n        defineProperty(object, key, {\n          'configurable': true,\n          'enumerable': true,\n          'value': value,\n          'writable': true\n        });\n      } else {\n        object[key] = value;\n      }\n    }\n\n    /**\n     * The base implementation of `_.at` without support for individual paths.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {string[]} paths The property paths to pick.\n     * @returns {Array} Returns the picked elements.\n     */\n    function baseAt(object, paths) {\n      var index = -1,\n          length = paths.length,\n          result = Array(length),\n          skip = object == null;\n\n      while (++index < length) {\n        result[index] = skip ? undefined : get(object, paths[index]);\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.clamp` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {number} number The number to clamp.\n     * @param {number} [lower] The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the clamped number.\n     */\n    function baseClamp(number, lower, upper) {\n      if (number === number) {\n        if (upper !== undefined) {\n          number = number <= upper ? number : upper;\n        }\n        if (lower !== undefined) {\n          number = number >= lower ? number : lower;\n        }\n      }\n      return number;\n    }\n\n    /**\n     * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n     * traversed objects.\n     *\n     * @private\n     * @param {*} value The value to clone.\n     * @param {boolean} bitmask The bitmask flags.\n     *  1 - Deep clone\n     *  2 - Flatten inherited properties\n     *  4 - Clone symbols\n     * @param {Function} [customizer] The function to customize cloning.\n     * @param {string} [key] The key of `value`.\n     * @param {Object} [object] The parent object of `value`.\n     * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n     * @returns {*} Returns the cloned value.\n     */\n    function baseClone(value, bitmask, customizer, key, object, stack) {\n      var result,\n          isDeep = bitmask & CLONE_DEEP_FLAG,\n          isFlat = bitmask & CLONE_FLAT_FLAG,\n          isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n      if (customizer) {\n        result = object ? customizer(value, key, object, stack) : customizer(value);\n      }\n      if (result !== undefined) {\n        return result;\n      }\n      if (!isObject(value)) {\n        return value;\n      }\n      var isArr = isArray(value);\n      if (isArr) {\n        result = initCloneArray(value);\n        if (!isDeep) {\n          return copyArray(value, result);\n        }\n      } else {\n        var tag = getTag(value),\n            isFunc = tag == funcTag || tag == genTag;\n\n        if (isBuffer(value)) {\n          return cloneBuffer(value, isDeep);\n        }\n        if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n          result = (isFlat || isFunc) ? {} : initCloneObject(value);\n          if (!isDeep) {\n            return isFlat\n              ? copySymbolsIn(value, baseAssignIn(result, value))\n              : copySymbols(value, baseAssign(result, value));\n          }\n        } else {\n          if (!cloneableTags[tag]) {\n            return object ? value : {};\n          }\n          result = initCloneByTag(value, tag, isDeep);\n        }\n      }\n      // Check for circular references and return its corresponding clone.\n      stack || (stack = new Stack);\n      var stacked = stack.get(value);\n      if (stacked) {\n        return stacked;\n      }\n      stack.set(value, result);\n\n      if (isSet(value)) {\n        value.forEach(function(subValue) {\n          result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n        });\n      } else if (isMap(value)) {\n        value.forEach(function(subValue, key) {\n          result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n        });\n      }\n\n      var keysFunc = isFull\n        ? (isFlat ? getAllKeysIn : getAllKeys)\n        : (isFlat ? keysIn : keys);\n\n      var props = isArr ? undefined : keysFunc(value);\n      arrayEach(props || value, function(subValue, key) {\n        if (props) {\n          key = subValue;\n          subValue = value[key];\n        }\n        // Recursively populate clone (susceptible to call stack limits).\n        assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.conforms` which doesn't clone `source`.\n     *\n     * @private\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseConforms(source) {\n      var props = keys(source);\n      return function(object) {\n        return baseConformsTo(object, source, props);\n      };\n    }\n\n    /**\n     * The base implementation of `_.conformsTo` which accepts `props` to check.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {boolean} Returns `true` if `object` conforms, else `false`.\n     */\n    function baseConformsTo(object, source, props) {\n      var length = props.length;\n      if (object == null) {\n        return !length;\n      }\n      object = Object(object);\n      while (length--) {\n        var key = props[length],\n            predicate = source[key],\n            value = object[key];\n\n        if ((value === undefined && !(key in object)) || !predicate(value)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * The base implementation of `_.delay` and `_.defer` which accepts `args`\n     * to provide to `func`.\n     *\n     * @private\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {Array} args The arguments to provide to `func`.\n     * @returns {number|Object} Returns the timer id or timeout object.\n     */\n    function baseDelay(func, wait, args) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return setTimeout(function() { func.apply(undefined, args); }, wait);\n    }\n\n    /**\n     * The base implementation of methods like `_.difference` without support\n     * for excluding multiple arrays or iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Array} values The values to exclude.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     */\n    function baseDifference(array, values, iteratee, comparator) {\n      var index = -1,\n          includes = arrayIncludes,\n          isCommon = true,\n          length = array.length,\n          result = [],\n          valuesLength = values.length;\n\n      if (!length) {\n        return result;\n      }\n      if (iteratee) {\n        values = arrayMap(values, baseUnary(iteratee));\n      }\n      if (comparator) {\n        includes = arrayIncludesWith;\n        isCommon = false;\n      }\n      else if (values.length >= LARGE_ARRAY_SIZE) {\n        includes = cacheHas;\n        isCommon = false;\n        values = new SetCache(values);\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee == null ? value : iteratee(value);\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (isCommon && computed === computed) {\n          var valuesIndex = valuesLength;\n          while (valuesIndex--) {\n            if (values[valuesIndex] === computed) {\n              continue outer;\n            }\n          }\n          result.push(value);\n        }\n        else if (!includes(values, computed, comparator)) {\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.forEach` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     */\n    var baseEach = createBaseEach(baseForOwn);\n\n    /**\n     * The base implementation of `_.forEachRight` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     */\n    var baseEachRight = createBaseEach(baseForOwnRight, true);\n\n    /**\n     * The base implementation of `_.every` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`\n     */\n    function baseEvery(collection, predicate) {\n      var result = true;\n      baseEach(collection, function(value, index, collection) {\n        result = !!predicate(value, index, collection);\n        return result;\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of methods like `_.max` and `_.min` which accepts a\n     * `comparator` to determine the extremum value.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The iteratee invoked per iteration.\n     * @param {Function} comparator The comparator used to compare values.\n     * @returns {*} Returns the extremum value.\n     */\n    function baseExtremum(array, iteratee, comparator) {\n      var index = -1,\n          length = array.length;\n\n      while (++index < length) {\n        var value = array[index],\n            current = iteratee(value);\n\n        if (current != null && (computed === undefined\n              ? (current === current && !isSymbol(current))\n              : comparator(current, computed)\n            )) {\n          var computed = current,\n              result = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.fill` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     */\n    function baseFill(array, value, start, end) {\n      var length = array.length;\n\n      start = toInteger(start);\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = (end === undefined || end > length) ? length : toInteger(end);\n      if (end < 0) {\n        end += length;\n      }\n      end = start > end ? 0 : toLength(end);\n      while (start < end) {\n        array[start++] = value;\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.filter` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     */\n    function baseFilter(collection, predicate) {\n      var result = [];\n      baseEach(collection, function(value, index, collection) {\n        if (predicate(value, index, collection)) {\n          result.push(value);\n        }\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.flatten` with support for restricting flattening.\n     *\n     * @private\n     * @param {Array} array The array to flatten.\n     * @param {number} depth The maximum recursion depth.\n     * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n     * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n     * @param {Array} [result=[]] The initial result value.\n     * @returns {Array} Returns the new flattened array.\n     */\n    function baseFlatten(array, depth, predicate, isStrict, result) {\n      var index = -1,\n          length = array.length;\n\n      predicate || (predicate = isFlattenable);\n      result || (result = []);\n\n      while (++index < length) {\n        var value = array[index];\n        if (depth > 0 && predicate(value)) {\n          if (depth > 1) {\n            // Recursively flatten arrays (susceptible to call stack limits).\n            baseFlatten(value, depth - 1, predicate, isStrict, result);\n          } else {\n            arrayPush(result, value);\n          }\n        } else if (!isStrict) {\n          result[result.length] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `baseForOwn` which iterates over `object`\n     * properties returned by `keysFunc` and invokes `iteratee` for each property.\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseFor = createBaseFor();\n\n    /**\n     * This function is like `baseFor` except that it iterates over properties\n     * in the opposite order.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseForRight = createBaseFor(true);\n\n    /**\n     * The base implementation of `_.forOwn` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwn(object, iteratee) {\n      return object && baseFor(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.forOwnRight` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwnRight(object, iteratee) {\n      return object && baseForRight(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.functions` which creates an array of\n     * `object` function property names filtered from `props`.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Array} props The property names to filter.\n     * @returns {Array} Returns the function names.\n     */\n    function baseFunctions(object, props) {\n      return arrayFilter(props, function(key) {\n        return isFunction(object[key]);\n      });\n    }\n\n    /**\n     * The base implementation of `_.get` without support for default values.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseGet(object, path) {\n      path = castPath(path, object);\n\n      var index = 0,\n          length = path.length;\n\n      while (object != null && index < length) {\n        object = object[toKey(path[index++])];\n      }\n      return (index && index == length) ? object : undefined;\n    }\n\n    /**\n     * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n     * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n     * symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @param {Function} symbolsFunc The function to get the symbols of `object`.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function baseGetAllKeys(object, keysFunc, symbolsFunc) {\n      var result = keysFunc(object);\n      return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n    }\n\n    /**\n     * The base implementation of `getTag` without fallbacks for buggy environments.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the `toStringTag`.\n     */\n    function baseGetTag(value) {\n      if (value == null) {\n        return value === undefined ? undefinedTag : nullTag;\n      }\n      return (symToStringTag && symToStringTag in Object(value))\n        ? getRawTag(value)\n        : objectToString(value);\n    }\n\n    /**\n     * The base implementation of `_.gt` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than `other`,\n     *  else `false`.\n     */\n    function baseGt(value, other) {\n      return value > other;\n    }\n\n    /**\n     * The base implementation of `_.has` without support for deep paths.\n     *\n     * @private\n     * @param {Object} [object] The object to query.\n     * @param {Array|string} key The key to check.\n     * @returns {boolean} Returns `true` if `key` exists, else `false`.\n     */\n    function baseHas(object, key) {\n      return object != null && hasOwnProperty.call(object, key);\n    }\n\n    /**\n     * The base implementation of `_.hasIn` without support for deep paths.\n     *\n     * @private\n     * @param {Object} [object] The object to query.\n     * @param {Array|string} key The key to check.\n     * @returns {boolean} Returns `true` if `key` exists, else `false`.\n     */\n    function baseHasIn(object, key) {\n      return object != null && key in Object(object);\n    }\n\n    /**\n     * The base implementation of `_.inRange` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {number} number The number to check.\n     * @param {number} start The start of the range.\n     * @param {number} end The end of the range.\n     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n     */\n    function baseInRange(number, start, end) {\n      return number >= nativeMin(start, end) && number < nativeMax(start, end);\n    }\n\n    /**\n     * The base implementation of methods like `_.intersection`, without support\n     * for iteratee shorthands, that accepts an array of arrays to inspect.\n     *\n     * @private\n     * @param {Array} arrays The arrays to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of shared values.\n     */\n    function baseIntersection(arrays, iteratee, comparator) {\n      var includes = comparator ? arrayIncludesWith : arrayIncludes,\n          length = arrays[0].length,\n          othLength = arrays.length,\n          othIndex = othLength,\n          caches = Array(othLength),\n          maxLength = Infinity,\n          result = [];\n\n      while (othIndex--) {\n        var array = arrays[othIndex];\n        if (othIndex && iteratee) {\n          array = arrayMap(array, baseUnary(iteratee));\n        }\n        maxLength = nativeMin(array.length, maxLength);\n        caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))\n          ? new SetCache(othIndex && array)\n          : undefined;\n      }\n      array = arrays[0];\n\n      var index = -1,\n          seen = caches[0];\n\n      outer:\n      while (++index < length && result.length < maxLength) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (!(seen\n              ? cacheHas(seen, computed)\n              : includes(result, computed, comparator)\n            )) {\n          othIndex = othLength;\n          while (--othIndex) {\n            var cache = caches[othIndex];\n            if (!(cache\n                  ? cacheHas(cache, computed)\n                  : includes(arrays[othIndex], computed, comparator))\n                ) {\n              continue outer;\n            }\n          }\n          if (seen) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.invert` and `_.invertBy` which inverts\n     * `object` with values transformed by `iteratee` and set by `setter`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} setter The function to set `accumulator` values.\n     * @param {Function} iteratee The iteratee to transform values.\n     * @param {Object} accumulator The initial inverted object.\n     * @returns {Function} Returns `accumulator`.\n     */\n    function baseInverter(object, setter, iteratee, accumulator) {\n      baseForOwn(object, function(value, key, object) {\n        setter(accumulator, iteratee(value), key, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The base implementation of `_.invoke` without support for individual\n     * method arguments.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {Array} args The arguments to invoke the method with.\n     * @returns {*} Returns the result of the invoked method.\n     */\n    function baseInvoke(object, path, args) {\n      path = castPath(path, object);\n      object = parent(object, path);\n      var func = object == null ? object : object[toKey(last(path))];\n      return func == null ? undefined : apply(func, object, args);\n    }\n\n    /**\n     * The base implementation of `_.isArguments`.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n     */\n    function baseIsArguments(value) {\n      return isObjectLike(value) && baseGetTag(value) == argsTag;\n    }\n\n    /**\n     * The base implementation of `_.isArrayBuffer` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.\n     */\n    function baseIsArrayBuffer(value) {\n      return isObjectLike(value) && baseGetTag(value) == arrayBufferTag;\n    }\n\n    /**\n     * The base implementation of `_.isDate` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n     */\n    function baseIsDate(value) {\n      return isObjectLike(value) && baseGetTag(value) == dateTag;\n    }\n\n    /**\n     * The base implementation of `_.isEqual` which supports partial comparisons\n     * and tracks traversed objects.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {boolean} bitmask The bitmask flags.\n     *  1 - Unordered comparison\n     *  2 - Partial comparison\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     */\n    function baseIsEqual(value, other, bitmask, customizer, stack) {\n      if (value === other) {\n        return true;\n      }\n      if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n        return value !== value && other !== other;\n      }\n      return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n    }\n\n    /**\n     * A specialized version of `baseIsEqual` for arrays and objects which performs\n     * deep comparisons and tracks traversed objects enabling objects with circular\n     * references to be compared.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n      var objIsArr = isArray(object),\n          othIsArr = isArray(other),\n          objTag = objIsArr ? arrayTag : getTag(object),\n          othTag = othIsArr ? arrayTag : getTag(other);\n\n      objTag = objTag == argsTag ? objectTag : objTag;\n      othTag = othTag == argsTag ? objectTag : othTag;\n\n      var objIsObj = objTag == objectTag,\n          othIsObj = othTag == objectTag,\n          isSameTag = objTag == othTag;\n\n      if (isSameTag && isBuffer(object)) {\n        if (!isBuffer(other)) {\n          return false;\n        }\n        objIsArr = true;\n        objIsObj = false;\n      }\n      if (isSameTag && !objIsObj) {\n        stack || (stack = new Stack);\n        return (objIsArr || isTypedArray(object))\n          ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n          : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n      }\n      if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n        var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n            othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n        if (objIsWrapped || othIsWrapped) {\n          var objUnwrapped = objIsWrapped ? object.value() : object,\n              othUnwrapped = othIsWrapped ? other.value() : other;\n\n          stack || (stack = new Stack);\n          return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n        }\n      }\n      if (!isSameTag) {\n        return false;\n      }\n      stack || (stack = new Stack);\n      return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n    }\n\n    /**\n     * The base implementation of `_.isMap` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n     */\n    function baseIsMap(value) {\n      return isObjectLike(value) && getTag(value) == mapTag;\n    }\n\n    /**\n     * The base implementation of `_.isMatch` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @param {Array} matchData The property names, values, and compare flags to match.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     */\n    function baseIsMatch(object, source, matchData, customizer) {\n      var index = matchData.length,\n          length = index,\n          noCustomizer = !customizer;\n\n      if (object == null) {\n        return !length;\n      }\n      object = Object(object);\n      while (index--) {\n        var data = matchData[index];\n        if ((noCustomizer && data[2])\n              ? data[1] !== object[data[0]]\n              : !(data[0] in object)\n            ) {\n          return false;\n        }\n      }\n      while (++index < length) {\n        data = matchData[index];\n        var key = data[0],\n            objValue = object[key],\n            srcValue = data[1];\n\n        if (noCustomizer && data[2]) {\n          if (objValue === undefined && !(key in object)) {\n            return false;\n          }\n        } else {\n          var stack = new Stack;\n          if (customizer) {\n            var result = customizer(objValue, srcValue, key, object, source, stack);\n          }\n          if (!(result === undefined\n                ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n                : result\n              )) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n\n    /**\n     * The base implementation of `_.isNative` without bad shim checks.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a native function,\n     *  else `false`.\n     */\n    function baseIsNative(value) {\n      if (!isObject(value) || isMasked(value)) {\n        return false;\n      }\n      var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n      return pattern.test(toSource(value));\n    }\n\n    /**\n     * The base implementation of `_.isRegExp` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n     */\n    function baseIsRegExp(value) {\n      return isObjectLike(value) && baseGetTag(value) == regexpTag;\n    }\n\n    /**\n     * The base implementation of `_.isSet` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n     */\n    function baseIsSet(value) {\n      return isObjectLike(value) && getTag(value) == setTag;\n    }\n\n    /**\n     * The base implementation of `_.isTypedArray` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n     */\n    function baseIsTypedArray(value) {\n      return isObjectLike(value) &&\n        isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n    }\n\n    /**\n     * The base implementation of `_.iteratee`.\n     *\n     * @private\n     * @param {*} [value=_.identity] The value to convert to an iteratee.\n     * @returns {Function} Returns the iteratee.\n     */\n    function baseIteratee(value) {\n      // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n      // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n      if (typeof value == 'function') {\n        return value;\n      }\n      if (value == null) {\n        return identity;\n      }\n      if (typeof value == 'object') {\n        return isArray(value)\n          ? baseMatchesProperty(value[0], value[1])\n          : baseMatches(value);\n      }\n      return property(value);\n    }\n\n    /**\n     * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function baseKeys(object) {\n      if (!isPrototype(object)) {\n        return nativeKeys(object);\n      }\n      var result = [];\n      for (var key in Object(object)) {\n        if (hasOwnProperty.call(object, key) && key != 'constructor') {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function baseKeysIn(object) {\n      if (!isObject(object)) {\n        return nativeKeysIn(object);\n      }\n      var isProto = isPrototype(object),\n          result = [];\n\n      for (var key in object) {\n        if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.lt` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than `other`,\n     *  else `false`.\n     */\n    function baseLt(value, other) {\n      return value < other;\n    }\n\n    /**\n     * The base implementation of `_.map` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     */\n    function baseMap(collection, iteratee) {\n      var index = -1,\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value, key, collection) {\n        result[++index] = iteratee(value, key, collection);\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.matches` which doesn't clone `source`.\n     *\n     * @private\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseMatches(source) {\n      var matchData = getMatchData(source);\n      if (matchData.length == 1 && matchData[0][2]) {\n        return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n      }\n      return function(object) {\n        return object === source || baseIsMatch(object, source, matchData);\n      };\n    }\n\n    /**\n     * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n     *\n     * @private\n     * @param {string} path The path of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseMatchesProperty(path, srcValue) {\n      if (isKey(path) && isStrictComparable(srcValue)) {\n        return matchesStrictComparable(toKey(path), srcValue);\n      }\n      return function(object) {\n        var objValue = get(object, path);\n        return (objValue === undefined && objValue === srcValue)\n          ? hasIn(object, path)\n          : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n      };\n    }\n\n    /**\n     * The base implementation of `_.merge` without support for multiple sources.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {number} srcIndex The index of `source`.\n     * @param {Function} [customizer] The function to customize merged values.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     */\n    function baseMerge(object, source, srcIndex, customizer, stack) {\n      if (object === source) {\n        return;\n      }\n      baseFor(source, function(srcValue, key) {\n        stack || (stack = new Stack);\n        if (isObject(srcValue)) {\n          baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n        }\n        else {\n          var newValue = customizer\n            ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n            : undefined;\n\n          if (newValue === undefined) {\n            newValue = srcValue;\n          }\n          assignMergeValue(object, key, newValue);\n        }\n      }, keysIn);\n    }\n\n    /**\n     * A specialized version of `baseMerge` for arrays and objects which performs\n     * deep merges and tracks traversed objects enabling objects with circular\n     * references to be merged.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {string} key The key of the value to merge.\n     * @param {number} srcIndex The index of `source`.\n     * @param {Function} mergeFunc The function to merge values.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     */\n    function baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n      var objValue = safeGet(object, key),\n          srcValue = safeGet(source, key),\n          stacked = stack.get(srcValue);\n\n      if (stacked) {\n        assignMergeValue(object, key, stacked);\n        return;\n      }\n      var newValue = customizer\n        ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      var isCommon = newValue === undefined;\n\n      if (isCommon) {\n        var isArr = isArray(srcValue),\n            isBuff = !isArr && isBuffer(srcValue),\n            isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n        newValue = srcValue;\n        if (isArr || isBuff || isTyped) {\n          if (isArray(objValue)) {\n            newValue = objValue;\n          }\n          else if (isArrayLikeObject(objValue)) {\n            newValue = copyArray(objValue);\n          }\n          else if (isBuff) {\n            isCommon = false;\n            newValue = cloneBuffer(srcValue, true);\n          }\n          else if (isTyped) {\n            isCommon = false;\n            newValue = cloneTypedArray(srcValue, true);\n          }\n          else {\n            newValue = [];\n          }\n        }\n        else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n          newValue = objValue;\n          if (isArguments(objValue)) {\n            newValue = toPlainObject(objValue);\n          }\n          else if (!isObject(objValue) || isFunction(objValue)) {\n            newValue = initCloneObject(srcValue);\n          }\n        }\n        else {\n          isCommon = false;\n        }\n      }\n      if (isCommon) {\n        // Recursively merge objects and arrays (susceptible to call stack limits).\n        stack.set(srcValue, newValue);\n        mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n        stack['delete'](srcValue);\n      }\n      assignMergeValue(object, key, newValue);\n    }\n\n    /**\n     * The base implementation of `_.nth` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {Array} array The array to query.\n     * @param {number} n The index of the element to return.\n     * @returns {*} Returns the nth element of `array`.\n     */\n    function baseNth(array, n) {\n      var length = array.length;\n      if (!length) {\n        return;\n      }\n      n += n < 0 ? length : 0;\n      return isIndex(n, length) ? array[n] : undefined;\n    }\n\n    /**\n     * The base implementation of `_.orderBy` without param guards.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n     * @param {string[]} orders The sort orders of `iteratees`.\n     * @returns {Array} Returns the new sorted array.\n     */\n    function baseOrderBy(collection, iteratees, orders) {\n      var index = -1;\n      iteratees = arrayMap(iteratees.length ? iteratees : [identity], baseUnary(getIteratee()));\n\n      var result = baseMap(collection, function(value, key, collection) {\n        var criteria = arrayMap(iteratees, function(iteratee) {\n          return iteratee(value);\n        });\n        return { 'criteria': criteria, 'index': ++index, 'value': value };\n      });\n\n      return baseSortBy(result, function(object, other) {\n        return compareMultiple(object, other, orders);\n      });\n    }\n\n    /**\n     * The base implementation of `_.pick` without support for individual\n     * property identifiers.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {string[]} paths The property paths to pick.\n     * @returns {Object} Returns the new object.\n     */\n    function basePick(object, paths) {\n      return basePickBy(object, paths, function(value, path) {\n        return hasIn(object, path);\n      });\n    }\n\n    /**\n     * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {string[]} paths The property paths to pick.\n     * @param {Function} predicate The function invoked per property.\n     * @returns {Object} Returns the new object.\n     */\n    function basePickBy(object, paths, predicate) {\n      var index = -1,\n          length = paths.length,\n          result = {};\n\n      while (++index < length) {\n        var path = paths[index],\n            value = baseGet(object, path);\n\n        if (predicate(value, path)) {\n          baseSet(result, castPath(path, object), value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseProperty` which supports deep paths.\n     *\n     * @private\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new accessor function.\n     */\n    function basePropertyDeep(path) {\n      return function(object) {\n        return baseGet(object, path);\n      };\n    }\n\n    /**\n     * The base implementation of `_.pullAllBy` without support for iteratee\n     * shorthands.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns `array`.\n     */\n    function basePullAll(array, values, iteratee, comparator) {\n      var indexOf = comparator ? baseIndexOfWith : baseIndexOf,\n          index = -1,\n          length = values.length,\n          seen = array;\n\n      if (array === values) {\n        values = copyArray(values);\n      }\n      if (iteratee) {\n        seen = arrayMap(array, baseUnary(iteratee));\n      }\n      while (++index < length) {\n        var fromIndex = 0,\n            value = values[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        while ((fromIndex = indexOf(seen, computed, fromIndex, comparator)) > -1) {\n          if (seen !== array) {\n            splice.call(seen, fromIndex, 1);\n          }\n          splice.call(array, fromIndex, 1);\n        }\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.pullAt` without support for individual\n     * indexes or capturing the removed elements.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {number[]} indexes The indexes of elements to remove.\n     * @returns {Array} Returns `array`.\n     */\n    function basePullAt(array, indexes) {\n      var length = array ? indexes.length : 0,\n          lastIndex = length - 1;\n\n      while (length--) {\n        var index = indexes[length];\n        if (length == lastIndex || index !== previous) {\n          var previous = index;\n          if (isIndex(index)) {\n            splice.call(array, index, 1);\n          } else {\n            baseUnset(array, index);\n          }\n        }\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.random` without support for returning\n     * floating-point numbers.\n     *\n     * @private\n     * @param {number} lower The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the random number.\n     */\n    function baseRandom(lower, upper) {\n      return lower + nativeFloor(nativeRandom() * (upper - lower + 1));\n    }\n\n    /**\n     * The base implementation of `_.range` and `_.rangeRight` which doesn't\n     * coerce arguments.\n     *\n     * @private\n     * @param {number} start The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} step The value to increment or decrement by.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the range of numbers.\n     */\n    function baseRange(start, end, step, fromRight) {\n      var index = -1,\n          length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n          result = Array(length);\n\n      while (length--) {\n        result[fromRight ? length : ++index] = start;\n        start += step;\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.repeat` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {string} string The string to repeat.\n     * @param {number} n The number of times to repeat the string.\n     * @returns {string} Returns the repeated string.\n     */\n    function baseRepeat(string, n) {\n      var result = '';\n      if (!string || n < 1 || n > MAX_SAFE_INTEGER) {\n        return result;\n      }\n      // Leverage the exponentiation by squaring algorithm for a faster repeat.\n      // See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.\n      do {\n        if (n % 2) {\n          result += string;\n        }\n        n = nativeFloor(n / 2);\n        if (n) {\n          string += string;\n        }\n      } while (n);\n\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     */\n    function baseRest(func, start) {\n      return setToString(overRest(func, start, identity), func + '');\n    }\n\n    /**\n     * The base implementation of `_.sample`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to sample.\n     * @returns {*} Returns the random element.\n     */\n    function baseSample(collection) {\n      return arraySample(values(collection));\n    }\n\n    /**\n     * The base implementation of `_.sampleSize` without param guards.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to sample.\n     * @param {number} n The number of elements to sample.\n     * @returns {Array} Returns the random elements.\n     */\n    function baseSampleSize(collection, n) {\n      var array = values(collection);\n      return shuffleSelf(array, baseClamp(n, 0, array.length));\n    }\n\n    /**\n     * The base implementation of `_.set`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @param {Function} [customizer] The function to customize path creation.\n     * @returns {Object} Returns `object`.\n     */\n    function baseSet(object, path, value, customizer) {\n      if (!isObject(object)) {\n        return object;\n      }\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length,\n          lastIndex = length - 1,\n          nested = object;\n\n      while (nested != null && ++index < length) {\n        var key = toKey(path[index]),\n            newValue = value;\n\n        if (index != lastIndex) {\n          var objValue = nested[key];\n          newValue = customizer ? customizer(objValue, key, nested) : undefined;\n          if (newValue === undefined) {\n            newValue = isObject(objValue)\n              ? objValue\n              : (isIndex(path[index + 1]) ? [] : {});\n          }\n        }\n        assignValue(nested, key, newValue);\n        nested = nested[key];\n      }\n      return object;\n    }\n\n    /**\n     * The base implementation of `setData` without support for hot loop shorting.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var baseSetData = !metaMap ? identity : function(func, data) {\n      metaMap.set(func, data);\n      return func;\n    };\n\n    /**\n     * The base implementation of `setToString` without support for hot loop shorting.\n     *\n     * @private\n     * @param {Function} func The function to modify.\n     * @param {Function} string The `toString` result.\n     * @returns {Function} Returns `func`.\n     */\n    var baseSetToString = !defineProperty ? identity : function(func, string) {\n      return defineProperty(func, 'toString', {\n        'configurable': true,\n        'enumerable': false,\n        'value': constant(string),\n        'writable': true\n      });\n    };\n\n    /**\n     * The base implementation of `_.shuffle`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     */\n    function baseShuffle(collection) {\n      return shuffleSelf(values(collection));\n    }\n\n    /**\n     * The base implementation of `_.slice` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseSlice(array, start, end) {\n      var index = -1,\n          length = array.length;\n\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = end > length ? length : end;\n      if (end < 0) {\n        end += length;\n      }\n      length = start > end ? 0 : ((end - start) >>> 0);\n      start >>>= 0;\n\n      var result = Array(length);\n      while (++index < length) {\n        result[index] = array[index + start];\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.some` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     */\n    function baseSome(collection, predicate) {\n      var result;\n\n      baseEach(collection, function(value, index, collection) {\n        result = predicate(value, index, collection);\n        return !result;\n      });\n      return !!result;\n    }\n\n    /**\n     * The base implementation of `_.sortedIndex` and `_.sortedLastIndex` which\n     * performs a binary search of `array` to determine the index at which `value`\n     * should be inserted into `array` in order to maintain its sort order.\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function baseSortedIndex(array, value, retHighest) {\n      var low = 0,\n          high = array == null ? low : array.length;\n\n      if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {\n        while (low < high) {\n          var mid = (low + high) >>> 1,\n              computed = array[mid];\n\n          if (computed !== null && !isSymbol(computed) &&\n              (retHighest ? (computed <= value) : (computed < value))) {\n            low = mid + 1;\n          } else {\n            high = mid;\n          }\n        }\n        return high;\n      }\n      return baseSortedIndexBy(array, value, identity, retHighest);\n    }\n\n    /**\n     * The base implementation of `_.sortedIndexBy` and `_.sortedLastIndexBy`\n     * which invokes `iteratee` for `value` and each element of `array` to compute\n     * their sort ranking. The iteratee is invoked with one argument; (value).\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} iteratee The iteratee invoked per element.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function baseSortedIndexBy(array, value, iteratee, retHighest) {\n      value = iteratee(value);\n\n      var low = 0,\n          high = array == null ? 0 : array.length,\n          valIsNaN = value !== value,\n          valIsNull = value === null,\n          valIsSymbol = isSymbol(value),\n          valIsUndefined = value === undefined;\n\n      while (low < high) {\n        var mid = nativeFloor((low + high) / 2),\n            computed = iteratee(array[mid]),\n            othIsDefined = computed !== undefined,\n            othIsNull = computed === null,\n            othIsReflexive = computed === computed,\n            othIsSymbol = isSymbol(computed);\n\n        if (valIsNaN) {\n          var setLow = retHighest || othIsReflexive;\n        } else if (valIsUndefined) {\n          setLow = othIsReflexive && (retHighest || othIsDefined);\n        } else if (valIsNull) {\n          setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);\n        } else if (valIsSymbol) {\n          setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);\n        } else if (othIsNull || othIsSymbol) {\n          setLow = false;\n        } else {\n          setLow = retHighest ? (computed <= value) : (computed < value);\n        }\n        if (setLow) {\n          low = mid + 1;\n        } else {\n          high = mid;\n        }\n      }\n      return nativeMin(high, MAX_ARRAY_INDEX);\n    }\n\n    /**\n     * The base implementation of `_.sortedUniq` and `_.sortedUniqBy` without\n     * support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     */\n    function baseSortedUniq(array, iteratee) {\n      var index = -1,\n          length = array.length,\n          resIndex = 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        if (!index || !eq(computed, seen)) {\n          var seen = computed;\n          result[resIndex++] = value === 0 ? 0 : value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.toNumber` which doesn't ensure correct\n     * conversions of binary, hexadecimal, or octal string values.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {number} Returns the number.\n     */\n    function baseToNumber(value) {\n      if (typeof value == 'number') {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      return +value;\n    }\n\n    /**\n     * The base implementation of `_.toString` which doesn't convert nullish\n     * values to empty strings.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {string} Returns the string.\n     */\n    function baseToString(value) {\n      // Exit early for strings to avoid a performance hit in some environments.\n      if (typeof value == 'string') {\n        return value;\n      }\n      if (isArray(value)) {\n        // Recursively convert values (susceptible to call stack limits).\n        return arrayMap(value, baseToString) + '';\n      }\n      if (isSymbol(value)) {\n        return symbolToString ? symbolToString.call(value) : '';\n      }\n      var result = (value + '');\n      return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n    }\n\n    /**\n     * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     */\n    function baseUniq(array, iteratee, comparator) {\n      var index = -1,\n          includes = arrayIncludes,\n          length = array.length,\n          isCommon = true,\n          result = [],\n          seen = result;\n\n      if (comparator) {\n        isCommon = false;\n        includes = arrayIncludesWith;\n      }\n      else if (length >= LARGE_ARRAY_SIZE) {\n        var set = iteratee ? null : createSet(array);\n        if (set) {\n          return setToArray(set);\n        }\n        isCommon = false;\n        includes = cacheHas;\n        seen = new SetCache;\n      }\n      else {\n        seen = iteratee ? [] : result;\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (isCommon && computed === computed) {\n          var seenIndex = seen.length;\n          while (seenIndex--) {\n            if (seen[seenIndex] === computed) {\n              continue outer;\n            }\n          }\n          if (iteratee) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n        else if (!includes(seen, computed, comparator)) {\n          if (seen !== result) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.unset`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The property path to unset.\n     * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n     */\n    function baseUnset(object, path) {\n      path = castPath(path, object);\n      object = parent(object, path);\n      return object == null || delete object[toKey(last(path))];\n    }\n\n    /**\n     * The base implementation of `_.update`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to update.\n     * @param {Function} updater The function to produce the updated value.\n     * @param {Function} [customizer] The function to customize path creation.\n     * @returns {Object} Returns `object`.\n     */\n    function baseUpdate(object, path, updater, customizer) {\n      return baseSet(object, path, updater(baseGet(object, path)), customizer);\n    }\n\n    /**\n     * The base implementation of methods like `_.dropWhile` and `_.takeWhile`\n     * without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to query.\n     * @param {Function} predicate The function invoked per iteration.\n     * @param {boolean} [isDrop] Specify dropping elements instead of taking them.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseWhile(array, predicate, isDrop, fromRight) {\n      var length = array.length,\n          index = fromRight ? length : -1;\n\n      while ((fromRight ? index-- : ++index < length) &&\n        predicate(array[index], index, array)) {}\n\n      return isDrop\n        ? baseSlice(array, (fromRight ? 0 : index), (fromRight ? index + 1 : length))\n        : baseSlice(array, (fromRight ? index + 1 : 0), (fromRight ? length : index));\n    }\n\n    /**\n     * The base implementation of `wrapperValue` which returns the result of\n     * performing a sequence of actions on the unwrapped `value`, where each\n     * successive action is supplied the return value of the previous.\n     *\n     * @private\n     * @param {*} value The unwrapped value.\n     * @param {Array} actions Actions to perform to resolve the unwrapped value.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseWrapperValue(value, actions) {\n      var result = value;\n      if (result instanceof LazyWrapper) {\n        result = result.value();\n      }\n      return arrayReduce(actions, function(result, action) {\n        return action.func.apply(action.thisArg, arrayPush([result], action.args));\n      }, result);\n    }\n\n    /**\n     * The base implementation of methods like `_.xor`, without support for\n     * iteratee shorthands, that accepts an array of arrays to inspect.\n     *\n     * @private\n     * @param {Array} arrays The arrays to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of values.\n     */\n    function baseXor(arrays, iteratee, comparator) {\n      var length = arrays.length;\n      if (length < 2) {\n        return length ? baseUniq(arrays[0]) : [];\n      }\n      var index = -1,\n          result = Array(length);\n\n      while (++index < length) {\n        var array = arrays[index],\n            othIndex = -1;\n\n        while (++othIndex < length) {\n          if (othIndex != index) {\n            result[index] = baseDifference(result[index] || array, arrays[othIndex], iteratee, comparator);\n          }\n        }\n      }\n      return baseUniq(baseFlatten(result, 1), iteratee, comparator);\n    }\n\n    /**\n     * This base implementation of `_.zipObject` which assigns values using `assignFunc`.\n     *\n     * @private\n     * @param {Array} props The property identifiers.\n     * @param {Array} values The property values.\n     * @param {Function} assignFunc The function to assign values.\n     * @returns {Object} Returns the new object.\n     */\n    function baseZipObject(props, values, assignFunc) {\n      var index = -1,\n          length = props.length,\n          valsLength = values.length,\n          result = {};\n\n      while (++index < length) {\n        var value = index < valsLength ? values[index] : undefined;\n        assignFunc(result, props[index], value);\n      }\n      return result;\n    }\n\n    /**\n     * Casts `value` to an empty array if it's not an array like object.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {Array|Object} Returns the cast array-like object.\n     */\n    function castArrayLikeObject(value) {\n      return isArrayLikeObject(value) ? value : [];\n    }\n\n    /**\n     * Casts `value` to `identity` if it's not a function.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {Function} Returns cast function.\n     */\n    function castFunction(value) {\n      return typeof value == 'function' ? value : identity;\n    }\n\n    /**\n     * Casts `value` to a path array if it's not one.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @param {Object} [object] The object to query keys on.\n     * @returns {Array} Returns the cast property path array.\n     */\n    function castPath(value, object) {\n      if (isArray(value)) {\n        return value;\n      }\n      return isKey(value, object) ? [value] : stringToPath(toString(value));\n    }\n\n    /**\n     * A `baseRest` alias which can be replaced with `identity` by module\n     * replacement plugins.\n     *\n     * @private\n     * @type {Function}\n     * @param {Function} func The function to apply a rest parameter to.\n     * @returns {Function} Returns the new function.\n     */\n    var castRest = baseRest;\n\n    /**\n     * Casts `array` to a slice if it's needed.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {number} start The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the cast slice.\n     */\n    function castSlice(array, start, end) {\n      var length = array.length;\n      end = end === undefined ? length : end;\n      return (!start && end >= length) ? array : baseSlice(array, start, end);\n    }\n\n    /**\n     * A simple wrapper around the global [`clearTimeout`](https://mdn.io/clearTimeout).\n     *\n     * @private\n     * @param {number|Object} id The timer id or timeout object of the timer to clear.\n     */\n    var clearTimeout = ctxClearTimeout || function(id) {\n      return root.clearTimeout(id);\n    };\n\n    /**\n     * Creates a clone of  `buffer`.\n     *\n     * @private\n     * @param {Buffer} buffer The buffer to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Buffer} Returns the cloned buffer.\n     */\n    function cloneBuffer(buffer, isDeep) {\n      if (isDeep) {\n        return buffer.slice();\n      }\n      var length = buffer.length,\n          result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n      buffer.copy(result);\n      return result;\n    }\n\n    /**\n     * Creates a clone of `arrayBuffer`.\n     *\n     * @private\n     * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n     * @returns {ArrayBuffer} Returns the cloned array buffer.\n     */\n    function cloneArrayBuffer(arrayBuffer) {\n      var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n      new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n      return result;\n    }\n\n    /**\n     * Creates a clone of `dataView`.\n     *\n     * @private\n     * @param {Object} dataView The data view to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the cloned data view.\n     */\n    function cloneDataView(dataView, isDeep) {\n      var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n      return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n    }\n\n    /**\n     * Creates a clone of `regexp`.\n     *\n     * @private\n     * @param {Object} regexp The regexp to clone.\n     * @returns {Object} Returns the cloned regexp.\n     */\n    function cloneRegExp(regexp) {\n      var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n      result.lastIndex = regexp.lastIndex;\n      return result;\n    }\n\n    /**\n     * Creates a clone of the `symbol` object.\n     *\n     * @private\n     * @param {Object} symbol The symbol object to clone.\n     * @returns {Object} Returns the cloned symbol object.\n     */\n    function cloneSymbol(symbol) {\n      return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n    }\n\n    /**\n     * Creates a clone of `typedArray`.\n     *\n     * @private\n     * @param {Object} typedArray The typed array to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the cloned typed array.\n     */\n    function cloneTypedArray(typedArray, isDeep) {\n      var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n      return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n    }\n\n    /**\n     * Compares values to sort them in ascending order.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {number} Returns the sort order indicator for `value`.\n     */\n    function compareAscending(value, other) {\n      if (value !== other) {\n        var valIsDefined = value !== undefined,\n            valIsNull = value === null,\n            valIsReflexive = value === value,\n            valIsSymbol = isSymbol(value);\n\n        var othIsDefined = other !== undefined,\n            othIsNull = other === null,\n            othIsReflexive = other === other,\n            othIsSymbol = isSymbol(other);\n\n        if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n            (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n            (valIsNull && othIsDefined && othIsReflexive) ||\n            (!valIsDefined && othIsReflexive) ||\n            !valIsReflexive) {\n          return 1;\n        }\n        if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n            (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n            (othIsNull && valIsDefined && valIsReflexive) ||\n            (!othIsDefined && valIsReflexive) ||\n            !othIsReflexive) {\n          return -1;\n        }\n      }\n      return 0;\n    }\n\n    /**\n     * Used by `_.orderBy` to compare multiple properties of a value to another\n     * and stable sort them.\n     *\n     * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n     * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n     * of corresponding values.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {boolean[]|string[]} orders The order to sort by for each property.\n     * @returns {number} Returns the sort order indicator for `object`.\n     */\n    function compareMultiple(object, other, orders) {\n      var index = -1,\n          objCriteria = object.criteria,\n          othCriteria = other.criteria,\n          length = objCriteria.length,\n          ordersLength = orders.length;\n\n      while (++index < length) {\n        var result = compareAscending(objCriteria[index], othCriteria[index]);\n        if (result) {\n          if (index >= ordersLength) {\n            return result;\n          }\n          var order = orders[index];\n          return result * (order == 'desc' ? -1 : 1);\n        }\n      }\n      // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n      // that causes it, under certain circumstances, to provide the same value for\n      // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n      // for more details.\n      //\n      // This also ensures a stable sort in V8 and other engines.\n      // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n      return object.index - other.index;\n    }\n\n    /**\n     * Creates an array that is the composition of partially applied arguments,\n     * placeholders, and provided arguments into a single array of arguments.\n     *\n     * @private\n     * @param {Array} args The provided arguments.\n     * @param {Array} partials The arguments to prepend to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @params {boolean} [isCurried] Specify composing for a curried function.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgs(args, partials, holders, isCurried) {\n      var argsIndex = -1,\n          argsLength = args.length,\n          holdersLength = holders.length,\n          leftIndex = -1,\n          leftLength = partials.length,\n          rangeLength = nativeMax(argsLength - holdersLength, 0),\n          result = Array(leftLength + rangeLength),\n          isUncurried = !isCurried;\n\n      while (++leftIndex < leftLength) {\n        result[leftIndex] = partials[leftIndex];\n      }\n      while (++argsIndex < holdersLength) {\n        if (isUncurried || argsIndex < argsLength) {\n          result[holders[argsIndex]] = args[argsIndex];\n        }\n      }\n      while (rangeLength--) {\n        result[leftIndex++] = args[argsIndex++];\n      }\n      return result;\n    }\n\n    /**\n     * This function is like `composeArgs` except that the arguments composition\n     * is tailored for `_.partialRight`.\n     *\n     * @private\n     * @param {Array} args The provided arguments.\n     * @param {Array} partials The arguments to append to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @params {boolean} [isCurried] Specify composing for a curried function.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgsRight(args, partials, holders, isCurried) {\n      var argsIndex = -1,\n          argsLength = args.length,\n          holdersIndex = -1,\n          holdersLength = holders.length,\n          rightIndex = -1,\n          rightLength = partials.length,\n          rangeLength = nativeMax(argsLength - holdersLength, 0),\n          result = Array(rangeLength + rightLength),\n          isUncurried = !isCurried;\n\n      while (++argsIndex < rangeLength) {\n        result[argsIndex] = args[argsIndex];\n      }\n      var offset = argsIndex;\n      while (++rightIndex < rightLength) {\n        result[offset + rightIndex] = partials[rightIndex];\n      }\n      while (++holdersIndex < holdersLength) {\n        if (isUncurried || argsIndex < argsLength) {\n          result[offset + holders[holdersIndex]] = args[argsIndex++];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Copies the values of `source` to `array`.\n     *\n     * @private\n     * @param {Array} source The array to copy values from.\n     * @param {Array} [array=[]] The array to copy values to.\n     * @returns {Array} Returns `array`.\n     */\n    function copyArray(source, array) {\n      var index = -1,\n          length = source.length;\n\n      array || (array = Array(length));\n      while (++index < length) {\n        array[index] = source[index];\n      }\n      return array;\n    }\n\n    /**\n     * Copies properties of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy properties from.\n     * @param {Array} props The property identifiers to copy.\n     * @param {Object} [object={}] The object to copy properties to.\n     * @param {Function} [customizer] The function to customize copied values.\n     * @returns {Object} Returns `object`.\n     */\n    function copyObject(source, props, object, customizer) {\n      var isNew = !object;\n      object || (object = {});\n\n      var index = -1,\n          length = props.length;\n\n      while (++index < length) {\n        var key = props[index];\n\n        var newValue = customizer\n          ? customizer(object[key], source[key], key, object, source)\n          : undefined;\n\n        if (newValue === undefined) {\n          newValue = source[key];\n        }\n        if (isNew) {\n          baseAssignValue(object, key, newValue);\n        } else {\n          assignValue(object, key, newValue);\n        }\n      }\n      return object;\n    }\n\n    /**\n     * Copies own symbols of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy symbols from.\n     * @param {Object} [object={}] The object to copy symbols to.\n     * @returns {Object} Returns `object`.\n     */\n    function copySymbols(source, object) {\n      return copyObject(source, getSymbols(source), object);\n    }\n\n    /**\n     * Copies own and inherited symbols of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy symbols from.\n     * @param {Object} [object={}] The object to copy symbols to.\n     * @returns {Object} Returns `object`.\n     */\n    function copySymbolsIn(source, object) {\n      return copyObject(source, getSymbolsIn(source), object);\n    }\n\n    /**\n     * Creates a function like `_.groupBy`.\n     *\n     * @private\n     * @param {Function} setter The function to set accumulator values.\n     * @param {Function} [initializer] The accumulator object initializer.\n     * @returns {Function} Returns the new aggregator function.\n     */\n    function createAggregator(setter, initializer) {\n      return function(collection, iteratee) {\n        var func = isArray(collection) ? arrayAggregator : baseAggregator,\n            accumulator = initializer ? initializer() : {};\n\n        return func(collection, setter, getIteratee(iteratee, 2), accumulator);\n      };\n    }\n\n    /**\n     * Creates a function like `_.assign`.\n     *\n     * @private\n     * @param {Function} assigner The function to assign values.\n     * @returns {Function} Returns the new assigner function.\n     */\n    function createAssigner(assigner) {\n      return baseRest(function(object, sources) {\n        var index = -1,\n            length = sources.length,\n            customizer = length > 1 ? sources[length - 1] : undefined,\n            guard = length > 2 ? sources[2] : undefined;\n\n        customizer = (assigner.length > 3 && typeof customizer == 'function')\n          ? (length--, customizer)\n          : undefined;\n\n        if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n          customizer = length < 3 ? undefined : customizer;\n          length = 1;\n        }\n        object = Object(object);\n        while (++index < length) {\n          var source = sources[index];\n          if (source) {\n            assigner(object, source, index, customizer);\n          }\n        }\n        return object;\n      });\n    }\n\n    /**\n     * Creates a `baseEach` or `baseEachRight` function.\n     *\n     * @private\n     * @param {Function} eachFunc The function to iterate over a collection.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseEach(eachFunc, fromRight) {\n      return function(collection, iteratee) {\n        if (collection == null) {\n          return collection;\n        }\n        if (!isArrayLike(collection)) {\n          return eachFunc(collection, iteratee);\n        }\n        var length = collection.length,\n            index = fromRight ? length : -1,\n            iterable = Object(collection);\n\n        while ((fromRight ? index-- : ++index < length)) {\n          if (iteratee(iterable[index], index, iterable) === false) {\n            break;\n          }\n        }\n        return collection;\n      };\n    }\n\n    /**\n     * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseFor(fromRight) {\n      return function(object, iteratee, keysFunc) {\n        var index = -1,\n            iterable = Object(object),\n            props = keysFunc(object),\n            length = props.length;\n\n        while (length--) {\n          var key = props[fromRight ? length : ++index];\n          if (iteratee(iterable[key], key, iterable) === false) {\n            break;\n          }\n        }\n        return object;\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with the optional `this`\n     * binding of `thisArg`.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createBind(func, bitmask, thisArg) {\n      var isBind = bitmask & WRAP_BIND_FLAG,\n          Ctor = createCtor(func);\n\n      function wrapper() {\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return fn.apply(isBind ? thisArg : this, arguments);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a function like `_.lowerFirst`.\n     *\n     * @private\n     * @param {string} methodName The name of the `String` case method to use.\n     * @returns {Function} Returns the new case function.\n     */\n    function createCaseFirst(methodName) {\n      return function(string) {\n        string = toString(string);\n\n        var strSymbols = hasUnicode(string)\n          ? stringToArray(string)\n          : undefined;\n\n        var chr = strSymbols\n          ? strSymbols[0]\n          : string.charAt(0);\n\n        var trailing = strSymbols\n          ? castSlice(strSymbols, 1).join('')\n          : string.slice(1);\n\n        return chr[methodName]() + trailing;\n      };\n    }\n\n    /**\n     * Creates a function like `_.camelCase`.\n     *\n     * @private\n     * @param {Function} callback The function to combine each word.\n     * @returns {Function} Returns the new compounder function.\n     */\n    function createCompounder(callback) {\n      return function(string) {\n        return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n      };\n    }\n\n    /**\n     * Creates a function that produces an instance of `Ctor` regardless of\n     * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n     *\n     * @private\n     * @param {Function} Ctor The constructor to wrap.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createCtor(Ctor) {\n      return function() {\n        // Use a `switch` statement to work with class constructors. See\n        // http://ecma-international.org/ecma-262/7.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\n        // for more details.\n        var args = arguments;\n        switch (args.length) {\n          case 0: return new Ctor;\n          case 1: return new Ctor(args[0]);\n          case 2: return new Ctor(args[0], args[1]);\n          case 3: return new Ctor(args[0], args[1], args[2]);\n          case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n          case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n          case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n          case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n        }\n        var thisBinding = baseCreate(Ctor.prototype),\n            result = Ctor.apply(thisBinding, args);\n\n        // Mimic the constructor's `return` behavior.\n        // See https://es5.github.io/#x13.2.2 for more details.\n        return isObject(result) ? result : thisBinding;\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to enable currying.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {number} arity The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createCurry(func, bitmask, arity) {\n      var Ctor = createCtor(func);\n\n      function wrapper() {\n        var length = arguments.length,\n            args = Array(length),\n            index = length,\n            placeholder = getHolder(wrapper);\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        var holders = (length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder)\n          ? []\n          : replaceHolders(args, placeholder);\n\n        length -= holders.length;\n        if (length < arity) {\n          return createRecurry(\n            func, bitmask, createHybrid, wrapper.placeholder, undefined,\n            args, holders, undefined, undefined, arity - length);\n        }\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return apply(fn, this, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `_.find` or `_.findLast` function.\n     *\n     * @private\n     * @param {Function} findIndexFunc The function to find the collection index.\n     * @returns {Function} Returns the new find function.\n     */\n    function createFind(findIndexFunc) {\n      return function(collection, predicate, fromIndex) {\n        var iterable = Object(collection);\n        if (!isArrayLike(collection)) {\n          var iteratee = getIteratee(predicate, 3);\n          collection = keys(collection);\n          predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n        }\n        var index = findIndexFunc(collection, predicate, fromIndex);\n        return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n      };\n    }\n\n    /**\n     * Creates a `_.flow` or `_.flowRight` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new flow function.\n     */\n    function createFlow(fromRight) {\n      return flatRest(function(funcs) {\n        var length = funcs.length,\n            index = length,\n            prereq = LodashWrapper.prototype.thru;\n\n        if (fromRight) {\n          funcs.reverse();\n        }\n        while (index--) {\n          var func = funcs[index];\n          if (typeof func != 'function') {\n            throw new TypeError(FUNC_ERROR_TEXT);\n          }\n          if (prereq && !wrapper && getFuncName(func) == 'wrapper') {\n            var wrapper = new LodashWrapper([], true);\n          }\n        }\n        index = wrapper ? index : length;\n        while (++index < length) {\n          func = funcs[index];\n\n          var funcName = getFuncName(func),\n              data = funcName == 'wrapper' ? getData(func) : undefined;\n\n          if (data && isLaziable(data[0]) &&\n                data[1] == (WRAP_ARY_FLAG | WRAP_CURRY_FLAG | WRAP_PARTIAL_FLAG | WRAP_REARG_FLAG) &&\n                !data[4].length && data[9] == 1\n              ) {\n            wrapper = wrapper[getFuncName(data[0])].apply(wrapper, data[3]);\n          } else {\n            wrapper = (func.length == 1 && isLaziable(func))\n              ? wrapper[funcName]()\n              : wrapper.thru(func);\n          }\n        }\n        return function() {\n          var args = arguments,\n              value = args[0];\n\n          if (wrapper && args.length == 1 && isArray(value)) {\n            return wrapper.plant(value).value();\n          }\n          var index = 0,\n              result = length ? funcs[index].apply(this, args) : value;\n\n          while (++index < length) {\n            result = funcs[index].call(this, result);\n          }\n          return result;\n        };\n      });\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with optional `this`\n     * binding of `thisArg`, partial application, and currying.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to prepend to those provided to\n     *  the new function.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [partialsRight] The arguments to append to those provided\n     *  to the new function.\n     * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n      var isAry = bitmask & WRAP_ARY_FLAG,\n          isBind = bitmask & WRAP_BIND_FLAG,\n          isBindKey = bitmask & WRAP_BIND_KEY_FLAG,\n          isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),\n          isFlip = bitmask & WRAP_FLIP_FLAG,\n          Ctor = isBindKey ? undefined : createCtor(func);\n\n      function wrapper() {\n        var length = arguments.length,\n            args = Array(length),\n            index = length;\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        if (isCurried) {\n          var placeholder = getHolder(wrapper),\n              holdersCount = countHolders(args, placeholder);\n        }\n        if (partials) {\n          args = composeArgs(args, partials, holders, isCurried);\n        }\n        if (partialsRight) {\n          args = composeArgsRight(args, partialsRight, holdersRight, isCurried);\n        }\n        length -= holdersCount;\n        if (isCurried && length < arity) {\n          var newHolders = replaceHolders(args, placeholder);\n          return createRecurry(\n            func, bitmask, createHybrid, wrapper.placeholder, thisArg,\n            args, newHolders, argPos, ary, arity - length\n          );\n        }\n        var thisBinding = isBind ? thisArg : this,\n            fn = isBindKey ? thisBinding[func] : func;\n\n        length = args.length;\n        if (argPos) {\n          args = reorder(args, argPos);\n        } else if (isFlip && length > 1) {\n          args.reverse();\n        }\n        if (isAry && ary < length) {\n          args.length = ary;\n        }\n        if (this && this !== root && this instanceof wrapper) {\n          fn = Ctor || createCtor(fn);\n        }\n        return fn.apply(thisBinding, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a function like `_.invertBy`.\n     *\n     * @private\n     * @param {Function} setter The function to set accumulator values.\n     * @param {Function} toIteratee The function to resolve iteratees.\n     * @returns {Function} Returns the new inverter function.\n     */\n    function createInverter(setter, toIteratee) {\n      return function(object, iteratee) {\n        return baseInverter(object, setter, toIteratee(iteratee), {});\n      };\n    }\n\n    /**\n     * Creates a function that performs a mathematical operation on two values.\n     *\n     * @private\n     * @param {Function} operator The function to perform the operation.\n     * @param {number} [defaultValue] The value used for `undefined` arguments.\n     * @returns {Function} Returns the new mathematical operation function.\n     */\n    function createMathOperation(operator, defaultValue) {\n      return function(value, other) {\n        var result;\n        if (value === undefined && other === undefined) {\n          return defaultValue;\n        }\n        if (value !== undefined) {\n          result = value;\n        }\n        if (other !== undefined) {\n          if (result === undefined) {\n            return other;\n          }\n          if (typeof value == 'string' || typeof other == 'string') {\n            value = baseToString(value);\n            other = baseToString(other);\n          } else {\n            value = baseToNumber(value);\n            other = baseToNumber(other);\n          }\n          result = operator(value, other);\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function like `_.over`.\n     *\n     * @private\n     * @param {Function} arrayFunc The function to iterate over iteratees.\n     * @returns {Function} Returns the new over function.\n     */\n    function createOver(arrayFunc) {\n      return flatRest(function(iteratees) {\n        iteratees = arrayMap(iteratees, baseUnary(getIteratee()));\n        return baseRest(function(args) {\n          var thisArg = this;\n          return arrayFunc(iteratees, function(iteratee) {\n            return apply(iteratee, thisArg, args);\n          });\n        });\n      });\n    }\n\n    /**\n     * Creates the padding for `string` based on `length`. The `chars` string\n     * is truncated if the number of characters exceeds `length`.\n     *\n     * @private\n     * @param {number} length The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padding for `string`.\n     */\n    function createPadding(length, chars) {\n      chars = chars === undefined ? ' ' : baseToString(chars);\n\n      var charsLength = chars.length;\n      if (charsLength < 2) {\n        return charsLength ? baseRepeat(chars, length) : chars;\n      }\n      var result = baseRepeat(chars, nativeCeil(length / stringSize(chars)));\n      return hasUnicode(chars)\n        ? castSlice(stringToArray(result), 0, length).join('')\n        : result.slice(0, length);\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with the `this` binding\n     * of `thisArg` and `partials` prepended to the arguments it receives.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {Array} partials The arguments to prepend to those provided to\n     *  the new function.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createPartial(func, bitmask, thisArg, partials) {\n      var isBind = bitmask & WRAP_BIND_FLAG,\n          Ctor = createCtor(func);\n\n      function wrapper() {\n        var argsIndex = -1,\n            argsLength = arguments.length,\n            leftIndex = -1,\n            leftLength = partials.length,\n            args = Array(leftLength + argsLength),\n            fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n\n        while (++leftIndex < leftLength) {\n          args[leftIndex] = partials[leftIndex];\n        }\n        while (argsLength--) {\n          args[leftIndex++] = arguments[++argsIndex];\n        }\n        return apply(fn, isBind ? thisArg : this, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `_.range` or `_.rangeRight` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new range function.\n     */\n    function createRange(fromRight) {\n      return function(start, end, step) {\n        if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\n          end = step = undefined;\n        }\n        // Ensure the sign of `-0` is preserved.\n        start = toFinite(start);\n        if (end === undefined) {\n          end = start;\n          start = 0;\n        } else {\n          end = toFinite(end);\n        }\n        step = step === undefined ? (start < end ? 1 : -1) : toFinite(step);\n        return baseRange(start, end, step, fromRight);\n      };\n    }\n\n    /**\n     * Creates a function that performs a relational operation on two values.\n     *\n     * @private\n     * @param {Function} operator The function to perform the operation.\n     * @returns {Function} Returns the new relational operation function.\n     */\n    function createRelationalOperation(operator) {\n      return function(value, other) {\n        if (!(typeof value == 'string' && typeof other == 'string')) {\n          value = toNumber(value);\n          other = toNumber(other);\n        }\n        return operator(value, other);\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to continue currying.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {Function} wrapFunc The function to create the `func` wrapper.\n     * @param {*} placeholder The placeholder value.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to prepend to those provided to\n     *  the new function.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {\n      var isCurry = bitmask & WRAP_CURRY_FLAG,\n          newHolders = isCurry ? holders : undefined,\n          newHoldersRight = isCurry ? undefined : holders,\n          newPartials = isCurry ? partials : undefined,\n          newPartialsRight = isCurry ? undefined : partials;\n\n      bitmask |= (isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG);\n      bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);\n\n      if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {\n        bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);\n      }\n      var newData = [\n        func, bitmask, thisArg, newPartials, newHolders, newPartialsRight,\n        newHoldersRight, argPos, ary, arity\n      ];\n\n      var result = wrapFunc.apply(undefined, newData);\n      if (isLaziable(func)) {\n        setData(result, newData);\n      }\n      result.placeholder = placeholder;\n      return setWrapToString(result, func, bitmask);\n    }\n\n    /**\n     * Creates a function like `_.round`.\n     *\n     * @private\n     * @param {string} methodName The name of the `Math` method to use when rounding.\n     * @returns {Function} Returns the new round function.\n     */\n    function createRound(methodName) {\n      var func = Math[methodName];\n      return function(number, precision) {\n        number = toNumber(number);\n        precision = precision == null ? 0 : nativeMin(toInteger(precision), 292);\n        if (precision && nativeIsFinite(number)) {\n          // Shift with exponential notation to avoid floating-point issues.\n          // See [MDN](https://mdn.io/round#Examples) for more details.\n          var pair = (toString(number) + 'e').split('e'),\n              value = func(pair[0] + 'e' + (+pair[1] + precision));\n\n          pair = (toString(value) + 'e').split('e');\n          return +(pair[0] + 'e' + (+pair[1] - precision));\n        }\n        return func(number);\n      };\n    }\n\n    /**\n     * Creates a set object of `values`.\n     *\n     * @private\n     * @param {Array} values The values to add to the set.\n     * @returns {Object} Returns the new set.\n     */\n    var createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n      return new Set(values);\n    };\n\n    /**\n     * Creates a `_.toPairs` or `_.toPairsIn` function.\n     *\n     * @private\n     * @param {Function} keysFunc The function to get the keys of a given object.\n     * @returns {Function} Returns the new pairs function.\n     */\n    function createToPairs(keysFunc) {\n      return function(object) {\n        var tag = getTag(object);\n        if (tag == mapTag) {\n          return mapToArray(object);\n        }\n        if (tag == setTag) {\n          return setToPairs(object);\n        }\n        return baseToPairs(object, keysFunc(object));\n      };\n    }\n\n    /**\n     * Creates a function that either curries or invokes `func` with optional\n     * `this` binding and partially applied arguments.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to wrap.\n     * @param {number} bitmask The bitmask flags.\n     *    1 - `_.bind`\n     *    2 - `_.bindKey`\n     *    4 - `_.curry` or `_.curryRight` of a bound function\n     *    8 - `_.curry`\n     *   16 - `_.curryRight`\n     *   32 - `_.partial`\n     *   64 - `_.partialRight`\n     *  128 - `_.rearg`\n     *  256 - `_.ary`\n     *  512 - `_.flip`\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to be partially applied.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n      var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;\n      if (!isBindKey && typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var length = partials ? partials.length : 0;\n      if (!length) {\n        bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\n        partials = holders = undefined;\n      }\n      ary = ary === undefined ? ary : nativeMax(toInteger(ary), 0);\n      arity = arity === undefined ? arity : toInteger(arity);\n      length -= holders ? holders.length : 0;\n\n      if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {\n        var partialsRight = partials,\n            holdersRight = holders;\n\n        partials = holders = undefined;\n      }\n      var data = isBindKey ? undefined : getData(func);\n\n      var newData = [\n        func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n        argPos, ary, arity\n      ];\n\n      if (data) {\n        mergeData(newData, data);\n      }\n      func = newData[0];\n      bitmask = newData[1];\n      thisArg = newData[2];\n      partials = newData[3];\n      holders = newData[4];\n      arity = newData[9] = newData[9] === undefined\n        ? (isBindKey ? 0 : func.length)\n        : nativeMax(newData[9] - length, 0);\n\n      if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {\n        bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);\n      }\n      if (!bitmask || bitmask == WRAP_BIND_FLAG) {\n        var result = createBind(func, bitmask, thisArg);\n      } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {\n        result = createCurry(func, bitmask, arity);\n      } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {\n        result = createPartial(func, bitmask, thisArg, partials);\n      } else {\n        result = createHybrid.apply(undefined, newData);\n      }\n      var setter = data ? baseSetData : setData;\n      return setWrapToString(setter(result, newData), func, bitmask);\n    }\n\n    /**\n     * Used by `_.defaults` to customize its `_.assignIn` use to assign properties\n     * of source objects to the destination object for all destination properties\n     * that resolve to `undefined`.\n     *\n     * @private\n     * @param {*} objValue The destination value.\n     * @param {*} srcValue The source value.\n     * @param {string} key The key of the property to assign.\n     * @param {Object} object The parent object of `objValue`.\n     * @returns {*} Returns the value to assign.\n     */\n    function customDefaultsAssignIn(objValue, srcValue, key, object) {\n      if (objValue === undefined ||\n          (eq(objValue, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        return srcValue;\n      }\n      return objValue;\n    }\n\n    /**\n     * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source\n     * objects into destination objects that are passed thru.\n     *\n     * @private\n     * @param {*} objValue The destination value.\n     * @param {*} srcValue The source value.\n     * @param {string} key The key of the property to merge.\n     * @param {Object} object The parent object of `objValue`.\n     * @param {Object} source The parent object of `srcValue`.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     * @returns {*} Returns the value to assign.\n     */\n    function customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n      if (isObject(objValue) && isObject(srcValue)) {\n        // Recursively merge objects and arrays (susceptible to call stack limits).\n        stack.set(srcValue, objValue);\n        baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n        stack['delete'](srcValue);\n      }\n      return objValue;\n    }\n\n    /**\n     * Used by `_.omit` to customize its `_.cloneDeep` use to only clone plain\n     * objects.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @param {string} key The key of the property to inspect.\n     * @returns {*} Returns the uncloned value or `undefined` to defer cloning to `_.cloneDeep`.\n     */\n    function customOmitClone(value) {\n      return isPlainObject(value) ? undefined : value;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for arrays with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Array} array The array to compare.\n     * @param {Array} other The other array to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `array` and `other` objects.\n     * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n     */\n    function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n          arrLength = array.length,\n          othLength = other.length;\n\n      if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(array);\n      if (stacked && stack.get(other)) {\n        return stacked == other;\n      }\n      var index = -1,\n          result = true,\n          seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n      stack.set(array, other);\n      stack.set(other, array);\n\n      // Ignore non-index properties.\n      while (++index < arrLength) {\n        var arrValue = array[index],\n            othValue = other[index];\n\n        if (customizer) {\n          var compared = isPartial\n            ? customizer(othValue, arrValue, index, other, array, stack)\n            : customizer(arrValue, othValue, index, array, other, stack);\n        }\n        if (compared !== undefined) {\n          if (compared) {\n            continue;\n          }\n          result = false;\n          break;\n        }\n        // Recursively compare arrays (susceptible to call stack limits).\n        if (seen) {\n          if (!arraySome(other, function(othValue, othIndex) {\n                if (!cacheHas(seen, othIndex) &&\n                    (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n                  return seen.push(othIndex);\n                }\n              })) {\n            result = false;\n            break;\n          }\n        } else if (!(\n              arrValue === othValue ||\n                equalFunc(arrValue, othValue, bitmask, customizer, stack)\n            )) {\n          result = false;\n          break;\n        }\n      }\n      stack['delete'](array);\n      stack['delete'](other);\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for comparing objects of\n     * the same `toStringTag`.\n     *\n     * **Note:** This function only supports comparing values with tags of\n     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {string} tag The `toStringTag` of the objects to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n      switch (tag) {\n        case dataViewTag:\n          if ((object.byteLength != other.byteLength) ||\n              (object.byteOffset != other.byteOffset)) {\n            return false;\n          }\n          object = object.buffer;\n          other = other.buffer;\n\n        case arrayBufferTag:\n          if ((object.byteLength != other.byteLength) ||\n              !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n            return false;\n          }\n          return true;\n\n        case boolTag:\n        case dateTag:\n        case numberTag:\n          // Coerce booleans to `1` or `0` and dates to milliseconds.\n          // Invalid dates are coerced to `NaN`.\n          return eq(+object, +other);\n\n        case errorTag:\n          return object.name == other.name && object.message == other.message;\n\n        case regexpTag:\n        case stringTag:\n          // Coerce regexes to strings and treat strings, primitives and objects,\n          // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n          // for more details.\n          return object == (other + '');\n\n        case mapTag:\n          var convert = mapToArray;\n\n        case setTag:\n          var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n          convert || (convert = setToArray);\n\n          if (object.size != other.size && !isPartial) {\n            return false;\n          }\n          // Assume cyclic values are equal.\n          var stacked = stack.get(object);\n          if (stacked) {\n            return stacked == other;\n          }\n          bitmask |= COMPARE_UNORDERED_FLAG;\n\n          // Recursively compare objects (susceptible to call stack limits).\n          stack.set(object, other);\n          var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n          stack['delete'](object);\n          return result;\n\n        case symbolTag:\n          if (symbolValueOf) {\n            return symbolValueOf.call(object) == symbolValueOf.call(other);\n          }\n      }\n      return false;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for objects with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n          objProps = getAllKeys(object),\n          objLength = objProps.length,\n          othProps = getAllKeys(other),\n          othLength = othProps.length;\n\n      if (objLength != othLength && !isPartial) {\n        return false;\n      }\n      var index = objLength;\n      while (index--) {\n        var key = objProps[index];\n        if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n          return false;\n        }\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked && stack.get(other)) {\n        return stacked == other;\n      }\n      var result = true;\n      stack.set(object, other);\n      stack.set(other, object);\n\n      var skipCtor = isPartial;\n      while (++index < objLength) {\n        key = objProps[index];\n        var objValue = object[key],\n            othValue = other[key];\n\n        if (customizer) {\n          var compared = isPartial\n            ? customizer(othValue, objValue, key, other, object, stack)\n            : customizer(objValue, othValue, key, object, other, stack);\n        }\n        // Recursively compare objects (susceptible to call stack limits).\n        if (!(compared === undefined\n              ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n              : compared\n            )) {\n          result = false;\n          break;\n        }\n        skipCtor || (skipCtor = key == 'constructor');\n      }\n      if (result && !skipCtor) {\n        var objCtor = object.constructor,\n            othCtor = other.constructor;\n\n        // Non `Object` object instances with different constructors are not equal.\n        if (objCtor != othCtor &&\n            ('constructor' in object && 'constructor' in other) &&\n            !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n              typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n          result = false;\n        }\n      }\n      stack['delete'](object);\n      stack['delete'](other);\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseRest` which flattens the rest array.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @returns {Function} Returns the new function.\n     */\n    function flatRest(func) {\n      return setToString(overRest(func, undefined, flatten), func + '');\n    }\n\n    /**\n     * Creates an array of own enumerable property names and symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function getAllKeys(object) {\n      return baseGetAllKeys(object, keys, getSymbols);\n    }\n\n    /**\n     * Creates an array of own and inherited enumerable property names and\n     * symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function getAllKeysIn(object) {\n      return baseGetAllKeys(object, keysIn, getSymbolsIn);\n    }\n\n    /**\n     * Gets metadata for `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {*} Returns the metadata for `func`.\n     */\n    var getData = !metaMap ? noop : function(func) {\n      return metaMap.get(func);\n    };\n\n    /**\n     * Gets the name of `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {string} Returns the function name.\n     */\n    function getFuncName(func) {\n      var result = (func.name + ''),\n          array = realNames[result],\n          length = hasOwnProperty.call(realNames, result) ? array.length : 0;\n\n      while (length--) {\n        var data = array[length],\n            otherFunc = data.func;\n        if (otherFunc == null || otherFunc == func) {\n          return data.name;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Gets the argument placeholder value for `func`.\n     *\n     * @private\n     * @param {Function} func The function to inspect.\n     * @returns {*} Returns the placeholder value.\n     */\n    function getHolder(func) {\n      var object = hasOwnProperty.call(lodash, 'placeholder') ? lodash : func;\n      return object.placeholder;\n    }\n\n    /**\n     * Gets the appropriate \"iteratee\" function. If `_.iteratee` is customized,\n     * this function returns the custom method, otherwise it returns `baseIteratee`.\n     * If arguments are provided, the chosen function is invoked with them and\n     * its result is returned.\n     *\n     * @private\n     * @param {*} [value] The value to convert to an iteratee.\n     * @param {number} [arity] The arity of the created iteratee.\n     * @returns {Function} Returns the chosen function or its result.\n     */\n    function getIteratee() {\n      var result = lodash.iteratee || iteratee;\n      result = result === iteratee ? baseIteratee : result;\n      return arguments.length ? result(arguments[0], arguments[1]) : result;\n    }\n\n    /**\n     * Gets the data for `map`.\n     *\n     * @private\n     * @param {Object} map The map to query.\n     * @param {string} key The reference key.\n     * @returns {*} Returns the map data.\n     */\n    function getMapData(map, key) {\n      var data = map.__data__;\n      return isKeyable(key)\n        ? data[typeof key == 'string' ? 'string' : 'hash']\n        : data.map;\n    }\n\n    /**\n     * Gets the property names, values, and compare flags of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the match data of `object`.\n     */\n    function getMatchData(object) {\n      var result = keys(object),\n          length = result.length;\n\n      while (length--) {\n        var key = result[length],\n            value = object[key];\n\n        result[length] = [key, value, isStrictComparable(value)];\n      }\n      return result;\n    }\n\n    /**\n     * Gets the native function at `key` of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {string} key The key of the method to get.\n     * @returns {*} Returns the function if it's native, else `undefined`.\n     */\n    function getNative(object, key) {\n      var value = getValue(object, key);\n      return baseIsNative(value) ? value : undefined;\n    }\n\n    /**\n     * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the raw `toStringTag`.\n     */\n    function getRawTag(value) {\n      var isOwn = hasOwnProperty.call(value, symToStringTag),\n          tag = value[symToStringTag];\n\n      try {\n        value[symToStringTag] = undefined;\n        var unmasked = true;\n      } catch (e) {}\n\n      var result = nativeObjectToString.call(value);\n      if (unmasked) {\n        if (isOwn) {\n          value[symToStringTag] = tag;\n        } else {\n          delete value[symToStringTag];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array of the own enumerable symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of symbols.\n     */\n    var getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n      if (object == null) {\n        return [];\n      }\n      object = Object(object);\n      return arrayFilter(nativeGetSymbols(object), function(symbol) {\n        return propertyIsEnumerable.call(object, symbol);\n      });\n    };\n\n    /**\n     * Creates an array of the own and inherited enumerable symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of symbols.\n     */\n    var getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n      var result = [];\n      while (object) {\n        arrayPush(result, getSymbols(object));\n        object = getPrototype(object);\n      }\n      return result;\n    };\n\n    /**\n     * Gets the `toStringTag` of `value`.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the `toStringTag`.\n     */\n    var getTag = baseGetTag;\n\n    // Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\n    if ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n        (Map && getTag(new Map) != mapTag) ||\n        (Promise && getTag(Promise.resolve()) != promiseTag) ||\n        (Set && getTag(new Set) != setTag) ||\n        (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n      getTag = function(value) {\n        var result = baseGetTag(value),\n            Ctor = result == objectTag ? value.constructor : undefined,\n            ctorString = Ctor ? toSource(Ctor) : '';\n\n        if (ctorString) {\n          switch (ctorString) {\n            case dataViewCtorString: return dataViewTag;\n            case mapCtorString: return mapTag;\n            case promiseCtorString: return promiseTag;\n            case setCtorString: return setTag;\n            case weakMapCtorString: return weakMapTag;\n          }\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Gets the view, applying any `transforms` to the `start` and `end` positions.\n     *\n     * @private\n     * @param {number} start The start of the view.\n     * @param {number} end The end of the view.\n     * @param {Array} transforms The transformations to apply to the view.\n     * @returns {Object} Returns an object containing the `start` and `end`\n     *  positions of the view.\n     */\n    function getView(start, end, transforms) {\n      var index = -1,\n          length = transforms.length;\n\n      while (++index < length) {\n        var data = transforms[index],\n            size = data.size;\n\n        switch (data.type) {\n          case 'drop':      start += size; break;\n          case 'dropRight': end -= size; break;\n          case 'take':      end = nativeMin(end, start + size); break;\n          case 'takeRight': start = nativeMax(start, end - size); break;\n        }\n      }\n      return { 'start': start, 'end': end };\n    }\n\n    /**\n     * Extracts wrapper details from the `source` body comment.\n     *\n     * @private\n     * @param {string} source The source to inspect.\n     * @returns {Array} Returns the wrapper details.\n     */\n    function getWrapDetails(source) {\n      var match = source.match(reWrapDetails);\n      return match ? match[1].split(reSplitDetails) : [];\n    }\n\n    /**\n     * Checks if `path` exists on `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @param {Function} hasFunc The function to check properties.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     */\n    function hasPath(object, path, hasFunc) {\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length,\n          result = false;\n\n      while (++index < length) {\n        var key = toKey(path[index]);\n        if (!(result = object != null && hasFunc(object, key))) {\n          break;\n        }\n        object = object[key];\n      }\n      if (result || ++index != length) {\n        return result;\n      }\n      length = object == null ? 0 : object.length;\n      return !!length && isLength(length) && isIndex(key, length) &&\n        (isArray(object) || isArguments(object));\n    }\n\n    /**\n     * Initializes an array clone.\n     *\n     * @private\n     * @param {Array} array The array to clone.\n     * @returns {Array} Returns the initialized clone.\n     */\n    function initCloneArray(array) {\n      var length = array.length,\n          result = new array.constructor(length);\n\n      // Add properties assigned by `RegExp#exec`.\n      if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n        result.index = array.index;\n        result.input = array.input;\n      }\n      return result;\n    }\n\n    /**\n     * Initializes an object clone.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneObject(object) {\n      return (typeof object.constructor == 'function' && !isPrototype(object))\n        ? baseCreate(getPrototype(object))\n        : {};\n    }\n\n    /**\n     * Initializes an object clone based on its `toStringTag`.\n     *\n     * **Note:** This function only supports cloning values with tags of\n     * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @param {string} tag The `toStringTag` of the object to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneByTag(object, tag, isDeep) {\n      var Ctor = object.constructor;\n      switch (tag) {\n        case arrayBufferTag:\n          return cloneArrayBuffer(object);\n\n        case boolTag:\n        case dateTag:\n          return new Ctor(+object);\n\n        case dataViewTag:\n          return cloneDataView(object, isDeep);\n\n        case float32Tag: case float64Tag:\n        case int8Tag: case int16Tag: case int32Tag:\n        case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n          return cloneTypedArray(object, isDeep);\n\n        case mapTag:\n          return new Ctor;\n\n        case numberTag:\n        case stringTag:\n          return new Ctor(object);\n\n        case regexpTag:\n          return cloneRegExp(object);\n\n        case setTag:\n          return new Ctor;\n\n        case symbolTag:\n          return cloneSymbol(object);\n      }\n    }\n\n    /**\n     * Inserts wrapper `details` in a comment at the top of the `source` body.\n     *\n     * @private\n     * @param {string} source The source to modify.\n     * @returns {Array} details The details to insert.\n     * @returns {string} Returns the modified source.\n     */\n    function insertWrapDetails(source, details) {\n      var length = details.length;\n      if (!length) {\n        return source;\n      }\n      var lastIndex = length - 1;\n      details[lastIndex] = (length > 1 ? '& ' : '') + details[lastIndex];\n      details = details.join(length > 2 ? ', ' : ' ');\n      return source.replace(reWrapComment, '{\\n/* [wrapped with ' + details + '] */\\n');\n    }\n\n    /**\n     * Checks if `value` is a flattenable `arguments` object or array.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n     */\n    function isFlattenable(value) {\n      return isArray(value) || isArguments(value) ||\n        !!(spreadableSymbol && value && value[spreadableSymbol]);\n    }\n\n    /**\n     * Checks if `value` is a valid array-like index.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n     * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n     */\n    function isIndex(value, length) {\n      var type = typeof value;\n      length = length == null ? MAX_SAFE_INTEGER : length;\n\n      return !!length &&\n        (type == 'number' ||\n          (type != 'symbol' && reIsUint.test(value))) &&\n            (value > -1 && value % 1 == 0 && value < length);\n    }\n\n    /**\n     * Checks if the given arguments are from an iteratee call.\n     *\n     * @private\n     * @param {*} value The potential iteratee value argument.\n     * @param {*} index The potential iteratee index or key argument.\n     * @param {*} object The potential iteratee object argument.\n     * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n     *  else `false`.\n     */\n    function isIterateeCall(value, index, object) {\n      if (!isObject(object)) {\n        return false;\n      }\n      var type = typeof index;\n      if (type == 'number'\n            ? (isArrayLike(object) && isIndex(index, object.length))\n            : (type == 'string' && index in object)\n          ) {\n        return eq(object[index], value);\n      }\n      return false;\n    }\n\n    /**\n     * Checks if `value` is a property name and not a property path.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {Object} [object] The object to query keys on.\n     * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n     */\n    function isKey(value, object) {\n      if (isArray(value)) {\n        return false;\n      }\n      var type = typeof value;\n      if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n          value == null || isSymbol(value)) {\n        return true;\n      }\n      return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n        (object != null && value in Object(object));\n    }\n\n    /**\n     * Checks if `value` is suitable for use as unique object key.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n     */\n    function isKeyable(value) {\n      var type = typeof value;\n      return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n        ? (value !== '__proto__')\n        : (value === null);\n    }\n\n    /**\n     * Checks if `func` has a lazy counterpart.\n     *\n     * @private\n     * @param {Function} func The function to check.\n     * @returns {boolean} Returns `true` if `func` has a lazy counterpart,\n     *  else `false`.\n     */\n    function isLaziable(func) {\n      var funcName = getFuncName(func),\n          other = lodash[funcName];\n\n      if (typeof other != 'function' || !(funcName in LazyWrapper.prototype)) {\n        return false;\n      }\n      if (func === other) {\n        return true;\n      }\n      var data = getData(other);\n      return !!data && func === data[0];\n    }\n\n    /**\n     * Checks if `func` has its source masked.\n     *\n     * @private\n     * @param {Function} func The function to check.\n     * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n     */\n    function isMasked(func) {\n      return !!maskSrcKey && (maskSrcKey in func);\n    }\n\n    /**\n     * Checks if `func` is capable of being masked.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `func` is maskable, else `false`.\n     */\n    var isMaskable = coreJsData ? isFunction : stubFalse;\n\n    /**\n     * Checks if `value` is likely a prototype object.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n     */\n    function isPrototype(value) {\n      var Ctor = value && value.constructor,\n          proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n      return value === proto;\n    }\n\n    /**\n     * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` if suitable for strict\n     *  equality comparisons, else `false`.\n     */\n    function isStrictComparable(value) {\n      return value === value && !isObject(value);\n    }\n\n    /**\n     * A specialized version of `matchesProperty` for source values suitable\n     * for strict equality comparisons, i.e. `===`.\n     *\n     * @private\n     * @param {string} key The key of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function matchesStrictComparable(key, srcValue) {\n      return function(object) {\n        if (object == null) {\n          return false;\n        }\n        return object[key] === srcValue &&\n          (srcValue !== undefined || (key in Object(object)));\n      };\n    }\n\n    /**\n     * A specialized version of `_.memoize` which clears the memoized function's\n     * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n     *\n     * @private\n     * @param {Function} func The function to have its output memoized.\n     * @returns {Function} Returns the new memoized function.\n     */\n    function memoizeCapped(func) {\n      var result = memoize(func, function(key) {\n        if (cache.size === MAX_MEMOIZE_SIZE) {\n          cache.clear();\n        }\n        return key;\n      });\n\n      var cache = result.cache;\n      return result;\n    }\n\n    /**\n     * Merges the function metadata of `source` into `data`.\n     *\n     * Merging metadata reduces the number of wrappers used to invoke a function.\n     * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`\n     * may be applied regardless of execution order. Methods like `_.ary` and\n     * `_.rearg` modify function arguments, making the order in which they are\n     * executed important, preventing the merging of metadata. However, we make\n     * an exception for a safe combined case where curried functions have `_.ary`\n     * and or `_.rearg` applied.\n     *\n     * @private\n     * @param {Array} data The destination metadata.\n     * @param {Array} source The source metadata.\n     * @returns {Array} Returns `data`.\n     */\n    function mergeData(data, source) {\n      var bitmask = data[1],\n          srcBitmask = source[1],\n          newBitmask = bitmask | srcBitmask,\n          isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);\n\n      var isCombo =\n        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_CURRY_FLAG)) ||\n        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_REARG_FLAG) && (data[7].length <= source[8])) ||\n        ((srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG)) && (source[7].length <= source[8]) && (bitmask == WRAP_CURRY_FLAG));\n\n      // Exit early if metadata can't be merged.\n      if (!(isCommon || isCombo)) {\n        return data;\n      }\n      // Use source `thisArg` if available.\n      if (srcBitmask & WRAP_BIND_FLAG) {\n        data[2] = source[2];\n        // Set when currying a bound function.\n        newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;\n      }\n      // Compose partial arguments.\n      var value = source[3];\n      if (value) {\n        var partials = data[3];\n        data[3] = partials ? composeArgs(partials, value, source[4]) : value;\n        data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];\n      }\n      // Compose partial right arguments.\n      value = source[5];\n      if (value) {\n        partials = data[5];\n        data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;\n        data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];\n      }\n      // Use source `argPos` if available.\n      value = source[7];\n      if (value) {\n        data[7] = value;\n      }\n      // Use source `ary` if it's smaller.\n      if (srcBitmask & WRAP_ARY_FLAG) {\n        data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);\n      }\n      // Use source `arity` if one is not provided.\n      if (data[9] == null) {\n        data[9] = source[9];\n      }\n      // Use source `func` and merge bitmasks.\n      data[0] = source[0];\n      data[1] = newBitmask;\n\n      return data;\n    }\n\n    /**\n     * This function is like\n     * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n     * except that it includes inherited enumerable properties.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function nativeKeysIn(object) {\n      var result = [];\n      if (object != null) {\n        for (var key in Object(object)) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Converts `value` to a string using `Object.prototype.toString`.\n     *\n     * @private\n     * @param {*} value The value to convert.\n     * @returns {string} Returns the converted string.\n     */\n    function objectToString(value) {\n      return nativeObjectToString.call(value);\n    }\n\n    /**\n     * A specialized version of `baseRest` which transforms the rest array.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @param {Function} transform The rest array transform.\n     * @returns {Function} Returns the new function.\n     */\n    function overRest(func, start, transform) {\n      start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n      return function() {\n        var args = arguments,\n            index = -1,\n            length = nativeMax(args.length - start, 0),\n            array = Array(length);\n\n        while (++index < length) {\n          array[index] = args[start + index];\n        }\n        index = -1;\n        var otherArgs = Array(start + 1);\n        while (++index < start) {\n          otherArgs[index] = args[index];\n        }\n        otherArgs[start] = transform(array);\n        return apply(func, this, otherArgs);\n      };\n    }\n\n    /**\n     * Gets the parent value at `path` of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array} path The path to get the parent value of.\n     * @returns {*} Returns the parent value.\n     */\n    function parent(object, path) {\n      return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n    }\n\n    /**\n     * Reorder `array` according to the specified indexes where the element at\n     * the first index is assigned as the first element, the element at\n     * the second index is assigned as the second element, and so on.\n     *\n     * @private\n     * @param {Array} array The array to reorder.\n     * @param {Array} indexes The arranged array indexes.\n     * @returns {Array} Returns `array`.\n     */\n    function reorder(array, indexes) {\n      var arrLength = array.length,\n          length = nativeMin(indexes.length, arrLength),\n          oldArray = copyArray(array);\n\n      while (length--) {\n        var index = indexes[length];\n        array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;\n      }\n      return array;\n    }\n\n    /**\n     * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {string} key The key of the property to get.\n     * @returns {*} Returns the property value.\n     */\n    function safeGet(object, key) {\n      if (key === 'constructor' && typeof object[key] === 'function') {\n        return;\n      }\n\n      if (key == '__proto__') {\n        return;\n      }\n\n      return object[key];\n    }\n\n    /**\n     * Sets metadata for `func`.\n     *\n     * **Note:** If this function becomes hot, i.e. is invoked a lot in a short\n     * period of time, it will trip its breaker and transition to an identity\n     * function to avoid garbage collection pauses in V8. See\n     * [V8 issue 2070](https://bugs.chromium.org/p/v8/issues/detail?id=2070)\n     * for more details.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var setData = shortOut(baseSetData);\n\n    /**\n     * A simple wrapper around the global [`setTimeout`](https://mdn.io/setTimeout).\n     *\n     * @private\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @returns {number|Object} Returns the timer id or timeout object.\n     */\n    var setTimeout = ctxSetTimeout || function(func, wait) {\n      return root.setTimeout(func, wait);\n    };\n\n    /**\n     * Sets the `toString` method of `func` to return `string`.\n     *\n     * @private\n     * @param {Function} func The function to modify.\n     * @param {Function} string The `toString` result.\n     * @returns {Function} Returns `func`.\n     */\n    var setToString = shortOut(baseSetToString);\n\n    /**\n     * Sets the `toString` method of `wrapper` to mimic the source of `reference`\n     * with wrapper details in a comment at the top of the source body.\n     *\n     * @private\n     * @param {Function} wrapper The function to modify.\n     * @param {Function} reference The reference function.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @returns {Function} Returns `wrapper`.\n     */\n    function setWrapToString(wrapper, reference, bitmask) {\n      var source = (reference + '');\n      return setToString(wrapper, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));\n    }\n\n    /**\n     * Creates a function that'll short out and invoke `identity` instead\n     * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n     * milliseconds.\n     *\n     * @private\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new shortable function.\n     */\n    function shortOut(func) {\n      var count = 0,\n          lastCalled = 0;\n\n      return function() {\n        var stamp = nativeNow(),\n            remaining = HOT_SPAN - (stamp - lastCalled);\n\n        lastCalled = stamp;\n        if (remaining > 0) {\n          if (++count >= HOT_COUNT) {\n            return arguments[0];\n          }\n        } else {\n          count = 0;\n        }\n        return func.apply(undefined, arguments);\n      };\n    }\n\n    /**\n     * A specialized version of `_.shuffle` which mutates and sets the size of `array`.\n     *\n     * @private\n     * @param {Array} array The array to shuffle.\n     * @param {number} [size=array.length] The size of `array`.\n     * @returns {Array} Returns `array`.\n     */\n    function shuffleSelf(array, size) {\n      var index = -1,\n          length = array.length,\n          lastIndex = length - 1;\n\n      size = size === undefined ? length : size;\n      while (++index < size) {\n        var rand = baseRandom(index, lastIndex),\n            value = array[rand];\n\n        array[rand] = array[index];\n        array[index] = value;\n      }\n      array.length = size;\n      return array;\n    }\n\n    /**\n     * Converts `string` to a property path array.\n     *\n     * @private\n     * @param {string} string The string to convert.\n     * @returns {Array} Returns the property path array.\n     */\n    var stringToPath = memoizeCapped(function(string) {\n      var result = [];\n      if (string.charCodeAt(0) === 46 /* . */) {\n        result.push('');\n      }\n      string.replace(rePropName, function(match, number, quote, subString) {\n        result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n      });\n      return result;\n    });\n\n    /**\n     * Converts `value` to a string key if it's not a string or symbol.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {string|symbol} Returns the key.\n     */\n    function toKey(value) {\n      if (typeof value == 'string' || isSymbol(value)) {\n        return value;\n      }\n      var result = (value + '');\n      return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n    }\n\n    /**\n     * Converts `func` to its source code.\n     *\n     * @private\n     * @param {Function} func The function to convert.\n     * @returns {string} Returns the source code.\n     */\n    function toSource(func) {\n      if (func != null) {\n        try {\n          return funcToString.call(func);\n        } catch (e) {}\n        try {\n          return (func + '');\n        } catch (e) {}\n      }\n      return '';\n    }\n\n    /**\n     * Updates wrapper `details` based on `bitmask` flags.\n     *\n     * @private\n     * @returns {Array} details The details to modify.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @returns {Array} Returns `details`.\n     */\n    function updateWrapDetails(details, bitmask) {\n      arrayEach(wrapFlags, function(pair) {\n        var value = '_.' + pair[0];\n        if ((bitmask & pair[1]) && !arrayIncludes(details, value)) {\n          details.push(value);\n        }\n      });\n      return details.sort();\n    }\n\n    /**\n     * Creates a clone of `wrapper`.\n     *\n     * @private\n     * @param {Object} wrapper The wrapper to clone.\n     * @returns {Object} Returns the cloned wrapper.\n     */\n    function wrapperClone(wrapper) {\n      if (wrapper instanceof LazyWrapper) {\n        return wrapper.clone();\n      }\n      var result = new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__);\n      result.__actions__ = copyArray(wrapper.__actions__);\n      result.__index__  = wrapper.__index__;\n      result.__values__ = wrapper.__values__;\n      return result;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of elements split into groups the length of `size`.\n     * If `array` can't be split evenly, the final chunk will be the remaining\n     * elements.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to process.\n     * @param {number} [size=1] The length of each chunk\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the new array of chunks.\n     * @example\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 2);\n     * // => [['a', 'b'], ['c', 'd']]\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 3);\n     * // => [['a', 'b', 'c'], ['d']]\n     */\n    function chunk(array, size, guard) {\n      if ((guard ? isIterateeCall(array, size, guard) : size === undefined)) {\n        size = 1;\n      } else {\n        size = nativeMax(toInteger(size), 0);\n      }\n      var length = array == null ? 0 : array.length;\n      if (!length || size < 1) {\n        return [];\n      }\n      var index = 0,\n          resIndex = 0,\n          result = Array(nativeCeil(length / size));\n\n      while (index < length) {\n        result[resIndex++] = baseSlice(array, index, (index += size));\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array with all falsey values removed. The values `false`, `null`,\n     * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to compact.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.compact([0, 1, false, 2, '', 3]);\n     * // => [1, 2, 3]\n     */\n    function compact(array) {\n      var index = -1,\n          length = array == null ? 0 : array.length,\n          resIndex = 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index];\n        if (value) {\n          result[resIndex++] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates a new array concatenating `array` with any additional arrays\n     * and/or values.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to concatenate.\n     * @param {...*} [values] The values to concatenate.\n     * @returns {Array} Returns the new concatenated array.\n     * @example\n     *\n     * var array = [1];\n     * var other = _.concat(array, 2, [3], [[4]]);\n     *\n     * console.log(other);\n     * // => [1, 2, 3, [4]]\n     *\n     * console.log(array);\n     * // => [1]\n     */\n    function concat() {\n      var length = arguments.length;\n      if (!length) {\n        return [];\n      }\n      var args = Array(length - 1),\n          array = arguments[0],\n          index = length;\n\n      while (index--) {\n        args[index - 1] = arguments[index];\n      }\n      return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));\n    }\n\n    /**\n     * Creates an array of `array` values not included in the other given arrays\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. The order and references of result values are\n     * determined by the first array.\n     *\n     * **Note:** Unlike `_.pullAll`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.without, _.xor\n     * @example\n     *\n     * _.difference([2, 1], [2, 3]);\n     * // => [1]\n     */\n    var difference = baseRest(function(array, values) {\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n        : [];\n    });\n\n    /**\n     * This method is like `_.difference` except that it accepts `iteratee` which\n     * is invoked for each element of `array` and `values` to generate the criterion\n     * by which they're compared. The order and references of result values are\n     * determined by the first array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * **Note:** Unlike `_.pullAllBy`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.differenceBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.differenceBy([{ 'x': 2 }, { 'x': 1 }], [{ 'x': 1 }], 'x');\n     * // => [{ 'x': 2 }]\n     */\n    var differenceBy = baseRest(function(array, values) {\n      var iteratee = last(values);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), getIteratee(iteratee, 2))\n        : [];\n    });\n\n    /**\n     * This method is like `_.difference` except that it accepts `comparator`\n     * which is invoked to compare elements of `array` to `values`. The order and\n     * references of result values are determined by the first array. The comparator\n     * is invoked with two arguments: (arrVal, othVal).\n     *\n     * **Note:** Unlike `_.pullAllWith`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     *\n     * _.differenceWith(objects, [{ 'x': 1, 'y': 2 }], _.isEqual);\n     * // => [{ 'x': 2, 'y': 1 }]\n     */\n    var differenceWith = baseRest(function(array, values) {\n      var comparator = last(values);\n      if (isArrayLikeObject(comparator)) {\n        comparator = undefined;\n      }\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), undefined, comparator)\n        : [];\n    });\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.drop([1, 2, 3]);\n     * // => [2, 3]\n     *\n     * _.drop([1, 2, 3], 2);\n     * // => [3]\n     *\n     * _.drop([1, 2, 3], 5);\n     * // => []\n     *\n     * _.drop([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function drop(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      return baseSlice(array, n < 0 ? 0 : n, length);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the end.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.dropRight([1, 2, 3]);\n     * // => [1, 2]\n     *\n     * _.dropRight([1, 2, 3], 2);\n     * // => [1]\n     *\n     * _.dropRight([1, 2, 3], 5);\n     * // => []\n     *\n     * _.dropRight([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function dropRight(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      n = length - n;\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the end.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.dropRightWhile(users, function(o) { return !o.active; });\n     * // => objects for ['barney']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.dropRightWhile(users, { 'user': 'pebbles', 'active': false });\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.dropRightWhile(users, ['active', false]);\n     * // => objects for ['barney']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.dropRightWhile(users, 'active');\n     * // => objects for ['barney', 'fred', 'pebbles']\n     */\n    function dropRightWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), true, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the beginning.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.dropWhile(users, function(o) { return !o.active; });\n     * // => objects for ['pebbles']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.dropWhile(users, { 'user': 'barney', 'active': false });\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.dropWhile(users, ['active', false]);\n     * // => objects for ['pebbles']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.dropWhile(users, 'active');\n     * // => objects for ['barney', 'fred', 'pebbles']\n     */\n    function dropWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), true)\n        : [];\n    }\n\n    /**\n     * Fills elements of `array` with `value` from `start` up to, but not\n     * including, `end`.\n     *\n     * **Note:** This method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Array\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _.fill(array, 'a');\n     * console.log(array);\n     * // => ['a', 'a', 'a']\n     *\n     * _.fill(Array(3), 2);\n     * // => [2, 2, 2]\n     *\n     * _.fill([4, 6, 8, 10], '*', 1, 3);\n     * // => [4, '*', '*', 10]\n     */\n    function fill(array, value, start, end) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {\n        start = 0;\n        end = length;\n      }\n      return baseFill(array, value, start, end);\n    }\n\n    /**\n     * This method is like `_.find` except that it returns the index of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.findIndex(users, function(o) { return o.user == 'barney'; });\n     * // => 0\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findIndex(users, { 'user': 'fred', 'active': false });\n     * // => 1\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findIndex(users, ['active', false]);\n     * // => 0\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findIndex(users, 'active');\n     * // => 2\n     */\n    function findIndex(array, predicate, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = fromIndex == null ? 0 : toInteger(fromIndex);\n      if (index < 0) {\n        index = nativeMax(length + index, 0);\n      }\n      return baseFindIndex(array, getIteratee(predicate, 3), index);\n    }\n\n    /**\n     * This method is like `_.findIndex` except that it iterates over elements\n     * of `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=array.length-1] The index to search from.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });\n     * // => 2\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findLastIndex(users, { 'user': 'barney', 'active': true });\n     * // => 0\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findLastIndex(users, ['active', false]);\n     * // => 2\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findLastIndex(users, 'active');\n     * // => 0\n     */\n    function findLastIndex(array, predicate, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = length - 1;\n      if (fromIndex !== undefined) {\n        index = toInteger(fromIndex);\n        index = fromIndex < 0\n          ? nativeMax(length + index, 0)\n          : nativeMin(index, length - 1);\n      }\n      return baseFindIndex(array, getIteratee(predicate, 3), index, true);\n    }\n\n    /**\n     * Flattens `array` a single level deep.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flatten([1, [2, [3, [4]], 5]]);\n     * // => [1, 2, [3, [4]], 5]\n     */\n    function flatten(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseFlatten(array, 1) : [];\n    }\n\n    /**\n     * Recursively flattens `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flattenDeep([1, [2, [3, [4]], 5]]);\n     * // => [1, 2, 3, 4, 5]\n     */\n    function flattenDeep(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseFlatten(array, INFINITY) : [];\n    }\n\n    /**\n     * Recursively flatten `array` up to `depth` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.4.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @param {number} [depth=1] The maximum recursion depth.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * var array = [1, [2, [3, [4]], 5]];\n     *\n     * _.flattenDepth(array, 1);\n     * // => [1, 2, [3, [4]], 5]\n     *\n     * _.flattenDepth(array, 2);\n     * // => [1, 2, 3, [4], 5]\n     */\n    function flattenDepth(array, depth) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      depth = depth === undefined ? 1 : toInteger(depth);\n      return baseFlatten(array, depth);\n    }\n\n    /**\n     * The inverse of `_.toPairs`; this method returns an object composed\n     * from key-value `pairs`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} pairs The key-value pairs.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.fromPairs([['a', 1], ['b', 2]]);\n     * // => { 'a': 1, 'b': 2 }\n     */\n    function fromPairs(pairs) {\n      var index = -1,\n          length = pairs == null ? 0 : pairs.length,\n          result = {};\n\n      while (++index < length) {\n        var pair = pairs[index];\n        result[pair[0]] = pair[1];\n      }\n      return result;\n    }\n\n    /**\n     * Gets the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @alias first\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the first element of `array`.\n     * @example\n     *\n     * _.head([1, 2, 3]);\n     * // => 1\n     *\n     * _.head([]);\n     * // => undefined\n     */\n    function head(array) {\n      return (array && array.length) ? array[0] : undefined;\n    }\n\n    /**\n     * Gets the index at which the first occurrence of `value` is found in `array`\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. If `fromIndex` is negative, it's used as the\n     * offset from the end of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.indexOf([1, 2, 1, 2], 2);\n     * // => 1\n     *\n     * // Search from the `fromIndex`.\n     * _.indexOf([1, 2, 1, 2], 2, 2);\n     * // => 3\n     */\n    function indexOf(array, value, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = fromIndex == null ? 0 : toInteger(fromIndex);\n      if (index < 0) {\n        index = nativeMax(length + index, 0);\n      }\n      return baseIndexOf(array, value, index);\n    }\n\n    /**\n     * Gets all but the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.initial([1, 2, 3]);\n     * // => [1, 2]\n     */\n    function initial(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseSlice(array, 0, -1) : [];\n    }\n\n    /**\n     * Creates an array of unique values that are included in all given arrays\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. The order and references of result values are\n     * determined by the first array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * _.intersection([2, 1], [2, 3]);\n     * // => [2]\n     */\n    var intersection = baseRest(function(arrays) {\n      var mapped = arrayMap(arrays, castArrayLikeObject);\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped)\n        : [];\n    });\n\n    /**\n     * This method is like `_.intersection` except that it accepts `iteratee`\n     * which is invoked for each element of each `arrays` to generate the criterion\n     * by which they're compared. The order and references of result values are\n     * determined by the first array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * _.intersectionBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [2.1]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.intersectionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }]\n     */\n    var intersectionBy = baseRest(function(arrays) {\n      var iteratee = last(arrays),\n          mapped = arrayMap(arrays, castArrayLikeObject);\n\n      if (iteratee === last(mapped)) {\n        iteratee = undefined;\n      } else {\n        mapped.pop();\n      }\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped, getIteratee(iteratee, 2))\n        : [];\n    });\n\n    /**\n     * This method is like `_.intersection` except that it accepts `comparator`\n     * which is invoked to compare elements of `arrays`. The order and references\n     * of result values are determined by the first array. The comparator is\n     * invoked with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.intersectionWith(objects, others, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }]\n     */\n    var intersectionWith = baseRest(function(arrays) {\n      var comparator = last(arrays),\n          mapped = arrayMap(arrays, castArrayLikeObject);\n\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      if (comparator) {\n        mapped.pop();\n      }\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped, undefined, comparator)\n        : [];\n    });\n\n    /**\n     * Converts all elements in `array` into a string separated by `separator`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to convert.\n     * @param {string} [separator=','] The element separator.\n     * @returns {string} Returns the joined string.\n     * @example\n     *\n     * _.join(['a', 'b', 'c'], '~');\n     * // => 'a~b~c'\n     */\n    function join(array, separator) {\n      return array == null ? '' : nativeJoin.call(array, separator);\n    }\n\n    /**\n     * Gets the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the last element of `array`.\n     * @example\n     *\n     * _.last([1, 2, 3]);\n     * // => 3\n     */\n    function last(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? array[length - 1] : undefined;\n    }\n\n    /**\n     * This method is like `_.indexOf` except that it iterates over elements of\n     * `array` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=array.length-1] The index to search from.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.lastIndexOf([1, 2, 1, 2], 2);\n     * // => 3\n     *\n     * // Search from the `fromIndex`.\n     * _.lastIndexOf([1, 2, 1, 2], 2, 2);\n     * // => 1\n     */\n    function lastIndexOf(array, value, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = length;\n      if (fromIndex !== undefined) {\n        index = toInteger(fromIndex);\n        index = index < 0 ? nativeMax(length + index, 0) : nativeMin(index, length - 1);\n      }\n      return value === value\n        ? strictLastIndexOf(array, value, index)\n        : baseFindIndex(array, baseIsNaN, index, true);\n    }\n\n    /**\n     * Gets the element at index `n` of `array`. If `n` is negative, the nth\n     * element from the end is returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.11.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=0] The index of the element to return.\n     * @returns {*} Returns the nth element of `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'd'];\n     *\n     * _.nth(array, 1);\n     * // => 'b'\n     *\n     * _.nth(array, -2);\n     * // => 'c';\n     */\n    function nth(array, n) {\n      return (array && array.length) ? baseNth(array, toInteger(n)) : undefined;\n    }\n\n    /**\n     * Removes all given values from `array` using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * **Note:** Unlike `_.without`, this method mutates `array`. Use `_.remove`\n     * to remove elements from an array by predicate.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...*} [values] The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n     *\n     * _.pull(array, 'a', 'c');\n     * console.log(array);\n     * // => ['b', 'b']\n     */\n    var pull = baseRest(pullAll);\n\n    /**\n     * This method is like `_.pull` except that it accepts an array of values to remove.\n     *\n     * **Note:** Unlike `_.difference`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n     *\n     * _.pullAll(array, ['a', 'c']);\n     * console.log(array);\n     * // => ['b', 'b']\n     */\n    function pullAll(array, values) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values)\n        : array;\n    }\n\n    /**\n     * This method is like `_.pullAll` except that it accepts `iteratee` which is\n     * invoked for each element of `array` and `values` to generate the criterion\n     * by which they're compared. The iteratee is invoked with one argument: (value).\n     *\n     * **Note:** Unlike `_.differenceBy`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [{ 'x': 1 }, { 'x': 2 }, { 'x': 3 }, { 'x': 1 }];\n     *\n     * _.pullAllBy(array, [{ 'x': 1 }, { 'x': 3 }], 'x');\n     * console.log(array);\n     * // => [{ 'x': 2 }]\n     */\n    function pullAllBy(array, values, iteratee) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values, getIteratee(iteratee, 2))\n        : array;\n    }\n\n    /**\n     * This method is like `_.pullAll` except that it accepts `comparator` which\n     * is invoked to compare elements of `array` to `values`. The comparator is\n     * invoked with two arguments: (arrVal, othVal).\n     *\n     * **Note:** Unlike `_.differenceWith`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [{ 'x': 1, 'y': 2 }, { 'x': 3, 'y': 4 }, { 'x': 5, 'y': 6 }];\n     *\n     * _.pullAllWith(array, [{ 'x': 3, 'y': 4 }], _.isEqual);\n     * console.log(array);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 5, 'y': 6 }]\n     */\n    function pullAllWith(array, values, comparator) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values, undefined, comparator)\n        : array;\n    }\n\n    /**\n     * Removes elements from `array` corresponding to `indexes` and returns an\n     * array of removed elements.\n     *\n     * **Note:** Unlike `_.at`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...(number|number[])} [indexes] The indexes of elements to remove.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'd'];\n     * var pulled = _.pullAt(array, [1, 3]);\n     *\n     * console.log(array);\n     * // => ['a', 'c']\n     *\n     * console.log(pulled);\n     * // => ['b', 'd']\n     */\n    var pullAt = flatRest(function(array, indexes) {\n      var length = array == null ? 0 : array.length,\n          result = baseAt(array, indexes);\n\n      basePullAt(array, arrayMap(indexes, function(index) {\n        return isIndex(index, length) ? +index : index;\n      }).sort(compareAscending));\n\n      return result;\n    });\n\n    /**\n     * Removes all elements from `array` that `predicate` returns truthy for\n     * and returns an array of the removed elements. The predicate is invoked\n     * with three arguments: (value, index, array).\n     *\n     * **Note:** Unlike `_.filter`, this method mutates `array`. Use `_.pull`\n     * to pull elements from an array by value.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = [1, 2, 3, 4];\n     * var evens = _.remove(array, function(n) {\n     *   return n % 2 == 0;\n     * });\n     *\n     * console.log(array);\n     * // => [1, 3]\n     *\n     * console.log(evens);\n     * // => [2, 4]\n     */\n    function remove(array, predicate) {\n      var result = [];\n      if (!(array && array.length)) {\n        return result;\n      }\n      var index = -1,\n          indexes = [],\n          length = array.length;\n\n      predicate = getIteratee(predicate, 3);\n      while (++index < length) {\n        var value = array[index];\n        if (predicate(value, index, array)) {\n          result.push(value);\n          indexes.push(index);\n        }\n      }\n      basePullAt(array, indexes);\n      return result;\n    }\n\n    /**\n     * Reverses `array` so that the first element becomes the last, the second\n     * element becomes the second to last, and so on.\n     *\n     * **Note:** This method mutates `array` and is based on\n     * [`Array#reverse`](https://mdn.io/Array/reverse).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _.reverse(array);\n     * // => [3, 2, 1]\n     *\n     * console.log(array);\n     * // => [3, 2, 1]\n     */\n    function reverse(array) {\n      return array == null ? array : nativeReverse.call(array);\n    }\n\n    /**\n     * Creates a slice of `array` from `start` up to, but not including, `end`.\n     *\n     * **Note:** This method is used instead of\n     * [`Array#slice`](https://mdn.io/Array/slice) to ensure dense arrays are\n     * returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function slice(array, start, end) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      if (end && typeof end != 'number' && isIterateeCall(array, start, end)) {\n        start = 0;\n        end = length;\n      }\n      else {\n        start = start == null ? 0 : toInteger(start);\n        end = end === undefined ? length : toInteger(end);\n      }\n      return baseSlice(array, start, end);\n    }\n\n    /**\n     * Uses a binary search to determine the lowest index at which `value`\n     * should be inserted into `array` in order to maintain its sort order.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedIndex([30, 50], 40);\n     * // => 1\n     */\n    function sortedIndex(array, value) {\n      return baseSortedIndex(array, value);\n    }\n\n    /**\n     * This method is like `_.sortedIndex` except that it accepts `iteratee`\n     * which is invoked for `value` and each element of `array` to compute their\n     * sort ranking. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * var objects = [{ 'x': 4 }, { 'x': 5 }];\n     *\n     * _.sortedIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n     * // => 0\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sortedIndexBy(objects, { 'x': 4 }, 'x');\n     * // => 0\n     */\n    function sortedIndexBy(array, value, iteratee) {\n      return baseSortedIndexBy(array, value, getIteratee(iteratee, 2));\n    }\n\n    /**\n     * This method is like `_.indexOf` except that it performs a binary\n     * search on a sorted `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.sortedIndexOf([4, 5, 5, 5, 6], 5);\n     * // => 1\n     */\n    function sortedIndexOf(array, value) {\n      var length = array == null ? 0 : array.length;\n      if (length) {\n        var index = baseSortedIndex(array, value);\n        if (index < length && eq(array[index], value)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * This method is like `_.sortedIndex` except that it returns the highest\n     * index at which `value` should be inserted into `array` in order to\n     * maintain its sort order.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedLastIndex([4, 5, 5, 5, 6], 5);\n     * // => 4\n     */\n    function sortedLastIndex(array, value) {\n      return baseSortedIndex(array, value, true);\n    }\n\n    /**\n     * This method is like `_.sortedLastIndex` except that it accepts `iteratee`\n     * which is invoked for `value` and each element of `array` to compute their\n     * sort ranking. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * var objects = [{ 'x': 4 }, { 'x': 5 }];\n     *\n     * _.sortedLastIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n     * // => 1\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sortedLastIndexBy(objects, { 'x': 4 }, 'x');\n     * // => 1\n     */\n    function sortedLastIndexBy(array, value, iteratee) {\n      return baseSortedIndexBy(array, value, getIteratee(iteratee, 2), true);\n    }\n\n    /**\n     * This method is like `_.lastIndexOf` except that it performs a binary\n     * search on a sorted `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.sortedLastIndexOf([4, 5, 5, 5, 6], 5);\n     * // => 3\n     */\n    function sortedLastIndexOf(array, value) {\n      var length = array == null ? 0 : array.length;\n      if (length) {\n        var index = baseSortedIndex(array, value, true) - 1;\n        if (eq(array[index], value)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * This method is like `_.uniq` except that it's designed and optimized\n     * for sorted arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.sortedUniq([1, 1, 2]);\n     * // => [1, 2]\n     */\n    function sortedUniq(array) {\n      return (array && array.length)\n        ? baseSortedUniq(array)\n        : [];\n    }\n\n    /**\n     * This method is like `_.uniqBy` except that it's designed and optimized\n     * for sorted arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.sortedUniqBy([1.1, 1.2, 2.3, 2.4], Math.floor);\n     * // => [1.1, 2.3]\n     */\n    function sortedUniqBy(array, iteratee) {\n      return (array && array.length)\n        ? baseSortedUniq(array, getIteratee(iteratee, 2))\n        : [];\n    }\n\n    /**\n     * Gets all but the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.tail([1, 2, 3]);\n     * // => [2, 3]\n     */\n    function tail(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseSlice(array, 1, length) : [];\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.take([1, 2, 3]);\n     * // => [1]\n     *\n     * _.take([1, 2, 3], 2);\n     * // => [1, 2]\n     *\n     * _.take([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.take([1, 2, 3], 0);\n     * // => []\n     */\n    function take(array, n, guard) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the end.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.takeRight([1, 2, 3]);\n     * // => [3]\n     *\n     * _.takeRight([1, 2, 3], 2);\n     * // => [2, 3]\n     *\n     * _.takeRight([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.takeRight([1, 2, 3], 0);\n     * // => []\n     */\n    function takeRight(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      n = length - n;\n      return baseSlice(array, n < 0 ? 0 : n, length);\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the end. Elements are\n     * taken until `predicate` returns falsey. The predicate is invoked with\n     * three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.takeRightWhile(users, function(o) { return !o.active; });\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.takeRightWhile(users, { 'user': 'pebbles', 'active': false });\n     * // => objects for ['pebbles']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.takeRightWhile(users, ['active', false]);\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.takeRightWhile(users, 'active');\n     * // => []\n     */\n    function takeRightWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), false, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the beginning. Elements\n     * are taken until `predicate` returns falsey. The predicate is invoked with\n     * three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.takeWhile(users, function(o) { return !o.active; });\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.takeWhile(users, { 'user': 'barney', 'active': false });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.takeWhile(users, ['active', false]);\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.takeWhile(users, 'active');\n     * // => []\n     */\n    function takeWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3))\n        : [];\n    }\n\n    /**\n     * Creates an array of unique values, in order, from all given arrays using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * _.union([2], [1, 2]);\n     * // => [2, 1]\n     */\n    var union = baseRest(function(arrays) {\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n    });\n\n    /**\n     * This method is like `_.union` except that it accepts `iteratee` which is\n     * invoked for each element of each `arrays` to generate the criterion by\n     * which uniqueness is computed. Result values are chosen from the first\n     * array in which the value occurs. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * _.unionBy([2.1], [1.2, 2.3], Math.floor);\n     * // => [2.1, 1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.unionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    var unionBy = baseRest(function(arrays) {\n      var iteratee = last(arrays);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), getIteratee(iteratee, 2));\n    });\n\n    /**\n     * This method is like `_.union` except that it accepts `comparator` which\n     * is invoked to compare elements of `arrays`. Result values are chosen from\n     * the first array in which the value occurs. The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.unionWith(objects, others, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]\n     */\n    var unionWith = baseRest(function(arrays) {\n      var comparator = last(arrays);\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), undefined, comparator);\n    });\n\n    /**\n     * Creates a duplicate-free version of an array, using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons, in which only the first occurrence of each element\n     * is kept. The order of result values is determined by the order they occur\n     * in the array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.uniq([2, 1, 2]);\n     * // => [2, 1]\n     */\n    function uniq(array) {\n      return (array && array.length) ? baseUniq(array) : [];\n    }\n\n    /**\n     * This method is like `_.uniq` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * uniqueness is computed. The order of result values is determined by the\n     * order they occur in the array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.uniqBy([2.1, 1.2, 2.3], Math.floor);\n     * // => [2.1, 1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.uniqBy([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    function uniqBy(array, iteratee) {\n      return (array && array.length) ? baseUniq(array, getIteratee(iteratee, 2)) : [];\n    }\n\n    /**\n     * This method is like `_.uniq` except that it accepts `comparator` which\n     * is invoked to compare elements of `array`. The order of result values is\n     * determined by the order they occur in the array.The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.uniqWith(objects, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }]\n     */\n    function uniqWith(array, comparator) {\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return (array && array.length) ? baseUniq(array, undefined, comparator) : [];\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts an array of grouped\n     * elements and creates an array regrouping the elements to their pre-zip\n     * configuration.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.2.0\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip(['a', 'b'], [1, 2], [true, false]);\n     * // => [['a', 1, true], ['b', 2, false]]\n     *\n     * _.unzip(zipped);\n     * // => [['a', 'b'], [1, 2], [true, false]]\n     */\n    function unzip(array) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      var length = 0;\n      array = arrayFilter(array, function(group) {\n        if (isArrayLikeObject(group)) {\n          length = nativeMax(group.length, length);\n          return true;\n        }\n      });\n      return baseTimes(length, function(index) {\n        return arrayMap(array, baseProperty(index));\n      });\n    }\n\n    /**\n     * This method is like `_.unzip` except that it accepts `iteratee` to specify\n     * how regrouped values should be combined. The iteratee is invoked with the\n     * elements of each group: (...group).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @param {Function} [iteratee=_.identity] The function to combine\n     *  regrouped values.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip([1, 2], [10, 20], [100, 200]);\n     * // => [[1, 10, 100], [2, 20, 200]]\n     *\n     * _.unzipWith(zipped, _.add);\n     * // => [3, 30, 300]\n     */\n    function unzipWith(array, iteratee) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      var result = unzip(array);\n      if (iteratee == null) {\n        return result;\n      }\n      return arrayMap(result, function(group) {\n        return apply(iteratee, undefined, group);\n      });\n    }\n\n    /**\n     * Creates an array excluding all given values using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * **Note:** Unlike `_.pull`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...*} [values] The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.difference, _.xor\n     * @example\n     *\n     * _.without([2, 1, 2, 3], 1, 2);\n     * // => [3]\n     */\n    var without = baseRest(function(array, values) {\n      return isArrayLikeObject(array)\n        ? baseDifference(array, values)\n        : [];\n    });\n\n    /**\n     * Creates an array of unique values that is the\n     * [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)\n     * of the given arrays. The order of result values is determined by the order\n     * they occur in the arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.difference, _.without\n     * @example\n     *\n     * _.xor([2, 1], [2, 3]);\n     * // => [1, 3]\n     */\n    var xor = baseRest(function(arrays) {\n      return baseXor(arrayFilter(arrays, isArrayLikeObject));\n    });\n\n    /**\n     * This method is like `_.xor` except that it accepts `iteratee` which is\n     * invoked for each element of each `arrays` to generate the criterion by\n     * which by which they're compared. The order of result values is determined\n     * by the order they occur in the arrays. The iteratee is invoked with one\n     * argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.xorBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [1.2, 3.4]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.xorBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 2 }]\n     */\n    var xorBy = baseRest(function(arrays) {\n      var iteratee = last(arrays);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return baseXor(arrayFilter(arrays, isArrayLikeObject), getIteratee(iteratee, 2));\n    });\n\n    /**\n     * This method is like `_.xor` except that it accepts `comparator` which is\n     * invoked to compare elements of `arrays`. The order of result values is\n     * determined by the order they occur in the arrays. The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.xorWith(objects, others, _.isEqual);\n     * // => [{ 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]\n     */\n    var xorWith = baseRest(function(arrays) {\n      var comparator = last(arrays);\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return baseXor(arrayFilter(arrays, isArrayLikeObject), undefined, comparator);\n    });\n\n    /**\n     * Creates an array of grouped elements, the first of which contains the\n     * first elements of the given arrays, the second of which contains the\n     * second elements of the given arrays, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zip(['a', 'b'], [1, 2], [true, false]);\n     * // => [['a', 1, true], ['b', 2, false]]\n     */\n    var zip = baseRest(unzip);\n\n    /**\n     * This method is like `_.fromPairs` except that it accepts two arrays,\n     * one of property identifiers and one of corresponding values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.4.0\n     * @category Array\n     * @param {Array} [props=[]] The property identifiers.\n     * @param {Array} [values=[]] The property values.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.zipObject(['a', 'b'], [1, 2]);\n     * // => { 'a': 1, 'b': 2 }\n     */\n    function zipObject(props, values) {\n      return baseZipObject(props || [], values || [], assignValue);\n    }\n\n    /**\n     * This method is like `_.zipObject` except that it supports property paths.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.1.0\n     * @category Array\n     * @param {Array} [props=[]] The property identifiers.\n     * @param {Array} [values=[]] The property values.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.zipObjectDeep(['a.b[0].c', 'a.b[1].d'], [1, 2]);\n     * // => { 'a': { 'b': [{ 'c': 1 }, { 'd': 2 }] } }\n     */\n    function zipObjectDeep(props, values) {\n      return baseZipObject(props || [], values || [], baseSet);\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts `iteratee` to specify\n     * how grouped values should be combined. The iteratee is invoked with the\n     * elements of each group: (...group).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @param {Function} [iteratee=_.identity] The function to combine\n     *  grouped values.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zipWith([1, 2], [10, 20], [100, 200], function(a, b, c) {\n     *   return a + b + c;\n     * });\n     * // => [111, 222]\n     */\n    var zipWith = baseRest(function(arrays) {\n      var length = arrays.length,\n          iteratee = length > 1 ? arrays[length - 1] : undefined;\n\n      iteratee = typeof iteratee == 'function' ? (arrays.pop(), iteratee) : undefined;\n      return unzipWith(arrays, iteratee);\n    });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` wrapper instance that wraps `value` with explicit method\n     * chain sequences enabled. The result of such sequences must be unwrapped\n     * with `_#value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.3.0\n     * @category Seq\n     * @param {*} value The value to wrap.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36 },\n     *   { 'user': 'fred',    'age': 40 },\n     *   { 'user': 'pebbles', 'age': 1 }\n     * ];\n     *\n     * var youngest = _\n     *   .chain(users)\n     *   .sortBy('age')\n     *   .map(function(o) {\n     *     return o.user + ' is ' + o.age;\n     *   })\n     *   .head()\n     *   .value();\n     * // => 'pebbles is 1'\n     */\n    function chain(value) {\n      var result = lodash(value);\n      result.__chain__ = true;\n      return result;\n    }\n\n    /**\n     * This method invokes `interceptor` and returns `value`. The interceptor\n     * is invoked with one argument; (value). The purpose of this method is to\n     * \"tap into\" a method chain sequence in order to modify intermediate results.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * _([1, 2, 3])\n     *  .tap(function(array) {\n     *    // Mutate input array.\n     *    array.pop();\n     *  })\n     *  .reverse()\n     *  .value();\n     * // => [2, 1]\n     */\n    function tap(value, interceptor) {\n      interceptor(value);\n      return value;\n    }\n\n    /**\n     * This method is like `_.tap` except that it returns the result of `interceptor`.\n     * The purpose of this method is to \"pass thru\" values replacing intermediate\n     * results in a method chain sequence.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Seq\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {*} Returns the result of `interceptor`.\n     * @example\n     *\n     * _('  abc  ')\n     *  .chain()\n     *  .trim()\n     *  .thru(function(value) {\n     *    return [value];\n     *  })\n     *  .value();\n     * // => ['abc']\n     */\n    function thru(value, interceptor) {\n      return interceptor(value);\n    }\n\n    /**\n     * This method is the wrapper version of `_.at`.\n     *\n     * @name at\n     * @memberOf _\n     * @since 1.0.0\n     * @category Seq\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };\n     *\n     * _(object).at(['a[0].b.c', 'a[1]']).value();\n     * // => [3, 4]\n     */\n    var wrapperAt = flatRest(function(paths) {\n      var length = paths.length,\n          start = length ? paths[0] : 0,\n          value = this.__wrapped__,\n          interceptor = function(object) { return baseAt(object, paths); };\n\n      if (length > 1 || this.__actions__.length ||\n          !(value instanceof LazyWrapper) || !isIndex(start)) {\n        return this.thru(interceptor);\n      }\n      value = value.slice(start, +start + (length ? 1 : 0));\n      value.__actions__.push({\n        'func': thru,\n        'args': [interceptor],\n        'thisArg': undefined\n      });\n      return new LodashWrapper(value, this.__chain__).thru(function(array) {\n        if (length && !array.length) {\n          array.push(undefined);\n        }\n        return array;\n      });\n    });\n\n    /**\n     * Creates a `lodash` wrapper instance with explicit method chain sequences enabled.\n     *\n     * @name chain\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 }\n     * ];\n     *\n     * // A sequence without explicit chaining.\n     * _(users).head();\n     * // => { 'user': 'barney', 'age': 36 }\n     *\n     * // A sequence with explicit chaining.\n     * _(users)\n     *   .chain()\n     *   .head()\n     *   .pick('user')\n     *   .value();\n     * // => { 'user': 'barney' }\n     */\n    function wrapperChain() {\n      return chain(this);\n    }\n\n    /**\n     * Executes the chain sequence and returns the wrapped result.\n     *\n     * @name commit\n     * @memberOf _\n     * @since 3.2.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2];\n     * var wrapped = _(array).push(3);\n     *\n     * console.log(array);\n     * // => [1, 2]\n     *\n     * wrapped = wrapped.commit();\n     * console.log(array);\n     * // => [1, 2, 3]\n     *\n     * wrapped.last();\n     * // => 3\n     *\n     * console.log(array);\n     * // => [1, 2, 3]\n     */\n    function wrapperCommit() {\n      return new LodashWrapper(this.value(), this.__chain__);\n    }\n\n    /**\n     * Gets the next value on a wrapped object following the\n     * [iterator protocol](https://mdn.io/iteration_protocols#iterator).\n     *\n     * @name next\n     * @memberOf _\n     * @since 4.0.0\n     * @category Seq\n     * @returns {Object} Returns the next iterator value.\n     * @example\n     *\n     * var wrapped = _([1, 2]);\n     *\n     * wrapped.next();\n     * // => { 'done': false, 'value': 1 }\n     *\n     * wrapped.next();\n     * // => { 'done': false, 'value': 2 }\n     *\n     * wrapped.next();\n     * // => { 'done': true, 'value': undefined }\n     */\n    function wrapperNext() {\n      if (this.__values__ === undefined) {\n        this.__values__ = toArray(this.value());\n      }\n      var done = this.__index__ >= this.__values__.length,\n          value = done ? undefined : this.__values__[this.__index__++];\n\n      return { 'done': done, 'value': value };\n    }\n\n    /**\n     * Enables the wrapper to be iterable.\n     *\n     * @name Symbol.iterator\n     * @memberOf _\n     * @since 4.0.0\n     * @category Seq\n     * @returns {Object} Returns the wrapper object.\n     * @example\n     *\n     * var wrapped = _([1, 2]);\n     *\n     * wrapped[Symbol.iterator]() === wrapped;\n     * // => true\n     *\n     * Array.from(wrapped);\n     * // => [1, 2]\n     */\n    function wrapperToIterator() {\n      return this;\n    }\n\n    /**\n     * Creates a clone of the chain sequence planting `value` as the wrapped value.\n     *\n     * @name plant\n     * @memberOf _\n     * @since 3.2.0\n     * @category Seq\n     * @param {*} value The value to plant.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var wrapped = _([1, 2]).map(square);\n     * var other = wrapped.plant([3, 4]);\n     *\n     * other.value();\n     * // => [9, 16]\n     *\n     * wrapped.value();\n     * // => [1, 4]\n     */\n    function wrapperPlant(value) {\n      var result,\n          parent = this;\n\n      while (parent instanceof baseLodash) {\n        var clone = wrapperClone(parent);\n        clone.__index__ = 0;\n        clone.__values__ = undefined;\n        if (result) {\n          previous.__wrapped__ = clone;\n        } else {\n          result = clone;\n        }\n        var previous = clone;\n        parent = parent.__wrapped__;\n      }\n      previous.__wrapped__ = value;\n      return result;\n    }\n\n    /**\n     * This method is the wrapper version of `_.reverse`.\n     *\n     * **Note:** This method mutates the wrapped array.\n     *\n     * @name reverse\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _(array).reverse().value()\n     * // => [3, 2, 1]\n     *\n     * console.log(array);\n     * // => [3, 2, 1]\n     */\n    function wrapperReverse() {\n      var value = this.__wrapped__;\n      if (value instanceof LazyWrapper) {\n        var wrapped = value;\n        if (this.__actions__.length) {\n          wrapped = new LazyWrapper(this);\n        }\n        wrapped = wrapped.reverse();\n        wrapped.__actions__.push({\n          'func': thru,\n          'args': [reverse],\n          'thisArg': undefined\n        });\n        return new LodashWrapper(wrapped, this.__chain__);\n      }\n      return this.thru(reverse);\n    }\n\n    /**\n     * Executes the chain sequence to resolve the unwrapped value.\n     *\n     * @name value\n     * @memberOf _\n     * @since 0.1.0\n     * @alias toJSON, valueOf\n     * @category Seq\n     * @returns {*} Returns the resolved unwrapped value.\n     * @example\n     *\n     * _([1, 2, 3]).value();\n     * // => [1, 2, 3]\n     */\n    function wrapperValue() {\n      return baseWrapperValue(this.__wrapped__, this.__actions__);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The corresponding value of\n     * each key is the number of times the key was returned by `iteratee`. The\n     * iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.countBy([6.1, 4.2, 6.3], Math.floor);\n     * // => { '4': 1, '6': 2 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.countBy(['one', 'two', 'three'], 'length');\n     * // => { '3': 2, '5': 1 }\n     */\n    var countBy = createAggregator(function(result, value, key) {\n      if (hasOwnProperty.call(result, key)) {\n        ++result[key];\n      } else {\n        baseAssignValue(result, key, 1);\n      }\n    });\n\n    /**\n     * Checks if `predicate` returns truthy for **all** elements of `collection`.\n     * Iteration is stopped once `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * **Note:** This method returns `true` for\n     * [empty collections](https://en.wikipedia.org/wiki/Empty_set) because\n     * [everything is true](https://en.wikipedia.org/wiki/Vacuous_truth) of\n     * elements of empty collections.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.every([true, 1, null, 'yes'], Boolean);\n     * // => false\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.every(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.every(users, ['active', false]);\n     * // => true\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.every(users, 'active');\n     * // => false\n     */\n    function every(collection, predicate, guard) {\n      var func = isArray(collection) ? arrayEvery : baseEvery;\n      if (guard && isIterateeCall(collection, predicate, guard)) {\n        predicate = undefined;\n      }\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning an array of all elements\n     * `predicate` returns truthy for. The predicate is invoked with three\n     * arguments: (value, index|key, collection).\n     *\n     * **Note:** Unlike `_.remove`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     * @see _.reject\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * _.filter(users, function(o) { return !o.active; });\n     * // => objects for ['fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.filter(users, { 'age': 36, 'active': true });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.filter(users, ['active', false]);\n     * // => objects for ['fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.filter(users, 'active');\n     * // => objects for ['barney']\n     */\n    function filter(collection, predicate) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning the first element\n     * `predicate` returns truthy for. The predicate is invoked with three\n     * arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': true },\n     *   { 'user': 'fred',    'age': 40, 'active': false },\n     *   { 'user': 'pebbles', 'age': 1,  'active': true }\n     * ];\n     *\n     * _.find(users, function(o) { return o.age < 40; });\n     * // => object for 'barney'\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.find(users, { 'age': 1, 'active': true });\n     * // => object for 'pebbles'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.find(users, ['active', false]);\n     * // => object for 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.find(users, 'active');\n     * // => object for 'barney'\n     */\n    var find = createFind(findIndex);\n\n    /**\n     * This method is like `_.find` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=collection.length-1] The index to search from.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * _.findLast([1, 2, 3, 4], function(n) {\n     *   return n % 2 == 1;\n     * });\n     * // => 3\n     */\n    var findLast = createFind(findLastIndex);\n\n    /**\n     * Creates a flattened array of values by running each element in `collection`\n     * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n     * with three arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [n, n];\n     * }\n     *\n     * _.flatMap([1, 2], duplicate);\n     * // => [1, 1, 2, 2]\n     */\n    function flatMap(collection, iteratee) {\n      return baseFlatten(map(collection, iteratee), 1);\n    }\n\n    /**\n     * This method is like `_.flatMap` except that it recursively flattens the\n     * mapped results.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [[[n, n]]];\n     * }\n     *\n     * _.flatMapDeep([1, 2], duplicate);\n     * // => [1, 1, 2, 2]\n     */\n    function flatMapDeep(collection, iteratee) {\n      return baseFlatten(map(collection, iteratee), INFINITY);\n    }\n\n    /**\n     * This method is like `_.flatMap` except that it recursively flattens the\n     * mapped results up to `depth` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {number} [depth=1] The maximum recursion depth.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [[[n, n]]];\n     * }\n     *\n     * _.flatMapDepth([1, 2], duplicate, 2);\n     * // => [[1, 1], [2, 2]]\n     */\n    function flatMapDepth(collection, iteratee, depth) {\n      depth = depth === undefined ? 1 : toInteger(depth);\n      return baseFlatten(map(collection, iteratee), depth);\n    }\n\n    /**\n     * Iterates over elements of `collection` and invokes `iteratee` for each element.\n     * The iteratee is invoked with three arguments: (value, index|key, collection).\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n     * property are iterated like arrays. To avoid this behavior use `_.forIn`\n     * or `_.forOwn` for object iteration.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @alias each\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     * @see _.forEachRight\n     * @example\n     *\n     * _.forEach([1, 2], function(value) {\n     *   console.log(value);\n     * });\n     * // => Logs `1` then `2`.\n     *\n     * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n     */\n    function forEach(collection, iteratee) {\n      var func = isArray(collection) ? arrayEach : baseEach;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.forEach` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @alias eachRight\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     * @see _.forEach\n     * @example\n     *\n     * _.forEachRight([1, 2], function(value) {\n     *   console.log(value);\n     * });\n     * // => Logs `2` then `1`.\n     */\n    function forEachRight(collection, iteratee) {\n      var func = isArray(collection) ? arrayEachRight : baseEachRight;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The order of grouped values\n     * is determined by the order they occur in `collection`. The corresponding\n     * value of each key is an array of elements responsible for generating the\n     * key. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n     * // => { '4': [4.2], '6': [6.1, 6.3] }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.groupBy(['one', 'two', 'three'], 'length');\n     * // => { '3': ['one', 'two'], '5': ['three'] }\n     */\n    var groupBy = createAggregator(function(result, value, key) {\n      if (hasOwnProperty.call(result, key)) {\n        result[key].push(value);\n      } else {\n        baseAssignValue(result, key, [value]);\n      }\n    });\n\n    /**\n     * Checks if `value` is in `collection`. If `collection` is a string, it's\n     * checked for a substring of `value`, otherwise\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * is used for equality comparisons. If `fromIndex` is negative, it's used as\n     * the offset from the end of `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n     * @returns {boolean} Returns `true` if `value` is found, else `false`.\n     * @example\n     *\n     * _.includes([1, 2, 3], 1);\n     * // => true\n     *\n     * _.includes([1, 2, 3], 1, 2);\n     * // => false\n     *\n     * _.includes({ 'a': 1, 'b': 2 }, 1);\n     * // => true\n     *\n     * _.includes('abcd', 'bc');\n     * // => true\n     */\n    function includes(collection, value, fromIndex, guard) {\n      collection = isArrayLike(collection) ? collection : values(collection);\n      fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;\n\n      var length = collection.length;\n      if (fromIndex < 0) {\n        fromIndex = nativeMax(length + fromIndex, 0);\n      }\n      return isString(collection)\n        ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)\n        : (!!length && baseIndexOf(collection, value, fromIndex) > -1);\n    }\n\n    /**\n     * Invokes the method at `path` of each element in `collection`, returning\n     * an array of the results of each invoked method. Any additional arguments\n     * are provided to each invoked method. If `path` is a function, it's invoked\n     * for, and `this` bound to, each element in `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Array|Function|string} path The path of the method to invoke or\n     *  the function invoked per iteration.\n     * @param {...*} [args] The arguments to invoke each method with.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * _.invokeMap([[5, 1, 7], [3, 2, 1]], 'sort');\n     * // => [[1, 5, 7], [1, 2, 3]]\n     *\n     * _.invokeMap([123, 456], String.prototype.split, '');\n     * // => [['1', '2', '3'], ['4', '5', '6']]\n     */\n    var invokeMap = baseRest(function(collection, path, args) {\n      var index = -1,\n          isFunc = typeof path == 'function',\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value) {\n        result[++index] = isFunc ? apply(path, value, args) : baseInvoke(value, path, args);\n      });\n      return result;\n    });\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The corresponding value of\n     * each key is the last element responsible for generating the key. The\n     * iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * var array = [\n     *   { 'dir': 'left', 'code': 97 },\n     *   { 'dir': 'right', 'code': 100 }\n     * ];\n     *\n     * _.keyBy(array, function(o) {\n     *   return String.fromCharCode(o.code);\n     * });\n     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n     *\n     * _.keyBy(array, 'dir');\n     * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n     */\n    var keyBy = createAggregator(function(result, value, key) {\n      baseAssignValue(result, key, value);\n    });\n\n    /**\n     * Creates an array of values by running each element in `collection` thru\n     * `iteratee`. The iteratee is invoked with three arguments:\n     * (value, index|key, collection).\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n     *\n     * The guarded methods are:\n     * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n     * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n     * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n     * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * _.map([4, 8], square);\n     * // => [16, 64]\n     *\n     * _.map({ 'a': 4, 'b': 8 }, square);\n     * // => [16, 64] (iteration order is not guaranteed)\n     *\n     * var users = [\n     *   { 'user': 'barney' },\n     *   { 'user': 'fred' }\n     * ];\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.map(users, 'user');\n     * // => ['barney', 'fred']\n     */\n    function map(collection, iteratee) {\n      var func = isArray(collection) ? arrayMap : baseMap;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.sortBy` except that it allows specifying the sort\n     * orders of the iteratees to sort by. If `orders` is unspecified, all values\n     * are sorted in ascending order. Otherwise, specify an order of \"desc\" for\n     * descending or \"asc\" for ascending sort order of corresponding values.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Array[]|Function[]|Object[]|string[]} [iteratees=[_.identity]]\n     *  The iteratees to sort by.\n     * @param {string[]} [orders] The sort orders of `iteratees`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 34 },\n     *   { 'user': 'fred',   'age': 40 },\n     *   { 'user': 'barney', 'age': 36 }\n     * ];\n     *\n     * // Sort by `user` in ascending order and by `age` in descending order.\n     * _.orderBy(users, ['user', 'age'], ['asc', 'desc']);\n     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n     */\n    function orderBy(collection, iteratees, orders, guard) {\n      if (collection == null) {\n        return [];\n      }\n      if (!isArray(iteratees)) {\n        iteratees = iteratees == null ? [] : [iteratees];\n      }\n      orders = guard ? undefined : orders;\n      if (!isArray(orders)) {\n        orders = orders == null ? [] : [orders];\n      }\n      return baseOrderBy(collection, iteratees, orders);\n    }\n\n    /**\n     * Creates an array of elements split into two groups, the first of which\n     * contains elements `predicate` returns truthy for, the second of which\n     * contains elements `predicate` returns falsey for. The predicate is\n     * invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the array of grouped elements.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': false },\n     *   { 'user': 'fred',    'age': 40, 'active': true },\n     *   { 'user': 'pebbles', 'age': 1,  'active': false }\n     * ];\n     *\n     * _.partition(users, function(o) { return o.active; });\n     * // => objects for [['fred'], ['barney', 'pebbles']]\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.partition(users, { 'age': 1, 'active': false });\n     * // => objects for [['pebbles'], ['barney', 'fred']]\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.partition(users, ['active', false]);\n     * // => objects for [['barney', 'pebbles'], ['fred']]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.partition(users, 'active');\n     * // => objects for [['fred'], ['barney', 'pebbles']]\n     */\n    var partition = createAggregator(function(result, value, key) {\n      result[key ? 0 : 1].push(value);\n    }, function() { return [[], []]; });\n\n    /**\n     * Reduces `collection` to a value which is the accumulated result of running\n     * each element in `collection` thru `iteratee`, where each successive\n     * invocation is supplied the return value of the previous. If `accumulator`\n     * is not given, the first element of `collection` is used as the initial\n     * value. The iteratee is invoked with four arguments:\n     * (accumulator, value, index|key, collection).\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.reduce`, `_.reduceRight`, and `_.transform`.\n     *\n     * The guarded methods are:\n     * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n     * and `sortBy`\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @returns {*} Returns the accumulated value.\n     * @see _.reduceRight\n     * @example\n     *\n     * _.reduce([1, 2], function(sum, n) {\n     *   return sum + n;\n     * }, 0);\n     * // => 3\n     *\n     * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n     *   (result[value] || (result[value] = [])).push(key);\n     *   return result;\n     * }, {});\n     * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n     */\n    function reduce(collection, iteratee, accumulator) {\n      var func = isArray(collection) ? arrayReduce : baseReduce,\n          initAccum = arguments.length < 3;\n\n      return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n    }\n\n    /**\n     * This method is like `_.reduce` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @returns {*} Returns the accumulated value.\n     * @see _.reduce\n     * @example\n     *\n     * var array = [[0, 1], [2, 3], [4, 5]];\n     *\n     * _.reduceRight(array, function(flattened, other) {\n     *   return flattened.concat(other);\n     * }, []);\n     * // => [4, 5, 2, 3, 0, 1]\n     */\n    function reduceRight(collection, iteratee, accumulator) {\n      var func = isArray(collection) ? arrayReduceRight : baseReduce,\n          initAccum = arguments.length < 3;\n\n      return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEachRight);\n    }\n\n    /**\n     * The opposite of `_.filter`; this method returns the elements of `collection`\n     * that `predicate` does **not** return truthy for.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     * @see _.filter\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false },\n     *   { 'user': 'fred',   'age': 40, 'active': true }\n     * ];\n     *\n     * _.reject(users, function(o) { return !o.active; });\n     * // => objects for ['fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.reject(users, { 'age': 40, 'active': true });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.reject(users, ['active', false]);\n     * // => objects for ['fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.reject(users, 'active');\n     * // => objects for ['barney']\n     */\n    function reject(collection, predicate) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      return func(collection, negate(getIteratee(predicate, 3)));\n    }\n\n    /**\n     * Gets a random element from `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to sample.\n     * @returns {*} Returns the random element.\n     * @example\n     *\n     * _.sample([1, 2, 3, 4]);\n     * // => 2\n     */\n    function sample(collection) {\n      var func = isArray(collection) ? arraySample : baseSample;\n      return func(collection);\n    }\n\n    /**\n     * Gets `n` random elements at unique keys from `collection` up to the\n     * size of `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to sample.\n     * @param {number} [n=1] The number of elements to sample.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the random elements.\n     * @example\n     *\n     * _.sampleSize([1, 2, 3], 2);\n     * // => [3, 1]\n     *\n     * _.sampleSize([1, 2, 3], 4);\n     * // => [2, 3, 1]\n     */\n    function sampleSize(collection, n, guard) {\n      if ((guard ? isIterateeCall(collection, n, guard) : n === undefined)) {\n        n = 1;\n      } else {\n        n = toInteger(n);\n      }\n      var func = isArray(collection) ? arraySampleSize : baseSampleSize;\n      return func(collection, n);\n    }\n\n    /**\n     * Creates an array of shuffled values, using a version of the\n     * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     * @example\n     *\n     * _.shuffle([1, 2, 3, 4]);\n     * // => [4, 1, 3, 2]\n     */\n    function shuffle(collection) {\n      var func = isArray(collection) ? arrayShuffle : baseShuffle;\n      return func(collection);\n    }\n\n    /**\n     * Gets the size of `collection` by returning its length for array-like\n     * values or the number of own enumerable string keyed properties for objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @returns {number} Returns the collection size.\n     * @example\n     *\n     * _.size([1, 2, 3]);\n     * // => 3\n     *\n     * _.size({ 'a': 1, 'b': 2 });\n     * // => 2\n     *\n     * _.size('pebbles');\n     * // => 7\n     */\n    function size(collection) {\n      if (collection == null) {\n        return 0;\n      }\n      if (isArrayLike(collection)) {\n        return isString(collection) ? stringSize(collection) : collection.length;\n      }\n      var tag = getTag(collection);\n      if (tag == mapTag || tag == setTag) {\n        return collection.size;\n      }\n      return baseKeys(collection).length;\n    }\n\n    /**\n     * Checks if `predicate` returns truthy for **any** element of `collection`.\n     * Iteration is stopped once `predicate` returns truthy. The predicate is\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.some([null, 0, 'yes', false], Boolean);\n     * // => true\n     *\n     * var users = [\n     *   { 'user': 'barney', 'active': true },\n     *   { 'user': 'fred',   'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.some(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.some(users, ['active', false]);\n     * // => true\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.some(users, 'active');\n     * // => true\n     */\n    function some(collection, predicate, guard) {\n      var func = isArray(collection) ? arraySome : baseSome;\n      if (guard && isIterateeCall(collection, predicate, guard)) {\n        predicate = undefined;\n      }\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Creates an array of elements, sorted in ascending order by the results of\n     * running each element in a collection thru each iteratee. This method\n     * performs a stable sort, that is, it preserves the original sort order of\n     * equal elements. The iteratees are invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {...(Function|Function[])} [iteratees=[_.identity]]\n     *  The iteratees to sort by.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 },\n     *   { 'user': 'barney', 'age': 34 }\n     * ];\n     *\n     * _.sortBy(users, [function(o) { return o.user; }]);\n     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n     *\n     * _.sortBy(users, ['user', 'age']);\n     * // => objects for [['barney', 34], ['barney', 36], ['fred', 40], ['fred', 48]]\n     */\n    var sortBy = baseRest(function(collection, iteratees) {\n      if (collection == null) {\n        return [];\n      }\n      var length = iteratees.length;\n      if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n        iteratees = [];\n      } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n        iteratees = [iteratees[0]];\n      }\n      return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n    });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Gets the timestamp of the number of milliseconds that have elapsed since\n     * the Unix epoch (1 January 1970 00:00:00 UTC).\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Date\n     * @returns {number} Returns the timestamp.\n     * @example\n     *\n     * _.defer(function(stamp) {\n     *   console.log(_.now() - stamp);\n     * }, _.now());\n     * // => Logs the number of milliseconds it took for the deferred invocation.\n     */\n    var now = ctxNow || function() {\n      return root.Date.now();\n    };\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The opposite of `_.before`; this method creates a function that invokes\n     * `func` once it's called `n` or more times.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {number} n The number of calls before `func` is invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var saves = ['profile', 'settings'];\n     *\n     * var done = _.after(saves.length, function() {\n     *   console.log('done saving!');\n     * });\n     *\n     * _.forEach(saves, function(type) {\n     *   asyncSave({ 'type': type, 'complete': done });\n     * });\n     * // => Logs 'done saving!' after the two async saves have completed.\n     */\n    function after(n, func) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      n = toInteger(n);\n      return function() {\n        if (--n < 1) {\n          return func.apply(this, arguments);\n        }\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func`, with up to `n` arguments,\n     * ignoring any additional arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to cap arguments for.\n     * @param {number} [n=func.length] The arity cap.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new capped function.\n     * @example\n     *\n     * _.map(['6', '8', '10'], _.ary(parseInt, 1));\n     * // => [6, 8, 10]\n     */\n    function ary(func, n, guard) {\n      n = guard ? undefined : n;\n      n = (func && n == null) ? func.length : n;\n      return createWrap(func, WRAP_ARY_FLAG, undefined, undefined, undefined, undefined, n);\n    }\n\n    /**\n     * Creates a function that invokes `func`, with the `this` binding and arguments\n     * of the created function, while it's called less than `n` times. Subsequent\n     * calls to the created function return the result of the last `func` invocation.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {number} n The number of calls at which `func` is no longer invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * jQuery(element).on('click', _.before(5, addContactToList));\n     * // => Allows adding up to 4 contacts to the list.\n     */\n    function before(n, func) {\n      var result;\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      n = toInteger(n);\n      return function() {\n        if (--n > 0) {\n          result = func.apply(this, arguments);\n        }\n        if (n <= 1) {\n          func = undefined;\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of `thisArg`\n     * and `partials` prepended to the arguments it receives.\n     *\n     * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** Unlike native `Function#bind`, this method doesn't set the \"length\"\n     * property of bound functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to bind.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * function greet(greeting, punctuation) {\n     *   return greeting + ' ' + this.user + punctuation;\n     * }\n     *\n     * var object = { 'user': 'fred' };\n     *\n     * var bound = _.bind(greet, object, 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * // Bound with placeholders.\n     * var bound = _.bind(greet, object, _, '!');\n     * bound('hi');\n     * // => 'hi fred!'\n     */\n    var bind = baseRest(function(func, thisArg, partials) {\n      var bitmask = WRAP_BIND_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, getHolder(bind));\n        bitmask |= WRAP_PARTIAL_FLAG;\n      }\n      return createWrap(func, bitmask, thisArg, partials, holders);\n    });\n\n    /**\n     * Creates a function that invokes the method at `object[key]` with `partials`\n     * prepended to the arguments it receives.\n     *\n     * This method differs from `_.bind` by allowing bound functions to reference\n     * methods that may be redefined or don't yet exist. See\n     * [Peter Michaux's article](http://peter.michaux.ca/articles/lazy-function-definition-pattern)\n     * for more details.\n     *\n     * The `_.bindKey.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.10.0\n     * @category Function\n     * @param {Object} object The object to invoke the method on.\n     * @param {string} key The key of the method.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * var object = {\n     *   'user': 'fred',\n     *   'greet': function(greeting, punctuation) {\n     *     return greeting + ' ' + this.user + punctuation;\n     *   }\n     * };\n     *\n     * var bound = _.bindKey(object, 'greet', 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * object.greet = function(greeting, punctuation) {\n     *   return greeting + 'ya ' + this.user + punctuation;\n     * };\n     *\n     * bound('!');\n     * // => 'hiya fred!'\n     *\n     * // Bound with placeholders.\n     * var bound = _.bindKey(object, 'greet', _, '!');\n     * bound('hi');\n     * // => 'hiya fred!'\n     */\n    var bindKey = baseRest(function(object, key, partials) {\n      var bitmask = WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, getHolder(bindKey));\n        bitmask |= WRAP_PARTIAL_FLAG;\n      }\n      return createWrap(key, bitmask, object, partials, holders);\n    });\n\n    /**\n     * Creates a function that accepts arguments of `func` and either invokes\n     * `func` returning its result, if at least `arity` number of arguments have\n     * been provided, or returns a function that accepts the remaining `func`\n     * arguments, and so on. The arity of `func` may be specified if `func.length`\n     * is not sufficient.\n     *\n     * The `_.curry.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curry(abc);\n     *\n     * curried(1)(2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // Curried with placeholders.\n     * curried(1)(_, 3)(2);\n     * // => [1, 2, 3]\n     */\n    function curry(func, arity, guard) {\n      arity = guard ? undefined : arity;\n      var result = createWrap(func, WRAP_CURRY_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n      result.placeholder = curry.placeholder;\n      return result;\n    }\n\n    /**\n     * This method is like `_.curry` except that arguments are applied to `func`\n     * in the manner of `_.partialRight` instead of `_.partial`.\n     *\n     * The `_.curryRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curryRight(abc);\n     *\n     * curried(3)(2)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(2, 3)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // Curried with placeholders.\n     * curried(3)(1, _)(2);\n     * // => [1, 2, 3]\n     */\n    function curryRight(func, arity, guard) {\n      arity = guard ? undefined : arity;\n      var result = createWrap(func, WRAP_CURRY_RIGHT_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n      result.placeholder = curryRight.placeholder;\n      return result;\n    }\n\n    /**\n     * Creates a debounced function that delays invoking `func` until after `wait`\n     * milliseconds have elapsed since the last time the debounced function was\n     * invoked. The debounced function comes with a `cancel` method to cancel\n     * delayed `func` invocations and a `flush` method to immediately invoke them.\n     * Provide `options` to indicate whether `func` should be invoked on the\n     * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n     * with the last arguments provided to the debounced function. Subsequent\n     * calls to the debounced function return the result of the last `func`\n     * invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is\n     * invoked on the trailing edge of the timeout only if the debounced function\n     * is invoked more than once during the `wait` timeout.\n     *\n     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n     * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n     *\n     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n     * for details over the differences between `_.debounce` and `_.throttle`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to debounce.\n     * @param {number} [wait=0] The number of milliseconds to delay.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.leading=false]\n     *  Specify invoking on the leading edge of the timeout.\n     * @param {number} [options.maxWait]\n     *  The maximum time `func` is allowed to be delayed before it's invoked.\n     * @param {boolean} [options.trailing=true]\n     *  Specify invoking on the trailing edge of the timeout.\n     * @returns {Function} Returns the new debounced function.\n     * @example\n     *\n     * // Avoid costly calculations while the window size is in flux.\n     * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n     *\n     * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n     * jQuery(element).on('click', _.debounce(sendMail, 300, {\n     *   'leading': true,\n     *   'trailing': false\n     * }));\n     *\n     * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n     * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n     * var source = new EventSource('/stream');\n     * jQuery(source).on('message', debounced);\n     *\n     * // Cancel the trailing debounced invocation.\n     * jQuery(window).on('popstate', debounced.cancel);\n     */\n    function debounce(func, wait, options) {\n      var lastArgs,\n          lastThis,\n          maxWait,\n          result,\n          timerId,\n          lastCallTime,\n          lastInvokeTime = 0,\n          leading = false,\n          maxing = false,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      wait = toNumber(wait) || 0;\n      if (isObject(options)) {\n        leading = !!options.leading;\n        maxing = 'maxWait' in options;\n        maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n\n      function invokeFunc(time) {\n        var args = lastArgs,\n            thisArg = lastThis;\n\n        lastArgs = lastThis = undefined;\n        lastInvokeTime = time;\n        result = func.apply(thisArg, args);\n        return result;\n      }\n\n      function leadingEdge(time) {\n        // Reset any `maxWait` timer.\n        lastInvokeTime = time;\n        // Start the timer for the trailing edge.\n        timerId = setTimeout(timerExpired, wait);\n        // Invoke the leading edge.\n        return leading ? invokeFunc(time) : result;\n      }\n\n      function remainingWait(time) {\n        var timeSinceLastCall = time - lastCallTime,\n            timeSinceLastInvoke = time - lastInvokeTime,\n            timeWaiting = wait - timeSinceLastCall;\n\n        return maxing\n          ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n          : timeWaiting;\n      }\n\n      function shouldInvoke(time) {\n        var timeSinceLastCall = time - lastCallTime,\n            timeSinceLastInvoke = time - lastInvokeTime;\n\n        // Either this is the first call, activity has stopped and we're at the\n        // trailing edge, the system time has gone backwards and we're treating\n        // it as the trailing edge, or we've hit the `maxWait` limit.\n        return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n          (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n      }\n\n      function timerExpired() {\n        var time = now();\n        if (shouldInvoke(time)) {\n          return trailingEdge(time);\n        }\n        // Restart the timer.\n        timerId = setTimeout(timerExpired, remainingWait(time));\n      }\n\n      function trailingEdge(time) {\n        timerId = undefined;\n\n        // Only invoke if we have `lastArgs` which means `func` has been\n        // debounced at least once.\n        if (trailing && lastArgs) {\n          return invokeFunc(time);\n        }\n        lastArgs = lastThis = undefined;\n        return result;\n      }\n\n      function cancel() {\n        if (timerId !== undefined) {\n          clearTimeout(timerId);\n        }\n        lastInvokeTime = 0;\n        lastArgs = lastCallTime = lastThis = timerId = undefined;\n      }\n\n      function flush() {\n        return timerId === undefined ? result : trailingEdge(now());\n      }\n\n      function debounced() {\n        var time = now(),\n            isInvoking = shouldInvoke(time);\n\n        lastArgs = arguments;\n        lastThis = this;\n        lastCallTime = time;\n\n        if (isInvoking) {\n          if (timerId === undefined) {\n            return leadingEdge(lastCallTime);\n          }\n          if (maxing) {\n            // Handle invocations in a tight loop.\n            clearTimeout(timerId);\n            timerId = setTimeout(timerExpired, wait);\n            return invokeFunc(lastCallTime);\n          }\n        }\n        if (timerId === undefined) {\n          timerId = setTimeout(timerExpired, wait);\n        }\n        return result;\n      }\n      debounced.cancel = cancel;\n      debounced.flush = flush;\n      return debounced;\n    }\n\n    /**\n     * Defers invoking the `func` until the current call stack has cleared. Any\n     * additional arguments are provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to defer.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.defer(function(text) {\n     *   console.log(text);\n     * }, 'deferred');\n     * // => Logs 'deferred' after one millisecond.\n     */\n    var defer = baseRest(function(func, args) {\n      return baseDelay(func, 1, args);\n    });\n\n    /**\n     * Invokes `func` after `wait` milliseconds. Any additional arguments are\n     * provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.delay(function(text) {\n     *   console.log(text);\n     * }, 1000, 'later');\n     * // => Logs 'later' after one second.\n     */\n    var delay = baseRest(function(func, wait, args) {\n      return baseDelay(func, toNumber(wait) || 0, args);\n    });\n\n    /**\n     * Creates a function that invokes `func` with arguments reversed.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to flip arguments for.\n     * @returns {Function} Returns the new flipped function.\n     * @example\n     *\n     * var flipped = _.flip(function() {\n     *   return _.toArray(arguments);\n     * });\n     *\n     * flipped('a', 'b', 'c', 'd');\n     * // => ['d', 'c', 'b', 'a']\n     */\n    function flip(func) {\n      return createWrap(func, WRAP_FLIP_FLAG);\n    }\n\n    /**\n     * Creates a function that memoizes the result of `func`. If `resolver` is\n     * provided, it determines the cache key for storing the result based on the\n     * arguments provided to the memoized function. By default, the first argument\n     * provided to the memoized function is used as the map cache key. The `func`\n     * is invoked with the `this` binding of the memoized function.\n     *\n     * **Note:** The cache is exposed as the `cache` property on the memoized\n     * function. Its creation may be customized by replacing the `_.memoize.Cache`\n     * constructor with one whose instances implement the\n     * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n     * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to have its output memoized.\n     * @param {Function} [resolver] The function to resolve the cache key.\n     * @returns {Function} Returns the new memoized function.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     * var other = { 'c': 3, 'd': 4 };\n     *\n     * var values = _.memoize(_.values);\n     * values(object);\n     * // => [1, 2]\n     *\n     * values(other);\n     * // => [3, 4]\n     *\n     * object.a = 2;\n     * values(object);\n     * // => [1, 2]\n     *\n     * // Modify the result cache.\n     * values.cache.set(object, ['a', 'b']);\n     * values(object);\n     * // => ['a', 'b']\n     *\n     * // Replace `_.memoize.Cache`.\n     * _.memoize.Cache = WeakMap;\n     */\n    function memoize(func, resolver) {\n      if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var memoized = function() {\n        var args = arguments,\n            key = resolver ? resolver.apply(this, args) : args[0],\n            cache = memoized.cache;\n\n        if (cache.has(key)) {\n          return cache.get(key);\n        }\n        var result = func.apply(this, args);\n        memoized.cache = cache.set(key, result) || cache;\n        return result;\n      };\n      memoized.cache = new (memoize.Cache || MapCache);\n      return memoized;\n    }\n\n    // Expose `MapCache`.\n    memoize.Cache = MapCache;\n\n    /**\n     * Creates a function that negates the result of the predicate `func`. The\n     * `func` predicate is invoked with the `this` binding and arguments of the\n     * created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} predicate The predicate to negate.\n     * @returns {Function} Returns the new negated function.\n     * @example\n     *\n     * function isEven(n) {\n     *   return n % 2 == 0;\n     * }\n     *\n     * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n     * // => [1, 3, 5]\n     */\n    function negate(predicate) {\n      if (typeof predicate != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return function() {\n        var args = arguments;\n        switch (args.length) {\n          case 0: return !predicate.call(this);\n          case 1: return !predicate.call(this, args[0]);\n          case 2: return !predicate.call(this, args[0], args[1]);\n          case 3: return !predicate.call(this, args[0], args[1], args[2]);\n        }\n        return !predicate.apply(this, args);\n      };\n    }\n\n    /**\n     * Creates a function that is restricted to invoking `func` once. Repeat calls\n     * to the function return the value of the first invocation. The `func` is\n     * invoked with the `this` binding and arguments of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var initialize = _.once(createApplication);\n     * initialize();\n     * initialize();\n     * // => `createApplication` is invoked once\n     */\n    function once(func) {\n      return before(2, func);\n    }\n\n    /**\n     * Creates a function that invokes `func` with its arguments transformed.\n     *\n     * @static\n     * @since 4.0.0\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to wrap.\n     * @param {...(Function|Function[])} [transforms=[_.identity]]\n     *  The argument transforms.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * function doubled(n) {\n     *   return n * 2;\n     * }\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var func = _.overArgs(function(x, y) {\n     *   return [x, y];\n     * }, [square, doubled]);\n     *\n     * func(9, 3);\n     * // => [81, 6]\n     *\n     * func(10, 5);\n     * // => [100, 10]\n     */\n    var overArgs = castRest(function(func, transforms) {\n      transforms = (transforms.length == 1 && isArray(transforms[0]))\n        ? arrayMap(transforms[0], baseUnary(getIteratee()))\n        : arrayMap(baseFlatten(transforms, 1), baseUnary(getIteratee()));\n\n      var funcsLength = transforms.length;\n      return baseRest(function(args) {\n        var index = -1,\n            length = nativeMin(args.length, funcsLength);\n\n        while (++index < length) {\n          args[index] = transforms[index].call(this, args[index]);\n        }\n        return apply(func, this, args);\n      });\n    });\n\n    /**\n     * Creates a function that invokes `func` with `partials` prepended to the\n     * arguments it receives. This method is like `_.bind` except it does **not**\n     * alter the `this` binding.\n     *\n     * The `_.partial.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.2.0\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * function greet(greeting, name) {\n     *   return greeting + ' ' + name;\n     * }\n     *\n     * var sayHelloTo = _.partial(greet, 'hello');\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     *\n     * // Partially applied with placeholders.\n     * var greetFred = _.partial(greet, _, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     */\n    var partial = baseRest(function(func, partials) {\n      var holders = replaceHolders(partials, getHolder(partial));\n      return createWrap(func, WRAP_PARTIAL_FLAG, undefined, partials, holders);\n    });\n\n    /**\n     * This method is like `_.partial` except that partially applied arguments\n     * are appended to the arguments it receives.\n     *\n     * The `_.partialRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * function greet(greeting, name) {\n     *   return greeting + ' ' + name;\n     * }\n     *\n     * var greetFred = _.partialRight(greet, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     *\n     * // Partially applied with placeholders.\n     * var sayHelloTo = _.partialRight(greet, 'hello', _);\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     */\n    var partialRight = baseRest(function(func, partials) {\n      var holders = replaceHolders(partials, getHolder(partialRight));\n      return createWrap(func, WRAP_PARTIAL_RIGHT_FLAG, undefined, partials, holders);\n    });\n\n    /**\n     * Creates a function that invokes `func` with arguments arranged according\n     * to the specified `indexes` where the argument value at the first index is\n     * provided as the first argument, the argument value at the second index is\n     * provided as the second argument, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to rearrange arguments for.\n     * @param {...(number|number[])} indexes The arranged argument indexes.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var rearged = _.rearg(function(a, b, c) {\n     *   return [a, b, c];\n     * }, [2, 0, 1]);\n     *\n     * rearged('b', 'c', 'a')\n     * // => ['a', 'b', 'c']\n     */\n    var rearg = flatRest(function(func, indexes) {\n      return createWrap(func, WRAP_REARG_FLAG, undefined, undefined, undefined, indexes);\n    });\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * created function and arguments from `start` and beyond provided as\n     * an array.\n     *\n     * **Note:** This method is based on the\n     * [rest parameter](https://mdn.io/rest_parameters).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.rest(function(what, names) {\n     *   return what + ' ' + _.initial(names).join(', ') +\n     *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n     * });\n     *\n     * say('hello', 'fred', 'barney', 'pebbles');\n     * // => 'hello fred, barney, & pebbles'\n     */\n    function rest(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = start === undefined ? start : toInteger(start);\n      return baseRest(func, start);\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * create function and an array of arguments much like\n     * [`Function#apply`](http://www.ecma-international.org/ecma-262/7.0/#sec-function.prototype.apply).\n     *\n     * **Note:** This method is based on the\n     * [spread operator](https://mdn.io/spread_operator).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Function\n     * @param {Function} func The function to spread arguments over.\n     * @param {number} [start=0] The start position of the spread.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.spread(function(who, what) {\n     *   return who + ' says ' + what;\n     * });\n     *\n     * say(['fred', 'hello']);\n     * // => 'fred says hello'\n     *\n     * var numbers = Promise.all([\n     *   Promise.resolve(40),\n     *   Promise.resolve(36)\n     * ]);\n     *\n     * numbers.then(_.spread(function(x, y) {\n     *   return x + y;\n     * }));\n     * // => a Promise of 76\n     */\n    function spread(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = start == null ? 0 : nativeMax(toInteger(start), 0);\n      return baseRest(function(args) {\n        var array = args[start],\n            otherArgs = castSlice(args, 0, start);\n\n        if (array) {\n          arrayPush(otherArgs, array);\n        }\n        return apply(func, this, otherArgs);\n      });\n    }\n\n    /**\n     * Creates a throttled function that only invokes `func` at most once per\n     * every `wait` milliseconds. The throttled function comes with a `cancel`\n     * method to cancel delayed `func` invocations and a `flush` method to\n     * immediately invoke them. Provide `options` to indicate whether `func`\n     * should be invoked on the leading and/or trailing edge of the `wait`\n     * timeout. The `func` is invoked with the last arguments provided to the\n     * throttled function. Subsequent calls to the throttled function return the\n     * result of the last `func` invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is\n     * invoked on the trailing edge of the timeout only if the throttled function\n     * is invoked more than once during the `wait` timeout.\n     *\n     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n     * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n     *\n     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n     * for details over the differences between `_.throttle` and `_.debounce`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to throttle.\n     * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.leading=true]\n     *  Specify invoking on the leading edge of the timeout.\n     * @param {boolean} [options.trailing=true]\n     *  Specify invoking on the trailing edge of the timeout.\n     * @returns {Function} Returns the new throttled function.\n     * @example\n     *\n     * // Avoid excessively updating the position while scrolling.\n     * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n     *\n     * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n     * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n     * jQuery(element).on('click', throttled);\n     *\n     * // Cancel the trailing throttled invocation.\n     * jQuery(window).on('popstate', throttled.cancel);\n     */\n    function throttle(func, wait, options) {\n      var leading = true,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      if (isObject(options)) {\n        leading = 'leading' in options ? !!options.leading : leading;\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n      return debounce(func, wait, {\n        'leading': leading,\n        'maxWait': wait,\n        'trailing': trailing\n      });\n    }\n\n    /**\n     * Creates a function that accepts up to one argument, ignoring any\n     * additional arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to cap arguments for.\n     * @returns {Function} Returns the new capped function.\n     * @example\n     *\n     * _.map(['6', '8', '10'], _.unary(parseInt));\n     * // => [6, 8, 10]\n     */\n    function unary(func) {\n      return ary(func, 1);\n    }\n\n    /**\n     * Creates a function that provides `value` to `wrapper` as its first\n     * argument. Any additional arguments provided to the function are appended\n     * to those provided to the `wrapper`. The wrapper is invoked with the `this`\n     * binding of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {*} value The value to wrap.\n     * @param {Function} [wrapper=identity] The wrapper function.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var p = _.wrap(_.escape, function(func, text) {\n     *   return '<p>' + func(text) + '</p>';\n     * });\n     *\n     * p('fred, barney, & pebbles');\n     * // => '<p>fred, barney, &amp; pebbles</p>'\n     */\n    function wrap(value, wrapper) {\n      return partial(castFunction(wrapper), value);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Casts `value` as an array if it's not one.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.4.0\n     * @category Lang\n     * @param {*} value The value to inspect.\n     * @returns {Array} Returns the cast array.\n     * @example\n     *\n     * _.castArray(1);\n     * // => [1]\n     *\n     * _.castArray({ 'a': 1 });\n     * // => [{ 'a': 1 }]\n     *\n     * _.castArray('abc');\n     * // => ['abc']\n     *\n     * _.castArray(null);\n     * // => [null]\n     *\n     * _.castArray(undefined);\n     * // => [undefined]\n     *\n     * _.castArray();\n     * // => []\n     *\n     * var array = [1, 2, 3];\n     * console.log(_.castArray(array) === array);\n     * // => true\n     */\n    function castArray() {\n      if (!arguments.length) {\n        return [];\n      }\n      var value = arguments[0];\n      return isArray(value) ? value : [value];\n    }\n\n    /**\n     * Creates a shallow clone of `value`.\n     *\n     * **Note:** This method is loosely based on the\n     * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n     * and supports cloning arrays, array buffers, booleans, date objects, maps,\n     * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n     * arrays. The own enumerable properties of `arguments` objects are cloned\n     * as plain objects. An empty object is returned for uncloneable values such\n     * as error objects, functions, DOM nodes, and WeakMaps.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to clone.\n     * @returns {*} Returns the cloned value.\n     * @see _.cloneDeep\n     * @example\n     *\n     * var objects = [{ 'a': 1 }, { 'b': 2 }];\n     *\n     * var shallow = _.clone(objects);\n     * console.log(shallow[0] === objects[0]);\n     * // => true\n     */\n    function clone(value) {\n      return baseClone(value, CLONE_SYMBOLS_FLAG);\n    }\n\n    /**\n     * This method is like `_.clone` except that it accepts `customizer` which\n     * is invoked to produce the cloned value. If `customizer` returns `undefined`,\n     * cloning is handled by the method instead. The `customizer` is invoked with\n     * up to four arguments; (value [, index|key, object, stack]).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to clone.\n     * @param {Function} [customizer] The function to customize cloning.\n     * @returns {*} Returns the cloned value.\n     * @see _.cloneDeepWith\n     * @example\n     *\n     * function customizer(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(false);\n     *   }\n     * }\n     *\n     * var el = _.cloneWith(document.body, customizer);\n     *\n     * console.log(el === document.body);\n     * // => false\n     * console.log(el.nodeName);\n     * // => 'BODY'\n     * console.log(el.childNodes.length);\n     * // => 0\n     */\n    function cloneWith(value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseClone(value, CLONE_SYMBOLS_FLAG, customizer);\n    }\n\n    /**\n     * This method is like `_.clone` except that it recursively clones `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Lang\n     * @param {*} value The value to recursively clone.\n     * @returns {*} Returns the deep cloned value.\n     * @see _.clone\n     * @example\n     *\n     * var objects = [{ 'a': 1 }, { 'b': 2 }];\n     *\n     * var deep = _.cloneDeep(objects);\n     * console.log(deep[0] === objects[0]);\n     * // => false\n     */\n    function cloneDeep(value) {\n      return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n    }\n\n    /**\n     * This method is like `_.cloneWith` except that it recursively clones `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to recursively clone.\n     * @param {Function} [customizer] The function to customize cloning.\n     * @returns {*} Returns the deep cloned value.\n     * @see _.cloneWith\n     * @example\n     *\n     * function customizer(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(true);\n     *   }\n     * }\n     *\n     * var el = _.cloneDeepWith(document.body, customizer);\n     *\n     * console.log(el === document.body);\n     * // => false\n     * console.log(el.nodeName);\n     * // => 'BODY'\n     * console.log(el.childNodes.length);\n     * // => 20\n     */\n    function cloneDeepWith(value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG, customizer);\n    }\n\n    /**\n     * Checks if `object` conforms to `source` by invoking the predicate\n     * properties of `source` with the corresponding property values of `object`.\n     *\n     * **Note:** This method is equivalent to `_.conforms` when `source` is\n     * partially applied.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.14.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {boolean} Returns `true` if `object` conforms, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     *\n     * _.conformsTo(object, { 'b': function(n) { return n > 1; } });\n     * // => true\n     *\n     * _.conformsTo(object, { 'b': function(n) { return n > 2; } });\n     * // => false\n     */\n    function conformsTo(object, source) {\n      return source == null || baseConformsTo(object, source, keys(source));\n    }\n\n    /**\n     * Performs a\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * comparison between two values to determine if they are equivalent.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     * var other = { 'a': 1 };\n     *\n     * _.eq(object, object);\n     * // => true\n     *\n     * _.eq(object, other);\n     * // => false\n     *\n     * _.eq('a', 'a');\n     * // => true\n     *\n     * _.eq('a', Object('a'));\n     * // => false\n     *\n     * _.eq(NaN, NaN);\n     * // => true\n     */\n    function eq(value, other) {\n      return value === other || (value !== value && other !== other);\n    }\n\n    /**\n     * Checks if `value` is greater than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than `other`,\n     *  else `false`.\n     * @see _.lt\n     * @example\n     *\n     * _.gt(3, 1);\n     * // => true\n     *\n     * _.gt(3, 3);\n     * // => false\n     *\n     * _.gt(1, 3);\n     * // => false\n     */\n    var gt = createRelationalOperation(baseGt);\n\n    /**\n     * Checks if `value` is greater than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than or equal to\n     *  `other`, else `false`.\n     * @see _.lte\n     * @example\n     *\n     * _.gte(3, 1);\n     * // => true\n     *\n     * _.gte(3, 3);\n     * // => true\n     *\n     * _.gte(1, 3);\n     * // => false\n     */\n    var gte = createRelationalOperation(function(value, other) {\n      return value >= other;\n    });\n\n    /**\n     * Checks if `value` is likely an `arguments` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n     *  else `false`.\n     * @example\n     *\n     * _.isArguments(function() { return arguments; }());\n     * // => true\n     *\n     * _.isArguments([1, 2, 3]);\n     * // => false\n     */\n    var isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n      return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n        !propertyIsEnumerable.call(value, 'callee');\n    };\n\n    /**\n     * Checks if `value` is classified as an `Array` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n     * @example\n     *\n     * _.isArray([1, 2, 3]);\n     * // => true\n     *\n     * _.isArray(document.body.children);\n     * // => false\n     *\n     * _.isArray('abc');\n     * // => false\n     *\n     * _.isArray(_.noop);\n     * // => false\n     */\n    var isArray = Array.isArray;\n\n    /**\n     * Checks if `value` is classified as an `ArrayBuffer` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.\n     * @example\n     *\n     * _.isArrayBuffer(new ArrayBuffer(2));\n     * // => true\n     *\n     * _.isArrayBuffer(new Array(2));\n     * // => false\n     */\n    var isArrayBuffer = nodeIsArrayBuffer ? baseUnary(nodeIsArrayBuffer) : baseIsArrayBuffer;\n\n    /**\n     * Checks if `value` is array-like. A value is considered array-like if it's\n     * not a function and has a `value.length` that's an integer greater than or\n     * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n     * @example\n     *\n     * _.isArrayLike([1, 2, 3]);\n     * // => true\n     *\n     * _.isArrayLike(document.body.children);\n     * // => true\n     *\n     * _.isArrayLike('abc');\n     * // => true\n     *\n     * _.isArrayLike(_.noop);\n     * // => false\n     */\n    function isArrayLike(value) {\n      return value != null && isLength(value.length) && !isFunction(value);\n    }\n\n    /**\n     * This method is like `_.isArrayLike` except that it also checks if `value`\n     * is an object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array-like object,\n     *  else `false`.\n     * @example\n     *\n     * _.isArrayLikeObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isArrayLikeObject(document.body.children);\n     * // => true\n     *\n     * _.isArrayLikeObject('abc');\n     * // => false\n     *\n     * _.isArrayLikeObject(_.noop);\n     * // => false\n     */\n    function isArrayLikeObject(value) {\n      return isObjectLike(value) && isArrayLike(value);\n    }\n\n    /**\n     * Checks if `value` is classified as a boolean primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.\n     * @example\n     *\n     * _.isBoolean(false);\n     * // => true\n     *\n     * _.isBoolean(null);\n     * // => false\n     */\n    function isBoolean(value) {\n      return value === true || value === false ||\n        (isObjectLike(value) && baseGetTag(value) == boolTag);\n    }\n\n    /**\n     * Checks if `value` is a buffer.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n     * @example\n     *\n     * _.isBuffer(new Buffer(2));\n     * // => true\n     *\n     * _.isBuffer(new Uint8Array(2));\n     * // => false\n     */\n    var isBuffer = nativeIsBuffer || stubFalse;\n\n    /**\n     * Checks if `value` is classified as a `Date` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n     * @example\n     *\n     * _.isDate(new Date);\n     * // => true\n     *\n     * _.isDate('Mon April 23 2012');\n     * // => false\n     */\n    var isDate = nodeIsDate ? baseUnary(nodeIsDate) : baseIsDate;\n\n    /**\n     * Checks if `value` is likely a DOM element.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.\n     * @example\n     *\n     * _.isElement(document.body);\n     * // => true\n     *\n     * _.isElement('<body>');\n     * // => false\n     */\n    function isElement(value) {\n      return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);\n    }\n\n    /**\n     * Checks if `value` is an empty object, collection, map, or set.\n     *\n     * Objects are considered empty if they have no own enumerable string keyed\n     * properties.\n     *\n     * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n     * jQuery-like collections are considered empty if they have a `length` of `0`.\n     * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n     * @example\n     *\n     * _.isEmpty(null);\n     * // => true\n     *\n     * _.isEmpty(true);\n     * // => true\n     *\n     * _.isEmpty(1);\n     * // => true\n     *\n     * _.isEmpty([1, 2, 3]);\n     * // => false\n     *\n     * _.isEmpty({ 'a': 1 });\n     * // => false\n     */\n    function isEmpty(value) {\n      if (value == null) {\n        return true;\n      }\n      if (isArrayLike(value) &&\n          (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n            isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n        return !value.length;\n      }\n      var tag = getTag(value);\n      if (tag == mapTag || tag == setTag) {\n        return !value.size;\n      }\n      if (isPrototype(value)) {\n        return !baseKeys(value).length;\n      }\n      for (var key in value) {\n        if (hasOwnProperty.call(value, key)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * Performs a deep comparison between two values to determine if they are\n     * equivalent.\n     *\n     * **Note:** This method supports comparing arrays, array buffers, booleans,\n     * date objects, error objects, maps, numbers, `Object` objects, regexes,\n     * sets, strings, symbols, and typed arrays. `Object` objects are compared\n     * by their own, not inherited, enumerable properties. Functions and DOM\n     * nodes are compared by strict equality, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     * var other = { 'a': 1 };\n     *\n     * _.isEqual(object, other);\n     * // => true\n     *\n     * object === other;\n     * // => false\n     */\n    function isEqual(value, other) {\n      return baseIsEqual(value, other);\n    }\n\n    /**\n     * This method is like `_.isEqual` except that it accepts `customizer` which\n     * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n     * are handled by the method instead. The `customizer` is invoked with up to\n     * six arguments: (objValue, othValue [, index|key, object, other, stack]).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * function isGreeting(value) {\n     *   return /^h(?:i|ello)$/.test(value);\n     * }\n     *\n     * function customizer(objValue, othValue) {\n     *   if (isGreeting(objValue) && isGreeting(othValue)) {\n     *     return true;\n     *   }\n     * }\n     *\n     * var array = ['hello', 'goodbye'];\n     * var other = ['hi', 'goodbye'];\n     *\n     * _.isEqualWith(array, other, customizer);\n     * // => true\n     */\n    function isEqualWith(value, other, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      var result = customizer ? customizer(value, other) : undefined;\n      return result === undefined ? baseIsEqual(value, other, undefined, customizer) : !!result;\n    }\n\n    /**\n     * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,\n     * `SyntaxError`, `TypeError`, or `URIError` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an error object, else `false`.\n     * @example\n     *\n     * _.isError(new Error);\n     * // => true\n     *\n     * _.isError(Error);\n     * // => false\n     */\n    function isError(value) {\n      if (!isObjectLike(value)) {\n        return false;\n      }\n      var tag = baseGetTag(value);\n      return tag == errorTag || tag == domExcTag ||\n        (typeof value.message == 'string' && typeof value.name == 'string' && !isPlainObject(value));\n    }\n\n    /**\n     * Checks if `value` is a finite primitive number.\n     *\n     * **Note:** This method is based on\n     * [`Number.isFinite`](https://mdn.io/Number/isFinite).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a finite number, else `false`.\n     * @example\n     *\n     * _.isFinite(3);\n     * // => true\n     *\n     * _.isFinite(Number.MIN_VALUE);\n     * // => true\n     *\n     * _.isFinite(Infinity);\n     * // => false\n     *\n     * _.isFinite('3');\n     * // => false\n     */\n    function isFinite(value) {\n      return typeof value == 'number' && nativeIsFinite(value);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Function` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n     * @example\n     *\n     * _.isFunction(_);\n     * // => true\n     *\n     * _.isFunction(/abc/);\n     * // => false\n     */\n    function isFunction(value) {\n      if (!isObject(value)) {\n        return false;\n      }\n      // The use of `Object#toString` avoids issues with the `typeof` operator\n      // in Safari 9 which returns 'object' for typed arrays and other constructors.\n      var tag = baseGetTag(value);\n      return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n    }\n\n    /**\n     * Checks if `value` is an integer.\n     *\n     * **Note:** This method is based on\n     * [`Number.isInteger`](https://mdn.io/Number/isInteger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an integer, else `false`.\n     * @example\n     *\n     * _.isInteger(3);\n     * // => true\n     *\n     * _.isInteger(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isInteger(Infinity);\n     * // => false\n     *\n     * _.isInteger('3');\n     * // => false\n     */\n    function isInteger(value) {\n      return typeof value == 'number' && value == toInteger(value);\n    }\n\n    /**\n     * Checks if `value` is a valid array-like length.\n     *\n     * **Note:** This method is loosely based on\n     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n     * @example\n     *\n     * _.isLength(3);\n     * // => true\n     *\n     * _.isLength(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isLength(Infinity);\n     * // => false\n     *\n     * _.isLength('3');\n     * // => false\n     */\n    function isLength(value) {\n      return typeof value == 'number' &&\n        value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is the\n     * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n     * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n     * @example\n     *\n     * _.isObject({});\n     * // => true\n     *\n     * _.isObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isObject(_.noop);\n     * // => true\n     *\n     * _.isObject(null);\n     * // => false\n     */\n    function isObject(value) {\n      var type = typeof value;\n      return value != null && (type == 'object' || type == 'function');\n    }\n\n    /**\n     * Checks if `value` is object-like. A value is object-like if it's not `null`\n     * and has a `typeof` result of \"object\".\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n     * @example\n     *\n     * _.isObjectLike({});\n     * // => true\n     *\n     * _.isObjectLike([1, 2, 3]);\n     * // => true\n     *\n     * _.isObjectLike(_.noop);\n     * // => false\n     *\n     * _.isObjectLike(null);\n     * // => false\n     */\n    function isObjectLike(value) {\n      return value != null && typeof value == 'object';\n    }\n\n    /**\n     * Checks if `value` is classified as a `Map` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n     * @example\n     *\n     * _.isMap(new Map);\n     * // => true\n     *\n     * _.isMap(new WeakMap);\n     * // => false\n     */\n    var isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\n    /**\n     * Performs a partial deep comparison between `object` and `source` to\n     * determine if `object` contains equivalent property values.\n     *\n     * **Note:** This method is equivalent to `_.matches` when `source` is\n     * partially applied.\n     *\n     * Partial comparisons will match empty array and empty object `source`\n     * values against any array or object value, respectively. See `_.isEqual`\n     * for a list of supported value comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     *\n     * _.isMatch(object, { 'b': 2 });\n     * // => true\n     *\n     * _.isMatch(object, { 'b': 1 });\n     * // => false\n     */\n    function isMatch(object, source) {\n      return object === source || baseIsMatch(object, source, getMatchData(source));\n    }\n\n    /**\n     * This method is like `_.isMatch` except that it accepts `customizer` which\n     * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n     * are handled by the method instead. The `customizer` is invoked with five\n     * arguments: (objValue, srcValue, index|key, object, source).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     * @example\n     *\n     * function isGreeting(value) {\n     *   return /^h(?:i|ello)$/.test(value);\n     * }\n     *\n     * function customizer(objValue, srcValue) {\n     *   if (isGreeting(objValue) && isGreeting(srcValue)) {\n     *     return true;\n     *   }\n     * }\n     *\n     * var object = { 'greeting': 'hello' };\n     * var source = { 'greeting': 'hi' };\n     *\n     * _.isMatchWith(object, source, customizer);\n     * // => true\n     */\n    function isMatchWith(object, source, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseIsMatch(object, source, getMatchData(source), customizer);\n    }\n\n    /**\n     * Checks if `value` is `NaN`.\n     *\n     * **Note:** This method is based on\n     * [`Number.isNaN`](https://mdn.io/Number/isNaN) and is not the same as\n     * global [`isNaN`](https://mdn.io/isNaN) which returns `true` for\n     * `undefined` and other non-number values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n     * @example\n     *\n     * _.isNaN(NaN);\n     * // => true\n     *\n     * _.isNaN(new Number(NaN));\n     * // => true\n     *\n     * isNaN(undefined);\n     * // => true\n     *\n     * _.isNaN(undefined);\n     * // => false\n     */\n    function isNaN(value) {\n      // An `NaN` primitive is the only value that is not equal to itself.\n      // Perform the `toStringTag` check first to avoid errors with some\n      // ActiveX objects in IE.\n      return isNumber(value) && value != +value;\n    }\n\n    /**\n     * Checks if `value` is a pristine native function.\n     *\n     * **Note:** This method can't reliably detect native functions in the presence\n     * of the core-js package because core-js circumvents this kind of detection.\n     * Despite multiple requests, the core-js maintainer has made it clear: any\n     * attempt to fix the detection will be obstructed. As a result, we're left\n     * with little choice but to throw an error. Unfortunately, this also affects\n     * packages, like [babel-polyfill](https://www.npmjs.com/package/babel-polyfill),\n     * which rely on core-js.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a native function,\n     *  else `false`.\n     * @example\n     *\n     * _.isNative(Array.prototype.push);\n     * // => true\n     *\n     * _.isNative(_);\n     * // => false\n     */\n    function isNative(value) {\n      if (isMaskable(value)) {\n        throw new Error(CORE_ERROR_TEXT);\n      }\n      return baseIsNative(value);\n    }\n\n    /**\n     * Checks if `value` is `null`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `null`, else `false`.\n     * @example\n     *\n     * _.isNull(null);\n     * // => true\n     *\n     * _.isNull(void 0);\n     * // => false\n     */\n    function isNull(value) {\n      return value === null;\n    }\n\n    /**\n     * Checks if `value` is `null` or `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is nullish, else `false`.\n     * @example\n     *\n     * _.isNil(null);\n     * // => true\n     *\n     * _.isNil(void 0);\n     * // => true\n     *\n     * _.isNil(NaN);\n     * // => false\n     */\n    function isNil(value) {\n      return value == null;\n    }\n\n    /**\n     * Checks if `value` is classified as a `Number` primitive or object.\n     *\n     * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n     * classified as numbers, use the `_.isFinite` method.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n     * @example\n     *\n     * _.isNumber(3);\n     * // => true\n     *\n     * _.isNumber(Number.MIN_VALUE);\n     * // => true\n     *\n     * _.isNumber(Infinity);\n     * // => true\n     *\n     * _.isNumber('3');\n     * // => false\n     */\n    function isNumber(value) {\n      return typeof value == 'number' ||\n        (isObjectLike(value) && baseGetTag(value) == numberTag);\n    }\n\n    /**\n     * Checks if `value` is a plain object, that is, an object created by the\n     * `Object` constructor or one with a `[[Prototype]]` of `null`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.8.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * _.isPlainObject(new Foo);\n     * // => false\n     *\n     * _.isPlainObject([1, 2, 3]);\n     * // => false\n     *\n     * _.isPlainObject({ 'x': 0, 'y': 0 });\n     * // => true\n     *\n     * _.isPlainObject(Object.create(null));\n     * // => true\n     */\n    function isPlainObject(value) {\n      if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n        return false;\n      }\n      var proto = getPrototype(value);\n      if (proto === null) {\n        return true;\n      }\n      var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n      return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n        funcToString.call(Ctor) == objectCtorString;\n    }\n\n    /**\n     * Checks if `value` is classified as a `RegExp` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n     * @example\n     *\n     * _.isRegExp(/abc/);\n     * // => true\n     *\n     * _.isRegExp('/abc/');\n     * // => false\n     */\n    var isRegExp = nodeIsRegExp ? baseUnary(nodeIsRegExp) : baseIsRegExp;\n\n    /**\n     * Checks if `value` is a safe integer. An integer is safe if it's an IEEE-754\n     * double precision number which isn't the result of a rounded unsafe integer.\n     *\n     * **Note:** This method is based on\n     * [`Number.isSafeInteger`](https://mdn.io/Number/isSafeInteger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a safe integer, else `false`.\n     * @example\n     *\n     * _.isSafeInteger(3);\n     * // => true\n     *\n     * _.isSafeInteger(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isSafeInteger(Infinity);\n     * // => false\n     *\n     * _.isSafeInteger('3');\n     * // => false\n     */\n    function isSafeInteger(value) {\n      return isInteger(value) && value >= -MAX_SAFE_INTEGER && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is classified as a `Set` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n     * @example\n     *\n     * _.isSet(new Set);\n     * // => true\n     *\n     * _.isSet(new WeakSet);\n     * // => false\n     */\n    var isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\n    /**\n     * Checks if `value` is classified as a `String` primitive or object.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n     * @example\n     *\n     * _.isString('abc');\n     * // => true\n     *\n     * _.isString(1);\n     * // => false\n     */\n    function isString(value) {\n      return typeof value == 'string' ||\n        (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Symbol` primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n     * @example\n     *\n     * _.isSymbol(Symbol.iterator);\n     * // => true\n     *\n     * _.isSymbol('abc');\n     * // => false\n     */\n    function isSymbol(value) {\n      return typeof value == 'symbol' ||\n        (isObjectLike(value) && baseGetTag(value) == symbolTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a typed array.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n     * @example\n     *\n     * _.isTypedArray(new Uint8Array);\n     * // => true\n     *\n     * _.isTypedArray([]);\n     * // => false\n     */\n    var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n    /**\n     * Checks if `value` is `undefined`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n     * @example\n     *\n     * _.isUndefined(void 0);\n     * // => true\n     *\n     * _.isUndefined(null);\n     * // => false\n     */\n    function isUndefined(value) {\n      return value === undefined;\n    }\n\n    /**\n     * Checks if `value` is classified as a `WeakMap` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a weak map, else `false`.\n     * @example\n     *\n     * _.isWeakMap(new WeakMap);\n     * // => true\n     *\n     * _.isWeakMap(new Map);\n     * // => false\n     */\n    function isWeakMap(value) {\n      return isObjectLike(value) && getTag(value) == weakMapTag;\n    }\n\n    /**\n     * Checks if `value` is classified as a `WeakSet` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a weak set, else `false`.\n     * @example\n     *\n     * _.isWeakSet(new WeakSet);\n     * // => true\n     *\n     * _.isWeakSet(new Set);\n     * // => false\n     */\n    function isWeakSet(value) {\n      return isObjectLike(value) && baseGetTag(value) == weakSetTag;\n    }\n\n    /**\n     * Checks if `value` is less than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than `other`,\n     *  else `false`.\n     * @see _.gt\n     * @example\n     *\n     * _.lt(1, 3);\n     * // => true\n     *\n     * _.lt(3, 3);\n     * // => false\n     *\n     * _.lt(3, 1);\n     * // => false\n     */\n    var lt = createRelationalOperation(baseLt);\n\n    /**\n     * Checks if `value` is less than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than or equal to\n     *  `other`, else `false`.\n     * @see _.gte\n     * @example\n     *\n     * _.lte(1, 3);\n     * // => true\n     *\n     * _.lte(3, 3);\n     * // => true\n     *\n     * _.lte(3, 1);\n     * // => false\n     */\n    var lte = createRelationalOperation(function(value, other) {\n      return value <= other;\n    });\n\n    /**\n     * Converts `value` to an array.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Array} Returns the converted array.\n     * @example\n     *\n     * _.toArray({ 'a': 1, 'b': 2 });\n     * // => [1, 2]\n     *\n     * _.toArray('abc');\n     * // => ['a', 'b', 'c']\n     *\n     * _.toArray(1);\n     * // => []\n     *\n     * _.toArray(null);\n     * // => []\n     */\n    function toArray(value) {\n      if (!value) {\n        return [];\n      }\n      if (isArrayLike(value)) {\n        return isString(value) ? stringToArray(value) : copyArray(value);\n      }\n      if (symIterator && value[symIterator]) {\n        return iteratorToArray(value[symIterator]());\n      }\n      var tag = getTag(value),\n          func = tag == mapTag ? mapToArray : (tag == setTag ? setToArray : values);\n\n      return func(value);\n    }\n\n    /**\n     * Converts `value` to a finite number.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.12.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted number.\n     * @example\n     *\n     * _.toFinite(3.2);\n     * // => 3.2\n     *\n     * _.toFinite(Number.MIN_VALUE);\n     * // => 5e-324\n     *\n     * _.toFinite(Infinity);\n     * // => 1.7976931348623157e+308\n     *\n     * _.toFinite('3.2');\n     * // => 3.2\n     */\n    function toFinite(value) {\n      if (!value) {\n        return value === 0 ? value : 0;\n      }\n      value = toNumber(value);\n      if (value === INFINITY || value === -INFINITY) {\n        var sign = (value < 0 ? -1 : 1);\n        return sign * MAX_INTEGER;\n      }\n      return value === value ? value : 0;\n    }\n\n    /**\n     * Converts `value` to an integer.\n     *\n     * **Note:** This method is loosely based on\n     * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toInteger(3.2);\n     * // => 3\n     *\n     * _.toInteger(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toInteger(Infinity);\n     * // => 1.7976931348623157e+308\n     *\n     * _.toInteger('3.2');\n     * // => 3\n     */\n    function toInteger(value) {\n      var result = toFinite(value),\n          remainder = result % 1;\n\n      return result === result ? (remainder ? result - remainder : result) : 0;\n    }\n\n    /**\n     * Converts `value` to an integer suitable for use as the length of an\n     * array-like object.\n     *\n     * **Note:** This method is based on\n     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toLength(3.2);\n     * // => 3\n     *\n     * _.toLength(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toLength(Infinity);\n     * // => 4294967295\n     *\n     * _.toLength('3.2');\n     * // => 3\n     */\n    function toLength(value) {\n      return value ? baseClamp(toInteger(value), 0, MAX_ARRAY_LENGTH) : 0;\n    }\n\n    /**\n     * Converts `value` to a number.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to process.\n     * @returns {number} Returns the number.\n     * @example\n     *\n     * _.toNumber(3.2);\n     * // => 3.2\n     *\n     * _.toNumber(Number.MIN_VALUE);\n     * // => 5e-324\n     *\n     * _.toNumber(Infinity);\n     * // => Infinity\n     *\n     * _.toNumber('3.2');\n     * // => 3.2\n     */\n    function toNumber(value) {\n      if (typeof value == 'number') {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      if (isObject(value)) {\n        var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n        value = isObject(other) ? (other + '') : other;\n      }\n      if (typeof value != 'string') {\n        return value === 0 ? value : +value;\n      }\n      value = value.replace(reTrim, '');\n      var isBinary = reIsBinary.test(value);\n      return (isBinary || reIsOctal.test(value))\n        ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n        : (reIsBadHex.test(value) ? NAN : +value);\n    }\n\n    /**\n     * Converts `value` to a plain object flattening inherited enumerable string\n     * keyed properties of `value` to own properties of the plain object.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Object} Returns the converted plain object.\n     * @example\n     *\n     * function Foo() {\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.assign({ 'a': 1 }, new Foo);\n     * // => { 'a': 1, 'b': 2 }\n     *\n     * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n     * // => { 'a': 1, 'b': 2, 'c': 3 }\n     */\n    function toPlainObject(value) {\n      return copyObject(value, keysIn(value));\n    }\n\n    /**\n     * Converts `value` to a safe integer. A safe integer can be compared and\n     * represented correctly.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toSafeInteger(3.2);\n     * // => 3\n     *\n     * _.toSafeInteger(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toSafeInteger(Infinity);\n     * // => 9007199254740991\n     *\n     * _.toSafeInteger('3.2');\n     * // => 3\n     */\n    function toSafeInteger(value) {\n      return value\n        ? baseClamp(toInteger(value), -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER)\n        : (value === 0 ? value : 0);\n    }\n\n    /**\n     * Converts `value` to a string. An empty string is returned for `null`\n     * and `undefined` values. The sign of `-0` is preserved.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.toString(null);\n     * // => ''\n     *\n     * _.toString(-0);\n     * // => '-0'\n     *\n     * _.toString([1, 2, 3]);\n     * // => '1,2,3'\n     */\n    function toString(value) {\n      return value == null ? '' : baseToString(value);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Assigns own enumerable string keyed properties of source objects to the\n     * destination object. Source objects are applied from left to right.\n     * Subsequent sources overwrite property assignments of previous sources.\n     *\n     * **Note:** This method mutates `object` and is loosely based on\n     * [`Object.assign`](https://mdn.io/Object/assign).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.10.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.assignIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * function Bar() {\n     *   this.c = 3;\n     * }\n     *\n     * Foo.prototype.b = 2;\n     * Bar.prototype.d = 4;\n     *\n     * _.assign({ 'a': 0 }, new Foo, new Bar);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    var assign = createAssigner(function(object, source) {\n      if (isPrototype(source) || isArrayLike(source)) {\n        copyObject(source, keys(source), object);\n        return;\n      }\n      for (var key in source) {\n        if (hasOwnProperty.call(source, key)) {\n          assignValue(object, key, source[key]);\n        }\n      }\n    });\n\n    /**\n     * This method is like `_.assign` except that it iterates over own and\n     * inherited source properties.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias extend\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.assign\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * function Bar() {\n     *   this.c = 3;\n     * }\n     *\n     * Foo.prototype.b = 2;\n     * Bar.prototype.d = 4;\n     *\n     * _.assignIn({ 'a': 0 }, new Foo, new Bar);\n     * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4 }\n     */\n    var assignIn = createAssigner(function(object, source) {\n      copyObject(source, keysIn(source), object);\n    });\n\n    /**\n     * This method is like `_.assignIn` except that it accepts `customizer`\n     * which is invoked to produce the assigned values. If `customizer` returns\n     * `undefined`, assignment is handled by the method instead. The `customizer`\n     * is invoked with five arguments: (objValue, srcValue, key, object, source).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias extendWith\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @see _.assignWith\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   return _.isUndefined(objValue) ? srcValue : objValue;\n     * }\n     *\n     * var defaults = _.partialRight(_.assignInWith, customizer);\n     *\n     * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var assignInWith = createAssigner(function(object, source, srcIndex, customizer) {\n      copyObject(source, keysIn(source), object, customizer);\n    });\n\n    /**\n     * This method is like `_.assign` except that it accepts `customizer`\n     * which is invoked to produce the assigned values. If `customizer` returns\n     * `undefined`, assignment is handled by the method instead. The `customizer`\n     * is invoked with five arguments: (objValue, srcValue, key, object, source).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @see _.assignInWith\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   return _.isUndefined(objValue) ? srcValue : objValue;\n     * }\n     *\n     * var defaults = _.partialRight(_.assignWith, customizer);\n     *\n     * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var assignWith = createAssigner(function(object, source, srcIndex, customizer) {\n      copyObject(source, keys(source), object, customizer);\n    });\n\n    /**\n     * Creates an array of values corresponding to `paths` of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Array} Returns the picked values.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };\n     *\n     * _.at(object, ['a[0].b.c', 'a[1]']);\n     * // => [3, 4]\n     */\n    var at = flatRest(baseAt);\n\n    /**\n     * Creates an object that inherits from the `prototype` object. If a\n     * `properties` object is given, its own enumerable string keyed properties\n     * are assigned to the created object.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.3.0\n     * @category Object\n     * @param {Object} prototype The object to inherit from.\n     * @param {Object} [properties] The properties to assign to the object.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * function Shape() {\n     *   this.x = 0;\n     *   this.y = 0;\n     * }\n     *\n     * function Circle() {\n     *   Shape.call(this);\n     * }\n     *\n     * Circle.prototype = _.create(Shape.prototype, {\n     *   'constructor': Circle\n     * });\n     *\n     * var circle = new Circle;\n     * circle instanceof Circle;\n     * // => true\n     *\n     * circle instanceof Shape;\n     * // => true\n     */\n    function create(prototype, properties) {\n      var result = baseCreate(prototype);\n      return properties == null ? result : baseAssign(result, properties);\n    }\n\n    /**\n     * Assigns own and inherited enumerable string keyed properties of source\n     * objects to the destination object for all destination properties that\n     * resolve to `undefined`. Source objects are applied from left to right.\n     * Once a property is set, additional values of the same property are ignored.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.defaultsDeep\n     * @example\n     *\n     * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var defaults = baseRest(function(object, sources) {\n      object = Object(object);\n\n      var index = -1;\n      var length = sources.length;\n      var guard = length > 2 ? sources[2] : undefined;\n\n      if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n        length = 1;\n      }\n\n      while (++index < length) {\n        var source = sources[index];\n        var props = keysIn(source);\n        var propsIndex = -1;\n        var propsLength = props.length;\n\n        while (++propsIndex < propsLength) {\n          var key = props[propsIndex];\n          var value = object[key];\n\n          if (value === undefined ||\n              (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n            object[key] = source[key];\n          }\n        }\n      }\n\n      return object;\n    });\n\n    /**\n     * This method is like `_.defaults` except that it recursively assigns\n     * default properties.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.defaults\n     * @example\n     *\n     * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });\n     * // => { 'a': { 'b': 2, 'c': 3 } }\n     */\n    var defaultsDeep = baseRest(function(args) {\n      args.push(undefined, customDefaultsMerge);\n      return apply(mergeWith, undefined, args);\n    });\n\n    /**\n     * This method is like `_.find` except that it returns the key of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {string|undefined} Returns the key of the matched element,\n     *  else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findKey(users, function(o) { return o.age < 40; });\n     * // => 'barney' (iteration order is not guaranteed)\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findKey(users, { 'age': 1, 'active': true });\n     * // => 'pebbles'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findKey(users, ['active', false]);\n     * // => 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findKey(users, 'active');\n     * // => 'barney'\n     */\n    function findKey(object, predicate) {\n      return baseFindKey(object, getIteratee(predicate, 3), baseForOwn);\n    }\n\n    /**\n     * This method is like `_.findKey` except that it iterates over elements of\n     * a collection in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {string|undefined} Returns the key of the matched element,\n     *  else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findLastKey(users, function(o) { return o.age < 40; });\n     * // => returns 'pebbles' assuming `_.findKey` returns 'barney'\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findLastKey(users, { 'age': 36, 'active': true });\n     * // => 'barney'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findLastKey(users, ['active', false]);\n     * // => 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findLastKey(users, 'active');\n     * // => 'pebbles'\n     */\n    function findLastKey(object, predicate) {\n      return baseFindKey(object, getIteratee(predicate, 3), baseForOwnRight);\n    }\n\n    /**\n     * Iterates over own and inherited enumerable string keyed properties of an\n     * object and invokes `iteratee` for each property. The iteratee is invoked\n     * with three arguments: (value, key, object). Iteratee functions may exit\n     * iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forInRight\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forIn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a', 'b', then 'c' (iteration order is not guaranteed).\n     */\n    function forIn(object, iteratee) {\n      return object == null\n        ? object\n        : baseFor(object, getIteratee(iteratee, 3), keysIn);\n    }\n\n    /**\n     * This method is like `_.forIn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forInRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'c', 'b', then 'a' assuming `_.forIn` logs 'a', 'b', then 'c'.\n     */\n    function forInRight(object, iteratee) {\n      return object == null\n        ? object\n        : baseForRight(object, getIteratee(iteratee, 3), keysIn);\n    }\n\n    /**\n     * Iterates over own enumerable string keyed properties of an object and\n     * invokes `iteratee` for each property. The iteratee is invoked with three\n     * arguments: (value, key, object). Iteratee functions may exit iteration\n     * early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forOwnRight\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n     */\n    function forOwn(object, iteratee) {\n      return object && baseForOwn(object, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.forOwn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forOwn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwnRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'b' then 'a' assuming `_.forOwn` logs 'a' then 'b'.\n     */\n    function forOwnRight(object, iteratee) {\n      return object && baseForOwnRight(object, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * Creates an array of function property names from own enumerable properties\n     * of `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns the function names.\n     * @see _.functionsIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = _.constant('a');\n     *   this.b = _.constant('b');\n     * }\n     *\n     * Foo.prototype.c = _.constant('c');\n     *\n     * _.functions(new Foo);\n     * // => ['a', 'b']\n     */\n    function functions(object) {\n      return object == null ? [] : baseFunctions(object, keys(object));\n    }\n\n    /**\n     * Creates an array of function property names from own and inherited\n     * enumerable properties of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns the function names.\n     * @see _.functions\n     * @example\n     *\n     * function Foo() {\n     *   this.a = _.constant('a');\n     *   this.b = _.constant('b');\n     * }\n     *\n     * Foo.prototype.c = _.constant('c');\n     *\n     * _.functionsIn(new Foo);\n     * // => ['a', 'b', 'c']\n     */\n    function functionsIn(object) {\n      return object == null ? [] : baseFunctions(object, keysIn(object));\n    }\n\n    /**\n     * Gets the value at `path` of `object`. If the resolved value is\n     * `undefined`, the `defaultValue` is returned in its place.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.get(object, 'a[0].b.c');\n     * // => 3\n     *\n     * _.get(object, ['a', '0', 'b', 'c']);\n     * // => 3\n     *\n     * _.get(object, 'a.b.c', 'default');\n     * // => 'default'\n     */\n    function get(object, path, defaultValue) {\n      var result = object == null ? undefined : baseGet(object, path);\n      return result === undefined ? defaultValue : result;\n    }\n\n    /**\n     * Checks if `path` is a direct property of `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     * @example\n     *\n     * var object = { 'a': { 'b': 2 } };\n     * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n     *\n     * _.has(object, 'a');\n     * // => true\n     *\n     * _.has(object, 'a.b');\n     * // => true\n     *\n     * _.has(object, ['a', 'b']);\n     * // => true\n     *\n     * _.has(other, 'a');\n     * // => false\n     */\n    function has(object, path) {\n      return object != null && hasPath(object, path, baseHas);\n    }\n\n    /**\n     * Checks if `path` is a direct or inherited property of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     * @example\n     *\n     * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n     *\n     * _.hasIn(object, 'a');\n     * // => true\n     *\n     * _.hasIn(object, 'a.b');\n     * // => true\n     *\n     * _.hasIn(object, ['a', 'b']);\n     * // => true\n     *\n     * _.hasIn(object, 'b');\n     * // => false\n     */\n    function hasIn(object, path) {\n      return object != null && hasPath(object, path, baseHasIn);\n    }\n\n    /**\n     * Creates an object composed of the inverted keys and values of `object`.\n     * If `object` contains duplicate values, subsequent values overwrite\n     * property assignments of previous values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.7.0\n     * @category Object\n     * @param {Object} object The object to invert.\n     * @returns {Object} Returns the new inverted object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2, 'c': 1 };\n     *\n     * _.invert(object);\n     * // => { '1': 'c', '2': 'b' }\n     */\n    var invert = createInverter(function(result, value, key) {\n      if (value != null &&\n          typeof value.toString != 'function') {\n        value = nativeObjectToString.call(value);\n      }\n\n      result[value] = key;\n    }, constant(identity));\n\n    /**\n     * This method is like `_.invert` except that the inverted object is generated\n     * from the results of running each element of `object` thru `iteratee`. The\n     * corresponding inverted value of each inverted key is an array of keys\n     * responsible for generating the inverted value. The iteratee is invoked\n     * with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.1.0\n     * @category Object\n     * @param {Object} object The object to invert.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Object} Returns the new inverted object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2, 'c': 1 };\n     *\n     * _.invertBy(object);\n     * // => { '1': ['a', 'c'], '2': ['b'] }\n     *\n     * _.invertBy(object, function(value) {\n     *   return 'group' + value;\n     * });\n     * // => { 'group1': ['a', 'c'], 'group2': ['b'] }\n     */\n    var invertBy = createInverter(function(result, value, key) {\n      if (value != null &&\n          typeof value.toString != 'function') {\n        value = nativeObjectToString.call(value);\n      }\n\n      if (hasOwnProperty.call(result, value)) {\n        result[value].push(key);\n      } else {\n        result[value] = [key];\n      }\n    }, getIteratee);\n\n    /**\n     * Invokes the method at `path` of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {*} Returns the result of the invoked method.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': [1, 2, 3, 4] } }] };\n     *\n     * _.invoke(object, 'a[0].b.c.slice', 1, 3);\n     * // => [2, 3]\n     */\n    var invoke = baseRest(baseInvoke);\n\n    /**\n     * Creates an array of the own enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects. See the\n     * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n     * for more details.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keys(new Foo);\n     * // => ['a', 'b'] (iteration order is not guaranteed)\n     *\n     * _.keys('hi');\n     * // => ['0', '1']\n     */\n    function keys(object) {\n      return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n    }\n\n    /**\n     * Creates an array of the own and inherited enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keysIn(new Foo);\n     * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n     */\n    function keysIn(object) {\n      return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n    }\n\n    /**\n     * The opposite of `_.mapValues`; this method creates an object with the\n     * same values as `object` and keys generated by running each own enumerable\n     * string keyed property of `object` thru `iteratee`. The iteratee is invoked\n     * with three arguments: (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns the new mapped object.\n     * @see _.mapValues\n     * @example\n     *\n     * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {\n     *   return key + value;\n     * });\n     * // => { 'a1': 1, 'b2': 2 }\n     */\n    function mapKeys(object, iteratee) {\n      var result = {};\n      iteratee = getIteratee(iteratee, 3);\n\n      baseForOwn(object, function(value, key, object) {\n        baseAssignValue(result, iteratee(value, key, object), value);\n      });\n      return result;\n    }\n\n    /**\n     * Creates an object with the same keys as `object` and values generated\n     * by running each own enumerable string keyed property of `object` thru\n     * `iteratee`. The iteratee is invoked with three arguments:\n     * (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns the new mapped object.\n     * @see _.mapKeys\n     * @example\n     *\n     * var users = {\n     *   'fred':    { 'user': 'fred',    'age': 40 },\n     *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n     * };\n     *\n     * _.mapValues(users, function(o) { return o.age; });\n     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.mapValues(users, 'age');\n     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n     */\n    function mapValues(object, iteratee) {\n      var result = {};\n      iteratee = getIteratee(iteratee, 3);\n\n      baseForOwn(object, function(value, key, object) {\n        baseAssignValue(result, key, iteratee(value, key, object));\n      });\n      return result;\n    }\n\n    /**\n     * This method is like `_.assign` except that it recursively merges own and\n     * inherited enumerable string keyed properties of source objects into the\n     * destination object. Source properties that resolve to `undefined` are\n     * skipped if a destination value exists. Array and plain object properties\n     * are merged recursively. Other objects and value types are overridden by\n     * assignment. Source objects are applied from left to right. Subsequent\n     * sources overwrite property assignments of previous sources.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {\n     *   'a': [{ 'b': 2 }, { 'd': 4 }]\n     * };\n     *\n     * var other = {\n     *   'a': [{ 'c': 3 }, { 'e': 5 }]\n     * };\n     *\n     * _.merge(object, other);\n     * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n     */\n    var merge = createAssigner(function(object, source, srcIndex) {\n      baseMerge(object, source, srcIndex);\n    });\n\n    /**\n     * This method is like `_.merge` except that it accepts `customizer` which\n     * is invoked to produce the merged values of the destination and source\n     * properties. If `customizer` returns `undefined`, merging is handled by the\n     * method instead. The `customizer` is invoked with six arguments:\n     * (objValue, srcValue, key, object, source, stack).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} customizer The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   if (_.isArray(objValue)) {\n     *     return objValue.concat(srcValue);\n     *   }\n     * }\n     *\n     * var object = { 'a': [1], 'b': [2] };\n     * var other = { 'a': [3], 'b': [4] };\n     *\n     * _.mergeWith(object, other, customizer);\n     * // => { 'a': [1, 3], 'b': [2, 4] }\n     */\n    var mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n      baseMerge(object, source, srcIndex, customizer);\n    });\n\n    /**\n     * The opposite of `_.pick`; this method creates an object composed of the\n     * own and inherited enumerable property paths of `object` that are not omitted.\n     *\n     * **Note:** This method is considerably slower than `_.pick`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {...(string|string[])} [paths] The property paths to omit.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.omit(object, ['a', 'c']);\n     * // => { 'b': '2' }\n     */\n    var omit = flatRest(function(object, paths) {\n      var result = {};\n      if (object == null) {\n        return result;\n      }\n      var isDeep = false;\n      paths = arrayMap(paths, function(path) {\n        path = castPath(path, object);\n        isDeep || (isDeep = path.length > 1);\n        return path;\n      });\n      copyObject(object, getAllKeysIn(object), result);\n      if (isDeep) {\n        result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);\n      }\n      var length = paths.length;\n      while (length--) {\n        baseUnset(result, paths[length]);\n      }\n      return result;\n    });\n\n    /**\n     * The opposite of `_.pickBy`; this method creates an object composed of\n     * the own and inherited enumerable string keyed properties of `object` that\n     * `predicate` doesn't return truthy for. The predicate is invoked with two\n     * arguments: (value, key).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function} [predicate=_.identity] The function invoked per property.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.omitBy(object, _.isNumber);\n     * // => { 'b': '2' }\n     */\n    function omitBy(object, predicate) {\n      return pickBy(object, negate(getIteratee(predicate)));\n    }\n\n    /**\n     * Creates an object composed of the picked `object` properties.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.pick(object, ['a', 'c']);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    var pick = flatRest(function(object, paths) {\n      return object == null ? {} : basePick(object, paths);\n    });\n\n    /**\n     * Creates an object composed of the `object` properties `predicate` returns\n     * truthy for. The predicate is invoked with two arguments: (value, key).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function} [predicate=_.identity] The function invoked per property.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.pickBy(object, _.isNumber);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    function pickBy(object, predicate) {\n      if (object == null) {\n        return {};\n      }\n      var props = arrayMap(getAllKeysIn(object), function(prop) {\n        return [prop];\n      });\n      predicate = getIteratee(predicate);\n      return basePickBy(object, props, function(value, path) {\n        return predicate(value, path[0]);\n      });\n    }\n\n    /**\n     * This method is like `_.get` except that if the resolved value is a\n     * function it's invoked with the `this` binding of its parent object and\n     * its result is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to resolve.\n     * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };\n     *\n     * _.result(object, 'a[0].b.c1');\n     * // => 3\n     *\n     * _.result(object, 'a[0].b.c2');\n     * // => 4\n     *\n     * _.result(object, 'a[0].b.c3', 'default');\n     * // => 'default'\n     *\n     * _.result(object, 'a[0].b.c3', _.constant('default'));\n     * // => 'default'\n     */\n    function result(object, path, defaultValue) {\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length;\n\n      // Ensure the loop is entered when path is empty.\n      if (!length) {\n        length = 1;\n        object = undefined;\n      }\n      while (++index < length) {\n        var value = object == null ? undefined : object[toKey(path[index])];\n        if (value === undefined) {\n          index = length;\n          value = defaultValue;\n        }\n        object = isFunction(value) ? value.call(object) : value;\n      }\n      return object;\n    }\n\n    /**\n     * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n     * it's created. Arrays are created for missing index properties while objects\n     * are created for all other missing properties. Use `_.setWith` to customize\n     * `path` creation.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.set(object, 'a[0].b.c', 4);\n     * console.log(object.a[0].b.c);\n     * // => 4\n     *\n     * _.set(object, ['x', '0', 'y', 'z'], 5);\n     * console.log(object.x[0].y.z);\n     * // => 5\n     */\n    function set(object, path, value) {\n      return object == null ? object : baseSet(object, path, value);\n    }\n\n    /**\n     * This method is like `_.set` except that it accepts `customizer` which is\n     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`\n     * path creation is handled by the method instead. The `customizer` is invoked\n     * with three arguments: (nsValue, key, nsObject).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {};\n     *\n     * _.setWith(object, '[0][1]', 'a', Object);\n     * // => { '0': { '1': 'a' } }\n     */\n    function setWith(object, path, value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return object == null ? object : baseSet(object, path, value, customizer);\n    }\n\n    /**\n     * Creates an array of own enumerable string keyed-value pairs for `object`\n     * which can be consumed by `_.fromPairs`. If `object` is a map or set, its\n     * entries are returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias entries\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the key-value pairs.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.toPairs(new Foo);\n     * // => [['a', 1], ['b', 2]] (iteration order is not guaranteed)\n     */\n    var toPairs = createToPairs(keys);\n\n    /**\n     * Creates an array of own and inherited enumerable string keyed-value pairs\n     * for `object` which can be consumed by `_.fromPairs`. If `object` is a map\n     * or set, its entries are returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias entriesIn\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the key-value pairs.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.toPairsIn(new Foo);\n     * // => [['a', 1], ['b', 2], ['c', 3]] (iteration order is not guaranteed)\n     */\n    var toPairsIn = createToPairs(keysIn);\n\n    /**\n     * An alternative to `_.reduce`; this method transforms `object` to a new\n     * `accumulator` object which is the result of running each of its own\n     * enumerable string keyed properties thru `iteratee`, with each invocation\n     * potentially mutating the `accumulator` object. If `accumulator` is not\n     * provided, a new object with the same `[[Prototype]]` will be used. The\n     * iteratee is invoked with four arguments: (accumulator, value, key, object).\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The custom accumulator value.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * _.transform([2, 3, 4], function(result, n) {\n     *   result.push(n *= n);\n     *   return n % 2 == 0;\n     * }, []);\n     * // => [4, 9]\n     *\n     * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n     *   (result[value] || (result[value] = [])).push(key);\n     * }, {});\n     * // => { '1': ['a', 'c'], '2': ['b'] }\n     */\n    function transform(object, iteratee, accumulator) {\n      var isArr = isArray(object),\n          isArrLike = isArr || isBuffer(object) || isTypedArray(object);\n\n      iteratee = getIteratee(iteratee, 4);\n      if (accumulator == null) {\n        var Ctor = object && object.constructor;\n        if (isArrLike) {\n          accumulator = isArr ? new Ctor : [];\n        }\n        else if (isObject(object)) {\n          accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};\n        }\n        else {\n          accumulator = {};\n        }\n      }\n      (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object) {\n        return iteratee(accumulator, value, index, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * Removes the property at `path` of `object`.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to unset.\n     * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 7 } }] };\n     * _.unset(object, 'a[0].b.c');\n     * // => true\n     *\n     * console.log(object);\n     * // => { 'a': [{ 'b': {} }] };\n     *\n     * _.unset(object, ['a', '0', 'b', 'c']);\n     * // => true\n     *\n     * console.log(object);\n     * // => { 'a': [{ 'b': {} }] };\n     */\n    function unset(object, path) {\n      return object == null ? true : baseUnset(object, path);\n    }\n\n    /**\n     * This method is like `_.set` except that accepts `updater` to produce the\n     * value to set. Use `_.updateWith` to customize `path` creation. The `updater`\n     * is invoked with one argument: (value).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {Function} updater The function to produce the updated value.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.update(object, 'a[0].b.c', function(n) { return n * n; });\n     * console.log(object.a[0].b.c);\n     * // => 9\n     *\n     * _.update(object, 'x[0].y.z', function(n) { return n ? n + 1 : 0; });\n     * console.log(object.x[0].y.z);\n     * // => 0\n     */\n    function update(object, path, updater) {\n      return object == null ? object : baseUpdate(object, path, castFunction(updater));\n    }\n\n    /**\n     * This method is like `_.update` except that it accepts `customizer` which is\n     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`\n     * path creation is handled by the method instead. The `customizer` is invoked\n     * with three arguments: (nsValue, key, nsObject).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {Function} updater The function to produce the updated value.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {};\n     *\n     * _.updateWith(object, '[0][1]', _.constant('a'), Object);\n     * // => { '0': { '1': 'a' } }\n     */\n    function updateWith(object, path, updater, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return object == null ? object : baseUpdate(object, path, castFunction(updater), customizer);\n    }\n\n    /**\n     * Creates an array of the own enumerable string keyed property values of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.values(new Foo);\n     * // => [1, 2] (iteration order is not guaranteed)\n     *\n     * _.values('hi');\n     * // => ['h', 'i']\n     */\n    function values(object) {\n      return object == null ? [] : baseValues(object, keys(object));\n    }\n\n    /**\n     * Creates an array of the own and inherited enumerable string keyed property\n     * values of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.valuesIn(new Foo);\n     * // => [1, 2, 3] (iteration order is not guaranteed)\n     */\n    function valuesIn(object) {\n      return object == null ? [] : baseValues(object, keysIn(object));\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Clamps `number` within the inclusive `lower` and `upper` bounds.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Number\n     * @param {number} number The number to clamp.\n     * @param {number} [lower] The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the clamped number.\n     * @example\n     *\n     * _.clamp(-10, -5, 5);\n     * // => -5\n     *\n     * _.clamp(10, -5, 5);\n     * // => 5\n     */\n    function clamp(number, lower, upper) {\n      if (upper === undefined) {\n        upper = lower;\n        lower = undefined;\n      }\n      if (upper !== undefined) {\n        upper = toNumber(upper);\n        upper = upper === upper ? upper : 0;\n      }\n      if (lower !== undefined) {\n        lower = toNumber(lower);\n        lower = lower === lower ? lower : 0;\n      }\n      return baseClamp(toNumber(number), lower, upper);\n    }\n\n    /**\n     * Checks if `n` is between `start` and up to, but not including, `end`. If\n     * `end` is not specified, it's set to `start` with `start` then set to `0`.\n     * If `start` is greater than `end` the params are swapped to support\n     * negative ranges.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.3.0\n     * @category Number\n     * @param {number} number The number to check.\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n     * @see _.range, _.rangeRight\n     * @example\n     *\n     * _.inRange(3, 2, 4);\n     * // => true\n     *\n     * _.inRange(4, 8);\n     * // => true\n     *\n     * _.inRange(4, 2);\n     * // => false\n     *\n     * _.inRange(2, 2);\n     * // => false\n     *\n     * _.inRange(1.2, 2);\n     * // => true\n     *\n     * _.inRange(5.2, 4);\n     * // => false\n     *\n     * _.inRange(-3, -2, -6);\n     * // => true\n     */\n    function inRange(number, start, end) {\n      start = toFinite(start);\n      if (end === undefined) {\n        end = start;\n        start = 0;\n      } else {\n        end = toFinite(end);\n      }\n      number = toNumber(number);\n      return baseInRange(number, start, end);\n    }\n\n    /**\n     * Produces a random number between the inclusive `lower` and `upper` bounds.\n     * If only one argument is provided a number between `0` and the given number\n     * is returned. If `floating` is `true`, or either `lower` or `upper` are\n     * floats, a floating-point number is returned instead of an integer.\n     *\n     * **Note:** JavaScript follows the IEEE-754 standard for resolving\n     * floating-point values which can produce unexpected results.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.7.0\n     * @category Number\n     * @param {number} [lower=0] The lower bound.\n     * @param {number} [upper=1] The upper bound.\n     * @param {boolean} [floating] Specify returning a floating-point number.\n     * @returns {number} Returns the random number.\n     * @example\n     *\n     * _.random(0, 5);\n     * // => an integer between 0 and 5\n     *\n     * _.random(5);\n     * // => also an integer between 0 and 5\n     *\n     * _.random(5, true);\n     * // => a floating-point number between 0 and 5\n     *\n     * _.random(1.2, 5.2);\n     * // => a floating-point number between 1.2 and 5.2\n     */\n    function random(lower, upper, floating) {\n      if (floating && typeof floating != 'boolean' && isIterateeCall(lower, upper, floating)) {\n        upper = floating = undefined;\n      }\n      if (floating === undefined) {\n        if (typeof upper == 'boolean') {\n          floating = upper;\n          upper = undefined;\n        }\n        else if (typeof lower == 'boolean') {\n          floating = lower;\n          lower = undefined;\n        }\n      }\n      if (lower === undefined && upper === undefined) {\n        lower = 0;\n        upper = 1;\n      }\n      else {\n        lower = toFinite(lower);\n        if (upper === undefined) {\n          upper = lower;\n          lower = 0;\n        } else {\n          upper = toFinite(upper);\n        }\n      }\n      if (lower > upper) {\n        var temp = lower;\n        lower = upper;\n        upper = temp;\n      }\n      if (floating || lower % 1 || upper % 1) {\n        var rand = nativeRandom();\n        return nativeMin(lower + (rand * (upper - lower + freeParseFloat('1e-' + ((rand + '').length - 1)))), upper);\n      }\n      return baseRandom(lower, upper);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the camel cased string.\n     * @example\n     *\n     * _.camelCase('Foo Bar');\n     * // => 'fooBar'\n     *\n     * _.camelCase('--foo-bar--');\n     * // => 'fooBar'\n     *\n     * _.camelCase('__FOO_BAR__');\n     * // => 'fooBar'\n     */\n    var camelCase = createCompounder(function(result, word, index) {\n      word = word.toLowerCase();\n      return result + (index ? capitalize(word) : word);\n    });\n\n    /**\n     * Converts the first character of `string` to upper case and the remaining\n     * to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to capitalize.\n     * @returns {string} Returns the capitalized string.\n     * @example\n     *\n     * _.capitalize('FRED');\n     * // => 'Fred'\n     */\n    function capitalize(string) {\n      return upperFirst(toString(string).toLowerCase());\n    }\n\n    /**\n     * Deburrs `string` by converting\n     * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n     * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n     * letters to basic Latin letters and removing\n     * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to deburr.\n     * @returns {string} Returns the deburred string.\n     * @example\n     *\n     * _.deburr('déjà vu');\n     * // => 'deja vu'\n     */\n    function deburr(string) {\n      string = toString(string);\n      return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n    }\n\n    /**\n     * Checks if `string` ends with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=string.length] The position to search up to.\n     * @returns {boolean} Returns `true` if `string` ends with `target`,\n     *  else `false`.\n     * @example\n     *\n     * _.endsWith('abc', 'c');\n     * // => true\n     *\n     * _.endsWith('abc', 'b');\n     * // => false\n     *\n     * _.endsWith('abc', 'b', 2);\n     * // => true\n     */\n    function endsWith(string, target, position) {\n      string = toString(string);\n      target = baseToString(target);\n\n      var length = string.length;\n      position = position === undefined\n        ? length\n        : baseClamp(toInteger(position), 0, length);\n\n      var end = position;\n      position -= target.length;\n      return position >= 0 && string.slice(position, end) == target;\n    }\n\n    /**\n     * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n     * corresponding HTML entities.\n     *\n     * **Note:** No other characters are escaped. To escape additional\n     * characters use a third-party library like [_he_](https://mths.be/he).\n     *\n     * Though the \">\" character is escaped for symmetry, characters like\n     * \">\" and \"/\" don't need escaping in HTML and have no special meaning\n     * unless they're part of a tag or unquoted attribute value. See\n     * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)\n     * (under \"semi-related fun fact\") for more details.\n     *\n     * When working with HTML you should always\n     * [quote attribute values](http://wonko.com/post/html-escaping) to reduce\n     * XSS vectors.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escape('fred, barney, & pebbles');\n     * // => 'fred, barney, &amp; pebbles'\n     */\n    function escape(string) {\n      string = toString(string);\n      return (string && reHasUnescapedHtml.test(string))\n        ? string.replace(reUnescapedHtml, escapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Escapes the `RegExp` special characters \"^\", \"$\", \"\\\", \".\", \"*\", \"+\",\n     * \"?\", \"(\", \")\", \"[\", \"]\", \"{\", \"}\", and \"|\" in `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escapeRegExp('[lodash](https://lodash.com/)');\n     * // => '\\[lodash\\]\\(https://lodash\\.com/\\)'\n     */\n    function escapeRegExp(string) {\n      string = toString(string);\n      return (string && reHasRegExpChar.test(string))\n        ? string.replace(reRegExpChar, '\\\\$&')\n        : string;\n    }\n\n    /**\n     * Converts `string` to\n     * [kebab case](https://en.wikipedia.org/wiki/Letter_case#Special_case_styles).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the kebab cased string.\n     * @example\n     *\n     * _.kebabCase('Foo Bar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('fooBar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('__FOO_BAR__');\n     * // => 'foo-bar'\n     */\n    var kebabCase = createCompounder(function(result, word, index) {\n      return result + (index ? '-' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Converts `string`, as space separated words, to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the lower cased string.\n     * @example\n     *\n     * _.lowerCase('--Foo-Bar--');\n     * // => 'foo bar'\n     *\n     * _.lowerCase('fooBar');\n     * // => 'foo bar'\n     *\n     * _.lowerCase('__FOO_BAR__');\n     * // => 'foo bar'\n     */\n    var lowerCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Converts the first character of `string` to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.lowerFirst('Fred');\n     * // => 'fred'\n     *\n     * _.lowerFirst('FRED');\n     * // => 'fRED'\n     */\n    var lowerFirst = createCaseFirst('toLowerCase');\n\n    /**\n     * Pads `string` on the left and right sides if it's shorter than `length`.\n     * Padding characters are truncated if they can't be evenly divided by `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.pad('abc', 8);\n     * // => '  abc   '\n     *\n     * _.pad('abc', 8, '_-');\n     * // => '_-abc_-_'\n     *\n     * _.pad('abc', 3);\n     * // => 'abc'\n     */\n    function pad(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      if (!length || strLength >= length) {\n        return string;\n      }\n      var mid = (length - strLength) / 2;\n      return (\n        createPadding(nativeFloor(mid), chars) +\n        string +\n        createPadding(nativeCeil(mid), chars)\n      );\n    }\n\n    /**\n     * Pads `string` on the right side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padEnd('abc', 6);\n     * // => 'abc   '\n     *\n     * _.padEnd('abc', 6, '_-');\n     * // => 'abc_-_'\n     *\n     * _.padEnd('abc', 3);\n     * // => 'abc'\n     */\n    function padEnd(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      return (length && strLength < length)\n        ? (string + createPadding(length - strLength, chars))\n        : string;\n    }\n\n    /**\n     * Pads `string` on the left side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padStart('abc', 6);\n     * // => '   abc'\n     *\n     * _.padStart('abc', 6, '_-');\n     * // => '_-_abc'\n     *\n     * _.padStart('abc', 3);\n     * // => 'abc'\n     */\n    function padStart(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      return (length && strLength < length)\n        ? (createPadding(length - strLength, chars) + string)\n        : string;\n    }\n\n    /**\n     * Converts `string` to an integer of the specified radix. If `radix` is\n     * `undefined` or `0`, a `radix` of `10` is used unless `value` is a\n     * hexadecimal, in which case a `radix` of `16` is used.\n     *\n     * **Note:** This method aligns with the\n     * [ES5 implementation](https://es5.github.io/#x15.1.2.2) of `parseInt`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category String\n     * @param {string} string The string to convert.\n     * @param {number} [radix=10] The radix to interpret `value` by.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.parseInt('08');\n     * // => 8\n     *\n     * _.map(['6', '08', '10'], _.parseInt);\n     * // => [6, 8, 10]\n     */\n    function parseInt(string, radix, guard) {\n      if (guard || radix == null) {\n        radix = 0;\n      } else if (radix) {\n        radix = +radix;\n      }\n      return nativeParseInt(toString(string).replace(reTrimStart, ''), radix || 0);\n    }\n\n    /**\n     * Repeats the given string `n` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to repeat.\n     * @param {number} [n=1] The number of times to repeat the string.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the repeated string.\n     * @example\n     *\n     * _.repeat('*', 3);\n     * // => '***'\n     *\n     * _.repeat('abc', 2);\n     * // => 'abcabc'\n     *\n     * _.repeat('abc', 0);\n     * // => ''\n     */\n    function repeat(string, n, guard) {\n      if ((guard ? isIterateeCall(string, n, guard) : n === undefined)) {\n        n = 1;\n      } else {\n        n = toInteger(n);\n      }\n      return baseRepeat(toString(string), n);\n    }\n\n    /**\n     * Replaces matches for `pattern` in `string` with `replacement`.\n     *\n     * **Note:** This method is based on\n     * [`String#replace`](https://mdn.io/String/replace).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to modify.\n     * @param {RegExp|string} pattern The pattern to replace.\n     * @param {Function|string} replacement The match replacement.\n     * @returns {string} Returns the modified string.\n     * @example\n     *\n     * _.replace('Hi Fred', 'Fred', 'Barney');\n     * // => 'Hi Barney'\n     */\n    function replace() {\n      var args = arguments,\n          string = toString(args[0]);\n\n      return args.length < 3 ? string : string.replace(args[1], args[2]);\n    }\n\n    /**\n     * Converts `string` to\n     * [snake case](https://en.wikipedia.org/wiki/Snake_case).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the snake cased string.\n     * @example\n     *\n     * _.snakeCase('Foo Bar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('fooBar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('--FOO-BAR--');\n     * // => 'foo_bar'\n     */\n    var snakeCase = createCompounder(function(result, word, index) {\n      return result + (index ? '_' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Splits `string` by `separator`.\n     *\n     * **Note:** This method is based on\n     * [`String#split`](https://mdn.io/String/split).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to split.\n     * @param {RegExp|string} separator The separator pattern to split by.\n     * @param {number} [limit] The length to truncate results to.\n     * @returns {Array} Returns the string segments.\n     * @example\n     *\n     * _.split('a-b-c', '-', 2);\n     * // => ['a', 'b']\n     */\n    function split(string, separator, limit) {\n      if (limit && typeof limit != 'number' && isIterateeCall(string, separator, limit)) {\n        separator = limit = undefined;\n      }\n      limit = limit === undefined ? MAX_ARRAY_LENGTH : limit >>> 0;\n      if (!limit) {\n        return [];\n      }\n      string = toString(string);\n      if (string && (\n            typeof separator == 'string' ||\n            (separator != null && !isRegExp(separator))\n          )) {\n        separator = baseToString(separator);\n        if (!separator && hasUnicode(string)) {\n          return castSlice(stringToArray(string), 0, limit);\n        }\n      }\n      return string.split(separator, limit);\n    }\n\n    /**\n     * Converts `string` to\n     * [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.1.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the start cased string.\n     * @example\n     *\n     * _.startCase('--foo-bar--');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('fooBar');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('__FOO_BAR__');\n     * // => 'FOO BAR'\n     */\n    var startCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + upperFirst(word);\n    });\n\n    /**\n     * Checks if `string` starts with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=0] The position to search from.\n     * @returns {boolean} Returns `true` if `string` starts with `target`,\n     *  else `false`.\n     * @example\n     *\n     * _.startsWith('abc', 'a');\n     * // => true\n     *\n     * _.startsWith('abc', 'b');\n     * // => false\n     *\n     * _.startsWith('abc', 'b', 1);\n     * // => true\n     */\n    function startsWith(string, target, position) {\n      string = toString(string);\n      position = position == null\n        ? 0\n        : baseClamp(toInteger(position), 0, string.length);\n\n      target = baseToString(target);\n      return string.slice(position, position + target.length) == target;\n    }\n\n    /**\n     * Creates a compiled template function that can interpolate data properties\n     * in \"interpolate\" delimiters, HTML-escape interpolated data properties in\n     * \"escape\" delimiters, and execute JavaScript in \"evaluate\" delimiters. Data\n     * properties may be accessed as free variables in the template. If a setting\n     * object is given, it takes precedence over `_.templateSettings` values.\n     *\n     * **Note:** In the development build `_.template` utilizes\n     * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)\n     * for easier debugging.\n     *\n     * For more information on precompiling templates see\n     * [lodash's custom builds documentation](https://lodash.com/custom-builds).\n     *\n     * For more information on Chrome extension sandboxes see\n     * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The template string.\n     * @param {Object} [options={}] The options object.\n     * @param {RegExp} [options.escape=_.templateSettings.escape]\n     *  The HTML \"escape\" delimiter.\n     * @param {RegExp} [options.evaluate=_.templateSettings.evaluate]\n     *  The \"evaluate\" delimiter.\n     * @param {Object} [options.imports=_.templateSettings.imports]\n     *  An object to import into the template as free variables.\n     * @param {RegExp} [options.interpolate=_.templateSettings.interpolate]\n     *  The \"interpolate\" delimiter.\n     * @param {string} [options.sourceURL='lodash.templateSources[n]']\n     *  The sourceURL of the compiled template.\n     * @param {string} [options.variable='obj']\n     *  The data object variable name.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the compiled template function.\n     * @example\n     *\n     * // Use the \"interpolate\" delimiter to create a compiled template.\n     * var compiled = _.template('hello <%= user %>!');\n     * compiled({ 'user': 'fred' });\n     * // => 'hello fred!'\n     *\n     * // Use the HTML \"escape\" delimiter to escape data property values.\n     * var compiled = _.template('<b><%- value %></b>');\n     * compiled({ 'value': '<script>' });\n     * // => '<b>&lt;script&gt;</b>'\n     *\n     * // Use the \"evaluate\" delimiter to execute JavaScript and generate HTML.\n     * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // Use the internal `print` function in \"evaluate\" delimiters.\n     * var compiled = _.template('<% print(\"hello \" + user); %>!');\n     * compiled({ 'user': 'barney' });\n     * // => 'hello barney!'\n     *\n     * // Use the ES template literal delimiter as an \"interpolate\" delimiter.\n     * // Disable support by replacing the \"interpolate\" delimiter.\n     * var compiled = _.template('hello ${ user }!');\n     * compiled({ 'user': 'pebbles' });\n     * // => 'hello pebbles!'\n     *\n     * // Use backslashes to treat delimiters as plain text.\n     * var compiled = _.template('<%= \"\\\\<%- value %\\\\>\" %>');\n     * compiled({ 'value': 'ignored' });\n     * // => '<%- value %>'\n     *\n     * // Use the `imports` option to import `jQuery` as `jq`.\n     * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';\n     * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // Use the `sourceURL` option to specify a custom sourceURL for the template.\n     * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });\n     * compiled(data);\n     * // => Find the source of \"greeting.jst\" under the Sources tab or Resources panel of the web inspector.\n     *\n     * // Use the `variable` option to ensure a with-statement isn't used in the compiled template.\n     * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });\n     * compiled.source;\n     * // => function(data) {\n     * //   var __t, __p = '';\n     * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';\n     * //   return __p;\n     * // }\n     *\n     * // Use custom template delimiters.\n     * _.templateSettings.interpolate = /{{([\\s\\S]+?)}}/g;\n     * var compiled = _.template('hello {{ user }}!');\n     * compiled({ 'user': 'mustache' });\n     * // => 'hello mustache!'\n     *\n     * // Use the `source` property to inline compiled templates for meaningful\n     * // line numbers in error messages and stack traces.\n     * fs.writeFileSync(path.join(process.cwd(), 'jst.js'), '\\\n     *   var JST = {\\\n     *     \"main\": ' + _.template(mainText).source + '\\\n     *   };\\\n     * ');\n     */\n    function template(string, options, guard) {\n      // Based on John Resig's `tmpl` implementation\n      // (http://ejohn.org/blog/javascript-micro-templating/)\n      // and Laura Doktorova's doT.js (https://github.com/olado/doT).\n      var settings = lodash.templateSettings;\n\n      if (guard && isIterateeCall(string, options, guard)) {\n        options = undefined;\n      }\n      string = toString(string);\n      options = assignInWith({}, options, settings, customDefaultsAssignIn);\n\n      var imports = assignInWith({}, options.imports, settings.imports, customDefaultsAssignIn),\n          importsKeys = keys(imports),\n          importsValues = baseValues(imports, importsKeys);\n\n      var isEscaping,\n          isEvaluating,\n          index = 0,\n          interpolate = options.interpolate || reNoMatch,\n          source = \"__p += '\";\n\n      // Compile the regexp to match each delimiter.\n      var reDelimiters = RegExp(\n        (options.escape || reNoMatch).source + '|' +\n        interpolate.source + '|' +\n        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +\n        (options.evaluate || reNoMatch).source + '|$'\n      , 'g');\n\n      // Use a sourceURL for easier debugging.\n      // The sourceURL gets injected into the source that's eval-ed, so be careful\n      // with lookup (in case of e.g. prototype pollution), and strip newlines if any.\n      // A newline wouldn't be a valid sourceURL anyway, and it'd enable code injection.\n      var sourceURL = '//# sourceURL=' +\n        (hasOwnProperty.call(options, 'sourceURL')\n          ? (options.sourceURL + '').replace(/[\\r\\n]/g, ' ')\n          : ('lodash.templateSources[' + (++templateCounter) + ']')\n        ) + '\\n';\n\n      string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {\n        interpolateValue || (interpolateValue = esTemplateValue);\n\n        // Escape characters that can't be included in string literals.\n        source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n\n        // Replace delimiters with snippets.\n        if (escapeValue) {\n          isEscaping = true;\n          source += \"' +\\n__e(\" + escapeValue + \") +\\n'\";\n        }\n        if (evaluateValue) {\n          isEvaluating = true;\n          source += \"';\\n\" + evaluateValue + \";\\n__p += '\";\n        }\n        if (interpolateValue) {\n          source += \"' +\\n((__t = (\" + interpolateValue + \")) == null ? '' : __t) +\\n'\";\n        }\n        index = offset + match.length;\n\n        // The JS engine embedded in Adobe products needs `match` returned in\n        // order to produce the correct `offset` value.\n        return match;\n      });\n\n      source += \"';\\n\";\n\n      // If `variable` is not specified wrap a with-statement around the generated\n      // code to add the data object to the top of the scope chain.\n      // Like with sourceURL, we take care to not check the option's prototype,\n      // as this configuration is a code injection vector.\n      var variable = hasOwnProperty.call(options, 'variable') && options.variable;\n      if (!variable) {\n        source = 'with (obj) {\\n' + source + '\\n}\\n';\n      }\n      // Cleanup code by stripping empty strings.\n      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)\n        .replace(reEmptyStringMiddle, '$1')\n        .replace(reEmptyStringTrailing, '$1;');\n\n      // Frame code as the function body.\n      source = 'function(' + (variable || 'obj') + ') {\\n' +\n        (variable\n          ? ''\n          : 'obj || (obj = {});\\n'\n        ) +\n        \"var __t, __p = ''\" +\n        (isEscaping\n           ? ', __e = _.escape'\n           : ''\n        ) +\n        (isEvaluating\n          ? ', __j = Array.prototype.join;\\n' +\n            \"function print() { __p += __j.call(arguments, '') }\\n\"\n          : ';\\n'\n        ) +\n        source +\n        'return __p\\n}';\n\n      var result = attempt(function() {\n        return Function(importsKeys, sourceURL + 'return ' + source)\n          .apply(undefined, importsValues);\n      });\n\n      // Provide the compiled function's source by its `toString` method or\n      // the `source` property as a convenience for inlining compiled templates.\n      result.source = source;\n      if (isError(result)) {\n        throw result;\n      }\n      return result;\n    }\n\n    /**\n     * Converts `string`, as a whole, to lower case just like\n     * [String#toLowerCase](https://mdn.io/toLowerCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the lower cased string.\n     * @example\n     *\n     * _.toLower('--Foo-Bar--');\n     * // => '--foo-bar--'\n     *\n     * _.toLower('fooBar');\n     * // => 'foobar'\n     *\n     * _.toLower('__FOO_BAR__');\n     * // => '__foo_bar__'\n     */\n    function toLower(value) {\n      return toString(value).toLowerCase();\n    }\n\n    /**\n     * Converts `string`, as a whole, to upper case just like\n     * [String#toUpperCase](https://mdn.io/toUpperCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the upper cased string.\n     * @example\n     *\n     * _.toUpper('--foo-bar--');\n     * // => '--FOO-BAR--'\n     *\n     * _.toUpper('fooBar');\n     * // => 'FOOBAR'\n     *\n     * _.toUpper('__foo_bar__');\n     * // => '__FOO_BAR__'\n     */\n    function toUpper(value) {\n      return toString(value).toUpperCase();\n    }\n\n    /**\n     * Removes leading and trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trim('  abc  ');\n     * // => 'abc'\n     *\n     * _.trim('-_-abc-_-', '_-');\n     * // => 'abc'\n     *\n     * _.map(['  foo  ', '  bar  '], _.trim);\n     * // => ['foo', 'bar']\n     */\n    function trim(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.replace(reTrim, '');\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          chrSymbols = stringToArray(chars),\n          start = charsStartIndex(strSymbols, chrSymbols),\n          end = charsEndIndex(strSymbols, chrSymbols) + 1;\n\n      return castSlice(strSymbols, start, end).join('');\n    }\n\n    /**\n     * Removes trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimEnd('  abc  ');\n     * // => '  abc'\n     *\n     * _.trimEnd('-_-abc-_-', '_-');\n     * // => '-_-abc'\n     */\n    function trimEnd(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.replace(reTrimEnd, '');\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          end = charsEndIndex(strSymbols, stringToArray(chars)) + 1;\n\n      return castSlice(strSymbols, 0, end).join('');\n    }\n\n    /**\n     * Removes leading whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimStart('  abc  ');\n     * // => 'abc  '\n     *\n     * _.trimStart('-_-abc-_-', '_-');\n     * // => 'abc-_-'\n     */\n    function trimStart(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.replace(reTrimStart, '');\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          start = charsStartIndex(strSymbols, stringToArray(chars));\n\n      return castSlice(strSymbols, start).join('');\n    }\n\n    /**\n     * Truncates `string` if it's longer than the given maximum string length.\n     * The last characters of the truncated string are replaced with the omission\n     * string which defaults to \"...\".\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to truncate.\n     * @param {Object} [options={}] The options object.\n     * @param {number} [options.length=30] The maximum string length.\n     * @param {string} [options.omission='...'] The string to indicate text is omitted.\n     * @param {RegExp|string} [options.separator] The separator pattern to truncate to.\n     * @returns {string} Returns the truncated string.\n     * @example\n     *\n     * _.truncate('hi-diddly-ho there, neighborino');\n     * // => 'hi-diddly-ho there, neighbo...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': ' '\n     * });\n     * // => 'hi-diddly-ho there,...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': /,? +/\n     * });\n     * // => 'hi-diddly-ho there...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'omission': ' [...]'\n     * });\n     * // => 'hi-diddly-ho there, neig [...]'\n     */\n    function truncate(string, options) {\n      var length = DEFAULT_TRUNC_LENGTH,\n          omission = DEFAULT_TRUNC_OMISSION;\n\n      if (isObject(options)) {\n        var separator = 'separator' in options ? options.separator : separator;\n        length = 'length' in options ? toInteger(options.length) : length;\n        omission = 'omission' in options ? baseToString(options.omission) : omission;\n      }\n      string = toString(string);\n\n      var strLength = string.length;\n      if (hasUnicode(string)) {\n        var strSymbols = stringToArray(string);\n        strLength = strSymbols.length;\n      }\n      if (length >= strLength) {\n        return string;\n      }\n      var end = length - stringSize(omission);\n      if (end < 1) {\n        return omission;\n      }\n      var result = strSymbols\n        ? castSlice(strSymbols, 0, end).join('')\n        : string.slice(0, end);\n\n      if (separator === undefined) {\n        return result + omission;\n      }\n      if (strSymbols) {\n        end += (result.length - end);\n      }\n      if (isRegExp(separator)) {\n        if (string.slice(end).search(separator)) {\n          var match,\n              substring = result;\n\n          if (!separator.global) {\n            separator = RegExp(separator.source, toString(reFlags.exec(separator)) + 'g');\n          }\n          separator.lastIndex = 0;\n          while ((match = separator.exec(substring))) {\n            var newEnd = match.index;\n          }\n          result = result.slice(0, newEnd === undefined ? end : newEnd);\n        }\n      } else if (string.indexOf(baseToString(separator), end) != end) {\n        var index = result.lastIndexOf(separator);\n        if (index > -1) {\n          result = result.slice(0, index);\n        }\n      }\n      return result + omission;\n    }\n\n    /**\n     * The inverse of `_.escape`; this method converts the HTML entities\n     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to\n     * their corresponding characters.\n     *\n     * **Note:** No other HTML entities are unescaped. To unescape additional\n     * HTML entities use a third-party library like [_he_](https://mths.be/he).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.6.0\n     * @category String\n     * @param {string} [string=''] The string to unescape.\n     * @returns {string} Returns the unescaped string.\n     * @example\n     *\n     * _.unescape('fred, barney, &amp; pebbles');\n     * // => 'fred, barney, & pebbles'\n     */\n    function unescape(string) {\n      string = toString(string);\n      return (string && reHasEscapedHtml.test(string))\n        ? string.replace(reEscapedHtml, unescapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Converts `string`, as space separated words, to upper case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the upper cased string.\n     * @example\n     *\n     * _.upperCase('--foo-bar');\n     * // => 'FOO BAR'\n     *\n     * _.upperCase('fooBar');\n     * // => 'FOO BAR'\n     *\n     * _.upperCase('__foo_bar__');\n     * // => 'FOO BAR'\n     */\n    var upperCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + word.toUpperCase();\n    });\n\n    /**\n     * Converts the first character of `string` to upper case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.upperFirst('fred');\n     * // => 'Fred'\n     *\n     * _.upperFirst('FRED');\n     * // => 'FRED'\n     */\n    var upperFirst = createCaseFirst('toUpperCase');\n\n    /**\n     * Splits `string` into an array of its words.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {RegExp|string} [pattern] The pattern to match words.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the words of `string`.\n     * @example\n     *\n     * _.words('fred, barney, & pebbles');\n     * // => ['fred', 'barney', 'pebbles']\n     *\n     * _.words('fred, barney, & pebbles', /[^, ]+/g);\n     * // => ['fred', 'barney', '&', 'pebbles']\n     */\n    function words(string, pattern, guard) {\n      string = toString(string);\n      pattern = guard ? undefined : pattern;\n\n      if (pattern === undefined) {\n        return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n      }\n      return string.match(pattern) || [];\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Attempts to invoke `func`, returning either the result or the caught error\n     * object. Any additional arguments are provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Function} func The function to attempt.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {*} Returns the `func` result or error object.\n     * @example\n     *\n     * // Avoid throwing errors for invalid selectors.\n     * var elements = _.attempt(function(selector) {\n     *   return document.querySelectorAll(selector);\n     * }, '>_>');\n     *\n     * if (_.isError(elements)) {\n     *   elements = [];\n     * }\n     */\n    var attempt = baseRest(function(func, args) {\n      try {\n        return apply(func, undefined, args);\n      } catch (e) {\n        return isError(e) ? e : new Error(e);\n      }\n    });\n\n    /**\n     * Binds methods of an object to the object itself, overwriting the existing\n     * method.\n     *\n     * **Note:** This method doesn't set the \"length\" property of bound functions.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {Object} object The object to bind and assign the bound methods to.\n     * @param {...(string|string[])} methodNames The object method names to bind.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var view = {\n     *   'label': 'docs',\n     *   'click': function() {\n     *     console.log('clicked ' + this.label);\n     *   }\n     * };\n     *\n     * _.bindAll(view, ['click']);\n     * jQuery(element).on('click', view.click);\n     * // => Logs 'clicked docs' when clicked.\n     */\n    var bindAll = flatRest(function(object, methodNames) {\n      arrayEach(methodNames, function(key) {\n        key = toKey(key);\n        baseAssignValue(object, key, bind(object[key], object));\n      });\n      return object;\n    });\n\n    /**\n     * Creates a function that iterates over `pairs` and invokes the corresponding\n     * function of the first predicate to return truthy. The predicate-function\n     * pairs are invoked with the `this` binding and arguments of the created\n     * function.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {Array} pairs The predicate-function pairs.\n     * @returns {Function} Returns the new composite function.\n     * @example\n     *\n     * var func = _.cond([\n     *   [_.matches({ 'a': 1 }),           _.constant('matches A')],\n     *   [_.conforms({ 'b': _.isNumber }), _.constant('matches B')],\n     *   [_.stubTrue,                      _.constant('no match')]\n     * ]);\n     *\n     * func({ 'a': 1, 'b': 2 });\n     * // => 'matches A'\n     *\n     * func({ 'a': 0, 'b': 1 });\n     * // => 'matches B'\n     *\n     * func({ 'a': '1', 'b': '2' });\n     * // => 'no match'\n     */\n    function cond(pairs) {\n      var length = pairs == null ? 0 : pairs.length,\n          toIteratee = getIteratee();\n\n      pairs = !length ? [] : arrayMap(pairs, function(pair) {\n        if (typeof pair[1] != 'function') {\n          throw new TypeError(FUNC_ERROR_TEXT);\n        }\n        return [toIteratee(pair[0]), pair[1]];\n      });\n\n      return baseRest(function(args) {\n        var index = -1;\n        while (++index < length) {\n          var pair = pairs[index];\n          if (apply(pair[0], this, args)) {\n            return apply(pair[1], this, args);\n          }\n        }\n      });\n    }\n\n    /**\n     * Creates a function that invokes the predicate properties of `source` with\n     * the corresponding property values of a given object, returning `true` if\n     * all predicates return truthy, else `false`.\n     *\n     * **Note:** The created function is equivalent to `_.conformsTo` with\n     * `source` partially applied.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 2, 'b': 1 },\n     *   { 'a': 1, 'b': 2 }\n     * ];\n     *\n     * _.filter(objects, _.conforms({ 'b': function(n) { return n > 1; } }));\n     * // => [{ 'a': 1, 'b': 2 }]\n     */\n    function conforms(source) {\n      return baseConforms(baseClone(source, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that returns `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Util\n     * @param {*} value The value to return from the new function.\n     * @returns {Function} Returns the new constant function.\n     * @example\n     *\n     * var objects = _.times(2, _.constant({ 'a': 1 }));\n     *\n     * console.log(objects);\n     * // => [{ 'a': 1 }, { 'a': 1 }]\n     *\n     * console.log(objects[0] === objects[1]);\n     * // => true\n     */\n    function constant(value) {\n      return function() {\n        return value;\n      };\n    }\n\n    /**\n     * Checks `value` to determine whether a default value should be returned in\n     * its place. The `defaultValue` is returned if `value` is `NaN`, `null`,\n     * or `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.14.0\n     * @category Util\n     * @param {*} value The value to check.\n     * @param {*} defaultValue The default value.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * _.defaultTo(1, 10);\n     * // => 1\n     *\n     * _.defaultTo(undefined, 10);\n     * // => 10\n     */\n    function defaultTo(value, defaultValue) {\n      return (value == null || value !== value) ? defaultValue : value;\n    }\n\n    /**\n     * Creates a function that returns the result of invoking the given functions\n     * with the `this` binding of the created function, where each successive\n     * invocation is supplied the return value of the previous.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [funcs] The functions to invoke.\n     * @returns {Function} Returns the new composite function.\n     * @see _.flowRight\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flow([_.add, square]);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flow = createFlow();\n\n    /**\n     * This method is like `_.flow` except that it creates a function that\n     * invokes the given functions from right to left.\n     *\n     * @static\n     * @since 3.0.0\n     * @memberOf _\n     * @category Util\n     * @param {...(Function|Function[])} [funcs] The functions to invoke.\n     * @returns {Function} Returns the new composite function.\n     * @see _.flow\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flowRight([square, _.add]);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flowRight = createFlow(true);\n\n    /**\n     * This method returns the first argument it receives.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {*} value Any value.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     *\n     * console.log(_.identity(object) === object);\n     * // => true\n     */\n    function identity(value) {\n      return value;\n    }\n\n    /**\n     * Creates a function that invokes `func` with the arguments of the created\n     * function. If `func` is a property name, the created function returns the\n     * property value for a given element. If `func` is an array or object, the\n     * created function returns `true` for elements that contain the equivalent\n     * source properties, otherwise it returns `false`.\n     *\n     * @static\n     * @since 4.0.0\n     * @memberOf _\n     * @category Util\n     * @param {*} [func=_.identity] The value to convert to a callback.\n     * @returns {Function} Returns the callback.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.filter(users, _.iteratee({ 'user': 'barney', 'active': true }));\n     * // => [{ 'user': 'barney', 'age': 36, 'active': true }]\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.filter(users, _.iteratee(['user', 'fred']));\n     * // => [{ 'user': 'fred', 'age': 40 }]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.map(users, _.iteratee('user'));\n     * // => ['barney', 'fred']\n     *\n     * // Create custom iteratee shorthands.\n     * _.iteratee = _.wrap(_.iteratee, function(iteratee, func) {\n     *   return !_.isRegExp(func) ? iteratee(func) : function(string) {\n     *     return func.test(string);\n     *   };\n     * });\n     *\n     * _.filter(['abc', 'def'], /ef/);\n     * // => ['def']\n     */\n    function iteratee(func) {\n      return baseIteratee(typeof func == 'function' ? func : baseClone(func, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that performs a partial deep comparison between a given\n     * object and `source`, returning `true` if the given object has equivalent\n     * property values, else `false`.\n     *\n     * **Note:** The created function is equivalent to `_.isMatch` with `source`\n     * partially applied.\n     *\n     * Partial comparisons will match empty array and empty object `source`\n     * values against any array or object value, respectively. See `_.isEqual`\n     * for a list of supported value comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 1, 'b': 2, 'c': 3 },\n     *   { 'a': 4, 'b': 5, 'c': 6 }\n     * ];\n     *\n     * _.filter(objects, _.matches({ 'a': 4, 'c': 6 }));\n     * // => [{ 'a': 4, 'b': 5, 'c': 6 }]\n     */\n    function matches(source) {\n      return baseMatches(baseClone(source, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that performs a partial deep comparison between the\n     * value at `path` of a given object to `srcValue`, returning `true` if the\n     * object value is equivalent, else `false`.\n     *\n     * **Note:** Partial comparisons will match empty array and empty object\n     * `srcValue` values against any array or object value, respectively. See\n     * `_.isEqual` for a list of supported value comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Util\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 1, 'b': 2, 'c': 3 },\n     *   { 'a': 4, 'b': 5, 'c': 6 }\n     * ];\n     *\n     * _.find(objects, _.matchesProperty('a', 4));\n     * // => { 'a': 4, 'b': 5, 'c': 6 }\n     */\n    function matchesProperty(path, srcValue) {\n      return baseMatchesProperty(path, baseClone(srcValue, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that invokes the method at `path` of a given object.\n     * Any additional arguments are provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Util\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new invoker function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': _.constant(2) } },\n     *   { 'a': { 'b': _.constant(1) } }\n     * ];\n     *\n     * _.map(objects, _.method('a.b'));\n     * // => [2, 1]\n     *\n     * _.map(objects, _.method(['a', 'b']));\n     * // => [2, 1]\n     */\n    var method = baseRest(function(path, args) {\n      return function(object) {\n        return baseInvoke(object, path, args);\n      };\n    });\n\n    /**\n     * The opposite of `_.method`; this method creates a function that invokes\n     * the method at a given path of `object`. Any additional arguments are\n     * provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Util\n     * @param {Object} object The object to query.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new invoker function.\n     * @example\n     *\n     * var array = _.times(3, _.constant),\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.methodOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.methodOf(object));\n     * // => [2, 0]\n     */\n    var methodOf = baseRest(function(object, args) {\n      return function(path) {\n        return baseInvoke(object, path, args);\n      };\n    });\n\n    /**\n     * Adds all own enumerable string keyed function properties of a source\n     * object to the destination object. If `object` is a function, then methods\n     * are added to its prototype as well.\n     *\n     * **Note:** Use `_.runInContext` to create a pristine `lodash` function to\n     * avoid conflicts caused by modifying the original.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {Function|Object} [object=lodash] The destination object.\n     * @param {Object} source The object of functions to add.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.chain=true] Specify whether mixins are chainable.\n     * @returns {Function|Object} Returns `object`.\n     * @example\n     *\n     * function vowels(string) {\n     *   return _.filter(string, function(v) {\n     *     return /[aeiou]/i.test(v);\n     *   });\n     * }\n     *\n     * _.mixin({ 'vowels': vowels });\n     * _.vowels('fred');\n     * // => ['e']\n     *\n     * _('fred').vowels().value();\n     * // => ['e']\n     *\n     * _.mixin({ 'vowels': vowels }, { 'chain': false });\n     * _('fred').vowels();\n     * // => ['e']\n     */\n    function mixin(object, source, options) {\n      var props = keys(source),\n          methodNames = baseFunctions(source, props);\n\n      if (options == null &&\n          !(isObject(source) && (methodNames.length || !props.length))) {\n        options = source;\n        source = object;\n        object = this;\n        methodNames = baseFunctions(source, keys(source));\n      }\n      var chain = !(isObject(options) && 'chain' in options) || !!options.chain,\n          isFunc = isFunction(object);\n\n      arrayEach(methodNames, function(methodName) {\n        var func = source[methodName];\n        object[methodName] = func;\n        if (isFunc) {\n          object.prototype[methodName] = function() {\n            var chainAll = this.__chain__;\n            if (chain || chainAll) {\n              var result = object(this.__wrapped__),\n                  actions = result.__actions__ = copyArray(this.__actions__);\n\n              actions.push({ 'func': func, 'args': arguments, 'thisArg': object });\n              result.__chain__ = chainAll;\n              return result;\n            }\n            return func.apply(object, arrayPush([this.value()], arguments));\n          };\n        }\n      });\n\n      return object;\n    }\n\n    /**\n     * Reverts the `_` variable to its previous value and returns a reference to\n     * the `lodash` function.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @returns {Function} Returns the `lodash` function.\n     * @example\n     *\n     * var lodash = _.noConflict();\n     */\n    function noConflict() {\n      if (root._ === this) {\n        root._ = oldDash;\n      }\n      return this;\n    }\n\n    /**\n     * This method returns `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.3.0\n     * @category Util\n     * @example\n     *\n     * _.times(2, _.noop);\n     * // => [undefined, undefined]\n     */\n    function noop() {\n      // No operation performed.\n    }\n\n    /**\n     * Creates a function that gets the argument at index `n`. If `n` is negative,\n     * the nth argument from the end is returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {number} [n=0] The index of the argument to return.\n     * @returns {Function} Returns the new pass-thru function.\n     * @example\n     *\n     * var func = _.nthArg(1);\n     * func('a', 'b', 'c', 'd');\n     * // => 'b'\n     *\n     * var func = _.nthArg(-2);\n     * func('a', 'b', 'c', 'd');\n     * // => 'c'\n     */\n    function nthArg(n) {\n      n = toInteger(n);\n      return baseRest(function(args) {\n        return baseNth(args, n);\n      });\n    }\n\n    /**\n     * Creates a function that invokes `iteratees` with the arguments it receives\n     * and returns their results.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [iteratees=[_.identity]]\n     *  The iteratees to invoke.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.over([Math.max, Math.min]);\n     *\n     * func(1, 2, 3, 4);\n     * // => [4, 1]\n     */\n    var over = createOver(arrayMap);\n\n    /**\n     * Creates a function that checks if **all** of the `predicates` return\n     * truthy when invoked with the arguments it receives.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [predicates=[_.identity]]\n     *  The predicates to check.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.overEvery([Boolean, isFinite]);\n     *\n     * func('1');\n     * // => true\n     *\n     * func(null);\n     * // => false\n     *\n     * func(NaN);\n     * // => false\n     */\n    var overEvery = createOver(arrayEvery);\n\n    /**\n     * Creates a function that checks if **any** of the `predicates` return\n     * truthy when invoked with the arguments it receives.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [predicates=[_.identity]]\n     *  The predicates to check.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.overSome([Boolean, isFinite]);\n     *\n     * func('1');\n     * // => true\n     *\n     * func(null);\n     * // => true\n     *\n     * func(NaN);\n     * // => false\n     */\n    var overSome = createOver(arraySome);\n\n    /**\n     * Creates a function that returns the value at `path` of a given object.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Util\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new accessor function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': 2 } },\n     *   { 'a': { 'b': 1 } }\n     * ];\n     *\n     * _.map(objects, _.property('a.b'));\n     * // => [2, 1]\n     *\n     * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n     * // => [1, 2]\n     */\n    function property(path) {\n      return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n    }\n\n    /**\n     * The opposite of `_.property`; this method creates a function that returns\n     * the value at a given path of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Object} object The object to query.\n     * @returns {Function} Returns the new accessor function.\n     * @example\n     *\n     * var array = [0, 1, 2],\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.propertyOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.propertyOf(object));\n     * // => [2, 0]\n     */\n    function propertyOf(object) {\n      return function(path) {\n        return object == null ? undefined : baseGet(object, path);\n      };\n    }\n\n    /**\n     * Creates an array of numbers (positive and/or negative) progressing from\n     * `start` up to, but not including, `end`. A step of `-1` is used if a negative\n     * `start` is specified without an `end` or `step`. If `end` is not specified,\n     * it's set to `start` with `start` then set to `0`.\n     *\n     * **Note:** JavaScript follows the IEEE-754 standard for resolving\n     * floating-point values which can produce unexpected results.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns the range of numbers.\n     * @see _.inRange, _.rangeRight\n     * @example\n     *\n     * _.range(4);\n     * // => [0, 1, 2, 3]\n     *\n     * _.range(-4);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 5);\n     * // => [1, 2, 3, 4]\n     *\n     * _.range(0, 20, 5);\n     * // => [0, 5, 10, 15]\n     *\n     * _.range(0, -4, -1);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.range(0);\n     * // => []\n     */\n    var range = createRange();\n\n    /**\n     * This method is like `_.range` except that it populates values in\n     * descending order.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns the range of numbers.\n     * @see _.inRange, _.range\n     * @example\n     *\n     * _.rangeRight(4);\n     * // => [3, 2, 1, 0]\n     *\n     * _.rangeRight(-4);\n     * // => [-3, -2, -1, 0]\n     *\n     * _.rangeRight(1, 5);\n     * // => [4, 3, 2, 1]\n     *\n     * _.rangeRight(0, 20, 5);\n     * // => [15, 10, 5, 0]\n     *\n     * _.rangeRight(0, -4, -1);\n     * // => [-3, -2, -1, 0]\n     *\n     * _.rangeRight(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.rangeRight(0);\n     * // => []\n     */\n    var rangeRight = createRange(true);\n\n    /**\n     * This method returns a new empty array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {Array} Returns the new empty array.\n     * @example\n     *\n     * var arrays = _.times(2, _.stubArray);\n     *\n     * console.log(arrays);\n     * // => [[], []]\n     *\n     * console.log(arrays[0] === arrays[1]);\n     * // => false\n     */\n    function stubArray() {\n      return [];\n    }\n\n    /**\n     * This method returns `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {boolean} Returns `false`.\n     * @example\n     *\n     * _.times(2, _.stubFalse);\n     * // => [false, false]\n     */\n    function stubFalse() {\n      return false;\n    }\n\n    /**\n     * This method returns a new empty object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {Object} Returns the new empty object.\n     * @example\n     *\n     * var objects = _.times(2, _.stubObject);\n     *\n     * console.log(objects);\n     * // => [{}, {}]\n     *\n     * console.log(objects[0] === objects[1]);\n     * // => false\n     */\n    function stubObject() {\n      return {};\n    }\n\n    /**\n     * This method returns an empty string.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {string} Returns the empty string.\n     * @example\n     *\n     * _.times(2, _.stubString);\n     * // => ['', '']\n     */\n    function stubString() {\n      return '';\n    }\n\n    /**\n     * This method returns `true`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {boolean} Returns `true`.\n     * @example\n     *\n     * _.times(2, _.stubTrue);\n     * // => [true, true]\n     */\n    function stubTrue() {\n      return true;\n    }\n\n    /**\n     * Invokes the iteratee `n` times, returning an array of the results of\n     * each invocation. The iteratee is invoked with one argument; (index).\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {number} n The number of times to invoke `iteratee`.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * _.times(3, String);\n     * // => ['0', '1', '2']\n     *\n     *  _.times(4, _.constant(0));\n     * // => [0, 0, 0, 0]\n     */\n    function times(n, iteratee) {\n      n = toInteger(n);\n      if (n < 1 || n > MAX_SAFE_INTEGER) {\n        return [];\n      }\n      var index = MAX_ARRAY_LENGTH,\n          length = nativeMin(n, MAX_ARRAY_LENGTH);\n\n      iteratee = getIteratee(iteratee);\n      n -= MAX_ARRAY_LENGTH;\n\n      var result = baseTimes(length, iteratee);\n      while (++index < n) {\n        iteratee(index);\n      }\n      return result;\n    }\n\n    /**\n     * Converts `value` to a property path array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {*} value The value to convert.\n     * @returns {Array} Returns the new property path array.\n     * @example\n     *\n     * _.toPath('a.b.c');\n     * // => ['a', 'b', 'c']\n     *\n     * _.toPath('a[0].b.c');\n     * // => ['a', '0', 'b', 'c']\n     */\n    function toPath(value) {\n      if (isArray(value)) {\n        return arrayMap(value, toKey);\n      }\n      return isSymbol(value) ? [value] : copyArray(stringToPath(toString(value)));\n    }\n\n    /**\n     * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {string} [prefix=''] The value to prefix the ID with.\n     * @returns {string} Returns the unique ID.\n     * @example\n     *\n     * _.uniqueId('contact_');\n     * // => 'contact_104'\n     *\n     * _.uniqueId();\n     * // => '105'\n     */\n    function uniqueId(prefix) {\n      var id = ++idCounter;\n      return toString(prefix) + id;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Adds two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.4.0\n     * @category Math\n     * @param {number} augend The first number in an addition.\n     * @param {number} addend The second number in an addition.\n     * @returns {number} Returns the total.\n     * @example\n     *\n     * _.add(6, 4);\n     * // => 10\n     */\n    var add = createMathOperation(function(augend, addend) {\n      return augend + addend;\n    }, 0);\n\n    /**\n     * Computes `number` rounded up to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round up.\n     * @param {number} [precision=0] The precision to round up to.\n     * @returns {number} Returns the rounded up number.\n     * @example\n     *\n     * _.ceil(4.006);\n     * // => 5\n     *\n     * _.ceil(6.004, 2);\n     * // => 6.01\n     *\n     * _.ceil(6040, -2);\n     * // => 6100\n     */\n    var ceil = createRound('ceil');\n\n    /**\n     * Divide two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {number} dividend The first number in a division.\n     * @param {number} divisor The second number in a division.\n     * @returns {number} Returns the quotient.\n     * @example\n     *\n     * _.divide(6, 4);\n     * // => 1.5\n     */\n    var divide = createMathOperation(function(dividend, divisor) {\n      return dividend / divisor;\n    }, 1);\n\n    /**\n     * Computes `number` rounded down to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round down.\n     * @param {number} [precision=0] The precision to round down to.\n     * @returns {number} Returns the rounded down number.\n     * @example\n     *\n     * _.floor(4.006);\n     * // => 4\n     *\n     * _.floor(0.046, 2);\n     * // => 0.04\n     *\n     * _.floor(4060, -2);\n     * // => 4000\n     */\n    var floor = createRound('floor');\n\n    /**\n     * Computes the maximum value of `array`. If `array` is empty or falsey,\n     * `undefined` is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * _.max([4, 2, 8, 6]);\n     * // => 8\n     *\n     * _.max([]);\n     * // => undefined\n     */\n    function max(array) {\n      return (array && array.length)\n        ? baseExtremum(array, identity, baseGt)\n        : undefined;\n    }\n\n    /**\n     * This method is like `_.max` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * the value is ranked. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * var objects = [{ 'n': 1 }, { 'n': 2 }];\n     *\n     * _.maxBy(objects, function(o) { return o.n; });\n     * // => { 'n': 2 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.maxBy(objects, 'n');\n     * // => { 'n': 2 }\n     */\n    function maxBy(array, iteratee) {\n      return (array && array.length)\n        ? baseExtremum(array, getIteratee(iteratee, 2), baseGt)\n        : undefined;\n    }\n\n    /**\n     * Computes the mean of the values in `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {number} Returns the mean.\n     * @example\n     *\n     * _.mean([4, 2, 8, 6]);\n     * // => 5\n     */\n    function mean(array) {\n      return baseMean(array, identity);\n    }\n\n    /**\n     * This method is like `_.mean` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the value to be averaged.\n     * The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the mean.\n     * @example\n     *\n     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n     *\n     * _.meanBy(objects, function(o) { return o.n; });\n     * // => 5\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.meanBy(objects, 'n');\n     * // => 5\n     */\n    function meanBy(array, iteratee) {\n      return baseMean(array, getIteratee(iteratee, 2));\n    }\n\n    /**\n     * Computes the minimum value of `array`. If `array` is empty or falsey,\n     * `undefined` is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * _.min([4, 2, 8, 6]);\n     * // => 2\n     *\n     * _.min([]);\n     * // => undefined\n     */\n    function min(array) {\n      return (array && array.length)\n        ? baseExtremum(array, identity, baseLt)\n        : undefined;\n    }\n\n    /**\n     * This method is like `_.min` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * the value is ranked. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * var objects = [{ 'n': 1 }, { 'n': 2 }];\n     *\n     * _.minBy(objects, function(o) { return o.n; });\n     * // => { 'n': 1 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.minBy(objects, 'n');\n     * // => { 'n': 1 }\n     */\n    function minBy(array, iteratee) {\n      return (array && array.length)\n        ? baseExtremum(array, getIteratee(iteratee, 2), baseLt)\n        : undefined;\n    }\n\n    /**\n     * Multiply two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {number} multiplier The first number in a multiplication.\n     * @param {number} multiplicand The second number in a multiplication.\n     * @returns {number} Returns the product.\n     * @example\n     *\n     * _.multiply(6, 4);\n     * // => 24\n     */\n    var multiply = createMathOperation(function(multiplier, multiplicand) {\n      return multiplier * multiplicand;\n    }, 1);\n\n    /**\n     * Computes `number` rounded to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round.\n     * @param {number} [precision=0] The precision to round to.\n     * @returns {number} Returns the rounded number.\n     * @example\n     *\n     * _.round(4.006);\n     * // => 4\n     *\n     * _.round(4.006, 2);\n     * // => 4.01\n     *\n     * _.round(4060, -2);\n     * // => 4100\n     */\n    var round = createRound('round');\n\n    /**\n     * Subtract two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {number} minuend The first number in a subtraction.\n     * @param {number} subtrahend The second number in a subtraction.\n     * @returns {number} Returns the difference.\n     * @example\n     *\n     * _.subtract(6, 4);\n     * // => 2\n     */\n    var subtract = createMathOperation(function(minuend, subtrahend) {\n      return minuend - subtrahend;\n    }, 0);\n\n    /**\n     * Computes the sum of the values in `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.4.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * _.sum([4, 2, 8, 6]);\n     * // => 20\n     */\n    function sum(array) {\n      return (array && array.length)\n        ? baseSum(array, identity)\n        : 0;\n    }\n\n    /**\n     * This method is like `_.sum` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the value to be summed.\n     * The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n     *\n     * _.sumBy(objects, function(o) { return o.n; });\n     * // => 20\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sumBy(objects, 'n');\n     * // => 20\n     */\n    function sumBy(array, iteratee) {\n      return (array && array.length)\n        ? baseSum(array, getIteratee(iteratee, 2))\n        : 0;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    // Add methods that return wrapped values in chain sequences.\n    lodash.after = after;\n    lodash.ary = ary;\n    lodash.assign = assign;\n    lodash.assignIn = assignIn;\n    lodash.assignInWith = assignInWith;\n    lodash.assignWith = assignWith;\n    lodash.at = at;\n    lodash.before = before;\n    lodash.bind = bind;\n    lodash.bindAll = bindAll;\n    lodash.bindKey = bindKey;\n    lodash.castArray = castArray;\n    lodash.chain = chain;\n    lodash.chunk = chunk;\n    lodash.compact = compact;\n    lodash.concat = concat;\n    lodash.cond = cond;\n    lodash.conforms = conforms;\n    lodash.constant = constant;\n    lodash.countBy = countBy;\n    lodash.create = create;\n    lodash.curry = curry;\n    lodash.curryRight = curryRight;\n    lodash.debounce = debounce;\n    lodash.defaults = defaults;\n    lodash.defaultsDeep = defaultsDeep;\n    lodash.defer = defer;\n    lodash.delay = delay;\n    lodash.difference = difference;\n    lodash.differenceBy = differenceBy;\n    lodash.differenceWith = differenceWith;\n    lodash.drop = drop;\n    lodash.dropRight = dropRight;\n    lodash.dropRightWhile = dropRightWhile;\n    lodash.dropWhile = dropWhile;\n    lodash.fill = fill;\n    lodash.filter = filter;\n    lodash.flatMap = flatMap;\n    lodash.flatMapDeep = flatMapDeep;\n    lodash.flatMapDepth = flatMapDepth;\n    lodash.flatten = flatten;\n    lodash.flattenDeep = flattenDeep;\n    lodash.flattenDepth = flattenDepth;\n    lodash.flip = flip;\n    lodash.flow = flow;\n    lodash.flowRight = flowRight;\n    lodash.fromPairs = fromPairs;\n    lodash.functions = functions;\n    lodash.functionsIn = functionsIn;\n    lodash.groupBy = groupBy;\n    lodash.initial = initial;\n    lodash.intersection = intersection;\n    lodash.intersectionBy = intersectionBy;\n    lodash.intersectionWith = intersectionWith;\n    lodash.invert = invert;\n    lodash.invertBy = invertBy;\n    lodash.invokeMap = invokeMap;\n    lodash.iteratee = iteratee;\n    lodash.keyBy = keyBy;\n    lodash.keys = keys;\n    lodash.keysIn = keysIn;\n    lodash.map = map;\n    lodash.mapKeys = mapKeys;\n    lodash.mapValues = mapValues;\n    lodash.matches = matches;\n    lodash.matchesProperty = matchesProperty;\n    lodash.memoize = memoize;\n    lodash.merge = merge;\n    lodash.mergeWith = mergeWith;\n    lodash.method = method;\n    lodash.methodOf = methodOf;\n    lodash.mixin = mixin;\n    lodash.negate = negate;\n    lodash.nthArg = nthArg;\n    lodash.omit = omit;\n    lodash.omitBy = omitBy;\n    lodash.once = once;\n    lodash.orderBy = orderBy;\n    lodash.over = over;\n    lodash.overArgs = overArgs;\n    lodash.overEvery = overEvery;\n    lodash.overSome = overSome;\n    lodash.partial = partial;\n    lodash.partialRight = partialRight;\n    lodash.partition = partition;\n    lodash.pick = pick;\n    lodash.pickBy = pickBy;\n    lodash.property = property;\n    lodash.propertyOf = propertyOf;\n    lodash.pull = pull;\n    lodash.pullAll = pullAll;\n    lodash.pullAllBy = pullAllBy;\n    lodash.pullAllWith = pullAllWith;\n    lodash.pullAt = pullAt;\n    lodash.range = range;\n    lodash.rangeRight = rangeRight;\n    lodash.rearg = rearg;\n    lodash.reject = reject;\n    lodash.remove = remove;\n    lodash.rest = rest;\n    lodash.reverse = reverse;\n    lodash.sampleSize = sampleSize;\n    lodash.set = set;\n    lodash.setWith = setWith;\n    lodash.shuffle = shuffle;\n    lodash.slice = slice;\n    lodash.sortBy = sortBy;\n    lodash.sortedUniq = sortedUniq;\n    lodash.sortedUniqBy = sortedUniqBy;\n    lodash.split = split;\n    lodash.spread = spread;\n    lodash.tail = tail;\n    lodash.take = take;\n    lodash.takeRight = takeRight;\n    lodash.takeRightWhile = takeRightWhile;\n    lodash.takeWhile = takeWhile;\n    lodash.tap = tap;\n    lodash.throttle = throttle;\n    lodash.thru = thru;\n    lodash.toArray = toArray;\n    lodash.toPairs = toPairs;\n    lodash.toPairsIn = toPairsIn;\n    lodash.toPath = toPath;\n    lodash.toPlainObject = toPlainObject;\n    lodash.transform = transform;\n    lodash.unary = unary;\n    lodash.union = union;\n    lodash.unionBy = unionBy;\n    lodash.unionWith = unionWith;\n    lodash.uniq = uniq;\n    lodash.uniqBy = uniqBy;\n    lodash.uniqWith = uniqWith;\n    lodash.unset = unset;\n    lodash.unzip = unzip;\n    lodash.unzipWith = unzipWith;\n    lodash.update = update;\n    lodash.updateWith = updateWith;\n    lodash.values = values;\n    lodash.valuesIn = valuesIn;\n    lodash.without = without;\n    lodash.words = words;\n    lodash.wrap = wrap;\n    lodash.xor = xor;\n    lodash.xorBy = xorBy;\n    lodash.xorWith = xorWith;\n    lodash.zip = zip;\n    lodash.zipObject = zipObject;\n    lodash.zipObjectDeep = zipObjectDeep;\n    lodash.zipWith = zipWith;\n\n    // Add aliases.\n    lodash.entries = toPairs;\n    lodash.entriesIn = toPairsIn;\n    lodash.extend = assignIn;\n    lodash.extendWith = assignInWith;\n\n    // Add methods to `lodash.prototype`.\n    mixin(lodash, lodash);\n\n    /*------------------------------------------------------------------------*/\n\n    // Add methods that return unwrapped values in chain sequences.\n    lodash.add = add;\n    lodash.attempt = attempt;\n    lodash.camelCase = camelCase;\n    lodash.capitalize = capitalize;\n    lodash.ceil = ceil;\n    lodash.clamp = clamp;\n    lodash.clone = clone;\n    lodash.cloneDeep = cloneDeep;\n    lodash.cloneDeepWith = cloneDeepWith;\n    lodash.cloneWith = cloneWith;\n    lodash.conformsTo = conformsTo;\n    lodash.deburr = deburr;\n    lodash.defaultTo = defaultTo;\n    lodash.divide = divide;\n    lodash.endsWith = endsWith;\n    lodash.eq = eq;\n    lodash.escape = escape;\n    lodash.escapeRegExp = escapeRegExp;\n    lodash.every = every;\n    lodash.find = find;\n    lodash.findIndex = findIndex;\n    lodash.findKey = findKey;\n    lodash.findLast = findLast;\n    lodash.findLastIndex = findLastIndex;\n    lodash.findLastKey = findLastKey;\n    lodash.floor = floor;\n    lodash.forEach = forEach;\n    lodash.forEachRight = forEachRight;\n    lodash.forIn = forIn;\n    lodash.forInRight = forInRight;\n    lodash.forOwn = forOwn;\n    lodash.forOwnRight = forOwnRight;\n    lodash.get = get;\n    lodash.gt = gt;\n    lodash.gte = gte;\n    lodash.has = has;\n    lodash.hasIn = hasIn;\n    lodash.head = head;\n    lodash.identity = identity;\n    lodash.includes = includes;\n    lodash.indexOf = indexOf;\n    lodash.inRange = inRange;\n    lodash.invoke = invoke;\n    lodash.isArguments = isArguments;\n    lodash.isArray = isArray;\n    lodash.isArrayBuffer = isArrayBuffer;\n    lodash.isArrayLike = isArrayLike;\n    lodash.isArrayLikeObject = isArrayLikeObject;\n    lodash.isBoolean = isBoolean;\n    lodash.isBuffer = isBuffer;\n    lodash.isDate = isDate;\n    lodash.isElement = isElement;\n    lodash.isEmpty = isEmpty;\n    lodash.isEqual = isEqual;\n    lodash.isEqualWith = isEqualWith;\n    lodash.isError = isError;\n    lodash.isFinite = isFinite;\n    lodash.isFunction = isFunction;\n    lodash.isInteger = isInteger;\n    lodash.isLength = isLength;\n    lodash.isMap = isMap;\n    lodash.isMatch = isMatch;\n    lodash.isMatchWith = isMatchWith;\n    lodash.isNaN = isNaN;\n    lodash.isNative = isNative;\n    lodash.isNil = isNil;\n    lodash.isNull = isNull;\n    lodash.isNumber = isNumber;\n    lodash.isObject = isObject;\n    lodash.isObjectLike = isObjectLike;\n    lodash.isPlainObject = isPlainObject;\n    lodash.isRegExp = isRegExp;\n    lodash.isSafeInteger = isSafeInteger;\n    lodash.isSet = isSet;\n    lodash.isString = isString;\n    lodash.isSymbol = isSymbol;\n    lodash.isTypedArray = isTypedArray;\n    lodash.isUndefined = isUndefined;\n    lodash.isWeakMap = isWeakMap;\n    lodash.isWeakSet = isWeakSet;\n    lodash.join = join;\n    lodash.kebabCase = kebabCase;\n    lodash.last = last;\n    lodash.lastIndexOf = lastIndexOf;\n    lodash.lowerCase = lowerCase;\n    lodash.lowerFirst = lowerFirst;\n    lodash.lt = lt;\n    lodash.lte = lte;\n    lodash.max = max;\n    lodash.maxBy = maxBy;\n    lodash.mean = mean;\n    lodash.meanBy = meanBy;\n    lodash.min = min;\n    lodash.minBy = minBy;\n    lodash.stubArray = stubArray;\n    lodash.stubFalse = stubFalse;\n    lodash.stubObject = stubObject;\n    lodash.stubString = stubString;\n    lodash.stubTrue = stubTrue;\n    lodash.multiply = multiply;\n    lodash.nth = nth;\n    lodash.noConflict = noConflict;\n    lodash.noop = noop;\n    lodash.now = now;\n    lodash.pad = pad;\n    lodash.padEnd = padEnd;\n    lodash.padStart = padStart;\n    lodash.parseInt = parseInt;\n    lodash.random = random;\n    lodash.reduce = reduce;\n    lodash.reduceRight = reduceRight;\n    lodash.repeat = repeat;\n    lodash.replace = replace;\n    lodash.result = result;\n    lodash.round = round;\n    lodash.runInContext = runInContext;\n    lodash.sample = sample;\n    lodash.size = size;\n    lodash.snakeCase = snakeCase;\n    lodash.some = some;\n    lodash.sortedIndex = sortedIndex;\n    lodash.sortedIndexBy = sortedIndexBy;\n    lodash.sortedIndexOf = sortedIndexOf;\n    lodash.sortedLastIndex = sortedLastIndex;\n    lodash.sortedLastIndexBy = sortedLastIndexBy;\n    lodash.sortedLastIndexOf = sortedLastIndexOf;\n    lodash.startCase = startCase;\n    lodash.startsWith = startsWith;\n    lodash.subtract = subtract;\n    lodash.sum = sum;\n    lodash.sumBy = sumBy;\n    lodash.template = template;\n    lodash.times = times;\n    lodash.toFinite = toFinite;\n    lodash.toInteger = toInteger;\n    lodash.toLength = toLength;\n    lodash.toLower = toLower;\n    lodash.toNumber = toNumber;\n    lodash.toSafeInteger = toSafeInteger;\n    lodash.toString = toString;\n    lodash.toUpper = toUpper;\n    lodash.trim = trim;\n    lodash.trimEnd = trimEnd;\n    lodash.trimStart = trimStart;\n    lodash.truncate = truncate;\n    lodash.unescape = unescape;\n    lodash.uniqueId = uniqueId;\n    lodash.upperCase = upperCase;\n    lodash.upperFirst = upperFirst;\n\n    // Add aliases.\n    lodash.each = forEach;\n    lodash.eachRight = forEachRight;\n    lodash.first = head;\n\n    mixin(lodash, (function() {\n      var source = {};\n      baseForOwn(lodash, function(func, methodName) {\n        if (!hasOwnProperty.call(lodash.prototype, methodName)) {\n          source[methodName] = func;\n        }\n      });\n      return source;\n    }()), { 'chain': false });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The semantic version number.\n     *\n     * @static\n     * @memberOf _\n     * @type {string}\n     */\n    lodash.VERSION = VERSION;\n\n    // Assign default placeholders.\n    arrayEach(['bind', 'bindKey', 'curry', 'curryRight', 'partial', 'partialRight'], function(methodName) {\n      lodash[methodName].placeholder = lodash;\n    });\n\n    // Add `LazyWrapper` methods for `_.drop` and `_.take` variants.\n    arrayEach(['drop', 'take'], function(methodName, index) {\n      LazyWrapper.prototype[methodName] = function(n) {\n        n = n === undefined ? 1 : nativeMax(toInteger(n), 0);\n\n        var result = (this.__filtered__ && !index)\n          ? new LazyWrapper(this)\n          : this.clone();\n\n        if (result.__filtered__) {\n          result.__takeCount__ = nativeMin(n, result.__takeCount__);\n        } else {\n          result.__views__.push({\n            'size': nativeMin(n, MAX_ARRAY_LENGTH),\n            'type': methodName + (result.__dir__ < 0 ? 'Right' : '')\n          });\n        }\n        return result;\n      };\n\n      LazyWrapper.prototype[methodName + 'Right'] = function(n) {\n        return this.reverse()[methodName](n).reverse();\n      };\n    });\n\n    // Add `LazyWrapper` methods that accept an `iteratee` value.\n    arrayEach(['filter', 'map', 'takeWhile'], function(methodName, index) {\n      var type = index + 1,\n          isFilter = type == LAZY_FILTER_FLAG || type == LAZY_WHILE_FLAG;\n\n      LazyWrapper.prototype[methodName] = function(iteratee) {\n        var result = this.clone();\n        result.__iteratees__.push({\n          'iteratee': getIteratee(iteratee, 3),\n          'type': type\n        });\n        result.__filtered__ = result.__filtered__ || isFilter;\n        return result;\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.head` and `_.last`.\n    arrayEach(['head', 'last'], function(methodName, index) {\n      var takeName = 'take' + (index ? 'Right' : '');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this[takeName](1).value()[0];\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.initial` and `_.tail`.\n    arrayEach(['initial', 'tail'], function(methodName, index) {\n      var dropName = 'drop' + (index ? '' : 'Right');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);\n      };\n    });\n\n    LazyWrapper.prototype.compact = function() {\n      return this.filter(identity);\n    };\n\n    LazyWrapper.prototype.find = function(predicate) {\n      return this.filter(predicate).head();\n    };\n\n    LazyWrapper.prototype.findLast = function(predicate) {\n      return this.reverse().find(predicate);\n    };\n\n    LazyWrapper.prototype.invokeMap = baseRest(function(path, args) {\n      if (typeof path == 'function') {\n        return new LazyWrapper(this);\n      }\n      return this.map(function(value) {\n        return baseInvoke(value, path, args);\n      });\n    });\n\n    LazyWrapper.prototype.reject = function(predicate) {\n      return this.filter(negate(getIteratee(predicate)));\n    };\n\n    LazyWrapper.prototype.slice = function(start, end) {\n      start = toInteger(start);\n\n      var result = this;\n      if (result.__filtered__ && (start > 0 || end < 0)) {\n        return new LazyWrapper(result);\n      }\n      if (start < 0) {\n        result = result.takeRight(-start);\n      } else if (start) {\n        result = result.drop(start);\n      }\n      if (end !== undefined) {\n        end = toInteger(end);\n        result = end < 0 ? result.dropRight(-end) : result.take(end - start);\n      }\n      return result;\n    };\n\n    LazyWrapper.prototype.takeRightWhile = function(predicate) {\n      return this.reverse().takeWhile(predicate).reverse();\n    };\n\n    LazyWrapper.prototype.toArray = function() {\n      return this.take(MAX_ARRAY_LENGTH);\n    };\n\n    // Add `LazyWrapper` methods to `lodash.prototype`.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var checkIteratee = /^(?:filter|find|map|reject)|While$/.test(methodName),\n          isTaker = /^(?:head|last)$/.test(methodName),\n          lodashFunc = lodash[isTaker ? ('take' + (methodName == 'last' ? 'Right' : '')) : methodName],\n          retUnwrapped = isTaker || /^find/.test(methodName);\n\n      if (!lodashFunc) {\n        return;\n      }\n      lodash.prototype[methodName] = function() {\n        var value = this.__wrapped__,\n            args = isTaker ? [1] : arguments,\n            isLazy = value instanceof LazyWrapper,\n            iteratee = args[0],\n            useLazy = isLazy || isArray(value);\n\n        var interceptor = function(value) {\n          var result = lodashFunc.apply(lodash, arrayPush([value], args));\n          return (isTaker && chainAll) ? result[0] : result;\n        };\n\n        if (useLazy && checkIteratee && typeof iteratee == 'function' && iteratee.length != 1) {\n          // Avoid lazy use if the iteratee has a \"length\" value other than `1`.\n          isLazy = useLazy = false;\n        }\n        var chainAll = this.__chain__,\n            isHybrid = !!this.__actions__.length,\n            isUnwrapped = retUnwrapped && !chainAll,\n            onlyLazy = isLazy && !isHybrid;\n\n        if (!retUnwrapped && useLazy) {\n          value = onlyLazy ? value : new LazyWrapper(this);\n          var result = func.apply(value, args);\n          result.__actions__.push({ 'func': thru, 'args': [interceptor], 'thisArg': undefined });\n          return new LodashWrapper(result, chainAll);\n        }\n        if (isUnwrapped && onlyLazy) {\n          return func.apply(this, args);\n        }\n        result = this.thru(interceptor);\n        return isUnwrapped ? (isTaker ? result.value()[0] : result.value()) : result;\n      };\n    });\n\n    // Add `Array` methods to `lodash.prototype`.\n    arrayEach(['pop', 'push', 'shift', 'sort', 'splice', 'unshift'], function(methodName) {\n      var func = arrayProto[methodName],\n          chainName = /^(?:push|sort|unshift)$/.test(methodName) ? 'tap' : 'thru',\n          retUnwrapped = /^(?:pop|shift)$/.test(methodName);\n\n      lodash.prototype[methodName] = function() {\n        var args = arguments;\n        if (retUnwrapped && !this.__chain__) {\n          var value = this.value();\n          return func.apply(isArray(value) ? value : [], args);\n        }\n        return this[chainName](function(value) {\n          return func.apply(isArray(value) ? value : [], args);\n        });\n      };\n    });\n\n    // Map minified method names to their real names.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var lodashFunc = lodash[methodName];\n      if (lodashFunc) {\n        var key = lodashFunc.name + '';\n        if (!hasOwnProperty.call(realNames, key)) {\n          realNames[key] = [];\n        }\n        realNames[key].push({ 'name': methodName, 'func': lodashFunc });\n      }\n    });\n\n    realNames[createHybrid(undefined, WRAP_BIND_KEY_FLAG).name] = [{\n      'name': 'wrapper',\n      'func': undefined\n    }];\n\n    // Add methods to `LazyWrapper`.\n    LazyWrapper.prototype.clone = lazyClone;\n    LazyWrapper.prototype.reverse = lazyReverse;\n    LazyWrapper.prototype.value = lazyValue;\n\n    // Add chain sequence methods to the `lodash` wrapper.\n    lodash.prototype.at = wrapperAt;\n    lodash.prototype.chain = wrapperChain;\n    lodash.prototype.commit = wrapperCommit;\n    lodash.prototype.next = wrapperNext;\n    lodash.prototype.plant = wrapperPlant;\n    lodash.prototype.reverse = wrapperReverse;\n    lodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = wrapperValue;\n\n    // Add lazy aliases.\n    lodash.prototype.first = lodash.prototype.head;\n\n    if (symIterator) {\n      lodash.prototype[symIterator] = wrapperToIterator;\n    }\n    return lodash;\n  });\n\n  /*--------------------------------------------------------------------------*/\n\n  // Export lodash.\n  var _ = runInContext();\n\n  // Some AMD build optimizers, like r.js, check for condition patterns like:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose Lodash on the global object to prevent errors when Lodash is\n    // loaded by a script tag in the presence of an AMD loader.\n    // See http://requirejs.org/docs/errors.html#mismatch for more details.\n    // Use `_.noConflict` to remove Lodash from the global object.\n    root._ = _;\n\n    // Define as an anonymous module so, through path mapping, it can be\n    // referenced as the \"underscore\" module.\n    define(function() {\n      return _;\n    });\n  }\n  // Check for `exports` after `define` in case a build optimizer adds it.\n  else if (freeModule) {\n    // Export for Node.js.\n    (freeModule.exports = _)._ = _;\n    // Export for CommonJS support.\n    freeExports._ = _;\n  }\n  else {\n    // Export to the global object.\n    root._ = _;\n  }\n}.call(this));\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory();\n\t}\n}(this, function () {\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\t    /*\n\t     * Local polyfil of Object.create\n\t     */\n\t    var create = Object.create || (function () {\n\t        function F() {};\n\n\t        return function (obj) {\n\t            var subtype;\n\n\t            F.prototype = obj;\n\n\t            subtype = new F();\n\n\t            F.prototype = null;\n\n\t            return subtype;\n\t        };\n\t    }())\n\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                var subtype = create(this);\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var i = 0; i < thatSigBytes; i += 4) {\n\t                    thisWords[(thisSigBytes + i) >>> 2] = thatWords[i >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            var r = (function (m_w) {\n\t                var m_w = m_w;\n\t                var m_z = 0x3ade68b1;\n\t                var mask = 0xffffffff;\n\n\t                return function () {\n\t                    m_z = (0x9069 * (m_z & 0xFFFF) + (m_z >> 0x10)) & mask;\n\t                    m_w = (0x4650 * (m_w & 0xFFFF) + (m_w >> 0x10)) & mask;\n\t                    var result = ((m_z << 0x10) + m_w) & mask;\n\t                    result /= 0x100000000;\n\t                    result += 0.5;\n\t                    return result * (Math.random() > .5 ? 1 : -1);\n\t                }\n\t            });\n\n\t            for (var i = 0, rcache; i < nBytes; i += 4) {\n\t                var _r = r((rcache || Math.random()) * 0x100000000);\n\n\t                rcache = _r() * 0x3ade67b7;\n\t                words.push((_r() * 0x100000000) | 0);\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                var processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar MIME_MAP = [\n    { type: 'text/plain', ext: 'txt' },\n    { type: 'text/html', ext: 'html' },\n    { type: 'text/javascript', ext: 'js' },\n    { type: 'text/css', ext: 'css' },\n    { type: 'text/csv', ext: 'csv' },\n    { type: 'text/yaml', ext: 'yml' },\n    { type: 'text/yaml', ext: 'yaml' },\n    { type: 'text/calendar', ext: 'ics' },\n    { type: 'text/calendar', ext: 'ical' },\n    { type: 'image/png', ext: 'png' },\n    { type: 'image/gif', ext: 'gif' },\n    { type: 'image/jpeg', ext: 'jpg' },\n    { type: 'image/jpeg', ext: 'jpeg' },\n    { type: 'image/bmp', ext: 'bmp' },\n    { type: 'image/x-icon', ext: 'ico' },\n    { type: 'image/tiff', ext: 'tif' },\n    { type: 'image/tiff', ext: 'tiff' },\n    { type: 'image/svg+xml', ext: 'svg' },\n    { type: 'application/json', ext: 'json' },\n    { type: 'application/xml', ext: 'xml' },\n    { type: 'application/x-sh', ext: 'sh' },\n    { type: 'application/zip', ext: 'zip' },\n    { type: 'application/x-rar-compressed', ext: 'rar' },\n    { type: 'application/x-tar', ext: 'tar' },\n    { type: 'application/x-bzip', ext: 'bz' },\n    { type: 'application/x-bzip2', ext: 'bz2' },\n    { type: 'application/pdf', ext: 'pdf' },\n    { type: 'application/java-archive', ext: 'jar' },\n    { type: 'application/msword', ext: 'doc' },\n    { type: 'application/vnd.ms-excel', ext: 'xls' },\n    { type: 'application/vnd.ms-excel', ext: 'xlsx' },\n    { type: 'message/rfc822', ext: 'eml' },\n];\nvar JS = /** @class */ (function () {\n    function JS() {\n    }\n    JS.isEmpty = function (obj) {\n        return Object.keys(obj).length === 0;\n    };\n    JS.sortByField = function (list, field, dir) {\n        if (!list || !list.sort) {\n            return false;\n        }\n        var dirX = dir && dir === 'desc' ? -1 : 1;\n        list.sort(function (a, b) {\n            var a_val = a[field];\n            var b_val = b[field];\n            if (typeof b_val === 'undefined') {\n                return typeof a_val === 'undefined' ? 0 : 1 * dirX;\n            }\n            if (typeof a_val === 'undefined') {\n                return -1 * dirX;\n            }\n            if (a_val < b_val) {\n                return -1 * dirX;\n            }\n            if (a_val > b_val) {\n                return 1 * dirX;\n            }\n            return 0;\n        });\n        return true;\n    };\n    JS.objectLessAttributes = function (obj, less) {\n        var ret = Object.assign({}, obj);\n        if (less) {\n            if (typeof less === 'string') {\n                delete ret[less];\n            }\n            else {\n                less.forEach(function (attr) {\n                    delete ret[attr];\n                });\n            }\n        }\n        return ret;\n    };\n    JS.filenameToContentType = function (filename, defVal) {\n        if (defVal === void 0) { defVal = 'application/octet-stream'; }\n        var name = filename.toLowerCase();\n        var filtered = MIME_MAP.filter(function (mime) { return name.endsWith('.' + mime.ext); });\n        return filtered.length > 0 ? filtered[0].type : defVal;\n    };\n    JS.isTextFile = function (contentType) {\n        var type = contentType.toLowerCase();\n        if (type.startsWith('text/')) {\n            return true;\n        }\n        return ('application/json' === type ||\n            'application/xml' === type ||\n            'application/sh' === type);\n    };\n    /**\n     * generate random string\n     */\n    JS.generateRandomString = function () {\n        var result = '';\n        var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n        for (var i = 32; i > 0; i -= 1) {\n            result += chars[Math.floor(Math.random() * chars.length)];\n        }\n        return result;\n    };\n    JS.makeQuerablePromise = function (promise) {\n        if (promise.isResolved)\n            return promise;\n        var isPending = true;\n        var isRejected = false;\n        var isFullfilled = false;\n        var result = promise.then(function (data) {\n            isFullfilled = true;\n            isPending = false;\n            return data;\n        }, function (e) {\n            isRejected = true;\n            isPending = false;\n            throw e;\n        });\n        result.isFullfilled = function () {\n            return isFullfilled;\n        };\n        result.isPending = function () {\n            return isPending;\n        };\n        result.isRejected = function () {\n            return isRejected;\n        };\n        return result;\n    };\n    JS.browserOrNode = function () {\n        var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n        var isNode = typeof process !== 'undefined' &&\n            process.versions != null &&\n            process.versions.node != null;\n        return {\n            isBrowser: isBrowser,\n            isNode: isNode,\n        };\n    };\n    /**\n     * transfer the first letter of the keys to lowercase\n     * @param {Object} obj - the object need to be transferred\n     * @param {Array} whiteListForItself - whitelist itself from being transferred\n     * @param {Array} whiteListForChildren - whitelist its children keys from being transferred\n     */\n    JS.transferKeyToLowerCase = function (obj, whiteListForItself, whiteListForChildren) {\n        if (whiteListForItself === void 0) { whiteListForItself = []; }\n        if (whiteListForChildren === void 0) { whiteListForChildren = []; }\n        if (!JS.isStrictObject(obj))\n            return obj;\n        var ret = {};\n        for (var key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                var transferedKey = whiteListForItself.includes(key)\n                    ? key\n                    : key[0].toLowerCase() + key.slice(1);\n                ret[transferedKey] = whiteListForChildren.includes(key)\n                    ? obj[key]\n                    : JS.transferKeyToLowerCase(obj[key], whiteListForItself, whiteListForChildren);\n            }\n        }\n        return ret;\n    };\n    /**\n     * transfer the first letter of the keys to lowercase\n     * @param {Object} obj - the object need to be transferred\n     * @param {Array} whiteListForItself - whitelist itself from being transferred\n     * @param {Array} whiteListForChildren - whitelist its children keys from being transferred\n     */\n    JS.transferKeyToUpperCase = function (obj, whiteListForItself, whiteListForChildren) {\n        if (whiteListForItself === void 0) { whiteListForItself = []; }\n        if (whiteListForChildren === void 0) { whiteListForChildren = []; }\n        if (!JS.isStrictObject(obj))\n            return obj;\n        var ret = {};\n        for (var key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                var transferedKey = whiteListForItself.includes(key)\n                    ? key\n                    : key[0].toUpperCase() + key.slice(1);\n                ret[transferedKey] = whiteListForChildren.includes(key)\n                    ? obj[key]\n                    : JS.transferKeyToUpperCase(obj[key], whiteListForItself, whiteListForChildren);\n            }\n        }\n        return ret;\n    };\n    /**\n     * Return true if the object is a strict object\n     * which means it's not Array, Function, Number, String, Boolean or Null\n     * @param obj the Object\n     */\n    JS.isStrictObject = function (obj) {\n        return (obj instanceof Object &&\n            !(obj instanceof Array) &&\n            !(obj instanceof Function) &&\n            !(obj instanceof Number) &&\n            !(obj instanceof String) &&\n            !(obj instanceof Boolean));\n    };\n    return JS;\n}());\nexport default JS;\n//# sourceMappingURL=JS.js.map","module.exports = require('./lib/Observable.js').Observable;\n","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { StorageHelper } from '@aws-amplify/core';\n/**\n * Default cache config\n */\nexport var defaultConfig = {\n    keyPrefix: 'aws-amplify-cache',\n    capacityInBytes: 1048576,\n    itemMaxSize: 210000,\n    defaultTTL: 259200000,\n    defaultPriority: 5,\n    warningThreshold: 0.8,\n    // the storage helper will check if localStorage exists,\n    // if not, will use a in-memory object instead\n    storage: new StorageHelper().getStorage(),\n};\n/**\n * return the byte size of the string\n * @param str\n */\nexport function getByteLength(str) {\n    var ret = 0;\n    ret = str.length;\n    for (var i = str.length; i >= 0; i -= 1) {\n        var charCode = str.charCodeAt(i);\n        if (charCode > 0x7f && charCode <= 0x7ff) {\n            ret += 1;\n        }\n        else if (charCode > 0x7ff && charCode <= 0xffff) {\n            ret += 2;\n        }\n        // trail surrogate\n        if (charCode >= 0xdc00 && charCode <= 0xdfff) {\n            i -= 1;\n        }\n    }\n    return ret;\n}\n/**\n * get current time\n */\nexport function getCurrTime() {\n    var currTime = new Date();\n    return currTime.getTime();\n}\n/**\n * check if passed value is an integer\n */\nexport function isInteger(value) {\n    if (Number.isInteger) {\n        return Number.isInteger(value);\n    }\n    return _isInteger(value);\n}\nfunction _isInteger(value) {\n    return (typeof value === 'number' && isFinite(value) && Math.floor(value) === value);\n}\n/**\n * provide an object as the in-memory cache\n */\nvar store = {};\nvar CacheObject = /** @class */ (function () {\n    function CacheObject() {\n    }\n    CacheObject.clear = function () {\n        store = {};\n    };\n    CacheObject.getItem = function (key) {\n        return store[key] || null;\n    };\n    CacheObject.setItem = function (key, value) {\n        store[key] = value;\n    };\n    CacheObject.removeItem = function (key) {\n        delete store[key];\n    };\n    return CacheObject;\n}());\nexport { CacheObject };\n//# sourceMappingURL=CacheUtils.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar DoubleLinkedNode = /** @class */ (function () {\n    function DoubleLinkedNode(keyVal) {\n        this.key = keyVal ? keyVal : '';\n        this.prevNode = null;\n        this.nextNode = null;\n    }\n    return DoubleLinkedNode;\n}());\n/**\n * double linked list plus a hash table inside\n * each key in the cache stored as a node in the list\n * recently visited node will be rotated to the head\n * so the Last Recently Visited node will be at the tail\n *\n * @member head - dummy head of the linked list\n * @member tail - dummy tail of the linked list\n * @member hashtable - the hashtable which maps cache key to list node\n * @member length - length of the list\n */\nvar CacheList = /** @class */ (function () {\n    /**\n     * initialization\n     */\n    function CacheList() {\n        this.head = new DoubleLinkedNode();\n        this.tail = new DoubleLinkedNode();\n        this.hashtable = {};\n        this.length = 0;\n        this.head.nextNode = this.tail;\n        this.tail.prevNode = this.head;\n    }\n    /**\n     * insert node to the head of the list\n     *\n     * @param node\n     */\n    CacheList.prototype.insertNodeToHead = function (node) {\n        var tmp = this.head.nextNode;\n        this.head.nextNode = node;\n        node.nextNode = tmp;\n        node.prevNode = this.head;\n        tmp.prevNode = node;\n        this.length = this.length + 1;\n    };\n    /**\n     * remove node\n     *\n     * @param node\n     */\n    CacheList.prototype.removeNode = function (node) {\n        node.prevNode.nextNode = node.nextNode;\n        node.nextNode.prevNode = node.prevNode;\n        node.prevNode = null;\n        node.nextNode = null;\n        this.length = this.length - 1;\n    };\n    /**\n     * @return true if list is empty\n     */\n    CacheList.prototype.isEmpty = function () {\n        return this.length === 0;\n    };\n    /**\n     * refresh node so it is rotated to the head\n     *\n     * @param key - key of the node\n     */\n    CacheList.prototype.refresh = function (key) {\n        var node = this.hashtable[key];\n        this.removeNode(node);\n        this.insertNodeToHead(node);\n    };\n    /**\n     * insert new node to the head and add it in the hashtable\n     *\n     * @param key - the key of the node\n     */\n    CacheList.prototype.insertItem = function (key) {\n        var node = new DoubleLinkedNode(key);\n        this.hashtable[key] = node;\n        this.insertNodeToHead(node);\n    };\n    /**\n     * @return the LAST Recently Visited key\n     */\n    CacheList.prototype.getLastItem = function () {\n        return this.tail.prevNode.key;\n    };\n    /**\n     * remove the cache key from the list and hashtable\n     * @param key - the key of the node\n     */\n    CacheList.prototype.removeItem = function (key) {\n        var removedItem = this.hashtable[key];\n        this.removeNode(removedItem);\n        delete this.hashtable[key];\n    };\n    /**\n     * @return length of the list\n     */\n    CacheList.prototype.getSize = function () {\n        return this.length;\n    };\n    /**\n     * @return true if the key is in the hashtable\n     * @param key\n     */\n    CacheList.prototype.containsKey = function (key) {\n        return key in this.hashtable;\n    };\n    /**\n     * clean up the list and hashtable\n     */\n    CacheList.prototype.clearList = function () {\n        for (var _i = 0, _a = Object.keys(this.hashtable); _i < _a.length; _i++) {\n            var key = _a[_i];\n            if (this.hashtable.hasOwnProperty(key)) {\n                delete this.hashtable[key];\n            }\n        }\n        this.head.nextNode = this.tail;\n        this.tail.prevNode = this.head;\n        this.length = 0;\n    };\n    /**\n     * @return all keys in the hashtable\n     */\n    CacheList.prototype.getKeys = function () {\n        return Object.keys(this.hashtable);\n    };\n    /**\n     * mainly for test\n     *\n     * @param key\n     * @return true if key is the head node\n     */\n    CacheList.prototype.isHeadNode = function (key) {\n        var node = this.hashtable[key];\n        return node.prevNode === this.head;\n    };\n    /**\n     * mainly for test\n     *\n     * @param key\n     * @return true if key is the tail node\n     */\n    CacheList.prototype.isTailNode = function (key) {\n        var node = this.hashtable[key];\n        return node.nextNode === this.tail;\n    };\n    return CacheList;\n}());\nexport default CacheList;\n//# sourceMappingURL=CacheList.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { getCurrTime, getByteLength, defaultConfig, isInteger } from './Utils';\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nvar logger = new Logger('StorageCache');\n/**\n * Initialization of the cache\n *\n */\nvar StorageCache = /** @class */ (function () {\n    /**\n     * Initialize the cache\n     * @param config - the configuration of the cache\n     */\n    function StorageCache(config) {\n        this.config = Object.assign({}, config);\n        this.cacheCurSizeKey = this.config.keyPrefix + 'CurSize';\n        this.checkConfig();\n    }\n    StorageCache.prototype.getModuleName = function () {\n        return 'Cache';\n    };\n    StorageCache.prototype.checkConfig = function () {\n        // check configuration\n        if (!isInteger(this.config.capacityInBytes)) {\n            logger.error('Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default.');\n            this.config.capacityInBytes = defaultConfig.capacityInBytes;\n        }\n        if (!isInteger(this.config.itemMaxSize)) {\n            logger.error('Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default.');\n            this.config.itemMaxSize = defaultConfig.itemMaxSize;\n        }\n        if (!isInteger(this.config.defaultTTL)) {\n            logger.error('Invalid parameter: defaultTTL. It should be an Integer. Setting back to default.');\n            this.config.defaultTTL = defaultConfig.defaultTTL;\n        }\n        if (!isInteger(this.config.defaultPriority)) {\n            logger.error('Invalid parameter: defaultPriority. It should be an Integer. Setting back to default.');\n            this.config.defaultPriority = defaultConfig.defaultPriority;\n        }\n        if (this.config.itemMaxSize > this.config.capacityInBytes) {\n            logger.error('Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default.');\n            this.config.itemMaxSize = defaultConfig.itemMaxSize;\n        }\n        if (this.config.defaultPriority > 5 || this.config.defaultPriority < 1) {\n            logger.error('Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default.');\n            this.config.defaultPriority = defaultConfig.defaultPriority;\n        }\n        if (Number(this.config.warningThreshold) > 1 ||\n            Number(this.config.warningThreshold) < 0) {\n            logger.error('Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default.');\n            this.config.warningThreshold = defaultConfig.warningThreshold;\n        }\n        // set 5MB limit\n        var cacheLimit = 5 * 1024 * 1024;\n        if (this.config.capacityInBytes > cacheLimit) {\n            logger.error('Cache Capacity should be less than 5MB. Setting back to default. Setting back to default.');\n            this.config.capacityInBytes = defaultConfig.capacityInBytes;\n        }\n    };\n    /**\n     * produce a JSON object with meta-data and data value\n     * @param value - the value of the item\n     * @param options - optional, the specified meta-data\n     *\n     * @return - the item which has the meta-data and the value\n     */\n    StorageCache.prototype.fillCacheItem = function (key, value, options) {\n        var ret = {\n            key: key,\n            data: value,\n            timestamp: getCurrTime(),\n            visitedTime: getCurrTime(),\n            priority: options.priority,\n            expires: options.expires,\n            type: typeof value,\n            byteSize: 0,\n        };\n        ret.byteSize = getByteLength(JSON.stringify(ret));\n        // for accurate size\n        ret.byteSize = getByteLength(JSON.stringify(ret));\n        return ret;\n    };\n    /**\n     * set cache with customized configuration\n     * @param config - customized configuration\n     *\n     * @return - the current configuration\n     */\n    StorageCache.prototype.configure = function (config) {\n        if (!config) {\n            return this.config;\n        }\n        if (config.keyPrefix) {\n            logger.warn(\"Don't try to configure keyPrefix!\");\n        }\n        this.config = Object.assign({}, this.config, config, config.Cache);\n        this.checkConfig();\n        return this.config;\n    };\n    return StorageCache;\n}());\nexport default StorageCache;\n//# sourceMappingURL=StorageCache.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { defaultConfig, getCurrTime } from './Utils';\nimport StorageCache from './StorageCache';\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nvar logger = new Logger('Cache');\n/**\n * Customized storage based on the SessionStorage or LocalStorage with LRU implemented\n */\nvar BrowserStorageCache = /** @class */ (function (_super) {\n    __extends(BrowserStorageCache, _super);\n    /**\n     * initialize the cache\n     * @param config - the configuration of the cache\n     */\n    function BrowserStorageCache(config) {\n        var _this = this;\n        var cacheConfig = config\n            ? Object.assign({}, defaultConfig, config)\n            : defaultConfig;\n        _this = _super.call(this, cacheConfig) || this;\n        _this.config.storage = cacheConfig.storage;\n        _this.getItem = _this.getItem.bind(_this);\n        _this.setItem = _this.setItem.bind(_this);\n        _this.removeItem = _this.removeItem.bind(_this);\n        return _this;\n    }\n    /**\n     * decrease current size of the cache\n     *\n     * @private\n     * @param amount - the amount of the cache size which needs to be decreased\n     */\n    BrowserStorageCache.prototype._decreaseCurSizeInBytes = function (amount) {\n        var curSize = this.getCacheCurSize();\n        this.config.storage.setItem(this.cacheCurSizeKey, (curSize - amount).toString());\n    };\n    /**\n     * increase current size of the cache\n     *\n     * @private\n     * @param amount - the amount of the cache szie which need to be increased\n     */\n    BrowserStorageCache.prototype._increaseCurSizeInBytes = function (amount) {\n        var curSize = this.getCacheCurSize();\n        this.config.storage.setItem(this.cacheCurSizeKey, (curSize + amount).toString());\n    };\n    /**\n     * update the visited time if item has been visited\n     *\n     * @private\n     * @param item - the item which need to be refreshed\n     * @param prefixedKey - the key of the item\n     *\n     * @return the refreshed item\n     */\n    BrowserStorageCache.prototype._refreshItem = function (item, prefixedKey) {\n        item.visitedTime = getCurrTime();\n        this.config.storage.setItem(prefixedKey, JSON.stringify(item));\n        return item;\n    };\n    /**\n     * check wether item is expired\n     *\n     * @private\n     * @param key - the key of the item\n     *\n     * @return true if the item is expired.\n     */\n    BrowserStorageCache.prototype._isExpired = function (key) {\n        var text = this.config.storage.getItem(key);\n        var item = JSON.parse(text);\n        if (getCurrTime() >= item.expires) {\n            return true;\n        }\n        return false;\n    };\n    /**\n     * delete item from cache\n     *\n     * @private\n     * @param prefixedKey - the key of the item\n     * @param size - optional, the byte size of the item\n     */\n    BrowserStorageCache.prototype._removeItem = function (prefixedKey, size) {\n        var itemSize = size\n            ? size\n            : JSON.parse(this.config.storage.getItem(prefixedKey)).byteSize;\n        this._decreaseCurSizeInBytes(itemSize);\n        // remove the cache item\n        this.config.storage.removeItem(prefixedKey);\n    };\n    /**\n     * put item into cache\n     *\n     * @private\n     * @param prefixedKey - the key of the item\n     * @param itemData - the value of the item\n     * @param itemSizeInBytes - the byte size of the item\n     */\n    BrowserStorageCache.prototype._setItem = function (prefixedKey, item) {\n        // update the cache size\n        this._increaseCurSizeInBytes(item.byteSize);\n        try {\n            this.config.storage.setItem(prefixedKey, JSON.stringify(item));\n        }\n        catch (setItemErr) {\n            // if failed, we need to rollback the cache size\n            this._decreaseCurSizeInBytes(item.byteSize);\n            logger.error(\"Failed to set item \" + setItemErr);\n        }\n    };\n    /**\n     * total space needed when poping out items\n     *\n     * @private\n     * @param itemSize\n     *\n     * @return total space needed\n     */\n    BrowserStorageCache.prototype._sizeToPop = function (itemSize) {\n        var spaceItemNeed = this.getCacheCurSize() + itemSize - this.config.capacityInBytes;\n        var cacheThresholdSpace = (1 - this.config.warningThreshold) * this.config.capacityInBytes;\n        return spaceItemNeed > cacheThresholdSpace\n            ? spaceItemNeed\n            : cacheThresholdSpace;\n    };\n    /**\n     * see whether cache is full\n     *\n     * @private\n     * @param itemSize\n     *\n     * @return true if cache is full\n     */\n    BrowserStorageCache.prototype._isCacheFull = function (itemSize) {\n        return itemSize + this.getCacheCurSize() > this.config.capacityInBytes;\n    };\n    /**\n     * scan the storage and find out all the keys owned by this cache\n     * also clean the expired keys while scanning\n     *\n     * @private\n     *\n     * @return array of keys\n     */\n    BrowserStorageCache.prototype._findValidKeys = function () {\n        var keys = [];\n        var keyInCache = [];\n        // get all keys in Storage\n        for (var i = 0; i < this.config.storage.length; i += 1) {\n            keyInCache.push(this.config.storage.key(i));\n        }\n        // find those items which belong to our cache and also clean those expired items\n        for (var i = 0; i < keyInCache.length; i += 1) {\n            var key = keyInCache[i];\n            if (key.indexOf(this.config.keyPrefix) === 0 &&\n                key !== this.cacheCurSizeKey) {\n                if (this._isExpired(key)) {\n                    this._removeItem(key);\n                }\n                else {\n                    keys.push(key);\n                }\n            }\n        }\n        return keys;\n    };\n    /**\n     * get all the items we have, sort them by their priority,\n     * if priority is same, sort them by their last visited time\n     * pop out items from the low priority (5 is the lowest)\n     *\n     * @private\n     * @param keys - all the keys in this cache\n     * @param sizeToPop - the total size of the items which needed to be poped out\n     */\n    BrowserStorageCache.prototype._popOutItems = function (keys, sizeToPop) {\n        var items = [];\n        var remainedSize = sizeToPop;\n        // get the items from Storage\n        for (var i = 0; i < keys.length; i += 1) {\n            var val = this.config.storage.getItem(keys[i]);\n            if (val != null) {\n                var item = JSON.parse(val);\n                items.push(item);\n            }\n        }\n        // first compare priority\n        // then compare visited time\n        items.sort(function (a, b) {\n            if (a.priority > b.priority) {\n                return -1;\n            }\n            else if (a.priority < b.priority) {\n                return 1;\n            }\n            else {\n                if (a.visitedTime < b.visitedTime) {\n                    return -1;\n                }\n                else\n                    return 1;\n            }\n        });\n        for (var i = 0; i < items.length; i += 1) {\n            // pop out items until we have enough room for new item\n            this._removeItem(items[i].key, items[i].byteSize);\n            remainedSize -= items[i].byteSize;\n            if (remainedSize <= 0) {\n                return;\n            }\n        }\n    };\n    /**\n     * Set item into cache. You can put number, string, boolean or object.\n     * The cache will first check whether has the same key.\n     * If it has, it will delete the old item and then put the new item in\n     * The cache will pop out items if it is full\n     * You can specify the cache item options. The cache will abort and output a warning:\n     * If the key is invalid\n     * If the size of the item exceeds itemMaxSize.\n     * If the value is undefined\n     * If incorrect cache item configuration\n     * If error happened with browser storage\n     *\n     * @param key - the key of the item\n     * @param value - the value of the item\n     * @param {Object} [options] - optional, the specified meta-data\n     */\n    BrowserStorageCache.prototype.setItem = function (key, value, options) {\n        logger.log(\"Set item: key is \" + key + \", value is \" + value + \" with options: \" + options);\n        var prefixedKey = this.config.keyPrefix + key;\n        // invalid keys\n        if (prefixedKey === this.config.keyPrefix ||\n            prefixedKey === this.cacheCurSizeKey) {\n            logger.warn(\"Invalid key: should not be empty or 'CurSize'\");\n            return;\n        }\n        if (typeof value === 'undefined') {\n            logger.warn(\"The value of item should not be undefined!\");\n            return;\n        }\n        var cacheItemOptions = {\n            priority: options && options.priority !== undefined\n                ? options.priority\n                : this.config.defaultPriority,\n            expires: options && options.expires !== undefined\n                ? options.expires\n                : this.config.defaultTTL + getCurrTime(),\n        };\n        if (cacheItemOptions.priority < 1 || cacheItemOptions.priority > 5) {\n            logger.warn(\"Invalid parameter: priority due to out or range. It should be within 1 and 5.\");\n            return;\n        }\n        var item = this.fillCacheItem(prefixedKey, value, cacheItemOptions);\n        // check wether this item is too big;\n        if (item.byteSize > this.config.itemMaxSize) {\n            logger.warn(\"Item with key: \" + key + \" you are trying to put into is too big!\");\n            return;\n        }\n        try {\n            // first look into the storage, if it exists, delete it.\n            var val = this.config.storage.getItem(prefixedKey);\n            if (val) {\n                this._removeItem(prefixedKey, JSON.parse(val).byteSize);\n            }\n            // check whether the cache is full\n            if (this._isCacheFull(item.byteSize)) {\n                var validKeys = this._findValidKeys();\n                // check again and then pop out items\n                if (this._isCacheFull(item.byteSize)) {\n                    var sizeToPop = this._sizeToPop(item.byteSize);\n                    this._popOutItems(validKeys, sizeToPop);\n                }\n            }\n            // put item in the cache\n            // may failed due to storage full\n            this._setItem(prefixedKey, item);\n        }\n        catch (e) {\n            logger.warn(\"setItem failed! \" + e);\n        }\n    };\n    /**\n     * Get item from cache. It will return null if item doesn’t exist or it has been expired.\n     * If you specified callback function in the options,\n     * then the function will be executed if no such item in the cache\n     * and finally put the return value into cache.\n     * Please make sure the callback function will return the value you want to put into the cache.\n     * The cache will abort output a warning:\n     * If the key is invalid\n     * If error happened with browser storage\n     *\n     * @param key - the key of the item\n     * @param {Object} [options] - the options of callback function\n     *\n     * @return - return the value of the item\n     */\n    BrowserStorageCache.prototype.getItem = function (key, options) {\n        logger.log(\"Get item: key is \" + key + \" with options \" + options);\n        var ret = null;\n        var prefixedKey = this.config.keyPrefix + key;\n        if (prefixedKey === this.config.keyPrefix ||\n            prefixedKey === this.cacheCurSizeKey) {\n            logger.warn(\"Invalid key: should not be empty or 'CurSize'\");\n            return null;\n        }\n        try {\n            ret = this.config.storage.getItem(prefixedKey);\n            if (ret != null) {\n                if (this._isExpired(prefixedKey)) {\n                    // if expired, remove that item and return null\n                    this._removeItem(prefixedKey, JSON.parse(ret).byteSize);\n                    ret = null;\n                }\n                else {\n                    // if not expired, great, return the value and refresh it\n                    var item = JSON.parse(ret);\n                    item = this._refreshItem(item, prefixedKey);\n                    return item.data;\n                }\n            }\n            if (options && options.callback !== undefined) {\n                var val = options.callback();\n                if (val !== null) {\n                    this.setItem(key, val, options);\n                }\n                return val;\n            }\n            return null;\n        }\n        catch (e) {\n            logger.warn(\"getItem failed! \" + e);\n            return null;\n        }\n    };\n    /**\n     * remove item from the cache\n     * The cache will abort output a warning:\n     * If error happened with browser storage\n     * @param key - the key of the item\n     */\n    BrowserStorageCache.prototype.removeItem = function (key) {\n        logger.log(\"Remove item: key is \" + key);\n        var prefixedKey = this.config.keyPrefix + key;\n        if (prefixedKey === this.config.keyPrefix ||\n            prefixedKey === this.cacheCurSizeKey) {\n            return;\n        }\n        try {\n            var val = this.config.storage.getItem(prefixedKey);\n            if (val) {\n                this._removeItem(prefixedKey, JSON.parse(val).byteSize);\n            }\n        }\n        catch (e) {\n            logger.warn(\"removeItem failed! \" + e);\n        }\n    };\n    /**\n     * clear the entire cache\n     * The cache will abort output a warning:\n     * If error happened with browser storage\n     */\n    BrowserStorageCache.prototype.clear = function () {\n        logger.log(\"Clear Cache\");\n        var keysToRemove = [];\n        for (var i = 0; i < this.config.storage.length; i += 1) {\n            var key = this.config.storage.key(i);\n            if (key.indexOf(this.config.keyPrefix) === 0) {\n                keysToRemove.push(key);\n            }\n        }\n        try {\n            for (var i = 0; i < keysToRemove.length; i += 1) {\n                this.config.storage.removeItem(keysToRemove[i]);\n            }\n        }\n        catch (e) {\n            logger.warn(\"clear failed! \" + e);\n        }\n    };\n    /**\n     * Return all the keys in the cache.\n     *\n     * @return - all keys in the cache\n     */\n    BrowserStorageCache.prototype.getAllKeys = function () {\n        var keys = [];\n        for (var i = 0; i < this.config.storage.length; i += 1) {\n            var key = this.config.storage.key(i);\n            if (key.indexOf(this.config.keyPrefix) === 0 &&\n                key !== this.cacheCurSizeKey) {\n                keys.push(key.substring(this.config.keyPrefix.length));\n            }\n        }\n        return keys;\n    };\n    /**\n     * return the current size of the cache\n     *\n     * @return - current size of the cache\n     */\n    BrowserStorageCache.prototype.getCacheCurSize = function () {\n        var ret = this.config.storage.getItem(this.cacheCurSizeKey);\n        if (!ret) {\n            this.config.storage.setItem(this.cacheCurSizeKey, '0');\n            ret = '0';\n        }\n        return Number(ret);\n    };\n    /**\n     * Return a new instance of cache with customized configuration.\n     * @param config - the customized configuration\n     *\n     * @return - new instance of Cache\n     */\n    BrowserStorageCache.prototype.createInstance = function (config) {\n        if (!config.keyPrefix || config.keyPrefix === defaultConfig.keyPrefix) {\n            logger.error('invalid keyPrefix, setting keyPrefix with timeStamp');\n            config.keyPrefix = getCurrTime.toString();\n        }\n        return new BrowserStorageCache(config);\n    };\n    return BrowserStorageCache;\n}(StorageCache));\nexport { BrowserStorageCache };\nvar instance = new BrowserStorageCache();\nexport default instance;\n//# sourceMappingURL=BrowserStorageCache.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CacheList, defaultConfig, getCurrTime, CacheObject } from './Utils';\nimport StorageCache from './StorageCache';\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nvar logger = new Logger('InMemoryCache');\n/**\n * Customized in-memory cache with LRU implemented\n * @member cacheObj - object which store items\n * @member cacheList - list of keys in the cache with LRU\n * @member curSizeInBytes - current size of the cache\n * @member maxPriority - max of the priority\n * @member cacheSizeLimit - the limit of cache size\n */\nvar InMemoryCache = /** @class */ (function (_super) {\n    __extends(InMemoryCache, _super);\n    /**\n     * initialize the cache\n     *\n     * @param config - the configuration of the cache\n     */\n    function InMemoryCache(config) {\n        var _this = this;\n        var cacheConfig = config\n            ? Object.assign({}, defaultConfig, config)\n            : defaultConfig;\n        _this = _super.call(this, cacheConfig) || this;\n        logger.debug('now we start!');\n        _this.cacheList = [];\n        _this.curSizeInBytes = 0;\n        _this.maxPriority = 5;\n        _this.getItem = _this.getItem.bind(_this);\n        _this.setItem = _this.setItem.bind(_this);\n        _this.removeItem = _this.removeItem.bind(_this);\n        // initialize list for every priority\n        for (var i = 0; i < _this.maxPriority; i += 1) {\n            _this.cacheList[i] = new CacheList();\n        }\n        return _this;\n    }\n    /**\n     * decrease current size of the cache\n     *\n     * @param amount - the amount of the cache size which needs to be decreased\n     */\n    InMemoryCache.prototype._decreaseCurSizeInBytes = function (amount) {\n        this.curSizeInBytes -= amount;\n    };\n    /**\n     * increase current size of the cache\n     *\n     * @param amount - the amount of the cache szie which need to be increased\n     */\n    InMemoryCache.prototype._increaseCurSizeInBytes = function (amount) {\n        this.curSizeInBytes += amount;\n    };\n    /**\n     * check whether item is expired\n     *\n     * @param key - the key of the item\n     *\n     * @return true if the item is expired.\n     */\n    InMemoryCache.prototype._isExpired = function (key) {\n        var text = CacheObject.getItem(key);\n        var item = JSON.parse(text);\n        if (getCurrTime() >= item.expires) {\n            return true;\n        }\n        return false;\n    };\n    /**\n     * delete item from cache\n     *\n     * @param prefixedKey - the key of the item\n     * @param listIdx - indicates which cache list the key belongs to\n     */\n    InMemoryCache.prototype._removeItem = function (prefixedKey, listIdx) {\n        // delete the key from the list\n        this.cacheList[listIdx].removeItem(prefixedKey);\n        // decrease the current size of the cache\n        this._decreaseCurSizeInBytes(JSON.parse(CacheObject.getItem(prefixedKey)).byteSize);\n        // finally remove the item from memory\n        CacheObject.removeItem(prefixedKey);\n    };\n    /**\n     * put item into cache\n     *\n     * @param prefixedKey - the key of the item\n     * @param itemData - the value of the item\n     * @param itemSizeInBytes - the byte size of the item\n     * @param listIdx - indicates which cache list the key belongs to\n     */\n    InMemoryCache.prototype._setItem = function (prefixedKey, item, listIdx) {\n        // insert the key into the list\n        this.cacheList[listIdx].insertItem(prefixedKey);\n        // increase the current size of the cache\n        this._increaseCurSizeInBytes(item.byteSize);\n        // finally add the item into memory\n        CacheObject.setItem(prefixedKey, JSON.stringify(item));\n    };\n    /**\n     * see whether cache is full\n     *\n     * @param itemSize\n     *\n     * @return true if cache is full\n     */\n    InMemoryCache.prototype._isCacheFull = function (itemSize) {\n        return this.curSizeInBytes + itemSize > this.config.capacityInBytes;\n    };\n    /**\n     * check whether the cache contains the key\n     *\n     * @param key\n     */\n    InMemoryCache.prototype.containsKey = function (key) {\n        var prefixedKey = this.config.keyPrefix + key;\n        for (var i = 0; i < this.maxPriority; i += 1) {\n            if (this.cacheList[i].containsKey(prefixedKey)) {\n                return i + 1;\n            }\n        }\n        return -1;\n    };\n    /**\n     * * Set item into cache. You can put number, string, boolean or object.\n     * The cache will first check whether has the same key.\n     * If it has, it will delete the old item and then put the new item in\n     * The cache will pop out items if it is full\n     * You can specify the cache item options. The cache will abort and output a warning:\n     * If the key is invalid\n     * If the size of the item exceeds itemMaxSize.\n     * If the value is undefined\n     * If incorrect cache item configuration\n     * If error happened with browser storage\n     *\n     * @param key - the key of the item\n     * @param value - the value of the item\n     * @param options - optional, the specified meta-data\n     *\n     * @throws if the item is too big which exceeds the limit of single item size\n     * @throws if the key is invalid\n     */\n    InMemoryCache.prototype.setItem = function (key, value, options) {\n        var prefixedKey = this.config.keyPrefix + key;\n        // invalid keys\n        if (prefixedKey === this.config.keyPrefix ||\n            prefixedKey === this.cacheCurSizeKey) {\n            logger.warn(\"Invalid key: should not be empty or 'CurSize'\");\n            return;\n        }\n        if (typeof value === 'undefined') {\n            logger.warn(\"The value of item should not be undefined!\");\n            return;\n        }\n        var cacheItemOptions = {\n            priority: options && options.priority !== undefined\n                ? options.priority\n                : this.config.defaultPriority,\n            expires: options && options.expires !== undefined\n                ? options.expires\n                : this.config.defaultTTL + getCurrTime(),\n        };\n        if (cacheItemOptions.priority < 1 || cacheItemOptions.priority > 5) {\n            logger.warn(\"Invalid parameter: priority due to out or range. It should be within 1 and 5.\");\n            return;\n        }\n        var item = this.fillCacheItem(prefixedKey, value, cacheItemOptions);\n        // check wether this item is too big;\n        if (item.byteSize > this.config.itemMaxSize) {\n            logger.warn(\"Item with key: \" + key + \" you are trying to put into is too big!\");\n            return;\n        }\n        // if key already in the cache, then delete it.\n        var presentKeyPrio = this.containsKey(key);\n        if (presentKeyPrio !== -1) {\n            this._removeItem(prefixedKey, presentKeyPrio - 1);\n        }\n        // pop out items in the cache when cache is full based on LRU\n        // first start from lowest priority cache list\n        var cacheListIdx = this.maxPriority - 1;\n        while (this._isCacheFull(item.byteSize) && cacheListIdx >= 0) {\n            if (!this.cacheList[cacheListIdx].isEmpty()) {\n                var popedItemKey = this.cacheList[cacheListIdx].getLastItem();\n                this._removeItem(popedItemKey, cacheListIdx);\n            }\n            else {\n                cacheListIdx -= 1;\n            }\n        }\n        this._setItem(prefixedKey, item, Number(item.priority) - 1);\n    };\n    /**\n     * Get item from cache. It will return null if item doesn’t exist or it has been expired.\n     * If you specified callback function in the options,\n     * then the function will be executed if no such item in the cache\n     * and finally put the return value into cache.\n     * Please make sure the callback function will return the value you want to put into the cache.\n     * The cache will abort output a warning:\n     * If the key is invalid\n     *\n     * @param key - the key of the item\n     * @param options - the options of callback function\n     */\n    InMemoryCache.prototype.getItem = function (key, options) {\n        var ret = null;\n        var prefixedKey = this.config.keyPrefix + key;\n        if (prefixedKey === this.config.keyPrefix ||\n            prefixedKey === this.cacheCurSizeKey) {\n            logger.warn(\"Invalid key: should not be empty or 'CurSize'\");\n            return null;\n        }\n        // check whether it's in the cachelist\n        var presentKeyPrio = this.containsKey(key);\n        if (presentKeyPrio !== -1) {\n            if (this._isExpired(prefixedKey)) {\n                // if expired, remove that item and return null\n                this._removeItem(prefixedKey, presentKeyPrio - 1);\n            }\n            else {\n                // if not expired, great, return the value and refresh it\n                ret = CacheObject.getItem(prefixedKey);\n                var item = JSON.parse(ret);\n                this.cacheList[item.priority - 1].refresh(prefixedKey);\n                return item.data;\n            }\n        }\n        if (options && options.callback !== undefined) {\n            var val = options.callback();\n            if (val !== null) {\n                this.setItem(key, val, options);\n            }\n            return val;\n        }\n        return null;\n    };\n    /**\n     * remove item from the cache\n     *\n     * @param key - the key of the item\n     */\n    InMemoryCache.prototype.removeItem = function (key) {\n        var prefixedKey = this.config.keyPrefix + key;\n        // check if the key is in the cache\n        var presentKeyPrio = this.containsKey(key);\n        if (presentKeyPrio !== -1) {\n            this._removeItem(prefixedKey, presentKeyPrio - 1);\n        }\n    };\n    /**\n     * clear the entire cache\n     */\n    InMemoryCache.prototype.clear = function () {\n        for (var i = 0; i < this.maxPriority; i += 1) {\n            for (var _i = 0, _a = this.cacheList[i].getKeys(); _i < _a.length; _i++) {\n                var key = _a[_i];\n                this._removeItem(key, i);\n            }\n        }\n    };\n    /**\n     * Return all the keys in the cache.\n     */\n    InMemoryCache.prototype.getAllKeys = function () {\n        var keys = [];\n        for (var i = 0; i < this.maxPriority; i += 1) {\n            for (var _i = 0, _a = this.cacheList[i].getKeys(); _i < _a.length; _i++) {\n                var key = _a[_i];\n                keys.push(key.substring(this.config.keyPrefix.length));\n            }\n        }\n        return keys;\n    };\n    /**\n     * return the current size of the cache\n     *\n     * @return the current size of the cache\n     */\n    InMemoryCache.prototype.getCacheCurSize = function () {\n        return this.curSizeInBytes;\n    };\n    /**\n     * Return a new instance of cache with customized configuration.\n     * @param config - the customized configuration\n     */\n    InMemoryCache.prototype.createInstance = function (config) {\n        return new InMemoryCache(config);\n    };\n    return InMemoryCache;\n}(StorageCache));\nexport { InMemoryCache };\nvar instance = new InMemoryCache();\nexport default instance;\n//# sourceMappingURL=InMemoryCache.js.map","'use strict';\n\nvar bind = require('./helpers/bind');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Function equal to merge with the difference being that no reference\n * to original objects is kept.\n *\n * @see merge\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction deepMerge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = deepMerge(result[key], val);\n    } else if (typeof val === 'object') {\n      result[key] = deepMerge({}, val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  deepMerge: deepMerge,\n  extend: extend,\n  trim: trim\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","/**\n * Convert types\n */\nexport var InterpretTextCategories;\n(function (InterpretTextCategories) {\n    InterpretTextCategories[\"ALL\"] = \"ALL\";\n    InterpretTextCategories[\"LANGUAGE\"] = \"LANGUAGE\";\n    InterpretTextCategories[\"ENTITIES\"] = \"ENTITIES\";\n    InterpretTextCategories[\"SENTIMENT\"] = \"SENTIMENT\";\n    InterpretTextCategories[\"SYNTAX\"] = \"SYNTAX\";\n    InterpretTextCategories[\"KEY_PHRASES\"] = \"KEY_PHRASES\";\n})(InterpretTextCategories || (InterpretTextCategories = {}));\nexport function isIdentifyFromCollection(obj) {\n    var key = 'collection';\n    var keyId = 'collectionId';\n    return obj && (obj.hasOwnProperty(key) || obj.hasOwnProperty(keyId));\n}\nexport function isIdentifyCelebrities(obj) {\n    var key = 'celebrityDetection';\n    return obj && obj.hasOwnProperty(key);\n}\nexport function isTranslateTextInput(obj) {\n    var key = 'translateText';\n    return obj && obj.hasOwnProperty(key);\n}\nexport function isTextToSpeechInput(obj) {\n    var key = 'textToSpeech';\n    return obj && obj.hasOwnProperty(key);\n}\nexport function isSpeechToTextInput(obj) {\n    var key = 'transcription';\n    return obj && obj.hasOwnProperty(key);\n}\nexport function isStorageSource(obj) {\n    var key = 'key';\n    return obj && obj.hasOwnProperty(key);\n}\nexport function isFileSource(obj) {\n    var key = 'file';\n    return obj && obj.hasOwnProperty(key);\n}\nexport function isBytesSource(obj) {\n    var key = 'bytes';\n    return obj && obj.hasOwnProperty(key);\n}\nexport function isIdentifyTextInput(obj) {\n    var key = 'text';\n    return obj && obj.hasOwnProperty(key);\n}\nexport function isIdentifyLabelsInput(obj) {\n    var key = 'labels';\n    return obj && obj.hasOwnProperty(key);\n}\nexport function isIdentifyEntitiesInput(obj) {\n    var key = 'entities';\n    return obj && obj.hasOwnProperty(key);\n}\nexport function isInterpretTextInput(obj) {\n    var key = 'text';\n    return obj && obj.hasOwnProperty(key);\n}\n//# sourceMappingURL=Predictions.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nexport var CognitoHostedUIIdentityProvider;\n(function (CognitoHostedUIIdentityProvider) {\n    CognitoHostedUIIdentityProvider[\"Cognito\"] = \"COGNITO\";\n    CognitoHostedUIIdentityProvider[\"Google\"] = \"Google\";\n    CognitoHostedUIIdentityProvider[\"Facebook\"] = \"Facebook\";\n    CognitoHostedUIIdentityProvider[\"Amazon\"] = \"LoginWithAmazon\";\n})(CognitoHostedUIIdentityProvider || (CognitoHostedUIIdentityProvider = {}));\nexport function isFederatedSignInOptions(obj) {\n    var keys = ['provider', 'customState'];\n    return obj && !!keys.find(function (k) { return obj.hasOwnProperty(k); });\n}\nexport function isFederatedSignInOptionsCustom(obj) {\n    var keys = [\n        'customProvider',\n        'customState',\n    ];\n    return obj && !!keys.find(function (k) { return obj.hasOwnProperty(k); });\n}\nexport function isCognitoHostedOpts(oauth) {\n    return oauth.redirectSignIn !== undefined;\n}\nexport var AuthErrorTypes;\n(function (AuthErrorTypes) {\n    AuthErrorTypes[\"NoConfig\"] = \"noConfig\";\n    AuthErrorTypes[\"MissingAuthConfig\"] = \"missingAuthConfig\";\n    AuthErrorTypes[\"EmptyUsername\"] = \"emptyUsername\";\n    AuthErrorTypes[\"InvalidUsername\"] = \"invalidUsername\";\n    AuthErrorTypes[\"EmptyPassword\"] = \"emptyPassword\";\n    AuthErrorTypes[\"EmptyCode\"] = \"emptyCode\";\n    AuthErrorTypes[\"SignUpError\"] = \"signUpError\";\n    AuthErrorTypes[\"NoMFA\"] = \"noMFA\";\n    AuthErrorTypes[\"InvalidMFA\"] = \"invalidMFA\";\n    AuthErrorTypes[\"EmptyChallengeResponse\"] = \"emptyChallengeResponse\";\n    AuthErrorTypes[\"NoUserSession\"] = \"noUserSession\";\n    AuthErrorTypes[\"Default\"] = \"default\";\n})(AuthErrorTypes || (AuthErrorTypes = {}));\nexport function isUsernamePasswordOpts(obj) {\n    return !!obj.username;\n}\n//# sourceMappingURL=Auth.js.map","// A small implementation of BigInteger based on http://www-cs-students.stanford.edu/~tjw/jsbn/\n//\n// All public methods have been removed except the following:\n//   new BigInteger(a, b) (only radix 2, 4, 8, 16 and 32 supported)\n//   toString (only radix 2, 4, 8, 16 and 32 supported)\n//   negate\n//   abs\n//   compareTo\n//   bitLength\n//   mod\n//   equals\n//   add\n//   subtract\n//   multiply\n//   divide\n//   modPow\nexport default BigInteger;\n/*\n * Copyright (c) 2003-2005  Tom Wu\n * All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS-IS\" AND WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY\n * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.\n *\n * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,\n * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER\n * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF\n * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT\n * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n *\n * In addition, the following condition applies:\n *\n * All redistributions must retain an intact copy of this copyright notice\n * and disclaimer.\n */\n// (public) Constructor\n\nfunction BigInteger(a, b) {\n  if (a != null) this.fromString(a, b);\n} // return new, unset BigInteger\n\n\nfunction nbi() {\n  return new BigInteger(null);\n} // Bits per digit\n\n\nvar dbits; // JavaScript engine analysis\n\nvar canary = 0xdeadbeefcafe;\nvar j_lm = (canary & 0xffffff) == 0xefcafe; // am: Compute w_j += (x*this_i), propagate carries,\n// c is initial carry, returns final carry.\n// c < 3*dvalue, x < 2*dvalue, this_i < dvalue\n// We need to select the fastest one that works in this environment.\n// am1: use a single mult and divide to get the high bits,\n// max digit bits should be 26 because\n// max internal value = 2*dvalue^2-2*dvalue (< 2^53)\n\nfunction am1(i, x, w, j, c, n) {\n  while (--n >= 0) {\n    var v = x * this[i++] + w[j] + c;\n    c = Math.floor(v / 0x4000000);\n    w[j++] = v & 0x3ffffff;\n  }\n\n  return c;\n} // am2 avoids a big mult-and-extract completely.\n// Max digit bits should be <= 30 because we do bitwise ops\n// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)\n\n\nfunction am2(i, x, w, j, c, n) {\n  var xl = x & 0x7fff,\n      xh = x >> 15;\n\n  while (--n >= 0) {\n    var l = this[i] & 0x7fff;\n    var h = this[i++] >> 15;\n    var m = xh * l + h * xl;\n    l = xl * l + ((m & 0x7fff) << 15) + w[j] + (c & 0x3fffffff);\n    c = (l >>> 30) + (m >>> 15) + xh * h + (c >>> 30);\n    w[j++] = l & 0x3fffffff;\n  }\n\n  return c;\n} // Alternately, set max digit bits to 28 since some\n// browsers slow down when dealing with 32-bit numbers.\n\n\nfunction am3(i, x, w, j, c, n) {\n  var xl = x & 0x3fff,\n      xh = x >> 14;\n\n  while (--n >= 0) {\n    var l = this[i] & 0x3fff;\n    var h = this[i++] >> 14;\n    var m = xh * l + h * xl;\n    l = xl * l + ((m & 0x3fff) << 14) + w[j] + c;\n    c = (l >> 28) + (m >> 14) + xh * h;\n    w[j++] = l & 0xfffffff;\n  }\n\n  return c;\n}\n\nvar inBrowser = typeof navigator !== 'undefined';\n\nif (inBrowser && j_lm && navigator.appName == 'Microsoft Internet Explorer') {\n  BigInteger.prototype.am = am2;\n  dbits = 30;\n} else if (inBrowser && j_lm && navigator.appName != 'Netscape') {\n  BigInteger.prototype.am = am1;\n  dbits = 26;\n} else {\n  // Mozilla/Netscape seems to prefer am3\n  BigInteger.prototype.am = am3;\n  dbits = 28;\n}\n\nBigInteger.prototype.DB = dbits;\nBigInteger.prototype.DM = (1 << dbits) - 1;\nBigInteger.prototype.DV = 1 << dbits;\nvar BI_FP = 52;\nBigInteger.prototype.FV = Math.pow(2, BI_FP);\nBigInteger.prototype.F1 = BI_FP - dbits;\nBigInteger.prototype.F2 = 2 * dbits - BI_FP; // Digit conversions\n\nvar BI_RM = '0123456789abcdefghijklmnopqrstuvwxyz';\nvar BI_RC = new Array();\nvar rr, vv;\nrr = '0'.charCodeAt(0);\n\nfor (vv = 0; vv <= 9; ++vv) {\n  BI_RC[rr++] = vv;\n}\n\nrr = 'a'.charCodeAt(0);\n\nfor (vv = 10; vv < 36; ++vv) {\n  BI_RC[rr++] = vv;\n}\n\nrr = 'A'.charCodeAt(0);\n\nfor (vv = 10; vv < 36; ++vv) {\n  BI_RC[rr++] = vv;\n}\n\nfunction int2char(n) {\n  return BI_RM.charAt(n);\n}\n\nfunction intAt(s, i) {\n  var c = BI_RC[s.charCodeAt(i)];\n  return c == null ? -1 : c;\n} // (protected) copy this to r\n\n\nfunction bnpCopyTo(r) {\n  for (var i = this.t - 1; i >= 0; --i) {\n    r[i] = this[i];\n  }\n\n  r.t = this.t;\n  r.s = this.s;\n} // (protected) set from integer value x, -DV <= x < DV\n\n\nfunction bnpFromInt(x) {\n  this.t = 1;\n  this.s = x < 0 ? -1 : 0;\n  if (x > 0) this[0] = x;else if (x < -1) this[0] = x + this.DV;else this.t = 0;\n} // return bigint initialized to value\n\n\nfunction nbv(i) {\n  var r = nbi();\n  r.fromInt(i);\n  return r;\n} // (protected) set from string and radix\n\n\nfunction bnpFromString(s, b) {\n  var k;\n  if (b == 16) k = 4;else if (b == 8) k = 3;else if (b == 2) k = 1;else if (b == 32) k = 5;else if (b == 4) k = 2;else throw new Error('Only radix 2, 4, 8, 16, 32 are supported');\n  this.t = 0;\n  this.s = 0;\n  var i = s.length,\n      mi = false,\n      sh = 0;\n\n  while (--i >= 0) {\n    var x = intAt(s, i);\n\n    if (x < 0) {\n      if (s.charAt(i) == '-') mi = true;\n      continue;\n    }\n\n    mi = false;\n    if (sh == 0) this[this.t++] = x;else if (sh + k > this.DB) {\n      this[this.t - 1] |= (x & (1 << this.DB - sh) - 1) << sh;\n      this[this.t++] = x >> this.DB - sh;\n    } else this[this.t - 1] |= x << sh;\n    sh += k;\n    if (sh >= this.DB) sh -= this.DB;\n  }\n\n  this.clamp();\n  if (mi) BigInteger.ZERO.subTo(this, this);\n} // (protected) clamp off excess high words\n\n\nfunction bnpClamp() {\n  var c = this.s & this.DM;\n\n  while (this.t > 0 && this[this.t - 1] == c) {\n    --this.t;\n  }\n} // (public) return string representation in given radix\n\n\nfunction bnToString(b) {\n  if (this.s < 0) return '-' + this.negate().toString(b);\n  var k;\n  if (b == 16) k = 4;else if (b == 8) k = 3;else if (b == 2) k = 1;else if (b == 32) k = 5;else if (b == 4) k = 2;else throw new Error('Only radix 2, 4, 8, 16, 32 are supported');\n  var km = (1 << k) - 1,\n      d,\n      m = false,\n      r = '',\n      i = this.t;\n  var p = this.DB - i * this.DB % k;\n\n  if (i-- > 0) {\n    if (p < this.DB && (d = this[i] >> p) > 0) {\n      m = true;\n      r = int2char(d);\n    }\n\n    while (i >= 0) {\n      if (p < k) {\n        d = (this[i] & (1 << p) - 1) << k - p;\n        d |= this[--i] >> (p += this.DB - k);\n      } else {\n        d = this[i] >> (p -= k) & km;\n\n        if (p <= 0) {\n          p += this.DB;\n          --i;\n        }\n      }\n\n      if (d > 0) m = true;\n      if (m) r += int2char(d);\n    }\n  }\n\n  return m ? r : '0';\n} // (public) -this\n\n\nfunction bnNegate() {\n  var r = nbi();\n  BigInteger.ZERO.subTo(this, r);\n  return r;\n} // (public) |this|\n\n\nfunction bnAbs() {\n  return this.s < 0 ? this.negate() : this;\n} // (public) return + if this > a, - if this < a, 0 if equal\n\n\nfunction bnCompareTo(a) {\n  var r = this.s - a.s;\n  if (r != 0) return r;\n  var i = this.t;\n  r = i - a.t;\n  if (r != 0) return this.s < 0 ? -r : r;\n\n  while (--i >= 0) {\n    if ((r = this[i] - a[i]) != 0) return r;\n  }\n\n  return 0;\n} // returns bit length of the integer x\n\n\nfunction nbits(x) {\n  var r = 1,\n      t;\n\n  if ((t = x >>> 16) != 0) {\n    x = t;\n    r += 16;\n  }\n\n  if ((t = x >> 8) != 0) {\n    x = t;\n    r += 8;\n  }\n\n  if ((t = x >> 4) != 0) {\n    x = t;\n    r += 4;\n  }\n\n  if ((t = x >> 2) != 0) {\n    x = t;\n    r += 2;\n  }\n\n  if ((t = x >> 1) != 0) {\n    x = t;\n    r += 1;\n  }\n\n  return r;\n} // (public) return the number of bits in \"this\"\n\n\nfunction bnBitLength() {\n  if (this.t <= 0) return 0;\n  return this.DB * (this.t - 1) + nbits(this[this.t - 1] ^ this.s & this.DM);\n} // (protected) r = this << n*DB\n\n\nfunction bnpDLShiftTo(n, r) {\n  var i;\n\n  for (i = this.t - 1; i >= 0; --i) {\n    r[i + n] = this[i];\n  }\n\n  for (i = n - 1; i >= 0; --i) {\n    r[i] = 0;\n  }\n\n  r.t = this.t + n;\n  r.s = this.s;\n} // (protected) r = this >> n*DB\n\n\nfunction bnpDRShiftTo(n, r) {\n  for (var i = n; i < this.t; ++i) {\n    r[i - n] = this[i];\n  }\n\n  r.t = Math.max(this.t - n, 0);\n  r.s = this.s;\n} // (protected) r = this << n\n\n\nfunction bnpLShiftTo(n, r) {\n  var bs = n % this.DB;\n  var cbs = this.DB - bs;\n  var bm = (1 << cbs) - 1;\n  var ds = Math.floor(n / this.DB),\n      c = this.s << bs & this.DM,\n      i;\n\n  for (i = this.t - 1; i >= 0; --i) {\n    r[i + ds + 1] = this[i] >> cbs | c;\n    c = (this[i] & bm) << bs;\n  }\n\n  for (i = ds - 1; i >= 0; --i) {\n    r[i] = 0;\n  }\n\n  r[ds] = c;\n  r.t = this.t + ds + 1;\n  r.s = this.s;\n  r.clamp();\n} // (protected) r = this >> n\n\n\nfunction bnpRShiftTo(n, r) {\n  r.s = this.s;\n  var ds = Math.floor(n / this.DB);\n\n  if (ds >= this.t) {\n    r.t = 0;\n    return;\n  }\n\n  var bs = n % this.DB;\n  var cbs = this.DB - bs;\n  var bm = (1 << bs) - 1;\n  r[0] = this[ds] >> bs;\n\n  for (var i = ds + 1; i < this.t; ++i) {\n    r[i - ds - 1] |= (this[i] & bm) << cbs;\n    r[i - ds] = this[i] >> bs;\n  }\n\n  if (bs > 0) r[this.t - ds - 1] |= (this.s & bm) << cbs;\n  r.t = this.t - ds;\n  r.clamp();\n} // (protected) r = this - a\n\n\nfunction bnpSubTo(a, r) {\n  var i = 0,\n      c = 0,\n      m = Math.min(a.t, this.t);\n\n  while (i < m) {\n    c += this[i] - a[i];\n    r[i++] = c & this.DM;\n    c >>= this.DB;\n  }\n\n  if (a.t < this.t) {\n    c -= a.s;\n\n    while (i < this.t) {\n      c += this[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n\n    c += this.s;\n  } else {\n    c += this.s;\n\n    while (i < a.t) {\n      c -= a[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n\n    c -= a.s;\n  }\n\n  r.s = c < 0 ? -1 : 0;\n  if (c < -1) r[i++] = this.DV + c;else if (c > 0) r[i++] = c;\n  r.t = i;\n  r.clamp();\n} // (protected) r = this * a, r != this,a (HAC 14.12)\n// \"this\" should be the larger one if appropriate.\n\n\nfunction bnpMultiplyTo(a, r) {\n  var x = this.abs(),\n      y = a.abs();\n  var i = x.t;\n  r.t = i + y.t;\n\n  while (--i >= 0) {\n    r[i] = 0;\n  }\n\n  for (i = 0; i < y.t; ++i) {\n    r[i + x.t] = x.am(0, y[i], r, i, 0, x.t);\n  }\n\n  r.s = 0;\n  r.clamp();\n  if (this.s != a.s) BigInteger.ZERO.subTo(r, r);\n} // (protected) r = this^2, r != this (HAC 14.16)\n\n\nfunction bnpSquareTo(r) {\n  var x = this.abs();\n  var i = r.t = 2 * x.t;\n\n  while (--i >= 0) {\n    r[i] = 0;\n  }\n\n  for (i = 0; i < x.t - 1; ++i) {\n    var c = x.am(i, x[i], r, 2 * i, 0, 1);\n\n    if ((r[i + x.t] += x.am(i + 1, 2 * x[i], r, 2 * i + 1, c, x.t - i - 1)) >= x.DV) {\n      r[i + x.t] -= x.DV;\n      r[i + x.t + 1] = 1;\n    }\n  }\n\n  if (r.t > 0) r[r.t - 1] += x.am(i, x[i], r, 2 * i, 0, 1);\n  r.s = 0;\n  r.clamp();\n} // (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)\n// r != q, this != m.  q or r may be null.\n\n\nfunction bnpDivRemTo(m, q, r) {\n  var pm = m.abs();\n  if (pm.t <= 0) return;\n  var pt = this.abs();\n\n  if (pt.t < pm.t) {\n    if (q != null) q.fromInt(0);\n    if (r != null) this.copyTo(r);\n    return;\n  }\n\n  if (r == null) r = nbi();\n  var y = nbi(),\n      ts = this.s,\n      ms = m.s;\n  var nsh = this.DB - nbits(pm[pm.t - 1]); // normalize modulus\n\n  if (nsh > 0) {\n    pm.lShiftTo(nsh, y);\n    pt.lShiftTo(nsh, r);\n  } else {\n    pm.copyTo(y);\n    pt.copyTo(r);\n  }\n\n  var ys = y.t;\n  var y0 = y[ys - 1];\n  if (y0 == 0) return;\n  var yt = y0 * (1 << this.F1) + (ys > 1 ? y[ys - 2] >> this.F2 : 0);\n  var d1 = this.FV / yt,\n      d2 = (1 << this.F1) / yt,\n      e = 1 << this.F2;\n  var i = r.t,\n      j = i - ys,\n      t = q == null ? nbi() : q;\n  y.dlShiftTo(j, t);\n\n  if (r.compareTo(t) >= 0) {\n    r[r.t++] = 1;\n    r.subTo(t, r);\n  }\n\n  BigInteger.ONE.dlShiftTo(ys, t);\n  t.subTo(y, y); // \"negative\" y so we can replace sub with am later\n\n  while (y.t < ys) {\n    y[y.t++] = 0;\n  }\n\n  while (--j >= 0) {\n    // Estimate quotient digit\n    var qd = r[--i] == y0 ? this.DM : Math.floor(r[i] * d1 + (r[i - 1] + e) * d2);\n\n    if ((r[i] += y.am(0, qd, r, j, 0, ys)) < qd) {\n      // Try it out\n      y.dlShiftTo(j, t);\n      r.subTo(t, r);\n\n      while (r[i] < --qd) {\n        r.subTo(t, r);\n      }\n    }\n  }\n\n  if (q != null) {\n    r.drShiftTo(ys, q);\n    if (ts != ms) BigInteger.ZERO.subTo(q, q);\n  }\n\n  r.t = ys;\n  r.clamp();\n  if (nsh > 0) r.rShiftTo(nsh, r); // Denormalize remainder\n\n  if (ts < 0) BigInteger.ZERO.subTo(r, r);\n} // (public) this mod a\n\n\nfunction bnMod(a) {\n  var r = nbi();\n  this.abs().divRemTo(a, null, r);\n  if (this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) a.subTo(r, r);\n  return r;\n} // (protected) return \"-1/this % 2^DB\"; useful for Mont. reduction\n// justification:\n//         xy == 1 (mod m)\n//         xy =  1+km\n//   xy(2-xy) = (1+km)(1-km)\n// x[y(2-xy)] = 1-k^2m^2\n// x[y(2-xy)] == 1 (mod m^2)\n// if y is 1/x mod m, then y(2-xy) is 1/x mod m^2\n// should reduce x and y(2-xy) by m^2 at each step to keep size bounded.\n// JS multiply \"overflows\" differently from C/C++, so care is needed here.\n\n\nfunction bnpInvDigit() {\n  if (this.t < 1) return 0;\n  var x = this[0];\n  if ((x & 1) == 0) return 0;\n  var y = x & 3; // y == 1/x mod 2^2\n\n  y = y * (2 - (x & 0xf) * y) & 0xf; // y == 1/x mod 2^4\n\n  y = y * (2 - (x & 0xff) * y) & 0xff; // y == 1/x mod 2^8\n\n  y = y * (2 - ((x & 0xffff) * y & 0xffff)) & 0xffff; // y == 1/x mod 2^16\n  // last step - calculate inverse mod DV directly;\n  // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints\n\n  y = y * (2 - x * y % this.DV) % this.DV; // y == 1/x mod 2^dbits\n  // we really want the negative inverse, and -DV < y < DV\n\n  return y > 0 ? this.DV - y : -y;\n}\n\nfunction bnEquals(a) {\n  return this.compareTo(a) == 0;\n} // (protected) r = this + a\n\n\nfunction bnpAddTo(a, r) {\n  var i = 0,\n      c = 0,\n      m = Math.min(a.t, this.t);\n\n  while (i < m) {\n    c += this[i] + a[i];\n    r[i++] = c & this.DM;\n    c >>= this.DB;\n  }\n\n  if (a.t < this.t) {\n    c += a.s;\n\n    while (i < this.t) {\n      c += this[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n\n    c += this.s;\n  } else {\n    c += this.s;\n\n    while (i < a.t) {\n      c += a[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n\n    c += a.s;\n  }\n\n  r.s = c < 0 ? -1 : 0;\n  if (c > 0) r[i++] = c;else if (c < -1) r[i++] = this.DV + c;\n  r.t = i;\n  r.clamp();\n} // (public) this + a\n\n\nfunction bnAdd(a) {\n  var r = nbi();\n  this.addTo(a, r);\n  return r;\n} // (public) this - a\n\n\nfunction bnSubtract(a) {\n  var r = nbi();\n  this.subTo(a, r);\n  return r;\n} // (public) this * a\n\n\nfunction bnMultiply(a) {\n  var r = nbi();\n  this.multiplyTo(a, r);\n  return r;\n} // (public) this / a\n\n\nfunction bnDivide(a) {\n  var r = nbi();\n  this.divRemTo(a, r, null);\n  return r;\n} // Montgomery reduction\n\n\nfunction Montgomery(m) {\n  this.m = m;\n  this.mp = m.invDigit();\n  this.mpl = this.mp & 0x7fff;\n  this.mph = this.mp >> 15;\n  this.um = (1 << m.DB - 15) - 1;\n  this.mt2 = 2 * m.t;\n} // xR mod m\n\n\nfunction montConvert(x) {\n  var r = nbi();\n  x.abs().dlShiftTo(this.m.t, r);\n  r.divRemTo(this.m, null, r);\n  if (x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) this.m.subTo(r, r);\n  return r;\n} // x/R mod m\n\n\nfunction montRevert(x) {\n  var r = nbi();\n  x.copyTo(r);\n  this.reduce(r);\n  return r;\n} // x = x/R mod m (HAC 14.32)\n\n\nfunction montReduce(x) {\n  while (x.t <= this.mt2) {\n    // pad x so am has enough room later\n    x[x.t++] = 0;\n  }\n\n  for (var i = 0; i < this.m.t; ++i) {\n    // faster way of calculating u0 = x[i]*mp mod DV\n    var j = x[i] & 0x7fff;\n    var u0 = j * this.mpl + ((j * this.mph + (x[i] >> 15) * this.mpl & this.um) << 15) & x.DM; // use am to combine the multiply-shift-add into one call\n\n    j = i + this.m.t;\n    x[j] += this.m.am(0, u0, x, i, 0, this.m.t); // propagate carry\n\n    while (x[j] >= x.DV) {\n      x[j] -= x.DV;\n      x[++j]++;\n    }\n  }\n\n  x.clamp();\n  x.drShiftTo(this.m.t, x);\n  if (x.compareTo(this.m) >= 0) x.subTo(this.m, x);\n} // r = \"x^2/R mod m\"; x != r\n\n\nfunction montSqrTo(x, r) {\n  x.squareTo(r);\n  this.reduce(r);\n} // r = \"xy/R mod m\"; x,y != r\n\n\nfunction montMulTo(x, y, r) {\n  x.multiplyTo(y, r);\n  this.reduce(r);\n}\n\nMontgomery.prototype.convert = montConvert;\nMontgomery.prototype.revert = montRevert;\nMontgomery.prototype.reduce = montReduce;\nMontgomery.prototype.mulTo = montMulTo;\nMontgomery.prototype.sqrTo = montSqrTo; // (public) this^e % m (HAC 14.85)\n\nfunction bnModPow(e, m, callback) {\n  var i = e.bitLength(),\n      k,\n      r = nbv(1),\n      z = new Montgomery(m);\n  if (i <= 0) return r;else if (i < 18) k = 1;else if (i < 48) k = 3;else if (i < 144) k = 4;else if (i < 768) k = 5;else k = 6; // precomputation\n\n  var g = new Array(),\n      n = 3,\n      k1 = k - 1,\n      km = (1 << k) - 1;\n  g[1] = z.convert(this);\n\n  if (k > 1) {\n    var g2 = nbi();\n    z.sqrTo(g[1], g2);\n\n    while (n <= km) {\n      g[n] = nbi();\n      z.mulTo(g2, g[n - 2], g[n]);\n      n += 2;\n    }\n  }\n\n  var j = e.t - 1,\n      w,\n      is1 = true,\n      r2 = nbi(),\n      t;\n  i = nbits(e[j]) - 1;\n\n  while (j >= 0) {\n    if (i >= k1) w = e[j] >> i - k1 & km;else {\n      w = (e[j] & (1 << i + 1) - 1) << k1 - i;\n      if (j > 0) w |= e[j - 1] >> this.DB + i - k1;\n    }\n    n = k;\n\n    while ((w & 1) == 0) {\n      w >>= 1;\n      --n;\n    }\n\n    if ((i -= n) < 0) {\n      i += this.DB;\n      --j;\n    }\n\n    if (is1) {\n      // ret == 1, don't bother squaring or multiplying it\n      g[w].copyTo(r);\n      is1 = false;\n    } else {\n      while (n > 1) {\n        z.sqrTo(r, r2);\n        z.sqrTo(r2, r);\n        n -= 2;\n      }\n\n      if (n > 0) z.sqrTo(r, r2);else {\n        t = r;\n        r = r2;\n        r2 = t;\n      }\n      z.mulTo(r2, g[w], r);\n    }\n\n    while (j >= 0 && (e[j] & 1 << i) == 0) {\n      z.sqrTo(r, r2);\n      t = r;\n      r = r2;\n      r2 = t;\n\n      if (--i < 0) {\n        i = this.DB - 1;\n        --j;\n      }\n    }\n  }\n\n  var result = z.revert(r);\n  callback(null, result);\n  return result;\n} // protected\n\n\nBigInteger.prototype.copyTo = bnpCopyTo;\nBigInteger.prototype.fromInt = bnpFromInt;\nBigInteger.prototype.fromString = bnpFromString;\nBigInteger.prototype.clamp = bnpClamp;\nBigInteger.prototype.dlShiftTo = bnpDLShiftTo;\nBigInteger.prototype.drShiftTo = bnpDRShiftTo;\nBigInteger.prototype.lShiftTo = bnpLShiftTo;\nBigInteger.prototype.rShiftTo = bnpRShiftTo;\nBigInteger.prototype.subTo = bnpSubTo;\nBigInteger.prototype.multiplyTo = bnpMultiplyTo;\nBigInteger.prototype.squareTo = bnpSquareTo;\nBigInteger.prototype.divRemTo = bnpDivRemTo;\nBigInteger.prototype.invDigit = bnpInvDigit;\nBigInteger.prototype.addTo = bnpAddTo; // public\n\nBigInteger.prototype.toString = bnToString;\nBigInteger.prototype.negate = bnNegate;\nBigInteger.prototype.abs = bnAbs;\nBigInteger.prototype.compareTo = bnCompareTo;\nBigInteger.prototype.bitLength = bnBitLength;\nBigInteger.prototype.mod = bnMod;\nBigInteger.prototype.equals = bnEquals;\nBigInteger.prototype.add = bnAdd;\nBigInteger.prototype.subtract = bnSubtract;\nBigInteger.prototype.multiply = bnMultiply;\nBigInteger.prototype.divide = bnDivide;\nBigInteger.prototype.modPow = bnModPow; // \"constants\"\n\nBigInteger.ZERO = nbv(0);\nBigInteger.ONE = nbv(1);","/*!\n * Copyright 2016 Amazon.com,\n * Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\").\n * You may not use this file except in compliance with the\n * License. A copy of the License is located at\n *\n *     http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, express or implied. See the License\n * for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @class */\nvar AuthenticationDetails = /*#__PURE__*/function () {\n  /**\n   * Constructs a new AuthenticationDetails object\n   * @param {object=} data Creation options.\n   * @param {string} data.Username User being authenticated.\n   * @param {string} data.Password Plain-text password to authenticate with.\n   * @param {(AttributeArg[])?} data.ValidationData Application extra metadata.\n   * @param {(AttributeArg[])?} data.AuthParamaters Authentication paramaters for custom auth.\n   */\n  function AuthenticationDetails(data) {\n    var _ref = data || {},\n        ValidationData = _ref.ValidationData,\n        Username = _ref.Username,\n        Password = _ref.Password,\n        AuthParameters = _ref.AuthParameters,\n        ClientMetadata = _ref.ClientMetadata;\n\n    this.validationData = ValidationData || {};\n    this.authParameters = AuthParameters || {};\n    this.clientMetadata = ClientMetadata || {};\n    this.username = Username;\n    this.password = Password;\n  }\n  /**\n   * @returns {string} the record's username\n   */\n\n\n  var _proto = AuthenticationDetails.prototype;\n\n  _proto.getUsername = function getUsername() {\n    return this.username;\n  }\n  /**\n   * @returns {string} the record's password\n   */\n  ;\n\n  _proto.getPassword = function getPassword() {\n    return this.password;\n  }\n  /**\n   * @returns {Array} the record's validationData\n   */\n  ;\n\n  _proto.getValidationData = function getValidationData() {\n    return this.validationData;\n  }\n  /**\n   * @returns {Array} the record's authParameters\n   */\n  ;\n\n  _proto.getAuthParameters = function getAuthParameters() {\n    return this.authParameters;\n  }\n  /**\n   * @returns {ClientMetadata} the clientMetadata for a Lambda trigger\n   */\n  ;\n\n  _proto.getClientMetadata = function getClientMetadata() {\n    return this.clientMetadata;\n  };\n\n  return AuthenticationDetails;\n}();\n\nexport { AuthenticationDetails as default };","/*!\n * Copyright 2016 Amazon.com,\n * Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\").\n * You may not use this file except in compliance with the\n * License. A copy of the License is located at\n *\n *     http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, express or implied. See the License\n * for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Buffer } from 'buffer/';\nimport CryptoJS from 'crypto-js/core';\nimport 'crypto-js/lib-typedarrays'; // necessary for crypto js\n\nimport SHA256 from 'crypto-js/sha256';\nimport HmacSHA256 from 'crypto-js/hmac-sha256';\n\nvar randomBytes = function randomBytes(nBytes) {\n  return Buffer.from(CryptoJS.lib.WordArray.random(nBytes).toString(), 'hex');\n};\n\nimport BigInteger from './BigInteger';\nvar initN = 'FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD1' + '29024E088A67CC74020BBEA63B139B22514A08798E3404DD' + 'EF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245' + 'E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7ED' + 'EE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3D' + 'C2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F' + '83655D23DCA3AD961C62F356208552BB9ED529077096966D' + '670C354E4ABC9804F1746C08CA18217C32905E462E36CE3B' + 'E39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9' + 'DE2BCBF6955817183995497CEA956AE515D2261898FA0510' + '15728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64' + 'ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7' + 'ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6B' + 'F12FFA06D98A0864D87602733EC86A64521F2B18177B200C' + 'BBE117577A615D6C770988C0BAD946E208E24FA074E5AB31' + '43DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF';\nvar newPasswordRequiredChallengeUserAttributePrefix = 'userAttributes.';\n/** @class */\n\nvar AuthenticationHelper = /*#__PURE__*/function () {\n  /**\n   * Constructs a new AuthenticationHelper object\n   * @param {string} PoolName Cognito user pool name.\n   */\n  function AuthenticationHelper(PoolName) {\n    this.N = new BigInteger(initN, 16);\n    this.g = new BigInteger('2', 16);\n    this.k = new BigInteger(this.hexHash(\"00\" + this.N.toString(16) + \"0\" + this.g.toString(16)), 16);\n    this.smallAValue = this.generateRandomSmallA();\n    this.getLargeAValue(function () {});\n    this.infoBits = Buffer.from('Caldera Derived Key', 'utf8');\n    this.poolName = PoolName;\n  }\n  /**\n   * @returns {BigInteger} small A, a random number\n   */\n\n\n  var _proto = AuthenticationHelper.prototype;\n\n  _proto.getSmallAValue = function getSmallAValue() {\n    return this.smallAValue;\n  }\n  /**\n   * @param {nodeCallback<BigInteger>} callback Called with (err, largeAValue)\n   * @returns {void}\n   */\n  ;\n\n  _proto.getLargeAValue = function getLargeAValue(callback) {\n    var _this = this;\n\n    if (this.largeAValue) {\n      callback(null, this.largeAValue);\n    } else {\n      this.calculateA(this.smallAValue, function (err, largeAValue) {\n        if (err) {\n          callback(err, null);\n        }\n\n        _this.largeAValue = largeAValue;\n        callback(null, _this.largeAValue);\n      });\n    }\n  }\n  /**\n   * helper function to generate a random big integer\n   * @returns {BigInteger} a random value.\n   * @private\n   */\n  ;\n\n  _proto.generateRandomSmallA = function generateRandomSmallA() {\n    var hexRandom = randomBytes(128).toString('hex');\n    var randomBigInt = new BigInteger(hexRandom, 16);\n    var smallABigInt = randomBigInt.mod(this.N);\n    return smallABigInt;\n  }\n  /**\n   * helper function to generate a random string\n   * @returns {string} a random value.\n   * @private\n   */\n  ;\n\n  _proto.generateRandomString = function generateRandomString() {\n    return randomBytes(40).toString('base64');\n  }\n  /**\n   * @returns {string} Generated random value included in password hash.\n   */\n  ;\n\n  _proto.getRandomPassword = function getRandomPassword() {\n    return this.randomPassword;\n  }\n  /**\n   * @returns {string} Generated random value included in devices hash.\n   */\n  ;\n\n  _proto.getSaltDevices = function getSaltDevices() {\n    return this.SaltToHashDevices;\n  }\n  /**\n   * @returns {string} Value used to verify devices.\n   */\n  ;\n\n  _proto.getVerifierDevices = function getVerifierDevices() {\n    return this.verifierDevices;\n  }\n  /**\n   * Generate salts and compute verifier.\n   * @param {string} deviceGroupKey Devices to generate verifier for.\n   * @param {string} username User to generate verifier for.\n   * @param {nodeCallback<null>} callback Called with (err, null)\n   * @returns {void}\n   */\n  ;\n\n  _proto.generateHashDevice = function generateHashDevice(deviceGroupKey, username, callback) {\n    var _this2 = this;\n\n    this.randomPassword = this.generateRandomString();\n    var combinedString = \"\" + deviceGroupKey + username + \":\" + this.randomPassword;\n    var hashedString = this.hash(combinedString);\n    var hexRandom = randomBytes(16).toString('hex');\n    this.SaltToHashDevices = this.padHex(new BigInteger(hexRandom, 16));\n    this.g.modPow(new BigInteger(this.hexHash(this.SaltToHashDevices + hashedString), 16), this.N, function (err, verifierDevicesNotPadded) {\n      if (err) {\n        callback(err, null);\n      }\n\n      _this2.verifierDevices = _this2.padHex(verifierDevicesNotPadded);\n      callback(null, null);\n    });\n  }\n  /**\n   * Calculate the client's public value A = g^a%N\n   * with the generated random number a\n   * @param {BigInteger} a Randomly generated small A.\n   * @param {nodeCallback<BigInteger>} callback Called with (err, largeAValue)\n   * @returns {void}\n   * @private\n   */\n  ;\n\n  _proto.calculateA = function calculateA(a, callback) {\n    var _this3 = this;\n\n    this.g.modPow(a, this.N, function (err, A) {\n      if (err) {\n        callback(err, null);\n      }\n\n      if (A.mod(_this3.N).equals(BigInteger.ZERO)) {\n        callback(new Error('Illegal paramater. A mod N cannot be 0.'), null);\n      }\n\n      callback(null, A);\n    });\n  }\n  /**\n   * Calculate the client's value U which is the hash of A and B\n   * @param {BigInteger} A Large A value.\n   * @param {BigInteger} B Server B value.\n   * @returns {BigInteger} Computed U value.\n   * @private\n   */\n  ;\n\n  _proto.calculateU = function calculateU(A, B) {\n    this.UHexHash = this.hexHash(this.padHex(A) + this.padHex(B));\n    var finalU = new BigInteger(this.UHexHash, 16);\n    return finalU;\n  }\n  /**\n   * Calculate a hash from a bitArray\n   * @param {Buffer} buf Value to hash.\n   * @returns {String} Hex-encoded hash.\n   * @private\n   */\n  ;\n\n  _proto.hash = function hash(buf) {\n    var str = buf instanceof Buffer ? CryptoJS.lib.WordArray.create(buf) : buf;\n    var hashHex = SHA256(str).toString();\n    return new Array(64 - hashHex.length).join('0') + hashHex;\n  }\n  /**\n   * Calculate a hash from a hex string\n   * @param {String} hexStr Value to hash.\n   * @returns {String} Hex-encoded hash.\n   * @private\n   */\n  ;\n\n  _proto.hexHash = function hexHash(hexStr) {\n    return this.hash(Buffer.from(hexStr, 'hex'));\n  }\n  /**\n   * Standard hkdf algorithm\n   * @param {Buffer} ikm Input key material.\n   * @param {Buffer} salt Salt value.\n   * @returns {Buffer} Strong key material.\n   * @private\n   */\n  ;\n\n  _proto.computehkdf = function computehkdf(ikm, salt) {\n    var infoBitsWordArray = CryptoJS.lib.WordArray.create(Buffer.concat([this.infoBits, Buffer.from(String.fromCharCode(1), 'utf8')]));\n    var ikmWordArray = ikm instanceof Buffer ? CryptoJS.lib.WordArray.create(ikm) : ikm;\n    var saltWordArray = salt instanceof Buffer ? CryptoJS.lib.WordArray.create(salt) : salt;\n    var prk = HmacSHA256(ikmWordArray, saltWordArray);\n    var hmac = HmacSHA256(infoBitsWordArray, prk);\n    return Buffer.from(hmac.toString(), 'hex').slice(0, 16);\n  }\n  /**\n   * Calculates the final hkdf based on computed S value, and computed U value and the key\n   * @param {String} username Username.\n   * @param {String} password Password.\n   * @param {BigInteger} serverBValue Server B value.\n   * @param {BigInteger} salt Generated salt.\n   * @param {nodeCallback<Buffer>} callback Called with (err, hkdfValue)\n   * @returns {void}\n   */\n  ;\n\n  _proto.getPasswordAuthenticationKey = function getPasswordAuthenticationKey(username, password, serverBValue, salt, callback) {\n    var _this4 = this;\n\n    if (serverBValue.mod(this.N).equals(BigInteger.ZERO)) {\n      throw new Error('B cannot be zero.');\n    }\n\n    this.UValue = this.calculateU(this.largeAValue, serverBValue);\n\n    if (this.UValue.equals(BigInteger.ZERO)) {\n      throw new Error('U cannot be zero.');\n    }\n\n    var usernamePassword = \"\" + this.poolName + username + \":\" + password;\n    var usernamePasswordHash = this.hash(usernamePassword);\n    var xValue = new BigInteger(this.hexHash(this.padHex(salt) + usernamePasswordHash), 16);\n    this.calculateS(xValue, serverBValue, function (err, sValue) {\n      if (err) {\n        callback(err, null);\n      }\n\n      var hkdf = _this4.computehkdf(Buffer.from(_this4.padHex(sValue), 'hex'), Buffer.from(_this4.padHex(_this4.UValue.toString(16)), 'hex'));\n\n      callback(null, hkdf);\n    });\n  }\n  /**\n   * Calculates the S value used in getPasswordAuthenticationKey\n   * @param {BigInteger} xValue Salted password hash value.\n   * @param {BigInteger} serverBValue Server B value.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */\n  ;\n\n  _proto.calculateS = function calculateS(xValue, serverBValue, callback) {\n    var _this5 = this;\n\n    this.g.modPow(xValue, this.N, function (err, gModPowXN) {\n      if (err) {\n        callback(err, null);\n      }\n\n      var intValue2 = serverBValue.subtract(_this5.k.multiply(gModPowXN));\n      intValue2.modPow(_this5.smallAValue.add(_this5.UValue.multiply(xValue)), _this5.N, function (err2, result) {\n        if (err2) {\n          callback(err2, null);\n        }\n\n        callback(null, result.mod(_this5.N));\n      });\n    });\n  }\n  /**\n   * Return constant newPasswordRequiredChallengeUserAttributePrefix\n   * @return {newPasswordRequiredChallengeUserAttributePrefix} constant prefix value\n   */\n  ;\n\n  _proto.getNewPasswordRequiredChallengeUserAttributePrefix = function getNewPasswordRequiredChallengeUserAttributePrefix() {\n    return newPasswordRequiredChallengeUserAttributePrefix;\n  }\n  /**\n   * Converts a BigInteger (or hex string) to hex format padded with zeroes for hashing\n   * @param {BigInteger|String} bigInt Number or string to pad.\n   * @returns {String} Padded hex string.\n   */\n  ;\n\n  _proto.padHex = function padHex(bigInt) {\n    var hashStr = bigInt.toString(16);\n\n    if (hashStr.length % 2 === 1) {\n      hashStr = \"0\" + hashStr;\n    } else if ('89ABCDEFabcdef'.indexOf(hashStr[0]) !== -1) {\n      hashStr = \"00\" + hashStr;\n    }\n\n    return hashStr;\n  };\n\n  return AuthenticationHelper;\n}();\n\nexport { AuthenticationHelper as default };","/*!\n * Copyright 2016 Amazon.com,\n * Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\").\n * You may not use this file except in compliance with the\n * License. A copy of the License is located at\n *\n *     http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, express or implied. See the License\n * for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Buffer } from 'buffer/';\n/** @class */\n\nvar CognitoJwtToken = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoJwtToken object\n   * @param {string=} token The JWT token.\n   */\n  function CognitoJwtToken(token) {\n    // Assign object\n    this.jwtToken = token || '';\n    this.payload = this.decodePayload();\n  }\n  /**\n   * @returns {string} the record's token.\n   */\n\n\n  var _proto = CognitoJwtToken.prototype;\n\n  _proto.getJwtToken = function getJwtToken() {\n    return this.jwtToken;\n  }\n  /**\n   * @returns {int} the token's expiration (exp member).\n   */\n  ;\n\n  _proto.getExpiration = function getExpiration() {\n    return this.payload.exp;\n  }\n  /**\n   * @returns {int} the token's \"issued at\" (iat member).\n   */\n  ;\n\n  _proto.getIssuedAt = function getIssuedAt() {\n    return this.payload.iat;\n  }\n  /**\n   * @returns {object} the token's payload.\n   */\n  ;\n\n  _proto.decodePayload = function decodePayload() {\n    var payload = this.jwtToken.split('.')[1];\n\n    try {\n      return JSON.parse(Buffer.from(payload, 'base64').toString('utf8'));\n    } catch (err) {\n      return {};\n    }\n  };\n\n  return CognitoJwtToken;\n}();\n\nexport { CognitoJwtToken as default };","function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\n/*\n * Copyright 2016 Amazon.com,\n * Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\").\n * You may not use this file except in compliance with the\n * License. A copy of the License is located at\n *\n *     http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, express or implied. See the License\n * for the specific language governing permissions and\n * limitations under the License.\n */\nimport CognitoJwtToken from './CognitoJwtToken';\n/** @class */\n\nvar CognitoAccessToken = /*#__PURE__*/function (_CognitoJwtToken) {\n  _inheritsLoose(CognitoAccessToken, _CognitoJwtToken);\n\n  var _super = _createSuper(CognitoAccessToken);\n\n  /**\n   * Constructs a new CognitoAccessToken object\n   * @param {string=} AccessToken The JWT access token.\n   */\n  function CognitoAccessToken(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n        AccessToken = _ref.AccessToken;\n\n    return _CognitoJwtToken.call(this, AccessToken || '') || this;\n  }\n\n  return CognitoAccessToken;\n}(CognitoJwtToken);\n\nexport { CognitoAccessToken as default };","function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\n/*!\n * Copyright 2016 Amazon.com,\n * Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\").\n * You may not use this file except in compliance with the\n * License. A copy of the License is located at\n *\n *     http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, express or implied. See the License\n * for the specific language governing permissions and\n * limitations under the License.\n */\nimport CognitoJwtToken from './CognitoJwtToken';\n/** @class */\n\nvar CognitoIdToken = /*#__PURE__*/function (_CognitoJwtToken) {\n  _inheritsLoose(CognitoIdToken, _CognitoJwtToken);\n\n  var _super = _createSuper(CognitoIdToken);\n\n  /**\n   * Constructs a new CognitoIdToken object\n   * @param {string=} IdToken The JWT Id token\n   */\n  function CognitoIdToken(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n        IdToken = _ref.IdToken;\n\n    return _CognitoJwtToken.call(this, IdToken || '') || this;\n  }\n\n  return CognitoIdToken;\n}(CognitoJwtToken);\n\nexport { CognitoIdToken as default };","/*!\n * Copyright 2016 Amazon.com,\n * Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\").\n * You may not use this file except in compliance with the\n * License. A copy of the License is located at\n *\n *     http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, express or implied. See the License\n * for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @class */\nvar CognitoRefreshToken = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoRefreshToken object\n   * @param {string=} RefreshToken The JWT refresh token.\n   */\n  function CognitoRefreshToken(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n        RefreshToken = _ref.RefreshToken;\n\n    // Assign object\n    this.token = RefreshToken || '';\n  }\n  /**\n   * @returns {string} the record's token.\n   */\n\n\n  var _proto = CognitoRefreshToken.prototype;\n\n  _proto.getToken = function getToken() {\n    return this.token;\n  };\n\n  return CognitoRefreshToken;\n}();\n\nexport { CognitoRefreshToken as default };","/*!\n * Copyright 2016 Amazon.com,\n * Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\").\n * You may not use this file except in compliance with the\n * License. A copy of the License is located at\n *\n *     http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, express or implied. See the License\n * for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @class */\nvar CognitoUserSession = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUserSession object\n   * @param {CognitoIdToken} IdToken The session's Id token.\n   * @param {CognitoRefreshToken=} RefreshToken The session's refresh token.\n   * @param {CognitoAccessToken} AccessToken The session's access token.\n   * @param {int} ClockDrift The saved computer's clock drift or undefined to force calculation.\n   */\n  function CognitoUserSession(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n        IdToken = _ref.IdToken,\n        RefreshToken = _ref.RefreshToken,\n        AccessToken = _ref.AccessToken,\n        ClockDrift = _ref.ClockDrift;\n\n    if (AccessToken == null || IdToken == null) {\n      throw new Error('Id token and Access Token must be present.');\n    }\n\n    this.idToken = IdToken;\n    this.refreshToken = RefreshToken;\n    this.accessToken = AccessToken;\n    this.clockDrift = ClockDrift === undefined ? this.calculateClockDrift() : ClockDrift;\n  }\n  /**\n   * @returns {CognitoIdToken} the session's Id token\n   */\n\n\n  var _proto = CognitoUserSession.prototype;\n\n  _proto.getIdToken = function getIdToken() {\n    return this.idToken;\n  }\n  /**\n   * @returns {CognitoRefreshToken} the session's refresh token\n   */\n  ;\n\n  _proto.getRefreshToken = function getRefreshToken() {\n    return this.refreshToken;\n  }\n  /**\n   * @returns {CognitoAccessToken} the session's access token\n   */\n  ;\n\n  _proto.getAccessToken = function getAccessToken() {\n    return this.accessToken;\n  }\n  /**\n   * @returns {int} the session's clock drift\n   */\n  ;\n\n  _proto.getClockDrift = function getClockDrift() {\n    return this.clockDrift;\n  }\n  /**\n   * @returns {int} the computer's clock drift\n   */\n  ;\n\n  _proto.calculateClockDrift = function calculateClockDrift() {\n    var now = Math.floor(new Date() / 1000);\n    var iat = Math.min(this.accessToken.getIssuedAt(), this.idToken.getIssuedAt());\n    return now - iat;\n  }\n  /**\n   * Checks to see if the session is still valid based on session expiry information found\n   * in tokens and the current time (adjusted with clock drift)\n   * @returns {boolean} if the session is still valid\n   */\n  ;\n\n  _proto.isValid = function isValid() {\n    var now = Math.floor(new Date() / 1000);\n    var adjusted = now - this.clockDrift;\n    return adjusted < this.accessToken.getExpiration() && adjusted < this.idToken.getExpiration();\n  };\n\n  return CognitoUserSession;\n}();\n\nexport { CognitoUserSession as default };","/*!\n * Copyright 2016 Amazon.com,\n * Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\").\n * You may not use this file except in compliance with the\n * License. A copy of the License is located at\n *\n *     http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, express or implied. See the License\n * for the specific language governing permissions and\n * limitations under the License.\n */\nvar monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\nvar weekNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n/** @class */\n\nvar DateHelper = /*#__PURE__*/function () {\n  function DateHelper() {}\n\n  var _proto = DateHelper.prototype;\n\n  /**\n   * @returns {string} The current time in \"ddd MMM D HH:mm:ss UTC YYYY\" format.\n   */\n  _proto.getNowString = function getNowString() {\n    var now = new Date();\n    var weekDay = weekNames[now.getUTCDay()];\n    var month = monthNames[now.getUTCMonth()];\n    var day = now.getUTCDate();\n    var hours = now.getUTCHours();\n\n    if (hours < 10) {\n      hours = \"0\" + hours;\n    }\n\n    var minutes = now.getUTCMinutes();\n\n    if (minutes < 10) {\n      minutes = \"0\" + minutes;\n    }\n\n    var seconds = now.getUTCSeconds();\n\n    if (seconds < 10) {\n      seconds = \"0\" + seconds;\n    }\n\n    var year = now.getUTCFullYear(); // ddd MMM D HH:mm:ss UTC YYYY\n\n    var dateNow = weekDay + \" \" + month + \" \" + day + \" \" + hours + \":\" + minutes + \":\" + seconds + \" UTC \" + year;\n    return dateNow;\n  };\n\n  return DateHelper;\n}();\n\nexport { DateHelper as default };","/*!\n * Copyright 2016 Amazon.com,\n * Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\").\n * You may not use this file except in compliance with the\n * License. A copy of the License is located at\n *\n *     http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, express or implied. See the License\n * for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @class */\nvar CognitoUserAttribute = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUserAttribute object\n   * @param {string=} Name The record's name\n   * @param {string=} Value The record's value\n   */\n  function CognitoUserAttribute(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n        Name = _ref.Name,\n        Value = _ref.Value;\n\n    this.Name = Name || '';\n    this.Value = Value || '';\n  }\n  /**\n   * @returns {string} the record's value.\n   */\n\n\n  var _proto = CognitoUserAttribute.prototype;\n\n  _proto.getValue = function getValue() {\n    return this.Value;\n  }\n  /**\n   * Sets the record's value.\n   * @param {string} value The new value.\n   * @returns {CognitoUserAttribute} The record for method chaining.\n   */\n  ;\n\n  _proto.setValue = function setValue(value) {\n    this.Value = value;\n    return this;\n  }\n  /**\n   * @returns {string} the record's name.\n   */\n  ;\n\n  _proto.getName = function getName() {\n    return this.Name;\n  }\n  /**\n   * Sets the record's name\n   * @param {string} name The new name.\n   * @returns {CognitoUserAttribute} The record for method chaining.\n   */\n  ;\n\n  _proto.setName = function setName(name) {\n    this.Name = name;\n    return this;\n  }\n  /**\n   * @returns {string} a string representation of the record.\n   */\n  ;\n\n  _proto.toString = function toString() {\n    return JSON.stringify(this);\n  }\n  /**\n   * @returns {object} a flat object representing the record.\n   */\n  ;\n\n  _proto.toJSON = function toJSON() {\n    return {\n      Name: this.Name,\n      Value: this.Value\n    };\n  };\n\n  return CognitoUserAttribute;\n}();\n\nexport { CognitoUserAttribute as default };","/*!\n * Copyright 2016 Amazon.com,\n * Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\").\n * You may not use this file except in compliance with the\n * License. A copy of the License is located at\n *\n *     http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, express or implied. See the License\n * for the specific language governing permissions and\n * limitations under the License.\n */\nvar dataMemory = {};\n/** @class */\n\nvar MemoryStorage = /*#__PURE__*/function () {\n  function MemoryStorage() {}\n\n  /**\n   * This is used to set a specific item in storage\n   * @param {string} key - the key for the item\n   * @param {object} value - the value\n   * @returns {string} value that was set\n   */\n  MemoryStorage.setItem = function setItem(key, value) {\n    dataMemory[key] = value;\n    return dataMemory[key];\n  }\n  /**\n   * This is used to get a specific key from storage\n   * @param {string} key - the key for the item\n   * This is used to clear the storage\n   * @returns {string} the data item\n   */\n  ;\n\n  MemoryStorage.getItem = function getItem(key) {\n    return Object.prototype.hasOwnProperty.call(dataMemory, key) ? dataMemory[key] : undefined;\n  }\n  /**\n   * This is used to remove an item from storage\n   * @param {string} key - the key being set\n   * @returns {string} value - value that was deleted\n   */\n  ;\n\n  MemoryStorage.removeItem = function removeItem(key) {\n    return delete dataMemory[key];\n  }\n  /**\n   * This is used to clear the storage\n   * @returns {string} nothing\n   */\n  ;\n\n  MemoryStorage.clear = function clear() {\n    dataMemory = {};\n    return dataMemory;\n  };\n\n  return MemoryStorage;\n}();\n/** @class */\n\n\nvar StorageHelper = /*#__PURE__*/function () {\n  /**\n   * This is used to get a storage object\n   * @returns {object} the storage\n   */\n  function StorageHelper() {\n    try {\n      this.storageWindow = window.localStorage;\n      this.storageWindow.setItem('aws.cognito.test-ls', 1);\n      this.storageWindow.removeItem('aws.cognito.test-ls');\n    } catch (exception) {\n      this.storageWindow = MemoryStorage;\n    }\n  }\n  /**\n   * This is used to return the storage\n   * @returns {object} the storage\n   */\n\n\n  var _proto = StorageHelper.prototype;\n\n  _proto.getStorage = function getStorage() {\n    return this.storageWindow;\n  };\n\n  return StorageHelper;\n}();\n\nexport { StorageHelper as default };","/*!\n * Copyright 2016 Amazon.com,\n * Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\").\n * You may not use this file except in compliance with the\n * License. A copy of the License is located at\n *\n *     http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, express or implied. See the License\n * for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Buffer } from 'buffer/';\nimport CryptoJS from 'crypto-js/core';\nimport TypedArrays from 'crypto-js/lib-typedarrays'; // necessary for crypto js\n\nimport Base64 from 'crypto-js/enc-base64';\nimport HmacSHA256 from 'crypto-js/hmac-sha256';\nimport BigInteger from './BigInteger';\nimport AuthenticationHelper from './AuthenticationHelper';\nimport CognitoAccessToken from './CognitoAccessToken';\nimport CognitoIdToken from './CognitoIdToken';\nimport CognitoRefreshToken from './CognitoRefreshToken';\nimport CognitoUserSession from './CognitoUserSession';\nimport DateHelper from './DateHelper';\nimport CognitoUserAttribute from './CognitoUserAttribute';\nimport StorageHelper from './StorageHelper';\n/**\n * @callback nodeCallback\n * @template T result\n * @param {*} err The operation failure reason, or null.\n * @param {T} result The operation result.\n */\n\n/**\n * @callback onFailure\n * @param {*} err Failure reason.\n */\n\n/**\n * @callback onSuccess\n * @template T result\n * @param {T} result The operation result.\n */\n\n/**\n * @callback mfaRequired\n * @param {*} details MFA challenge details.\n */\n\n/**\n * @callback customChallenge\n * @param {*} details Custom challenge details.\n */\n\n/**\n * @callback inputVerificationCode\n * @param {*} data Server response.\n */\n\n/**\n * @callback authSuccess\n * @param {CognitoUserSession} session The new session.\n * @param {bool=} userConfirmationNecessary User must be confirmed.\n */\n\nvar isBrowser = typeof navigator !== \"undefined\";\nvar userAgent = isBrowser ? navigator.userAgent : \"nodejs\";\n/** @class */\n\nvar CognitoUser = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUser object\n   * @param {object} data Creation options\n   * @param {string} data.Username The user's username.\n   * @param {CognitoUserPool} data.Pool Pool containing the user.\n   * @param {object} data.Storage Optional storage object.\n   */\n  function CognitoUser(data) {\n    if (data == null || data.Username == null || data.Pool == null) {\n      throw new Error('Username and pool information are required.');\n    }\n\n    this.username = data.Username || '';\n    this.pool = data.Pool;\n    this.Session = null;\n    this.client = data.Pool.client;\n    this.signInUserSession = null;\n    this.authenticationFlowType = 'USER_SRP_AUTH';\n    this.storage = data.Storage || new StorageHelper().getStorage();\n    this.keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    this.userDataKey = this.keyPrefix + \".\" + this.username + \".userData\";\n  }\n  /**\n   * Sets the session for this user\n   * @param {CognitoUserSession} signInUserSession the session\n   * @returns {void}\n   */\n\n\n  var _proto = CognitoUser.prototype;\n\n  _proto.setSignInUserSession = function setSignInUserSession(signInUserSession) {\n    this.clearCachedUserData();\n    this.signInUserSession = signInUserSession;\n    this.cacheTokens();\n  }\n  /**\n   * @returns {CognitoUserSession} the current session for this user\n   */\n  ;\n\n  _proto.getSignInUserSession = function getSignInUserSession() {\n    return this.signInUserSession;\n  }\n  /**\n   * @returns {string} the user's username\n   */\n  ;\n\n  _proto.getUsername = function getUsername() {\n    return this.username;\n  }\n  /**\n   * @returns {String} the authentication flow type\n   */\n  ;\n\n  _proto.getAuthenticationFlowType = function getAuthenticationFlowType() {\n    return this.authenticationFlowType;\n  }\n  /**\n   * sets authentication flow type\n   * @param {string} authenticationFlowType New value.\n   * @returns {void}\n   */\n  ;\n\n  _proto.setAuthenticationFlowType = function setAuthenticationFlowType(authenticationFlowType) {\n    this.authenticationFlowType = authenticationFlowType;\n  }\n  /**\n   * This is used for authenticating the user through the custom authentication flow.\n   * @param {AuthenticationDetails} authDetails Contains the authentication data\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *        response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */\n  ;\n\n  _proto.initiateAuth = function initiateAuth(authDetails, callback) {\n    var _this = this;\n\n    var authParameters = authDetails.getAuthParameters();\n    authParameters.USERNAME = this.username;\n    var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();\n    var jsonReq = {\n      AuthFlow: 'CUSTOM_AUTH',\n      ClientId: this.pool.getClientId(),\n      AuthParameters: authParameters,\n      ClientMetadata: clientMetaData\n    };\n\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n\n    this.client.request('InitiateAuth', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n\n      var challengeName = data.ChallengeName;\n      var challengeParameters = data.ChallengeParameters;\n\n      if (challengeName === 'CUSTOM_CHALLENGE') {\n        _this.Session = data.Session;\n        return callback.customChallenge(challengeParameters);\n      }\n\n      _this.signInUserSession = _this.getCognitoUserSession(data.AuthenticationResult);\n\n      _this.cacheTokens();\n\n      return callback.onSuccess(_this.signInUserSession);\n    });\n  }\n  /**\n   * This is used for authenticating the user.\n   * stuff\n   * @param {AuthenticationDetails} authDetails Contains the authentication data\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {newPasswordRequired} callback.newPasswordRequired new\n   *        password and any required attributes are required to continue\n   * @param {mfaRequired} callback.mfaRequired MFA code\n   *        required to continue.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *        response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */\n  ;\n\n  _proto.authenticateUser = function authenticateUser(authDetails, callback) {\n    if (this.authenticationFlowType === 'USER_PASSWORD_AUTH') {\n      return this.authenticateUserPlainUsernamePassword(authDetails, callback);\n    } else if (this.authenticationFlowType === 'USER_SRP_AUTH' || this.authenticationFlowType === 'CUSTOM_AUTH') {\n      return this.authenticateUserDefaultAuth(authDetails, callback);\n    }\n\n    return callback.onFailure(new Error('Authentication flow type is invalid.'));\n  }\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   * It calls the AuthenticationHelper for SRP related\n   * stuff\n   * @param {AuthenticationDetails} authDetails Contains the authentication data\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {newPasswordRequired} callback.newPasswordRequired new\n   *        password and any required attributes are required to continue\n   * @param {mfaRequired} callback.mfaRequired MFA code\n   *        required to continue.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *        response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */\n  ;\n\n  _proto.authenticateUserDefaultAuth = function authenticateUserDefaultAuth(authDetails, callback) {\n    var _this2 = this;\n\n    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolId().split('_')[1]);\n    var dateHelper = new DateHelper();\n    var serverBValue;\n    var salt;\n    var authParameters = {};\n\n    if (this.deviceKey != null) {\n      authParameters.DEVICE_KEY = this.deviceKey;\n    }\n\n    authParameters.USERNAME = this.username;\n    authenticationHelper.getLargeAValue(function (errOnAValue, aValue) {\n      // getLargeAValue callback start\n      if (errOnAValue) {\n        callback.onFailure(errOnAValue);\n      }\n\n      authParameters.SRP_A = aValue.toString(16);\n\n      if (_this2.authenticationFlowType === 'CUSTOM_AUTH') {\n        authParameters.CHALLENGE_NAME = 'SRP_A';\n      }\n\n      var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();\n      var jsonReq = {\n        AuthFlow: _this2.authenticationFlowType,\n        ClientId: _this2.pool.getClientId(),\n        AuthParameters: authParameters,\n        ClientMetadata: clientMetaData\n      };\n\n      if (_this2.getUserContextData(_this2.username)) {\n        jsonReq.UserContextData = _this2.getUserContextData(_this2.username);\n      }\n\n      _this2.client.request('InitiateAuth', jsonReq, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n\n        var challengeParameters = data.ChallengeParameters;\n        _this2.username = challengeParameters.USER_ID_FOR_SRP;\n        serverBValue = new BigInteger(challengeParameters.SRP_B, 16);\n        salt = new BigInteger(challengeParameters.SALT, 16);\n\n        _this2.getCachedDeviceKeyAndPassword();\n\n        authenticationHelper.getPasswordAuthenticationKey(_this2.username, authDetails.getPassword(), serverBValue, salt, function (errOnHkdf, hkdf) {\n          // getPasswordAuthenticationKey callback start\n          if (errOnHkdf) {\n            callback.onFailure(errOnHkdf);\n          }\n\n          var dateNow = dateHelper.getNowString();\n          var message = CryptoJS.lib.WordArray.create(Buffer.concat([Buffer.from(_this2.pool.getUserPoolId().split('_')[1], 'utf8'), Buffer.from(_this2.username, 'utf8'), Buffer.from(challengeParameters.SECRET_BLOCK, 'base64'), Buffer.from(dateNow, 'utf8')]));\n          var key = CryptoJS.lib.WordArray.create(hkdf);\n          var signatureString = Base64.stringify(HmacSHA256(message, key));\n          var challengeResponses = {};\n          challengeResponses.USERNAME = _this2.username;\n          challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK = challengeParameters.SECRET_BLOCK;\n          challengeResponses.TIMESTAMP = dateNow;\n          challengeResponses.PASSWORD_CLAIM_SIGNATURE = signatureString;\n\n          if (_this2.deviceKey != null) {\n            challengeResponses.DEVICE_KEY = _this2.deviceKey;\n          }\n\n          var respondToAuthChallenge = function respondToAuthChallenge(challenge, challengeCallback) {\n            return _this2.client.request('RespondToAuthChallenge', challenge, function (errChallenge, dataChallenge) {\n              if (errChallenge && errChallenge.code === 'ResourceNotFoundException' && errChallenge.message.toLowerCase().indexOf('device') !== -1) {\n                challengeResponses.DEVICE_KEY = null;\n                _this2.deviceKey = null;\n                _this2.randomPassword = null;\n                _this2.deviceGroupKey = null;\n\n                _this2.clearCachedDeviceKeyAndPassword();\n\n                return respondToAuthChallenge(challenge, challengeCallback);\n              }\n\n              return challengeCallback(errChallenge, dataChallenge);\n            });\n          };\n\n          var jsonReqResp = {\n            ChallengeName: 'PASSWORD_VERIFIER',\n            ClientId: _this2.pool.getClientId(),\n            ChallengeResponses: challengeResponses,\n            Session: data.Session,\n            ClientMetadata: clientMetaData\n          };\n\n          if (_this2.getUserContextData()) {\n            jsonReqResp.UserContextData = _this2.getUserContextData();\n          }\n\n          respondToAuthChallenge(jsonReqResp, function (errAuthenticate, dataAuthenticate) {\n            if (errAuthenticate) {\n              return callback.onFailure(errAuthenticate);\n            }\n\n            return _this2.authenticateUserInternal(dataAuthenticate, authenticationHelper, callback);\n          });\n          return undefined; // getPasswordAuthenticationKey callback end\n        });\n        return undefined;\n      }); // getLargeAValue callback end\n\n    });\n  }\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   * @param {AuthenticationDetails} authDetails Contains the authentication data.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {mfaRequired} callback.mfaRequired MFA code\n   *        required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */\n  ;\n\n  _proto.authenticateUserPlainUsernamePassword = function authenticateUserPlainUsernamePassword(authDetails, callback) {\n    var _this3 = this;\n\n    var authParameters = {};\n    authParameters.USERNAME = this.username;\n    authParameters.PASSWORD = authDetails.getPassword();\n\n    if (!authParameters.PASSWORD) {\n      callback.onFailure(new Error('PASSWORD parameter is required'));\n      return;\n    }\n\n    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolId().split('_')[1]);\n    this.getCachedDeviceKeyAndPassword();\n\n    if (this.deviceKey != null) {\n      authParameters.DEVICE_KEY = this.deviceKey;\n    }\n\n    var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();\n    var jsonReq = {\n      AuthFlow: 'USER_PASSWORD_AUTH',\n      ClientId: this.pool.getClientId(),\n      AuthParameters: authParameters,\n      ClientMetadata: clientMetaData\n    };\n\n    if (this.getUserContextData(this.username)) {\n      jsonReq.UserContextData = this.getUserContextData(this.username);\n    } // USER_PASSWORD_AUTH happens in a single round-trip: client sends userName and password,\n    // Cognito UserPools verifies password and returns tokens.\n\n\n    this.client.request('InitiateAuth', jsonReq, function (err, authResult) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n\n      return _this3.authenticateUserInternal(authResult, authenticationHelper, callback);\n    });\n  }\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   * @param {object} dataAuthenticate authentication data\n   * @param {object} authenticationHelper helper created\n   * @param {callback} callback passed on from caller\n   * @returns {void}\n   */\n  ;\n\n  _proto.authenticateUserInternal = function authenticateUserInternal(dataAuthenticate, authenticationHelper, callback) {\n    var _this4 = this;\n\n    var challengeName = dataAuthenticate.ChallengeName;\n    var challengeParameters = dataAuthenticate.ChallengeParameters;\n\n    if (challengeName === 'SMS_MFA') {\n      this.Session = dataAuthenticate.Session;\n      return callback.mfaRequired(challengeName, challengeParameters);\n    }\n\n    if (challengeName === 'SELECT_MFA_TYPE') {\n      this.Session = dataAuthenticate.Session;\n      return callback.selectMFAType(challengeName, challengeParameters);\n    }\n\n    if (challengeName === 'MFA_SETUP') {\n      this.Session = dataAuthenticate.Session;\n      return callback.mfaSetup(challengeName, challengeParameters);\n    }\n\n    if (challengeName === 'SOFTWARE_TOKEN_MFA') {\n      this.Session = dataAuthenticate.Session;\n      return callback.totpRequired(challengeName, challengeParameters);\n    }\n\n    if (challengeName === 'CUSTOM_CHALLENGE') {\n      this.Session = dataAuthenticate.Session;\n      return callback.customChallenge(challengeParameters);\n    }\n\n    if (challengeName === 'NEW_PASSWORD_REQUIRED') {\n      this.Session = dataAuthenticate.Session;\n      var userAttributes = null;\n      var rawRequiredAttributes = null;\n      var requiredAttributes = [];\n      var userAttributesPrefix = authenticationHelper.getNewPasswordRequiredChallengeUserAttributePrefix();\n\n      if (challengeParameters) {\n        userAttributes = JSON.parse(dataAuthenticate.ChallengeParameters.userAttributes);\n        rawRequiredAttributes = JSON.parse(dataAuthenticate.ChallengeParameters.requiredAttributes);\n      }\n\n      if (rawRequiredAttributes) {\n        for (var i = 0; i < rawRequiredAttributes.length; i++) {\n          requiredAttributes[i] = rawRequiredAttributes[i].substr(userAttributesPrefix.length);\n        }\n      }\n\n      return callback.newPasswordRequired(userAttributes, requiredAttributes);\n    }\n\n    if (challengeName === 'DEVICE_SRP_AUTH') {\n      this.getDeviceResponse(callback);\n      return undefined;\n    }\n\n    this.signInUserSession = this.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n    this.challengeName = challengeName;\n    this.cacheTokens();\n    var newDeviceMetadata = dataAuthenticate.AuthenticationResult.NewDeviceMetadata;\n\n    if (newDeviceMetadata == null) {\n      return callback.onSuccess(this.signInUserSession);\n    }\n\n    authenticationHelper.generateHashDevice(dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey, dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey, function (errGenHash) {\n      if (errGenHash) {\n        return callback.onFailure(errGenHash);\n      }\n\n      var deviceSecretVerifierConfig = {\n        Salt: Buffer.from(authenticationHelper.getSaltDevices(), 'hex').toString('base64'),\n        PasswordVerifier: Buffer.from(authenticationHelper.getVerifierDevices(), 'hex').toString('base64')\n      };\n      _this4.verifierDevices = deviceSecretVerifierConfig.PasswordVerifier;\n      _this4.deviceGroupKey = newDeviceMetadata.DeviceGroupKey;\n      _this4.randomPassword = authenticationHelper.getRandomPassword();\n\n      _this4.client.request('ConfirmDevice', {\n        DeviceKey: newDeviceMetadata.DeviceKey,\n        AccessToken: _this4.signInUserSession.getAccessToken().getJwtToken(),\n        DeviceSecretVerifierConfig: deviceSecretVerifierConfig,\n        DeviceName: userAgent\n      }, function (errConfirm, dataConfirm) {\n        if (errConfirm) {\n          return callback.onFailure(errConfirm);\n        }\n\n        _this4.deviceKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey;\n\n        _this4.cacheDeviceKeyAndPassword();\n\n        if (dataConfirm.UserConfirmationNecessary === true) {\n          return callback.onSuccess(_this4.signInUserSession, dataConfirm.UserConfirmationNecessary);\n        }\n\n        return callback.onSuccess(_this4.signInUserSession);\n      });\n\n      return undefined;\n    });\n    return undefined;\n  }\n  /**\n   * This method is user to complete the NEW_PASSWORD_REQUIRED challenge.\n   * Pass the new password with any new user attributes to be updated.\n   * User attribute keys must be of format userAttributes.<attribute_name>.\n   * @param {string} newPassword new password for this user\n   * @param {object} requiredAttributeData map with values for all required attributes\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {mfaRequired} callback.mfaRequired MFA code required to continue.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *         response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */\n  ;\n\n  _proto.completeNewPasswordChallenge = function completeNewPasswordChallenge(newPassword, requiredAttributeData, callback, clientMetadata) {\n    var _this5 = this;\n\n    if (!newPassword) {\n      return callback.onFailure(new Error('New password is required.'));\n    }\n\n    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolId().split('_')[1]);\n    var userAttributesPrefix = authenticationHelper.getNewPasswordRequiredChallengeUserAttributePrefix();\n    var finalUserAttributes = {};\n\n    if (requiredAttributeData) {\n      Object.keys(requiredAttributeData).forEach(function (key) {\n        finalUserAttributes[userAttributesPrefix + key] = requiredAttributeData[key];\n      });\n    }\n\n    finalUserAttributes.NEW_PASSWORD = newPassword;\n    finalUserAttributes.USERNAME = this.username;\n    var jsonReq = {\n      ChallengeName: 'NEW_PASSWORD_REQUIRED',\n      ClientId: this.pool.getClientId(),\n      ChallengeResponses: finalUserAttributes,\n      Session: this.Session,\n      ClientMetadata: clientMetadata\n    };\n\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n\n    this.client.request('RespondToAuthChallenge', jsonReq, function (errAuthenticate, dataAuthenticate) {\n      if (errAuthenticate) {\n        return callback.onFailure(errAuthenticate);\n      }\n\n      return _this5.authenticateUserInternal(dataAuthenticate, authenticationHelper, callback);\n    });\n    return undefined;\n  }\n  /**\n   * This is used to get a session using device authentication. It is called at the end of user\n   * authentication\n   *\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   * @private\n   */\n  ;\n\n  _proto.getDeviceResponse = function getDeviceResponse(callback, clientMetadata) {\n    var _this6 = this;\n\n    var authenticationHelper = new AuthenticationHelper(this.deviceGroupKey);\n    var dateHelper = new DateHelper();\n    var authParameters = {};\n    authParameters.USERNAME = this.username;\n    authParameters.DEVICE_KEY = this.deviceKey;\n    authenticationHelper.getLargeAValue(function (errAValue, aValue) {\n      // getLargeAValue callback start\n      if (errAValue) {\n        callback.onFailure(errAValue);\n      }\n\n      authParameters.SRP_A = aValue.toString(16);\n      var jsonReq = {\n        ChallengeName: 'DEVICE_SRP_AUTH',\n        ClientId: _this6.pool.getClientId(),\n        ChallengeResponses: authParameters,\n        ClientMetadata: clientMetadata\n      };\n\n      if (_this6.getUserContextData()) {\n        jsonReq.UserContextData = _this6.getUserContextData();\n      }\n\n      _this6.client.request('RespondToAuthChallenge', jsonReq, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n\n        var challengeParameters = data.ChallengeParameters;\n        var serverBValue = new BigInteger(challengeParameters.SRP_B, 16);\n        var salt = new BigInteger(challengeParameters.SALT, 16);\n        authenticationHelper.getPasswordAuthenticationKey(_this6.deviceKey, _this6.randomPassword, serverBValue, salt, function (errHkdf, hkdf) {\n          // getPasswordAuthenticationKey callback start\n          if (errHkdf) {\n            return callback.onFailure(errHkdf);\n          }\n\n          var dateNow = dateHelper.getNowString();\n          var message = CryptoJS.lib.WordArray.create(Buffer.concat([Buffer.from(_this6.deviceGroupKey, 'utf8'), Buffer.from(_this6.deviceKey, 'utf8'), Buffer.from(challengeParameters.SECRET_BLOCK, 'base64'), Buffer.from(dateNow, 'utf8')]));\n          var key = CryptoJS.lib.WordArray.create(hkdf);\n          var signatureString = Base64.stringify(HmacSHA256(message, key));\n          var challengeResponses = {};\n          challengeResponses.USERNAME = _this6.username;\n          challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK = challengeParameters.SECRET_BLOCK;\n          challengeResponses.TIMESTAMP = dateNow;\n          challengeResponses.PASSWORD_CLAIM_SIGNATURE = signatureString;\n          challengeResponses.DEVICE_KEY = _this6.deviceKey;\n          var jsonReqResp = {\n            ChallengeName: 'DEVICE_PASSWORD_VERIFIER',\n            ClientId: _this6.pool.getClientId(),\n            ChallengeResponses: challengeResponses,\n            Session: data.Session\n          };\n\n          if (_this6.getUserContextData()) {\n            jsonReqResp.UserContextData = _this6.getUserContextData();\n          }\n\n          _this6.client.request('RespondToAuthChallenge', jsonReqResp, function (errAuthenticate, dataAuthenticate) {\n            if (errAuthenticate) {\n              return callback.onFailure(errAuthenticate);\n            }\n\n            _this6.signInUserSession = _this6.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n\n            _this6.cacheTokens();\n\n            return callback.onSuccess(_this6.signInUserSession);\n          });\n\n          return undefined; // getPasswordAuthenticationKey callback end\n        });\n        return undefined;\n      }); // getLargeAValue callback end\n\n    });\n  }\n  /**\n   * This is used for a certain user to confirm the registration by using a confirmation code\n   * @param {string} confirmationCode Code entered by user.\n   * @param {bool} forceAliasCreation Allow migrating from an existing email / phone number.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */\n  ;\n\n  _proto.confirmRegistration = function confirmRegistration(confirmationCode, forceAliasCreation, callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      ConfirmationCode: confirmationCode,\n      Username: this.username,\n      ForceAliasCreation: forceAliasCreation,\n      ClientMetadata: clientMetadata\n    };\n\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n\n    this.client.request('ConfirmSignUp', jsonReq, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      return callback(null, 'SUCCESS');\n    });\n  }\n  /**\n   * This is used by the user once he has the responses to a custom challenge\n   * @param {string} answerChallenge The custom challenge answer.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {customChallenge} callback.customChallenge\n   *    Custom challenge response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */\n  ;\n\n  _proto.sendCustomChallengeAnswer = function sendCustomChallengeAnswer(answerChallenge, callback, clientMetadata) {\n    var _this7 = this;\n\n    var challengeResponses = {};\n    challengeResponses.USERNAME = this.username;\n    challengeResponses.ANSWER = answerChallenge;\n    var authenticationHelper = new AuthenticationHelper(this.pool.getUserPoolId().split('_')[1]);\n    this.getCachedDeviceKeyAndPassword();\n\n    if (this.deviceKey != null) {\n      challengeResponses.DEVICE_KEY = this.deviceKey;\n    }\n\n    var jsonReq = {\n      ChallengeName: 'CUSTOM_CHALLENGE',\n      ChallengeResponses: challengeResponses,\n      ClientId: this.pool.getClientId(),\n      Session: this.Session,\n      ClientMetadata: clientMetadata\n    };\n\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n\n    this.client.request('RespondToAuthChallenge', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n\n      return _this7.authenticateUserInternal(data, authenticationHelper, callback);\n    });\n  }\n  /**\n   * This is used by the user once he has an MFA code\n   * @param {string} confirmationCode The MFA code entered by the user.\n   * @param {object} callback Result callback map.\n   * @param {string} mfaType The mfa we are replying to.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */\n  ;\n\n  _proto.sendMFACode = function sendMFACode(confirmationCode, callback, mfaType, clientMetadata) {\n    var _this8 = this;\n\n    var challengeResponses = {};\n    challengeResponses.USERNAME = this.username;\n    challengeResponses.SMS_MFA_CODE = confirmationCode;\n    var mfaTypeSelection = mfaType || 'SMS_MFA';\n\n    if (mfaTypeSelection === 'SOFTWARE_TOKEN_MFA') {\n      challengeResponses.SOFTWARE_TOKEN_MFA_CODE = confirmationCode;\n    }\n\n    if (this.deviceKey != null) {\n      challengeResponses.DEVICE_KEY = this.deviceKey;\n    }\n\n    var jsonReq = {\n      ChallengeName: mfaTypeSelection,\n      ChallengeResponses: challengeResponses,\n      ClientId: this.pool.getClientId(),\n      Session: this.Session,\n      ClientMetadata: clientMetadata\n    };\n\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n\n    this.client.request('RespondToAuthChallenge', jsonReq, function (err, dataAuthenticate) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n\n      var challengeName = dataAuthenticate.ChallengeName;\n\n      if (challengeName === 'DEVICE_SRP_AUTH') {\n        _this8.getDeviceResponse(callback);\n\n        return undefined;\n      }\n\n      _this8.signInUserSession = _this8.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n\n      _this8.cacheTokens();\n\n      if (dataAuthenticate.AuthenticationResult.NewDeviceMetadata == null) {\n        return callback.onSuccess(_this8.signInUserSession);\n      }\n\n      var authenticationHelper = new AuthenticationHelper(_this8.pool.getUserPoolId().split('_')[1]);\n      authenticationHelper.generateHashDevice(dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey, dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey, function (errGenHash) {\n        if (errGenHash) {\n          return callback.onFailure(errGenHash);\n        }\n\n        var deviceSecretVerifierConfig = {\n          Salt: Buffer.from(authenticationHelper.getSaltDevices(), 'hex').toString('base64'),\n          PasswordVerifier: Buffer.from(authenticationHelper.getVerifierDevices(), 'hex').toString('base64')\n        };\n        _this8.verifierDevices = deviceSecretVerifierConfig.PasswordVerifier;\n        _this8.deviceGroupKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey;\n        _this8.randomPassword = authenticationHelper.getRandomPassword();\n\n        _this8.client.request('ConfirmDevice', {\n          DeviceKey: dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey,\n          AccessToken: _this8.signInUserSession.getAccessToken().getJwtToken(),\n          DeviceSecretVerifierConfig: deviceSecretVerifierConfig,\n          DeviceName: userAgent\n        }, function (errConfirm, dataConfirm) {\n          if (errConfirm) {\n            return callback.onFailure(errConfirm);\n          }\n\n          _this8.deviceKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey;\n\n          _this8.cacheDeviceKeyAndPassword();\n\n          if (dataConfirm.UserConfirmationNecessary === true) {\n            return callback.onSuccess(_this8.signInUserSession, dataConfirm.UserConfirmationNecessary);\n          }\n\n          return callback.onSuccess(_this8.signInUserSession);\n        });\n\n        return undefined;\n      });\n      return undefined;\n    });\n  }\n  /**\n   * This is used by an authenticated user to change the current password\n   * @param {string} oldUserPassword The current password.\n   * @param {string} newUserPassword The requested new password.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */\n  ;\n\n  _proto.changePassword = function changePassword(oldUserPassword, newUserPassword, callback, clientMetadata) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n\n    this.client.request('ChangePassword', {\n      PreviousPassword: oldUserPassword,\n      ProposedPassword: newUserPassword,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      ClientMetadata: clientMetadata\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n  /**\n   * This is used by an authenticated user to enable MFA for itself\n   * @deprecated\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */\n  ;\n\n  _proto.enableMFA = function enableMFA(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n\n    var mfaOptions = [];\n    var mfaEnabled = {\n      DeliveryMedium: 'SMS',\n      AttributeName: 'phone_number'\n    };\n    mfaOptions.push(mfaEnabled);\n    this.client.request('SetUserSettings', {\n      MFAOptions: mfaOptions,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n  /**\n   * This is used by an authenticated user to enable MFA for itself\n   * @param {IMfaSettings} smsMfaSettings the sms mfa settings\n   * @param {IMFASettings} softwareTokenMfaSettings the software token mfa settings\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */\n  ;\n\n  _proto.setUserMfaPreference = function setUserMfaPreference(smsMfaSettings, softwareTokenMfaSettings, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n\n    this.client.request('SetUserMFAPreference', {\n      SMSMfaSettings: smsMfaSettings,\n      SoftwareTokenMfaSettings: softwareTokenMfaSettings,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n  /**\n   * This is used by an authenticated user to disable MFA for itself\n   * @deprecated\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */\n  ;\n\n  _proto.disableMFA = function disableMFA(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n\n    var mfaOptions = [];\n    this.client.request('SetUserSettings', {\n      MFAOptions: mfaOptions,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n  /**\n   * This is used by an authenticated user to delete itself\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */\n  ;\n\n  _proto.deleteUser = function deleteUser(callback, clientMetadata) {\n    var _this9 = this;\n\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n\n    this.client.request('DeleteUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      ClientMetadata: clientMetadata\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      _this9.clearCachedUser();\n\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n  /**\n   * @typedef {CognitoUserAttribute | { Name:string, Value:string }} AttributeArg\n   */\n\n  /**\n   * This is used by an authenticated user to change a list of attributes\n   * @param {AttributeArg[]} attributes A list of the new user attributes.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */\n  ;\n\n  _proto.updateAttributes = function updateAttributes(attributes, callback, clientMetadata) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n\n    this.client.request('UpdateUserAttributes', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      UserAttributes: attributes,\n      ClientMetadata: clientMetadata\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n  /**\n   * This is used by an authenticated user to get a list of attributes\n   * @param {nodeCallback<CognitoUserAttribute[]>} callback Called on success or error.\n   * @returns {void}\n   */\n  ;\n\n  _proto.getUserAttributes = function getUserAttributes(callback) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n\n    this.client.request('GetUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err, userData) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      var attributeList = [];\n\n      for (var i = 0; i < userData.UserAttributes.length; i++) {\n        var attribute = {\n          Name: userData.UserAttributes[i].Name,\n          Value: userData.UserAttributes[i].Value\n        };\n        var userAttribute = new CognitoUserAttribute(attribute);\n        attributeList.push(userAttribute);\n      }\n\n      return callback(null, attributeList);\n    });\n    return undefined;\n  }\n  /**\n   * This is used by an authenticated user to get the MFAOptions\n   * @param {nodeCallback<MFAOptions>} callback Called on success or error.\n   * @returns {void}\n   */\n  ;\n\n  _proto.getMFAOptions = function getMFAOptions(callback) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n\n    this.client.request('GetUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err, userData) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      return callback(null, userData.MFAOptions);\n    });\n    return undefined;\n  }\n  /**\n   * This is used by an authenticated users to get the userData\n   * @param {nodeCallback<UserData>} callback Called on success or error.\n   * @returns {void}\n   */\n  ;\n\n  _proto.getUserData = function getUserData(callback, params) {\n    var _this10 = this;\n\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      this.clearCachedUserData();\n      return callback(new Error('User is not authenticated'), null);\n    }\n\n    var bypassCache = params ? params.bypassCache : false;\n    var userData = this.storage.getItem(this.userDataKey); // get the cached user data\n\n    if (!userData || bypassCache) {\n      this.client.request('GetUser', {\n        AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n      }, function (err, latestUserData) {\n        if (err) {\n          return callback(err, null);\n        }\n\n        _this10.cacheUserData(latestUserData);\n\n        var refresh = _this10.signInUserSession.getRefreshToken();\n\n        if (refresh && refresh.getToken()) {\n          _this10.refreshSession(refresh, function (refreshError, data) {\n            if (refreshError) {\n              return callback(refreshError, null);\n            }\n\n            return callback(null, latestUserData);\n          });\n        } else {\n          return callback(null, latestUserData);\n        }\n      });\n    } else {\n      try {\n        return callback(null, JSON.parse(userData));\n      } catch (err) {\n        this.clearCachedUserData();\n        return callback(err, null);\n      }\n    }\n\n    return undefined;\n  }\n  /**\n   * This is used by an authenticated user to delete a list of attributes\n   * @param {string[]} attributeList Names of the attributes to delete.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */\n  ;\n\n  _proto.deleteAttributes = function deleteAttributes(attributeList, callback) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n\n    this.client.request('DeleteUserAttributes', {\n      UserAttributeNames: attributeList,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n  /**\n   * This is used by a user to resend a confirmation code\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */\n  ;\n\n  _proto.resendConfirmationCode = function resendConfirmationCode(callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n      ClientMetadata: clientMetadata\n    };\n    this.client.request('ResendConfirmationCode', jsonReq, function (err, result) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      return callback(null, result);\n    });\n  }\n  /**\n   * This is used to get a session, either from the session object\n   * or from  the local storage, or by using a refresh token\n   *\n   * @param {nodeCallback<CognitoUserSession>} callback Called on success or error.\n   * @returns {void}\n   */\n  ;\n\n  _proto.getSession = function getSession(callback) {\n    if (this.username == null) {\n      return callback(new Error('Username is null. Cannot retrieve a new session'), null);\n    }\n\n    if (this.signInUserSession != null && this.signInUserSession.isValid()) {\n      return callback(null, this.signInUserSession);\n    }\n\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var idTokenKey = keyPrefix + \".idToken\";\n    var accessTokenKey = keyPrefix + \".accessToken\";\n    var refreshTokenKey = keyPrefix + \".refreshToken\";\n    var clockDriftKey = keyPrefix + \".clockDrift\";\n\n    if (this.storage.getItem(idTokenKey)) {\n      var idToken = new CognitoIdToken({\n        IdToken: this.storage.getItem(idTokenKey)\n      });\n      var accessToken = new CognitoAccessToken({\n        AccessToken: this.storage.getItem(accessTokenKey)\n      });\n      var refreshToken = new CognitoRefreshToken({\n        RefreshToken: this.storage.getItem(refreshTokenKey)\n      });\n      var clockDrift = parseInt(this.storage.getItem(clockDriftKey), 0) || 0;\n      var sessionData = {\n        IdToken: idToken,\n        AccessToken: accessToken,\n        RefreshToken: refreshToken,\n        ClockDrift: clockDrift\n      };\n      var cachedSession = new CognitoUserSession(sessionData);\n\n      if (cachedSession.isValid()) {\n        this.signInUserSession = cachedSession;\n        return callback(null, this.signInUserSession);\n      }\n\n      if (!refreshToken.getToken()) {\n        return callback(new Error('Cannot retrieve a new session. Please authenticate.'), null);\n      }\n\n      this.refreshSession(refreshToken, callback);\n    } else {\n      callback(new Error('Local storage is missing an ID Token, Please authenticate'), null);\n    }\n\n    return undefined;\n  }\n  /**\n   * This uses the refreshToken to retrieve a new session\n   * @param {CognitoRefreshToken} refreshToken A previous session's refresh token.\n   * @param {nodeCallback<CognitoUserSession>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */\n  ;\n\n  _proto.refreshSession = function refreshSession(refreshToken, callback, clientMetadata) {\n    var _this11 = this;\n\n    var authParameters = {};\n    authParameters.REFRESH_TOKEN = refreshToken.getToken();\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    var lastUserKey = keyPrefix + \".LastAuthUser\";\n\n    if (this.storage.getItem(lastUserKey)) {\n      this.username = this.storage.getItem(lastUserKey);\n      var deviceKeyKey = keyPrefix + \".\" + this.username + \".deviceKey\";\n      this.deviceKey = this.storage.getItem(deviceKeyKey);\n      authParameters.DEVICE_KEY = this.deviceKey;\n    }\n\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      AuthFlow: 'REFRESH_TOKEN_AUTH',\n      AuthParameters: authParameters,\n      ClientMetadata: clientMetadata\n    };\n\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n\n    this.client.request('InitiateAuth', jsonReq, function (err, authResult) {\n      if (err) {\n        if (err.code === 'NotAuthorizedException') {\n          _this11.clearCachedUser();\n        }\n\n        return callback(err, null);\n      }\n\n      if (authResult) {\n        var authenticationResult = authResult.AuthenticationResult;\n\n        if (!Object.prototype.hasOwnProperty.call(authenticationResult, 'RefreshToken')) {\n          authenticationResult.RefreshToken = refreshToken.getToken();\n        }\n\n        _this11.signInUserSession = _this11.getCognitoUserSession(authenticationResult);\n\n        _this11.cacheTokens();\n\n        return callback(null, _this11.signInUserSession);\n      }\n\n      return undefined;\n    });\n  }\n  /**\n   * This is used to save the session tokens to local storage\n   * @returns {void}\n   */\n  ;\n\n  _proto.cacheTokens = function cacheTokens() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    var idTokenKey = keyPrefix + \".\" + this.username + \".idToken\";\n    var accessTokenKey = keyPrefix + \".\" + this.username + \".accessToken\";\n    var refreshTokenKey = keyPrefix + \".\" + this.username + \".refreshToken\";\n    var clockDriftKey = keyPrefix + \".\" + this.username + \".clockDrift\";\n    var lastUserKey = keyPrefix + \".LastAuthUser\";\n    this.storage.setItem(idTokenKey, this.signInUserSession.getIdToken().getJwtToken());\n    this.storage.setItem(accessTokenKey, this.signInUserSession.getAccessToken().getJwtToken());\n    this.storage.setItem(refreshTokenKey, this.signInUserSession.getRefreshToken().getToken());\n    this.storage.setItem(clockDriftKey, \"\" + this.signInUserSession.getClockDrift());\n    this.storage.setItem(lastUserKey, this.username);\n  }\n  /**\n   * This is to cache user data\n   */\n  ;\n\n  _proto.cacheUserData = function cacheUserData(userData) {\n    this.storage.setItem(this.userDataKey, JSON.stringify(userData));\n  }\n  /**\n   * This is to remove cached user data\n   */\n  ;\n\n  _proto.clearCachedUserData = function clearCachedUserData() {\n    this.storage.removeItem(this.userDataKey);\n  };\n\n  _proto.clearCachedUser = function clearCachedUser() {\n    this.clearCachedTokens();\n    this.clearCachedUserData();\n  }\n  /**\n   * This is used to cache the device key and device group and device password\n   * @returns {void}\n   */\n  ;\n\n  _proto.cacheDeviceKeyAndPassword = function cacheDeviceKeyAndPassword() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var deviceKeyKey = keyPrefix + \".deviceKey\";\n    var randomPasswordKey = keyPrefix + \".randomPasswordKey\";\n    var deviceGroupKeyKey = keyPrefix + \".deviceGroupKey\";\n    this.storage.setItem(deviceKeyKey, this.deviceKey);\n    this.storage.setItem(randomPasswordKey, this.randomPassword);\n    this.storage.setItem(deviceGroupKeyKey, this.deviceGroupKey);\n  }\n  /**\n   * This is used to get current device key and device group and device password\n   * @returns {void}\n   */\n  ;\n\n  _proto.getCachedDeviceKeyAndPassword = function getCachedDeviceKeyAndPassword() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var deviceKeyKey = keyPrefix + \".deviceKey\";\n    var randomPasswordKey = keyPrefix + \".randomPasswordKey\";\n    var deviceGroupKeyKey = keyPrefix + \".deviceGroupKey\";\n\n    if (this.storage.getItem(deviceKeyKey)) {\n      this.deviceKey = this.storage.getItem(deviceKeyKey);\n      this.randomPassword = this.storage.getItem(randomPasswordKey);\n      this.deviceGroupKey = this.storage.getItem(deviceGroupKeyKey);\n    }\n  }\n  /**\n   * This is used to clear the device key info from local storage\n   * @returns {void}\n   */\n  ;\n\n  _proto.clearCachedDeviceKeyAndPassword = function clearCachedDeviceKeyAndPassword() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var deviceKeyKey = keyPrefix + \".deviceKey\";\n    var randomPasswordKey = keyPrefix + \".randomPasswordKey\";\n    var deviceGroupKeyKey = keyPrefix + \".deviceGroupKey\";\n    this.storage.removeItem(deviceKeyKey);\n    this.storage.removeItem(randomPasswordKey);\n    this.storage.removeItem(deviceGroupKeyKey);\n  }\n  /**\n   * This is used to clear the session tokens from local storage\n   * @returns {void}\n   */\n  ;\n\n  _proto.clearCachedTokens = function clearCachedTokens() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    var idTokenKey = keyPrefix + \".\" + this.username + \".idToken\";\n    var accessTokenKey = keyPrefix + \".\" + this.username + \".accessToken\";\n    var refreshTokenKey = keyPrefix + \".\" + this.username + \".refreshToken\";\n    var lastUserKey = keyPrefix + \".LastAuthUser\";\n    var clockDriftKey = keyPrefix + \".\" + this.username + \".clockDrift\";\n    this.storage.removeItem(idTokenKey);\n    this.storage.removeItem(accessTokenKey);\n    this.storage.removeItem(refreshTokenKey);\n    this.storage.removeItem(lastUserKey);\n    this.storage.removeItem(clockDriftKey);\n  }\n  /**\n   * This is used to build a user session from tokens retrieved in the authentication result\n   * @param {object} authResult Successful auth response from server.\n   * @returns {CognitoUserSession} The new user session.\n   * @private\n   */\n  ;\n\n  _proto.getCognitoUserSession = function getCognitoUserSession(authResult) {\n    var idToken = new CognitoIdToken(authResult);\n    var accessToken = new CognitoAccessToken(authResult);\n    var refreshToken = new CognitoRefreshToken(authResult);\n    var sessionData = {\n      IdToken: idToken,\n      AccessToken: accessToken,\n      RefreshToken: refreshToken\n    };\n    return new CognitoUserSession(sessionData);\n  }\n  /**\n   * This is used to initiate a forgot password request\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {inputVerificationCode?} callback.inputVerificationCode\n   *    Optional callback raised instead of onSuccess with response data.\n   * @param {onSuccess} callback.onSuccess Called on success.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */\n  ;\n\n  _proto.forgotPassword = function forgotPassword(callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n      ClientMetadata: clientMetadata\n    };\n\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n\n    this.client.request('ForgotPassword', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n\n      if (typeof callback.inputVerificationCode === 'function') {\n        return callback.inputVerificationCode(data);\n      }\n\n      return callback.onSuccess(data);\n    });\n  }\n  /**\n   * This is used to confirm a new password using a confirmationCode\n   * @param {string} confirmationCode Code entered by user.\n   * @param {string} newPassword Confirm new password.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<void>} callback.onSuccess Called on success.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */\n  ;\n\n  _proto.confirmPassword = function confirmPassword(confirmationCode, newPassword, callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n      ConfirmationCode: confirmationCode,\n      Password: newPassword,\n      ClientMetadata: clientMetadata\n    };\n\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n\n    this.client.request('ConfirmForgotPassword', jsonReq, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n\n      return callback.onSuccess();\n    });\n  }\n  /**\n   * This is used to initiate an attribute confirmation request\n   * @param {string} attributeName User attribute that needs confirmation.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {inputVerificationCode} callback.inputVerificationCode Called on success.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */\n  ;\n\n  _proto.getAttributeVerificationCode = function getAttributeVerificationCode(attributeName, callback, clientMetadata) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n\n    this.client.request('GetUserAttributeVerificationCode', {\n      AttributeName: attributeName,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      ClientMetadata: clientMetadata\n    }, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n\n      if (typeof callback.inputVerificationCode === 'function') {\n        return callback.inputVerificationCode(data);\n      }\n\n      return callback.onSuccess();\n    });\n    return undefined;\n  }\n  /**\n   * This is used to confirm an attribute using a confirmation code\n   * @param {string} attributeName Attribute being confirmed.\n   * @param {string} confirmationCode Code entered by user.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */\n  ;\n\n  _proto.verifyAttribute = function verifyAttribute(attributeName, confirmationCode, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n\n    this.client.request('VerifyUserAttribute', {\n      AttributeName: attributeName,\n      Code: confirmationCode,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n  /**\n   * This is used to get the device information using the current device key\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<*>} callback.onSuccess Called on success with device data.\n   * @returns {void}\n   */\n  ;\n\n  _proto.getDevice = function getDevice(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n\n    this.client.request('GetDevice', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey\n    }, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n\n      return callback.onSuccess(data);\n    });\n    return undefined;\n  }\n  /**\n   * This is used to forget a specific device\n   * @param {string} deviceKey Device key.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */\n  ;\n\n  _proto.forgetSpecificDevice = function forgetSpecificDevice(deviceKey, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n\n    this.client.request('ForgetDevice', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: deviceKey\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n  /**\n   * This is used to forget the current device\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */\n  ;\n\n  _proto.forgetDevice = function forgetDevice(callback) {\n    var _this12 = this;\n\n    this.forgetSpecificDevice(this.deviceKey, {\n      onFailure: callback.onFailure,\n      onSuccess: function onSuccess(result) {\n        _this12.deviceKey = null;\n        _this12.deviceGroupKey = null;\n        _this12.randomPassword = null;\n\n        _this12.clearCachedDeviceKeyAndPassword();\n\n        return callback.onSuccess(result);\n      }\n    });\n  }\n  /**\n   * This is used to set the device status as remembered\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */\n  ;\n\n  _proto.setDeviceStatusRemembered = function setDeviceStatusRemembered(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n\n    this.client.request('UpdateDeviceStatus', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey,\n      DeviceRememberedStatus: 'remembered'\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n  /**\n   * This is used to set the device status as not remembered\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */\n  ;\n\n  _proto.setDeviceStatusNotRemembered = function setDeviceStatusNotRemembered(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n\n    this.client.request('UpdateDeviceStatus', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey,\n      DeviceRememberedStatus: 'not_remembered'\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n  /**\n   * This is used to list all devices for a user\n   *\n   * @param {int} limit the number of devices returned in a call\n   * @param {string} paginationToken the pagination token in case any was returned before\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<*>} callback.onSuccess Called on success with device list.\n   * @returns {void}\n   */\n  ;\n\n  _proto.listDevices = function listDevices(limit, paginationToken, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n\n    this.client.request('ListDevices', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      Limit: limit,\n      PaginationToken: paginationToken\n    }, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n\n      return callback.onSuccess(data);\n    });\n    return undefined;\n  }\n  /**\n   * This is used to globally revoke all tokens issued to a user\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */\n  ;\n\n  _proto.globalSignOut = function globalSignOut(callback) {\n    var _this13 = this;\n\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n\n    this.client.request('GlobalSignOut', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n\n      _this13.clearCachedUser();\n\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n  /**\n   * This is used for the user to signOut of the application and clear the cached tokens.\n   * @returns {void}\n   */\n  ;\n\n  _proto.signOut = function signOut() {\n    this.signInUserSession = null;\n    this.clearCachedUser();\n  }\n  /**\n   * This is used by a user trying to select a given MFA\n   * @param {string} answerChallenge the mfa the user wants\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */\n  ;\n\n  _proto.sendMFASelectionAnswer = function sendMFASelectionAnswer(answerChallenge, callback) {\n    var _this14 = this;\n\n    var challengeResponses = {};\n    challengeResponses.USERNAME = this.username;\n    challengeResponses.ANSWER = answerChallenge;\n    var jsonReq = {\n      ChallengeName: 'SELECT_MFA_TYPE',\n      ChallengeResponses: challengeResponses,\n      ClientId: this.pool.getClientId(),\n      Session: this.Session\n    };\n\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n\n    this.client.request('RespondToAuthChallenge', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n\n      _this14.Session = data.Session;\n\n      if (answerChallenge === 'SMS_MFA') {\n        return callback.mfaRequired(data.challengeName, data.challengeParameters);\n      }\n\n      if (answerChallenge === 'SOFTWARE_TOKEN_MFA') {\n        return callback.totpRequired(data.challengeName, data.challengeParameters);\n      }\n\n      return undefined;\n    });\n  }\n  /**\n   * This returns the user context data for advanced security feature.\n   * @returns {void}\n   */\n  ;\n\n  _proto.getUserContextData = function getUserContextData() {\n    var pool = this.pool;\n    return pool.getUserContextData(this.username);\n  }\n  /**\n   * This is used by an authenticated or a user trying to authenticate to associate a TOTP MFA\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */\n  ;\n\n  _proto.associateSoftwareToken = function associateSoftwareToken(callback) {\n    var _this15 = this;\n\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      this.client.request('AssociateSoftwareToken', {\n        Session: this.Session\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n\n        _this15.Session = data.Session;\n        return callback.associateSecretCode(data.SecretCode);\n      });\n    } else {\n      this.client.request('AssociateSoftwareToken', {\n        AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n\n        return callback.associateSecretCode(data.SecretCode);\n      });\n    }\n  }\n  /**\n   * This is used by an authenticated or a user trying to authenticate to verify a TOTP MFA\n   * @param {string} totpCode The MFA code entered by the user.\n   * @param {string} friendlyDeviceName The device name we are assigning to the device.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */\n  ;\n\n  _proto.verifySoftwareToken = function verifySoftwareToken(totpCode, friendlyDeviceName, callback) {\n    var _this16 = this;\n\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      this.client.request('VerifySoftwareToken', {\n        Session: this.Session,\n        UserCode: totpCode,\n        FriendlyDeviceName: friendlyDeviceName\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n\n        _this16.Session = data.Session;\n        var challengeResponses = {};\n        challengeResponses.USERNAME = _this16.username;\n        var jsonReq = {\n          ChallengeName: 'MFA_SETUP',\n          ClientId: _this16.pool.getClientId(),\n          ChallengeResponses: challengeResponses,\n          Session: _this16.Session\n        };\n\n        if (_this16.getUserContextData()) {\n          jsonReq.UserContextData = _this16.getUserContextData();\n        }\n\n        _this16.client.request('RespondToAuthChallenge', jsonReq, function (errRespond, dataRespond) {\n          if (errRespond) {\n            return callback.onFailure(errRespond);\n          }\n\n          _this16.signInUserSession = _this16.getCognitoUserSession(dataRespond.AuthenticationResult);\n\n          _this16.cacheTokens();\n\n          return callback.onSuccess(_this16.signInUserSession);\n        });\n\n        return undefined;\n      });\n    } else {\n      this.client.request('VerifySoftwareToken', {\n        AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n        UserCode: totpCode,\n        FriendlyDeviceName: friendlyDeviceName\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n\n        return callback.onSuccess(data);\n      });\n    }\n  };\n\n  return CognitoUser;\n}();\n\nexport { CognitoUser as default };","// class for defining the amzn user-agent\nexport default UserAgent; // constructor\n\nfunction UserAgent() {} // public\n\n\nUserAgent.prototype.userAgent = 'aws-amplify/0.1.x js';","import UserAgent from './UserAgent';\n/** @class */\n\nvar Client = /*#__PURE__*/function () {\n  /**\n   * Constructs a new AWS Cognito Identity Provider client object\n   * @param {string} region AWS region\n   * @param {string} endpoint endpoint\n   */\n  function Client(region, endpoint) {\n    this.endpoint = endpoint || \"https://cognito-idp.\" + region + \".amazonaws.com/\";\n    this.userAgent = UserAgent.prototype.userAgent || 'aws-amplify/0.1.x js';\n  }\n  /**\n   * Makes an unauthenticated request on AWS Cognito Identity Provider API\n   * using fetch\n   * @param {string} operation API operation\n   * @param {object} params Input parameters\n   * @param {function} callback Callback called when a response is returned\n   * @returns {void}\n   */\n\n\n  var _proto = Client.prototype;\n\n  _proto.request = function request(operation, params, callback) {\n    var headers = {\n      'Content-Type': 'application/x-amz-json-1.1',\n      'X-Amz-Target': \"AWSCognitoIdentityProviderService.\" + operation,\n      'X-Amz-User-Agent': this.userAgent\n    };\n    var options = {\n      headers: headers,\n      method: 'POST',\n      mode: 'cors',\n      cache: 'no-cache',\n      body: JSON.stringify(params)\n    };\n    var response;\n    var responseJsonData;\n    fetch(this.endpoint, options).then(function (resp) {\n      response = resp;\n      return resp;\n    }, function (err) {\n      // If error happens here, the request failed\n      // if it is TypeError throw network error\n      if (err instanceof TypeError) {\n        throw new Error('Network error');\n      }\n\n      throw err;\n    }).then(function (resp) {\n      return resp.json()[\"catch\"](function () {\n        return {};\n      });\n    }).then(function (data) {\n      // return parsed body stream\n      if (response.ok) return callback(null, data);\n      responseJsonData = data; // Taken from aws-sdk-js/lib/protocol/json.js\n      // eslint-disable-next-line no-underscore-dangle\n\n      var code = (data.__type || data.code).split('#').pop();\n      var error = {\n        code: code,\n        name: code,\n        message: data.message || data.Message || null\n      };\n      return callback(error);\n    })[\"catch\"](function (err) {\n      // first check if we have a service error\n      if (response && response.headers && response.headers.get('x-amzn-errortype')) {\n        try {\n          var code = response.headers.get('x-amzn-errortype').split(':')[0];\n          var error = {\n            code: code,\n            name: code,\n            statusCode: response.status,\n            message: response.status ? response.status.toString() : null\n          };\n          return callback(error);\n        } catch (ex) {\n          return callback(err);\n        } // otherwise check if error is Network error\n\n      } else if (err instanceof Error && err.message === 'Network error') {\n        var _error = {\n          code: 'NetworkError',\n          name: err.name,\n          message: err.message\n        };\n        return callback(_error);\n      } else {\n        return callback(err);\n      }\n    });\n  };\n\n  return Client;\n}();\n\nexport { Client as default };","/*!\n * Copyright 2016 Amazon.com,\n * Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Amazon Software License (the \"License\").\n * You may not use this file except in compliance with the\n * License. A copy of the License is located at\n *\n *     http://aws.amazon.com/asl/\n *\n * or in the \"license\" file accompanying this file. This file is\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, express or implied. See the License\n * for the specific language governing permissions and\n * limitations under the License.\n */\nimport Client from './Client';\nimport CognitoUser from './CognitoUser';\nimport StorageHelper from './StorageHelper';\n/** @class */\n\nvar CognitoUserPool = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUserPool object\n   * @param {object} data Creation options.\n   * @param {string} data.UserPoolId Cognito user pool id.\n   * @param {string} data.ClientId User pool application client id.\n   * @param {object} data.Storage Optional storage object.\n   * @param {boolean} data.AdvancedSecurityDataCollectionFlag Optional:\n   *        boolean flag indicating if the data collection is enabled\n   *        to support cognito advanced security features. By default, this\n   *        flag is set to true.\n   */\n  function CognitoUserPool(data) {\n    var _ref = data || {},\n        UserPoolId = _ref.UserPoolId,\n        ClientId = _ref.ClientId,\n        endpoint = _ref.endpoint,\n        AdvancedSecurityDataCollectionFlag = _ref.AdvancedSecurityDataCollectionFlag;\n\n    if (!UserPoolId || !ClientId) {\n      throw new Error('Both UserPoolId and ClientId are required.');\n    }\n\n    if (!/^[\\w-]+_.+$/.test(UserPoolId)) {\n      throw new Error('Invalid UserPoolId format.');\n    }\n\n    var region = UserPoolId.split('_')[0];\n    this.userPoolId = UserPoolId;\n    this.clientId = ClientId;\n    this.client = new Client(region, endpoint);\n    /**\n     * By default, AdvancedSecurityDataCollectionFlag is set to true,\n     * if no input value is provided.\n     */\n\n    this.advancedSecurityDataCollectionFlag = AdvancedSecurityDataCollectionFlag !== false;\n    this.storage = data.Storage || new StorageHelper().getStorage();\n  }\n  /**\n   * @returns {string} the user pool id\n   */\n\n\n  var _proto = CognitoUserPool.prototype;\n\n  _proto.getUserPoolId = function getUserPoolId() {\n    return this.userPoolId;\n  }\n  /**\n   * @returns {string} the client id\n   */\n  ;\n\n  _proto.getClientId = function getClientId() {\n    return this.clientId;\n  }\n  /**\n   * @typedef {object} SignUpResult\n   * @property {CognitoUser} user New user.\n   * @property {bool} userConfirmed If the user is already confirmed.\n   */\n\n  /**\n   * method for signing up a user\n   * @param {string} username User's username.\n   * @param {string} password Plain-text initial password entered by user.\n   * @param {(AttributeArg[])=} userAttributes New user attributes.\n   * @param {(AttributeArg[])=} validationData Application metadata.\n   * @param {(AttributeArg[])=} clientMetadata Client metadata.\n   * @param {nodeCallback<SignUpResult>} callback Called on error or with the new user.\n   * @returns {void}\n   */\n  ;\n\n  _proto.signUp = function signUp(username, password, userAttributes, validationData, callback, clientMetadata) {\n    var _this = this;\n\n    var jsonReq = {\n      ClientId: this.clientId,\n      Username: username,\n      Password: password,\n      UserAttributes: userAttributes,\n      ValidationData: validationData,\n      ClientMetadata: clientMetadata\n    };\n\n    if (this.getUserContextData(username)) {\n      jsonReq.UserContextData = this.getUserContextData(username);\n    }\n\n    this.client.request('SignUp', jsonReq, function (err, data) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      var cognitoUser = {\n        Username: username,\n        Pool: _this,\n        Storage: _this.storage\n      };\n      var returnData = {\n        user: new CognitoUser(cognitoUser),\n        userConfirmed: data.UserConfirmed,\n        userSub: data.UserSub,\n        codeDeliveryDetails: data.CodeDeliveryDetails\n      };\n      return callback(null, returnData);\n    });\n  }\n  /**\n   * method for getting the current user of the application from the local storage\n   *\n   * @returns {CognitoUser} the user retrieved from storage\n   */\n  ;\n\n  _proto.getCurrentUser = function getCurrentUser() {\n    var lastUserKey = \"CognitoIdentityServiceProvider.\" + this.clientId + \".LastAuthUser\";\n    var lastAuthUser = this.storage.getItem(lastUserKey);\n\n    if (lastAuthUser) {\n      var cognitoUser = {\n        Username: lastAuthUser,\n        Pool: this,\n        Storage: this.storage\n      };\n      return new CognitoUser(cognitoUser);\n    }\n\n    return null;\n  }\n  /**\n   * This method returns the encoded data string used for cognito advanced security feature.\n   * This would be generated only when developer has included the JS used for collecting the\n   * data on their client. Please refer to documentation to know more about using AdvancedSecurity\n   * features\n   * @param {string} username the username for the context data\n   * @returns {string} the user context data\n   **/\n  ;\n\n  _proto.getUserContextData = function getUserContextData(username) {\n    if (typeof AmazonCognitoAdvancedSecurityData === 'undefined') {\n      return undefined;\n    }\n    /* eslint-disable */\n\n\n    var amazonCognitoAdvancedSecurityDataConst = AmazonCognitoAdvancedSecurityData;\n    /* eslint-enable */\n\n    if (this.advancedSecurityDataCollectionFlag) {\n      var advancedSecurityData = amazonCognitoAdvancedSecurityDataConst.getData(username, this.userPoolId, this.clientId);\n\n      if (advancedSecurityData) {\n        var userContextData = {\n          EncodedData: advancedSecurityData\n        };\n        return userContextData;\n      }\n    }\n\n    return {};\n  };\n\n  return CognitoUserPool;\n}();\n\nexport { CognitoUserPool as default };","import * as Cookies from 'js-cookie';\n/** @class */\n\nvar CookieStorage = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CookieStorage object\n   * @param {object} data Creation options.\n   * @param {string} data.domain Cookies domain (mandatory).\n   * @param {string} data.path Cookies path (default: '/')\n   * @param {integer} data.expires Cookie expiration (in days, default: 365)\n   * @param {boolean} data.secure Cookie secure flag (default: true)\n   */\n  function CookieStorage(data) {\n    if (data.domain) {\n      this.domain = data.domain;\n    } else {\n      throw new Error('The domain of cookieStorage can not be undefined.');\n    }\n\n    if (data.path) {\n      this.path = data.path;\n    } else {\n      this.path = '/';\n    }\n\n    if (Object.prototype.hasOwnProperty.call(data, 'expires')) {\n      this.expires = data.expires;\n    } else {\n      this.expires = 365;\n    }\n\n    if (Object.prototype.hasOwnProperty.call(data, 'secure')) {\n      this.secure = data.secure;\n    } else {\n      this.secure = true;\n    }\n  }\n  /**\n   * This is used to set a specific item in storage\n   * @param {string} key - the key for the item\n   * @param {object} value - the value\n   * @returns {string} value that was set\n   */\n\n\n  var _proto = CookieStorage.prototype;\n\n  _proto.setItem = function setItem(key, value) {\n    Cookies.set(key, value, {\n      path: this.path,\n      expires: this.expires,\n      domain: this.domain,\n      secure: this.secure\n    });\n    return Cookies.get(key);\n  }\n  /**\n   * This is used to get a specific key from storage\n   * @param {string} key - the key for the item\n   * This is used to clear the storage\n   * @returns {string} the data item\n   */\n  ;\n\n  _proto.getItem = function getItem(key) {\n    return Cookies.get(key);\n  }\n  /**\n   * This is used to remove an item from storage\n   * @param {string} key - the key being set\n   * @returns {string} value - value that was deleted\n   */\n  ;\n\n  _proto.removeItem = function removeItem(key) {\n    return Cookies.remove(key, {\n      path: this.path,\n      domain: this.domain,\n      secure: this.secure\n    });\n  }\n  /**\n   * This is used to clear the storage\n   * @returns {string} nothing\n   */\n  ;\n\n  _proto.clear = function clear() {\n    var cookies = Cookies.get();\n    var index;\n\n    for (index = 0; index < cookies.length; ++index) {\n      Cookies.remove(cookies[index]);\n    }\n\n    return {};\n  };\n\n  return CookieStorage;\n}();\n\nexport { CookieStorage as default };","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar SELF = '_self';\nexport var launchUri = function (url) {\n    var windowProxy = window.open(url, SELF);\n    if (windowProxy) {\n        return Promise.resolve(windowProxy);\n    }\n    else {\n        return Promise.reject();\n    }\n};\n//# sourceMappingURL=urlOpener.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { parse } from 'url'; // Used for OAuth parsing of Cognito Hosted UI\nimport { launchUri } from './urlOpener';\nimport * as oAuthStorage from './oauthStorage';\nimport { isCognitoHostedOpts, CognitoHostedUIIdentityProvider, } from '../types/Auth';\nimport { ConsoleLogger as Logger, Hub } from '@aws-amplify/core';\nvar SHA256 = require('crypto-js/sha256');\nvar Base64 = require('crypto-js/enc-base64');\nvar AMPLIFY_SYMBOL = (typeof Symbol !== 'undefined' &&\n    typeof Symbol.for === 'function'\n    ? Symbol.for('amplify_default')\n    : '@@amplify_default');\nvar dispatchAuthEvent = function (event, data, message) {\n    Hub.dispatch('auth', { event: event, data: data, message: message }, 'Auth', AMPLIFY_SYMBOL);\n};\nvar logger = new Logger('OAuth');\nvar OAuth = /** @class */ (function () {\n    function OAuth(_a) {\n        var config = _a.config, cognitoClientId = _a.cognitoClientId, _b = _a.scopes, scopes = _b === void 0 ? [] : _b;\n        this._urlOpener = config.urlOpener || launchUri;\n        this._config = config;\n        this._cognitoClientId = cognitoClientId;\n        this._scopes = scopes;\n    }\n    OAuth.prototype.oauthSignIn = function (responseType, domain, redirectSignIn, clientId, provider, customState) {\n        if (responseType === void 0) { responseType = 'code'; }\n        if (provider === void 0) { provider = CognitoHostedUIIdentityProvider.Cognito; }\n        var generatedState = this._generateState(32);\n        var state = customState\n            ? generatedState + \"-\" + customState\n            : generatedState;\n        oAuthStorage.setState(encodeURIComponent(state));\n        var pkce_key = this._generateRandom(128);\n        oAuthStorage.setPKCE(pkce_key);\n        var code_challenge = this._generateChallenge(pkce_key);\n        var code_challenge_method = 'S256';\n        var queryString = Object.entries(__assign(__assign({ redirect_uri: redirectSignIn, response_type: responseType, client_id: clientId, identity_provider: provider, scopes: this._scopes, state: state }, (responseType === 'code' ? { code_challenge: code_challenge } : {})), (responseType === 'code' ? { code_challenge_method: code_challenge_method } : {})))\n            .map(function (_a) {\n            var k = _a[0], v = _a[1];\n            return encodeURIComponent(k) + \"=\" + encodeURIComponent(v);\n        })\n            .join('&');\n        var URL = \"https://\" + domain + \"/oauth2/authorize?\" + queryString;\n        logger.debug(\"Redirecting to \" + URL);\n        this._urlOpener(URL, redirectSignIn);\n    };\n    OAuth.prototype._handleCodeFlow = function (currentUrl) {\n        return __awaiter(this, void 0, void 0, function () {\n            var code, oAuthTokenEndpoint, client_id, redirect_uri, code_verifier, oAuthTokenBody, body, _a, access_token, refresh_token, id_token, error;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        code = (parse(currentUrl).query || '')\n                            .split('&')\n                            .map(function (pairings) { return pairings.split('='); })\n                            .reduce(function (accum, _a) {\n                            var _b;\n                            var k = _a[0], v = _a[1];\n                            return (__assign(__assign({}, accum), (_b = {}, _b[k] = v, _b)));\n                        }, { code: undefined }).code;\n                        if (!code) {\n                            return [2 /*return*/];\n                        }\n                        oAuthTokenEndpoint = 'https://' + this._config.domain + '/oauth2/token';\n                        dispatchAuthEvent('codeFlow', {}, \"Retrieving tokens from \" + oAuthTokenEndpoint);\n                        client_id = isCognitoHostedOpts(this._config)\n                            ? this._cognitoClientId\n                            : this._config.clientID;\n                        redirect_uri = isCognitoHostedOpts(this._config)\n                            ? this._config.redirectSignIn\n                            : this._config.redirectUri;\n                        code_verifier = oAuthStorage.getPKCE();\n                        oAuthTokenBody = __assign({ grant_type: 'authorization_code', code: code,\n                            client_id: client_id,\n                            redirect_uri: redirect_uri }, (code_verifier ? { code_verifier: code_verifier } : {}));\n                        logger.debug(\"Calling token endpoint: \" + oAuthTokenEndpoint + \" with\", oAuthTokenBody);\n                        body = Object.entries(oAuthTokenBody)\n                            .map(function (_a) {\n                            var k = _a[0], v = _a[1];\n                            return encodeURIComponent(k) + \"=\" + encodeURIComponent(v);\n                        })\n                            .join('&');\n                        return [4 /*yield*/, fetch(oAuthTokenEndpoint, {\n                                method: 'POST',\n                                headers: {\n                                    'Content-Type': 'application/x-www-form-urlencoded',\n                                },\n                                body: body,\n                            })];\n                    case 1: return [4 /*yield*/, (_b.sent()).json()];\n                    case 2:\n                        _a = _b.sent(), access_token = _a.access_token, refresh_token = _a.refresh_token, id_token = _a.id_token, error = _a.error;\n                        if (error) {\n                            throw new Error(error);\n                        }\n                        return [2 /*return*/, {\n                                accessToken: access_token,\n                                refreshToken: refresh_token,\n                                idToken: id_token,\n                            }];\n                }\n            });\n        });\n    };\n    OAuth.prototype._handleImplicitFlow = function (currentUrl) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, id_token, access_token;\n            return __generator(this, function (_b) {\n                _a = parse(currentUrl)\n                    .hash.substr(1) // Remove # from returned code\n                    .split('&')\n                    .map(function (pairings) { return pairings.split('='); })\n                    .reduce(function (accum, _a) {\n                    var _b;\n                    var k = _a[0], v = _a[1];\n                    return (__assign(__assign({}, accum), (_b = {}, _b[k] = v, _b)));\n                }, {\n                    id_token: undefined,\n                    access_token: undefined,\n                }), id_token = _a.id_token, access_token = _a.access_token;\n                dispatchAuthEvent('implicitFlow', {}, \"Got tokens from \" + currentUrl);\n                logger.debug(\"Retrieving implicit tokens from \" + currentUrl + \" with\");\n                return [2 /*return*/, {\n                        accessToken: access_token,\n                        idToken: id_token,\n                        refreshToken: null,\n                    }];\n            });\n        });\n    };\n    OAuth.prototype.handleAuthResponse = function (currentUrl) {\n        return __awaiter(this, void 0, void 0, function () {\n            var urlParams, error, error_description, state, _a, _b, e_1;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        _c.trys.push([0, 5, , 6]);\n                        urlParams = currentUrl\n                            ? __assign(__assign({}, (parse(currentUrl).hash || '#')\n                                .substr(1)\n                                .split('&')\n                                .map(function (entry) { return entry.split('='); })\n                                .reduce(function (acc, _a) {\n                                var k = _a[0], v = _a[1];\n                                return ((acc[k] = v), acc);\n                            }, {})), (parse(currentUrl).query || '')\n                                .split('&')\n                                .map(function (entry) { return entry.split('='); })\n                                .reduce(function (acc, _a) {\n                                var k = _a[0], v = _a[1];\n                                return ((acc[k] = v), acc);\n                            }, {}))\n                            : {};\n                        error = urlParams.error, error_description = urlParams.error_description;\n                        if (error) {\n                            throw new Error(error_description);\n                        }\n                        state = this._validateState(urlParams);\n                        logger.debug(\"Starting \" + this._config.responseType + \" flow with \" + currentUrl);\n                        if (!(this._config.responseType === 'code')) return [3 /*break*/, 2];\n                        _a = [{}];\n                        return [4 /*yield*/, this._handleCodeFlow(currentUrl)];\n                    case 1: return [2 /*return*/, __assign.apply(void 0, [__assign.apply(void 0, _a.concat([(_c.sent())])), { state: state }])];\n                    case 2:\n                        _b = [{}];\n                        return [4 /*yield*/, this._handleImplicitFlow(currentUrl)];\n                    case 3: return [2 /*return*/, __assign.apply(void 0, [__assign.apply(void 0, _b.concat([(_c.sent())])), { state: state }])];\n                    case 4: return [3 /*break*/, 6];\n                    case 5:\n                        e_1 = _c.sent();\n                        logger.error(\"Error handling auth response.\", e_1);\n                        throw e_1;\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    OAuth.prototype._validateState = function (urlParams) {\n        if (!urlParams) {\n            return;\n        }\n        var savedState = oAuthStorage.getState();\n        var returnedState = urlParams.state;\n        // This is because savedState only exists if the flow was initiated by Amplify\n        if (savedState && savedState !== returnedState) {\n            throw new Error('Invalid state in OAuth flow');\n        }\n        return returnedState;\n    };\n    OAuth.prototype.signOut = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var oAuthLogoutEndpoint, client_id, signout_uri;\n            return __generator(this, function (_a) {\n                oAuthLogoutEndpoint = 'https://' + this._config.domain + '/logout?';\n                client_id = isCognitoHostedOpts(this._config)\n                    ? this._cognitoClientId\n                    : this._config.oauth.clientID;\n                signout_uri = isCognitoHostedOpts(this._config)\n                    ? this._config.redirectSignOut\n                    : this._config.returnTo;\n                oAuthLogoutEndpoint += Object.entries({\n                    client_id: client_id,\n                    logout_uri: encodeURIComponent(signout_uri),\n                })\n                    .map(function (_a) {\n                    var k = _a[0], v = _a[1];\n                    return k + \"=\" + v;\n                })\n                    .join('&');\n                dispatchAuthEvent('oAuthSignOut', { oAuth: 'signOut' }, \"Signing out from \" + oAuthLogoutEndpoint);\n                logger.debug(\"Signing out from \" + oAuthLogoutEndpoint);\n                return [2 /*return*/, this._urlOpener(oAuthLogoutEndpoint)];\n            });\n        });\n    };\n    OAuth.prototype._generateState = function (length) {\n        var result = '';\n        var i = length;\n        var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n        for (; i > 0; --i)\n            result += chars[Math.round(Math.random() * (chars.length - 1))];\n        return result;\n    };\n    OAuth.prototype._generateChallenge = function (code) {\n        return this._base64URL(SHA256(code));\n    };\n    OAuth.prototype._base64URL = function (string) {\n        return string\n            .toString(Base64)\n            .replace(/=/g, '')\n            .replace(/\\+/g, '-')\n            .replace(/\\//g, '_');\n    };\n    OAuth.prototype._generateRandom = function (size) {\n        var CHARSET = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~';\n        var buffer = new Uint8Array(size);\n        if (typeof window !== 'undefined' && !!window.crypto) {\n            window.crypto.getRandomValues(buffer);\n        }\n        else {\n            for (var i = 0; i < size; i += 1) {\n                buffer[i] = (Math.random() * CHARSET.length) | 0;\n            }\n        }\n        return this._bufferToString(buffer);\n    };\n    OAuth.prototype._bufferToString = function (buffer) {\n        var CHARSET = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n        var state = [];\n        for (var i = 0; i < buffer.byteLength; i += 1) {\n            var index = buffer[i] % CHARSET.length;\n            state.push(CHARSET[index]);\n        }\n        return state.join('');\n    };\n    return OAuth;\n}());\nexport default OAuth;\n//# sourceMappingURL=OAuth.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nexport var setState = function (state) {\n    window.sessionStorage.setItem('oauth_state', state);\n};\nexport var getState = function () {\n    var oauth_state = window.sessionStorage.getItem('oauth_state');\n    window.sessionStorage.removeItem('oauth_state');\n    return oauth_state;\n};\nexport var setPKCE = function (private_key) {\n    window.sessionStorage.setItem('ouath_pkce_key', private_key);\n};\nexport var getPKCE = function () {\n    var ouath_pkce_key = window.sessionStorage.getItem('ouath_pkce_key');\n    window.sessionStorage.removeItem('ouath_pkce_key');\n    return ouath_pkce_key;\n};\nexport var clearAll = function () {\n    window.sessionStorage.removeItem('ouath_pkce_key');\n    window.sessionStorage.removeItem('oauth_state');\n};\n//# sourceMappingURL=oauthStorage.js.map","/*\n * Copyright 2017-2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar XRError = /** @class */ (function (_super) {\n    __extends(XRError, _super);\n    function XRError() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return XRError;\n}(Error));\nexport { XRError };\nvar XRNoSceneConfiguredError = /** @class */ (function (_super) {\n    __extends(XRNoSceneConfiguredError, _super);\n    function XRNoSceneConfiguredError() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return XRNoSceneConfiguredError;\n}(XRError));\nexport { XRNoSceneConfiguredError };\nvar XRSceneNotFoundError = /** @class */ (function (_super) {\n    __extends(XRSceneNotFoundError, _super);\n    function XRSceneNotFoundError() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return XRSceneNotFoundError;\n}(XRError));\nexport { XRSceneNotFoundError };\nvar XRSceneNotLoadedError = /** @class */ (function (_super) {\n    __extends(XRSceneNotLoadedError, _super);\n    function XRSceneNotLoadedError() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return XRSceneNotLoadedError;\n}(XRError));\nexport { XRSceneNotLoadedError };\nvar XRNoDomElement = /** @class */ (function (_super) {\n    __extends(XRNoDomElement, _super);\n    function XRNoDomElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return XRNoDomElement;\n}(XRError));\nexport { XRNoDomElement };\nvar XRSceneLoadFailure = /** @class */ (function (_super) {\n    __extends(XRSceneLoadFailure, _super);\n    function XRSceneLoadFailure() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return XRSceneLoadFailure;\n}(XRError));\nexport { XRSceneLoadFailure };\nvar XRProviderNotConfigured = /** @class */ (function (_super) {\n    __extends(XRProviderNotConfigured, _super);\n    function XRProviderNotConfigured() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return XRProviderNotConfigured;\n}(XRError));\nexport { XRProviderNotConfigured };\n//# sourceMappingURL=Errors.js.map","/*\n * Copyright 2017-2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { isUsernamePasswordOpts, isCognitoHostedOpts, isFederatedSignInOptions, isFederatedSignInOptionsCustom, } from './types';\nimport { AWS, ConsoleLogger as Logger, Constants, Hub, JS, Parser, Credentials, StorageHelper, } from '@aws-amplify/core';\nimport { CookieStorage, CognitoUserPool, AuthenticationDetails, CognitoUser, CognitoUserSession, CognitoUserAttribute, CognitoIdToken, CognitoRefreshToken, CognitoAccessToken, } from 'amazon-cognito-identity-js';\nimport { parse } from 'url';\nimport OAuth from './OAuth/OAuth';\nimport { default as urlListener } from './urlListener';\nimport { AuthError, NoUserPoolError } from './Errors';\nimport { AuthErrorTypes } from './types/Auth';\nvar logger = new Logger('AuthClass');\nvar USER_ADMIN_SCOPE = 'aws.cognito.signin.user.admin';\nvar AMPLIFY_SYMBOL = (typeof Symbol !== 'undefined' &&\n    typeof Symbol.for === 'function'\n    ? Symbol.for('amplify_default')\n    : '@@amplify_default');\nvar dispatchAuthEvent = function (event, data, message) {\n    Hub.dispatch('auth', { event: event, data: data, message: message }, 'Auth', AMPLIFY_SYMBOL);\n};\nexport var CognitoHostedUIIdentityProvider;\n(function (CognitoHostedUIIdentityProvider) {\n    CognitoHostedUIIdentityProvider[\"Cognito\"] = \"COGNITO\";\n    CognitoHostedUIIdentityProvider[\"Google\"] = \"Google\";\n    CognitoHostedUIIdentityProvider[\"Facebook\"] = \"Facebook\";\n    CognitoHostedUIIdentityProvider[\"Amazon\"] = \"LoginWithAmazon\";\n})(CognitoHostedUIIdentityProvider || (CognitoHostedUIIdentityProvider = {}));\n/**\n * Provide authentication steps\n */\nvar AuthClass = /** @class */ (function () {\n    /**\n     * Initialize Auth with AWS configurations\n     * @param {Object} config - Configuration of the Auth\n     */\n    function AuthClass(config) {\n        var _this = this;\n        this.userPool = null;\n        this.user = null;\n        this.configure(config);\n        this.currentUserCredentials = this.currentUserCredentials.bind(this);\n        if (AWS.config) {\n            AWS.config.update({ customUserAgent: Constants.userAgent });\n        }\n        else {\n            logger.warn('No AWS.config');\n        }\n        Hub.listen('auth', function (_a) {\n            var payload = _a.payload;\n            var event = payload.event;\n            switch (event) {\n                case 'signIn':\n                    _this._storage.setItem('amplify-signin-with-hostedUI', 'false');\n                    break;\n                case 'signOut':\n                    _this._storage.removeItem('amplify-signin-with-hostedUI');\n                    break;\n                case 'cognitoHostedUI':\n                    _this._storage.setItem('amplify-signin-with-hostedUI', 'true');\n                    break;\n            }\n        });\n    }\n    AuthClass.prototype.getModuleName = function () {\n        return 'Auth';\n    };\n    AuthClass.prototype.configure = function (config) {\n        var _this = this;\n        if (!config)\n            return this._config || {};\n        logger.debug('configure Auth');\n        var conf = Object.assign({}, this._config, Parser.parseMobilehubConfig(config).Auth, config);\n        this._config = conf;\n        var _a = this._config, userPoolId = _a.userPoolId, userPoolWebClientId = _a.userPoolWebClientId, cookieStorage = _a.cookieStorage, oauth = _a.oauth, region = _a.region, identityPoolId = _a.identityPoolId, mandatorySignIn = _a.mandatorySignIn, refreshHandlers = _a.refreshHandlers, identityPoolRegion = _a.identityPoolRegion, clientMetadata = _a.clientMetadata;\n        if (!this._config.storage) {\n            // backward compatbility\n            if (cookieStorage)\n                this._storage = new CookieStorage(cookieStorage);\n            else {\n                this._storage = new StorageHelper().getStorage();\n            }\n        }\n        else {\n            if (!this._isValidAuthStorage(this._config.storage)) {\n                logger.error('The storage in the Auth config is not valid!');\n                throw new Error('Empty storage object');\n            }\n            this._storage = this._config.storage;\n        }\n        this._storageSync = Promise.resolve();\n        if (typeof this._storage['sync'] === 'function') {\n            this._storageSync = this._storage['sync']();\n        }\n        if (userPoolId) {\n            var userPoolData = {\n                UserPoolId: userPoolId,\n                ClientId: userPoolWebClientId,\n            };\n            userPoolData.Storage = this._storage;\n            this.userPool = new CognitoUserPool(userPoolData);\n        }\n        Credentials.configure({\n            mandatorySignIn: mandatorySignIn,\n            region: identityPoolRegion || region,\n            userPoolId: userPoolId,\n            identityPoolId: identityPoolId,\n            refreshHandlers: refreshHandlers,\n            storage: this._storage,\n        });\n        // initiailize cognitoauth client if hosted ui options provided\n        // to keep backward compatibility:\n        var cognitoHostedUIConfig = oauth\n            ? isCognitoHostedOpts(this._config.oauth)\n                ? oauth\n                : oauth.awsCognito\n            : undefined;\n        if (cognitoHostedUIConfig) {\n            var cognitoAuthParams = Object.assign({\n                cognitoClientId: userPoolWebClientId,\n                UserPoolId: userPoolId,\n                domain: cognitoHostedUIConfig['domain'],\n                scopes: cognitoHostedUIConfig['scope'],\n                redirectSignIn: cognitoHostedUIConfig['redirectSignIn'],\n                redirectSignOut: cognitoHostedUIConfig['redirectSignOut'],\n                responseType: cognitoHostedUIConfig['responseType'],\n                Storage: this._storage,\n                urlOpener: cognitoHostedUIConfig['urlOpener'],\n                clientMetadata: clientMetadata,\n            }, cognitoHostedUIConfig['options']);\n            this._oAuthHandler = new OAuth({\n                scopes: cognitoAuthParams.scopes,\n                config: cognitoAuthParams,\n                cognitoClientId: cognitoAuthParams.cognitoClientId,\n            });\n            // **NOTE** - Remove this in a future major release as it is a breaking change\n            // Prevents _handleAuthResponse from being called multiple times in Expo\n            // See https://github.com/aws-amplify/amplify-js/issues/4388\n            var usedResponseUrls_1 = {};\n            urlListener(function (_a) {\n                var url = _a.url;\n                if (usedResponseUrls_1[url]) {\n                    return;\n                }\n                usedResponseUrls_1[url] = true;\n                _this._handleAuthResponse(url);\n            });\n        }\n        dispatchAuthEvent('configured', null, \"The Auth category has been configured successfully\");\n        return this._config;\n    };\n    /**\n     * Sign up with username, password and other attributes like phone, email\n     * @param {String | object} params - The user attributes used for signin\n     * @param {String[]} restOfAttrs - for the backward compatability\n     * @return - A promise resolves callback data if success\n     */\n    AuthClass.prototype.signUp = function (params) {\n        var _this = this;\n        var restOfAttrs = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            restOfAttrs[_i - 1] = arguments[_i];\n        }\n        if (!this.userPool) {\n            return this.rejectNoUserPool();\n        }\n        var username = null;\n        var password = null;\n        var attributes = [];\n        var validationData = null;\n        var clientMetadata;\n        if (params && typeof params === 'string') {\n            username = params;\n            password = restOfAttrs ? restOfAttrs[0] : null;\n            var email = restOfAttrs ? restOfAttrs[1] : null;\n            var phone_number = restOfAttrs ? restOfAttrs[2] : null;\n            if (email)\n                attributes.push({ Name: 'email', Value: email });\n            if (phone_number)\n                attributes.push({ Name: 'phone_number', Value: phone_number });\n        }\n        else if (params && typeof params === 'object') {\n            username = params['username'];\n            password = params['password'];\n            if (params && params.clientMetadata) {\n                clientMetadata = params.clientMetadata;\n            }\n            else if (this._config.clientMetadata) {\n                clientMetadata = this._config.clientMetadata;\n            }\n            var attrs_1 = params['attributes'];\n            if (attrs_1) {\n                Object.keys(attrs_1).map(function (key) {\n                    var ele = { Name: key, Value: attrs_1[key] };\n                    attributes.push(ele);\n                });\n            }\n            validationData = params['validationData'] || null;\n        }\n        else {\n            return this.rejectAuthError(AuthErrorTypes.SignUpError);\n        }\n        if (!username) {\n            return this.rejectAuthError(AuthErrorTypes.EmptyUsername);\n        }\n        if (!password) {\n            return this.rejectAuthError(AuthErrorTypes.EmptyPassword);\n        }\n        logger.debug('signUp attrs:', attributes);\n        logger.debug('signUp validation data:', validationData);\n        return new Promise(function (resolve, reject) {\n            _this.userPool.signUp(username, password, attributes, validationData, function (err, data) {\n                if (err) {\n                    dispatchAuthEvent('signUp_failure', err, username + \" failed to signup\");\n                    reject(err);\n                }\n                else {\n                    dispatchAuthEvent('signUp', data, username + \" has signed up successfully\");\n                    resolve(data);\n                }\n            }, clientMetadata);\n        });\n    };\n    /**\n     * Send the verfication code to confirm sign up\n     * @param {String} username - The username to be confirmed\n     * @param {String} code - The verification code\n     * @param {ConfirmSignUpOptions} options - other options for confirm signup\n     * @return - A promise resolves callback data if success\n     */\n    AuthClass.prototype.confirmSignUp = function (username, code, options) {\n        if (!this.userPool) {\n            return this.rejectNoUserPool();\n        }\n        if (!username) {\n            return this.rejectAuthError(AuthErrorTypes.EmptyUsername);\n        }\n        if (!code) {\n            return this.rejectAuthError(AuthErrorTypes.EmptyCode);\n        }\n        var user = this.createCognitoUser(username);\n        var forceAliasCreation = options && typeof options.forceAliasCreation === 'boolean'\n            ? options.forceAliasCreation\n            : true;\n        var clientMetadata;\n        if (options && options.clientMetadata) {\n            clientMetadata = options.clientMetadata;\n        }\n        else if (this._config.clientMetadata) {\n            clientMetadata = this._config.clientMetadata;\n        }\n        return new Promise(function (resolve, reject) {\n            user.confirmRegistration(code, forceAliasCreation, function (err, data) {\n                if (err) {\n                    reject(err);\n                }\n                else {\n                    resolve(data);\n                }\n            }, clientMetadata);\n        });\n    };\n    /**\n     * Resend the verification code\n     * @param {String} username - The username to be confirmed\n     * @param {ClientMetadata} clientMetadata - Metadata to be passed to Cognito Lambda triggers\n     * @return - A promise resolves data if success\n     */\n    AuthClass.prototype.resendSignUp = function (username, clientMetadata) {\n        if (clientMetadata === void 0) { clientMetadata = this._config.clientMetadata; }\n        if (!this.userPool) {\n            return this.rejectNoUserPool();\n        }\n        if (!username) {\n            return this.rejectAuthError(AuthErrorTypes.EmptyUsername);\n        }\n        var user = this.createCognitoUser(username);\n        return new Promise(function (resolve, reject) {\n            user.resendConfirmationCode(function (err, data) {\n                if (err) {\n                    reject(err);\n                }\n                else {\n                    resolve(data);\n                }\n            }, clientMetadata);\n        });\n    };\n    /**\n     * Sign in\n     * @param {String | SignInOpts} usernameOrSignInOpts - The username to be signed in or the sign in options\n     * @param {String} password - The password of the username\n     * @return - A promise resolves the CognitoUser\n     */\n    AuthClass.prototype.signIn = function (usernameOrSignInOpts, pw, clientMetadata) {\n        if (clientMetadata === void 0) { clientMetadata = this._config.clientMetadata; }\n        if (!this.userPool) {\n            return this.rejectNoUserPool();\n        }\n        var username = null;\n        var password = null;\n        var validationData = {};\n        // for backward compatibility\n        if (typeof usernameOrSignInOpts === 'string') {\n            username = usernameOrSignInOpts;\n            password = pw;\n        }\n        else if (isUsernamePasswordOpts(usernameOrSignInOpts)) {\n            if (typeof pw !== 'undefined') {\n                logger.warn('The password should be defined under the first parameter object!');\n            }\n            username = usernameOrSignInOpts.username;\n            password = usernameOrSignInOpts.password;\n            validationData = usernameOrSignInOpts.validationData;\n        }\n        else {\n            return this.rejectAuthError(AuthErrorTypes.InvalidUsername);\n        }\n        if (!username) {\n            return this.rejectAuthError(AuthErrorTypes.EmptyUsername);\n        }\n        var authDetails = new AuthenticationDetails({\n            Username: username,\n            Password: password,\n            ValidationData: validationData,\n            ClientMetadata: clientMetadata,\n        });\n        if (password) {\n            return this.signInWithPassword(authDetails);\n        }\n        else {\n            return this.signInWithoutPassword(authDetails);\n        }\n    };\n    /**\n     * Return an object with the authentication callbacks\n     * @param {CognitoUser} user - the cognito user object\n     * @param {} resolve - function called when resolving the current step\n     * @param {} reject - function called when rejecting the current step\n     * @return - an object with the callback methods for user authentication\n     */\n    AuthClass.prototype.authCallbacks = function (user, resolve, reject) {\n        var _this = this;\n        var that = this;\n        return {\n            onSuccess: function (session) { return __awaiter(_this, void 0, void 0, function () {\n                var cred, e_1, currentUser, e_2;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            logger.debug(session);\n                            delete user['challengeName'];\n                            delete user['challengeParam'];\n                            _a.label = 1;\n                        case 1:\n                            _a.trys.push([1, 4, 5, 9]);\n                            return [4 /*yield*/, Credentials.clear()];\n                        case 2:\n                            _a.sent();\n                            return [4 /*yield*/, Credentials.set(session, 'session')];\n                        case 3:\n                            cred = _a.sent();\n                            logger.debug('succeed to get cognito credentials', cred);\n                            return [3 /*break*/, 9];\n                        case 4:\n                            e_1 = _a.sent();\n                            logger.debug('cannot get cognito credentials', e_1);\n                            return [3 /*break*/, 9];\n                        case 5:\n                            _a.trys.push([5, 7, , 8]);\n                            return [4 /*yield*/, this.currentUserPoolUser()];\n                        case 6:\n                            currentUser = _a.sent();\n                            that.user = currentUser;\n                            dispatchAuthEvent('signIn', currentUser, \"A user \" + user.getUsername() + \" has been signed in\");\n                            resolve(currentUser);\n                            return [3 /*break*/, 8];\n                        case 7:\n                            e_2 = _a.sent();\n                            logger.error('Failed to get the signed in user', e_2);\n                            reject(e_2);\n                            return [3 /*break*/, 8];\n                        case 8: return [7 /*endfinally*/];\n                        case 9: return [2 /*return*/];\n                    }\n                });\n            }); },\n            onFailure: function (err) {\n                logger.debug('signIn failure', err);\n                dispatchAuthEvent('signIn_failure', err, user.getUsername() + \" failed to signin\");\n                reject(err);\n            },\n            customChallenge: function (challengeParam) {\n                logger.debug('signIn custom challenge answer required');\n                user['challengeName'] = 'CUSTOM_CHALLENGE';\n                user['challengeParam'] = challengeParam;\n                resolve(user);\n            },\n            mfaRequired: function (challengeName, challengeParam) {\n                logger.debug('signIn MFA required');\n                user['challengeName'] = challengeName;\n                user['challengeParam'] = challengeParam;\n                resolve(user);\n            },\n            mfaSetup: function (challengeName, challengeParam) {\n                logger.debug('signIn mfa setup', challengeName);\n                user['challengeName'] = challengeName;\n                user['challengeParam'] = challengeParam;\n                resolve(user);\n            },\n            newPasswordRequired: function (userAttributes, requiredAttributes) {\n                logger.debug('signIn new password');\n                user['challengeName'] = 'NEW_PASSWORD_REQUIRED';\n                user['challengeParam'] = {\n                    userAttributes: userAttributes,\n                    requiredAttributes: requiredAttributes,\n                };\n                resolve(user);\n            },\n            totpRequired: function (challengeName, challengeParam) {\n                logger.debug('signIn totpRequired');\n                user['challengeName'] = challengeName;\n                user['challengeParam'] = challengeParam;\n                resolve(user);\n            },\n            selectMFAType: function (challengeName, challengeParam) {\n                logger.debug('signIn selectMFAType', challengeName);\n                user['challengeName'] = challengeName;\n                user['challengeParam'] = challengeParam;\n                resolve(user);\n            },\n        };\n    };\n    /**\n     * Sign in with a password\n     * @private\n     * @param {AuthenticationDetails} authDetails - the user sign in data\n     * @return - A promise resolves the CognitoUser object if success or mfa required\n     */\n    AuthClass.prototype.signInWithPassword = function (authDetails) {\n        var _this = this;\n        var user = this.createCognitoUser(authDetails.getUsername());\n        return new Promise(function (resolve, reject) {\n            user.authenticateUser(authDetails, _this.authCallbacks(user, resolve, reject));\n        });\n    };\n    /**\n     * Sign in without a password\n     * @private\n     * @param {AuthenticationDetails} authDetails - the user sign in data\n     * @return - A promise resolves the CognitoUser object if success or mfa required\n     */\n    AuthClass.prototype.signInWithoutPassword = function (authDetails) {\n        var _this = this;\n        var user = this.createCognitoUser(authDetails.getUsername());\n        user.setAuthenticationFlowType('CUSTOM_AUTH');\n        return new Promise(function (resolve, reject) {\n            user.initiateAuth(authDetails, _this.authCallbacks(user, resolve, reject));\n        });\n    };\n    /**\n     * get user current preferred mfa option\n     * this method doesn't work with totp, we need to deprecate it.\n     * @deprecated\n     * @param {CognitoUser} user - the current user\n     * @return - A promise resolves the current preferred mfa option if success\n     */\n    AuthClass.prototype.getMFAOptions = function (user) {\n        return new Promise(function (res, rej) {\n            user.getMFAOptions(function (err, mfaOptions) {\n                if (err) {\n                    logger.debug('get MFA Options failed', err);\n                    rej(err);\n                    return;\n                }\n                logger.debug('get MFA options success', mfaOptions);\n                res(mfaOptions);\n                return;\n            });\n        });\n    };\n    /**\n     * get preferred mfa method\n     * @param {CognitoUser} user - the current cognito user\n     * @param {GetPreferredMFAOpts} params - options for getting the current user preferred MFA\n     */\n    AuthClass.prototype.getPreferredMFA = function (user, params) {\n        var that = this;\n        return new Promise(function (res, rej) {\n            var bypassCache = params ? params.bypassCache : false;\n            user.getUserData(function (err, data) {\n                if (err) {\n                    logger.debug('getting preferred mfa failed', err);\n                    rej(err);\n                    return;\n                }\n                var mfaType = that._getMfaTypeFromUserData(data);\n                if (!mfaType) {\n                    rej('invalid MFA Type');\n                    return;\n                }\n                else {\n                    res(mfaType);\n                    return;\n                }\n            }, { bypassCache: bypassCache });\n        });\n    };\n    AuthClass.prototype._getMfaTypeFromUserData = function (data) {\n        var ret = null;\n        var preferredMFA = data.PreferredMfaSetting;\n        // if the user has used Auth.setPreferredMFA() to setup the mfa type\n        // then the \"PreferredMfaSetting\" would exist in the response\n        if (preferredMFA) {\n            ret = preferredMFA;\n        }\n        else {\n            // if mfaList exists but empty, then its noMFA\n            var mfaList = data.UserMFASettingList;\n            if (!mfaList) {\n                // if SMS was enabled by using Auth.enableSMS(),\n                // the response would contain MFAOptions\n                // as for now Cognito only supports for SMS, so we will say it is 'SMS_MFA'\n                // if it does not exist, then it should be NOMFA\n                var MFAOptions = data.MFAOptions;\n                if (MFAOptions) {\n                    ret = 'SMS_MFA';\n                }\n                else {\n                    ret = 'NOMFA';\n                }\n            }\n            else if (mfaList.length === 0) {\n                ret = 'NOMFA';\n            }\n            else {\n                logger.debug('invalid case for getPreferredMFA', data);\n            }\n        }\n        return ret;\n    };\n    AuthClass.prototype._getUserData = function (user, params) {\n        return new Promise(function (res, rej) {\n            user.getUserData(function (err, data) {\n                if (err) {\n                    logger.debug('getting user data failed', err);\n                    rej(err);\n                    return;\n                }\n                else {\n                    res(data);\n                    return;\n                }\n            }, params);\n        });\n    };\n    /**\n     * set preferred MFA method\n     * @param {CognitoUser} user - the current Cognito user\n     * @param {string} mfaMethod - preferred mfa method\n     * @return - A promise resolve if success\n     */\n    AuthClass.prototype.setPreferredMFA = function (user, mfaMethod) {\n        return __awaiter(this, void 0, void 0, function () {\n            var userData, smsMfaSettings, totpMfaSettings, _a, mfaList, currentMFAType, that;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this._getUserData(user, { bypassCache: true })];\n                    case 1:\n                        userData = _b.sent();\n                        smsMfaSettings = null;\n                        totpMfaSettings = null;\n                        _a = mfaMethod;\n                        switch (_a) {\n                            case 'TOTP' || 'SOFTWARE_TOKEN_MFA': return [3 /*break*/, 2];\n                            case 'SMS' || 'SMS_MFA': return [3 /*break*/, 3];\n                            case 'NOMFA': return [3 /*break*/, 4];\n                        }\n                        return [3 /*break*/, 6];\n                    case 2:\n                        totpMfaSettings = {\n                            PreferredMfa: true,\n                            Enabled: true,\n                        };\n                        return [3 /*break*/, 7];\n                    case 3:\n                        smsMfaSettings = {\n                            PreferredMfa: true,\n                            Enabled: true,\n                        };\n                        return [3 /*break*/, 7];\n                    case 4:\n                        mfaList = userData['UserMFASettingList'];\n                        return [4 /*yield*/, this._getMfaTypeFromUserData(userData)];\n                    case 5:\n                        currentMFAType = _b.sent();\n                        if (currentMFAType === 'NOMFA') {\n                            return [2 /*return*/, Promise.resolve('No change for mfa type')];\n                        }\n                        else if (currentMFAType === 'SMS_MFA') {\n                            smsMfaSettings = {\n                                PreferredMfa: false,\n                                Enabled: false,\n                            };\n                        }\n                        else if (currentMFAType === 'SOFTWARE_TOKEN_MFA') {\n                            totpMfaSettings = {\n                                PreferredMfa: false,\n                                Enabled: false,\n                            };\n                        }\n                        else {\n                            return [2 /*return*/, this.rejectAuthError(AuthErrorTypes.InvalidMFA)];\n                        }\n                        // if there is a UserMFASettingList in the response\n                        // we need to disable every mfa type in that list\n                        if (mfaList && mfaList.length !== 0) {\n                            // to disable SMS or TOTP if exists in that list\n                            mfaList.forEach(function (mfaType) {\n                                if (mfaType === 'SMS_MFA') {\n                                    smsMfaSettings = {\n                                        PreferredMfa: false,\n                                        Enabled: false,\n                                    };\n                                }\n                                else if (mfaType === 'SOFTWARE_TOKEN_MFA') {\n                                    totpMfaSettings = {\n                                        PreferredMfa: false,\n                                        Enabled: false,\n                                    };\n                                }\n                            });\n                        }\n                        return [3 /*break*/, 7];\n                    case 6:\n                        logger.debug('no validmfa method provided');\n                        return [2 /*return*/, this.rejectAuthError(AuthErrorTypes.NoMFA)];\n                    case 7:\n                        that = this;\n                        return [2 /*return*/, new Promise(function (res, rej) {\n                                user.setUserMfaPreference(smsMfaSettings, totpMfaSettings, function (err, result) {\n                                    if (err) {\n                                        logger.debug('Set user mfa preference error', err);\n                                        return rej(err);\n                                    }\n                                    logger.debug('Set user mfa success', result);\n                                    logger.debug('Caching the latest user data into local');\n                                    // cache the latest result into user data\n                                    user.getUserData(function (err, data) {\n                                        if (err) {\n                                            logger.debug('getting user data failed', err);\n                                            return rej(err);\n                                        }\n                                        else {\n                                            return res(result);\n                                        }\n                                    }, { bypassCache: true });\n                                });\n                            })];\n                }\n            });\n        });\n    };\n    /**\n     * diable SMS\n     * @deprecated\n     * @param {CognitoUser} user - the current user\n     * @return - A promise resolves is success\n     */\n    AuthClass.prototype.disableSMS = function (user) {\n        return new Promise(function (res, rej) {\n            user.disableMFA(function (err, data) {\n                if (err) {\n                    logger.debug('disable mfa failed', err);\n                    rej(err);\n                    return;\n                }\n                logger.debug('disable mfa succeed', data);\n                res(data);\n                return;\n            });\n        });\n    };\n    /**\n     * enable SMS\n     * @deprecated\n     * @param {CognitoUser} user - the current user\n     * @return - A promise resolves is success\n     */\n    AuthClass.prototype.enableSMS = function (user) {\n        return new Promise(function (res, rej) {\n            user.enableMFA(function (err, data) {\n                if (err) {\n                    logger.debug('enable mfa failed', err);\n                    rej(err);\n                    return;\n                }\n                logger.debug('enable mfa succeed', data);\n                res(data);\n                return;\n            });\n        });\n    };\n    /**\n     * Setup TOTP\n     * @param {CognitoUser} user - the current user\n     * @return - A promise resolves with the secret code if success\n     */\n    AuthClass.prototype.setupTOTP = function (user) {\n        return new Promise(function (res, rej) {\n            user.associateSoftwareToken({\n                onFailure: function (err) {\n                    logger.debug('associateSoftwareToken failed', err);\n                    rej(err);\n                    return;\n                },\n                associateSecretCode: function (secretCode) {\n                    logger.debug('associateSoftwareToken sucess', secretCode);\n                    res(secretCode);\n                    return;\n                },\n            });\n        });\n    };\n    /**\n     * verify TOTP setup\n     * @param {CognitoUser} user - the current user\n     * @param {string} challengeAnswer - challenge answer\n     * @return - A promise resolves is success\n     */\n    AuthClass.prototype.verifyTotpToken = function (user, challengeAnswer) {\n        logger.debug('verfication totp token', user, challengeAnswer);\n        return new Promise(function (res, rej) {\n            user.verifySoftwareToken(challengeAnswer, 'My TOTP device', {\n                onFailure: function (err) {\n                    logger.debug('verifyTotpToken failed', err);\n                    rej(err);\n                    return;\n                },\n                onSuccess: function (data) {\n                    logger.debug('verifyTotpToken success', data);\n                    res(data);\n                    return;\n                },\n            });\n        });\n    };\n    /**\n     * Send MFA code to confirm sign in\n     * @param {Object} user - The CognitoUser object\n     * @param {String} code - The confirmation code\n     */\n    AuthClass.prototype.confirmSignIn = function (user, code, mfaType, clientMetadata) {\n        var _this = this;\n        if (clientMetadata === void 0) { clientMetadata = this._config.clientMetadata; }\n        if (!code) {\n            return this.rejectAuthError(AuthErrorTypes.EmptyCode);\n        }\n        var that = this;\n        return new Promise(function (resolve, reject) {\n            user.sendMFACode(code, {\n                onSuccess: function (session) { return __awaiter(_this, void 0, void 0, function () {\n                    var cred, e_3;\n                    return __generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0:\n                                logger.debug(session);\n                                _a.label = 1;\n                            case 1:\n                                _a.trys.push([1, 4, 5, 6]);\n                                return [4 /*yield*/, Credentials.clear()];\n                            case 2:\n                                _a.sent();\n                                return [4 /*yield*/, Credentials.set(session, 'session')];\n                            case 3:\n                                cred = _a.sent();\n                                logger.debug('succeed to get cognito credentials', cred);\n                                return [3 /*break*/, 6];\n                            case 4:\n                                e_3 = _a.sent();\n                                logger.debug('cannot get cognito credentials', e_3);\n                                return [3 /*break*/, 6];\n                            case 5:\n                                that.user = user;\n                                dispatchAuthEvent('signIn', user, user + \" has signed in\");\n                                resolve(user);\n                                return [7 /*endfinally*/];\n                            case 6: return [2 /*return*/];\n                        }\n                    });\n                }); },\n                onFailure: function (err) {\n                    logger.debug('confirm signIn failure', err);\n                    reject(err);\n                },\n            }, mfaType, clientMetadata);\n        });\n    };\n    AuthClass.prototype.completeNewPassword = function (user, password, requiredAttributes, clientMetadata) {\n        var _this = this;\n        if (clientMetadata === void 0) { clientMetadata = this._config.clientMetadata; }\n        if (!password) {\n            return this.rejectAuthError(AuthErrorTypes.EmptyPassword);\n        }\n        var that = this;\n        return new Promise(function (resolve, reject) {\n            user.completeNewPasswordChallenge(password, requiredAttributes, {\n                onSuccess: function (session) { return __awaiter(_this, void 0, void 0, function () {\n                    var cred, e_4;\n                    return __generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0:\n                                logger.debug(session);\n                                _a.label = 1;\n                            case 1:\n                                _a.trys.push([1, 4, 5, 6]);\n                                return [4 /*yield*/, Credentials.clear()];\n                            case 2:\n                                _a.sent();\n                                return [4 /*yield*/, Credentials.set(session, 'session')];\n                            case 3:\n                                cred = _a.sent();\n                                logger.debug('succeed to get cognito credentials', cred);\n                                return [3 /*break*/, 6];\n                            case 4:\n                                e_4 = _a.sent();\n                                logger.debug('cannot get cognito credentials', e_4);\n                                return [3 /*break*/, 6];\n                            case 5:\n                                that.user = user;\n                                dispatchAuthEvent('signIn', user, user + \" has signed in\");\n                                resolve(user);\n                                return [7 /*endfinally*/];\n                            case 6: return [2 /*return*/];\n                        }\n                    });\n                }); },\n                onFailure: function (err) {\n                    logger.debug('completeNewPassword failure', err);\n                    dispatchAuthEvent('completeNewPassword_failure', err, _this.user + \" failed to complete the new password flow\");\n                    reject(err);\n                },\n                mfaRequired: function (challengeName, challengeParam) {\n                    logger.debug('signIn MFA required');\n                    user['challengeName'] = challengeName;\n                    user['challengeParam'] = challengeParam;\n                    resolve(user);\n                },\n                mfaSetup: function (challengeName, challengeParam) {\n                    logger.debug('signIn mfa setup', challengeName);\n                    user['challengeName'] = challengeName;\n                    user['challengeParam'] = challengeParam;\n                    resolve(user);\n                },\n            }, clientMetadata);\n        });\n    };\n    /**\n     * Send the answer to a custom challenge\n     * @param {CognitoUser} user - The CognitoUser object\n     * @param {String} challengeResponses - The confirmation code\n     */\n    AuthClass.prototype.sendCustomChallengeAnswer = function (user, challengeResponses, clientMetadata) {\n        var _this = this;\n        if (clientMetadata === void 0) { clientMetadata = this._config.clientMetadata; }\n        if (!this.userPool) {\n            return this.rejectNoUserPool();\n        }\n        if (!challengeResponses) {\n            return this.rejectAuthError(AuthErrorTypes.EmptyChallengeResponse);\n        }\n        var that = this;\n        return new Promise(function (resolve, reject) {\n            user.sendCustomChallengeAnswer(challengeResponses, _this.authCallbacks(user, resolve, reject), clientMetadata);\n        });\n    };\n    /**\n     * Update an authenticated users' attributes\n     * @param {CognitoUser} - The currently logged in user object\n     * @return {Promise}\n     **/\n    AuthClass.prototype.updateUserAttributes = function (user, attributes, clientMetadata) {\n        if (clientMetadata === void 0) { clientMetadata = this._config.clientMetadata; }\n        var attributeList = [];\n        var that = this;\n        return new Promise(function (resolve, reject) {\n            that.userSession(user).then(function (session) {\n                for (var key in attributes) {\n                    if (key !== 'sub' && key.indexOf('_verified') < 0) {\n                        var attr = {\n                            Name: key,\n                            Value: attributes[key],\n                        };\n                        attributeList.push(attr);\n                    }\n                }\n                user.updateAttributes(attributeList, function (err, result) {\n                    if (err) {\n                        return reject(err);\n                    }\n                    else {\n                        return resolve(result);\n                    }\n                }, clientMetadata);\n            });\n        });\n    };\n    /**\n     * Return user attributes\n     * @param {Object} user - The CognitoUser object\n     * @return - A promise resolves to user attributes if success\n     */\n    AuthClass.prototype.userAttributes = function (user) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.userSession(user).then(function (session) {\n                user.getUserAttributes(function (err, attributes) {\n                    if (err) {\n                        reject(err);\n                    }\n                    else {\n                        resolve(attributes);\n                    }\n                });\n            });\n        });\n    };\n    AuthClass.prototype.verifiedContact = function (user) {\n        var that = this;\n        return this.userAttributes(user).then(function (attributes) {\n            var attrs = that.attributesToObject(attributes);\n            var unverified = {};\n            var verified = {};\n            if (attrs['email']) {\n                if (attrs['email_verified']) {\n                    verified['email'] = attrs['email'];\n                }\n                else {\n                    unverified['email'] = attrs['email'];\n                }\n            }\n            if (attrs['phone_number']) {\n                if (attrs['phone_number_verified']) {\n                    verified['phone_number'] = attrs['phone_number'];\n                }\n                else {\n                    unverified['phone_number'] = attrs['phone_number'];\n                }\n            }\n            return {\n                verified: verified,\n                unverified: unverified,\n            };\n        });\n    };\n    /**\n     * Get current authenticated user\n     * @return - A promise resolves to current authenticated CognitoUser if success\n     */\n    AuthClass.prototype.currentUserPoolUser = function (params) {\n        var _this = this;\n        if (!this.userPool) {\n            return this.rejectNoUserPool();\n        }\n        var that = this;\n        return new Promise(function (res, rej) {\n            _this._storageSync\n                .then(function () {\n                var user = that.userPool.getCurrentUser();\n                if (!user) {\n                    logger.debug('Failed to get user from user pool');\n                    rej('No current user');\n                    return;\n                }\n                // refresh the session if the session expired.\n                user.getSession(function (err, session) {\n                    if (err) {\n                        logger.debug('Failed to get the user session', err);\n                        rej(err);\n                        return;\n                    }\n                    // get user data from Cognito\n                    var bypassCache = params ? params.bypassCache : false;\n                    // validate the token's scope fisrt before calling this function\n                    var _a = session.getAccessToken().decodePayload().scope, scope = _a === void 0 ? '' : _a;\n                    if (scope.split(' ').includes(USER_ADMIN_SCOPE)) {\n                        user.getUserData(function (err, data) {\n                            if (err) {\n                                logger.debug('getting user data failed', err);\n                                // Make sure the user is still valid\n                                if (err.message === 'User is disabled.' ||\n                                    err.message === 'User does not exist.' ||\n                                    err.message === 'Access Token has been revoked' // Session revoked by another app\n                                ) {\n                                    rej(err);\n                                }\n                                else {\n                                    // the error may also be thrown when lack of permissions to get user info etc\n                                    // in that case we just bypass the error\n                                    res(user);\n                                }\n                                return;\n                            }\n                            var preferredMFA = data.PreferredMfaSetting || 'NOMFA';\n                            var attributeList = [];\n                            for (var i = 0; i < data.UserAttributes.length; i++) {\n                                var attribute = {\n                                    Name: data.UserAttributes[i].Name,\n                                    Value: data.UserAttributes[i].Value,\n                                };\n                                var userAttribute = new CognitoUserAttribute(attribute);\n                                attributeList.push(userAttribute);\n                            }\n                            var attributes = that.attributesToObject(attributeList);\n                            Object.assign(user, { attributes: attributes, preferredMFA: preferredMFA });\n                            return res(user);\n                        }, { bypassCache: bypassCache });\n                    }\n                    else {\n                        logger.debug(\"Unable to get the user data because the \" + USER_ADMIN_SCOPE + \" \" +\n                            \"is not in the scopes of the access token\");\n                        return res(user);\n                    }\n                });\n            })\n                .catch(function (e) {\n                logger.debug('Failed to sync cache info into memory', e);\n                return rej(e);\n            });\n        });\n    };\n    /**\n     * Get current authenticated user\n     * @param {CurrentUserOpts} - options for getting the current user\n     * @return - A promise resolves to current authenticated CognitoUser if success\n     */\n    AuthClass.prototype.currentAuthenticatedUser = function (params) {\n        return __awaiter(this, void 0, void 0, function () {\n            var federatedUser, e_5, user, e_6;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        logger.debug('getting current authenticated user');\n                        federatedUser = null;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this._storageSync];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_5 = _a.sent();\n                        logger.debug('Failed to sync cache info into memory', e_5);\n                        throw e_5;\n                    case 4:\n                        try {\n                            federatedUser = JSON.parse(this._storage.getItem('aws-amplify-federatedInfo')).user;\n                        }\n                        catch (e) {\n                            logger.debug('cannot load federated user from auth storage');\n                        }\n                        if (!federatedUser) return [3 /*break*/, 5];\n                        this.user = federatedUser;\n                        logger.debug('get current authenticated federated user', this.user);\n                        return [2 /*return*/, this.user];\n                    case 5:\n                        logger.debug('get current authenticated userpool user');\n                        user = null;\n                        _a.label = 6;\n                    case 6:\n                        _a.trys.push([6, 8, , 9]);\n                        return [4 /*yield*/, this.currentUserPoolUser(params)];\n                    case 7:\n                        user = _a.sent();\n                        return [3 /*break*/, 9];\n                    case 8:\n                        e_6 = _a.sent();\n                        if (e_6 === 'No userPool') {\n                            logger.error('Cannot get the current user because the user pool is missing. ' +\n                                'Please make sure the Auth module is configured with a valid Cognito User Pool ID');\n                        }\n                        logger.debug('The user is not authenticated by the error', e_6);\n                        throw 'not authenticated';\n                    case 9:\n                        this.user = user;\n                        return [2 /*return*/, this.user];\n                }\n            });\n        });\n    };\n    /**\n     * Get current user's session\n     * @return - A promise resolves to session object if success\n     */\n    AuthClass.prototype.currentSession = function () {\n        var that = this;\n        logger.debug('Getting current session');\n        // Purposely not calling the reject method here because we don't need a console error\n        if (!this.userPool) {\n            return Promise.reject();\n        }\n        return new Promise(function (res, rej) {\n            that\n                .currentUserPoolUser()\n                .then(function (user) {\n                that\n                    .userSession(user)\n                    .then(function (session) {\n                    res(session);\n                    return;\n                })\n                    .catch(function (e) {\n                    logger.debug('Failed to get the current session', e);\n                    rej(e);\n                    return;\n                });\n            })\n                .catch(function (e) {\n                logger.debug('Failed to get the current user', e);\n                rej(e);\n                return;\n            });\n        });\n    };\n    /**\n     * Get the corresponding user session\n     * @param {Object} user - The CognitoUser object\n     * @return - A promise resolves to the session\n     */\n    AuthClass.prototype.userSession = function (user) {\n        if (!user) {\n            logger.debug('the user is null');\n            return this.rejectAuthError(AuthErrorTypes.NoUserSession);\n        }\n        return new Promise(function (resolve, reject) {\n            logger.debug('Getting the session from this user:', user);\n            user.getSession(function (err, session) {\n                if (err) {\n                    logger.debug('Failed to get the session from user', user);\n                    reject(err);\n                    return;\n                }\n                else {\n                    logger.debug('Succeed to get the user session', session);\n                    resolve(session);\n                    return;\n                }\n            });\n        });\n    };\n    /**\n     * Get  authenticated credentials of current user.\n     * @return - A promise resolves to be current user's credentials\n     */\n    AuthClass.prototype.currentUserCredentials = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var that, e_7, federatedInfo;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        that = this;\n                        logger.debug('Getting current user credentials');\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this._storageSync];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_7 = _a.sent();\n                        logger.debug('Failed to sync cache info into memory', e_7);\n                        throw e_7;\n                    case 4:\n                        federatedInfo = null;\n                        try {\n                            federatedInfo = JSON.parse(this._storage.getItem('aws-amplify-federatedInfo'));\n                        }\n                        catch (e) {\n                            logger.debug('failed to get or parse item aws-amplify-federatedInfo', e);\n                        }\n                        if (federatedInfo) {\n                            // refresh the jwt token here if necessary\n                            return [2 /*return*/, Credentials.refreshFederatedToken(federatedInfo)];\n                        }\n                        else {\n                            return [2 /*return*/, this.currentSession()\n                                    .then(function (session) {\n                                    logger.debug('getting session success', session);\n                                    return Credentials.set(session, 'session');\n                                })\n                                    .catch(function (error) {\n                                    logger.debug('getting session failed', error);\n                                    return Credentials.set(null, 'guest');\n                                })];\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AuthClass.prototype.currentCredentials = function () {\n        logger.debug('getting current credntials');\n        return Credentials.get();\n    };\n    /**\n     * Initiate an attribute confirmation request\n     * @param {Object} user - The CognitoUser\n     * @param {Object} attr - The attributes to be verified\n     * @return - A promise resolves to callback data if success\n     */\n    AuthClass.prototype.verifyUserAttribute = function (user, attr, clientMetadata) {\n        if (clientMetadata === void 0) { clientMetadata = this._config.clientMetadata; }\n        return new Promise(function (resolve, reject) {\n            user.getAttributeVerificationCode(attr, {\n                onSuccess: function () {\n                    return resolve();\n                },\n                onFailure: function (err) {\n                    return reject(err);\n                },\n                clientMetadata: clientMetadata,\n            });\n        });\n    };\n    /**\n     * Confirm an attribute using a confirmation code\n     * @param {Object} user - The CognitoUser\n     * @param {Object} attr - The attribute to be verified\n     * @param {String} code - The confirmation code\n     * @return - A promise resolves to callback data if success\n     */\n    AuthClass.prototype.verifyUserAttributeSubmit = function (user, attr, code) {\n        if (!code) {\n            return this.rejectAuthError(AuthErrorTypes.EmptyCode);\n        }\n        return new Promise(function (resolve, reject) {\n            user.verifyAttribute(attr, code, {\n                onSuccess: function (data) {\n                    resolve(data);\n                    return;\n                },\n                onFailure: function (err) {\n                    reject(err);\n                    return;\n                },\n            });\n        });\n    };\n    AuthClass.prototype.verifyCurrentUserAttribute = function (attr) {\n        var that = this;\n        return that\n            .currentUserPoolUser()\n            .then(function (user) { return that.verifyUserAttribute(user, attr); });\n    };\n    /**\n     * Confirm current user's attribute using a confirmation code\n     * @param {Object} attr - The attribute to be verified\n     * @param {String} code - The confirmation code\n     * @return - A promise resolves to callback data if success\n     */\n    AuthClass.prototype.verifyCurrentUserAttributeSubmit = function (attr, code) {\n        var that = this;\n        return that\n            .currentUserPoolUser()\n            .then(function (user) { return that.verifyUserAttributeSubmit(user, attr, code); });\n    };\n    AuthClass.prototype.cognitoIdentitySignOut = function (opts, user) {\n        return __awaiter(this, void 0, void 0, function () {\n            var e_8, isSignedInHostedUI;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, this._storageSync];\n                    case 1:\n                        _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        e_8 = _a.sent();\n                        logger.debug('Failed to sync cache info into memory', e_8);\n                        throw e_8;\n                    case 3:\n                        isSignedInHostedUI = this._oAuthHandler &&\n                            this._storage.getItem('amplify-signin-with-hostedUI') === 'true';\n                        return [2 /*return*/, new Promise(function (res, rej) {\n                                if (opts && opts.global) {\n                                    logger.debug('user global sign out', user);\n                                    // in order to use global signout\n                                    // we must validate the user as an authenticated user by using getSession\n                                    user.getSession(function (err, result) {\n                                        if (err) {\n                                            logger.debug('failed to get the user session', err);\n                                            return rej(err);\n                                        }\n                                        user.globalSignOut({\n                                            onSuccess: function (data) {\n                                                logger.debug('global sign out success');\n                                                if (isSignedInHostedUI) {\n                                                    return res(_this._oAuthHandler.signOut());\n                                                }\n                                                else {\n                                                    return res();\n                                                }\n                                            },\n                                            onFailure: function (err) {\n                                                logger.debug('global sign out failed', err);\n                                                return rej(err);\n                                            },\n                                        });\n                                    });\n                                }\n                                else {\n                                    logger.debug('user sign out', user);\n                                    user.signOut();\n                                    if (isSignedInHostedUI) {\n                                        return res(_this._oAuthHandler.signOut());\n                                    }\n                                    else {\n                                        return res();\n                                    }\n                                }\n                            })];\n                }\n            });\n        });\n    };\n    /**\n     * Sign out method\n     * @\n     * @return - A promise resolved if success\n     */\n    AuthClass.prototype.signOut = function (opts) {\n        return __awaiter(this, void 0, void 0, function () {\n            var e_9, user;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, this.cleanCachedItems()];\n                    case 1:\n                        _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        e_9 = _a.sent();\n                        logger.debug('failed to clear cached items');\n                        return [3 /*break*/, 3];\n                    case 3:\n                        if (!this.userPool) return [3 /*break*/, 7];\n                        user = this.userPool.getCurrentUser();\n                        if (!user) return [3 /*break*/, 5];\n                        return [4 /*yield*/, this.cognitoIdentitySignOut(opts, user)];\n                    case 4:\n                        _a.sent();\n                        return [3 /*break*/, 6];\n                    case 5:\n                        logger.debug('no current Cognito user');\n                        _a.label = 6;\n                    case 6: return [3 /*break*/, 8];\n                    case 7:\n                        logger.debug('no Congito User pool');\n                        _a.label = 8;\n                    case 8:\n                        /**\n                         * Note for future refactor - no reliable way to get username with\n                         * Cognito User Pools vs Identity when federating with Social Providers\n                         * This is why we need a well structured session object that can be inspected\n                         * and information passed back in the message below for Hub dispatch\n                         */\n                        dispatchAuthEvent('signOut', this.user, \"A user has been signed out\");\n                        this.user = null;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AuthClass.prototype.cleanCachedItems = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: \n                    // clear cognito cached item\n                    return [4 /*yield*/, Credentials.clear()];\n                    case 1:\n                        // clear cognito cached item\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Change a password for an authenticated user\n     * @param {Object} user - The CognitoUser object\n     * @param {String} oldPassword - the current password\n     * @param {String} newPassword - the requested new password\n     * @return - A promise resolves if success\n     */\n    AuthClass.prototype.changePassword = function (user, oldPassword, newPassword, clientMetadata) {\n        var _this = this;\n        if (clientMetadata === void 0) { clientMetadata = this._config.clientMetadata; }\n        return new Promise(function (resolve, reject) {\n            _this.userSession(user).then(function (session) {\n                user.changePassword(oldPassword, newPassword, function (err, data) {\n                    if (err) {\n                        logger.debug('change password failure', err);\n                        return reject(err);\n                    }\n                    else {\n                        return resolve(data);\n                    }\n                }, clientMetadata);\n            });\n        });\n    };\n    /**\n     * Initiate a forgot password request\n     * @param {String} username - the username to change password\n     * @return - A promise resolves if success\n     */\n    AuthClass.prototype.forgotPassword = function (username, clientMetadata) {\n        if (clientMetadata === void 0) { clientMetadata = this._config.clientMetadata; }\n        if (!this.userPool) {\n            return this.rejectNoUserPool();\n        }\n        if (!username) {\n            return this.rejectAuthError(AuthErrorTypes.EmptyUsername);\n        }\n        var user = this.createCognitoUser(username);\n        return new Promise(function (resolve, reject) {\n            user.forgotPassword({\n                onSuccess: function () {\n                    resolve();\n                    return;\n                },\n                onFailure: function (err) {\n                    logger.debug('forgot password failure', err);\n                    dispatchAuthEvent('forgotPassword_failure', err, username + \" forgotPassword failed\");\n                    reject(err);\n                    return;\n                },\n                inputVerificationCode: function (data) {\n                    dispatchAuthEvent('forgotPassword', user, username + \" has initiated forgot password flow\");\n                    resolve(data);\n                    return;\n                },\n            }, clientMetadata);\n        });\n    };\n    /**\n     * Confirm a new password using a confirmation Code\n     * @param {String} username - The username\n     * @param {String} code - The confirmation code\n     * @param {String} password - The new password\n     * @return - A promise that resolves if success\n     */\n    AuthClass.prototype.forgotPasswordSubmit = function (username, code, password, clientMetadata) {\n        if (clientMetadata === void 0) { clientMetadata = this._config.clientMetadata; }\n        if (!this.userPool) {\n            return this.rejectNoUserPool();\n        }\n        if (!username) {\n            return this.rejectAuthError(AuthErrorTypes.EmptyUsername);\n        }\n        if (!code) {\n            return this.rejectAuthError(AuthErrorTypes.EmptyCode);\n        }\n        if (!password) {\n            return this.rejectAuthError(AuthErrorTypes.EmptyPassword);\n        }\n        var user = this.createCognitoUser(username);\n        return new Promise(function (resolve, reject) {\n            user.confirmPassword(code, password, {\n                onSuccess: function () {\n                    dispatchAuthEvent('forgotPasswordSubmit', user, username + \" forgotPasswordSubmit successful\");\n                    resolve();\n                    return;\n                },\n                onFailure: function (err) {\n                    dispatchAuthEvent('forgotPasswordSubmit_failure', err, username + \" forgotPasswordSubmit failed\");\n                    reject(err);\n                    return;\n                },\n            }, clientMetadata);\n        });\n    };\n    /**\n     * Get user information\n     * @async\n     * @return {Object }- current User's information\n     */\n    AuthClass.prototype.currentUserInfo = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var source, user, attributes, userAttrs, credentials, e_10, info, err_1, user;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        source = Credentials.getCredSource();\n                        if (!(!source || source === 'aws' || source === 'userPool')) return [3 /*break*/, 9];\n                        return [4 /*yield*/, this.currentUserPoolUser().catch(function (err) {\n                                return logger.debug(err);\n                            })];\n                    case 1:\n                        user = _a.sent();\n                        if (!user) {\n                            return [2 /*return*/, null];\n                        }\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 8, , 9]);\n                        return [4 /*yield*/, this.userAttributes(user)];\n                    case 3:\n                        attributes = _a.sent();\n                        userAttrs = this.attributesToObject(attributes);\n                        credentials = null;\n                        _a.label = 4;\n                    case 4:\n                        _a.trys.push([4, 6, , 7]);\n                        return [4 /*yield*/, this.currentCredentials()];\n                    case 5:\n                        credentials = _a.sent();\n                        return [3 /*break*/, 7];\n                    case 6:\n                        e_10 = _a.sent();\n                        logger.debug('Failed to retrieve credentials while getting current user info', e_10);\n                        return [3 /*break*/, 7];\n                    case 7:\n                        info = {\n                            id: credentials ? credentials.identityId : undefined,\n                            username: user.getUsername(),\n                            attributes: userAttrs,\n                        };\n                        return [2 /*return*/, info];\n                    case 8:\n                        err_1 = _a.sent();\n                        logger.debug('currentUserInfo error', err_1);\n                        return [2 /*return*/, {}];\n                    case 9:\n                        if (source === 'federated') {\n                            user = this.user;\n                            return [2 /*return*/, user ? user : {}];\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AuthClass.prototype.federatedSignIn = function (providerOrOptions, response, user) {\n        return __awaiter(this, void 0, void 0, function () {\n            var options, provider, customState, client_id, redirect_uri, provider, loggedInUser, token, identity_id, expires_at, credentials, currentUser;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this._config.identityPoolId && !this._config.userPoolId) {\n                            throw new Error(\"Federation requires either a User Pool or Identity Pool in config\");\n                        }\n                        // Ensure backwards compatability\n                        if (typeof providerOrOptions === 'undefined') {\n                            if (this._config.identityPoolId && !this._config.userPoolId) {\n                                throw new Error(\"Federation with Identity Pools requires tokens passed as arguments\");\n                            }\n                        }\n                        if (!(isFederatedSignInOptions(providerOrOptions) ||\n                            isFederatedSignInOptionsCustom(providerOrOptions) ||\n                            typeof providerOrOptions === 'undefined')) return [3 /*break*/, 1];\n                        options = providerOrOptions || {\n                            provider: CognitoHostedUIIdentityProvider.Cognito,\n                        };\n                        provider = isFederatedSignInOptions(options)\n                            ? options.provider\n                            : options.customProvider;\n                        customState = isFederatedSignInOptions(options)\n                            ? options.customState\n                            : options.customState;\n                        if (this._config.userPoolId) {\n                            client_id = isCognitoHostedOpts(this._config.oauth)\n                                ? this._config.userPoolWebClientId\n                                : this._config.oauth.clientID;\n                            redirect_uri = isCognitoHostedOpts(this._config.oauth)\n                                ? this._config.oauth.redirectSignIn\n                                : this._config.oauth.redirectUri;\n                            this._oAuthHandler.oauthSignIn(this._config.oauth.responseType, this._config.oauth.domain, redirect_uri, client_id, provider, customState);\n                        }\n                        return [3 /*break*/, 4];\n                    case 1:\n                        provider = providerOrOptions;\n                        // To check if the user is already logged in\n                        try {\n                            loggedInUser = JSON.stringify(JSON.parse(this._storage.getItem('aws-amplify-federatedInfo')).user);\n                            if (loggedInUser) {\n                                logger.warn(\"There is already a signed in user: \" + loggedInUser + \" in your app.\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.\");\n                            }\n                        }\n                        catch (e) { }\n                        token = response.token, identity_id = response.identity_id, expires_at = response.expires_at;\n                        return [4 /*yield*/, Credentials.set({ provider: provider, token: token, identity_id: identity_id, user: user, expires_at: expires_at }, 'federation')];\n                    case 2:\n                        credentials = _a.sent();\n                        return [4 /*yield*/, this.currentAuthenticatedUser()];\n                    case 3:\n                        currentUser = _a.sent();\n                        dispatchAuthEvent('signIn', currentUser, \"A user \" + currentUser.username + \" has been signed in\");\n                        logger.debug('federated sign in credentials', credentials);\n                        return [2 /*return*/, credentials];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Used to complete the OAuth flow with or without the Cognito Hosted UI\n     * @param {String} URL - optional parameter for customers to pass in the response URL\n     */\n    AuthClass.prototype._handleAuthResponse = function (URL) {\n        return __awaiter(this, void 0, void 0, function () {\n            var currentUrl, hasCodeOrError, hasTokenOrError, _a, accessToken, idToken, refreshToken, state, session, credentials, isCustomStateIncluded, currentUser, customState, err_2;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!this._config.userPoolId) {\n                            throw new Error(\"OAuth responses require a User Pool defined in config\");\n                        }\n                        dispatchAuthEvent('parsingCallbackUrl', { url: URL }, \"The callback url is being parsed\");\n                        currentUrl = URL || (JS.browserOrNode().isBrowser ? window.location.href : '');\n                        hasCodeOrError = !!(parse(currentUrl).query || '')\n                            .split('&')\n                            .map(function (entry) { return entry.split('='); })\n                            .find(function (_a) {\n                            var k = _a[0];\n                            return k === 'code' || k === 'error';\n                        });\n                        hasTokenOrError = !!(parse(currentUrl).hash || '#')\n                            .substr(1)\n                            .split('&')\n                            .map(function (entry) { return entry.split('='); })\n                            .find(function (_a) {\n                            var k = _a[0];\n                            return k === 'access_token' || k === 'error';\n                        });\n                        if (!(hasCodeOrError || hasTokenOrError)) return [3 /*break*/, 6];\n                        this._storage.setItem('amplify-redirected-from-hosted-ui', 'true');\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 5, , 6]);\n                        return [4 /*yield*/, this._oAuthHandler.handleAuthResponse(currentUrl)];\n                    case 2:\n                        _a = _b.sent(), accessToken = _a.accessToken, idToken = _a.idToken, refreshToken = _a.refreshToken, state = _a.state;\n                        session = new CognitoUserSession({\n                            IdToken: new CognitoIdToken({ IdToken: idToken }),\n                            RefreshToken: new CognitoRefreshToken({ RefreshToken: refreshToken }),\n                            AccessToken: new CognitoAccessToken({ AccessToken: accessToken }),\n                        });\n                        credentials = void 0;\n                        if (!this._config.identityPoolId) return [3 /*break*/, 4];\n                        return [4 /*yield*/, Credentials.set(session, 'session')];\n                    case 3:\n                        credentials = _b.sent();\n                        logger.debug('AWS credentials', credentials);\n                        _b.label = 4;\n                    case 4:\n                        isCustomStateIncluded = /-/.test(state);\n                        currentUser = this.createCognitoUser(session.getIdToken().decodePayload()['cognito:username']);\n                        dispatchAuthEvent('signIn', currentUser, \"A user \" + currentUser.getUsername() + \" has been signed in\");\n                        dispatchAuthEvent('cognitoHostedUI', currentUser, \"A user \" + currentUser.getUsername() + \" has been signed in via Cognito Hosted UI\");\n                        if (isCustomStateIncluded) {\n                            customState = state\n                                .split('-')\n                                .splice(1)\n                                .join('-');\n                            dispatchAuthEvent('customOAuthState', customState, \"State for user \" + currentUser.getUsername());\n                        }\n                        // This calls cacheTokens() in Cognito SDK\n                        currentUser.setSignInUserSession(session);\n                        //#endregion\n                        if (window && typeof window.history !== 'undefined') {\n                            window.history.replaceState({}, null, this._config.oauth.redirectSignIn);\n                        }\n                        return [2 /*return*/, credentials];\n                    case 5:\n                        err_2 = _b.sent();\n                        logger.debug('Error in cognito hosted auth response', err_2);\n                        dispatchAuthEvent('signIn_failure', err_2, \"The OAuth response flow failed\");\n                        dispatchAuthEvent('cognitoHostedUI_failure', err_2, \"A failure occurred when returning to the Cognito Hosted UI\");\n                        dispatchAuthEvent('customState_failure', err_2, \"A failure occurred when returning state\");\n                        return [3 /*break*/, 6];\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Compact version of credentials\n     * @param {Object} credentials\n     * @return {Object} - Credentials\n     */\n    AuthClass.prototype.essentialCredentials = function (credentials) {\n        return {\n            accessKeyId: credentials.accessKeyId,\n            sessionToken: credentials.sessionToken,\n            secretAccessKey: credentials.secretAccessKey,\n            identityId: credentials.identityId,\n            authenticated: credentials.authenticated,\n        };\n    };\n    AuthClass.prototype.attributesToObject = function (attributes) {\n        var obj = {};\n        if (attributes) {\n            attributes.map(function (attribute) {\n                if (attribute.Value === 'true') {\n                    obj[attribute.Name] = true;\n                }\n                else if (attribute.Value === 'false') {\n                    obj[attribute.Name] = false;\n                }\n                else {\n                    obj[attribute.Name] = attribute.Value;\n                }\n            });\n        }\n        return obj;\n    };\n    AuthClass.prototype.createCognitoUser = function (username) {\n        var userData = {\n            Username: username,\n            Pool: this.userPool,\n        };\n        userData.Storage = this._storage;\n        var authenticationFlowType = this._config.authenticationFlowType;\n        var user = new CognitoUser(userData);\n        if (authenticationFlowType) {\n            user.setAuthenticationFlowType(authenticationFlowType);\n        }\n        return user;\n    };\n    AuthClass.prototype._isValidAuthStorage = function (obj) {\n        // We need to check if the obj has the functions of Storage\n        return (!!obj &&\n            typeof obj.getItem === 'function' &&\n            typeof obj.setItem === 'function' &&\n            typeof obj.removeItem === 'function' &&\n            typeof obj.clear === 'function');\n    };\n    AuthClass.prototype.noUserPoolErrorHandler = function (config) {\n        if (config) {\n            if (!config.userPoolId || !config.identityPoolId) {\n                return AuthErrorTypes.MissingAuthConfig;\n            }\n        }\n        return AuthErrorTypes.NoConfig;\n    };\n    AuthClass.prototype.rejectAuthError = function (type) {\n        return Promise.reject(new AuthError(type));\n    };\n    AuthClass.prototype.rejectNoUserPool = function () {\n        var type = this.noUserPoolErrorHandler(this._config);\n        return Promise.reject(new NoUserPoolError(type));\n    };\n    return AuthClass;\n}());\nexport default AuthClass;\n//# sourceMappingURL=Auth.js.map","/*\n * Copyright 2017-2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { JS } from '@aws-amplify/core';\nexport default (function (callback) {\n    if (JS.browserOrNode().isBrowser && window.location) {\n        var url = window.location.href;\n        callback({ url: url });\n    }\n    else if (JS.browserOrNode().isNode) {\n        // continue building on ssr\n        (function () { }); // noop\n    }\n    else {\n        throw new Error('Not supported');\n    }\n});\n//# sourceMappingURL=urlListener.js.map","import zenObservable from 'zen-observable';\n\nvar Observable = zenObservable;\n\nexport default Observable;\nexport { Observable };\n//# sourceMappingURL=bundle.esm.js.map\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nvar logger = new Logger('AbstractPubSubProvider');\nvar AbstractPubSubProvider = /** @class */ (function () {\n    function AbstractPubSubProvider(options) {\n        if (options === void 0) { options = {}; }\n        this._config = options;\n    }\n    AbstractPubSubProvider.prototype.configure = function (config) {\n        if (config === void 0) { config = {}; }\n        this._config = __assign(__assign({}, config), this._config);\n        logger.debug(\"configure \" + this.getProviderName(), this._config);\n        return this.options;\n    };\n    AbstractPubSubProvider.prototype.getCategory = function () {\n        return 'PubSub';\n    };\n    Object.defineProperty(AbstractPubSubProvider.prototype, \"options\", {\n        get: function () {\n            return __assign({}, this._config);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return AbstractPubSubProvider;\n}());\nexport { AbstractPubSubProvider };\n//# sourceMappingURL=PubSubProvider.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\n/*\n * Copyright 2017-2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport * as Paho from 'paho-mqtt';\nimport { v4 as uuid } from 'uuid';\nimport * as Observable from 'zen-observable';\nimport { AbstractPubSubProvider } from './PubSubProvider';\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nvar logger = new Logger('MqttOverWSProvider');\nexport function mqttTopicMatch(filter, topic) {\n    var filterArray = filter.split('/');\n    var length = filterArray.length;\n    var topicArray = topic.split('/');\n    for (var i = 0; i < length; ++i) {\n        var left = filterArray[i];\n        var right = topicArray[i];\n        if (left === '#')\n            return topicArray.length >= length;\n        if (left !== '+' && left !== right)\n            return false;\n    }\n    return length === topicArray.length;\n}\nvar ClientsQueue = /** @class */ (function () {\n    function ClientsQueue() {\n        this.promises = new Map();\n    }\n    ClientsQueue.prototype.get = function (clientId, clientFactory) {\n        return __awaiter(this, void 0, void 0, function () {\n            var promise;\n            return __generator(this, function (_a) {\n                promise = this.promises.get(clientId);\n                if (promise) {\n                    return [2 /*return*/, promise];\n                }\n                promise = clientFactory(clientId);\n                this.promises.set(clientId, promise);\n                return [2 /*return*/, promise];\n            });\n        });\n    };\n    Object.defineProperty(ClientsQueue.prototype, \"allClients\", {\n        get: function () {\n            return Array.from(this.promises.keys());\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ClientsQueue.prototype.remove = function (clientId) {\n        this.promises.delete(clientId);\n    };\n    return ClientsQueue;\n}());\nvar topicSymbol = typeof Symbol !== 'undefined' ? Symbol('topic') : '@@topic';\nvar MqttOverWSProvider = /** @class */ (function (_super) {\n    __extends(MqttOverWSProvider, _super);\n    function MqttOverWSProvider(options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this, __assign(__assign({}, options), { clientId: options.clientId || uuid() })) || this;\n        _this._clientsQueue = new ClientsQueue();\n        _this._topicObservers = new Map();\n        _this._clientIdObservers = new Map();\n        return _this;\n    }\n    Object.defineProperty(MqttOverWSProvider.prototype, \"clientId\", {\n        get: function () {\n            return this.options.clientId;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MqttOverWSProvider.prototype, \"endpoint\", {\n        get: function () {\n            return this.options.aws_pubsub_endpoint;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MqttOverWSProvider.prototype, \"clientsQueue\", {\n        get: function () {\n            return this._clientsQueue;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MqttOverWSProvider.prototype, \"isSSLEnabled\", {\n        get: function () {\n            return !this.options\n                .aws_appsync_dangerously_connect_to_http_endpoint_for_testing;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MqttOverWSProvider.prototype.getTopicForValue = function (value) {\n        return typeof value === 'object' && value[topicSymbol];\n    };\n    MqttOverWSProvider.prototype.getProviderName = function () {\n        return 'MqttOverWSProvider';\n    };\n    MqttOverWSProvider.prototype.onDisconnect = function (_a) {\n        var _this = this;\n        var clientId = _a.clientId, errorCode = _a.errorCode, args = __rest(_a, [\"clientId\", \"errorCode\"]);\n        if (errorCode !== 0) {\n            logger.warn(clientId, JSON.stringify(__assign({ errorCode: errorCode }, args), null, 2));\n            var topicsToDelete_1 = [];\n            var clientIdObservers = this._clientIdObservers.get(clientId);\n            if (!clientIdObservers) {\n                return;\n            }\n            clientIdObservers.forEach(function (observer) {\n                observer.error('Disconnected, error code: ' + errorCode);\n                // removing observers for disconnected clientId\n                _this._topicObservers.forEach(function (observerForTopic, observerTopic) {\n                    observerForTopic.delete(observer);\n                    if (observerForTopic.size === 0) {\n                        topicsToDelete_1.push(observerTopic);\n                    }\n                });\n            });\n            // forgiving any trace of clientId\n            this._clientIdObservers.delete(clientId);\n            // Removing topics that are not listen by an observer\n            topicsToDelete_1.forEach(function (topic) {\n                _this._topicObservers.delete(topic);\n            });\n        }\n    };\n    MqttOverWSProvider.prototype.newClient = function (_a) {\n        var url = _a.url, clientId = _a.clientId;\n        return __awaiter(this, void 0, void 0, function () {\n            var client;\n            var _this = this;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        logger.debug('Creating new MQTT client', clientId);\n                        client = new Paho.Client(url, clientId);\n                        // client.trace = (args) => logger.debug(clientId, JSON.stringify(args, null, 2));\n                        client.onMessageArrived = function (_a) {\n                            var topic = _a.destinationName, msg = _a.payloadString;\n                            _this._onMessage(topic, msg);\n                        };\n                        client.onConnectionLost = function (_a) {\n                            var errorCode = _a.errorCode, args = __rest(_a, [\"errorCode\"]);\n                            _this.onDisconnect(__assign({ clientId: clientId, errorCode: errorCode }, args));\n                        };\n                        return [4 /*yield*/, new Promise(function (resolve, reject) {\n                                client.connect({\n                                    useSSL: _this.isSSLEnabled,\n                                    mqttVersion: 3,\n                                    onSuccess: function () { return resolve(client); },\n                                    onFailure: reject,\n                                });\n                            })];\n                    case 1:\n                        _b.sent();\n                        return [2 /*return*/, client];\n                }\n            });\n        });\n    };\n    MqttOverWSProvider.prototype.connect = function (clientId, options) {\n        if (options === void 0) { options = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.clientsQueue.get(clientId, function (clientId) {\n                            return _this.newClient(__assign(__assign({}, options), { clientId: clientId }));\n                        })];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    MqttOverWSProvider.prototype.disconnect = function (clientId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var client;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.clientsQueue.get(clientId, function () { return null; })];\n                    case 1:\n                        client = _a.sent();\n                        if (client && client.isConnected()) {\n                            client.disconnect();\n                        }\n                        this.clientsQueue.remove(clientId);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    MqttOverWSProvider.prototype.publish = function (topics, msg) {\n        return __awaiter(this, void 0, void 0, function () {\n            var targetTopics, message, url, client;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        targetTopics = [].concat(topics);\n                        message = JSON.stringify(msg);\n                        return [4 /*yield*/, this.endpoint];\n                    case 1:\n                        url = _a.sent();\n                        return [4 /*yield*/, this.connect(this.clientId, { url: url })];\n                    case 2:\n                        client = _a.sent();\n                        logger.debug('Publishing to topic(s)', targetTopics.join(','), message);\n                        targetTopics.forEach(function (topic) { return client.send(topic, message); });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    MqttOverWSProvider.prototype._onMessage = function (topic, msg) {\n        try {\n            var matchedTopicObservers_1 = [];\n            this._topicObservers.forEach(function (observerForTopic, observerTopic) {\n                if (mqttTopicMatch(observerTopic, topic)) {\n                    matchedTopicObservers_1.push(observerForTopic);\n                }\n            });\n            var parsedMessage_1 = JSON.parse(msg);\n            if (typeof parsedMessage_1 === 'object') {\n                parsedMessage_1[topicSymbol] = topic;\n            }\n            matchedTopicObservers_1.forEach(function (observersForTopic) {\n                observersForTopic.forEach(function (observer) { return observer.next(parsedMessage_1); });\n            });\n        }\n        catch (error) {\n            logger.warn('Error handling message', error, msg);\n        }\n    };\n    MqttOverWSProvider.prototype.subscribe = function (topics, options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        var targetTopics = [].concat(topics);\n        logger.debug('Subscribing to topic(s)', targetTopics.join(','));\n        return new Observable(function (observer) {\n            targetTopics.forEach(function (topic) {\n                // this._topicObservers is used to notify the observers according to the topic received on the message\n                var observersForTopic = _this._topicObservers.get(topic);\n                if (!observersForTopic) {\n                    observersForTopic = new Set();\n                    _this._topicObservers.set(topic, observersForTopic);\n                }\n                observersForTopic.add(observer);\n            });\n            // @ts-ignore\n            var client;\n            var _a = options.clientId, clientId = _a === void 0 ? _this.clientId : _a;\n            // this._clientIdObservers is used to close observers when client gets disconnected\n            var observersForClientId = _this._clientIdObservers.get(clientId);\n            if (!observersForClientId) {\n                observersForClientId = new Set();\n            }\n            observersForClientId.add(observer);\n            _this._clientIdObservers.set(clientId, observersForClientId);\n            (function () { return __awaiter(_this, void 0, void 0, function () {\n                var _a, url, _b, e_1;\n                return __generator(this, function (_c) {\n                    switch (_c.label) {\n                        case 0:\n                            _a = options.url;\n                            if (!(_a === void 0)) return [3 /*break*/, 2];\n                            return [4 /*yield*/, this.endpoint];\n                        case 1:\n                            _b = _c.sent();\n                            return [3 /*break*/, 3];\n                        case 2:\n                            _b = _a;\n                            _c.label = 3;\n                        case 3:\n                            url = _b;\n                            _c.label = 4;\n                        case 4:\n                            _c.trys.push([4, 6, , 7]);\n                            return [4 /*yield*/, this.connect(clientId, { url: url })];\n                        case 5:\n                            client = _c.sent();\n                            targetTopics.forEach(function (topic) {\n                                client.subscribe(topic);\n                            });\n                            return [3 /*break*/, 7];\n                        case 6:\n                            e_1 = _c.sent();\n                            observer.error(e_1);\n                            return [3 /*break*/, 7];\n                        case 7: return [2 /*return*/];\n                    }\n                });\n            }); })();\n            return function () {\n                logger.debug('Unsubscribing from topic(s)', targetTopics.join(','));\n                if (client) {\n                    _this._clientIdObservers.get(clientId).delete(observer);\n                    // No more observers per client => client not needed anymore\n                    if (_this._clientIdObservers.get(clientId).size === 0) {\n                        _this.disconnect(clientId);\n                        _this._clientIdObservers.delete(clientId);\n                    }\n                    targetTopics.forEach(function (topic) {\n                        var observersForTopic = _this._topicObservers.get(topic) ||\n                            new Set();\n                        observersForTopic.delete(observer);\n                        // if no observers exists for the topic, topic should be removed\n                        if (observersForTopic.size === 0) {\n                            _this._topicObservers.delete(topic);\n                            if (client.isConnected()) {\n                                client.unsubscribe(topic);\n                            }\n                        }\n                    });\n                }\n                return null;\n            };\n        });\n    };\n    return MqttOverWSProvider;\n}(AbstractPubSubProvider));\nexport { MqttOverWSProvider };\n//# sourceMappingURL=MqttOverWSProvider.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n/*\n * Copyright 2017-2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport * as Observable from 'zen-observable';\nimport { GraphQLError } from 'graphql';\nimport * as url from 'url';\nimport { v4 as uuid } from 'uuid';\nimport { Buffer } from 'buffer';\nimport { Logger, Credentials, Signer, Hub, Constants, USER_AGENT_HEADER, jitteredExponentialRetry, NonRetryableError, } from '@aws-amplify/core';\nimport Cache from '@aws-amplify/cache';\nimport Auth from '@aws-amplify/auth';\nimport { AbstractPubSubProvider } from './PubSubProvider';\nimport { CONTROL_MSG } from '@aws-amplify/pubsub';\nvar logger = new Logger('AWSAppSyncRealTimeProvider');\nvar AMPLIFY_SYMBOL = (typeof Symbol !== 'undefined' &&\n    typeof Symbol.for === 'function'\n    ? Symbol.for('amplify_default')\n    : '@@amplify_default');\nvar dispatchApiEvent = function (event, data, message) {\n    Hub.dispatch('api', { event: event, data: data, message: message }, 'PubSub', AMPLIFY_SYMBOL);\n};\nvar MAX_DELAY_MS = 5000;\nvar NON_RETRYABLE_CODES = [400, 401, 403];\nvar MESSAGE_TYPES;\n(function (MESSAGE_TYPES) {\n    /**\n     * Client -> Server message.\n     * This message type is the first message after handshake and this will initialize AWS AppSync RealTime communication\n     */\n    MESSAGE_TYPES[\"GQL_CONNECTION_INIT\"] = \"connection_init\";\n    /**\n     * Server -> Client message\n     * This message type is in case there is an issue with AWS AppSync RealTime when establishing connection\n     */\n    MESSAGE_TYPES[\"GQL_CONNECTION_ERROR\"] = \"connection_error\";\n    /**\n     * Server -> Client message.\n     * This message type is for the ack response from AWS AppSync RealTime for GQL_CONNECTION_INIT message\n     */\n    MESSAGE_TYPES[\"GQL_CONNECTION_ACK\"] = \"connection_ack\";\n    /**\n     * Client -> Server message.\n     * This message type is for register subscriptions with AWS AppSync RealTime\n     */\n    MESSAGE_TYPES[\"GQL_START\"] = \"start\";\n    /**\n     * Server -> Client message.\n     * This message type is for the ack response from AWS AppSync RealTime for GQL_START message\n     */\n    MESSAGE_TYPES[\"GQL_START_ACK\"] = \"start_ack\";\n    /**\n     * Server -> Client message.\n     * This message type is for subscription message from AWS AppSync RealTime\n     */\n    MESSAGE_TYPES[\"GQL_DATA\"] = \"data\";\n    /**\n     * Server -> Client message.\n     * This message type helps the client to know is still receiving messages from AWS AppSync RealTime\n     */\n    MESSAGE_TYPES[\"GQL_CONNECTION_KEEP_ALIVE\"] = \"ka\";\n    /**\n     * Client -> Server message.\n     * This message type is for unregister subscriptions with AWS AppSync RealTime\n     */\n    MESSAGE_TYPES[\"GQL_STOP\"] = \"stop\";\n    /**\n     * Server -> Client message.\n     * This message type is for the ack response from AWS AppSync RealTime for GQL_STOP message\n     */\n    MESSAGE_TYPES[\"GQL_COMPLETE\"] = \"complete\";\n    /**\n     * Server -> Client message.\n     * This message type is for sending error messages from AWS AppSync RealTime to the client\n     */\n    MESSAGE_TYPES[\"GQL_ERROR\"] = \"error\";\n})(MESSAGE_TYPES || (MESSAGE_TYPES = {}));\nvar SUBSCRIPTION_STATUS;\n(function (SUBSCRIPTION_STATUS) {\n    SUBSCRIPTION_STATUS[SUBSCRIPTION_STATUS[\"PENDING\"] = 0] = \"PENDING\";\n    SUBSCRIPTION_STATUS[SUBSCRIPTION_STATUS[\"CONNECTED\"] = 1] = \"CONNECTED\";\n    SUBSCRIPTION_STATUS[SUBSCRIPTION_STATUS[\"FAILED\"] = 2] = \"FAILED\";\n})(SUBSCRIPTION_STATUS || (SUBSCRIPTION_STATUS = {}));\nvar SOCKET_STATUS;\n(function (SOCKET_STATUS) {\n    SOCKET_STATUS[SOCKET_STATUS[\"CLOSED\"] = 0] = \"CLOSED\";\n    SOCKET_STATUS[SOCKET_STATUS[\"READY\"] = 1] = \"READY\";\n    SOCKET_STATUS[SOCKET_STATUS[\"CONNECTING\"] = 2] = \"CONNECTING\";\n})(SOCKET_STATUS || (SOCKET_STATUS = {}));\nvar AWS_APPSYNC_REALTIME_HEADERS = {\n    accept: 'application/json, text/javascript',\n    'content-encoding': 'amz-1.0',\n    'content-type': 'application/json; charset=UTF-8',\n};\n/**\n * Time in milleseconds to wait for GQL_CONNECTION_INIT message\n */\nvar CONNECTION_INIT_TIMEOUT = 15000;\n/**\n * Time in milleseconds to wait for GQL_START_ACK message\n */\nvar START_ACK_TIMEOUT = 15000;\n/**\n * Default Time in milleseconds to wait for GQL_CONNECTION_KEEP_ALIVE message\n */\nvar DEFAULT_KEEP_ALIVE_TIMEOUT = 5 * 60 * 1000;\nvar AWSAppSyncRealTimeProvider = /** @class */ (function (_super) {\n    __extends(AWSAppSyncRealTimeProvider, _super);\n    function AWSAppSyncRealTimeProvider() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.socketStatus = SOCKET_STATUS.CLOSED;\n        _this.keepAliveTimeout = DEFAULT_KEEP_ALIVE_TIMEOUT;\n        _this.subscriptionObserverMap = new Map();\n        _this.promiseArray = [];\n        return _this;\n    }\n    AWSAppSyncRealTimeProvider.prototype.getProviderName = function () {\n        return 'AWSAppSyncRealTimeProvider';\n    };\n    AWSAppSyncRealTimeProvider.prototype.newClient = function () {\n        throw new Error('Not used here');\n    };\n    AWSAppSyncRealTimeProvider.prototype.publish = function (_topics, _msg, _options) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                throw new Error('Operation not supported');\n            });\n        });\n    };\n    AWSAppSyncRealTimeProvider.prototype.subscribe = function (_topics, options) {\n        var _this = this;\n        var appSyncGraphqlEndpoint = options.appSyncGraphqlEndpoint;\n        return new Observable(function (observer) {\n            if (!appSyncGraphqlEndpoint) {\n                observer.error({\n                    errors: [\n                        __assign({}, new GraphQLError(\"Subscribe only available for AWS AppSync endpoint\")),\n                    ],\n                });\n                observer.complete();\n            }\n            else {\n                var subscriptionId_1 = uuid();\n                _this._startSubscriptionWithAWSAppSyncRealTime({\n                    options: options,\n                    observer: observer,\n                    subscriptionId: subscriptionId_1,\n                });\n                return function () { return __awaiter(_this, void 0, void 0, function () {\n                    var subscriptionState, err_1;\n                    return __generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0:\n                                _a.trys.push([0, 2, 3, 4]);\n                                // Waiting that subscription has been connected before trying to unsubscribe\n                                return [4 /*yield*/, this._waitForSubscriptionToBeConnected(subscriptionId_1)];\n                            case 1:\n                                // Waiting that subscription has been connected before trying to unsubscribe\n                                _a.sent();\n                                subscriptionState = (this.subscriptionObserverMap.get(subscriptionId_1) || {}).subscriptionState;\n                                if (!subscriptionState) {\n                                    // subscription already unsubscribed\n                                    return [2 /*return*/];\n                                }\n                                if (subscriptionState === SUBSCRIPTION_STATUS.CONNECTED) {\n                                    this._sendUnsubscriptionMessage(subscriptionId_1);\n                                }\n                                else {\n                                    throw new Error('Subscription never connected');\n                                }\n                                return [3 /*break*/, 4];\n                            case 2:\n                                err_1 = _a.sent();\n                                logger.debug(\"Error while unsubscribing \" + err_1);\n                                return [3 /*break*/, 4];\n                            case 3:\n                                this._removeSubscriptionObserver(subscriptionId_1);\n                                return [7 /*endfinally*/];\n                            case 4: return [2 /*return*/];\n                        }\n                    });\n                }); };\n            }\n        });\n    };\n    AWSAppSyncRealTimeProvider.prototype._startSubscriptionWithAWSAppSyncRealTime = function (_a) {\n        var options = _a.options, observer = _a.observer, subscriptionId = _a.subscriptionId;\n        return __awaiter(this, void 0, void 0, function () {\n            var appSyncGraphqlEndpoint, authenticationType, query, variables, apiKey, region, _b, graphql_headers, subscriptionState, data, dataString, headerObj, _c, _d, subscriptionMessage, stringToAWSRealTime, err_2, _e, message, subscriptionFailedCallback_1, _f, subscriptionFailedCallback, subscriptionReadyCallback;\n            var _g;\n            var _this = this;\n            return __generator(this, function (_h) {\n                switch (_h.label) {\n                    case 0:\n                        appSyncGraphqlEndpoint = options.appSyncGraphqlEndpoint, authenticationType = options.authenticationType, query = options.query, variables = options.variables, apiKey = options.apiKey, region = options.region, _b = options.graphql_headers, graphql_headers = _b === void 0 ? function () { return ({}); } : _b;\n                        subscriptionState = SUBSCRIPTION_STATUS.PENDING;\n                        data = {\n                            query: query,\n                            variables: variables,\n                        };\n                        // Having a subscription id map will make it simple to forward messages received\n                        this.subscriptionObserverMap.set(subscriptionId, {\n                            observer: observer,\n                            query: query,\n                            variables: variables,\n                            subscriptionState: subscriptionState,\n                            startAckTimeoutId: null,\n                        });\n                        dataString = JSON.stringify(data);\n                        _c = [{}];\n                        return [4 /*yield*/, this._awsRealTimeHeaderBasedAuth({\n                                apiKey: apiKey,\n                                appSyncGraphqlEndpoint: appSyncGraphqlEndpoint,\n                                authenticationType: authenticationType,\n                                payload: dataString,\n                                canonicalUri: '',\n                                region: region,\n                            })];\n                    case 1:\n                        _d = [__assign.apply(void 0, _c.concat([(_h.sent())]))];\n                        return [4 /*yield*/, graphql_headers()];\n                    case 2:\n                        headerObj = __assign.apply(void 0, [__assign.apply(void 0, _d.concat([(_h.sent())])), (_g = {}, _g[USER_AGENT_HEADER] = Constants.userAgent, _g)]);\n                        subscriptionMessage = {\n                            id: subscriptionId,\n                            payload: {\n                                data: dataString,\n                                extensions: {\n                                    authorization: __assign({}, headerObj),\n                                },\n                            },\n                            type: MESSAGE_TYPES.GQL_START,\n                        };\n                        stringToAWSRealTime = JSON.stringify(subscriptionMessage);\n                        _h.label = 3;\n                    case 3:\n                        _h.trys.push([3, 5, , 6]);\n                        return [4 /*yield*/, this._initializeWebSocketConnection({\n                                apiKey: apiKey,\n                                appSyncGraphqlEndpoint: appSyncGraphqlEndpoint,\n                                authenticationType: authenticationType,\n                                region: region,\n                            })];\n                    case 4:\n                        _h.sent();\n                        return [3 /*break*/, 6];\n                    case 5:\n                        err_2 = _h.sent();\n                        logger.debug({ err: err_2 });\n                        _e = err_2.message, message = _e === void 0 ? '' : _e;\n                        observer.error({\n                            errors: [\n                                __assign({}, new GraphQLError(\"Connection failed: \" + message)),\n                            ],\n                        });\n                        observer.complete();\n                        subscriptionFailedCallback_1 = (this.subscriptionObserverMap.get(subscriptionId) || {}).subscriptionFailedCallback;\n                        // Notify concurrent unsubscription\n                        if (typeof subscriptionFailedCallback_1 === 'function') {\n                            subscriptionFailedCallback_1();\n                        }\n                        return [2 /*return*/];\n                    case 6:\n                        _f = this.subscriptionObserverMap.get(subscriptionId), subscriptionFailedCallback = _f.subscriptionFailedCallback, subscriptionReadyCallback = _f.subscriptionReadyCallback;\n                        // This must be done before sending the message in order to be listening immediately\n                        this.subscriptionObserverMap.set(subscriptionId, {\n                            observer: observer,\n                            subscriptionState: subscriptionState,\n                            variables: variables,\n                            query: query,\n                            subscriptionReadyCallback: subscriptionReadyCallback,\n                            subscriptionFailedCallback: subscriptionFailedCallback,\n                            startAckTimeoutId: setTimeout(function () {\n                                _this._timeoutStartSubscriptionAck.call(_this, subscriptionId);\n                            }, START_ACK_TIMEOUT),\n                        });\n                        this.awsRealTimeSocket.send(stringToAWSRealTime);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    // Waiting that subscription has been connected before trying to unsubscribe\n    AWSAppSyncRealTimeProvider.prototype._waitForSubscriptionToBeConnected = function (subscriptionId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var subscriptionState;\n            var _this = this;\n            return __generator(this, function (_a) {\n                subscriptionState = this.subscriptionObserverMap.get(subscriptionId).subscriptionState;\n                // This in case unsubscribe is invoked before sending start subscription message\n                if (subscriptionState === SUBSCRIPTION_STATUS.PENDING) {\n                    return [2 /*return*/, new Promise(function (res, rej) {\n                            var _a = _this.subscriptionObserverMap.get(subscriptionId), observer = _a.observer, subscriptionState = _a.subscriptionState, variables = _a.variables, query = _a.query;\n                            _this.subscriptionObserverMap.set(subscriptionId, {\n                                observer: observer,\n                                subscriptionState: subscriptionState,\n                                variables: variables,\n                                query: query,\n                                subscriptionReadyCallback: res,\n                                subscriptionFailedCallback: rej,\n                            });\n                        })];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    AWSAppSyncRealTimeProvider.prototype._sendUnsubscriptionMessage = function (subscriptionId) {\n        try {\n            if (this.awsRealTimeSocket &&\n                this.awsRealTimeSocket.readyState === WebSocket.OPEN &&\n                this.socketStatus === SOCKET_STATUS.READY) {\n                // Preparing unsubscribe message to stop receiving messages for that subscription\n                var unsubscribeMessage = {\n                    id: subscriptionId,\n                    type: MESSAGE_TYPES.GQL_STOP,\n                };\n                var stringToAWSRealTime = JSON.stringify(unsubscribeMessage);\n                this.awsRealTimeSocket.send(stringToAWSRealTime);\n            }\n        }\n        catch (err) {\n            // If GQL_STOP is not sent because of disconnection issue, then there is nothing the client can do\n            logger.debug({ err: err });\n        }\n    };\n    AWSAppSyncRealTimeProvider.prototype._removeSubscriptionObserver = function (subscriptionId) {\n        this.subscriptionObserverMap.delete(subscriptionId);\n        // Verifying 1000ms after removing subscription in case there are new subscription unmount/mount\n        setTimeout(this._closeSocketIfRequired.bind(this), 1000);\n    };\n    AWSAppSyncRealTimeProvider.prototype._closeSocketIfRequired = function () {\n        if (this.subscriptionObserverMap.size > 0) {\n            // Active subscriptions on the WebSocket\n            return;\n        }\n        if (!this.awsRealTimeSocket) {\n            this.socketStatus = SOCKET_STATUS.CLOSED;\n            return;\n        }\n        if (this.awsRealTimeSocket.bufferedAmount > 0) {\n            // Still data on the WebSocket\n            setTimeout(this._closeSocketIfRequired.bind(this), 1000);\n        }\n        else {\n            logger.debug('closing WebSocket...');\n            clearTimeout(this.keepAliveTimeoutId);\n            var tempSocket = this.awsRealTimeSocket;\n            // Cleaning callbacks to avoid race condition, socket still exists\n            tempSocket.onclose = undefined;\n            tempSocket.onerror = undefined;\n            tempSocket.close(1000);\n            this.awsRealTimeSocket = null;\n            this.socketStatus = SOCKET_STATUS.CLOSED;\n        }\n    };\n    AWSAppSyncRealTimeProvider.prototype._handleIncomingSubscriptionMessage = function (message) {\n        logger.debug(\"subscription message from AWS AppSync RealTime: \" + message.data);\n        var _a = JSON.parse(message.data), _b = _a.id, id = _b === void 0 ? '' : _b, payload = _a.payload, type = _a.type;\n        var _c = this.subscriptionObserverMap.get(id) || {}, _d = _c.observer, observer = _d === void 0 ? null : _d, _e = _c.query, query = _e === void 0 ? '' : _e, _f = _c.variables, variables = _f === void 0 ? {} : _f, startAckTimeoutId = _c.startAckTimeoutId, subscriptionReadyCallback = _c.subscriptionReadyCallback, subscriptionFailedCallback = _c.subscriptionFailedCallback;\n        logger.debug({ id: id, observer: observer, query: query, variables: variables });\n        if (type === MESSAGE_TYPES.GQL_DATA && payload && payload.data) {\n            if (observer) {\n                observer.next(payload);\n            }\n            else {\n                logger.debug(\"observer not found for id: \" + id);\n            }\n            return;\n        }\n        if (type === MESSAGE_TYPES.GQL_START_ACK) {\n            logger.debug(\"subscription ready for \" + JSON.stringify({ query: query, variables: variables }));\n            if (typeof subscriptionReadyCallback === 'function') {\n                subscriptionReadyCallback();\n            }\n            clearTimeout(startAckTimeoutId);\n            dispatchApiEvent('connected', { query: query, variables: variables }, 'Connection established for subscription');\n            var subscriptionState = SUBSCRIPTION_STATUS.CONNECTED;\n            this.subscriptionObserverMap.set(id, {\n                observer: observer,\n                query: query,\n                variables: variables,\n                startAckTimeoutId: null,\n                subscriptionState: subscriptionState,\n                subscriptionReadyCallback: subscriptionReadyCallback,\n                subscriptionFailedCallback: subscriptionFailedCallback,\n            });\n            // TODO: emit event on hub but it requires to store the id first\n            return;\n        }\n        if (type === MESSAGE_TYPES.GQL_CONNECTION_KEEP_ALIVE) {\n            clearTimeout(this.keepAliveTimeoutId);\n            this.keepAliveTimeoutId = setTimeout(this._errorDisconnect.bind(this, CONTROL_MSG.TIMEOUT_DISCONNECT), this.keepAliveTimeout);\n            return;\n        }\n        if (type === MESSAGE_TYPES.GQL_ERROR) {\n            var subscriptionState = SUBSCRIPTION_STATUS.FAILED;\n            this.subscriptionObserverMap.set(id, {\n                observer: observer,\n                query: query,\n                variables: variables,\n                startAckTimeoutId: startAckTimeoutId,\n                subscriptionReadyCallback: subscriptionReadyCallback,\n                subscriptionFailedCallback: subscriptionFailedCallback,\n                subscriptionState: subscriptionState,\n            });\n            observer.error({\n                errors: [\n                    __assign({}, new GraphQLError(\"Connection failed: \" + JSON.stringify(payload))),\n                ],\n            });\n            clearTimeout(startAckTimeoutId);\n            observer.complete();\n            if (typeof subscriptionFailedCallback === 'function') {\n                subscriptionFailedCallback();\n            }\n        }\n    };\n    AWSAppSyncRealTimeProvider.prototype._errorDisconnect = function (msg) {\n        logger.debug(\"Disconnect error: \" + msg);\n        this.subscriptionObserverMap.forEach(function (_a) {\n            var observer = _a.observer;\n            if (!observer.closed) {\n                observer.error({\n                    errors: [__assign({}, new GraphQLError(msg))],\n                });\n            }\n        });\n        this.subscriptionObserverMap.clear();\n        if (this.awsRealTimeSocket) {\n            this.awsRealTimeSocket.close();\n        }\n        this.socketStatus = SOCKET_STATUS.CLOSED;\n    };\n    AWSAppSyncRealTimeProvider.prototype._timeoutStartSubscriptionAck = function (subscriptionId) {\n        var _a = this.subscriptionObserverMap.get(subscriptionId) || {}, observer = _a.observer, query = _a.query, variables = _a.variables;\n        if (!observer) {\n            return;\n        }\n        this.subscriptionObserverMap.set(subscriptionId, {\n            observer: observer,\n            query: query,\n            variables: variables,\n            subscriptionState: SUBSCRIPTION_STATUS.FAILED,\n        });\n        if (observer && !observer.closed) {\n            observer.error({\n                errors: [\n                    __assign({}, new GraphQLError(\"Subscription timeout \" + JSON.stringify({ query: query, variables: variables }))),\n                ],\n            });\n            // Cleanup will be automatically executed\n            observer.complete();\n        }\n        logger.debug('timeoutStartSubscription', JSON.stringify({ query: query, variables: variables }));\n    };\n    AWSAppSyncRealTimeProvider.prototype._initializeWebSocketConnection = function (_a) {\n        var _this = this;\n        var appSyncGraphqlEndpoint = _a.appSyncGraphqlEndpoint, authenticationType = _a.authenticationType, apiKey = _a.apiKey, region = _a.region;\n        if (this.socketStatus === SOCKET_STATUS.READY) {\n            return;\n        }\n        return new Promise(function (res, rej) { return __awaiter(_this, void 0, void 0, function () {\n            var discoverableEndpoint, payloadString, headerString, _a, _b, headerQs, payloadQs, awsRealTimeUrl, err_3;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        this.promiseArray.push({ res: res, rej: rej });\n                        if (!(this.socketStatus === SOCKET_STATUS.CLOSED)) return [3 /*break*/, 5];\n                        _c.label = 1;\n                    case 1:\n                        _c.trys.push([1, 4, , 5]);\n                        this.socketStatus = SOCKET_STATUS.CONNECTING;\n                        discoverableEndpoint = appSyncGraphqlEndpoint\n                            .replace('https://', 'wss://')\n                            .replace('appsync-api', 'appsync-realtime-api')\n                            .replace('gogi-beta', 'grt-beta');\n                        payloadString = '{}';\n                        _b = (_a = JSON).stringify;\n                        return [4 /*yield*/, this._awsRealTimeHeaderBasedAuth({\n                                authenticationType: authenticationType,\n                                payload: payloadString,\n                                canonicalUri: '/connect',\n                                apiKey: apiKey,\n                                appSyncGraphqlEndpoint: appSyncGraphqlEndpoint,\n                                region: region,\n                            })];\n                    case 2:\n                        headerString = _b.apply(_a, [_c.sent()]);\n                        headerQs = Buffer.from(headerString).toString('base64');\n                        payloadQs = Buffer.from(payloadString).toString('base64');\n                        awsRealTimeUrl = discoverableEndpoint + \"?header=\" + headerQs + \"&payload=\" + payloadQs;\n                        return [4 /*yield*/, this._initializeRetryableHandshake({ awsRealTimeUrl: awsRealTimeUrl })];\n                    case 3:\n                        _c.sent();\n                        this.promiseArray.forEach(function (_a) {\n                            var res = _a.res;\n                            logger.debug('Notifying connection successful');\n                            res();\n                        });\n                        this.socketStatus = SOCKET_STATUS.READY;\n                        this.promiseArray = [];\n                        return [3 /*break*/, 5];\n                    case 4:\n                        err_3 = _c.sent();\n                        this.promiseArray.forEach(function (_a) {\n                            var rej = _a.rej;\n                            return rej(err_3);\n                        });\n                        this.promiseArray = [];\n                        if (this.awsRealTimeSocket &&\n                            this.awsRealTimeSocket.readyState === WebSocket.OPEN) {\n                            this.awsRealTimeSocket.close(3001);\n                        }\n                        this.awsRealTimeSocket = null;\n                        this.socketStatus = SOCKET_STATUS.CLOSED;\n                        return [3 /*break*/, 5];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        }); });\n    };\n    AWSAppSyncRealTimeProvider.prototype._initializeRetryableHandshake = function (_a) {\n        var awsRealTimeUrl = _a.awsRealTimeUrl;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        logger.debug(\"Initializaling retryable Handshake\");\n                        return [4 /*yield*/, jitteredExponentialRetry(this._initializeHandshake.bind(this), [{ awsRealTimeUrl: awsRealTimeUrl }], MAX_DELAY_MS)];\n                    case 1:\n                        _b.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AWSAppSyncRealTimeProvider.prototype._initializeHandshake = function (_a) {\n        var awsRealTimeUrl = _a.awsRealTimeUrl;\n        return __awaiter(this, void 0, void 0, function () {\n            var err_4, errorType, errorCode;\n            var _this = this;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        logger.debug(\"Initializing handshake \" + awsRealTimeUrl);\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 4, , 5]);\n                        return [4 /*yield*/, (function () {\n                                return new Promise(function (res, rej) {\n                                    var newSocket = new WebSocket(awsRealTimeUrl, 'graphql-ws');\n                                    newSocket.onerror = function () {\n                                        logger.debug(\"WebSocket connection error\");\n                                    };\n                                    newSocket.onclose = function () {\n                                        rej(new Error('Connection handshake error'));\n                                    };\n                                    newSocket.onopen = function () {\n                                        _this.awsRealTimeSocket = newSocket;\n                                        return res();\n                                    };\n                                });\n                            })()];\n                    case 2:\n                        _b.sent();\n                        // Step 2: wait for ack from AWS AppSyncReaTime after sending init\n                        return [4 /*yield*/, (function () {\n                                return new Promise(function (res, rej) {\n                                    var ackOk = false;\n                                    _this.awsRealTimeSocket.onerror = function (error) {\n                                        logger.debug(\"WebSocket error \" + JSON.stringify(error));\n                                    };\n                                    _this.awsRealTimeSocket.onclose = function (event) {\n                                        logger.debug(\"WebSocket closed \" + event.reason);\n                                        rej(new Error(JSON.stringify(event)));\n                                    };\n                                    _this.awsRealTimeSocket.onmessage = function (message) {\n                                        logger.debug(\"subscription message from AWS AppSyncRealTime: \" + message.data + \" \");\n                                        var data = JSON.parse(message.data);\n                                        var type = data.type, _a = data.payload, _b = (_a === void 0 ? {} : _a).connectionTimeoutMs, connectionTimeoutMs = _b === void 0 ? DEFAULT_KEEP_ALIVE_TIMEOUT : _b;\n                                        if (type === MESSAGE_TYPES.GQL_CONNECTION_ACK) {\n                                            ackOk = true;\n                                            _this.keepAliveTimeout = connectionTimeoutMs;\n                                            _this.awsRealTimeSocket.onmessage = _this._handleIncomingSubscriptionMessage.bind(_this);\n                                            _this.awsRealTimeSocket.onerror = function (err) {\n                                                logger.debug(err);\n                                                _this._errorDisconnect(CONTROL_MSG.CONNECTION_CLOSED);\n                                            };\n                                            res('Cool, connected to AWS AppSyncRealTime');\n                                            return;\n                                        }\n                                        if (type === MESSAGE_TYPES.GQL_CONNECTION_ERROR) {\n                                            var _c = data.payload, _d = (_c === void 0 ? {} : _c).errors, _e = (_d === void 0 ? [] : _d)[0], _f = _e === void 0 ? {} : _e, _g = _f.errorType, errorType = _g === void 0 ? '' : _g, _h = _f.errorCode, errorCode = _h === void 0 ? 0 : _h;\n                                            rej({ errorType: errorType, errorCode: errorCode });\n                                        }\n                                    };\n                                    var gqlInit = {\n                                        type: MESSAGE_TYPES.GQL_CONNECTION_INIT,\n                                    };\n                                    _this.awsRealTimeSocket.send(JSON.stringify(gqlInit));\n                                    function checkAckOk() {\n                                        if (!ackOk) {\n                                            rej(new Error(\"Connection timeout: ack from AWSRealTime was not received on \" + CONNECTION_INIT_TIMEOUT + \" ms\"));\n                                        }\n                                    }\n                                    setTimeout(checkAckOk.bind(_this), CONNECTION_INIT_TIMEOUT);\n                                });\n                            })()];\n                    case 3:\n                        // Step 2: wait for ack from AWS AppSyncReaTime after sending init\n                        _b.sent();\n                        return [3 /*break*/, 5];\n                    case 4:\n                        err_4 = _b.sent();\n                        errorType = err_4.errorType, errorCode = err_4.errorCode;\n                        if (NON_RETRYABLE_CODES.includes(errorCode)) {\n                            throw new NonRetryableError(errorType);\n                        }\n                        else if (errorType) {\n                            throw new Error(errorType);\n                        }\n                        else {\n                            throw err_4;\n                        }\n                        return [3 /*break*/, 5];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AWSAppSyncRealTimeProvider.prototype._awsRealTimeHeaderBasedAuth = function (_a) {\n        var authenticationType = _a.authenticationType, payload = _a.payload, canonicalUri = _a.canonicalUri, appSyncGraphqlEndpoint = _a.appSyncGraphqlEndpoint, apiKey = _a.apiKey, region = _a.region;\n        return __awaiter(this, void 0, void 0, function () {\n            var headerHandler, handler, host, result;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        headerHandler = {\n                            API_KEY: this._awsRealTimeApiKeyHeader.bind(this),\n                            AWS_IAM: this._awsRealTimeIAMHeader.bind(this),\n                            OPENID_CONNECT: this._awsRealTimeOPENIDHeader.bind(this),\n                            AMAZON_COGNITO_USER_POOLS: this._awsRealTimeCUPHeader.bind(this),\n                        };\n                        handler = headerHandler[authenticationType];\n                        if (typeof handler !== 'function') {\n                            logger.debug(\"Authentication type \" + authenticationType + \" not supported\");\n                            return [2 /*return*/, ''];\n                        }\n                        host = url.parse(appSyncGraphqlEndpoint).host;\n                        return [4 /*yield*/, handler({\n                                payload: payload,\n                                canonicalUri: canonicalUri,\n                                appSyncGraphqlEndpoint: appSyncGraphqlEndpoint,\n                                apiKey: apiKey,\n                                region: region,\n                                host: host,\n                            })];\n                    case 1:\n                        result = _b.sent();\n                        return [2 /*return*/, result];\n                }\n            });\n        });\n    };\n    AWSAppSyncRealTimeProvider.prototype._awsRealTimeCUPHeader = function (_a) {\n        var host = _a.host;\n        return __awaiter(this, void 0, void 0, function () {\n            var session;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, Auth.currentSession()];\n                    case 1:\n                        session = _b.sent();\n                        return [2 /*return*/, {\n                                Authorization: session.getAccessToken().getJwtToken(),\n                                host: host,\n                            }];\n                }\n            });\n        });\n    };\n    AWSAppSyncRealTimeProvider.prototype._awsRealTimeOPENIDHeader = function (_a) {\n        var host = _a.host;\n        return __awaiter(this, void 0, void 0, function () {\n            var federatedInfo;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, Cache.getItem('federatedInfo')];\n                    case 1:\n                        federatedInfo = _b.sent();\n                        if (!federatedInfo || !federatedInfo.token) {\n                            throw new Error('No federated jwt');\n                        }\n                        return [2 /*return*/, {\n                                Authorization: federatedInfo.token,\n                                host: host,\n                            }];\n                }\n            });\n        });\n    };\n    AWSAppSyncRealTimeProvider.prototype._awsRealTimeApiKeyHeader = function (_a) {\n        var apiKey = _a.apiKey, host = _a.host;\n        return __awaiter(this, void 0, void 0, function () {\n            var dt, dtStr;\n            return __generator(this, function (_b) {\n                dt = new Date();\n                dtStr = dt.toISOString().replace(/[:\\-]|\\.\\d{3}/g, '');\n                return [2 /*return*/, {\n                        host: host,\n                        'x-amz-date': dtStr,\n                        'x-api-key': apiKey,\n                    }];\n            });\n        });\n    };\n    AWSAppSyncRealTimeProvider.prototype._awsRealTimeIAMHeader = function (_a) {\n        var payload = _a.payload, canonicalUri = _a.canonicalUri, appSyncGraphqlEndpoint = _a.appSyncGraphqlEndpoint, region = _a.region;\n        return __awaiter(this, void 0, void 0, function () {\n            var endpointInfo, credentialsOK, creds, request, signed_params;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        endpointInfo = {\n                            region: region,\n                            service: 'appsync',\n                        };\n                        return [4 /*yield*/, this._ensureCredentials()];\n                    case 1:\n                        credentialsOK = _b.sent();\n                        if (!credentialsOK) {\n                            throw new Error('No credentials');\n                        }\n                        return [4 /*yield*/, Credentials.get().then(function (credentials) { return ({\n                                secret_key: credentials.secretAccessKey,\n                                access_key: credentials.accessKeyId,\n                                session_token: credentials.sessionToken,\n                            }); })];\n                    case 2:\n                        creds = _b.sent();\n                        request = {\n                            url: \"\" + appSyncGraphqlEndpoint + canonicalUri,\n                            data: payload,\n                            method: 'POST',\n                            headers: __assign({}, AWS_APPSYNC_REALTIME_HEADERS),\n                        };\n                        signed_params = Signer.sign(request, creds, endpointInfo);\n                        return [2 /*return*/, signed_params.headers];\n                }\n            });\n        });\n    };\n    /**\n     * @private\n     */\n    AWSAppSyncRealTimeProvider.prototype._ensureCredentials = function () {\n        return Credentials.get()\n            .then(function (credentials) {\n            if (!credentials)\n                return false;\n            var cred = Credentials.shear(credentials);\n            logger.debug('set credentials for AWSAppSyncRealTimeProvider', cred);\n            return true;\n        })\n            .catch(function (err) {\n            logger.warn('ensure credentials error', err);\n            return false;\n        });\n    };\n    return AWSAppSyncRealTimeProvider;\n}(AbstractPubSubProvider));\nexport { AWSAppSyncRealTimeProvider };\n//# sourceMappingURL=AWSAppSyncRealTimeProvider.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport * as Observable from 'zen-observable';\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nimport { MqttOverWSProvider } from './MqttOverWSProvider';\nvar logger = new Logger('AWSAppSyncProvider');\nvar AWSAppSyncProvider = /** @class */ (function (_super) {\n    __extends(AWSAppSyncProvider, _super);\n    function AWSAppSyncProvider() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._topicClient = new Map();\n        _this._topicAlias = new Map();\n        return _this;\n    }\n    Object.defineProperty(AWSAppSyncProvider.prototype, \"endpoint\", {\n        get: function () {\n            throw new Error('Not supported');\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AWSAppSyncProvider.prototype.getProviderName = function () {\n        return 'AWSAppSyncProvider';\n    };\n    AWSAppSyncProvider.prototype.publish = function (topics, msg, options) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                throw new Error('Operation not supported');\n            });\n        });\n    };\n    AWSAppSyncProvider.prototype._cleanUp = function (clientId) {\n        var _this = this;\n        var topicsForClient = Array.from(this._topicClient.entries())\n            .filter(function (_a) {\n            var c = _a[1];\n            return c.clientId === clientId;\n        })\n            .map(function (_a) {\n            var t = _a[0];\n            return t;\n        });\n        topicsForClient.forEach(function (t) { return _this._cleanUpForTopic(t); });\n    };\n    AWSAppSyncProvider.prototype._cleanUpForTopic = function (topic) {\n        this._topicClient.delete(topic);\n        this._topicAlias.delete(topic);\n    };\n    AWSAppSyncProvider.prototype.onDisconnect = function (_a) {\n        var _this = this;\n        var clientId = _a.clientId, errorCode = _a.errorCode, args = __rest(_a, [\"clientId\", \"errorCode\"]);\n        if (errorCode !== 0) {\n            var topicsForClient = Array.from(this._topicClient.entries())\n                .filter(function (_a) {\n                var c = _a[1];\n                return c.clientId === clientId;\n            })\n                .map(function (_a) {\n                var t = _a[0];\n                return t;\n            });\n            topicsForClient.forEach(function (topic) {\n                if (_this._topicObservers.has(topic)) {\n                    _this._topicObservers.get(topic).forEach(function (obs) {\n                        if (!obs.closed) {\n                            obs.error(args);\n                        }\n                    });\n                    _this._topicObservers.delete(topic);\n                }\n            });\n            this._cleanUp(clientId);\n        }\n    };\n    AWSAppSyncProvider.prototype.disconnect = function (clientId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var client;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.clientsQueue.get(clientId, function () { return null; })];\n                    case 1:\n                        client = _a.sent();\n                        return [4 /*yield*/, _super.prototype.disconnect.call(this, clientId)];\n                    case 2:\n                        _a.sent();\n                        this._cleanUp(clientId);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AWSAppSyncProvider.prototype.subscribe = function (topics, options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        var result = new Observable(function (observer) {\n            var targetTopics = [].concat(topics);\n            logger.debug('Subscribing to topic(s)', targetTopics.join(','));\n            (function () { return __awaiter(_this, void 0, void 0, function () {\n                var _a, mqttConnections, newSubscriptions, newAliases, map;\n                var _this = this;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            // Add these topics to map\n                            targetTopics.forEach(function (t) {\n                                if (!_this._topicObservers.has(t)) {\n                                    _this._topicObservers.set(t, new Set());\n                                }\n                                _this._topicObservers.get(t).add(observer);\n                            });\n                            _a = options.mqttConnections, mqttConnections = _a === void 0 ? [] : _a, newSubscriptions = options.newSubscriptions;\n                            newAliases = Object.entries(newSubscriptions).map(function (_a) {\n                                var alias = _a[0], v = _a[1];\n                                return [v.topic, alias];\n                            });\n                            // Merge new aliases with old ones\n                            this._topicAlias = new Map(__spreadArrays(Array.from(this._topicAlias.entries()), newAliases));\n                            map = Object.entries(targetTopics.reduce(function (acc, elem) {\n                                var connectionInfoForTopic = mqttConnections.find(function (c) { return c.topics.indexOf(elem) > -1; });\n                                if (connectionInfoForTopic) {\n                                    var clientId = connectionInfoForTopic.client, url = connectionInfoForTopic.url;\n                                    if (!acc[clientId]) {\n                                        acc[clientId] = {\n                                            url: url,\n                                            topics: new Set(),\n                                        };\n                                    }\n                                    acc[clientId].topics.add(elem);\n                                }\n                                return acc;\n                            }, {}));\n                            // reconnect everything we have in the map\n                            return [4 /*yield*/, Promise.all(map.map(function (_a) {\n                                    var clientId = _a[0], _b = _a[1], url = _b.url, topics = _b.topics;\n                                    return __awaiter(_this, void 0, void 0, function () {\n                                        var client, err_1;\n                                        var _this = this;\n                                        return __generator(this, function (_c) {\n                                            switch (_c.label) {\n                                                case 0:\n                                                    client = null;\n                                                    _c.label = 1;\n                                                case 1:\n                                                    _c.trys.push([1, 3, , 4]);\n                                                    return [4 /*yield*/, this.connect(clientId, {\n                                                            clientId: clientId,\n                                                            url: url,\n                                                        })];\n                                                case 2:\n                                                    client = _c.sent();\n                                                    return [3 /*break*/, 4];\n                                                case 3:\n                                                    err_1 = _c.sent();\n                                                    observer.error({ message: 'Failed to connect', error: err_1 });\n                                                    observer.complete();\n                                                    return [2 /*return*/, undefined];\n                                                case 4:\n                                                    // subscribe to all topics for this client\n                                                    // store topic-client mapping\n                                                    topics.forEach(function (topic) {\n                                                        if (client.isConnected()) {\n                                                            client.subscribe(topic);\n                                                            _this._topicClient.set(topic, client);\n                                                        }\n                                                    });\n                                                    return [2 /*return*/, client];\n                                            }\n                                        });\n                                    });\n                                }))];\n                        case 1:\n                            // reconnect everything we have in the map\n                            _b.sent();\n                            return [2 /*return*/];\n                    }\n                });\n            }); })();\n            return function () {\n                logger.debug('Unsubscribing from topic(s)', targetTopics.join(','));\n                targetTopics.forEach(function (t) {\n                    var client = _this._topicClient.get(t);\n                    if (client && client.isConnected()) {\n                        client.unsubscribe(t);\n                        _this._topicClient.delete(t);\n                        if (!Array.from(_this._topicClient.values()).some(function (c) { return c === client; })) {\n                            _this.disconnect(client.clientId);\n                        }\n                    }\n                    _this._topicObservers.delete(t);\n                });\n            };\n        });\n        return Observable.from(result).map(function (value) {\n            var topic = _this.getTopicForValue(value);\n            var alias = _this._topicAlias.get(topic);\n            value.data = Object.entries(value.data).reduce(function (obj, _a) {\n                var origKey = _a[0], val = _a[1];\n                return ((obj[(alias || origKey)] = val), obj);\n            }, {});\n            return value;\n        });\n    };\n    return AWSAppSyncProvider;\n}(MqttOverWSProvider));\nexport { AWSAppSyncProvider };\n//# sourceMappingURL=AWSAppSyncProvider.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n/*\n * Copyright 2017-2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { MqttOverWSProvider } from './MqttOverWSProvider';\nimport { Signer, Credentials } from '@aws-amplify/core';\nvar SERVICE_NAME = 'iotdevicegateway';\nvar AWSIoTProvider = /** @class */ (function (_super) {\n    __extends(AWSIoTProvider, _super);\n    function AWSIoTProvider() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(AWSIoTProvider.prototype, \"region\", {\n        get: function () {\n            return this.options.aws_pubsub_region;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AWSIoTProvider.prototype.getProviderName = function () {\n        return 'AWSIoTProvider';\n    };\n    Object.defineProperty(AWSIoTProvider.prototype, \"endpoint\", {\n        get: function () {\n            var _this = this;\n            return (function () { return __awaiter(_this, void 0, void 0, function () {\n                var endpoint, serviceInfo, _a, access_key, secret_key, session_token, result;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            endpoint = this.options.aws_pubsub_endpoint;\n                            serviceInfo = {\n                                service: SERVICE_NAME,\n                                region: this.region,\n                            };\n                            return [4 /*yield*/, Credentials.get()];\n                        case 1:\n                            _a = _b.sent(), access_key = _a.accessKeyId, secret_key = _a.secretAccessKey, session_token = _a.sessionToken;\n                            result = Signer.signUrl(endpoint, { access_key: access_key, secret_key: secret_key, session_token: session_token }, serviceInfo);\n                            return [2 /*return*/, result];\n                    }\n                });\n            }); })();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return AWSIoTProvider;\n}(MqttOverWSProvider));\nexport { AWSIoTProvider };\n//# sourceMappingURL=AWSIotProvider.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n/*\n * Copyright 2017-2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n// import '../Common/Polyfills';\nimport * as Observable from 'zen-observable';\nimport { ConsoleLogger as Logger, INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER, INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER, } from '@aws-amplify/core';\nimport { AWSAppSyncProvider, AWSAppSyncRealTimeProvider } from './Providers';\nvar logger = new Logger('PubSub');\nvar PubSub = /** @class */ (function () {\n    /**\n     * Initialize PubSub with AWS configurations\n     *\n     * @param {PubSubOptions} options - Configuration object for PubSub\n     */\n    function PubSub(options) {\n        this._options = options;\n        logger.debug('PubSub Options', this._options);\n        this._pluggables = [];\n        this.subscribe = this.subscribe.bind(this);\n    }\n    Object.defineProperty(PubSub.prototype, \"awsAppSyncProvider\", {\n        /**\n         * Lazy instantiate AWSAppSyncProvider when it is required by the API category\n         */\n        get: function () {\n            if (!this._awsAppSyncProvider) {\n                this._awsAppSyncProvider = new AWSAppSyncProvider(this._options);\n            }\n            return this._awsAppSyncProvider;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PubSub.prototype, \"awsAppSyncRealTimeProvider\", {\n        /**\n         * Lazy instantiate AWSAppSyncRealTimeProvider when it is required by the API category\n         */\n        get: function () {\n            if (!this._awsAppSyncRealTimeProvider) {\n                this._awsAppSyncRealTimeProvider = new AWSAppSyncRealTimeProvider(this._options);\n            }\n            return this._awsAppSyncRealTimeProvider;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PubSub.prototype.getModuleName = function () {\n        return 'PubSub';\n    };\n    /**\n     * Configure PubSub part with configurations\n     *\n     * @param {PubSubOptions} config - Configuration for PubSub\n     * @return {Object} - The current configuration\n     */\n    PubSub.prototype.configure = function (options) {\n        var _this = this;\n        var opt = options ? options.PubSub || options : {};\n        logger.debug('configure PubSub', { opt: opt });\n        this._options = Object.assign({}, this._options, opt);\n        this._pluggables.map(function (pluggable) { return pluggable.configure(_this._options); });\n        return this._options;\n    };\n    /**\n     * add plugin into Analytics category\n     * @param {Object} pluggable - an instance of the plugin\n     */\n    PubSub.prototype.addPluggable = function (pluggable) {\n        return __awaiter(this, void 0, void 0, function () {\n            var config;\n            return __generator(this, function (_a) {\n                if (pluggable && pluggable.getCategory() === 'PubSub') {\n                    this._pluggables.push(pluggable);\n                    config = pluggable.configure(this._options);\n                    return [2 /*return*/, config];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    PubSub.prototype.getProviderByName = function (providerName) {\n        if (providerName === INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER) {\n            return this.awsAppSyncProvider;\n        }\n        if (providerName === INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER) {\n            return this.awsAppSyncRealTimeProvider;\n        }\n        return this._pluggables.find(function (pluggable) { return pluggable.getProviderName() === providerName; });\n    };\n    PubSub.prototype.getProviders = function (options) {\n        if (options === void 0) { options = {}; }\n        var providerName = options.provider;\n        if (!providerName) {\n            return this._pluggables;\n        }\n        var provider = this.getProviderByName(providerName);\n        if (!provider) {\n            throw new Error(\"Could not find provider named \" + providerName);\n        }\n        return [provider];\n    };\n    PubSub.prototype.publish = function (topics, msg, options) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, Promise.all(this.getProviders(options).map(function (provider) {\n                        return provider.publish(topics, msg, options);\n                    }))];\n            });\n        });\n    };\n    PubSub.prototype.subscribe = function (topics, options) {\n        logger.debug('subscribe options', options);\n        var providers = this.getProviders(options);\n        return new Observable(function (observer) {\n            var observables = providers.map(function (provider) { return ({\n                provider: provider,\n                observable: provider.subscribe(topics, options),\n            }); });\n            var subscriptions = observables.map(function (_a) {\n                var provider = _a.provider, observable = _a.observable;\n                return observable.subscribe({\n                    start: console.error,\n                    next: function (value) { return observer.next({ provider: provider, value: value }); },\n                    error: function (error) { return observer.error({ provider: provider, error: error }); },\n                });\n            });\n            return function () {\n                return subscriptions.forEach(function (subscription) { return subscription.unsubscribe(); });\n            };\n        });\n    };\n    return PubSub;\n}());\nexport default PubSub;\n//# sourceMappingURL=PubSub.js.map","import { ConsoleLogger as Logger } from '@aws-amplify/core';\nvar logger = new Logger('Amplify');\nvar AbstractPredictionsProvider = /** @class */ (function () {\n    function AbstractPredictionsProvider() {\n    }\n    AbstractPredictionsProvider.prototype.configure = function (config) {\n        logger.debug('configure AbstractPredictionsProvider', { config: config });\n        this._config = config;\n        return config;\n    };\n    return AbstractPredictionsProvider;\n}());\nexport { AbstractPredictionsProvider };\n//# sourceMappingURL=AbstractPredictionsProvider.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { AbstractPredictionsProvider } from '.';\nimport { isIdentifyLabelsInput, isIdentifyEntitiesInput, isIdentifyTextInput, } from '../Predictions';\nimport { Logger } from '@aws-amplify/core';\nvar logger = new Logger('AbstractIdentifyPredictionsProvider');\nvar AbstractIdentifyPredictionsProvider = /** @class */ (function (_super) {\n    __extends(AbstractIdentifyPredictionsProvider, _super);\n    function AbstractIdentifyPredictionsProvider() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AbstractIdentifyPredictionsProvider.prototype.getCategory = function () {\n        return 'Identify';\n    };\n    AbstractIdentifyPredictionsProvider.prototype.identify = function (input) {\n        if (isIdentifyTextInput(input)) {\n            logger.debug('identifyText');\n            return this.identifyText(input);\n        }\n        else if (isIdentifyLabelsInput(input)) {\n            logger.debug('identifyLabels');\n            return this.identifyLabels(input);\n        }\n        else if (isIdentifyEntitiesInput(input)) {\n            logger.debug('identifyEntities');\n            return this.identifyEntities(input);\n        }\n    };\n    AbstractIdentifyPredictionsProvider.prototype.identifyText = function (input) {\n        throw new Error('identifyText is not implemented by this provider.');\n    };\n    AbstractIdentifyPredictionsProvider.prototype.identifyLabels = function (input) {\n        throw new Error('identifyLabels is not implemented by this provider');\n    };\n    AbstractIdentifyPredictionsProvider.prototype.identifyEntities = function (input) {\n        throw new Error('identifyEntities is not implemented by this provider');\n    };\n    return AbstractIdentifyPredictionsProvider;\n}(AbstractPredictionsProvider));\nexport { AbstractIdentifyPredictionsProvider };\n//# sourceMappingURL=AbstractIdentifyPredictionsProvider.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { AbstractPredictionsProvider } from '.';\nimport { isInterpretTextInput, } from '../Predictions';\nvar AbstractInterpretPredictionsProvider = /** @class */ (function (_super) {\n    __extends(AbstractInterpretPredictionsProvider, _super);\n    function AbstractInterpretPredictionsProvider() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AbstractInterpretPredictionsProvider.prototype.getCategory = function () {\n        return 'Interpret';\n    };\n    AbstractInterpretPredictionsProvider.prototype.interpret = function (input) {\n        if (isInterpretTextInput(input)) {\n            return this.interpretText(input);\n        }\n    };\n    AbstractInterpretPredictionsProvider.prototype.interpretText = function (input) {\n        throw new Error('interpretText is not implement by this provider');\n    };\n    return AbstractInterpretPredictionsProvider;\n}(AbstractPredictionsProvider));\nexport { AbstractInterpretPredictionsProvider };\n//# sourceMappingURL=AbstractInterpretPredictionsProvider.js.map","/*!\n * JavaScript Cookie v2.2.1\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction decode (s) {\n\t\treturn s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api() {}\n\n\t\tfunction set (key, value, attributes) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tattributes = extend({\n\t\t\t\tpath: '/'\n\t\t\t}, api.defaults, attributes);\n\n\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\tattributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);\n\t\t\t}\n\n\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\ttry {\n\t\t\t\tvar result = JSON.stringify(value);\n\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\tvalue = result;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\n\t\t\tvalue = converter.write ?\n\t\t\t\tconverter.write(value, key) :\n\t\t\t\tencodeURIComponent(String(value))\n\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\n\t\t\tkey = encodeURIComponent(String(key))\n\t\t\t\t.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)\n\t\t\t\t.replace(/[\\(\\)]/g, escape);\n\n\t\t\tvar stringifiedAttributes = '';\n\t\t\tfor (var attributeName in attributes) {\n\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Considers RFC 6265 section 5.2:\n\t\t\t\t// ...\n\t\t\t\t// 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n\t\t\t\t//     character:\n\t\t\t\t// Consume the characters of the unparsed-attributes up to,\n\t\t\t\t// not including, the first %x3B (\";\") character.\n\t\t\t\t// ...\n\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n\t\t\t}\n\n\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t}\n\n\t\tfunction get (key, json) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar jar = {};\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all.\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = decode(parts[0]);\n\t\t\t\t\tcookie = (converter.read || converter)(cookie, name) ||\n\t\t\t\t\t\tdecode(cookie);\n\n\t\t\t\t\tif (json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tjar[name] = cookie;\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn key ? jar[key] : jar;\n\t\t}\n\n\t\tapi.set = set;\n\t\tapi.get = function (key) {\n\t\t\treturn get(key, false /* read as raw */);\n\t\t};\n\t\tapi.getJSON = function (key) {\n\t\t\treturn get(key, true /* read as json */);\n\t\t};\n\t\tapi.remove = function (key, attributes) {\n\t\t\tset(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.defaults = {};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['sts'] = {};\nAWS.STS = Service.defineService('sts', ['2011-06-15']);\nrequire('../lib/services/sts');\nObject.defineProperty(apiLoader.services['sts'], '2011-06-15', {\n  get: function get() {\n    var model = require('../apis/sts-2011-06-15.min.json');\n    model.paginators = require('../apis/sts-2011-06-15.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.STS;\n",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./sha256\"), require(\"./hmac\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./sha256\", \"./hmac\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\treturn CryptoJS.HmacSHA256;\n\n}));","var Collection = require('./collection');\n\nvar util = require('../util');\n\nfunction property(obj, name, value) {\n  if (value !== null && value !== undefined) {\n    util.property.apply(this, arguments);\n  }\n}\n\nfunction memoizedProperty(obj, name) {\n  if (!obj.constructor.prototype[name]) {\n    util.memoizedProperty.apply(this, arguments);\n  }\n}\n\nfunction Shape(shape, options, memberName) {\n  options = options || {};\n\n  property(this, 'shape', shape.shape);\n  property(this, 'api', options.api, false);\n  property(this, 'type', shape.type);\n  property(this, 'enum', shape.enum);\n  property(this, 'min', shape.min);\n  property(this, 'max', shape.max);\n  property(this, 'pattern', shape.pattern);\n  property(this, 'location', shape.location || this.location || 'body');\n  property(this, 'name', this.name || shape.xmlName || shape.queryName ||\n    shape.locationName || memberName);\n  property(this, 'isStreaming', shape.streaming || this.isStreaming || false);\n  property(this, 'requiresLength', shape.requiresLength, false);\n  property(this, 'isComposite', shape.isComposite || false);\n  property(this, 'isShape', true, false);\n  property(this, 'isQueryName', Boolean(shape.queryName), false);\n  property(this, 'isLocationName', Boolean(shape.locationName), false);\n  property(this, 'isIdempotent', shape.idempotencyToken === true);\n  property(this, 'isJsonValue', shape.jsonvalue === true);\n  property(this, 'isSensitive', shape.sensitive === true || shape.prototype && shape.prototype.sensitive === true);\n  property(this, 'isEventStream', Boolean(shape.eventstream), false);\n  property(this, 'isEvent', Boolean(shape.event), false);\n  property(this, 'isEventPayload', Boolean(shape.eventpayload), false);\n  property(this, 'isEventHeader', Boolean(shape.eventheader), false);\n  property(this, 'isTimestampFormatSet', Boolean(shape.timestampFormat) || shape.prototype && shape.prototype.isTimestampFormatSet === true, false);\n  property(this, 'endpointDiscoveryId', Boolean(shape.endpointdiscoveryid), false);\n  property(this, 'hostLabel', Boolean(shape.hostLabel), false);\n\n  if (options.documentation) {\n    property(this, 'documentation', shape.documentation);\n    property(this, 'documentationUrl', shape.documentationUrl);\n  }\n\n  if (shape.xmlAttribute) {\n    property(this, 'isXmlAttribute', shape.xmlAttribute || false);\n  }\n\n  // type conversion and parsing\n  property(this, 'defaultValue', null);\n  this.toWireFormat = function(value) {\n    if (value === null || value === undefined) return '';\n    return value;\n  };\n  this.toType = function(value) { return value; };\n}\n\n/**\n * @api private\n */\nShape.normalizedTypes = {\n  character: 'string',\n  double: 'float',\n  long: 'integer',\n  short: 'integer',\n  biginteger: 'integer',\n  bigdecimal: 'float',\n  blob: 'binary'\n};\n\n/**\n * @api private\n */\nShape.types = {\n  'structure': StructureShape,\n  'list': ListShape,\n  'map': MapShape,\n  'boolean': BooleanShape,\n  'timestamp': TimestampShape,\n  'float': FloatShape,\n  'integer': IntegerShape,\n  'string': StringShape,\n  'base64': Base64Shape,\n  'binary': BinaryShape\n};\n\nShape.resolve = function resolve(shape, options) {\n  if (shape.shape) {\n    var refShape = options.api.shapes[shape.shape];\n    if (!refShape) {\n      throw new Error('Cannot find shape reference: ' + shape.shape);\n    }\n\n    return refShape;\n  } else {\n    return null;\n  }\n};\n\nShape.create = function create(shape, options, memberName) {\n  if (shape.isShape) return shape;\n\n  var refShape = Shape.resolve(shape, options);\n  if (refShape) {\n    var filteredKeys = Object.keys(shape);\n    if (!options.documentation) {\n      filteredKeys = filteredKeys.filter(function(name) {\n        return !name.match(/documentation/);\n      });\n    }\n\n    // create an inline shape with extra members\n    var InlineShape = function() {\n      refShape.constructor.call(this, shape, options, memberName);\n    };\n    InlineShape.prototype = refShape;\n    return new InlineShape();\n  } else {\n    // set type if not set\n    if (!shape.type) {\n      if (shape.members) shape.type = 'structure';\n      else if (shape.member) shape.type = 'list';\n      else if (shape.key) shape.type = 'map';\n      else shape.type = 'string';\n    }\n\n    // normalize types\n    var origType = shape.type;\n    if (Shape.normalizedTypes[shape.type]) {\n      shape.type = Shape.normalizedTypes[shape.type];\n    }\n\n    if (Shape.types[shape.type]) {\n      return new Shape.types[shape.type](shape, options, memberName);\n    } else {\n      throw new Error('Unrecognized shape type: ' + origType);\n    }\n  }\n};\n\nfunction CompositeShape(shape) {\n  Shape.apply(this, arguments);\n  property(this, 'isComposite', true);\n\n  if (shape.flattened) {\n    property(this, 'flattened', shape.flattened || false);\n  }\n}\n\nfunction StructureShape(shape, options) {\n  var self = this;\n  var requiredMap = null, firstInit = !this.isShape;\n\n  CompositeShape.apply(this, arguments);\n\n  if (firstInit) {\n    property(this, 'defaultValue', function() { return {}; });\n    property(this, 'members', {});\n    property(this, 'memberNames', []);\n    property(this, 'required', []);\n    property(this, 'isRequired', function() { return false; });\n  }\n\n  if (shape.members) {\n    property(this, 'members', new Collection(shape.members, options, function(name, member) {\n      return Shape.create(member, options, name);\n    }));\n    memoizedProperty(this, 'memberNames', function() {\n      return shape.xmlOrder || Object.keys(shape.members);\n    });\n\n    if (shape.event) {\n      memoizedProperty(this, 'eventPayloadMemberName', function() {\n        var members = self.members;\n        var memberNames = self.memberNames;\n        // iterate over members to find ones that are event payloads\n        for (var i = 0, iLen = memberNames.length; i < iLen; i++) {\n          if (members[memberNames[i]].isEventPayload) {\n            return memberNames[i];\n          }\n        }\n      });\n\n      memoizedProperty(this, 'eventHeaderMemberNames', function() {\n        var members = self.members;\n        var memberNames = self.memberNames;\n        var eventHeaderMemberNames = [];\n        // iterate over members to find ones that are event headers\n        for (var i = 0, iLen = memberNames.length; i < iLen; i++) {\n          if (members[memberNames[i]].isEventHeader) {\n            eventHeaderMemberNames.push(memberNames[i]);\n          }\n        }\n        return eventHeaderMemberNames;\n      });\n    }\n  }\n\n  if (shape.required) {\n    property(this, 'required', shape.required);\n    property(this, 'isRequired', function(name) {\n      if (!requiredMap) {\n        requiredMap = {};\n        for (var i = 0; i < shape.required.length; i++) {\n          requiredMap[shape.required[i]] = true;\n        }\n      }\n\n      return requiredMap[name];\n    }, false, true);\n  }\n\n  property(this, 'resultWrapper', shape.resultWrapper || null);\n\n  if (shape.payload) {\n    property(this, 'payload', shape.payload);\n  }\n\n  if (typeof shape.xmlNamespace === 'string') {\n    property(this, 'xmlNamespaceUri', shape.xmlNamespace);\n  } else if (typeof shape.xmlNamespace === 'object') {\n    property(this, 'xmlNamespacePrefix', shape.xmlNamespace.prefix);\n    property(this, 'xmlNamespaceUri', shape.xmlNamespace.uri);\n  }\n}\n\nfunction ListShape(shape, options) {\n  var self = this, firstInit = !this.isShape;\n  CompositeShape.apply(this, arguments);\n\n  if (firstInit) {\n    property(this, 'defaultValue', function() { return []; });\n  }\n\n  if (shape.member) {\n    memoizedProperty(this, 'member', function() {\n      return Shape.create(shape.member, options);\n    });\n  }\n\n  if (this.flattened) {\n    var oldName = this.name;\n    memoizedProperty(this, 'name', function() {\n      return self.member.name || oldName;\n    });\n  }\n}\n\nfunction MapShape(shape, options) {\n  var firstInit = !this.isShape;\n  CompositeShape.apply(this, arguments);\n\n  if (firstInit) {\n    property(this, 'defaultValue', function() { return {}; });\n    property(this, 'key', Shape.create({type: 'string'}, options));\n    property(this, 'value', Shape.create({type: 'string'}, options));\n  }\n\n  if (shape.key) {\n    memoizedProperty(this, 'key', function() {\n      return Shape.create(shape.key, options);\n    });\n  }\n  if (shape.value) {\n    memoizedProperty(this, 'value', function() {\n      return Shape.create(shape.value, options);\n    });\n  }\n}\n\nfunction TimestampShape(shape) {\n  var self = this;\n  Shape.apply(this, arguments);\n\n  if (shape.timestampFormat) {\n    property(this, 'timestampFormat', shape.timestampFormat);\n  } else if (self.isTimestampFormatSet && this.timestampFormat) {\n    property(this, 'timestampFormat', this.timestampFormat);\n  } else if (this.location === 'header') {\n    property(this, 'timestampFormat', 'rfc822');\n  } else if (this.location === 'querystring') {\n    property(this, 'timestampFormat', 'iso8601');\n  } else if (this.api) {\n    switch (this.api.protocol) {\n      case 'json':\n      case 'rest-json':\n        property(this, 'timestampFormat', 'unixTimestamp');\n        break;\n      case 'rest-xml':\n      case 'query':\n      case 'ec2':\n        property(this, 'timestampFormat', 'iso8601');\n        break;\n    }\n  }\n\n  this.toType = function(value) {\n    if (value === null || value === undefined) return null;\n    if (typeof value.toUTCString === 'function') return value;\n    return typeof value === 'string' || typeof value === 'number' ?\n           util.date.parseTimestamp(value) : null;\n  };\n\n  this.toWireFormat = function(value) {\n    return util.date.format(value, self.timestampFormat);\n  };\n}\n\nfunction StringShape() {\n  Shape.apply(this, arguments);\n\n  var nullLessProtocols = ['rest-xml', 'query', 'ec2'];\n  this.toType = function(value) {\n    value = this.api && nullLessProtocols.indexOf(this.api.protocol) > -1 ?\n      value || '' : value;\n    if (this.isJsonValue) {\n      return JSON.parse(value);\n    }\n\n    return value && typeof value.toString === 'function' ?\n      value.toString() : value;\n  };\n\n  this.toWireFormat = function(value) {\n    return this.isJsonValue ? JSON.stringify(value) : value;\n  };\n}\n\nfunction FloatShape() {\n  Shape.apply(this, arguments);\n\n  this.toType = function(value) {\n    if (value === null || value === undefined) return null;\n    return parseFloat(value);\n  };\n  this.toWireFormat = this.toType;\n}\n\nfunction IntegerShape() {\n  Shape.apply(this, arguments);\n\n  this.toType = function(value) {\n    if (value === null || value === undefined) return null;\n    return parseInt(value, 10);\n  };\n  this.toWireFormat = this.toType;\n}\n\nfunction BinaryShape() {\n  Shape.apply(this, arguments);\n  this.toType = function(value) {\n    var buf = util.base64.decode(value);\n    if (this.isSensitive && util.isNode() && typeof util.Buffer.alloc === 'function') {\n  /* Node.js can create a Buffer that is not isolated.\n   * i.e. buf.byteLength !== buf.buffer.byteLength\n   * This means that the sensitive data is accessible to anyone with access to buf.buffer.\n   * If this is the node shared Buffer, then other code within this process _could_ find this secret.\n   * Copy sensitive data to an isolated Buffer and zero the sensitive data.\n   * While this is safe to do here, copying this code somewhere else may produce unexpected results.\n   */\n      var secureBuf = util.Buffer.alloc(buf.length, buf);\n      buf.fill(0);\n      buf = secureBuf;\n    }\n    return buf;\n  };\n  this.toWireFormat = util.base64.encode;\n}\n\nfunction Base64Shape() {\n  BinaryShape.apply(this, arguments);\n}\n\nfunction BooleanShape() {\n  Shape.apply(this, arguments);\n\n  this.toType = function(value) {\n    if (typeof value === 'boolean') return value;\n    if (value === null || value === undefined) return null;\n    return value === 'true';\n  };\n}\n\n/**\n * @api private\n */\nShape.shapes = {\n  StructureShape: StructureShape,\n  ListShape: ListShape,\n  MapShape: MapShape,\n  StringShape: StringShape,\n  BooleanShape: BooleanShape,\n  Base64Shape: Base64Shape\n};\n\n/**\n * @api private\n */\nmodule.exports = Shape;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['rekognition'] = {};\nAWS.Rekognition = Service.defineService('rekognition', ['2016-06-27']);\nObject.defineProperty(apiLoader.services['rekognition'], '2016-06-27', {\n  get: function get() {\n    var model = require('../apis/rekognition-2016-06-27.min.json');\n    model.paginators = require('../apis/rekognition-2016-06-27.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.Rekognition;\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","var util = require('../util');\nvar populateHostPrefix = require('./helpers').populateHostPrefix;\n\nfunction populateMethod(req) {\n  req.httpRequest.method = req.service.api.operations[req.operation].httpMethod;\n}\n\nfunction generateURI(endpointPath, operationPath, input, params) {\n  var uri = [endpointPath, operationPath].join('/');\n  uri = uri.replace(/\\/+/g, '/');\n\n  var queryString = {}, queryStringSet = false;\n  util.each(input.members, function (name, member) {\n    var paramValue = params[name];\n    if (paramValue === null || paramValue === undefined) return;\n    if (member.location === 'uri') {\n      var regex = new RegExp('\\\\{' + member.name + '(\\\\+)?\\\\}');\n      uri = uri.replace(regex, function(_, plus) {\n        var fn = plus ? util.uriEscapePath : util.uriEscape;\n        return fn(String(paramValue));\n      });\n    } else if (member.location === 'querystring') {\n      queryStringSet = true;\n\n      if (member.type === 'list') {\n        queryString[member.name] = paramValue.map(function(val) {\n          return util.uriEscape(member.member.toWireFormat(val).toString());\n        });\n      } else if (member.type === 'map') {\n        util.each(paramValue, function(key, value) {\n          if (Array.isArray(value)) {\n            queryString[key] = value.map(function(val) {\n              return util.uriEscape(String(val));\n            });\n          } else {\n            queryString[key] = util.uriEscape(String(value));\n          }\n        });\n      } else {\n        queryString[member.name] = util.uriEscape(member.toWireFormat(paramValue).toString());\n      }\n    }\n  });\n\n  if (queryStringSet) {\n    uri += (uri.indexOf('?') >= 0 ? '&' : '?');\n    var parts = [];\n    util.arrayEach(Object.keys(queryString).sort(), function(key) {\n      if (!Array.isArray(queryString[key])) {\n        queryString[key] = [queryString[key]];\n      }\n      for (var i = 0; i < queryString[key].length; i++) {\n        parts.push(util.uriEscape(String(key)) + '=' + queryString[key][i]);\n      }\n    });\n    uri += parts.join('&');\n  }\n\n  return uri;\n}\n\nfunction populateURI(req) {\n  var operation = req.service.api.operations[req.operation];\n  var input = operation.input;\n\n  var uri = generateURI(req.httpRequest.endpoint.path, operation.httpPath, input, req.params);\n  req.httpRequest.path = uri;\n}\n\nfunction populateHeaders(req) {\n  var operation = req.service.api.operations[req.operation];\n  util.each(operation.input.members, function (name, member) {\n    var value = req.params[name];\n    if (value === null || value === undefined) return;\n\n    if (member.location === 'headers' && member.type === 'map') {\n      util.each(value, function(key, memberValue) {\n        req.httpRequest.headers[member.name + key] = memberValue;\n      });\n    } else if (member.location === 'header') {\n      value = member.toWireFormat(value).toString();\n      if (member.isJsonValue) {\n        value = util.base64.encode(value);\n      }\n      req.httpRequest.headers[member.name] = value;\n    }\n  });\n}\n\nfunction buildRequest(req) {\n  populateMethod(req);\n  populateURI(req);\n  populateHeaders(req);\n  populateHostPrefix(req);\n}\n\nfunction extractError() {\n}\n\nfunction extractData(resp) {\n  var req = resp.request;\n  var data = {};\n  var r = resp.httpResponse;\n  var operation = req.service.api.operations[req.operation];\n  var output = operation.output;\n\n  // normalize headers names to lower-cased keys for matching\n  var headers = {};\n  util.each(r.headers, function (k, v) {\n    headers[k.toLowerCase()] = v;\n  });\n\n  util.each(output.members, function(name, member) {\n    var header = (member.name || name).toLowerCase();\n    if (member.location === 'headers' && member.type === 'map') {\n      data[name] = {};\n      var location = member.isLocationName ? member.name : '';\n      var pattern = new RegExp('^' + location + '(.+)', 'i');\n      util.each(r.headers, function (k, v) {\n        var result = k.match(pattern);\n        if (result !== null) {\n          data[name][result[1]] = v;\n        }\n      });\n    } else if (member.location === 'header') {\n      if (headers[header] !== undefined) {\n        var value = member.isJsonValue ?\n          util.base64.decode(headers[header]) :\n          headers[header];\n        data[name] = member.toType(value);\n      }\n    } else if (member.location === 'statusCode') {\n      data[name] = parseInt(r.statusCode, 10);\n    }\n  });\n\n  resp.data = data;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  buildRequest: buildRequest,\n  extractError: extractError,\n  extractData: extractData,\n  generateURI: generateURI\n};\n","var Buffer = require('buffer/').Buffer;\n\n/**\n * This is a polyfill for the static method `isView` of `ArrayBuffer`, which is\n * e.g. missing in IE 10.\n *\n * @api private\n */\nif (\n    typeof ArrayBuffer !== 'undefined' &&\n    typeof ArrayBuffer.isView === 'undefined'\n) {\n    ArrayBuffer.isView = function(arg) {\n        return viewStrings.indexOf(Object.prototype.toString.call(arg)) > -1;\n    };\n}\n\n/**\n * @api private\n */\nvar viewStrings = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]',\n    '[object DataView]',\n];\n\n/**\n * @api private\n */\nfunction isEmptyData(data) {\n    if (typeof data === 'string') {\n        return data.length === 0;\n    }\n    return data.byteLength === 0;\n}\n\n/**\n * @api private\n */\nfunction convertToBuffer(data) {\n    if (typeof data === 'string') {\n        data = new Buffer(data, 'utf8');\n    }\n\n    if (ArrayBuffer.isView(data)) {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength / Uint8Array.BYTES_PER_ELEMENT);\n    }\n\n    return new Uint8Array(data);\n}\n\n/**\n * @api private\n */\nmodule.exports = exports = {\n    isEmptyData: isEmptyData,\n    convertToBuffer: convertToBuffer,\n};\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Initialization and round constants tables\n\t    var H = [];\n\t    var K = [];\n\n\t    // Compute constants\n\t    (function () {\n\t        function isPrime(n) {\n\t            var sqrtN = Math.sqrt(n);\n\t            for (var factor = 2; factor <= sqrtN; factor++) {\n\t                if (!(n % factor)) {\n\t                    return false;\n\t                }\n\t            }\n\n\t            return true;\n\t        }\n\n\t        function getFractionalBits(n) {\n\t            return ((n - (n | 0)) * 0x100000000) | 0;\n\t        }\n\n\t        var n = 2;\n\t        var nPrime = 0;\n\t        while (nPrime < 64) {\n\t            if (isPrime(n)) {\n\t                if (nPrime < 8) {\n\t                    H[nPrime] = getFractionalBits(Math.pow(n, 1 / 2));\n\t                }\n\t                K[nPrime] = getFractionalBits(Math.pow(n, 1 / 3));\n\n\t                nPrime++;\n\t            }\n\n\t            n++;\n\t        }\n\t    }());\n\n\t    // Reusable object\n\t    var W = [];\n\n\t    /**\n\t     * SHA-256 hash algorithm.\n\t     */\n\t    var SHA256 = C_algo.SHA256 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init(H.slice(0));\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcut\n\t            var H = this._hash.words;\n\n\t            // Working variables\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\t            var e = H[4];\n\t            var f = H[5];\n\t            var g = H[6];\n\t            var h = H[7];\n\n\t            // Computation\n\t            for (var i = 0; i < 64; i++) {\n\t                if (i < 16) {\n\t                    W[i] = M[offset + i] | 0;\n\t                } else {\n\t                    var gamma0x = W[i - 15];\n\t                    var gamma0  = ((gamma0x << 25) | (gamma0x >>> 7))  ^\n\t                                  ((gamma0x << 14) | (gamma0x >>> 18)) ^\n\t                                   (gamma0x >>> 3);\n\n\t                    var gamma1x = W[i - 2];\n\t                    var gamma1  = ((gamma1x << 15) | (gamma1x >>> 17)) ^\n\t                                  ((gamma1x << 13) | (gamma1x >>> 19)) ^\n\t                                   (gamma1x >>> 10);\n\n\t                    W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16];\n\t                }\n\n\t                var ch  = (e & f) ^ (~e & g);\n\t                var maj = (a & b) ^ (a & c) ^ (b & c);\n\n\t                var sigma0 = ((a << 30) | (a >>> 2)) ^ ((a << 19) | (a >>> 13)) ^ ((a << 10) | (a >>> 22));\n\t                var sigma1 = ((e << 26) | (e >>> 6)) ^ ((e << 21) | (e >>> 11)) ^ ((e << 7)  | (e >>> 25));\n\n\t                var t1 = h + sigma1 + ch + K[i] + W[i];\n\t                var t2 = sigma0 + maj;\n\n\t                h = g;\n\t                g = f;\n\t                f = e;\n\t                e = (d + t1) | 0;\n\t                d = c;\n\t                c = b;\n\t                b = a;\n\t                a = (t1 + t2) | 0;\n\t            }\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t            H[4] = (H[4] + e) | 0;\n\t            H[5] = (H[5] + f) | 0;\n\t            H[6] = (H[6] + g) | 0;\n\t            H[7] = (H[7] + h) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Return final computed hash\n\t            return this._hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA256('message');\n\t     *     var hash = CryptoJS.SHA256(wordArray);\n\t     */\n\t    C.SHA256 = Hasher._createHelper(SHA256);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA256(message, key);\n\t     */\n\t    C.HmacSHA256 = Hasher._createHmacHelper(SHA256);\n\t}(Math));\n\n\n\treturn CryptoJS.SHA256;\n\n}));","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isTranslateTextInput, isTextToSpeechInput, isSpeechToTextInput, } from '../Predictions';\nimport { AbstractPredictionsProvider } from '.';\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nvar logger = new Logger('AbstractConvertPredictionsProvider');\nvar AbstractConvertPredictionsProvider = /** @class */ (function (_super) {\n    __extends(AbstractConvertPredictionsProvider, _super);\n    function AbstractConvertPredictionsProvider() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AbstractConvertPredictionsProvider.prototype.getCategory = function () {\n        return 'Convert';\n    };\n    AbstractConvertPredictionsProvider.prototype.convert = function (input) {\n        if (isTranslateTextInput(input)) {\n            logger.debug('translateText');\n            return this.translateText(input);\n        }\n        else if (isTextToSpeechInput(input)) {\n            logger.debug('textToSpeech');\n            return this.convertTextToSpeech(input);\n        }\n        else if (isSpeechToTextInput(input)) {\n            logger.debug('textToSpeech');\n            return this.convertSpeechToText(input);\n        }\n    };\n    AbstractConvertPredictionsProvider.prototype.translateText = function (translateTextInput) {\n        throw new Error('convertText is not implemented by this provider');\n    };\n    AbstractConvertPredictionsProvider.prototype.convertTextToSpeech = function (textToSpeechInput) {\n        throw new Error('convertTextToSpeech is not implemented by this provider');\n    };\n    AbstractConvertPredictionsProvider.prototype.convertSpeechToText = function (speechToTextInput) {\n        throw new Error('convertSpeechToText is not implemented by this provider');\n    };\n    return AbstractConvertPredictionsProvider;\n}(AbstractPredictionsProvider));\nexport { AbstractConvertPredictionsProvider };\n//# sourceMappingURL=AbstractConvertPredictionsProvider.js.map",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_enc = C.enc;\n\n\t    /**\n\t     * Base64 encoding strategy.\n\t     */\n\t    var Base64 = C_enc.Base64 = {\n\t        /**\n\t         * Converts a word array to a Base64 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Base64 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var base64String = CryptoJS.enc.Base64.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\t            var map = this._map;\n\n\t            // Clamp excess bits\n\t            wordArray.clamp();\n\n\t            // Convert\n\t            var base64Chars = [];\n\t            for (var i = 0; i < sigBytes; i += 3) {\n\t                var byte1 = (words[i >>> 2]       >>> (24 - (i % 4) * 8))       & 0xff;\n\t                var byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;\n\t                var byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;\n\n\t                var triplet = (byte1 << 16) | (byte2 << 8) | byte3;\n\n\t                for (var j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j++) {\n\t                    base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));\n\t                }\n\t            }\n\n\t            // Add padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                while (base64Chars.length % 4) {\n\t                    base64Chars.push(paddingChar);\n\t                }\n\t            }\n\n\t            return base64Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Base64 string to a word array.\n\t         *\n\t         * @param {string} base64Str The Base64 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Base64.parse(base64String);\n\t         */\n\t        parse: function (base64Str) {\n\t            // Shortcuts\n\t            var base64StrLength = base64Str.length;\n\t            var map = this._map;\n\t            var reverseMap = this._reverseMap;\n\n\t            if (!reverseMap) {\n\t                    reverseMap = this._reverseMap = [];\n\t                    for (var j = 0; j < map.length; j++) {\n\t                        reverseMap[map.charCodeAt(j)] = j;\n\t                    }\n\t            }\n\n\t            // Ignore padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                var paddingIndex = base64Str.indexOf(paddingChar);\n\t                if (paddingIndex !== -1) {\n\t                    base64StrLength = paddingIndex;\n\t                }\n\t            }\n\n\t            // Convert\n\t            return parseLoop(base64Str, base64StrLength, reverseMap);\n\n\t        },\n\n\t        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n\t    };\n\n\t    function parseLoop(base64Str, base64StrLength, reverseMap) {\n\t      var words = [];\n\t      var nBytes = 0;\n\t      for (var i = 0; i < base64StrLength; i++) {\n\t          if (i % 4) {\n\t              var bits1 = reverseMap[base64Str.charCodeAt(i - 1)] << ((i % 4) * 2);\n\t              var bits2 = reverseMap[base64Str.charCodeAt(i)] >>> (6 - (i % 4) * 2);\n\t              words[nBytes >>> 2] |= (bits1 | bits2) << (24 - (nBytes % 4) * 8);\n\t              nBytes++;\n\t          }\n\t      }\n\t      return WordArray.create(words, nBytes);\n\t    }\n\t}());\n\n\n\treturn CryptoJS.enc.Base64;\n\n}));","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['lexruntime'] = {};\nAWS.LexRuntime = Service.defineService('lexruntime', ['2016-11-28']);\nObject.defineProperty(apiLoader.services['lexruntime'], '2016-11-28', {\n  get: function get() {\n    var model = require('../apis/runtime.lex-2016-11-28.min.json');\n    model.paginators = require('../apis/runtime.lex-2016-11-28.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.LexRuntime;\n","var util = require('../util');\nvar JsonBuilder = require('../json/builder');\nvar JsonParser = require('../json/parser');\nvar populateHostPrefix = require('./helpers').populateHostPrefix;\n\nfunction buildRequest(req) {\n  var httpRequest = req.httpRequest;\n  var api = req.service.api;\n  var target = api.targetPrefix + '.' + api.operations[req.operation].name;\n  var version = api.jsonVersion || '1.0';\n  var input = api.operations[req.operation].input;\n  var builder = new JsonBuilder();\n\n  if (version === 1) version = '1.0';\n  httpRequest.body = builder.build(req.params || {}, input);\n  httpRequest.headers['Content-Type'] = 'application/x-amz-json-' + version;\n  httpRequest.headers['X-Amz-Target'] = target;\n\n  populateHostPrefix(req);\n}\n\nfunction extractError(resp) {\n  var error = {};\n  var httpResponse = resp.httpResponse;\n\n  error.code = httpResponse.headers['x-amzn-errortype'] || 'UnknownError';\n  if (typeof error.code === 'string') {\n    error.code = error.code.split(':')[0];\n  }\n\n  if (httpResponse.body.length > 0) {\n    try {\n      var e = JSON.parse(httpResponse.body.toString());\n      if (e.__type || e.code) {\n        error.code = (e.__type || e.code).split('#').pop();\n      }\n      if (error.code === 'RequestEntityTooLarge') {\n        error.message = 'Request body must be less than 1 MB';\n      } else {\n        error.message = (e.message || e.Message || null);\n      }\n    } catch (e) {\n      error.statusCode = httpResponse.statusCode;\n      error.message = httpResponse.statusMessage;\n    }\n  } else {\n    error.statusCode = httpResponse.statusCode;\n    error.message = httpResponse.statusCode.toString();\n  }\n\n  resp.error = util.error(new Error(), error);\n}\n\nfunction extractData(resp) {\n  var body = resp.httpResponse.body.toString() || '{}';\n  if (resp.request.service.config.convertResponseTypes === false) {\n    resp.data = JSON.parse(body);\n  } else {\n    var operation = resp.request.service.api.operations[resp.request.operation];\n    var shape = operation.output || {};\n    var parser = new JsonParser();\n    resp.data = parser.parse(body, shape);\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  buildRequest: buildRequest,\n  extractError: extractError,\n  extractData: extractData\n};\n","var util = require('../util');\n\nfunction JsonBuilder() { }\n\nJsonBuilder.prototype.build = function(value, shape) {\n  return JSON.stringify(translate(value, shape));\n};\n\nfunction translate(value, shape) {\n  if (!shape || value === undefined || value === null) return undefined;\n\n  switch (shape.type) {\n    case 'structure': return translateStructure(value, shape);\n    case 'map': return translateMap(value, shape);\n    case 'list': return translateList(value, shape);\n    default: return translateScalar(value, shape);\n  }\n}\n\nfunction translateStructure(structure, shape) {\n  var struct = {};\n  util.each(structure, function(name, value) {\n    var memberShape = shape.members[name];\n    if (memberShape) {\n      if (memberShape.location !== 'body') return;\n      var locationName = memberShape.isLocationName ? memberShape.name : name;\n      var result = translate(value, memberShape);\n      if (result !== undefined) struct[locationName] = result;\n    }\n  });\n  return struct;\n}\n\nfunction translateList(list, shape) {\n  var out = [];\n  util.arrayEach(list, function(value) {\n    var result = translate(value, shape.member);\n    if (result !== undefined) out.push(result);\n  });\n  return out;\n}\n\nfunction translateMap(map, shape) {\n  var out = {};\n  util.each(map, function(key, value) {\n    var result = translate(value, shape.value);\n    if (result !== undefined) out[key] = result;\n  });\n  return out;\n}\n\nfunction translateScalar(value, shape) {\n  return shape.toWireFormat(value);\n}\n\n/**\n * @api private\n */\nmodule.exports = JsonBuilder;\n","var util = require('../util');\n\nfunction JsonParser() { }\n\nJsonParser.prototype.parse = function(value, shape) {\n  return translate(JSON.parse(value), shape);\n};\n\nfunction translate(value, shape) {\n  if (!shape || value === undefined) return undefined;\n\n  switch (shape.type) {\n    case 'structure': return translateStructure(value, shape);\n    case 'map': return translateMap(value, shape);\n    case 'list': return translateList(value, shape);\n    default: return translateScalar(value, shape);\n  }\n}\n\nfunction translateStructure(structure, shape) {\n  if (structure == null) return undefined;\n\n  var struct = {};\n  var shapeMembers = shape.members;\n  util.each(shapeMembers, function(name, memberShape) {\n    var locationName = memberShape.isLocationName ? memberShape.name : name;\n    if (Object.prototype.hasOwnProperty.call(structure, locationName)) {\n      var value = structure[locationName];\n      var result = translate(value, memberShape);\n      if (result !== undefined) struct[name] = result;\n    }\n  });\n  return struct;\n}\n\nfunction translateList(list, shape) {\n  if (list == null) return undefined;\n\n  var out = [];\n  util.arrayEach(list, function(value) {\n    var result = translate(value, shape.member);\n    if (result === undefined) out.push(null);\n    else out.push(result);\n  });\n  return out;\n}\n\nfunction translateMap(map, shape) {\n  if (map == null) return undefined;\n\n  var out = {};\n  util.each(map, function(key, value) {\n    var result = translate(value, shape.value);\n    if (result === undefined) out[key] = null;\n    else out[key] = result;\n  });\n  return out;\n}\n\nfunction translateScalar(value, shape) {\n  return shape.toType(value);\n}\n\n/**\n * @api private\n */\nmodule.exports = JsonParser;\n","var util =  require('../util');\nvar AWS = require('../core');\n\n/**\n * Prepend prefix defined by API model to endpoint that's already\n * constructed. This feature does not apply to operations using\n * endpoint discovery and can be disabled.\n * @api private\n */\nfunction populateHostPrefix(request)  {\n  var enabled = request.service.config.hostPrefixEnabled;\n  if (!enabled) return request;\n  var operationModel = request.service.api.operations[request.operation];\n  //don't marshal host prefix when operation has endpoint discovery traits\n  if (hasEndpointDiscover(request)) return request;\n  if (operationModel.endpoint && operationModel.endpoint.hostPrefix) {\n    var hostPrefixNotation = operationModel.endpoint.hostPrefix;\n    var hostPrefix = expandHostPrefix(hostPrefixNotation, request.params, operationModel.input);\n    prependEndpointPrefix(request.httpRequest.endpoint, hostPrefix);\n    validateHostname(request.httpRequest.endpoint.hostname);\n  }\n  return request;\n}\n\n/**\n * @api private\n */\nfunction hasEndpointDiscover(request) {\n  var api = request.service.api;\n  var operationModel = api.operations[request.operation];\n  var isEndpointOperation = api.endpointOperation && (api.endpointOperation === util.string.lowerFirst(operationModel.name));\n  return (operationModel.endpointDiscoveryRequired !== 'NULL' || isEndpointOperation === true);\n}\n\n/**\n * @api private\n */\nfunction expandHostPrefix(hostPrefixNotation, params, shape) {\n  util.each(shape.members, function(name, member) {\n    if (member.hostLabel === true) {\n      if (typeof params[name] !== 'string' || params[name] === '') {\n        throw util.error(new Error(), {\n          message: 'Parameter ' + name + ' should be a non-empty string.',\n          code: 'InvalidParameter'\n        });\n      }\n      var regex = new RegExp('\\\\{' + name + '\\\\}', 'g');\n      hostPrefixNotation = hostPrefixNotation.replace(regex, params[name]);\n    }\n  });\n  return hostPrefixNotation;\n}\n\n/**\n * @api private\n */\nfunction prependEndpointPrefix(endpoint, prefix) {\n  if (endpoint.host) {\n    endpoint.host = prefix + endpoint.host;\n  }\n  if (endpoint.hostname) {\n    endpoint.hostname = prefix + endpoint.hostname;\n  }\n}\n\n/**\n * @api private\n */\nfunction validateHostname(hostname) {\n  var labels = hostname.split('.');\n  //Reference: https://tools.ietf.org/html/rfc1123#section-2\n  var hostPattern = /^[a-zA-Z0-9]{1}$|^[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9]$/;\n  util.arrayEach(labels, function(label) {\n    if (!label.length || label.length < 1 || label.length > 63) {\n      throw util.error(new Error(), {\n        code: 'ValidationError',\n        message: 'Hostname label length should be between 1 to 63 characters, inclusive.'\n      });\n    }\n    if (!hostPattern.test(label)) {\n      throw AWS.util.error(new Error(),\n        {code: 'ValidationError', message: label + ' is not hostname compatible.'});\n    }\n  });\n}\n\nmodule.exports = {\n  populateHostPrefix: populateHostPrefix\n};\n","(function(exports) {\n  \"use strict\";\n\n  function isArray(obj) {\n    if (obj !== null) {\n      return Object.prototype.toString.call(obj) === \"[object Array]\";\n    } else {\n      return false;\n    }\n  }\n\n  function isObject(obj) {\n    if (obj !== null) {\n      return Object.prototype.toString.call(obj) === \"[object Object]\";\n    } else {\n      return false;\n    }\n  }\n\n  function strictDeepEqual(first, second) {\n    // Check the scalar case first.\n    if (first === second) {\n      return true;\n    }\n\n    // Check if they are the same type.\n    var firstType = Object.prototype.toString.call(first);\n    if (firstType !== Object.prototype.toString.call(second)) {\n      return false;\n    }\n    // We know that first and second have the same type so we can just check the\n    // first type from now on.\n    if (isArray(first) === true) {\n      // Short circuit if they're not the same length;\n      if (first.length !== second.length) {\n        return false;\n      }\n      for (var i = 0; i < first.length; i++) {\n        if (strictDeepEqual(first[i], second[i]) === false) {\n          return false;\n        }\n      }\n      return true;\n    }\n    if (isObject(first) === true) {\n      // An object is equal if it has the same key/value pairs.\n      var keysSeen = {};\n      for (var key in first) {\n        if (hasOwnProperty.call(first, key)) {\n          if (strictDeepEqual(first[key], second[key]) === false) {\n            return false;\n          }\n          keysSeen[key] = true;\n        }\n      }\n      // Now check that there aren't any keys in second that weren't\n      // in first.\n      for (var key2 in second) {\n        if (hasOwnProperty.call(second, key2)) {\n          if (keysSeen[key2] !== true) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n    return false;\n  }\n\n  function isFalse(obj) {\n    // From the spec:\n    // A false value corresponds to the following values:\n    // Empty list\n    // Empty object\n    // Empty string\n    // False boolean\n    // null value\n\n    // First check the scalar values.\n    if (obj === \"\" || obj === false || obj === null) {\n        return true;\n    } else if (isArray(obj) && obj.length === 0) {\n        // Check for an empty array.\n        return true;\n    } else if (isObject(obj)) {\n        // Check for an empty object.\n        for (var key in obj) {\n            // If there are any keys, then\n            // the object is not empty so the object\n            // is not false.\n            if (obj.hasOwnProperty(key)) {\n              return false;\n            }\n        }\n        return true;\n    } else {\n        return false;\n    }\n  }\n\n  function objValues(obj) {\n    var keys = Object.keys(obj);\n    var values = [];\n    for (var i = 0; i < keys.length; i++) {\n      values.push(obj[keys[i]]);\n    }\n    return values;\n  }\n\n  function merge(a, b) {\n      var merged = {};\n      for (var key in a) {\n          merged[key] = a[key];\n      }\n      for (var key2 in b) {\n          merged[key2] = b[key2];\n      }\n      return merged;\n  }\n\n  var trimLeft;\n  if (typeof String.prototype.trimLeft === \"function\") {\n    trimLeft = function(str) {\n      return str.trimLeft();\n    };\n  } else {\n    trimLeft = function(str) {\n      return str.match(/^\\s*(.*)/)[1];\n    };\n  }\n\n  // Type constants used to define functions.\n  var TYPE_NUMBER = 0;\n  var TYPE_ANY = 1;\n  var TYPE_STRING = 2;\n  var TYPE_ARRAY = 3;\n  var TYPE_OBJECT = 4;\n  var TYPE_BOOLEAN = 5;\n  var TYPE_EXPREF = 6;\n  var TYPE_NULL = 7;\n  var TYPE_ARRAY_NUMBER = 8;\n  var TYPE_ARRAY_STRING = 9;\n\n  var TOK_EOF = \"EOF\";\n  var TOK_UNQUOTEDIDENTIFIER = \"UnquotedIdentifier\";\n  var TOK_QUOTEDIDENTIFIER = \"QuotedIdentifier\";\n  var TOK_RBRACKET = \"Rbracket\";\n  var TOK_RPAREN = \"Rparen\";\n  var TOK_COMMA = \"Comma\";\n  var TOK_COLON = \"Colon\";\n  var TOK_RBRACE = \"Rbrace\";\n  var TOK_NUMBER = \"Number\";\n  var TOK_CURRENT = \"Current\";\n  var TOK_EXPREF = \"Expref\";\n  var TOK_PIPE = \"Pipe\";\n  var TOK_OR = \"Or\";\n  var TOK_AND = \"And\";\n  var TOK_EQ = \"EQ\";\n  var TOK_GT = \"GT\";\n  var TOK_LT = \"LT\";\n  var TOK_GTE = \"GTE\";\n  var TOK_LTE = \"LTE\";\n  var TOK_NE = \"NE\";\n  var TOK_FLATTEN = \"Flatten\";\n  var TOK_STAR = \"Star\";\n  var TOK_FILTER = \"Filter\";\n  var TOK_DOT = \"Dot\";\n  var TOK_NOT = \"Not\";\n  var TOK_LBRACE = \"Lbrace\";\n  var TOK_LBRACKET = \"Lbracket\";\n  var TOK_LPAREN= \"Lparen\";\n  var TOK_LITERAL= \"Literal\";\n\n  // The \"&\", \"[\", \"<\", \">\" tokens\n  // are not in basicToken because\n  // there are two token variants\n  // (\"&&\", \"[?\", \"<=\", \">=\").  This is specially handled\n  // below.\n\n  var basicTokens = {\n    \".\": TOK_DOT,\n    \"*\": TOK_STAR,\n    \",\": TOK_COMMA,\n    \":\": TOK_COLON,\n    \"{\": TOK_LBRACE,\n    \"}\": TOK_RBRACE,\n    \"]\": TOK_RBRACKET,\n    \"(\": TOK_LPAREN,\n    \")\": TOK_RPAREN,\n    \"@\": TOK_CURRENT\n  };\n\n  var operatorStartToken = {\n      \"<\": true,\n      \">\": true,\n      \"=\": true,\n      \"!\": true\n  };\n\n  var skipChars = {\n      \" \": true,\n      \"\\t\": true,\n      \"\\n\": true\n  };\n\n\n  function isAlpha(ch) {\n      return (ch >= \"a\" && ch <= \"z\") ||\n             (ch >= \"A\" && ch <= \"Z\") ||\n             ch === \"_\";\n  }\n\n  function isNum(ch) {\n      return (ch >= \"0\" && ch <= \"9\") ||\n             ch === \"-\";\n  }\n  function isAlphaNum(ch) {\n      return (ch >= \"a\" && ch <= \"z\") ||\n             (ch >= \"A\" && ch <= \"Z\") ||\n             (ch >= \"0\" && ch <= \"9\") ||\n             ch === \"_\";\n  }\n\n  function Lexer() {\n  }\n  Lexer.prototype = {\n      tokenize: function(stream) {\n          var tokens = [];\n          this._current = 0;\n          var start;\n          var identifier;\n          var token;\n          while (this._current < stream.length) {\n              if (isAlpha(stream[this._current])) {\n                  start = this._current;\n                  identifier = this._consumeUnquotedIdentifier(stream);\n                  tokens.push({type: TOK_UNQUOTEDIDENTIFIER,\n                               value: identifier,\n                               start: start});\n              } else if (basicTokens[stream[this._current]] !== undefined) {\n                  tokens.push({type: basicTokens[stream[this._current]],\n                              value: stream[this._current],\n                              start: this._current});\n                  this._current++;\n              } else if (isNum(stream[this._current])) {\n                  token = this._consumeNumber(stream);\n                  tokens.push(token);\n              } else if (stream[this._current] === \"[\") {\n                  // No need to increment this._current.  This happens\n                  // in _consumeLBracket\n                  token = this._consumeLBracket(stream);\n                  tokens.push(token);\n              } else if (stream[this._current] === \"\\\"\") {\n                  start = this._current;\n                  identifier = this._consumeQuotedIdentifier(stream);\n                  tokens.push({type: TOK_QUOTEDIDENTIFIER,\n                               value: identifier,\n                               start: start});\n              } else if (stream[this._current] === \"'\") {\n                  start = this._current;\n                  identifier = this._consumeRawStringLiteral(stream);\n                  tokens.push({type: TOK_LITERAL,\n                               value: identifier,\n                               start: start});\n              } else if (stream[this._current] === \"`\") {\n                  start = this._current;\n                  var literal = this._consumeLiteral(stream);\n                  tokens.push({type: TOK_LITERAL,\n                               value: literal,\n                               start: start});\n              } else if (operatorStartToken[stream[this._current]] !== undefined) {\n                  tokens.push(this._consumeOperator(stream));\n              } else if (skipChars[stream[this._current]] !== undefined) {\n                  // Ignore whitespace.\n                  this._current++;\n              } else if (stream[this._current] === \"&\") {\n                  start = this._current;\n                  this._current++;\n                  if (stream[this._current] === \"&\") {\n                      this._current++;\n                      tokens.push({type: TOK_AND, value: \"&&\", start: start});\n                  } else {\n                      tokens.push({type: TOK_EXPREF, value: \"&\", start: start});\n                  }\n              } else if (stream[this._current] === \"|\") {\n                  start = this._current;\n                  this._current++;\n                  if (stream[this._current] === \"|\") {\n                      this._current++;\n                      tokens.push({type: TOK_OR, value: \"||\", start: start});\n                  } else {\n                      tokens.push({type: TOK_PIPE, value: \"|\", start: start});\n                  }\n              } else {\n                  var error = new Error(\"Unknown character:\" + stream[this._current]);\n                  error.name = \"LexerError\";\n                  throw error;\n              }\n          }\n          return tokens;\n      },\n\n      _consumeUnquotedIdentifier: function(stream) {\n          var start = this._current;\n          this._current++;\n          while (this._current < stream.length && isAlphaNum(stream[this._current])) {\n              this._current++;\n          }\n          return stream.slice(start, this._current);\n      },\n\n      _consumeQuotedIdentifier: function(stream) {\n          var start = this._current;\n          this._current++;\n          var maxLength = stream.length;\n          while (stream[this._current] !== \"\\\"\" && this._current < maxLength) {\n              // You can escape a double quote and you can escape an escape.\n              var current = this._current;\n              if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n                                               stream[current + 1] === \"\\\"\")) {\n                  current += 2;\n              } else {\n                  current++;\n              }\n              this._current = current;\n          }\n          this._current++;\n          return JSON.parse(stream.slice(start, this._current));\n      },\n\n      _consumeRawStringLiteral: function(stream) {\n          var start = this._current;\n          this._current++;\n          var maxLength = stream.length;\n          while (stream[this._current] !== \"'\" && this._current < maxLength) {\n              // You can escape a single quote and you can escape an escape.\n              var current = this._current;\n              if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n                                               stream[current + 1] === \"'\")) {\n                  current += 2;\n              } else {\n                  current++;\n              }\n              this._current = current;\n          }\n          this._current++;\n          var literal = stream.slice(start + 1, this._current - 1);\n          return literal.replace(\"\\\\'\", \"'\");\n      },\n\n      _consumeNumber: function(stream) {\n          var start = this._current;\n          this._current++;\n          var maxLength = stream.length;\n          while (isNum(stream[this._current]) && this._current < maxLength) {\n              this._current++;\n          }\n          var value = parseInt(stream.slice(start, this._current));\n          return {type: TOK_NUMBER, value: value, start: start};\n      },\n\n      _consumeLBracket: function(stream) {\n          var start = this._current;\n          this._current++;\n          if (stream[this._current] === \"?\") {\n              this._current++;\n              return {type: TOK_FILTER, value: \"[?\", start: start};\n          } else if (stream[this._current] === \"]\") {\n              this._current++;\n              return {type: TOK_FLATTEN, value: \"[]\", start: start};\n          } else {\n              return {type: TOK_LBRACKET, value: \"[\", start: start};\n          }\n      },\n\n      _consumeOperator: function(stream) {\n          var start = this._current;\n          var startingChar = stream[start];\n          this._current++;\n          if (startingChar === \"!\") {\n              if (stream[this._current] === \"=\") {\n                  this._current++;\n                  return {type: TOK_NE, value: \"!=\", start: start};\n              } else {\n                return {type: TOK_NOT, value: \"!\", start: start};\n              }\n          } else if (startingChar === \"<\") {\n              if (stream[this._current] === \"=\") {\n                  this._current++;\n                  return {type: TOK_LTE, value: \"<=\", start: start};\n              } else {\n                  return {type: TOK_LT, value: \"<\", start: start};\n              }\n          } else if (startingChar === \">\") {\n              if (stream[this._current] === \"=\") {\n                  this._current++;\n                  return {type: TOK_GTE, value: \">=\", start: start};\n              } else {\n                  return {type: TOK_GT, value: \">\", start: start};\n              }\n          } else if (startingChar === \"=\") {\n              if (stream[this._current] === \"=\") {\n                  this._current++;\n                  return {type: TOK_EQ, value: \"==\", start: start};\n              }\n          }\n      },\n\n      _consumeLiteral: function(stream) {\n          this._current++;\n          var start = this._current;\n          var maxLength = stream.length;\n          var literal;\n          while(stream[this._current] !== \"`\" && this._current < maxLength) {\n              // You can escape a literal char or you can escape the escape.\n              var current = this._current;\n              if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n                                               stream[current + 1] === \"`\")) {\n                  current += 2;\n              } else {\n                  current++;\n              }\n              this._current = current;\n          }\n          var literalString = trimLeft(stream.slice(start, this._current));\n          literalString = literalString.replace(\"\\\\`\", \"`\");\n          if (this._looksLikeJSON(literalString)) {\n              literal = JSON.parse(literalString);\n          } else {\n              // Try to JSON parse it as \"<literal>\"\n              literal = JSON.parse(\"\\\"\" + literalString + \"\\\"\");\n          }\n          // +1 gets us to the ending \"`\", +1 to move on to the next char.\n          this._current++;\n          return literal;\n      },\n\n      _looksLikeJSON: function(literalString) {\n          var startingChars = \"[{\\\"\";\n          var jsonLiterals = [\"true\", \"false\", \"null\"];\n          var numberLooking = \"-0123456789\";\n\n          if (literalString === \"\") {\n              return false;\n          } else if (startingChars.indexOf(literalString[0]) >= 0) {\n              return true;\n          } else if (jsonLiterals.indexOf(literalString) >= 0) {\n              return true;\n          } else if (numberLooking.indexOf(literalString[0]) >= 0) {\n              try {\n                  JSON.parse(literalString);\n                  return true;\n              } catch (ex) {\n                  return false;\n              }\n          } else {\n              return false;\n          }\n      }\n  };\n\n      var bindingPower = {};\n      bindingPower[TOK_EOF] = 0;\n      bindingPower[TOK_UNQUOTEDIDENTIFIER] = 0;\n      bindingPower[TOK_QUOTEDIDENTIFIER] = 0;\n      bindingPower[TOK_RBRACKET] = 0;\n      bindingPower[TOK_RPAREN] = 0;\n      bindingPower[TOK_COMMA] = 0;\n      bindingPower[TOK_RBRACE] = 0;\n      bindingPower[TOK_NUMBER] = 0;\n      bindingPower[TOK_CURRENT] = 0;\n      bindingPower[TOK_EXPREF] = 0;\n      bindingPower[TOK_PIPE] = 1;\n      bindingPower[TOK_OR] = 2;\n      bindingPower[TOK_AND] = 3;\n      bindingPower[TOK_EQ] = 5;\n      bindingPower[TOK_GT] = 5;\n      bindingPower[TOK_LT] = 5;\n      bindingPower[TOK_GTE] = 5;\n      bindingPower[TOK_LTE] = 5;\n      bindingPower[TOK_NE] = 5;\n      bindingPower[TOK_FLATTEN] = 9;\n      bindingPower[TOK_STAR] = 20;\n      bindingPower[TOK_FILTER] = 21;\n      bindingPower[TOK_DOT] = 40;\n      bindingPower[TOK_NOT] = 45;\n      bindingPower[TOK_LBRACE] = 50;\n      bindingPower[TOK_LBRACKET] = 55;\n      bindingPower[TOK_LPAREN] = 60;\n\n  function Parser() {\n  }\n\n  Parser.prototype = {\n      parse: function(expression) {\n          this._loadTokens(expression);\n          this.index = 0;\n          var ast = this.expression(0);\n          if (this._lookahead(0) !== TOK_EOF) {\n              var t = this._lookaheadToken(0);\n              var error = new Error(\n                  \"Unexpected token type: \" + t.type + \", value: \" + t.value);\n              error.name = \"ParserError\";\n              throw error;\n          }\n          return ast;\n      },\n\n      _loadTokens: function(expression) {\n          var lexer = new Lexer();\n          var tokens = lexer.tokenize(expression);\n          tokens.push({type: TOK_EOF, value: \"\", start: expression.length});\n          this.tokens = tokens;\n      },\n\n      expression: function(rbp) {\n          var leftToken = this._lookaheadToken(0);\n          this._advance();\n          var left = this.nud(leftToken);\n          var currentToken = this._lookahead(0);\n          while (rbp < bindingPower[currentToken]) {\n              this._advance();\n              left = this.led(currentToken, left);\n              currentToken = this._lookahead(0);\n          }\n          return left;\n      },\n\n      _lookahead: function(number) {\n          return this.tokens[this.index + number].type;\n      },\n\n      _lookaheadToken: function(number) {\n          return this.tokens[this.index + number];\n      },\n\n      _advance: function() {\n          this.index++;\n      },\n\n      nud: function(token) {\n        var left;\n        var right;\n        var expression;\n        switch (token.type) {\n          case TOK_LITERAL:\n            return {type: \"Literal\", value: token.value};\n          case TOK_UNQUOTEDIDENTIFIER:\n            return {type: \"Field\", name: token.value};\n          case TOK_QUOTEDIDENTIFIER:\n            var node = {type: \"Field\", name: token.value};\n            if (this._lookahead(0) === TOK_LPAREN) {\n                throw new Error(\"Quoted identifier not allowed for function names.\");\n            } else {\n                return node;\n            }\n            break;\n          case TOK_NOT:\n            right = this.expression(bindingPower.Not);\n            return {type: \"NotExpression\", children: [right]};\n          case TOK_STAR:\n            left = {type: \"Identity\"};\n            right = null;\n            if (this._lookahead(0) === TOK_RBRACKET) {\n                // This can happen in a multiselect,\n                // [a, b, *]\n                right = {type: \"Identity\"};\n            } else {\n                right = this._parseProjectionRHS(bindingPower.Star);\n            }\n            return {type: \"ValueProjection\", children: [left, right]};\n          case TOK_FILTER:\n            return this.led(token.type, {type: \"Identity\"});\n          case TOK_LBRACE:\n            return this._parseMultiselectHash();\n          case TOK_FLATTEN:\n            left = {type: TOK_FLATTEN, children: [{type: \"Identity\"}]};\n            right = this._parseProjectionRHS(bindingPower.Flatten);\n            return {type: \"Projection\", children: [left, right]};\n          case TOK_LBRACKET:\n            if (this._lookahead(0) === TOK_NUMBER || this._lookahead(0) === TOK_COLON) {\n                right = this._parseIndexExpression();\n                return this._projectIfSlice({type: \"Identity\"}, right);\n            } else if (this._lookahead(0) === TOK_STAR &&\n                       this._lookahead(1) === TOK_RBRACKET) {\n                this._advance();\n                this._advance();\n                right = this._parseProjectionRHS(bindingPower.Star);\n                return {type: \"Projection\",\n                        children: [{type: \"Identity\"}, right]};\n            } else {\n                return this._parseMultiselectList();\n            }\n            break;\n          case TOK_CURRENT:\n            return {type: TOK_CURRENT};\n          case TOK_EXPREF:\n            expression = this.expression(bindingPower.Expref);\n            return {type: \"ExpressionReference\", children: [expression]};\n          case TOK_LPAREN:\n            var args = [];\n            while (this._lookahead(0) !== TOK_RPAREN) {\n              if (this._lookahead(0) === TOK_CURRENT) {\n                expression = {type: TOK_CURRENT};\n                this._advance();\n              } else {\n                expression = this.expression(0);\n              }\n              args.push(expression);\n            }\n            this._match(TOK_RPAREN);\n            return args[0];\n          default:\n            this._errorToken(token);\n        }\n      },\n\n      led: function(tokenName, left) {\n        var right;\n        switch(tokenName) {\n          case TOK_DOT:\n            var rbp = bindingPower.Dot;\n            if (this._lookahead(0) !== TOK_STAR) {\n                right = this._parseDotRHS(rbp);\n                return {type: \"Subexpression\", children: [left, right]};\n            } else {\n                // Creating a projection.\n                this._advance();\n                right = this._parseProjectionRHS(rbp);\n                return {type: \"ValueProjection\", children: [left, right]};\n            }\n            break;\n          case TOK_PIPE:\n            right = this.expression(bindingPower.Pipe);\n            return {type: TOK_PIPE, children: [left, right]};\n          case TOK_OR:\n            right = this.expression(bindingPower.Or);\n            return {type: \"OrExpression\", children: [left, right]};\n          case TOK_AND:\n            right = this.expression(bindingPower.And);\n            return {type: \"AndExpression\", children: [left, right]};\n          case TOK_LPAREN:\n            var name = left.name;\n            var args = [];\n            var expression, node;\n            while (this._lookahead(0) !== TOK_RPAREN) {\n              if (this._lookahead(0) === TOK_CURRENT) {\n                expression = {type: TOK_CURRENT};\n                this._advance();\n              } else {\n                expression = this.expression(0);\n              }\n              if (this._lookahead(0) === TOK_COMMA) {\n                this._match(TOK_COMMA);\n              }\n              args.push(expression);\n            }\n            this._match(TOK_RPAREN);\n            node = {type: \"Function\", name: name, children: args};\n            return node;\n          case TOK_FILTER:\n            var condition = this.expression(0);\n            this._match(TOK_RBRACKET);\n            if (this._lookahead(0) === TOK_FLATTEN) {\n              right = {type: \"Identity\"};\n            } else {\n              right = this._parseProjectionRHS(bindingPower.Filter);\n            }\n            return {type: \"FilterProjection\", children: [left, right, condition]};\n          case TOK_FLATTEN:\n            var leftNode = {type: TOK_FLATTEN, children: [left]};\n            var rightNode = this._parseProjectionRHS(bindingPower.Flatten);\n            return {type: \"Projection\", children: [leftNode, rightNode]};\n          case TOK_EQ:\n          case TOK_NE:\n          case TOK_GT:\n          case TOK_GTE:\n          case TOK_LT:\n          case TOK_LTE:\n            return this._parseComparator(left, tokenName);\n          case TOK_LBRACKET:\n            var token = this._lookaheadToken(0);\n            if (token.type === TOK_NUMBER || token.type === TOK_COLON) {\n                right = this._parseIndexExpression();\n                return this._projectIfSlice(left, right);\n            } else {\n                this._match(TOK_STAR);\n                this._match(TOK_RBRACKET);\n                right = this._parseProjectionRHS(bindingPower.Star);\n                return {type: \"Projection\", children: [left, right]};\n            }\n            break;\n          default:\n            this._errorToken(this._lookaheadToken(0));\n        }\n      },\n\n      _match: function(tokenType) {\n          if (this._lookahead(0) === tokenType) {\n              this._advance();\n          } else {\n              var t = this._lookaheadToken(0);\n              var error = new Error(\"Expected \" + tokenType + \", got: \" + t.type);\n              error.name = \"ParserError\";\n              throw error;\n          }\n      },\n\n      _errorToken: function(token) {\n          var error = new Error(\"Invalid token (\" +\n                                token.type + \"): \\\"\" +\n                                token.value + \"\\\"\");\n          error.name = \"ParserError\";\n          throw error;\n      },\n\n\n      _parseIndexExpression: function() {\n          if (this._lookahead(0) === TOK_COLON || this._lookahead(1) === TOK_COLON) {\n              return this._parseSliceExpression();\n          } else {\n              var node = {\n                  type: \"Index\",\n                  value: this._lookaheadToken(0).value};\n              this._advance();\n              this._match(TOK_RBRACKET);\n              return node;\n          }\n      },\n\n      _projectIfSlice: function(left, right) {\n          var indexExpr = {type: \"IndexExpression\", children: [left, right]};\n          if (right.type === \"Slice\") {\n              return {\n                  type: \"Projection\",\n                  children: [indexExpr, this._parseProjectionRHS(bindingPower.Star)]\n              };\n          } else {\n              return indexExpr;\n          }\n      },\n\n      _parseSliceExpression: function() {\n          // [start:end:step] where each part is optional, as well as the last\n          // colon.\n          var parts = [null, null, null];\n          var index = 0;\n          var currentToken = this._lookahead(0);\n          while (currentToken !== TOK_RBRACKET && index < 3) {\n              if (currentToken === TOK_COLON) {\n                  index++;\n                  this._advance();\n              } else if (currentToken === TOK_NUMBER) {\n                  parts[index] = this._lookaheadToken(0).value;\n                  this._advance();\n              } else {\n                  var t = this._lookahead(0);\n                  var error = new Error(\"Syntax error, unexpected token: \" +\n                                        t.value + \"(\" + t.type + \")\");\n                  error.name = \"Parsererror\";\n                  throw error;\n              }\n              currentToken = this._lookahead(0);\n          }\n          this._match(TOK_RBRACKET);\n          return {\n              type: \"Slice\",\n              children: parts\n          };\n      },\n\n      _parseComparator: function(left, comparator) {\n        var right = this.expression(bindingPower[comparator]);\n        return {type: \"Comparator\", name: comparator, children: [left, right]};\n      },\n\n      _parseDotRHS: function(rbp) {\n          var lookahead = this._lookahead(0);\n          var exprTokens = [TOK_UNQUOTEDIDENTIFIER, TOK_QUOTEDIDENTIFIER, TOK_STAR];\n          if (exprTokens.indexOf(lookahead) >= 0) {\n              return this.expression(rbp);\n          } else if (lookahead === TOK_LBRACKET) {\n              this._match(TOK_LBRACKET);\n              return this._parseMultiselectList();\n          } else if (lookahead === TOK_LBRACE) {\n              this._match(TOK_LBRACE);\n              return this._parseMultiselectHash();\n          }\n      },\n\n      _parseProjectionRHS: function(rbp) {\n          var right;\n          if (bindingPower[this._lookahead(0)] < 10) {\n              right = {type: \"Identity\"};\n          } else if (this._lookahead(0) === TOK_LBRACKET) {\n              right = this.expression(rbp);\n          } else if (this._lookahead(0) === TOK_FILTER) {\n              right = this.expression(rbp);\n          } else if (this._lookahead(0) === TOK_DOT) {\n              this._match(TOK_DOT);\n              right = this._parseDotRHS(rbp);\n          } else {\n              var t = this._lookaheadToken(0);\n              var error = new Error(\"Sytanx error, unexpected token: \" +\n                                    t.value + \"(\" + t.type + \")\");\n              error.name = \"ParserError\";\n              throw error;\n          }\n          return right;\n      },\n\n      _parseMultiselectList: function() {\n          var expressions = [];\n          while (this._lookahead(0) !== TOK_RBRACKET) {\n              var expression = this.expression(0);\n              expressions.push(expression);\n              if (this._lookahead(0) === TOK_COMMA) {\n                  this._match(TOK_COMMA);\n                  if (this._lookahead(0) === TOK_RBRACKET) {\n                    throw new Error(\"Unexpected token Rbracket\");\n                  }\n              }\n          }\n          this._match(TOK_RBRACKET);\n          return {type: \"MultiSelectList\", children: expressions};\n      },\n\n      _parseMultiselectHash: function() {\n        var pairs = [];\n        var identifierTypes = [TOK_UNQUOTEDIDENTIFIER, TOK_QUOTEDIDENTIFIER];\n        var keyToken, keyName, value, node;\n        for (;;) {\n          keyToken = this._lookaheadToken(0);\n          if (identifierTypes.indexOf(keyToken.type) < 0) {\n            throw new Error(\"Expecting an identifier token, got: \" +\n                            keyToken.type);\n          }\n          keyName = keyToken.value;\n          this._advance();\n          this._match(TOK_COLON);\n          value = this.expression(0);\n          node = {type: \"KeyValuePair\", name: keyName, value: value};\n          pairs.push(node);\n          if (this._lookahead(0) === TOK_COMMA) {\n            this._match(TOK_COMMA);\n          } else if (this._lookahead(0) === TOK_RBRACE) {\n            this._match(TOK_RBRACE);\n            break;\n          }\n        }\n        return {type: \"MultiSelectHash\", children: pairs};\n      }\n  };\n\n\n  function TreeInterpreter(runtime) {\n    this.runtime = runtime;\n  }\n\n  TreeInterpreter.prototype = {\n      search: function(node, value) {\n          return this.visit(node, value);\n      },\n\n      visit: function(node, value) {\n          var matched, current, result, first, second, field, left, right, collected, i;\n          switch (node.type) {\n            case \"Field\":\n              if (value === null ) {\n                  return null;\n              } else if (isObject(value)) {\n                  field = value[node.name];\n                  if (field === undefined) {\n                      return null;\n                  } else {\n                      return field;\n                  }\n              } else {\n                return null;\n              }\n              break;\n            case \"Subexpression\":\n              result = this.visit(node.children[0], value);\n              for (i = 1; i < node.children.length; i++) {\n                  result = this.visit(node.children[1], result);\n                  if (result === null) {\n                      return null;\n                  }\n              }\n              return result;\n            case \"IndexExpression\":\n              left = this.visit(node.children[0], value);\n              right = this.visit(node.children[1], left);\n              return right;\n            case \"Index\":\n              if (!isArray(value)) {\n                return null;\n              }\n              var index = node.value;\n              if (index < 0) {\n                index = value.length + index;\n              }\n              result = value[index];\n              if (result === undefined) {\n                result = null;\n              }\n              return result;\n            case \"Slice\":\n              if (!isArray(value)) {\n                return null;\n              }\n              var sliceParams = node.children.slice(0);\n              var computed = this.computeSliceParams(value.length, sliceParams);\n              var start = computed[0];\n              var stop = computed[1];\n              var step = computed[2];\n              result = [];\n              if (step > 0) {\n                  for (i = start; i < stop; i += step) {\n                      result.push(value[i]);\n                  }\n              } else {\n                  for (i = start; i > stop; i += step) {\n                      result.push(value[i]);\n                  }\n              }\n              return result;\n            case \"Projection\":\n              // Evaluate left child.\n              var base = this.visit(node.children[0], value);\n              if (!isArray(base)) {\n                return null;\n              }\n              collected = [];\n              for (i = 0; i < base.length; i++) {\n                current = this.visit(node.children[1], base[i]);\n                if (current !== null) {\n                  collected.push(current);\n                }\n              }\n              return collected;\n            case \"ValueProjection\":\n              // Evaluate left child.\n              base = this.visit(node.children[0], value);\n              if (!isObject(base)) {\n                return null;\n              }\n              collected = [];\n              var values = objValues(base);\n              for (i = 0; i < values.length; i++) {\n                current = this.visit(node.children[1], values[i]);\n                if (current !== null) {\n                  collected.push(current);\n                }\n              }\n              return collected;\n            case \"FilterProjection\":\n              base = this.visit(node.children[0], value);\n              if (!isArray(base)) {\n                return null;\n              }\n              var filtered = [];\n              var finalResults = [];\n              for (i = 0; i < base.length; i++) {\n                matched = this.visit(node.children[2], base[i]);\n                if (!isFalse(matched)) {\n                  filtered.push(base[i]);\n                }\n              }\n              for (var j = 0; j < filtered.length; j++) {\n                current = this.visit(node.children[1], filtered[j]);\n                if (current !== null) {\n                  finalResults.push(current);\n                }\n              }\n              return finalResults;\n            case \"Comparator\":\n              first = this.visit(node.children[0], value);\n              second = this.visit(node.children[1], value);\n              switch(node.name) {\n                case TOK_EQ:\n                  result = strictDeepEqual(first, second);\n                  break;\n                case TOK_NE:\n                  result = !strictDeepEqual(first, second);\n                  break;\n                case TOK_GT:\n                  result = first > second;\n                  break;\n                case TOK_GTE:\n                  result = first >= second;\n                  break;\n                case TOK_LT:\n                  result = first < second;\n                  break;\n                case TOK_LTE:\n                  result = first <= second;\n                  break;\n                default:\n                  throw new Error(\"Unknown comparator: \" + node.name);\n              }\n              return result;\n            case TOK_FLATTEN:\n              var original = this.visit(node.children[0], value);\n              if (!isArray(original)) {\n                return null;\n              }\n              var merged = [];\n              for (i = 0; i < original.length; i++) {\n                current = original[i];\n                if (isArray(current)) {\n                  merged.push.apply(merged, current);\n                } else {\n                  merged.push(current);\n                }\n              }\n              return merged;\n            case \"Identity\":\n              return value;\n            case \"MultiSelectList\":\n              if (value === null) {\n                return null;\n              }\n              collected = [];\n              for (i = 0; i < node.children.length; i++) {\n                  collected.push(this.visit(node.children[i], value));\n              }\n              return collected;\n            case \"MultiSelectHash\":\n              if (value === null) {\n                return null;\n              }\n              collected = {};\n              var child;\n              for (i = 0; i < node.children.length; i++) {\n                child = node.children[i];\n                collected[child.name] = this.visit(child.value, value);\n              }\n              return collected;\n            case \"OrExpression\":\n              matched = this.visit(node.children[0], value);\n              if (isFalse(matched)) {\n                  matched = this.visit(node.children[1], value);\n              }\n              return matched;\n            case \"AndExpression\":\n              first = this.visit(node.children[0], value);\n\n              if (isFalse(first) === true) {\n                return first;\n              }\n              return this.visit(node.children[1], value);\n            case \"NotExpression\":\n              first = this.visit(node.children[0], value);\n              return isFalse(first);\n            case \"Literal\":\n              return node.value;\n            case TOK_PIPE:\n              left = this.visit(node.children[0], value);\n              return this.visit(node.children[1], left);\n            case TOK_CURRENT:\n              return value;\n            case \"Function\":\n              var resolvedArgs = [];\n              for (i = 0; i < node.children.length; i++) {\n                  resolvedArgs.push(this.visit(node.children[i], value));\n              }\n              return this.runtime.callFunction(node.name, resolvedArgs);\n            case \"ExpressionReference\":\n              var refNode = node.children[0];\n              // Tag the node with a specific attribute so the type\n              // checker verify the type.\n              refNode.jmespathType = TOK_EXPREF;\n              return refNode;\n            default:\n              throw new Error(\"Unknown node type: \" + node.type);\n          }\n      },\n\n      computeSliceParams: function(arrayLength, sliceParams) {\n        var start = sliceParams[0];\n        var stop = sliceParams[1];\n        var step = sliceParams[2];\n        var computed = [null, null, null];\n        if (step === null) {\n          step = 1;\n        } else if (step === 0) {\n          var error = new Error(\"Invalid slice, step cannot be 0\");\n          error.name = \"RuntimeError\";\n          throw error;\n        }\n        var stepValueNegative = step < 0 ? true : false;\n\n        if (start === null) {\n            start = stepValueNegative ? arrayLength - 1 : 0;\n        } else {\n            start = this.capSliceRange(arrayLength, start, step);\n        }\n\n        if (stop === null) {\n            stop = stepValueNegative ? -1 : arrayLength;\n        } else {\n            stop = this.capSliceRange(arrayLength, stop, step);\n        }\n        computed[0] = start;\n        computed[1] = stop;\n        computed[2] = step;\n        return computed;\n      },\n\n      capSliceRange: function(arrayLength, actualValue, step) {\n          if (actualValue < 0) {\n              actualValue += arrayLength;\n              if (actualValue < 0) {\n                  actualValue = step < 0 ? -1 : 0;\n              }\n          } else if (actualValue >= arrayLength) {\n              actualValue = step < 0 ? arrayLength - 1 : arrayLength;\n          }\n          return actualValue;\n      }\n\n  };\n\n  function Runtime(interpreter) {\n    this._interpreter = interpreter;\n    this.functionTable = {\n        // name: [function, <signature>]\n        // The <signature> can be:\n        //\n        // {\n        //   args: [[type1, type2], [type1, type2]],\n        //   variadic: true|false\n        // }\n        //\n        // Each arg in the arg list is a list of valid types\n        // (if the function is overloaded and supports multiple\n        // types.  If the type is \"any\" then no type checking\n        // occurs on the argument.  Variadic is optional\n        // and if not provided is assumed to be false.\n        abs: {_func: this._functionAbs, _signature: [{types: [TYPE_NUMBER]}]},\n        avg: {_func: this._functionAvg, _signature: [{types: [TYPE_ARRAY_NUMBER]}]},\n        ceil: {_func: this._functionCeil, _signature: [{types: [TYPE_NUMBER]}]},\n        contains: {\n            _func: this._functionContains,\n            _signature: [{types: [TYPE_STRING, TYPE_ARRAY]},\n                        {types: [TYPE_ANY]}]},\n        \"ends_with\": {\n            _func: this._functionEndsWith,\n            _signature: [{types: [TYPE_STRING]}, {types: [TYPE_STRING]}]},\n        floor: {_func: this._functionFloor, _signature: [{types: [TYPE_NUMBER]}]},\n        length: {\n            _func: this._functionLength,\n            _signature: [{types: [TYPE_STRING, TYPE_ARRAY, TYPE_OBJECT]}]},\n        map: {\n            _func: this._functionMap,\n            _signature: [{types: [TYPE_EXPREF]}, {types: [TYPE_ARRAY]}]},\n        max: {\n            _func: this._functionMax,\n            _signature: [{types: [TYPE_ARRAY_NUMBER, TYPE_ARRAY_STRING]}]},\n        \"merge\": {\n            _func: this._functionMerge,\n            _signature: [{types: [TYPE_OBJECT], variadic: true}]\n        },\n        \"max_by\": {\n          _func: this._functionMaxBy,\n          _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n        },\n        sum: {_func: this._functionSum, _signature: [{types: [TYPE_ARRAY_NUMBER]}]},\n        \"starts_with\": {\n            _func: this._functionStartsWith,\n            _signature: [{types: [TYPE_STRING]}, {types: [TYPE_STRING]}]},\n        min: {\n            _func: this._functionMin,\n            _signature: [{types: [TYPE_ARRAY_NUMBER, TYPE_ARRAY_STRING]}]},\n        \"min_by\": {\n          _func: this._functionMinBy,\n          _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n        },\n        type: {_func: this._functionType, _signature: [{types: [TYPE_ANY]}]},\n        keys: {_func: this._functionKeys, _signature: [{types: [TYPE_OBJECT]}]},\n        values: {_func: this._functionValues, _signature: [{types: [TYPE_OBJECT]}]},\n        sort: {_func: this._functionSort, _signature: [{types: [TYPE_ARRAY_STRING, TYPE_ARRAY_NUMBER]}]},\n        \"sort_by\": {\n          _func: this._functionSortBy,\n          _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n        },\n        join: {\n            _func: this._functionJoin,\n            _signature: [\n                {types: [TYPE_STRING]},\n                {types: [TYPE_ARRAY_STRING]}\n            ]\n        },\n        reverse: {\n            _func: this._functionReverse,\n            _signature: [{types: [TYPE_STRING, TYPE_ARRAY]}]},\n        \"to_array\": {_func: this._functionToArray, _signature: [{types: [TYPE_ANY]}]},\n        \"to_string\": {_func: this._functionToString, _signature: [{types: [TYPE_ANY]}]},\n        \"to_number\": {_func: this._functionToNumber, _signature: [{types: [TYPE_ANY]}]},\n        \"not_null\": {\n            _func: this._functionNotNull,\n            _signature: [{types: [TYPE_ANY], variadic: true}]\n        }\n    };\n  }\n\n  Runtime.prototype = {\n    callFunction: function(name, resolvedArgs) {\n      var functionEntry = this.functionTable[name];\n      if (functionEntry === undefined) {\n          throw new Error(\"Unknown function: \" + name + \"()\");\n      }\n      this._validateArgs(name, resolvedArgs, functionEntry._signature);\n      return functionEntry._func.call(this, resolvedArgs);\n    },\n\n    _validateArgs: function(name, args, signature) {\n        // Validating the args requires validating\n        // the correct arity and the correct type of each arg.\n        // If the last argument is declared as variadic, then we need\n        // a minimum number of args to be required.  Otherwise it has to\n        // be an exact amount.\n        var pluralized;\n        if (signature[signature.length - 1].variadic) {\n            if (args.length < signature.length) {\n                pluralized = signature.length === 1 ? \" argument\" : \" arguments\";\n                throw new Error(\"ArgumentError: \" + name + \"() \" +\n                                \"takes at least\" + signature.length + pluralized +\n                                \" but received \" + args.length);\n            }\n        } else if (args.length !== signature.length) {\n            pluralized = signature.length === 1 ? \" argument\" : \" arguments\";\n            throw new Error(\"ArgumentError: \" + name + \"() \" +\n                            \"takes \" + signature.length + pluralized +\n                            \" but received \" + args.length);\n        }\n        var currentSpec;\n        var actualType;\n        var typeMatched;\n        for (var i = 0; i < signature.length; i++) {\n            typeMatched = false;\n            currentSpec = signature[i].types;\n            actualType = this._getTypeName(args[i]);\n            for (var j = 0; j < currentSpec.length; j++) {\n                if (this._typeMatches(actualType, currentSpec[j], args[i])) {\n                    typeMatched = true;\n                    break;\n                }\n            }\n            if (!typeMatched) {\n                throw new Error(\"TypeError: \" + name + \"() \" +\n                                \"expected argument \" + (i + 1) +\n                                \" to be type \" + currentSpec +\n                                \" but received type \" + actualType +\n                                \" instead.\");\n            }\n        }\n    },\n\n    _typeMatches: function(actual, expected, argValue) {\n        if (expected === TYPE_ANY) {\n            return true;\n        }\n        if (expected === TYPE_ARRAY_STRING ||\n            expected === TYPE_ARRAY_NUMBER ||\n            expected === TYPE_ARRAY) {\n            // The expected type can either just be array,\n            // or it can require a specific subtype (array of numbers).\n            //\n            // The simplest case is if \"array\" with no subtype is specified.\n            if (expected === TYPE_ARRAY) {\n                return actual === TYPE_ARRAY;\n            } else if (actual === TYPE_ARRAY) {\n                // Otherwise we need to check subtypes.\n                // I think this has potential to be improved.\n                var subtype;\n                if (expected === TYPE_ARRAY_NUMBER) {\n                  subtype = TYPE_NUMBER;\n                } else if (expected === TYPE_ARRAY_STRING) {\n                  subtype = TYPE_STRING;\n                }\n                for (var i = 0; i < argValue.length; i++) {\n                    if (!this._typeMatches(\n                            this._getTypeName(argValue[i]), subtype,\n                                             argValue[i])) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        } else {\n            return actual === expected;\n        }\n    },\n    _getTypeName: function(obj) {\n        switch (Object.prototype.toString.call(obj)) {\n            case \"[object String]\":\n              return TYPE_STRING;\n            case \"[object Number]\":\n              return TYPE_NUMBER;\n            case \"[object Array]\":\n              return TYPE_ARRAY;\n            case \"[object Boolean]\":\n              return TYPE_BOOLEAN;\n            case \"[object Null]\":\n              return TYPE_NULL;\n            case \"[object Object]\":\n              // Check if it's an expref.  If it has, it's been\n              // tagged with a jmespathType attr of 'Expref';\n              if (obj.jmespathType === TOK_EXPREF) {\n                return TYPE_EXPREF;\n              } else {\n                return TYPE_OBJECT;\n              }\n        }\n    },\n\n    _functionStartsWith: function(resolvedArgs) {\n        return resolvedArgs[0].lastIndexOf(resolvedArgs[1]) === 0;\n    },\n\n    _functionEndsWith: function(resolvedArgs) {\n        var searchStr = resolvedArgs[0];\n        var suffix = resolvedArgs[1];\n        return searchStr.indexOf(suffix, searchStr.length - suffix.length) !== -1;\n    },\n\n    _functionReverse: function(resolvedArgs) {\n        var typeName = this._getTypeName(resolvedArgs[0]);\n        if (typeName === TYPE_STRING) {\n          var originalStr = resolvedArgs[0];\n          var reversedStr = \"\";\n          for (var i = originalStr.length - 1; i >= 0; i--) {\n              reversedStr += originalStr[i];\n          }\n          return reversedStr;\n        } else {\n          var reversedArray = resolvedArgs[0].slice(0);\n          reversedArray.reverse();\n          return reversedArray;\n        }\n    },\n\n    _functionAbs: function(resolvedArgs) {\n      return Math.abs(resolvedArgs[0]);\n    },\n\n    _functionCeil: function(resolvedArgs) {\n        return Math.ceil(resolvedArgs[0]);\n    },\n\n    _functionAvg: function(resolvedArgs) {\n        var sum = 0;\n        var inputArray = resolvedArgs[0];\n        for (var i = 0; i < inputArray.length; i++) {\n            sum += inputArray[i];\n        }\n        return sum / inputArray.length;\n    },\n\n    _functionContains: function(resolvedArgs) {\n        return resolvedArgs[0].indexOf(resolvedArgs[1]) >= 0;\n    },\n\n    _functionFloor: function(resolvedArgs) {\n        return Math.floor(resolvedArgs[0]);\n    },\n\n    _functionLength: function(resolvedArgs) {\n       if (!isObject(resolvedArgs[0])) {\n         return resolvedArgs[0].length;\n       } else {\n         // As far as I can tell, there's no way to get the length\n         // of an object without O(n) iteration through the object.\n         return Object.keys(resolvedArgs[0]).length;\n       }\n    },\n\n    _functionMap: function(resolvedArgs) {\n      var mapped = [];\n      var interpreter = this._interpreter;\n      var exprefNode = resolvedArgs[0];\n      var elements = resolvedArgs[1];\n      for (var i = 0; i < elements.length; i++) {\n          mapped.push(interpreter.visit(exprefNode, elements[i]));\n      }\n      return mapped;\n    },\n\n    _functionMerge: function(resolvedArgs) {\n      var merged = {};\n      for (var i = 0; i < resolvedArgs.length; i++) {\n        var current = resolvedArgs[i];\n        for (var key in current) {\n          merged[key] = current[key];\n        }\n      }\n      return merged;\n    },\n\n    _functionMax: function(resolvedArgs) {\n      if (resolvedArgs[0].length > 0) {\n        var typeName = this._getTypeName(resolvedArgs[0][0]);\n        if (typeName === TYPE_NUMBER) {\n          return Math.max.apply(Math, resolvedArgs[0]);\n        } else {\n          var elements = resolvedArgs[0];\n          var maxElement = elements[0];\n          for (var i = 1; i < elements.length; i++) {\n              if (maxElement.localeCompare(elements[i]) < 0) {\n                  maxElement = elements[i];\n              }\n          }\n          return maxElement;\n        }\n      } else {\n          return null;\n      }\n    },\n\n    _functionMin: function(resolvedArgs) {\n      if (resolvedArgs[0].length > 0) {\n        var typeName = this._getTypeName(resolvedArgs[0][0]);\n        if (typeName === TYPE_NUMBER) {\n          return Math.min.apply(Math, resolvedArgs[0]);\n        } else {\n          var elements = resolvedArgs[0];\n          var minElement = elements[0];\n          for (var i = 1; i < elements.length; i++) {\n              if (elements[i].localeCompare(minElement) < 0) {\n                  minElement = elements[i];\n              }\n          }\n          return minElement;\n        }\n      } else {\n        return null;\n      }\n    },\n\n    _functionSum: function(resolvedArgs) {\n      var sum = 0;\n      var listToSum = resolvedArgs[0];\n      for (var i = 0; i < listToSum.length; i++) {\n        sum += listToSum[i];\n      }\n      return sum;\n    },\n\n    _functionType: function(resolvedArgs) {\n        switch (this._getTypeName(resolvedArgs[0])) {\n          case TYPE_NUMBER:\n            return \"number\";\n          case TYPE_STRING:\n            return \"string\";\n          case TYPE_ARRAY:\n            return \"array\";\n          case TYPE_OBJECT:\n            return \"object\";\n          case TYPE_BOOLEAN:\n            return \"boolean\";\n          case TYPE_EXPREF:\n            return \"expref\";\n          case TYPE_NULL:\n            return \"null\";\n        }\n    },\n\n    _functionKeys: function(resolvedArgs) {\n        return Object.keys(resolvedArgs[0]);\n    },\n\n    _functionValues: function(resolvedArgs) {\n        var obj = resolvedArgs[0];\n        var keys = Object.keys(obj);\n        var values = [];\n        for (var i = 0; i < keys.length; i++) {\n            values.push(obj[keys[i]]);\n        }\n        return values;\n    },\n\n    _functionJoin: function(resolvedArgs) {\n        var joinChar = resolvedArgs[0];\n        var listJoin = resolvedArgs[1];\n        return listJoin.join(joinChar);\n    },\n\n    _functionToArray: function(resolvedArgs) {\n        if (this._getTypeName(resolvedArgs[0]) === TYPE_ARRAY) {\n            return resolvedArgs[0];\n        } else {\n            return [resolvedArgs[0]];\n        }\n    },\n\n    _functionToString: function(resolvedArgs) {\n        if (this._getTypeName(resolvedArgs[0]) === TYPE_STRING) {\n            return resolvedArgs[0];\n        } else {\n            return JSON.stringify(resolvedArgs[0]);\n        }\n    },\n\n    _functionToNumber: function(resolvedArgs) {\n        var typeName = this._getTypeName(resolvedArgs[0]);\n        var convertedValue;\n        if (typeName === TYPE_NUMBER) {\n            return resolvedArgs[0];\n        } else if (typeName === TYPE_STRING) {\n            convertedValue = +resolvedArgs[0];\n            if (!isNaN(convertedValue)) {\n                return convertedValue;\n            }\n        }\n        return null;\n    },\n\n    _functionNotNull: function(resolvedArgs) {\n        for (var i = 0; i < resolvedArgs.length; i++) {\n            if (this._getTypeName(resolvedArgs[i]) !== TYPE_NULL) {\n                return resolvedArgs[i];\n            }\n        }\n        return null;\n    },\n\n    _functionSort: function(resolvedArgs) {\n        var sortedArray = resolvedArgs[0].slice(0);\n        sortedArray.sort();\n        return sortedArray;\n    },\n\n    _functionSortBy: function(resolvedArgs) {\n        var sortedArray = resolvedArgs[0].slice(0);\n        if (sortedArray.length === 0) {\n            return sortedArray;\n        }\n        var interpreter = this._interpreter;\n        var exprefNode = resolvedArgs[1];\n        var requiredType = this._getTypeName(\n            interpreter.visit(exprefNode, sortedArray[0]));\n        if ([TYPE_NUMBER, TYPE_STRING].indexOf(requiredType) < 0) {\n            throw new Error(\"TypeError\");\n        }\n        var that = this;\n        // In order to get a stable sort out of an unstable\n        // sort algorithm, we decorate/sort/undecorate (DSU)\n        // by creating a new list of [index, element] pairs.\n        // In the cmp function, if the evaluated elements are\n        // equal, then the index will be used as the tiebreaker.\n        // After the decorated list has been sorted, it will be\n        // undecorated to extract the original elements.\n        var decorated = [];\n        for (var i = 0; i < sortedArray.length; i++) {\n          decorated.push([i, sortedArray[i]]);\n        }\n        decorated.sort(function(a, b) {\n          var exprA = interpreter.visit(exprefNode, a[1]);\n          var exprB = interpreter.visit(exprefNode, b[1]);\n          if (that._getTypeName(exprA) !== requiredType) {\n              throw new Error(\n                  \"TypeError: expected \" + requiredType + \", received \" +\n                  that._getTypeName(exprA));\n          } else if (that._getTypeName(exprB) !== requiredType) {\n              throw new Error(\n                  \"TypeError: expected \" + requiredType + \", received \" +\n                  that._getTypeName(exprB));\n          }\n          if (exprA > exprB) {\n            return 1;\n          } else if (exprA < exprB) {\n            return -1;\n          } else {\n            // If they're equal compare the items by their\n            // order to maintain relative order of equal keys\n            // (i.e. to get a stable sort).\n            return a[0] - b[0];\n          }\n        });\n        // Undecorate: extract out the original list elements.\n        for (var j = 0; j < decorated.length; j++) {\n          sortedArray[j] = decorated[j][1];\n        }\n        return sortedArray;\n    },\n\n    _functionMaxBy: function(resolvedArgs) {\n      var exprefNode = resolvedArgs[1];\n      var resolvedArray = resolvedArgs[0];\n      var keyFunction = this.createKeyFunction(exprefNode, [TYPE_NUMBER, TYPE_STRING]);\n      var maxNumber = -Infinity;\n      var maxRecord;\n      var current;\n      for (var i = 0; i < resolvedArray.length; i++) {\n        current = keyFunction(resolvedArray[i]);\n        if (current > maxNumber) {\n          maxNumber = current;\n          maxRecord = resolvedArray[i];\n        }\n      }\n      return maxRecord;\n    },\n\n    _functionMinBy: function(resolvedArgs) {\n      var exprefNode = resolvedArgs[1];\n      var resolvedArray = resolvedArgs[0];\n      var keyFunction = this.createKeyFunction(exprefNode, [TYPE_NUMBER, TYPE_STRING]);\n      var minNumber = Infinity;\n      var minRecord;\n      var current;\n      for (var i = 0; i < resolvedArray.length; i++) {\n        current = keyFunction(resolvedArray[i]);\n        if (current < minNumber) {\n          minNumber = current;\n          minRecord = resolvedArray[i];\n        }\n      }\n      return minRecord;\n    },\n\n    createKeyFunction: function(exprefNode, allowedTypes) {\n      var that = this;\n      var interpreter = this._interpreter;\n      var keyFunc = function(x) {\n        var current = interpreter.visit(exprefNode, x);\n        if (allowedTypes.indexOf(that._getTypeName(current)) < 0) {\n          var msg = \"TypeError: expected one of \" + allowedTypes +\n                    \", received \" + that._getTypeName(current);\n          throw new Error(msg);\n        }\n        return current;\n      };\n      return keyFunc;\n    }\n\n  };\n\n  function compile(stream) {\n    var parser = new Parser();\n    var ast = parser.parse(stream);\n    return ast;\n  }\n\n  function tokenize(stream) {\n      var lexer = new Lexer();\n      return lexer.tokenize(stream);\n  }\n\n  function search(data, expression) {\n      var parser = new Parser();\n      // This needs to be improved.  Both the interpreter and runtime depend on\n      // each other.  The runtime needs the interpreter to support exprefs.\n      // There's likely a clean way to avoid the cyclic dependency.\n      var runtime = new Runtime();\n      var interpreter = new TreeInterpreter(runtime);\n      runtime._interpreter = interpreter;\n      var node = parser.parse(expression);\n      return interpreter.search(node, data);\n  }\n\n  exports.tokenize = tokenize;\n  exports.compile = compile;\n  exports.search = search;\n  exports.strictDeepEqual = strictDeepEqual;\n})(typeof exports === \"undefined\" ? this.jmespath = {} : exports);\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['kinesis'] = {};\nAWS.Kinesis = Service.defineService('kinesis', ['2013-12-02']);\nObject.defineProperty(apiLoader.services['kinesis'], '2013-12-02', {\n  get: function get() {\n    var model = require('../apis/kinesis-2013-12-02.min.json');\n    model.paginators = require('../apis/kinesis-2013-12-02.paginators.json').pagination;\n    model.waiters = require('../apis/kinesis-2013-12-02.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.Kinesis;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['firehose'] = {};\nAWS.Firehose = Service.defineService('firehose', ['2015-08-04']);\nObject.defineProperty(apiLoader.services['firehose'], '2015-08-04', {\n  get: function get() {\n    var model = require('../apis/firehose-2015-08-04.min.json');\n    model.paginators = require('../apis/firehose-2015-08-04.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.Firehose;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['personalizeevents'] = {};\nAWS.PersonalizeEvents = Service.defineService('personalizeevents', ['2018-03-22']);\nObject.defineProperty(apiLoader.services['personalizeevents'], '2018-03-22', {\n  get: function get() {\n    var model = require('../apis/personalize-events-2018-03-22.min.json');\n    model.paginators = require('../apis/personalize-events-2018-03-22.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.PersonalizeEvents;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['s3'] = {};\nAWS.S3 = Service.defineService('s3', ['2006-03-01']);\nrequire('../lib/services/s3');\nObject.defineProperty(apiLoader.services['s3'], '2006-03-01', {\n  get: function get() {\n    var model = require('../apis/s3-2006-03-01.min.json');\n    model.paginators = require('../apis/s3-2006-03-01.paginators.json').pagination;\n    model.waiters = require('../apis/s3-2006-03-01.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.S3;\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"aws_amplify_ui\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"aws_amplify_ui\"] = factory();\n\telse\n\t\troot[\"aws_amplify_ui\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/*\n * Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nexport * from './Anchor.css';\nexport * from './Button.css';\nexport * from './Form.css';\nexport * from './Hint.css';\nexport * from './Input.css';\nexport * from './Nav.css';\nexport * from './PhotoPicker.css';\nexport * from './Section.css';\nexport * from './SelectInput.css';\nexport * from './Strike.css';\nexport * from './Toast.css';\nexport * from './Totp.css';\nexport * from './XR.css';\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"a\":\"Anchor__a___1_Iz8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button__button___vS7Mv\",\"signInButton\":\"Button__signInButton___3bUH-\",\"googleSignInButton\":\"Button__googleSignInButton___1YiCu\",\"signInButtonIcon\":\"Button__signInButtonIcon___ihN75\",\"auth0SignInButton\":\"Button__auth0SignInButton___znnCj\",\"facebookSignInButton\":\"Button__facebookSignInButton___34Txh\",\"amazonSignInButton\":\"Button__amazonSignInButton___2EMtl\",\"oAuthSignInButton\":\"Button__oAuthSignInButton___3UGOl\",\"signInButtonContent\":\"Button__signInButtonContent___xqTXJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formContainer\":\"Form__formContainer___1GA3x\",\"formSection\":\"Form__formSection___1PPvW\",\"formField\":\"Form__formField___38Ikl\",\"formRow\":\"Form__formRow___2mwRs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hint\":\"Hint__hint___2XngB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"Input__input___3e_bf\",\"inputLabel\":\"Input__inputLabel___3VF0S\",\"label\":\"Input__label___23sO8\",\"radio\":\"Input__radio___2hllK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navBar\":\"Nav__navBar___xtCFA\",\"navRight\":\"Nav__navRight___1QG2J\",\"nav\":\"Nav__nav___2Dx2Y\",\"navItem\":\"Nav__navItem___1LtFQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"photoPickerButton\":\"PhotoPicker__photoPickerButton___2XdVn\",\"photoPlaceholder\":\"PhotoPicker__photoPlaceholder___2JXO4\",\"photoPlaceholderIcon\":\"PhotoPicker__photoPlaceholderIcon___3Et71\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Section__container___3YYTG\",\"actionRow\":\"Section__actionRow___2LWSU\",\"sectionHeader\":\"Section__sectionHeader___2djyg\",\"sectionHeaderHint\":\"Section__sectionHeaderHint___3Wxdc\",\"sectionBody\":\"Section__sectionBody___ihqqd\",\"sectionHeaderContent\":\"Section__sectionHeaderContent___1UCqa\",\"sectionFooter\":\"Section__sectionFooter___1T54C\",\"sectionFooterPrimaryContent\":\"Section__sectionFooterPrimaryContent___2r9ZX\",\"sectionFooterSecondaryContent\":\"Section__sectionFooterSecondaryContent___Nj41Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectInput\":\"SelectInput__selectInput___3efO4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"strike\":\"Strike__strike___1XV1b\",\"strikeContent\":\"Strike__strikeContent___10gLb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toast\":\"Toast__toast___XXr3v\",\"toastClose\":\"Toast__toastClose___18lU4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"totpQrcode\":\"Totp__totpQrcode___1crLx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sumerianSceneContainer\":\"XR__sumerianSceneContainer___3nVMt\",\"sumerianScene\":\"XR__sumerianScene___2Tt7-\",\"loadingOverlay\":\"XR__loadingOverlay___IbqcI\",\"loadingContainer\":\"XR__loadingContainer___2Itxb\",\"loadingLogo\":\"XR__loadingLogo___Ub7xQ\",\"loadingSceneName\":\"XR__loadingSceneName___3__ne\",\"loadingBar\":\"XR__loadingBar___2vcke\",\"loadingBarFill\":\"XR__loadingBarFill___3M-D9\",\"sceneErrorText\":\"XR__sceneErrorText___2y0tp\",\"sceneBar\":\"XR__sceneBar___2ShrP\",\"sceneName\":\"XR__sceneName___1ApHr\",\"sceneActions\":\"XR__sceneActions___7plGs\",\"actionButton\":\"XR__actionButton___2poIM\",\"tooltip\":\"XR__tooltip___UYyhn\",\"actionIcon\":\"XR__actionIcon___2qnd2\",\"autoShowTooltip\":\"XR__autoShowTooltip___V1QH7\"};","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['translate'] = {};\nAWS.Translate = Service.defineService('translate', ['2017-07-01']);\nObject.defineProperty(apiLoader.services['translate'], '2017-07-01', {\n  get: function get() {\n    var model = require('../apis/translate-2017-07-01.min.json');\n    model.paginators = require('../apis/translate-2017-07-01.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.Translate;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['polly'] = {};\nAWS.Polly = Service.defineService('polly', ['2016-06-10']);\nrequire('../lib/services/polly');\nObject.defineProperty(apiLoader.services['polly'], '2016-06-10', {\n  get: function get() {\n    var model = require('../apis/polly-2016-06-10.min.json');\n    model.paginators = require('../apis/polly-2016-06-10.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.Polly;\n","module.exports = require('./lib/axios');","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_buffer_from_1 = require(\"@aws-sdk/util-buffer-from\");\nfunction fromUtf8(input) {\n    var buf = util_buffer_from_1.fromString(input, 'utf8');\n    return new Uint8Array(buf.buffer, buf.byteOffset, buf.byteLength / Uint8Array.BYTES_PER_ELEMENT);\n}\nexports.fromUtf8 = fromUtf8;\nfunction toUtf8(input) {\n    return util_buffer_from_1.fromArrayBuffer(input.buffer, input.byteOffset, input.byteLength)\n        .toString('utf8');\n}\nexports.toUtf8 = toUtf8;\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport API, { GRAPHQL_AUTH_MODE } from '@aws-amplify/api';\nimport Auth from '@aws-amplify/auth';\nimport Cache from '@aws-amplify/cache';\nimport { ConsoleLogger as Logger, Hub } from '@aws-amplify/core';\nimport '@aws-amplify/pubsub';\nimport Observable from 'zen-observable-ts';\nimport { buildSubscriptionGraphQLOperation, getAuthorizationRules, TransformerMutationType, } from '../utils';\nvar logger = new Logger('DataStore');\nexport var CONTROL_MSG;\n(function (CONTROL_MSG) {\n    CONTROL_MSG[\"CONNECTED\"] = \"CONNECTED\";\n})(CONTROL_MSG || (CONTROL_MSG = {}));\nexport var USER_CREDENTIALS;\n(function (USER_CREDENTIALS) {\n    USER_CREDENTIALS[USER_CREDENTIALS[\"none\"] = 0] = \"none\";\n    USER_CREDENTIALS[USER_CREDENTIALS[\"unauth\"] = 1] = \"unauth\";\n    USER_CREDENTIALS[USER_CREDENTIALS[\"auth\"] = 2] = \"auth\";\n})(USER_CREDENTIALS || (USER_CREDENTIALS = {}));\nvar SubscriptionProcessor = /** @class */ (function () {\n    function SubscriptionProcessor(schema) {\n        this.schema = schema;\n        this.typeQuery = new WeakMap();\n        this.buffer = [];\n    }\n    SubscriptionProcessor.prototype.buildSubscription = function (namespace, model, transformerMutationType, userCredentials, cognitoTokenPayload, oidcTokenPayload) {\n        var _a = this.getAuthorizationInfo(model, transformerMutationType, userCredentials, cognitoTokenPayload, oidcTokenPayload) || {}, authMode = _a.authMode, isOwner = _a.isOwner, ownerField = _a.ownerField, ownerValue = _a.ownerValue;\n        var _b = buildSubscriptionGraphQLOperation(namespace, model, transformerMutationType, isOwner, ownerField), opType = _b[0], opName = _b[1], query = _b[2];\n        return { authMode: authMode, opType: opType, opName: opName, query: query, isOwner: isOwner, ownerField: ownerField, ownerValue: ownerValue };\n    };\n    SubscriptionProcessor.prototype.getAuthorizationInfo = function (model, transformerMutationType, userCredentials, cognitoTokenPayload, oidcTokenPayload) {\n        if (cognitoTokenPayload === void 0) { cognitoTokenPayload = {}; }\n        if (oidcTokenPayload === void 0) { oidcTokenPayload = {}; }\n        var result;\n        var rules = getAuthorizationRules(model, transformerMutationType);\n        // check if has apiKey and public authorization\n        var apiKeyAuth = rules.find(function (rule) { return rule.authStrategy === 'public' && rule.provider === 'apiKey'; });\n        if (apiKeyAuth) {\n            return { authMode: GRAPHQL_AUTH_MODE.API_KEY, isOwner: false };\n        }\n        // check if has iam authorization\n        if (userCredentials === USER_CREDENTIALS.unauth ||\n            userCredentials === USER_CREDENTIALS.auth) {\n            var iamPublicAuth = rules.find(function (rule) { return rule.authStrategy === 'public' && rule.provider === 'iam'; });\n            if (iamPublicAuth) {\n                return { authMode: GRAPHQL_AUTH_MODE.AWS_IAM, isOwner: false };\n            }\n            var iamPrivateAuth = userCredentials === USER_CREDENTIALS.auth &&\n                rules.find(function (rule) { return rule.authStrategy === 'private' && rule.provider === 'iam'; });\n            if (iamPrivateAuth) {\n                return { authMode: GRAPHQL_AUTH_MODE.AWS_IAM, isOwner: false };\n            }\n        }\n        // if not check if has groups authorization and token has groupClaim allowed for cognito token\n        var groupAuthRules = rules.filter(function (rule) { return rule.authStrategy === 'group' && rule.provider === 'userPools'; });\n        var validCognitoGroup = groupAuthRules.find(function (groupAuthRule) {\n            // validate token agains groupClaim\n            var userGroups = cognitoTokenPayload[groupAuthRule.groupClaim] || [];\n            return userGroups.find(function (userGroup) {\n                return groupAuthRule.groups.find(function (group) { return group === userGroup; });\n            });\n        });\n        if (validCognitoGroup) {\n            return {\n                authMode: GRAPHQL_AUTH_MODE.AMAZON_COGNITO_USER_POOLS,\n                isOwner: false,\n            };\n        }\n        // if not check if has groups authorization and token has groupClaim allowed for oidc token\n        groupAuthRules = rules.filter(function (rule) { return rule.authStrategy === 'group' && rule.provider === 'oidc'; });\n        var validOidcGroup = groupAuthRules.find(function (groupAuthRule) {\n            // validate token agains groupClaim\n            var userGroups = oidcTokenPayload[groupAuthRule.groupClaim] || [];\n            userGroups.find(function (userGroup) {\n                return groupAuthRule.groups.find(function (group) { return group === userGroup; });\n            });\n        });\n        if (validOidcGroup) {\n            return {\n                authMode: GRAPHQL_AUTH_MODE.OPENID_CONNECT,\n                isOwner: false,\n            };\n        }\n        // check if has owner auth authorization and token ownerField for cognito token\n        var ownerAuthRules = rules.filter(function (rule) { return rule.authStrategy === 'owner' && rule.provider === 'userPools'; });\n        ownerAuthRules.forEach(function (ownerAuthRule) {\n            var ownerValue = cognitoTokenPayload[ownerAuthRule.identityClaim];\n            if (ownerValue) {\n                result = {\n                    authMode: GRAPHQL_AUTH_MODE.AMAZON_COGNITO_USER_POOLS,\n                    isOwner: true,\n                    ownerField: ownerAuthRule.ownerField,\n                    ownerValue: ownerValue,\n                };\n            }\n        });\n        if (result) {\n            return result;\n        }\n        // check if has owner auth authorization and token ownerField for oidc token\n        ownerAuthRules = rules.filter(function (rule) { return rule.authStrategy === 'owner' && rule.provider === 'oidc'; });\n        ownerAuthRules.forEach(function (ownerAuthRule) {\n            var ownerValue = oidcTokenPayload[ownerAuthRule.identityClaim];\n            if (ownerValue) {\n                result = {\n                    authMode: GRAPHQL_AUTH_MODE.OPENID_CONNECT,\n                    isOwner: true,\n                    ownerField: ownerAuthRule.ownerField,\n                    ownerValue: ownerValue,\n                };\n            }\n        });\n        if (result) {\n            return result;\n        }\n        return null;\n    };\n    SubscriptionProcessor.prototype.hubQueryCompletionListener = function (completed, variables, capsule) {\n        if (variables === capsule.payload.data.variables) {\n            completed();\n        }\n    };\n    SubscriptionProcessor.prototype.start = function () {\n        var _this = this;\n        var ctlObservable = new Observable(function (observer) {\n            var promises = [];\n            var subscriptions = [];\n            var cognitoTokenPayload, oidcTokenPayload;\n            var userCredentials = USER_CREDENTIALS.none;\n            (function () { return __awaiter(_this, void 0, void 0, function () {\n                var credentials, err_1, session, err_2, federatedInfo, token, payload, err_3;\n                var _this = this;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            _a.trys.push([0, 2, , 3]);\n                            return [4 /*yield*/, Auth.currentCredentials()];\n                        case 1:\n                            credentials = _a.sent();\n                            userCredentials = credentials.authenticated\n                                ? USER_CREDENTIALS.auth\n                                : USER_CREDENTIALS.unauth;\n                            return [3 /*break*/, 3];\n                        case 2:\n                            err_1 = _a.sent();\n                            return [3 /*break*/, 3];\n                        case 3:\n                            _a.trys.push([3, 5, , 6]);\n                            return [4 /*yield*/, Auth.currentSession()];\n                        case 4:\n                            session = _a.sent();\n                            cognitoTokenPayload = session.getIdToken().decodePayload();\n                            return [3 /*break*/, 6];\n                        case 5:\n                            err_2 = _a.sent();\n                            return [3 /*break*/, 6];\n                        case 6:\n                            _a.trys.push([6, 8, , 9]);\n                            return [4 /*yield*/, Cache.getItem('federatedInfo')];\n                        case 7:\n                            federatedInfo = _a.sent();\n                            token = federatedInfo.token;\n                            payload = token.split('.')[1];\n                            oidcTokenPayload = JSON.parse(Buffer.from(payload, 'base64').toString('utf8'));\n                            return [3 /*break*/, 9];\n                        case 8:\n                            err_3 = _a.sent();\n                            return [3 /*break*/, 9];\n                        case 9:\n                            Object.values(this.schema.namespaces).forEach(function (namespace) {\n                                Object.values(namespace.models)\n                                    .filter(function (_a) {\n                                    var syncable = _a.syncable;\n                                    return syncable;\n                                })\n                                    .forEach(function (modelDefinition) { return __awaiter(_this, void 0, void 0, function () {\n                                    var queriesMetadata;\n                                    var _this = this;\n                                    return __generator(this, function (_a) {\n                                        queriesMetadata = [\n                                            TransformerMutationType.CREATE,\n                                            TransformerMutationType.UPDATE,\n                                            TransformerMutationType.DELETE,\n                                        ].map(function (op) {\n                                            return _this.buildSubscription(namespace, modelDefinition, op, userCredentials, cognitoTokenPayload, oidcTokenPayload);\n                                        });\n                                        queriesMetadata.forEach(function (_a) {\n                                            var transformerMutationType = _a.opType, opName = _a.opName, query = _a.query, isOwner = _a.isOwner, ownerField = _a.ownerField, ownerValue = _a.ownerValue, authMode = _a.authMode;\n                                            return __awaiter(_this, void 0, void 0, function () {\n                                                var marker, queryObservable;\n                                                var _this = this;\n                                                return __generator(this, function (_b) {\n                                                    marker = {};\n                                                    if (isOwner) {\n                                                        if (!ownerValue) {\n                                                            // Check if there is an owner field, check where this error should be located\n                                                            observer.error('Owner field required, sign in is needed in order to perform this operation');\n                                                            return [2 /*return*/];\n                                                        }\n                                                        marker[ownerField] = ownerValue;\n                                                    }\n                                                    queryObservable = API.graphql(__assign({ query: query, variables: marker }, { authMode: authMode }));\n                                                    subscriptions.push(queryObservable\n                                                        .map(function (_a) {\n                                                        var value = _a.value;\n                                                        return value;\n                                                    })\n                                                        .subscribe({\n                                                        next: function (_a) {\n                                                            var data = _a.data, errors = _a.errors;\n                                                            if (Array.isArray(errors) && errors.length > 0) {\n                                                                var messages = errors.map(function (_a) {\n                                                                    var message = _a.message;\n                                                                    return message;\n                                                                });\n                                                                logger.warn(\"Skipping incoming subscription. Messages: \" + messages.join('\\n'));\n                                                                _this.drainBuffer();\n                                                                return;\n                                                            }\n                                                            var _b = opName, record = data[_b];\n                                                            _this.pushToBuffer(transformerMutationType, modelDefinition, record);\n                                                            _this.drainBuffer();\n                                                        },\n                                                        error: function (subscriptionError) {\n                                                            var _a = subscriptionError.error, _b = (_a === void 0 ? {\n                                                                errors: [],\n                                                            } : _a).errors[0], _c = (_b === void 0 ? {} : _b).message, message = _c === void 0 ? '' : _c;\n                                                            observer.error(message);\n                                                        },\n                                                    }));\n                                                    promises.push((function () { return __awaiter(_this, void 0, void 0, function () {\n                                                        var boundFunction;\n                                                        var _this = this;\n                                                        return __generator(this, function (_a) {\n                                                            switch (_a.label) {\n                                                                case 0: return [4 /*yield*/, new Promise(function (res) {\n                                                                        boundFunction = _this.hubQueryCompletionListener.bind(_this, res, marker);\n                                                                        Hub.listen('api', boundFunction);\n                                                                    })];\n                                                                case 1:\n                                                                    _a.sent();\n                                                                    Hub.remove('api', boundFunction);\n                                                                    return [2 /*return*/];\n                                                            }\n                                                        });\n                                                    }); })());\n                                                    return [2 /*return*/];\n                                                });\n                                            });\n                                        });\n                                        return [2 /*return*/];\n                                    });\n                                }); });\n                            });\n                            Promise.all(promises).then(function () { return observer.next(CONTROL_MSG.CONNECTED); });\n                            return [2 /*return*/];\n                    }\n                });\n            }); })();\n            return function () {\n                subscriptions.forEach(function (subscription) { return subscription.unsubscribe(); });\n            };\n        });\n        var dataObservable = new Observable(function (observer) {\n            _this.dataObserver = observer;\n            _this.drainBuffer();\n            return function () {\n                _this.dataObserver = null;\n            };\n        });\n        return [ctlObservable, dataObservable];\n    };\n    SubscriptionProcessor.prototype.pushToBuffer = function (transformerMutationType, modelDefinition, data) {\n        this.buffer.push([transformerMutationType, modelDefinition, data]);\n    };\n    SubscriptionProcessor.prototype.drainBuffer = function () {\n        var _this = this;\n        if (this.dataObserver) {\n            this.buffer.forEach(function (data) { return _this.dataObserver.next(data); });\n            this.buffer = [];\n        }\n    };\n    return SubscriptionProcessor;\n}());\nexport { SubscriptionProcessor };\n//# sourceMappingURL=subscription.js.map","require('./lib/browser_loader');\n\nvar AWS = require('./lib/core');\nif (typeof window !== 'undefined') window.AWS = AWS;\nif (typeof module !== 'undefined') module.exports = AWS;\nif (typeof self !== 'undefined') self.AWS = AWS;","var AWS = require('../core');\nvar util = require('../util');\nvar QueryParamSerializer = require('../query/query_param_serializer');\nvar Shape = require('../model/shape');\nvar populateHostPrefix = require('./helpers').populateHostPrefix;\n\nfunction buildRequest(req) {\n  var operation = req.service.api.operations[req.operation];\n  var httpRequest = req.httpRequest;\n  httpRequest.headers['Content-Type'] =\n    'application/x-www-form-urlencoded; charset=utf-8';\n  httpRequest.params = {\n    Version: req.service.api.apiVersion,\n    Action: operation.name\n  };\n\n  // convert the request parameters into a list of query params,\n  // e.g. Deeply.NestedParam.0.Name=value\n  var builder = new QueryParamSerializer();\n  builder.serialize(req.params, operation.input, function(name, value) {\n    httpRequest.params[name] = value;\n  });\n  httpRequest.body = util.queryParamsToString(httpRequest.params);\n\n  populateHostPrefix(req);\n}\n\nfunction extractError(resp) {\n  var data, body = resp.httpResponse.body.toString();\n  if (body.match('<UnknownOperationException')) {\n    data = {\n      Code: 'UnknownOperation',\n      Message: 'Unknown operation ' + resp.request.operation\n    };\n  } else {\n    try {\n      data = new AWS.XML.Parser().parse(body);\n    } catch (e) {\n      data = {\n        Code: resp.httpResponse.statusCode,\n        Message: resp.httpResponse.statusMessage\n      };\n    }\n  }\n\n  if (data.requestId && !resp.requestId) resp.requestId = data.requestId;\n  if (data.Errors) data = data.Errors;\n  if (data.Error) data = data.Error;\n  if (data.Code) {\n    resp.error = util.error(new Error(), {\n      code: data.Code,\n      message: data.Message\n    });\n  } else {\n    resp.error = util.error(new Error(), {\n      code: resp.httpResponse.statusCode,\n      message: null\n    });\n  }\n}\n\nfunction extractData(resp) {\n  var req = resp.request;\n  var operation = req.service.api.operations[req.operation];\n  var shape = operation.output || {};\n  var origRules = shape;\n\n  if (origRules.resultWrapper) {\n    var tmp = Shape.create({type: 'structure'});\n    tmp.members[origRules.resultWrapper] = shape;\n    tmp.memberNames = [origRules.resultWrapper];\n    util.property(shape, 'name', shape.resultWrapper);\n    shape = tmp;\n  }\n\n  var parser = new AWS.XML.Parser();\n\n  // TODO: Refactor XML Parser to parse RequestId from response.\n  if (shape && shape.members && !shape.members._XAMZRequestId) {\n    var requestIdShape = Shape.create(\n      { type: 'string' },\n      { api: { protocol: 'query' } },\n      'requestId'\n    );\n    shape.members._XAMZRequestId = requestIdShape;\n  }\n\n  var data = parser.parse(resp.httpResponse.body.toString(), shape);\n  resp.requestId = data._XAMZRequestId || data.requestId;\n\n  if (data._XAMZRequestId) delete data._XAMZRequestId;\n\n  if (origRules.resultWrapper) {\n    if (data[origRules.resultWrapper]) {\n      util.update(data, data[origRules.resultWrapper]);\n      delete data[origRules.resultWrapper];\n    }\n  }\n\n  resp.data = data;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  buildRequest: buildRequest,\n  extractError: extractError,\n  extractData: extractData\n};\n","var memoizedProperty = require('../util').memoizedProperty;\n\nfunction memoize(name, value, factory, nameTr) {\n  memoizedProperty(this, nameTr(name), function() {\n    return factory(name, value);\n  });\n}\n\nfunction Collection(iterable, options, factory, nameTr, callback) {\n  nameTr = nameTr || String;\n  var self = this;\n\n  for (var id in iterable) {\n    if (Object.prototype.hasOwnProperty.call(iterable, id)) {\n      memoize.call(self, id, iterable[id], factory, nameTr);\n      if (callback) callback(id, iterable[id]);\n    }\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = Collection;\n","var util = require('../util');\nvar Rest = require('./rest');\nvar Json = require('./json');\nvar JsonBuilder = require('../json/builder');\nvar JsonParser = require('../json/parser');\n\nfunction populateBody(req) {\n  var builder = new JsonBuilder();\n  var input = req.service.api.operations[req.operation].input;\n\n  if (input.payload) {\n    var params = {};\n    var payloadShape = input.members[input.payload];\n    params = req.params[input.payload];\n    if (params === undefined) return;\n\n    if (payloadShape.type === 'structure') {\n      req.httpRequest.body = builder.build(params, payloadShape);\n      applyContentTypeHeader(req);\n    } else { // non-JSON payload\n      req.httpRequest.body = params;\n      if (payloadShape.type === 'binary' || payloadShape.isStreaming) {\n        applyContentTypeHeader(req, true);\n      }\n    }\n  } else {\n    var body = builder.build(req.params, input);\n    if (body !== '{}' || req.httpRequest.method !== 'GET') { //don't send empty body for GET method\n      req.httpRequest.body = body;\n    }\n    applyContentTypeHeader(req);\n  }\n}\n\nfunction applyContentTypeHeader(req, isBinary) {\n  var operation = req.service.api.operations[req.operation];\n  var input = operation.input;\n\n  if (!req.httpRequest.headers['Content-Type']) {\n    var type = isBinary ? 'binary/octet-stream' : 'application/json';\n    req.httpRequest.headers['Content-Type'] = type;\n  }\n}\n\nfunction buildRequest(req) {\n  Rest.buildRequest(req);\n\n  // never send body payload on HEAD/DELETE\n  if (['HEAD', 'DELETE'].indexOf(req.httpRequest.method) < 0) {\n    populateBody(req);\n  }\n}\n\nfunction extractError(resp) {\n  Json.extractError(resp);\n}\n\nfunction extractData(resp) {\n  Rest.extractData(resp);\n\n  var req = resp.request;\n  var operation = req.service.api.operations[req.operation];\n  var rules = req.service.api.operations[req.operation].output || {};\n  var parser;\n  var hasEventOutput = operation.hasEventOutput;\n\n  if (rules.payload) {\n    var payloadMember = rules.members[rules.payload];\n    var body = resp.httpResponse.body;\n    if (payloadMember.isEventStream) {\n      parser = new JsonParser();\n      resp.data[payload] = util.createEventStream(\n        AWS.HttpClient.streamsApiVersion === 2 ? resp.httpResponse.stream : body,\n        parser,\n        payloadMember\n      );\n    } else if (payloadMember.type === 'structure' || payloadMember.type === 'list') {\n      var parser = new JsonParser();\n      resp.data[rules.payload] = parser.parse(body, payloadMember);\n    } else if (payloadMember.type === 'binary' || payloadMember.isStreaming) {\n      resp.data[rules.payload] = body;\n    } else {\n      resp.data[rules.payload] = payloadMember.toType(body);\n    }\n  } else {\n    var data = resp.data;\n    Json.extractData(resp);\n    resp.data = util.merge(data, resp.data);\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  buildRequest: buildRequest,\n  extractError: extractError,\n  extractData: extractData\n};\n","var AWS = require('../core');\nvar util = require('../util');\nvar Rest = require('./rest');\n\nfunction populateBody(req) {\n  var input = req.service.api.operations[req.operation].input;\n  var builder = new AWS.XML.Builder();\n  var params = req.params;\n\n  var payload = input.payload;\n  if (payload) {\n    var payloadMember = input.members[payload];\n    params = params[payload];\n    if (params === undefined) return;\n\n    if (payloadMember.type === 'structure') {\n      var rootElement = payloadMember.name;\n      req.httpRequest.body = builder.toXML(params, payloadMember, rootElement, true);\n    } else { // non-xml payload\n      req.httpRequest.body = params;\n    }\n  } else {\n    req.httpRequest.body = builder.toXML(params, input, input.name ||\n      input.shape || util.string.upperFirst(req.operation) + 'Request');\n  }\n}\n\nfunction buildRequest(req) {\n  Rest.buildRequest(req);\n\n  // never send body payload on GET/HEAD\n  if (['GET', 'HEAD'].indexOf(req.httpRequest.method) < 0) {\n    populateBody(req);\n  }\n}\n\nfunction extractError(resp) {\n  Rest.extractError(resp);\n\n  var data;\n  try {\n    data = new AWS.XML.Parser().parse(resp.httpResponse.body.toString());\n  } catch (e) {\n    data = {\n      Code: resp.httpResponse.statusCode,\n      Message: resp.httpResponse.statusMessage\n    };\n  }\n\n  if (data.Errors) data = data.Errors;\n  if (data.Error) data = data.Error;\n  if (data.Code) {\n    resp.error = util.error(new Error(), {\n      code: data.Code,\n      message: data.Message\n    });\n  } else {\n    resp.error = util.error(new Error(), {\n      code: resp.httpResponse.statusCode,\n      message: null\n    });\n  }\n}\n\nfunction extractData(resp) {\n  Rest.extractData(resp);\n\n  var parser;\n  var req = resp.request;\n  var body = resp.httpResponse.body;\n  var operation = req.service.api.operations[req.operation];\n  var output = operation.output;\n\n  var hasEventOutput = operation.hasEventOutput;\n\n  var payload = output.payload;\n  if (payload) {\n    var payloadMember = output.members[payload];\n    if (payloadMember.isEventStream) {\n      parser = new AWS.XML.Parser();\n      resp.data[payload] = util.createEventStream(\n        AWS.HttpClient.streamsApiVersion === 2 ? resp.httpResponse.stream : resp.httpResponse.body,\n        parser,\n        payloadMember\n      );\n    } else if (payloadMember.type === 'structure') {\n      parser = new AWS.XML.Parser();\n      resp.data[payload] = parser.parse(body.toString(), payloadMember);\n    } else if (payloadMember.type === 'binary' || payloadMember.isStreaming) {\n      resp.data[payload] = body;\n    } else {\n      resp.data[payload] = payloadMember.toType(body);\n    }\n  } else if (body.length > 0) {\n    parser = new AWS.XML.Parser();\n    var data = parser.parse(body.toString(), output);\n    util.update(resp.data, data);\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  buildRequest: buildRequest,\n  extractError: extractError,\n  extractData: extractData\n};\n","var Collection = require('./collection');\nvar Operation = require('./operation');\nvar Shape = require('./shape');\nvar Paginator = require('./paginator');\nvar ResourceWaiter = require('./resource_waiter');\n\nvar util = require('../util');\nvar property = util.property;\nvar memoizedProperty = util.memoizedProperty;\n\nfunction Api(api, options) {\n  var self = this;\n  api = api || {};\n  options = options || {};\n  options.api = this;\n\n  api.metadata = api.metadata || {};\n\n  property(this, 'isApi', true, false);\n  property(this, 'apiVersion', api.metadata.apiVersion);\n  property(this, 'endpointPrefix', api.metadata.endpointPrefix);\n  property(this, 'signingName', api.metadata.signingName);\n  property(this, 'globalEndpoint', api.metadata.globalEndpoint);\n  property(this, 'signatureVersion', api.metadata.signatureVersion);\n  property(this, 'jsonVersion', api.metadata.jsonVersion);\n  property(this, 'targetPrefix', api.metadata.targetPrefix);\n  property(this, 'protocol', api.metadata.protocol);\n  property(this, 'timestampFormat', api.metadata.timestampFormat);\n  property(this, 'xmlNamespaceUri', api.metadata.xmlNamespace);\n  property(this, 'abbreviation', api.metadata.serviceAbbreviation);\n  property(this, 'fullName', api.metadata.serviceFullName);\n  property(this, 'serviceId', api.metadata.serviceId);\n\n  memoizedProperty(this, 'className', function() {\n    var name = api.metadata.serviceAbbreviation || api.metadata.serviceFullName;\n    if (!name) return null;\n\n    name = name.replace(/^Amazon|AWS\\s*|\\(.*|\\s+|\\W+/g, '');\n    if (name === 'ElasticLoadBalancing') name = 'ELB';\n    return name;\n  });\n\n  function addEndpointOperation(name, operation) {\n    if (operation.endpointoperation === true) {\n      property(self, 'endpointOperation', util.string.lowerFirst(name));\n    }\n  }\n\n  property(this, 'operations', new Collection(api.operations, options, function(name, operation) {\n    return new Operation(name, operation, options);\n  }, util.string.lowerFirst, addEndpointOperation));\n\n  property(this, 'shapes', new Collection(api.shapes, options, function(name, shape) {\n    return Shape.create(shape, options);\n  }));\n\n  property(this, 'paginators', new Collection(api.paginators, options, function(name, paginator) {\n    return new Paginator(name, paginator, options);\n  }));\n\n  property(this, 'waiters', new Collection(api.waiters, options, function(name, waiter) {\n    return new ResourceWaiter(name, waiter, options);\n  }, util.string.lowerFirst));\n\n  if (options.documentation) {\n    property(this, 'documentation', api.documentation);\n    property(this, 'documentationUrl', api.documentationUrl);\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = Api;\n","var Shape = require('./shape');\n\nvar util = require('../util');\nvar property = util.property;\nvar memoizedProperty = util.memoizedProperty;\n\nfunction Operation(name, operation, options) {\n  var self = this;\n  options = options || {};\n\n  property(this, 'name', operation.name || name);\n  property(this, 'api', options.api, false);\n\n  operation.http = operation.http || {};\n  property(this, 'endpoint', operation.endpoint);\n  property(this, 'httpMethod', operation.http.method || 'POST');\n  property(this, 'httpPath', operation.http.requestUri || '/');\n  property(this, 'authtype', operation.authtype || '');\n  property(\n    this,\n    'endpointDiscoveryRequired',\n    operation.endpointdiscovery ?\n      (operation.endpointdiscovery.required ? 'REQUIRED' : 'OPTIONAL') :\n    'NULL'\n  );\n\n  memoizedProperty(this, 'input', function() {\n    if (!operation.input) {\n      return new Shape.create({type: 'structure'}, options);\n    }\n    return Shape.create(operation.input, options);\n  });\n\n  memoizedProperty(this, 'output', function() {\n    if (!operation.output) {\n      return new Shape.create({type: 'structure'}, options);\n    }\n    return Shape.create(operation.output, options);\n  });\n\n  memoizedProperty(this, 'errors', function() {\n    var list = [];\n    if (!operation.errors) return null;\n\n    for (var i = 0; i < operation.errors.length; i++) {\n      list.push(Shape.create(operation.errors[i], options));\n    }\n\n    return list;\n  });\n\n  memoizedProperty(this, 'paginator', function() {\n    return options.api.paginators[name];\n  });\n\n  if (options.documentation) {\n    property(this, 'documentation', operation.documentation);\n    property(this, 'documentationUrl', operation.documentationUrl);\n  }\n\n  // idempotentMembers only tracks top-level input shapes\n  memoizedProperty(this, 'idempotentMembers', function() {\n    var idempotentMembers = [];\n    var input = self.input;\n    var members = input.members;\n    if (!input.members) {\n      return idempotentMembers;\n    }\n    for (var name in members) {\n      if (!members.hasOwnProperty(name)) {\n        continue;\n      }\n      if (members[name].isIdempotent === true) {\n        idempotentMembers.push(name);\n      }\n    }\n    return idempotentMembers;\n  });\n\n  memoizedProperty(this, 'hasEventOutput', function() {\n    var output = self.output;\n    return hasEventStream(output);\n  });\n}\n\nfunction hasEventStream(topLevelShape) {\n  var members = topLevelShape.members;\n  var payload = topLevelShape.payload;\n\n  if (!topLevelShape.members) {\n    return false;\n  }\n\n  if (payload) {\n    var payloadMember = members[payload];\n    return payloadMember.isEventStream;\n  }\n\n  // check if any member is an event stream\n  for (var name in members) {\n    if (!members.hasOwnProperty(name)) {\n      if (members[name].isEventStream === true) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\n/**\n * @api private\n */\nmodule.exports = Operation;\n","var property = require('../util').property;\n\nfunction Paginator(name, paginator) {\n  property(this, 'inputToken', paginator.input_token);\n  property(this, 'limitKey', paginator.limit_key);\n  property(this, 'moreResults', paginator.more_results);\n  property(this, 'outputToken', paginator.output_token);\n  property(this, 'resultKey', paginator.result_key);\n}\n\n/**\n * @api private\n */\nmodule.exports = Paginator;\n","var util = require('../util');\nvar property = util.property;\n\nfunction ResourceWaiter(name, waiter, options) {\n  options = options || {};\n  property(this, 'name', name);\n  property(this, 'api', options.api, false);\n\n  if (waiter.operation) {\n    property(this, 'operation', util.string.lowerFirst(waiter.operation));\n  }\n\n  var self = this;\n  var keys = [\n    'type',\n    'description',\n    'delay',\n    'maxAttempts',\n    'acceptors'\n  ];\n\n  keys.forEach(function(key) {\n    var value = waiter[key];\n    if (value) {\n      property(self, key, value);\n    }\n  });\n}\n\n/**\n * @api private\n */\nmodule.exports = ResourceWaiter;\n","var AWS = require('./core');\n\n/**\n * @api private\n * @!method on(eventName, callback)\n *   Registers an event listener callback for the event given by `eventName`.\n *   Parameters passed to the callback function depend on the individual event\n *   being triggered. See the event documentation for those parameters.\n *\n *   @param eventName [String] the event name to register the listener for\n *   @param callback [Function] the listener callback function\n *   @param toHead [Boolean] attach the listener callback to the head of callback array if set to true.\n *     Default to be false.\n *   @return [AWS.SequentialExecutor] the same object for chaining\n */\nAWS.SequentialExecutor = AWS.util.inherit({\n\n  constructor: function SequentialExecutor() {\n    this._events = {};\n  },\n\n  /**\n   * @api private\n   */\n  listeners: function listeners(eventName) {\n    return this._events[eventName] ? this._events[eventName].slice(0) : [];\n  },\n\n  on: function on(eventName, listener, toHead) {\n    if (this._events[eventName]) {\n      toHead ?\n        this._events[eventName].unshift(listener) :\n        this._events[eventName].push(listener);\n    } else {\n      this._events[eventName] = [listener];\n    }\n    return this;\n  },\n\n  onAsync: function onAsync(eventName, listener, toHead) {\n    listener._isAsync = true;\n    return this.on(eventName, listener, toHead);\n  },\n\n  removeListener: function removeListener(eventName, listener) {\n    var listeners = this._events[eventName];\n    if (listeners) {\n      var length = listeners.length;\n      var position = -1;\n      for (var i = 0; i < length; ++i) {\n        if (listeners[i] === listener) {\n          position = i;\n        }\n      }\n      if (position > -1) {\n        listeners.splice(position, 1);\n      }\n    }\n    return this;\n  },\n\n  removeAllListeners: function removeAllListeners(eventName) {\n    if (eventName) {\n      delete this._events[eventName];\n    } else {\n      this._events = {};\n    }\n    return this;\n  },\n\n  /**\n   * @api private\n   */\n  emit: function emit(eventName, eventArgs, doneCallback) {\n    if (!doneCallback) doneCallback = function() { };\n    var listeners = this.listeners(eventName);\n    var count = listeners.length;\n    this.callListeners(listeners, eventArgs, doneCallback);\n    return count > 0;\n  },\n\n  /**\n   * @api private\n   */\n  callListeners: function callListeners(listeners, args, doneCallback, prevError) {\n    var self = this;\n    var error = prevError || null;\n\n    function callNextListener(err) {\n      if (err) {\n        error = AWS.util.error(error || new Error(), err);\n        if (self._haltHandlersOnError) {\n          return doneCallback.call(self, error);\n        }\n      }\n      self.callListeners(listeners, args, doneCallback, error);\n    }\n\n    while (listeners.length > 0) {\n      var listener = listeners.shift();\n      if (listener._isAsync) { // asynchronous listener\n        listener.apply(self, args.concat([callNextListener]));\n        return; // stop here, callNextListener will continue\n      } else { // synchronous listener\n        try {\n          listener.apply(self, args);\n        } catch (err) {\n          error = AWS.util.error(error || new Error(), err);\n        }\n        if (error && self._haltHandlersOnError) {\n          doneCallback.call(self, error);\n          return;\n        }\n      }\n    }\n    doneCallback.call(self, error);\n  },\n\n  /**\n   * Adds or copies a set of listeners from another list of\n   * listeners or SequentialExecutor object.\n   *\n   * @param listeners [map<String,Array<Function>>, AWS.SequentialExecutor]\n   *   a list of events and callbacks, or an event emitter object\n   *   containing listeners to add to this emitter object.\n   * @return [AWS.SequentialExecutor] the emitter object, for chaining.\n   * @example Adding listeners from a map of listeners\n   *   emitter.addListeners({\n   *     event1: [function() { ... }, function() { ... }],\n   *     event2: [function() { ... }]\n   *   });\n   *   emitter.emit('event1'); // emitter has event1\n   *   emitter.emit('event2'); // emitter has event2\n   * @example Adding listeners from another emitter object\n   *   var emitter1 = new AWS.SequentialExecutor();\n   *   emitter1.on('event1', function() { ... });\n   *   emitter1.on('event2', function() { ... });\n   *   var emitter2 = new AWS.SequentialExecutor();\n   *   emitter2.addListeners(emitter1);\n   *   emitter2.emit('event1'); // emitter2 has event1\n   *   emitter2.emit('event2'); // emitter2 has event2\n   */\n  addListeners: function addListeners(listeners) {\n    var self = this;\n\n    // extract listeners if parameter is an SequentialExecutor object\n    if (listeners._events) listeners = listeners._events;\n\n    AWS.util.each(listeners, function(event, callbacks) {\n      if (typeof callbacks === 'function') callbacks = [callbacks];\n      AWS.util.arrayEach(callbacks, function(callback) {\n        self.on(event, callback);\n      });\n    });\n\n    return self;\n  },\n\n  /**\n   * Registers an event with {on} and saves the callback handle function\n   * as a property on the emitter object using a given `name`.\n   *\n   * @param name [String] the property name to set on this object containing\n   *   the callback function handle so that the listener can be removed in\n   *   the future.\n   * @param (see on)\n   * @return (see on)\n   * @example Adding a named listener DATA_CALLBACK\n   *   var listener = function() { doSomething(); };\n   *   emitter.addNamedListener('DATA_CALLBACK', 'data', listener);\n   *\n   *   // the following prints: true\n   *   console.log(emitter.DATA_CALLBACK == listener);\n   */\n  addNamedListener: function addNamedListener(name, eventName, callback, toHead) {\n    this[name] = callback;\n    this.addListener(eventName, callback, toHead);\n    return this;\n  },\n\n  /**\n   * @api private\n   */\n  addNamedAsyncListener: function addNamedAsyncListener(name, eventName, callback, toHead) {\n    callback._isAsync = true;\n    return this.addNamedListener(name, eventName, callback, toHead);\n  },\n\n  /**\n   * Helper method to add a set of named listeners using\n   * {addNamedListener}. The callback contains a parameter\n   * with a handle to the `addNamedListener` method.\n   *\n   * @callback callback function(add)\n   *   The callback function is called immediately in order to provide\n   *   the `add` function to the block. This simplifies the addition of\n   *   a large group of named listeners.\n   *   @param add [Function] the {addNamedListener} function to call\n   *     when registering listeners.\n   * @example Adding a set of named listeners\n   *   emitter.addNamedListeners(function(add) {\n   *     add('DATA_CALLBACK', 'data', function() { ... });\n   *     add('OTHER', 'otherEvent', function() { ... });\n   *     add('LAST', 'lastEvent', function() { ... });\n   *   });\n   *\n   *   // these properties are now set:\n   *   emitter.DATA_CALLBACK;\n   *   emitter.OTHER;\n   *   emitter.LAST;\n   */\n  addNamedListeners: function addNamedListeners(callback) {\n    var self = this;\n    callback(\n      function() {\n        self.addNamedListener.apply(self, arguments);\n      },\n      function() {\n        self.addNamedAsyncListener.apply(self, arguments);\n      }\n    );\n    return this;\n  }\n});\n\n/**\n * {on} is the prefered method.\n * @api private\n */\nAWS.SequentialExecutor.prototype.addListener = AWS.SequentialExecutor.prototype.on;\n\n/**\n * @api private\n */\nmodule.exports = AWS.SequentialExecutor;\n","var AWS = require('./core');\n\n/**\n * Represents your AWS security credentials, specifically the\n * {accessKeyId}, {secretAccessKey}, and optional {sessionToken}.\n * Creating a `Credentials` object allows you to pass around your\n * security information to configuration and service objects.\n *\n * Note that this class typically does not need to be constructed manually,\n * as the {AWS.Config} and {AWS.Service} classes both accept simple\n * options hashes with the three keys. These structures will be converted\n * into Credentials objects automatically.\n *\n * ## Expiring and Refreshing Credentials\n *\n * Occasionally credentials can expire in the middle of a long-running\n * application. In this case, the SDK will automatically attempt to\n * refresh the credentials from the storage location if the Credentials\n * class implements the {refresh} method.\n *\n * If you are implementing a credential storage location, you\n * will want to create a subclass of the `Credentials` class and\n * override the {refresh} method. This method allows credentials to be\n * retrieved from the backing store, be it a file system, database, or\n * some network storage. The method should reset the credential attributes\n * on the object.\n *\n * @!attribute expired\n *   @return [Boolean] whether the credentials have been expired and\n *     require a refresh. Used in conjunction with {expireTime}.\n * @!attribute expireTime\n *   @return [Date] a time when credentials should be considered expired. Used\n *     in conjunction with {expired}.\n * @!attribute accessKeyId\n *   @return [String] the AWS access key ID\n * @!attribute secretAccessKey\n *   @return [String] the AWS secret access key\n * @!attribute sessionToken\n *   @return [String] an optional AWS session token\n */\nAWS.Credentials = AWS.util.inherit({\n  /**\n   * A credentials object can be created using positional arguments or an options\n   * hash.\n   *\n   * @overload AWS.Credentials(accessKeyId, secretAccessKey, sessionToken=null)\n   *   Creates a Credentials object with a given set of credential information\n   *   as positional arguments.\n   *   @param accessKeyId [String] the AWS access key ID\n   *   @param secretAccessKey [String] the AWS secret access key\n   *   @param sessionToken [String] the optional AWS session token\n   *   @example Create a credentials object with AWS credentials\n   *     var creds = new AWS.Credentials('akid', 'secret', 'session');\n   * @overload AWS.Credentials(options)\n   *   Creates a Credentials object with a given set of credential information\n   *   as an options hash.\n   *   @option options accessKeyId [String] the AWS access key ID\n   *   @option options secretAccessKey [String] the AWS secret access key\n   *   @option options sessionToken [String] the optional AWS session token\n   *   @example Create a credentials object with AWS credentials\n   *     var creds = new AWS.Credentials({\n   *       accessKeyId: 'akid', secretAccessKey: 'secret', sessionToken: 'session'\n   *     });\n   */\n  constructor: function Credentials() {\n    // hide secretAccessKey from being displayed with util.inspect\n    AWS.util.hideProperties(this, ['secretAccessKey']);\n\n    this.expired = false;\n    this.expireTime = null;\n    this.refreshCallbacks = [];\n    if (arguments.length === 1 && typeof arguments[0] === 'object') {\n      var creds = arguments[0].credentials || arguments[0];\n      this.accessKeyId = creds.accessKeyId;\n      this.secretAccessKey = creds.secretAccessKey;\n      this.sessionToken = creds.sessionToken;\n    } else {\n      this.accessKeyId = arguments[0];\n      this.secretAccessKey = arguments[1];\n      this.sessionToken = arguments[2];\n    }\n  },\n\n  /**\n   * @return [Integer] the number of seconds before {expireTime} during which\n   *   the credentials will be considered expired.\n   */\n  expiryWindow: 15,\n\n  /**\n   * @return [Boolean] whether the credentials object should call {refresh}\n   * @note Subclasses should override this method to provide custom refresh\n   *   logic.\n   */\n  needsRefresh: function needsRefresh() {\n    var currentTime = AWS.util.date.getDate().getTime();\n    var adjustedTime = new Date(currentTime + this.expiryWindow * 1000);\n\n    if (this.expireTime && adjustedTime > this.expireTime) {\n      return true;\n    } else {\n      return this.expired || !this.accessKeyId || !this.secretAccessKey;\n    }\n  },\n\n  /**\n   * Gets the existing credentials, refreshing them if they are not yet loaded\n   * or have expired. Users should call this method before using {refresh},\n   * as this will not attempt to reload credentials when they are already\n   * loaded into the object.\n   *\n   * @callback callback function(err)\n   *   When this callback is called with no error, it means either credentials\n   *   do not need to be refreshed or refreshed credentials information has\n   *   been loaded into the object (as the `accessKeyId`, `secretAccessKey`,\n   *   and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   */\n  get: function get(callback) {\n    var self = this;\n    if (this.needsRefresh()) {\n      this.refresh(function(err) {\n        if (!err) self.expired = false; // reset expired flag\n        if (callback) callback(err);\n      });\n    } else if (callback) {\n      callback();\n    }\n  },\n\n  /**\n   * @!method  getPromise()\n   *   Returns a 'thenable' promise.\n   *   Gets the existing credentials, refreshing them if they are not yet loaded\n   *   or have expired. Users should call this method before using {refresh},\n   *   as this will not attempt to reload credentials when they are already\n   *   loaded into the object.\n   *\n   *   Two callbacks can be provided to the `then` method on the returned promise.\n   *   The first callback will be called if the promise is fulfilled, and the second\n   *   callback will be called if the promise is rejected.\n   *   @callback fulfilledCallback function()\n   *     Called if the promise is fulfilled. When this callback is called, it\n   *     means either credentials do not need to be refreshed or refreshed\n   *     credentials information has been loaded into the object (as the\n   *     `accessKeyId`, `secretAccessKey`, and `sessionToken` properties).\n   *   @callback rejectedCallback function(err)\n   *     Called if the promise is rejected.\n   *     @param err [Error] if an error occurred, this value will be filled\n   *   @return [Promise] A promise that represents the state of the `get` call.\n   *   @example Calling the `getPromise` method.\n   *     var promise = credProvider.getPromise();\n   *     promise.then(function() { ... }, function(err) { ... });\n   */\n\n  /**\n   * @!method  refreshPromise()\n   *   Returns a 'thenable' promise.\n   *   Refreshes the credentials. Users should call {get} before attempting\n   *   to forcibly refresh credentials.\n   *\n   *   Two callbacks can be provided to the `then` method on the returned promise.\n   *   The first callback will be called if the promise is fulfilled, and the second\n   *   callback will be called if the promise is rejected.\n   *   @callback fulfilledCallback function()\n   *     Called if the promise is fulfilled. When this callback is called, it\n   *     means refreshed credentials information has been loaded into the object\n   *     (as the `accessKeyId`, `secretAccessKey`, and `sessionToken` properties).\n   *   @callback rejectedCallback function(err)\n   *     Called if the promise is rejected.\n   *     @param err [Error] if an error occurred, this value will be filled\n   *   @return [Promise] A promise that represents the state of the `refresh` call.\n   *   @example Calling the `refreshPromise` method.\n   *     var promise = credProvider.refreshPromise();\n   *     promise.then(function() { ... }, function(err) { ... });\n   */\n\n  /**\n   * Refreshes the credentials. Users should call {get} before attempting\n   * to forcibly refresh credentials.\n   *\n   * @callback callback function(err)\n   *   When this callback is called with no error, it means refreshed\n   *   credentials information has been loaded into the object (as the\n   *   `accessKeyId`, `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @note Subclasses should override this class to reset the\n   *   {accessKeyId}, {secretAccessKey} and optional {sessionToken}\n   *   on the credentials object and then call the callback with\n   *   any error information.\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    this.expired = false;\n    callback();\n  },\n\n  /**\n   * @api private\n   * @param callback\n   */\n  coalesceRefresh: function coalesceRefresh(callback, sync) {\n    var self = this;\n    if (self.refreshCallbacks.push(callback) === 1) {\n      self.load(function onLoad(err) {\n        AWS.util.arrayEach(self.refreshCallbacks, function(callback) {\n          if (sync) {\n            callback(err);\n          } else {\n            // callback could throw, so defer to ensure all callbacks are notified\n            AWS.util.defer(function () {\n              callback(err);\n            });\n          }\n        });\n        self.refreshCallbacks.length = 0;\n      });\n    }\n  },\n\n  /**\n   * @api private\n   * @param callback\n   */\n  load: function load(callback) {\n    callback();\n  }\n});\n\n/**\n * @api private\n */\nAWS.Credentials.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n  this.prototype.getPromise = AWS.util.promisifyMethod('get', PromiseDependency);\n  this.prototype.refreshPromise = AWS.util.promisifyMethod('refresh', PromiseDependency);\n};\n\n/**\n * @api private\n */\nAWS.Credentials.deletePromisesFromClass = function deletePromisesFromClass() {\n  delete this.prototype.getPromise;\n  delete this.prototype.refreshPromise;\n};\n\nAWS.util.addPromises(AWS.Credentials);\n","var AWS = require('../core');\n\n/**\n * Creates a credential provider chain that searches for AWS credentials\n * in a list of credential providers specified by the {providers} property.\n *\n * By default, the chain will use the {defaultProviders} to resolve credentials.\n * These providers will look in the environment using the\n * {AWS.EnvironmentCredentials} class with the 'AWS' and 'AMAZON' prefixes.\n *\n * ## Setting Providers\n *\n * Each provider in the {providers} list should be a function that returns\n * a {AWS.Credentials} object, or a hardcoded credentials object. The function\n * form allows for delayed execution of the credential construction.\n *\n * ## Resolving Credentials from a Chain\n *\n * Call {resolve} to return the first valid credential object that can be\n * loaded by the provider chain.\n *\n * For example, to resolve a chain with a custom provider that checks a file\n * on disk after the set of {defaultProviders}:\n *\n * ```javascript\n * var diskProvider = new AWS.FileSystemCredentials('./creds.json');\n * var chain = new AWS.CredentialProviderChain();\n * chain.providers.push(diskProvider);\n * chain.resolve();\n * ```\n *\n * The above code will return the `diskProvider` object if the\n * file contains credentials and the `defaultProviders` do not contain\n * any credential settings.\n *\n * @!attribute providers\n *   @return [Array<AWS.Credentials, Function>]\n *     a list of credentials objects or functions that return credentials\n *     objects. If the provider is a function, the function will be\n *     executed lazily when the provider needs to be checked for valid\n *     credentials. By default, this object will be set to the\n *     {defaultProviders}.\n *   @see defaultProviders\n */\nAWS.CredentialProviderChain = AWS.util.inherit(AWS.Credentials, {\n\n  /**\n   * Creates a new CredentialProviderChain with a default set of providers\n   * specified by {defaultProviders}.\n   */\n  constructor: function CredentialProviderChain(providers) {\n    if (providers) {\n      this.providers = providers;\n    } else {\n      this.providers = AWS.CredentialProviderChain.defaultProviders.slice(0);\n    }\n    this.resolveCallbacks = [];\n  },\n\n  /**\n   * @!method  resolvePromise()\n   *   Returns a 'thenable' promise.\n   *   Resolves the provider chain by searching for the first set of\n   *   credentials in {providers}.\n   *\n   *   Two callbacks can be provided to the `then` method on the returned promise.\n   *   The first callback will be called if the promise is fulfilled, and the second\n   *   callback will be called if the promise is rejected.\n   *   @callback fulfilledCallback function(credentials)\n   *     Called if the promise is fulfilled and the provider resolves the chain\n   *     to a credentials object\n   *     @param credentials [AWS.Credentials] the credentials object resolved\n   *       by the provider chain.\n   *   @callback rejectedCallback function(error)\n   *     Called if the promise is rejected.\n   *     @param err [Error] the error object returned if no credentials are found.\n   *   @return [Promise] A promise that represents the state of the `resolve` method call.\n   *   @example Calling the `resolvePromise` method.\n   *     var promise = chain.resolvePromise();\n   *     promise.then(function(credentials) { ... }, function(err) { ... });\n   */\n\n  /**\n   * Resolves the provider chain by searching for the first set of\n   * credentials in {providers}.\n   *\n   * @callback callback function(err, credentials)\n   *   Called when the provider resolves the chain to a credentials object\n   *   or null if no credentials can be found.\n   *\n   *   @param err [Error] the error object returned if no credentials are\n   *     found.\n   *   @param credentials [AWS.Credentials] the credentials object resolved\n   *     by the provider chain.\n   * @return [AWS.CredentialProviderChain] the provider, for chaining.\n   */\n  resolve: function resolve(callback) {\n    var self = this;\n    if (self.providers.length === 0) {\n      callback(new Error('No providers'));\n      return self;\n    }\n\n    if (self.resolveCallbacks.push(callback) === 1) {\n      var index = 0;\n      var providers = self.providers.slice(0);\n\n      function resolveNext(err, creds) {\n        if ((!err && creds) || index === providers.length) {\n          AWS.util.arrayEach(self.resolveCallbacks, function (callback) {\n            callback(err, creds);\n          });\n          self.resolveCallbacks.length = 0;\n          return;\n        }\n\n        var provider = providers[index++];\n        if (typeof provider === 'function') {\n          creds = provider.call();\n        } else {\n          creds = provider;\n        }\n\n        if (creds.get) {\n          creds.get(function (getErr) {\n            resolveNext(getErr, getErr ? null : creds);\n          });\n        } else {\n          resolveNext(null, creds);\n        }\n      }\n\n      resolveNext();\n    }\n\n    return self;\n  }\n});\n\n/**\n * The default set of providers used by a vanilla CredentialProviderChain.\n *\n * In the browser:\n *\n * ```javascript\n * AWS.CredentialProviderChain.defaultProviders = []\n * ```\n *\n * In Node.js:\n *\n * ```javascript\n * AWS.CredentialProviderChain.defaultProviders = [\n *   function () { return new AWS.EnvironmentCredentials('AWS'); },\n *   function () { return new AWS.EnvironmentCredentials('AMAZON'); },\n *   function () { return new AWS.SharedIniFileCredentials(); },\n *   function () { return new AWS.ECSCredentials(); },\n *   function () { return new AWS.ProcessCredentials(); },\n *   function () { return new AWS.EC2MetadataCredentials() }\n * ]\n * ```\n */\nAWS.CredentialProviderChain.defaultProviders = [];\n\n/**\n * @api private\n */\nAWS.CredentialProviderChain.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n  this.prototype.resolvePromise = AWS.util.promisifyMethod('resolve', PromiseDependency);\n};\n\n/**\n * @api private\n */\nAWS.CredentialProviderChain.deletePromisesFromClass = function deletePromisesFromClass() {\n  delete this.prototype.resolvePromise;\n};\n\nAWS.util.addPromises(AWS.CredentialProviderChain);\n","var AWS = require('./core');\nvar inherit = AWS.util.inherit;\n\n/**\n * The endpoint that a service will talk to, for example,\n * `'https://ec2.ap-southeast-1.amazonaws.com'`. If\n * you need to override an endpoint for a service, you can\n * set the endpoint on a service by passing the endpoint\n * object with the `endpoint` option key:\n *\n * ```javascript\n * var ep = new AWS.Endpoint('awsproxy.example.com');\n * var s3 = new AWS.S3({endpoint: ep});\n * s3.service.endpoint.hostname == 'awsproxy.example.com'\n * ```\n *\n * Note that if you do not specify a protocol, the protocol will\n * be selected based on your current {AWS.config} configuration.\n *\n * @!attribute protocol\n *   @return [String] the protocol (http or https) of the endpoint\n *     URL\n * @!attribute hostname\n *   @return [String] the host portion of the endpoint, e.g.,\n *     example.com\n * @!attribute host\n *   @return [String] the host portion of the endpoint including\n *     the port, e.g., example.com:80\n * @!attribute port\n *   @return [Integer] the port of the endpoint\n * @!attribute href\n *   @return [String] the full URL of the endpoint\n */\nAWS.Endpoint = inherit({\n\n  /**\n   * @overload Endpoint(endpoint)\n   *   Constructs a new endpoint given an endpoint URL. If the\n   *   URL omits a protocol (http or https), the default protocol\n   *   set in the global {AWS.config} will be used.\n   *   @param endpoint [String] the URL to construct an endpoint from\n   */\n  constructor: function Endpoint(endpoint, config) {\n    AWS.util.hideProperties(this, ['slashes', 'auth', 'hash', 'search', 'query']);\n\n    if (typeof endpoint === 'undefined' || endpoint === null) {\n      throw new Error('Invalid endpoint: ' + endpoint);\n    } else if (typeof endpoint !== 'string') {\n      return AWS.util.copy(endpoint);\n    }\n\n    if (!endpoint.match(/^http/)) {\n      var useSSL = config && config.sslEnabled !== undefined ?\n        config.sslEnabled : AWS.config.sslEnabled;\n      endpoint = (useSSL ? 'https' : 'http') + '://' + endpoint;\n    }\n\n    AWS.util.update(this, AWS.util.urlParse(endpoint));\n\n    // Ensure the port property is set as an integer\n    if (this.port) {\n      this.port = parseInt(this.port, 10);\n    } else {\n      this.port = this.protocol === 'https:' ? 443 : 80;\n    }\n  }\n\n});\n\n/**\n * The low level HTTP request object, encapsulating all HTTP header\n * and body data sent by a service request.\n *\n * @!attribute method\n *   @return [String] the HTTP method of the request\n * @!attribute path\n *   @return [String] the path portion of the URI, e.g.,\n *     \"/list/?start=5&num=10\"\n * @!attribute headers\n *   @return [map<String,String>]\n *     a map of header keys and their respective values\n * @!attribute body\n *   @return [String] the request body payload\n * @!attribute endpoint\n *   @return [AWS.Endpoint] the endpoint for the request\n * @!attribute region\n *   @api private\n *   @return [String] the region, for signing purposes only.\n */\nAWS.HttpRequest = inherit({\n\n  /**\n   * @api private\n   */\n  constructor: function HttpRequest(endpoint, region) {\n    endpoint = new AWS.Endpoint(endpoint);\n    this.method = 'POST';\n    this.path = endpoint.path || '/';\n    this.headers = {};\n    this.body = '';\n    this.endpoint = endpoint;\n    this.region = region;\n    this._userAgent = '';\n    this.setUserAgent();\n  },\n\n  /**\n   * @api private\n   */\n  setUserAgent: function setUserAgent() {\n    this._userAgent = this.headers[this.getUserAgentHeaderName()] = AWS.util.userAgent();\n  },\n\n  getUserAgentHeaderName: function getUserAgentHeaderName() {\n    var prefix = AWS.util.isBrowser() ? 'X-Amz-' : '';\n    return prefix + 'User-Agent';\n  },\n\n  /**\n   * @api private\n   */\n  appendToUserAgent: function appendToUserAgent(agentPartial) {\n    if (typeof agentPartial === 'string' && agentPartial) {\n      this._userAgent += ' ' + agentPartial;\n    }\n    this.headers[this.getUserAgentHeaderName()] = this._userAgent;\n  },\n\n  /**\n   * @api private\n   */\n  getUserAgent: function getUserAgent() {\n    return this._userAgent;\n  },\n\n  /**\n   * @return [String] the part of the {path} excluding the\n   *   query string\n   */\n  pathname: function pathname() {\n    return this.path.split('?', 1)[0];\n  },\n\n  /**\n   * @return [String] the query string portion of the {path}\n   */\n  search: function search() {\n    var query = this.path.split('?', 2)[1];\n    if (query) {\n      query = AWS.util.queryStringParse(query);\n      return AWS.util.queryParamsToString(query);\n    }\n    return '';\n  },\n\n  /**\n   * @api private\n   * update httpRequest endpoint with endpoint string\n   */\n  updateEndpoint: function updateEndpoint(endpointStr) {\n    var newEndpoint = new AWS.Endpoint(endpointStr);\n    this.endpoint = newEndpoint;\n    this.path = newEndpoint.path || '/';\n  }\n});\n\n/**\n * The low level HTTP response object, encapsulating all HTTP header\n * and body data returned from the request.\n *\n * @!attribute statusCode\n *   @return [Integer] the HTTP status code of the response (e.g., 200, 404)\n * @!attribute headers\n *   @return [map<String,String>]\n *      a map of response header keys and their respective values\n * @!attribute body\n *   @return [String] the response body payload\n * @!attribute [r] streaming\n *   @return [Boolean] whether this response is being streamed at a low-level.\n *     Defaults to `false` (buffered reads). Do not modify this manually, use\n *     {createUnbufferedStream} to convert the stream to unbuffered mode\n *     instead.\n */\nAWS.HttpResponse = inherit({\n\n  /**\n   * @api private\n   */\n  constructor: function HttpResponse() {\n    this.statusCode = undefined;\n    this.headers = {};\n    this.body = undefined;\n    this.streaming = false;\n    this.stream = null;\n  },\n\n  /**\n   * Disables buffering on the HTTP response and returns the stream for reading.\n   * @return [Stream, XMLHttpRequest, null] the underlying stream object.\n   *   Use this object to directly read data off of the stream.\n   * @note This object is only available after the {AWS.Request~httpHeaders}\n   *   event has fired. This method must be called prior to\n   *   {AWS.Request~httpData}.\n   * @example Taking control of a stream\n   *   request.on('httpHeaders', function(statusCode, headers) {\n   *     if (statusCode < 300) {\n   *       if (headers.etag === 'xyz') {\n   *         // pipe the stream, disabling buffering\n   *         var stream = this.response.httpResponse.createUnbufferedStream();\n   *         stream.pipe(process.stdout);\n   *       } else { // abort this request and set a better error message\n   *         this.abort();\n   *         this.response.error = new Error('Invalid ETag');\n   *       }\n   *     }\n   *   }).send(console.log);\n   */\n  createUnbufferedStream: function createUnbufferedStream() {\n    this.streaming = true;\n    return this.stream;\n  }\n});\n\n\nAWS.HttpClient = inherit({});\n\n/**\n * @api private\n */\nAWS.HttpClient.getInstance = function getInstance() {\n  if (this.singleton === undefined) {\n    this.singleton = new this();\n  }\n  return this.singleton;\n};\n","var AWS = require('../core');\nvar inherit = AWS.util.inherit;\n\n/**\n * @api private\n */\nAWS.Signers.V3 = inherit(AWS.Signers.RequestSigner, {\n  addAuthorization: function addAuthorization(credentials, date) {\n\n    var datetime = AWS.util.date.rfc822(date);\n\n    this.request.headers['X-Amz-Date'] = datetime;\n\n    if (credentials.sessionToken) {\n      this.request.headers['x-amz-security-token'] = credentials.sessionToken;\n    }\n\n    this.request.headers['X-Amzn-Authorization'] =\n      this.authorization(credentials, datetime);\n\n  },\n\n  authorization: function authorization(credentials) {\n    return 'AWS3 ' +\n      'AWSAccessKeyId=' + credentials.accessKeyId + ',' +\n      'Algorithm=HmacSHA256,' +\n      'SignedHeaders=' + this.signedHeaders() + ',' +\n      'Signature=' + this.signature(credentials);\n  },\n\n  signedHeaders: function signedHeaders() {\n    var headers = [];\n    AWS.util.arrayEach(this.headersToSign(), function iterator(h) {\n      headers.push(h.toLowerCase());\n    });\n    return headers.sort().join(';');\n  },\n\n  canonicalHeaders: function canonicalHeaders() {\n    var headers = this.request.headers;\n    var parts = [];\n    AWS.util.arrayEach(this.headersToSign(), function iterator(h) {\n      parts.push(h.toLowerCase().trim() + ':' + String(headers[h]).trim());\n    });\n    return parts.sort().join('\\n') + '\\n';\n  },\n\n  headersToSign: function headersToSign() {\n    var headers = [];\n    AWS.util.each(this.request.headers, function iterator(k) {\n      if (k === 'Host' || k === 'Content-Encoding' || k.match(/^X-Amz/i)) {\n        headers.push(k);\n      }\n    });\n    return headers;\n  },\n\n  signature: function signature(credentials) {\n    return AWS.util.crypto.hmac(credentials.secretAccessKey, this.stringToSign(), 'base64');\n  },\n\n  stringToSign: function stringToSign() {\n    var parts = [];\n    parts.push(this.request.method);\n    parts.push('/');\n    parts.push('');\n    parts.push(this.canonicalHeaders());\n    parts.push(this.request.body);\n    return AWS.util.crypto.sha256(parts.join('\\n'));\n  }\n\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.Signers.V3;\n","var AWS = require('../core');\n\n/**\n * @api private\n */\nvar cachedSecret = {};\n\n/**\n * @api private\n */\nvar cacheQueue = [];\n\n/**\n * @api private\n */\nvar maxCacheEntries = 50;\n\n/**\n * @api private\n */\nvar v4Identifier = 'aws4_request';\n\n/**\n * @api private\n */\nmodule.exports = {\n  /**\n   * @api private\n   *\n   * @param date [String]\n   * @param region [String]\n   * @param serviceName [String]\n   * @return [String]\n   */\n  createScope: function createScope(date, region, serviceName) {\n    return [\n      date.substr(0, 8),\n      region,\n      serviceName,\n      v4Identifier\n    ].join('/');\n  },\n\n  /**\n   * @api private\n   *\n   * @param credentials [Credentials]\n   * @param date [String]\n   * @param region [String]\n   * @param service [String]\n   * @param shouldCache [Boolean]\n   * @return [String]\n   */\n  getSigningKey: function getSigningKey(\n    credentials,\n    date,\n    region,\n    service,\n    shouldCache\n  ) {\n    var credsIdentifier = AWS.util.crypto\n      .hmac(credentials.secretAccessKey, credentials.accessKeyId, 'base64');\n    var cacheKey = [credsIdentifier, date, region, service].join('_');\n    shouldCache = shouldCache !== false;\n    if (shouldCache && (cacheKey in cachedSecret)) {\n      return cachedSecret[cacheKey];\n    }\n\n    var kDate = AWS.util.crypto.hmac(\n      'AWS4' + credentials.secretAccessKey,\n      date,\n      'buffer'\n    );\n    var kRegion = AWS.util.crypto.hmac(kDate, region, 'buffer');\n    var kService = AWS.util.crypto.hmac(kRegion, service, 'buffer');\n\n    var signingKey = AWS.util.crypto.hmac(kService, v4Identifier, 'buffer');\n    if (shouldCache) {\n      cachedSecret[cacheKey] = signingKey;\n      cacheQueue.push(cacheKey);\n      if (cacheQueue.length > maxCacheEntries) {\n        // remove the oldest entry (not the least recently used)\n        delete cachedSecret[cacheQueue.shift()];\n      }\n    }\n\n    return signingKey;\n  },\n\n  /**\n   * @api private\n   *\n   * Empties the derived signing key cache. Made available for testing purposes\n   * only.\n   */\n  emptyCache: function emptyCache() {\n    cachedSecret = {};\n    cacheQueue = [];\n  }\n};\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['cognitoidentity'] = {};\nAWS.CognitoIdentity = Service.defineService('cognitoidentity', ['2014-06-30']);\nrequire('../lib/services/cognitoidentity');\nObject.defineProperty(apiLoader.services['cognitoidentity'], '2014-06-30', {\n  get: function get() {\n    var model = require('../apis/cognito-identity-2014-06-30.min.json');\n    model.paginators = require('../apis/cognito-identity-2014-06-30.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.CognitoIdentity;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Check if typed arrays are supported\n\t    if (typeof ArrayBuffer != 'function') {\n\t        return;\n\t    }\n\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\n\t    // Reference original init\n\t    var superInit = WordArray.init;\n\n\t    // Augment WordArray.init to handle typed arrays\n\t    var subInit = WordArray.init = function (typedArray) {\n\t        // Convert buffers to uint8\n\t        if (typedArray instanceof ArrayBuffer) {\n\t            typedArray = new Uint8Array(typedArray);\n\t        }\n\n\t        // Convert other array views to uint8\n\t        if (\n\t            typedArray instanceof Int8Array ||\n\t            (typeof Uint8ClampedArray !== \"undefined\" && typedArray instanceof Uint8ClampedArray) ||\n\t            typedArray instanceof Int16Array ||\n\t            typedArray instanceof Uint16Array ||\n\t            typedArray instanceof Int32Array ||\n\t            typedArray instanceof Uint32Array ||\n\t            typedArray instanceof Float32Array ||\n\t            typedArray instanceof Float64Array\n\t        ) {\n\t            typedArray = new Uint8Array(typedArray.buffer, typedArray.byteOffset, typedArray.byteLength);\n\t        }\n\n\t        // Handle Uint8Array\n\t        if (typedArray instanceof Uint8Array) {\n\t            // Shortcut\n\t            var typedArrayByteLength = typedArray.byteLength;\n\n\t            // Extract bytes\n\t            var words = [];\n\t            for (var i = 0; i < typedArrayByteLength; i++) {\n\t                words[i >>> 2] |= typedArray[i] << (24 - (i % 4) * 8);\n\t            }\n\n\t            // Initialize this word array\n\t            superInit.call(this, words, typedArrayByteLength);\n\t        } else {\n\t            // Else call normal init\n\t            superInit.apply(this, arguments);\n\t        }\n\t    };\n\n\t    subInit.prototype = WordArray;\n\t}());\n\n\n\treturn CryptoJS.lib.WordArray;\n\n}));","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildURL = require('./../helpers/buildURL');\nvar buildFullPath = require('../core/buildFullPath');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(createError(timeoutErrorMessage, config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = require('./../helpers/cookies');\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  var valueFromConfig2Keys = ['url', 'method', 'params', 'data'];\n  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy'];\n  var defaultToConfig2Keys = [\n    'baseURL', 'url', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress',\n    'maxContentLength', 'validateStatus', 'maxRedirects', 'httpAgent',\n    'httpsAgent', 'cancelToken', 'socketPath'\n  ];\n\n  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    }\n  });\n\n  utils.forEach(mergeDeepPropertiesKeys, function mergeDeepProperties(prop) {\n    if (utils.isObject(config2[prop])) {\n      config[prop] = utils.deepMerge(config1[prop], config2[prop]);\n    } else if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (utils.isObject(config1[prop])) {\n      config[prop] = utils.deepMerge(config1[prop]);\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  var axiosKeys = valueFromConfig2Keys\n    .concat(mergeDeepPropertiesKeys)\n    .concat(defaultToConfig2Keys);\n\n  var otherKeys = Object\n    .keys(config2)\n    .filter(function filterAxiosKeys(key) {\n      return axiosKeys.indexOf(key) === -1;\n    });\n\n  utils.forEach(otherKeys, function otherKeysDefaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  return config;\n};\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { AbstractConvertPredictionsProvider } from '../types/Providers/AbstractConvertPredictionsProvider';\nimport * as Translate from 'aws-sdk/clients/translate';\nimport * as TextToSpeech from 'aws-sdk/clients/polly';\nimport { isBytesSource, } from '../types';\nimport { Credentials, ConsoleLogger as Logger, Signer, } from '@aws-amplify/core';\nimport { EventStreamMarshaller, } from '@aws-sdk/eventstream-marshaller';\nimport { fromUtf8, toUtf8 } from '@aws-sdk/util-utf8-node';\nvar logger = new Logger('AmazonAIConvertPredictionsProvider');\nvar eventBuilder = new EventStreamMarshaller(toUtf8, fromUtf8);\nvar AmazonAIConvertPredictionsProvider = /** @class */ (function (_super) {\n    __extends(AmazonAIConvertPredictionsProvider, _super);\n    function AmazonAIConvertPredictionsProvider() {\n        var _this = _super.call(this) || this;\n        _this.inputSampleRate = 44100;\n        _this.outputSampleRate = 16000;\n        return _this;\n    }\n    AmazonAIConvertPredictionsProvider.prototype.getProviderName = function () {\n        return 'AmazonAIConvertPredictionsProvider';\n    };\n    AmazonAIConvertPredictionsProvider.prototype.translateText = function (input) {\n        var _this = this;\n        logger.debug('Starting translation');\n        return new Promise(function (res, rej) { return __awaiter(_this, void 0, void 0, function () {\n            var _a, _b, _c, _d, _e, sourceLanguage, _f, targetLanguage, _g, region, credentials, sourceLanguageCode, targetLanguageCode;\n            return __generator(this, function (_h) {\n                switch (_h.label) {\n                    case 0:\n                        _a = this._config.translateText, _b = _a === void 0 ? {} : _a, _c = _b.defaults, _d = _c === void 0 ? {} : _c, _e = _d.sourceLanguage, sourceLanguage = _e === void 0 ? '' : _e, _f = _d.targetLanguage, targetLanguage = _f === void 0 ? '' : _f, _g = _b.region, region = _g === void 0 ? '' : _g;\n                        if (!region) {\n                            return [2 /*return*/, rej('region not configured for transcription')];\n                        }\n                        return [4 /*yield*/, Credentials.get()];\n                    case 1:\n                        credentials = _h.sent();\n                        if (!credentials) {\n                            return [2 /*return*/, rej('No credentials')];\n                        }\n                        sourceLanguageCode = input.translateText.source.language || sourceLanguage;\n                        targetLanguageCode = input.translateText.targetLanguage || targetLanguage;\n                        if (!sourceLanguageCode || !targetLanguageCode) {\n                            return [2 /*return*/, rej('Please provide both source and target language')];\n                        }\n                        this.translate = new Translate({ region: region, credentials: credentials });\n                        this.translate.translateText({\n                            SourceLanguageCode: sourceLanguageCode,\n                            TargetLanguageCode: targetLanguageCode,\n                            Text: input.translateText.source.text,\n                        }, function (err, data) {\n                            logger.debug({ err: err, data: data });\n                            if (err) {\n                                return rej(err);\n                            }\n                            else {\n                                return res({\n                                    text: data.TranslatedText,\n                                    language: data.TargetLanguageCode,\n                                });\n                            }\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        }); });\n    };\n    AmazonAIConvertPredictionsProvider.prototype.convertTextToSpeech = function (input) {\n        var _this = this;\n        return new Promise(function (res, rej) { return __awaiter(_this, void 0, void 0, function () {\n            var credentials, _a, _b, _c, _d, VoiceId, _e, region, voiceId;\n            return __generator(this, function (_f) {\n                switch (_f.label) {\n                    case 0: return [4 /*yield*/, Credentials.get()];\n                    case 1:\n                        credentials = _f.sent();\n                        if (!credentials) {\n                            return [2 /*return*/, rej('No credentials')];\n                        }\n                        _a = this._config.speechGenerator, _b = _a === void 0 ? {} : _a, _c = _b.defaults, _d = (_c === void 0 ? {} : _c).VoiceId, VoiceId = _d === void 0 ? '' : _d, _e = _b.region, region = _e === void 0 ? '' : _e;\n                        if (!input.textToSpeech.source) {\n                            return [2 /*return*/, rej('Source needs to be provided in the input')];\n                        }\n                        voiceId = input.textToSpeech.voiceId || VoiceId;\n                        if (!region) {\n                            return [2 /*return*/, rej('Region was undefined. Did you enable speech generator using amplify CLI?')];\n                        }\n                        if (!voiceId) {\n                            return [2 /*return*/, rej('VoiceId was undefined.')];\n                        }\n                        this.textToSpeech = new TextToSpeech({ region: region, credentials: credentials });\n                        this.textToSpeech.synthesizeSpeech({\n                            OutputFormat: 'mp3',\n                            Text: input.textToSpeech.source.text,\n                            VoiceId: voiceId,\n                            TextType: 'text',\n                            SampleRate: '24000',\n                        }, function (err, data) {\n                            if (err) {\n                                rej(err);\n                            }\n                            else {\n                                var blob = new Blob([data.AudioStream], {\n                                    type: data.ContentType,\n                                });\n                                var url = URL.createObjectURL(blob);\n                                res({\n                                    speech: { url: url },\n                                    audioStream: data.AudioStream.buffer,\n                                    text: input.textToSpeech.source.text,\n                                });\n                            }\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        }); });\n    };\n    AmazonAIConvertPredictionsProvider.prototype.convertSpeechToText = function (input) {\n        var _this = this;\n        return new Promise(function (res, rej) { return __awaiter(_this, void 0, void 0, function () {\n            var credentials, _a, _b, _c, _d, languageCode, _e, region, _f, source, _g, language, connection, fullText, err_1, err_2;\n            return __generator(this, function (_h) {\n                switch (_h.label) {\n                    case 0:\n                        _h.trys.push([0, 7, , 8]);\n                        logger.debug('starting transcription..');\n                        return [4 /*yield*/, Credentials.get()];\n                    case 1:\n                        credentials = _h.sent();\n                        if (!credentials) {\n                            return [2 /*return*/, rej('No credentials')];\n                        }\n                        _a = this._config.transcription, _b = _a === void 0 ? {} : _a, _c = _b.defaults, _d = (_c === void 0 ? {} : _c).language, languageCode = _d === void 0 ? '' : _d, _e = _b.region, region = _e === void 0 ? '' : _e;\n                        if (!region) {\n                            return [2 /*return*/, rej('region not configured for transcription')];\n                        }\n                        if (!languageCode) {\n                            return [2 /*return*/, rej('languageCode not configured or provided for transcription')];\n                        }\n                        _f = input.transcription, source = _f.source, _g = _f.language, language = _g === void 0 ? languageCode : _g;\n                        if (!isBytesSource(source)) return [3 /*break*/, 6];\n                        return [4 /*yield*/, this.openConnectionWithTranscribe({\n                                credentials: credentials,\n                                region: region,\n                                languageCode: language,\n                            })];\n                    case 2:\n                        connection = _h.sent();\n                        _h.label = 3;\n                    case 3:\n                        _h.trys.push([3, 5, , 6]);\n                        return [4 /*yield*/, this.sendDataToTranscribe({\n                                connection: connection,\n                                raw: source.bytes,\n                            })];\n                    case 4:\n                        fullText = _h.sent();\n                        return [2 /*return*/, res({\n                                transcription: {\n                                    fullText: fullText,\n                                },\n                            })];\n                    case 5:\n                        err_1 = _h.sent();\n                        rej(err_1);\n                        return [3 /*break*/, 6];\n                    case 6: return [2 /*return*/, rej('Source types other than byte source are not supported.')];\n                    case 7:\n                        err_2 = _h.sent();\n                        return [2 /*return*/, rej(err_2.name + ': ' + err_2.message)];\n                    case 8: return [2 /*return*/];\n                }\n            });\n        }); });\n    };\n    AmazonAIConvertPredictionsProvider.serializeDataFromTranscribe = function (message) {\n        var decodedMessage = '';\n        var transcribeMessage = eventBuilder.unmarshall(Buffer.from(message.data));\n        var transcribeMessageJson = JSON.parse(String.fromCharCode.apply(String, transcribeMessage.body));\n        if (transcribeMessage.headers[':message-type'].value === 'exception') {\n            logger.debug('exception', JSON.stringify(transcribeMessageJson.Message, null, 2));\n            throw new Error(transcribeMessageJson.Message);\n        }\n        else if (transcribeMessage.headers[':message-type'].value === 'event') {\n            if (transcribeMessageJson.Transcript.Results.length > 0) {\n                if (transcribeMessageJson.Transcript.Results[0].Alternatives.length > 0) {\n                    if (transcribeMessageJson.Transcript.Results[0].Alternatives[0]\n                        .Transcript.length > 0) {\n                        if (transcribeMessageJson.Transcript.Results[0].IsPartial === false) {\n                            decodedMessage =\n                                transcribeMessageJson.Transcript.Results[0].Alternatives[0]\n                                    .Transcript + '\\n';\n                            logger.debug({ decodedMessage: decodedMessage });\n                        }\n                        else {\n                            logger.debug({\n                                transcript: transcribeMessageJson.Transcript.Results[0].Alternatives[0],\n                            });\n                        }\n                    }\n                }\n            }\n        }\n        return decodedMessage;\n    };\n    AmazonAIConvertPredictionsProvider.prototype.sendDataToTranscribe = function (_a) {\n        var _this = this;\n        var connection = _a.connection, raw = _a.raw;\n        return new Promise(function (res, rej) {\n            var fullText = '';\n            connection.onmessage = function (message) {\n                try {\n                    var decodedMessage = AmazonAIConvertPredictionsProvider.serializeDataFromTranscribe(message);\n                    if (decodedMessage) {\n                        fullText += decodedMessage + ' ';\n                    }\n                }\n                catch (err) {\n                    logger.debug(err);\n                    rej(err.message);\n                }\n            };\n            connection.onerror = function (errorEvent) {\n                logger.debug({ errorEvent: errorEvent });\n                rej('failed to transcribe, network error');\n            };\n            connection.onclose = function (closeEvent) {\n                logger.debug({ closeEvent: closeEvent });\n                return res(fullText.trim());\n            };\n            logger.debug({ raw: raw });\n            if (Array.isArray(raw)) {\n                for (var i = 0; i < raw.length - 1023; i += 1024) {\n                    var data = raw.slice(i, i + 1024);\n                    _this.sendEncodedDataToTranscribe(connection, data);\n                }\n            }\n            // sending end frame\n            var endFrameEventMessage = _this.getAudioEventMessage(Buffer.from([]));\n            var endFrameBinary = eventBuilder.marshall(endFrameEventMessage);\n            connection.send(endFrameBinary);\n        });\n    };\n    AmazonAIConvertPredictionsProvider.prototype.sendEncodedDataToTranscribe = function (connection, data) {\n        var downsampledBuffer = this.downsampleBuffer({ buffer: data });\n        var pcmEncodedBuffer = this.pcmEncode(downsampledBuffer);\n        var audioEventMessage = this.getAudioEventMessage(Buffer.from(pcmEncodedBuffer));\n        var binary = eventBuilder.marshall(audioEventMessage);\n        connection.send(binary);\n    };\n    AmazonAIConvertPredictionsProvider.prototype.getAudioEventMessage = function (buffer) {\n        var audioEventMessage = {\n            body: buffer,\n            headers: {\n                ':message-type': {\n                    type: 'string',\n                    value: 'event',\n                },\n                ':event-type': {\n                    type: 'string',\n                    value: 'AudioEvent',\n                },\n            },\n        };\n        return audioEventMessage;\n    };\n    AmazonAIConvertPredictionsProvider.prototype.pcmEncode = function (input) {\n        var offset = 0;\n        var buffer = new ArrayBuffer(input.length * 2);\n        var view = new DataView(buffer);\n        for (var i = 0; i < input.length; i++, offset += 2) {\n            var s = Math.max(-1, Math.min(1, input[i]));\n            view.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7fff, true);\n        }\n        return buffer;\n    };\n    AmazonAIConvertPredictionsProvider.prototype.downsampleBuffer = function (_a) {\n        var buffer = _a.buffer;\n        if (this.outputSampleRate === this.inputSampleRate) {\n            return buffer;\n        }\n        var sampleRateRatio = this.inputSampleRate / this.outputSampleRate;\n        var newLength = Math.round(buffer.length / sampleRateRatio);\n        var result = new Float32Array(newLength);\n        var offsetResult = 0;\n        var offsetBuffer = 0;\n        while (offsetResult < result.length) {\n            var nextOffsetBuffer = Math.round((offsetResult + 1) * sampleRateRatio);\n            var accum = 0, count = 0;\n            for (var i = offsetBuffer; i < nextOffsetBuffer && i < buffer.length; i++) {\n                accum += buffer[i];\n                count++;\n            }\n            result[offsetResult] = accum / count;\n            offsetResult++;\n            offsetBuffer = nextOffsetBuffer;\n        }\n        return result;\n    };\n    AmazonAIConvertPredictionsProvider.prototype.openConnectionWithTranscribe = function (_a) {\n        var _this = this;\n        var userCredentials = _a.credentials, region = _a.region, languageCode = _a.languageCode;\n        return new Promise(function (res, rej) { return __awaiter(_this, void 0, void 0, function () {\n            var access_key, secret_key, session_token, credentials, signedUrl, connection;\n            return __generator(this, function (_a) {\n                access_key = userCredentials.accessKeyId, secret_key = userCredentials.secretAccessKey, session_token = userCredentials.sessionToken;\n                credentials = {\n                    access_key: access_key,\n                    secret_key: secret_key,\n                    session_token: session_token,\n                };\n                signedUrl = this.generateTranscribeUrl({\n                    credentials: credentials,\n                    region: region,\n                    languageCode: languageCode,\n                });\n                logger.debug('connecting...');\n                connection = new WebSocket(signedUrl);\n                connection.binaryType = 'arraybuffer';\n                connection.onopen = function () {\n                    logger.debug('connected');\n                    res(connection);\n                };\n                return [2 /*return*/];\n            });\n        }); });\n    };\n    AmazonAIConvertPredictionsProvider.prototype.generateTranscribeUrl = function (_a) {\n        var credentials = _a.credentials, region = _a.region, languageCode = _a.languageCode;\n        var url = [\n            \"wss://transcribestreaming.\" + region + \".amazonaws.com:8443\",\n            '/stream-transcription-websocket?',\n            \"media-encoding=pcm&\",\n            \"sample-rate=16000&\",\n            \"language-code=\" + languageCode,\n        ].join('');\n        var signedUrl = Signer.signUrl(url, credentials, { region: region, service: 'transcribe' }, 300);\n        return signedUrl;\n    };\n    return AmazonAIConvertPredictionsProvider;\n}(AbstractConvertPredictionsProvider));\nexport default AmazonAIConvertPredictionsProvider;\n//# sourceMappingURL=AmazonAIConvertPredictionsProvider.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar SHORT_TO_HEX = {};\nvar HEX_TO_SHORT = {};\nfor (var i = 0; i < 256; i++) {\n    var encodedByte = i.toString(16).toLowerCase();\n    if (encodedByte.length === 1) {\n        encodedByte = \"0\" + encodedByte;\n    }\n    SHORT_TO_HEX[i] = encodedByte;\n    HEX_TO_SHORT[encodedByte] = i;\n}\n/**\n * Converts a hexadecimal encoded string to a Uint8Array of bytes.\n *\n * @param encoded The hexadecimal encoded string\n */\nfunction fromHex(encoded) {\n    if (encoded.length % 2 !== 0) {\n        throw new Error('Hex encoded strings must have an even number length');\n    }\n    var out = new Uint8Array(encoded.length / 2);\n    for (var i = 0; i < encoded.length; i += 2) {\n        var encodedByte = encoded.substr(i, 2).toLowerCase();\n        if (encodedByte in HEX_TO_SHORT) {\n            out[i / 2] = HEX_TO_SHORT[encodedByte];\n        }\n        else {\n            throw new Error(\"Cannot decode unrecognized sequence \" + encodedByte + \" as hexadecimal\");\n        }\n    }\n    return out;\n}\nexports.fromHex = fromHex;\n/**\n * Converts a Uint8Array of binary data to a hexadecimal encoded string.\n *\n * @param bytes The binary data to encode\n */\nfunction toHex(bytes) {\n    var out = '';\n    for (var i = 0; i < bytes.byteLength; i++) {\n        out += SHORT_TO_HEX[bytes[i]];\n    }\n    return out;\n}\nexports.toHex = toHex;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_hex_encoding_1 = require(\"@aws-sdk/util-hex-encoding\");\n/**\n * A lossless representation of a signed, 64-bit integer. Instances of this\n * class may be used in arithmetic expressions as if they were numeric\n * primitives, but the binary representation will be preserved unchanged as the\n * `bytes` property of the object. The bytes should be encoded as big-endian,\n * two's complement integers.\n */\nvar Int64 = /** @class */ (function () {\n    function Int64(bytes) {\n        this.bytes = bytes;\n        if (bytes.byteLength !== 8) {\n            throw new Error('Int64 buffers must be exactly 8 bytes');\n        }\n    }\n    Int64.fromNumber = function (number) {\n        if (number > 9223372036854775807 || number < -9223372036854775808) {\n            throw new Error(number + \" is too large (or, if negative, too small) to represent as an Int64\");\n        }\n        var bytes = new Uint8Array(8);\n        for (var i = 7, remaining = Math.abs(Math.round(number)); i > -1 && remaining > 0; i--, remaining /= 256) {\n            bytes[i] = remaining;\n        }\n        if (number < 0) {\n            negate(bytes);\n        }\n        return new Int64(bytes);\n    };\n    /**\n     * Called implicitly by infix arithmetic operators.\n     */\n    Int64.prototype.valueOf = function () {\n        var bytes = this.bytes.slice(0);\n        var negative = bytes[0] & 128;\n        if (negative) {\n            negate(bytes);\n        }\n        return parseInt(util_hex_encoding_1.toHex(bytes), 16) * (negative ? -1 : 1);\n    };\n    Int64.prototype.toString = function () {\n        return String(this.valueOf());\n    };\n    return Int64;\n}());\nexports.Int64 = Int64;\nfunction negate(bytes) {\n    for (var i = 0; i < 8; i++) {\n        bytes[i] ^= 0xFF;\n    }\n    for (var i = 7; i > -1; i--) {\n        bytes[i]++;\n        if (bytes[i] !== 0)\n            break;\n    }\n}\n//# sourceMappingURL=Int64.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nfunction crc32(data) {\n    return (new Crc32).update(data).digest();\n}\nexports.crc32 = crc32;\nvar Crc32 = /** @class */ (function () {\n    function Crc32() {\n        this.checksum = 0xffffffff;\n    }\n    Crc32.prototype.update = function (data) {\n        var e_1, _a;\n        try {\n            for (var data_1 = tslib_1.__values(data), data_1_1 = data_1.next(); !data_1_1.done; data_1_1 = data_1.next()) {\n                var byte = data_1_1.value;\n                this.checksum = (this.checksum >>> 8) ^ lookupTable[(this.checksum ^ byte) & 0xff];\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (data_1_1 && !data_1_1.done && (_a = data_1.return)) _a.call(data_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return this;\n    };\n    Crc32.prototype.digest = function () {\n        return (this.checksum ^ 0xffffffff) >>> 0;\n    };\n    return Crc32;\n}());\nexports.Crc32 = Crc32;\nvar lookupTable = Uint32Array.from([\n    0x00000000, 0x77073096, 0xEE0E612C, 0x990951BA,\n    0x076DC419, 0x706AF48F, 0xE963A535, 0x9E6495A3,\n    0x0EDB8832, 0x79DCB8A4, 0xE0D5E91E, 0x97D2D988,\n    0x09B64C2B, 0x7EB17CBD, 0xE7B82D07, 0x90BF1D91,\n    0x1DB71064, 0x6AB020F2, 0xF3B97148, 0x84BE41DE,\n    0x1ADAD47D, 0x6DDDE4EB, 0xF4D4B551, 0x83D385C7,\n    0x136C9856, 0x646BA8C0, 0xFD62F97A, 0x8A65C9EC,\n    0x14015C4F, 0x63066CD9, 0xFA0F3D63, 0x8D080DF5,\n    0x3B6E20C8, 0x4C69105E, 0xD56041E4, 0xA2677172,\n    0x3C03E4D1, 0x4B04D447, 0xD20D85FD, 0xA50AB56B,\n    0x35B5A8FA, 0x42B2986C, 0xDBBBC9D6, 0xACBCF940,\n    0x32D86CE3, 0x45DF5C75, 0xDCD60DCF, 0xABD13D59,\n    0x26D930AC, 0x51DE003A, 0xC8D75180, 0xBFD06116,\n    0x21B4F4B5, 0x56B3C423, 0xCFBA9599, 0xB8BDA50F,\n    0x2802B89E, 0x5F058808, 0xC60CD9B2, 0xB10BE924,\n    0x2F6F7C87, 0x58684C11, 0xC1611DAB, 0xB6662D3D,\n    0x76DC4190, 0x01DB7106, 0x98D220BC, 0xEFD5102A,\n    0x71B18589, 0x06B6B51F, 0x9FBFE4A5, 0xE8B8D433,\n    0x7807C9A2, 0x0F00F934, 0x9609A88E, 0xE10E9818,\n    0x7F6A0DBB, 0x086D3D2D, 0x91646C97, 0xE6635C01,\n    0x6B6B51F4, 0x1C6C6162, 0x856530D8, 0xF262004E,\n    0x6C0695ED, 0x1B01A57B, 0x8208F4C1, 0xF50FC457,\n    0x65B0D9C6, 0x12B7E950, 0x8BBEB8EA, 0xFCB9887C,\n    0x62DD1DDF, 0x15DA2D49, 0x8CD37CF3, 0xFBD44C65,\n    0x4DB26158, 0x3AB551CE, 0xA3BC0074, 0xD4BB30E2,\n    0x4ADFA541, 0x3DD895D7, 0xA4D1C46D, 0xD3D6F4FB,\n    0x4369E96A, 0x346ED9FC, 0xAD678846, 0xDA60B8D0,\n    0x44042D73, 0x33031DE5, 0xAA0A4C5F, 0xDD0D7CC9,\n    0x5005713C, 0x270241AA, 0xBE0B1010, 0xC90C2086,\n    0x5768B525, 0x206F85B3, 0xB966D409, 0xCE61E49F,\n    0x5EDEF90E, 0x29D9C998, 0xB0D09822, 0xC7D7A8B4,\n    0x59B33D17, 0x2EB40D81, 0xB7BD5C3B, 0xC0BA6CAD,\n    0xEDB88320, 0x9ABFB3B6, 0x03B6E20C, 0x74B1D29A,\n    0xEAD54739, 0x9DD277AF, 0x04DB2615, 0x73DC1683,\n    0xE3630B12, 0x94643B84, 0x0D6D6A3E, 0x7A6A5AA8,\n    0xE40ECF0B, 0x9309FF9D, 0x0A00AE27, 0x7D079EB1,\n    0xF00F9344, 0x8708A3D2, 0x1E01F268, 0x6906C2FE,\n    0xF762575D, 0x806567CB, 0x196C3671, 0x6E6B06E7,\n    0xFED41B76, 0x89D32BE0, 0x10DA7A5A, 0x67DD4ACC,\n    0xF9B9DF6F, 0x8EBEEFF9, 0x17B7BE43, 0x60B08ED5,\n    0xD6D6A3E8, 0xA1D1937E, 0x38D8C2C4, 0x4FDFF252,\n    0xD1BB67F1, 0xA6BC5767, 0x3FB506DD, 0x48B2364B,\n    0xD80D2BDA, 0xAF0A1B4C, 0x36034AF6, 0x41047A60,\n    0xDF60EFC3, 0xA867DF55, 0x316E8EEF, 0x4669BE79,\n    0xCB61B38C, 0xBC66831A, 0x256FD2A0, 0x5268E236,\n    0xCC0C7795, 0xBB0B4703, 0x220216B9, 0x5505262F,\n    0xC5BA3BBE, 0xB2BD0B28, 0x2BB45A92, 0x5CB36A04,\n    0xC2D7FFA7, 0xB5D0CF31, 0x2CD99E8B, 0x5BDEAE1D,\n    0x9B64C2B0, 0xEC63F226, 0x756AA39C, 0x026D930A,\n    0x9C0906A9, 0xEB0E363F, 0x72076785, 0x05005713,\n    0x95BF4A82, 0xE2B87A14, 0x7BB12BAE, 0x0CB61B38,\n    0x92D28E9B, 0xE5D5BE0D, 0x7CDCEFB7, 0x0BDBDF21,\n    0x86D3D2D4, 0xF1D4E242, 0x68DDB3F8, 0x1FDA836E,\n    0x81BE16CD, 0xF6B9265B, 0x6FB077E1, 0x18B74777,\n    0x88085AE6, 0xFF0F6A70, 0x66063BCA, 0x11010B5C,\n    0x8F659EFF, 0xF862AE69, 0x616BFFD3, 0x166CCF45,\n    0xA00AE278, 0xD70DD2EE, 0x4E048354, 0x3903B3C2,\n    0xA7672661, 0xD06016F7, 0x4969474D, 0x3E6E77DB,\n    0xAED16A4A, 0xD9D65ADC, 0x40DF0B66, 0x37D83BF0,\n    0xA9BCAE53, 0xDEBB9EC5, 0x47B2CF7F, 0x30B5FFE9,\n    0xBDBDF21C, 0xCABAC28A, 0x53B39330, 0x24B4A3A6,\n    0xBAD03605, 0xCDD70693, 0x54DE5729, 0x23D967BF,\n    0xB3667A2E, 0xC4614AB8, 0x5D681B02, 0x2A6F2B94,\n    0xB40BBE37, 0xC30C8EA1, 0x5A05DF1B, 0x2D02EF8D,\n]);\n//# sourceMappingURL=index.js.map","var util = require('../core').util;\n\nfunction typeOf(data) {\n  if (data === null && typeof data === 'object') {\n    return 'null';\n  } else if (data !== undefined && isBinary(data)) {\n    return 'Binary';\n  } else if (data !== undefined && data.constructor) {\n    return data.wrapperName || util.typeName(data.constructor);\n  } else if (data !== undefined && typeof data === 'object') {\n    // this object is the result of Object.create(null), hence the absence of a\n    // defined constructor\n    return 'Object';\n  } else {\n    return 'undefined';\n  }\n}\n\nfunction isBinary(data) {\n  var types = [\n    'Buffer', 'File', 'Blob', 'ArrayBuffer', 'DataView',\n    'Int8Array', 'Uint8Array', 'Uint8ClampedArray',\n    'Int16Array', 'Uint16Array', 'Int32Array', 'Uint32Array',\n    'Float32Array', 'Float64Array'\n  ];\n  if (util.isNode()) {\n    var Stream = util.stream.Stream;\n    if (util.Buffer.isBuffer(data) || data instanceof Stream) {\n      return true;\n    }\n  }\n\n  for (var i = 0; i < types.length; i++) {\n    if (data !== undefined && data.constructor) {\n      if (util.isType(data, types[i])) return true;\n      if (util.typeName(data.constructor) === types[i]) return true;\n    }\n  }\n\n  return false;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  typeOf: typeOf,\n  isBinary: isBinary\n};\n","var util = require('../core').util;\nvar typeOf = require('./types').typeOf;\n\n/**\n * @api private\n */\nvar memberTypeToSetType = {\n  'String': 'String',\n  'Number': 'Number',\n  'NumberValue': 'Number',\n  'Binary': 'Binary'\n};\n\n/**\n * @api private\n */\nvar DynamoDBSet = util.inherit({\n\n  constructor: function Set(list, options) {\n    options = options || {};\n    this.wrapperName = 'Set';\n    this.initialize(list, options.validate);\n  },\n\n  initialize: function(list, validate) {\n    var self = this;\n    self.values = [].concat(list);\n    self.detectType();\n    if (validate) {\n      self.validate();\n    }\n  },\n\n  detectType: function() {\n    this.type = memberTypeToSetType[typeOf(this.values[0])];\n    if (!this.type) {\n      throw util.error(new Error(), {\n        code: 'InvalidSetType',\n        message: 'Sets can contain string, number, or binary values'\n      });\n    }\n  },\n\n  validate: function() {\n    var self = this;\n    var length = self.values.length;\n    var values = self.values;\n    for (var i = 0; i < length; i++) {\n      if (memberTypeToSetType[typeOf(values[i])] !== self.type) {\n        throw util.error(new Error(), {\n          code: 'InvalidType',\n          message: self.type + ' Set contains ' + typeOf(values[i]) + ' value'\n        });\n      }\n    }\n  },\n\n  /**\n   * Render the underlying values only when converting to JSON.\n   */\n  toJSON: function() {\n    var self = this;\n    return self.values;\n  }\n\n});\n\n/**\n * @api private\n */\nmodule.exports = DynamoDBSet;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['pinpoint'] = {};\nAWS.Pinpoint = Service.defineService('pinpoint', ['2016-12-01']);\nObject.defineProperty(apiLoader.services['pinpoint'], '2016-12-01', {\n  get: function get() {\n    var model = require('../apis/pinpoint-2016-12-01.min.json');\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.Pinpoint;\n","/*******************************************************************************\n * Copyright (c) 2013 IBM Corp.\n *\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * and Eclipse Distribution License v1.0 which accompany this distribution.\n *\n * The Eclipse Public License is available at\n *    http://www.eclipse.org/legal/epl-v10.html\n * and the Eclipse Distribution License is available at\n *   http://www.eclipse.org/org/documents/edl-v10.php.\n *\n * Contributors:\n *    Andrew Banks - initial API and implementation and initial documentation\n *******************************************************************************/\n\n\n// Only expose a single object name in the global namespace.\n// Everything must go through this module. Global Paho module\n// only has a single public function, client, which returns\n// a Paho client object given connection details.\n\n/**\n * Send and receive messages using web browsers.\n * <p>\n * This programming interface lets a JavaScript client application use the MQTT V3.1 or\n * V3.1.1 protocol to connect to an MQTT-supporting messaging server.\n *\n * The function supported includes:\n * <ol>\n * <li>Connecting to and disconnecting from a server. The server is identified by its host name and port number.\n * <li>Specifying options that relate to the communications link with the server,\n * for example the frequency of keep-alive heartbeats, and whether SSL/TLS is required.\n * <li>Subscribing to and receiving messages from MQTT Topics.\n * <li>Publishing messages to MQTT Topics.\n * </ol>\n * <p>\n * The API consists of two main objects:\n * <dl>\n * <dt><b>{@link Paho.Client}</b></dt>\n * <dd>This contains methods that provide the functionality of the API,\n * including provision of callbacks that notify the application when a message\n * arrives from or is delivered to the messaging server,\n * or when the status of its connection to the messaging server changes.</dd>\n * <dt><b>{@link Paho.Message}</b></dt>\n * <dd>This encapsulates the payload of the message along with various attributes\n * associated with its delivery, in particular the destination to which it has\n * been (or is about to be) sent.</dd>\n * </dl>\n * <p>\n * The programming interface validates parameters passed to it, and will throw\n * an Error containing an error message intended for developer use, if it detects\n * an error with any parameter.\n * <p>\n * Example:\n *\n * <code><pre>\nvar client = new Paho.MQTT.Client(location.hostname, Number(location.port), \"clientId\");\nclient.onConnectionLost = onConnectionLost;\nclient.onMessageArrived = onMessageArrived;\nclient.connect({onSuccess:onConnect});\n\nfunction onConnect() {\n  // Once a connection has been made, make a subscription and send a message.\n  console.log(\"onConnect\");\n  client.subscribe(\"/World\");\n  var message = new Paho.MQTT.Message(\"Hello\");\n  message.destinationName = \"/World\";\n  client.send(message);\n};\nfunction onConnectionLost(responseObject) {\n  if (responseObject.errorCode !== 0)\n\tconsole.log(\"onConnectionLost:\"+responseObject.errorMessage);\n};\nfunction onMessageArrived(message) {\n  console.log(\"onMessageArrived:\"+message.payloadString);\n  client.disconnect();\n};\n * </pre></code>\n * @namespace Paho\n */\n\n/* jshint shadow:true */\n(function ExportLibrary(root, factory) {\n\tif(typeof exports === \"object\" && typeof module === \"object\"){\n\t\tmodule.exports = factory();\n\t} else if (typeof define === \"function\" && define.amd){\n\t\tdefine(factory);\n\t} else if (typeof exports === \"object\"){\n\t\texports = factory();\n\t} else {\n\t\t//if (typeof root.Paho === \"undefined\"){\n\t\t//\troot.Paho = {};\n\t\t//}\n\t\troot.Paho = factory();\n\t}\n})(this, function LibraryFactory(){\n\n\n\tvar PahoMQTT = (function (global) {\n\n\t// Private variables below, these are only visible inside the function closure\n\t// which is used to define the module.\n\tvar version = \"@VERSION@-@BUILDLEVEL@\";\n\n\t/**\n\t * @private\n\t */\n\tvar localStorage = global.localStorage || (function () {\n\t\tvar data = {};\n\n\t\treturn {\n\t\t\tsetItem: function (key, item) { data[key] = item; },\n\t\t\tgetItem: function (key) { return data[key]; },\n\t\t\tremoveItem: function (key) { delete data[key]; },\n\t\t};\n\t})();\n\n\t\t/**\n\t * Unique message type identifiers, with associated\n\t * associated integer values.\n\t * @private\n\t */\n\t\tvar MESSAGE_TYPE = {\n\t\t\tCONNECT: 1,\n\t\t\tCONNACK: 2,\n\t\t\tPUBLISH: 3,\n\t\t\tPUBACK: 4,\n\t\t\tPUBREC: 5,\n\t\t\tPUBREL: 6,\n\t\t\tPUBCOMP: 7,\n\t\t\tSUBSCRIBE: 8,\n\t\t\tSUBACK: 9,\n\t\t\tUNSUBSCRIBE: 10,\n\t\t\tUNSUBACK: 11,\n\t\t\tPINGREQ: 12,\n\t\t\tPINGRESP: 13,\n\t\t\tDISCONNECT: 14\n\t\t};\n\n\t\t// Collection of utility methods used to simplify module code\n\t\t// and promote the DRY pattern.\n\n\t\t/**\n\t * Validate an object's parameter names to ensure they\n\t * match a list of expected variables name for this option\n\t * type. Used to ensure option object passed into the API don't\n\t * contain erroneous parameters.\n\t * @param {Object} obj - User options object\n\t * @param {Object} keys - valid keys and types that may exist in obj.\n\t * @throws {Error} Invalid option parameter found.\n\t * @private\n\t */\n\t\tvar validate = function(obj, keys) {\n\t\t\tfor (var key in obj) {\n\t\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\t\tif (keys.hasOwnProperty(key)) {\n\t\t\t\t\t\tif (typeof obj[key] !== keys[key])\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof obj[key], key]));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar errorStr = \"Unknown property, \" + key + \". Valid properties are:\";\n\t\t\t\t\t\tfor (var validKey in keys)\n\t\t\t\t\t\t\tif (keys.hasOwnProperty(validKey))\n\t\t\t\t\t\t\t\terrorStr = errorStr+\" \"+validKey;\n\t\t\t\t\t\tthrow new Error(errorStr);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t * Return a new function which runs the user function bound\n\t * to a fixed scope.\n\t * @param {function} User function\n\t * @param {object} Function scope\n\t * @return {function} User function bound to another scope\n\t * @private\n\t */\n\t\tvar scope = function (f, scope) {\n\t\t\treturn function () {\n\t\t\t\treturn f.apply(scope, arguments);\n\t\t\t};\n\t\t};\n\n\t\t/**\n\t * Unique message type identifiers, with associated\n\t * associated integer values.\n\t * @private\n\t */\n\t\tvar ERROR = {\n\t\t\tOK: {code:0, text:\"AMQJSC0000I OK.\"},\n\t\t\tCONNECT_TIMEOUT: {code:1, text:\"AMQJSC0001E Connect timed out.\"},\n\t\t\tSUBSCRIBE_TIMEOUT: {code:2, text:\"AMQJS0002E Subscribe timed out.\"},\n\t\t\tUNSUBSCRIBE_TIMEOUT: {code:3, text:\"AMQJS0003E Unsubscribe timed out.\"},\n\t\t\tPING_TIMEOUT: {code:4, text:\"AMQJS0004E Ping timed out.\"},\n\t\t\tINTERNAL_ERROR: {code:5, text:\"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}\"},\n\t\t\tCONNACK_RETURNCODE: {code:6, text:\"AMQJS0006E Bad Connack return code:{0} {1}.\"},\n\t\t\tSOCKET_ERROR: {code:7, text:\"AMQJS0007E Socket error:{0}.\"},\n\t\t\tSOCKET_CLOSE: {code:8, text:\"AMQJS0008I Socket closed.\"},\n\t\t\tMALFORMED_UTF: {code:9, text:\"AMQJS0009E Malformed UTF data:{0} {1} {2}.\"},\n\t\t\tUNSUPPORTED: {code:10, text:\"AMQJS0010E {0} is not supported by this browser.\"},\n\t\t\tINVALID_STATE: {code:11, text:\"AMQJS0011E Invalid state {0}.\"},\n\t\t\tINVALID_TYPE: {code:12, text:\"AMQJS0012E Invalid type {0} for {1}.\"},\n\t\t\tINVALID_ARGUMENT: {code:13, text:\"AMQJS0013E Invalid argument {0} for {1}.\"},\n\t\t\tUNSUPPORTED_OPERATION: {code:14, text:\"AMQJS0014E Unsupported operation.\"},\n\t\t\tINVALID_STORED_DATA: {code:15, text:\"AMQJS0015E Invalid data in local storage key={0} value={1}.\"},\n\t\t\tINVALID_MQTT_MESSAGE_TYPE: {code:16, text:\"AMQJS0016E Invalid MQTT message type {0}.\"},\n\t\t\tMALFORMED_UNICODE: {code:17, text:\"AMQJS0017E Malformed Unicode string:{0} {1}.\"},\n\t\t\tBUFFER_FULL: {code:18, text:\"AMQJS0018E Message buffer is full, maximum buffer size: {0}.\"},\n\t\t};\n\n\t\t/** CONNACK RC Meaning. */\n\t\tvar CONNACK_RC = {\n\t\t\t0:\"Connection Accepted\",\n\t\t\t1:\"Connection Refused: unacceptable protocol version\",\n\t\t\t2:\"Connection Refused: identifier rejected\",\n\t\t\t3:\"Connection Refused: server unavailable\",\n\t\t\t4:\"Connection Refused: bad user name or password\",\n\t\t\t5:\"Connection Refused: not authorized\"\n\t\t};\n\n\t/**\n\t * Format an error message text.\n\t * @private\n\t * @param {error} ERROR value above.\n\t * @param {substitutions} [array] substituted into the text.\n\t * @return the text with the substitutions made.\n\t */\n\t\tvar format = function(error, substitutions) {\n\t\t\tvar text = error.text;\n\t\t\tif (substitutions) {\n\t\t\t\tvar field,start;\n\t\t\t\tfor (var i=0; i<substitutions.length; i++) {\n\t\t\t\t\tfield = \"{\"+i+\"}\";\n\t\t\t\t\tstart = text.indexOf(field);\n\t\t\t\t\tif(start > 0) {\n\t\t\t\t\t\tvar part1 = text.substring(0,start);\n\t\t\t\t\t\tvar part2 = text.substring(start+field.length);\n\t\t\t\t\t\ttext = part1+substitutions[i]+part2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn text;\n\t\t};\n\n\t\t//MQTT protocol and version          6    M    Q    I    s    d    p    3\n\t\tvar MqttProtoIdentifierv3 = [0x00,0x06,0x4d,0x51,0x49,0x73,0x64,0x70,0x03];\n\t\t//MQTT proto/version for 311         4    M    Q    T    T    4\n\t\tvar MqttProtoIdentifierv4 = [0x00,0x04,0x4d,0x51,0x54,0x54,0x04];\n\n\t\t/**\n\t * Construct an MQTT wire protocol message.\n\t * @param type MQTT packet type.\n\t * @param options optional wire message attributes.\n\t *\n\t * Optional properties\n\t *\n\t * messageIdentifier: message ID in the range [0..65535]\n\t * payloadMessage:\tApplication Message - PUBLISH only\n\t * connectStrings:\tarray of 0 or more Strings to be put into the CONNECT payload\n\t * topics:\t\t\tarray of strings (SUBSCRIBE, UNSUBSCRIBE)\n\t * requestQoS:\t\tarray of QoS values [0..2]\n\t *\n\t * \"Flag\" properties\n\t * cleanSession:\ttrue if present / false if absent (CONNECT)\n\t * willMessage:  \ttrue if present / false if absent (CONNECT)\n\t * isRetained:\t\ttrue if present / false if absent (CONNECT)\n\t * userName:\t\ttrue if present / false if absent (CONNECT)\n\t * password:\t\ttrue if present / false if absent (CONNECT)\n\t * keepAliveInterval:\tinteger [0..65535]  (CONNECT)\n\t *\n\t * @private\n\t * @ignore\n\t */\n\t\tvar WireMessage = function (type, options) {\n\t\t\tthis.type = type;\n\t\t\tfor (var name in options) {\n\t\t\t\tif (options.hasOwnProperty(name)) {\n\t\t\t\t\tthis[name] = options[name];\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tWireMessage.prototype.encode = function() {\n\t\t// Compute the first byte of the fixed header\n\t\t\tvar first = ((this.type & 0x0f) << 4);\n\n\t\t\t/*\n\t\t * Now calculate the length of the variable header + payload by adding up the lengths\n\t\t * of all the component parts\n\t\t */\n\n\t\t\tvar remLength = 0;\n\t\t\tvar topicStrLength = [];\n\t\t\tvar destinationNameLength = 0;\n\t\t\tvar willMessagePayloadBytes;\n\n\t\t\t// if the message contains a messageIdentifier then we need two bytes for that\n\t\t\tif (this.messageIdentifier !== undefined)\n\t\t\t\tremLength += 2;\n\n\t\t\tswitch(this.type) {\n\t\t\t// If this a Connect then we need to include 12 bytes for its header\n\t\t\tcase MESSAGE_TYPE.CONNECT:\n\t\t\t\tswitch(this.mqttVersion) {\n\t\t\t\tcase 3:\n\t\t\t\t\tremLength += MqttProtoIdentifierv3.length + 3;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tremLength += MqttProtoIdentifierv4.length + 3;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tremLength += UTF8Length(this.clientId) + 2;\n\t\t\t\tif (this.willMessage !== undefined) {\n\t\t\t\t\tremLength += UTF8Length(this.willMessage.destinationName) + 2;\n\t\t\t\t\t// Will message is always a string, sent as UTF-8 characters with a preceding length.\n\t\t\t\t\twillMessagePayloadBytes = this.willMessage.payloadBytes;\n\t\t\t\t\tif (!(willMessagePayloadBytes instanceof Uint8Array))\n\t\t\t\t\t\twillMessagePayloadBytes = new Uint8Array(payloadBytes);\n\t\t\t\t\tremLength += willMessagePayloadBytes.byteLength +2;\n\t\t\t\t}\n\t\t\t\tif (this.userName !== undefined)\n\t\t\t\t\tremLength += UTF8Length(this.userName) + 2;\n\t\t\t\tif (this.password !== undefined)\n\t\t\t\t\tremLength += UTF8Length(this.password) + 2;\n\t\t\t\tbreak;\n\n\t\t\t// Subscribe, Unsubscribe can both contain topic strings\n\t\t\tcase MESSAGE_TYPE.SUBSCRIBE:\n\t\t\t\tfirst |= 0x02; // Qos = 1;\n\t\t\t\tfor ( var i = 0; i < this.topics.length; i++) {\n\t\t\t\t\ttopicStrLength[i] = UTF8Length(this.topics[i]);\n\t\t\t\t\tremLength += topicStrLength[i] + 2;\n\t\t\t\t}\n\t\t\t\tremLength += this.requestedQos.length; // 1 byte for each topic's Qos\n\t\t\t\t// QoS on Subscribe only\n\t\t\t\tbreak;\n\n\t\t\tcase MESSAGE_TYPE.UNSUBSCRIBE:\n\t\t\t\tfirst |= 0x02; // Qos = 1;\n\t\t\t\tfor ( var i = 0; i < this.topics.length; i++) {\n\t\t\t\t\ttopicStrLength[i] = UTF8Length(this.topics[i]);\n\t\t\t\t\tremLength += topicStrLength[i] + 2;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase MESSAGE_TYPE.PUBREL:\n\t\t\t\tfirst |= 0x02; // Qos = 1;\n\t\t\t\tbreak;\n\n\t\t\tcase MESSAGE_TYPE.PUBLISH:\n\t\t\t\tif (this.payloadMessage.duplicate) first |= 0x08;\n\t\t\t\tfirst  = first |= (this.payloadMessage.qos << 1);\n\t\t\t\tif (this.payloadMessage.retained) first |= 0x01;\n\t\t\t\tdestinationNameLength = UTF8Length(this.payloadMessage.destinationName);\n\t\t\t\tremLength += destinationNameLength + 2;\n\t\t\t\tvar payloadBytes = this.payloadMessage.payloadBytes;\n\t\t\t\tremLength += payloadBytes.byteLength;\n\t\t\t\tif (payloadBytes instanceof ArrayBuffer)\n\t\t\t\t\tpayloadBytes = new Uint8Array(payloadBytes);\n\t\t\t\telse if (!(payloadBytes instanceof Uint8Array))\n\t\t\t\t\tpayloadBytes = new Uint8Array(payloadBytes.buffer);\n\t\t\t\tbreak;\n\n\t\t\tcase MESSAGE_TYPE.DISCONNECT:\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Now we can allocate a buffer for the message\n\n\t\t\tvar mbi = encodeMBI(remLength);  // Convert the length to MQTT MBI format\n\t\t\tvar pos = mbi.length + 1;        // Offset of start of variable header\n\t\t\tvar buffer = new ArrayBuffer(remLength + pos);\n\t\t\tvar byteStream = new Uint8Array(buffer);    // view it as a sequence of bytes\n\n\t\t\t//Write the fixed header into the buffer\n\t\t\tbyteStream[0] = first;\n\t\t\tbyteStream.set(mbi,1);\n\n\t\t\t// If this is a PUBLISH then the variable header starts with a topic\n\t\t\tif (this.type == MESSAGE_TYPE.PUBLISH)\n\t\t\t\tpos = writeString(this.payloadMessage.destinationName, destinationNameLength, byteStream, pos);\n\t\t\t// If this is a CONNECT then the variable header contains the protocol name/version, flags and keepalive time\n\n\t\t\telse if (this.type == MESSAGE_TYPE.CONNECT) {\n\t\t\t\tswitch (this.mqttVersion) {\n\t\t\t\tcase 3:\n\t\t\t\t\tbyteStream.set(MqttProtoIdentifierv3, pos);\n\t\t\t\t\tpos += MqttProtoIdentifierv3.length;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tbyteStream.set(MqttProtoIdentifierv4, pos);\n\t\t\t\t\tpos += MqttProtoIdentifierv4.length;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tvar connectFlags = 0;\n\t\t\t\tif (this.cleanSession)\n\t\t\t\t\tconnectFlags = 0x02;\n\t\t\t\tif (this.willMessage !== undefined ) {\n\t\t\t\t\tconnectFlags |= 0x04;\n\t\t\t\t\tconnectFlags |= (this.willMessage.qos<<3);\n\t\t\t\t\tif (this.willMessage.retained) {\n\t\t\t\t\t\tconnectFlags |= 0x20;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this.userName !== undefined)\n\t\t\t\t\tconnectFlags |= 0x80;\n\t\t\t\tif (this.password !== undefined)\n\t\t\t\t\tconnectFlags |= 0x40;\n\t\t\t\tbyteStream[pos++] = connectFlags;\n\t\t\t\tpos = writeUint16 (this.keepAliveInterval, byteStream, pos);\n\t\t\t}\n\n\t\t\t// Output the messageIdentifier - if there is one\n\t\t\tif (this.messageIdentifier !== undefined)\n\t\t\t\tpos = writeUint16 (this.messageIdentifier, byteStream, pos);\n\n\t\t\tswitch(this.type) {\n\t\t\tcase MESSAGE_TYPE.CONNECT:\n\t\t\t\tpos = writeString(this.clientId, UTF8Length(this.clientId), byteStream, pos);\n\t\t\t\tif (this.willMessage !== undefined) {\n\t\t\t\t\tpos = writeString(this.willMessage.destinationName, UTF8Length(this.willMessage.destinationName), byteStream, pos);\n\t\t\t\t\tpos = writeUint16(willMessagePayloadBytes.byteLength, byteStream, pos);\n\t\t\t\t\tbyteStream.set(willMessagePayloadBytes, pos);\n\t\t\t\t\tpos += willMessagePayloadBytes.byteLength;\n\n\t\t\t\t}\n\t\t\t\tif (this.userName !== undefined)\n\t\t\t\t\tpos = writeString(this.userName, UTF8Length(this.userName), byteStream, pos);\n\t\t\t\tif (this.password !== undefined)\n\t\t\t\t\tpos = writeString(this.password, UTF8Length(this.password), byteStream, pos);\n\t\t\t\tbreak;\n\n\t\t\tcase MESSAGE_TYPE.PUBLISH:\n\t\t\t\t// PUBLISH has a text or binary payload, if text do not add a 2 byte length field, just the UTF characters.\n\t\t\t\tbyteStream.set(payloadBytes, pos);\n\n\t\t\t\tbreak;\n\n\t\t\t\t//    \t    case MESSAGE_TYPE.PUBREC:\n\t\t\t\t//    \t    case MESSAGE_TYPE.PUBREL:\n\t\t\t\t//    \t    case MESSAGE_TYPE.PUBCOMP:\n\t\t\t\t//    \t    \tbreak;\n\n\t\t\tcase MESSAGE_TYPE.SUBSCRIBE:\n\t\t\t\t// SUBSCRIBE has a list of topic strings and request QoS\n\t\t\t\tfor (var i=0; i<this.topics.length; i++) {\n\t\t\t\t\tpos = writeString(this.topics[i], topicStrLength[i], byteStream, pos);\n\t\t\t\t\tbyteStream[pos++] = this.requestedQos[i];\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase MESSAGE_TYPE.UNSUBSCRIBE:\n\t\t\t\t// UNSUBSCRIBE has a list of topic strings\n\t\t\t\tfor (var i=0; i<this.topics.length; i++)\n\t\t\t\t\tpos = writeString(this.topics[i], topicStrLength[i], byteStream, pos);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t// Do nothing.\n\t\t\t}\n\n\t\t\treturn buffer;\n\t\t};\n\n\t\tfunction decodeMessage(input,pos) {\n\t\t\tvar startingPos = pos;\n\t\t\tvar first = input[pos];\n\t\t\tvar type = first >> 4;\n\t\t\tvar messageInfo = first &= 0x0f;\n\t\t\tpos += 1;\n\n\n\t\t\t// Decode the remaining length (MBI format)\n\n\t\t\tvar digit;\n\t\t\tvar remLength = 0;\n\t\t\tvar multiplier = 1;\n\t\t\tdo {\n\t\t\t\tif (pos == input.length) {\n\t\t\t\t\treturn [null,startingPos];\n\t\t\t\t}\n\t\t\t\tdigit = input[pos++];\n\t\t\t\tremLength += ((digit & 0x7F) * multiplier);\n\t\t\t\tmultiplier *= 128;\n\t\t\t} while ((digit & 0x80) !== 0);\n\n\t\t\tvar endPos = pos+remLength;\n\t\t\tif (endPos > input.length) {\n\t\t\t\treturn [null,startingPos];\n\t\t\t}\n\n\t\t\tvar wireMessage = new WireMessage(type);\n\t\t\tswitch(type) {\n\t\t\tcase MESSAGE_TYPE.CONNACK:\n\t\t\t\tvar connectAcknowledgeFlags = input[pos++];\n\t\t\t\tif (connectAcknowledgeFlags & 0x01)\n\t\t\t\t\twireMessage.sessionPresent = true;\n\t\t\t\twireMessage.returnCode = input[pos++];\n\t\t\t\tbreak;\n\n\t\t\tcase MESSAGE_TYPE.PUBLISH:\n\t\t\t\tvar qos = (messageInfo >> 1) & 0x03;\n\n\t\t\t\tvar len = readUint16(input, pos);\n\t\t\t\tpos += 2;\n\t\t\t\tvar topicName = parseUTF8(input, pos, len);\n\t\t\t\tpos += len;\n\t\t\t\t// If QoS 1 or 2 there will be a messageIdentifier\n\t\t\t\tif (qos > 0) {\n\t\t\t\t\twireMessage.messageIdentifier = readUint16(input, pos);\n\t\t\t\t\tpos += 2;\n\t\t\t\t}\n\n\t\t\t\tvar message = new Message(input.subarray(pos, endPos));\n\t\t\t\tif ((messageInfo & 0x01) == 0x01)\n\t\t\t\t\tmessage.retained = true;\n\t\t\t\tif ((messageInfo & 0x08) == 0x08)\n\t\t\t\t\tmessage.duplicate =  true;\n\t\t\t\tmessage.qos = qos;\n\t\t\t\tmessage.destinationName = topicName;\n\t\t\t\twireMessage.payloadMessage = message;\n\t\t\t\tbreak;\n\n\t\t\tcase  MESSAGE_TYPE.PUBACK:\n\t\t\tcase  MESSAGE_TYPE.PUBREC:\n\t\t\tcase  MESSAGE_TYPE.PUBREL:\n\t\t\tcase  MESSAGE_TYPE.PUBCOMP:\n\t\t\tcase  MESSAGE_TYPE.UNSUBACK:\n\t\t\t\twireMessage.messageIdentifier = readUint16(input, pos);\n\t\t\t\tbreak;\n\n\t\t\tcase  MESSAGE_TYPE.SUBACK:\n\t\t\t\twireMessage.messageIdentifier = readUint16(input, pos);\n\t\t\t\tpos += 2;\n\t\t\t\twireMessage.returnCode = input.subarray(pos, endPos);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn [wireMessage,endPos];\n\t\t}\n\n\t\tfunction writeUint16(input, buffer, offset) {\n\t\t\tbuffer[offset++] = input >> 8;      //MSB\n\t\t\tbuffer[offset++] = input % 256;     //LSB\n\t\t\treturn offset;\n\t\t}\n\n\t\tfunction writeString(input, utf8Length, buffer, offset) {\n\t\t\toffset = writeUint16(utf8Length, buffer, offset);\n\t\t\tstringToUTF8(input, buffer, offset);\n\t\t\treturn offset + utf8Length;\n\t\t}\n\n\t\tfunction readUint16(buffer, offset) {\n\t\t\treturn 256*buffer[offset] + buffer[offset+1];\n\t\t}\n\n\t\t/**\n\t * Encodes an MQTT Multi-Byte Integer\n\t * @private\n\t */\n\t\tfunction encodeMBI(number) {\n\t\t\tvar output = new Array(1);\n\t\t\tvar numBytes = 0;\n\n\t\t\tdo {\n\t\t\t\tvar digit = number % 128;\n\t\t\t\tnumber = number >> 7;\n\t\t\t\tif (number > 0) {\n\t\t\t\t\tdigit |= 0x80;\n\t\t\t\t}\n\t\t\t\toutput[numBytes++] = digit;\n\t\t\t} while ( (number > 0) && (numBytes<4) );\n\n\t\t\treturn output;\n\t\t}\n\n\t\t/**\n\t * Takes a String and calculates its length in bytes when encoded in UTF8.\n\t * @private\n\t */\n\t\tfunction UTF8Length(input) {\n\t\t\tvar output = 0;\n\t\t\tfor (var i = 0; i<input.length; i++)\n\t\t\t{\n\t\t\t\tvar charCode = input.charCodeAt(i);\n\t\t\t\tif (charCode > 0x7FF)\n\t\t\t\t{\n\t\t\t\t\t// Surrogate pair means its a 4 byte character\n\t\t\t\t\tif (0xD800 <= charCode && charCode <= 0xDBFF)\n\t\t\t\t\t{\n\t\t\t\t\t\ti++;\n\t\t\t\t\t\toutput++;\n\t\t\t\t\t}\n\t\t\t\t\toutput +=3;\n\t\t\t\t}\n\t\t\t\telse if (charCode > 0x7F)\n\t\t\t\t\toutput +=2;\n\t\t\t\telse\n\t\t\t\t\toutput++;\n\t\t\t}\n\t\t\treturn output;\n\t\t}\n\n\t\t/**\n\t * Takes a String and writes it into an array as UTF8 encoded bytes.\n\t * @private\n\t */\n\t\tfunction stringToUTF8(input, output, start) {\n\t\t\tvar pos = start;\n\t\t\tfor (var i = 0; i<input.length; i++) {\n\t\t\t\tvar charCode = input.charCodeAt(i);\n\n\t\t\t\t// Check for a surrogate pair.\n\t\t\t\tif (0xD800 <= charCode && charCode <= 0xDBFF) {\n\t\t\t\t\tvar lowCharCode = input.charCodeAt(++i);\n\t\t\t\t\tif (isNaN(lowCharCode)) {\n\t\t\t\t\t\tthrow new Error(format(ERROR.MALFORMED_UNICODE, [charCode, lowCharCode]));\n\t\t\t\t\t}\n\t\t\t\t\tcharCode = ((charCode - 0xD800)<<10) + (lowCharCode - 0xDC00) + 0x10000;\n\n\t\t\t\t}\n\n\t\t\t\tif (charCode <= 0x7F) {\n\t\t\t\t\toutput[pos++] = charCode;\n\t\t\t\t} else if (charCode <= 0x7FF) {\n\t\t\t\t\toutput[pos++] = charCode>>6  & 0x1F | 0xC0;\n\t\t\t\t\toutput[pos++] = charCode     & 0x3F | 0x80;\n\t\t\t\t} else if (charCode <= 0xFFFF) {\n\t\t\t\t\toutput[pos++] = charCode>>12 & 0x0F | 0xE0;\n\t\t\t\t\toutput[pos++] = charCode>>6  & 0x3F | 0x80;\n\t\t\t\t\toutput[pos++] = charCode     & 0x3F | 0x80;\n\t\t\t\t} else {\n\t\t\t\t\toutput[pos++] = charCode>>18 & 0x07 | 0xF0;\n\t\t\t\t\toutput[pos++] = charCode>>12 & 0x3F | 0x80;\n\t\t\t\t\toutput[pos++] = charCode>>6  & 0x3F | 0x80;\n\t\t\t\t\toutput[pos++] = charCode     & 0x3F | 0x80;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn output;\n\t\t}\n\n\t\tfunction parseUTF8(input, offset, length) {\n\t\t\tvar output = \"\";\n\t\t\tvar utf16;\n\t\t\tvar pos = offset;\n\n\t\t\twhile (pos < offset+length)\n\t\t\t{\n\t\t\t\tvar byte1 = input[pos++];\n\t\t\t\tif (byte1 < 128)\n\t\t\t\t\tutf16 = byte1;\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar byte2 = input[pos++]-128;\n\t\t\t\t\tif (byte2 < 0)\n\t\t\t\t\t\tthrow new Error(format(ERROR.MALFORMED_UTF, [byte1.toString(16), byte2.toString(16),\"\"]));\n\t\t\t\t\tif (byte1 < 0xE0)             // 2 byte character\n\t\t\t\t\t\tutf16 = 64*(byte1-0xC0) + byte2;\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tvar byte3 = input[pos++]-128;\n\t\t\t\t\t\tif (byte3 < 0)\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.MALFORMED_UTF, [byte1.toString(16), byte2.toString(16), byte3.toString(16)]));\n\t\t\t\t\t\tif (byte1 < 0xF0)        // 3 byte character\n\t\t\t\t\t\t\tutf16 = 4096*(byte1-0xE0) + 64*byte2 + byte3;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar byte4 = input[pos++]-128;\n\t\t\t\t\t\t\tif (byte4 < 0)\n\t\t\t\t\t\t\t\tthrow new Error(format(ERROR.MALFORMED_UTF, [byte1.toString(16), byte2.toString(16), byte3.toString(16), byte4.toString(16)]));\n\t\t\t\t\t\t\tif (byte1 < 0xF8)        // 4 byte character\n\t\t\t\t\t\t\t\tutf16 = 262144*(byte1-0xF0) + 4096*byte2 + 64*byte3 + byte4;\n\t\t\t\t\t\t\telse                     // longer encodings are not supported\n\t\t\t\t\t\t\t\tthrow new Error(format(ERROR.MALFORMED_UTF, [byte1.toString(16), byte2.toString(16), byte3.toString(16), byte4.toString(16)]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (utf16 > 0xFFFF)   // 4 byte character - express as a surrogate pair\n\t\t\t\t{\n\t\t\t\t\tutf16 -= 0x10000;\n\t\t\t\t\toutput += String.fromCharCode(0xD800 + (utf16 >> 10)); // lead character\n\t\t\t\t\tutf16 = 0xDC00 + (utf16 & 0x3FF);  // trail character\n\t\t\t\t}\n\t\t\t\toutput += String.fromCharCode(utf16);\n\t\t\t}\n\t\t\treturn output;\n\t\t}\n\n\t\t/**\n\t * Repeat keepalive requests, monitor responses.\n\t * @ignore\n\t */\n\t\tvar Pinger = function(client, keepAliveInterval) {\n\t\t\tthis._client = client;\n\t\t\tthis._keepAliveInterval = keepAliveInterval*1000;\n\t\t\tthis.isReset = false;\n\n\t\t\tvar pingReq = new WireMessage(MESSAGE_TYPE.PINGREQ).encode();\n\n\t\t\tvar doTimeout = function (pinger) {\n\t\t\t\treturn function () {\n\t\t\t\t\treturn doPing.apply(pinger);\n\t\t\t\t};\n\t\t\t};\n\n\t\t\t/** @ignore */\n\t\t\tvar doPing = function() {\n\t\t\t\tif (!this.isReset) {\n\t\t\t\t\tthis._client._trace(\"Pinger.doPing\", \"Timed out\");\n\t\t\t\t\tthis._client._disconnected( ERROR.PING_TIMEOUT.code , format(ERROR.PING_TIMEOUT));\n\t\t\t\t} else {\n\t\t\t\t\tthis.isReset = false;\n\t\t\t\t\tthis._client._trace(\"Pinger.doPing\", \"send PINGREQ\");\n\t\t\t\t\tthis._client.socket.send(pingReq);\n\t\t\t\t\tthis.timeout = setTimeout(doTimeout(this), this._keepAliveInterval);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.reset = function() {\n\t\t\t\tthis.isReset = true;\n\t\t\t\tclearTimeout(this.timeout);\n\t\t\t\tif (this._keepAliveInterval > 0)\n\t\t\t\t\tthis.timeout = setTimeout(doTimeout(this), this._keepAliveInterval);\n\t\t\t};\n\n\t\t\tthis.cancel = function() {\n\t\t\t\tclearTimeout(this.timeout);\n\t\t\t};\n\t\t};\n\n\t\t/**\n\t * Monitor request completion.\n\t * @ignore\n\t */\n\t\tvar Timeout = function(client, timeoutSeconds, action, args) {\n\t\t\tif (!timeoutSeconds)\n\t\t\t\ttimeoutSeconds = 30;\n\n\t\t\tvar doTimeout = function (action, client, args) {\n\t\t\t\treturn function () {\n\t\t\t\t\treturn action.apply(client, args);\n\t\t\t\t};\n\t\t\t};\n\t\t\tthis.timeout = setTimeout(doTimeout(action, client, args), timeoutSeconds * 1000);\n\n\t\t\tthis.cancel = function() {\n\t\t\t\tclearTimeout(this.timeout);\n\t\t\t};\n\t\t};\n\n\t/**\n\t * Internal implementation of the Websockets MQTT V3.1 client.\n\t *\n\t * @name Paho.ClientImpl @constructor\n\t * @param {String} host the DNS nameof the webSocket host.\n\t * @param {Number} port the port number for that host.\n\t * @param {String} clientId the MQ client identifier.\n\t */\n\t\tvar ClientImpl = function (uri, host, port, path, clientId) {\n\t\t// Check dependencies are satisfied in this browser.\n\t\t\tif (!(\"WebSocket\" in global && global.WebSocket !== null)) {\n\t\t\t\tthrow new Error(format(ERROR.UNSUPPORTED, [\"WebSocket\"]));\n\t\t\t}\n\t\t\tif (!(\"ArrayBuffer\" in global && global.ArrayBuffer !== null)) {\n\t\t\t\tthrow new Error(format(ERROR.UNSUPPORTED, [\"ArrayBuffer\"]));\n\t\t\t}\n\t\t\tthis._trace(\"Paho.Client\", uri, host, port, path, clientId);\n\n\t\t\tthis.host = host;\n\t\t\tthis.port = port;\n\t\t\tthis.path = path;\n\t\t\tthis.uri = uri;\n\t\t\tthis.clientId = clientId;\n\t\t\tthis._wsuri = null;\n\n\t\t\t// Local storagekeys are qualified with the following string.\n\t\t\t// The conditional inclusion of path in the key is for backward\n\t\t\t// compatibility to when the path was not configurable and assumed to\n\t\t\t// be /mqtt\n\t\t\tthis._localKey=host+\":\"+port+(path!=\"/mqtt\"?\":\"+path:\"\")+\":\"+clientId+\":\";\n\n\t\t\t// Create private instance-only message queue\n\t\t\t// Internal queue of messages to be sent, in sending order.\n\t\t\tthis._msg_queue = [];\n\t\t\tthis._buffered_msg_queue = [];\n\n\t\t\t// Messages we have sent and are expecting a response for, indexed by their respective message ids.\n\t\t\tthis._sentMessages = {};\n\n\t\t\t// Messages we have received and acknowleged and are expecting a confirm message for\n\t\t\t// indexed by their respective message ids.\n\t\t\tthis._receivedMessages = {};\n\n\t\t\t// Internal list of callbacks to be executed when messages\n\t\t\t// have been successfully sent over web socket, e.g. disconnect\n\t\t\t// when it doesn't have to wait for ACK, just message is dispatched.\n\t\t\tthis._notify_msg_sent = {};\n\n\t\t\t// Unique identifier for SEND messages, incrementing\n\t\t\t// counter as messages are sent.\n\t\t\tthis._message_identifier = 1;\n\n\t\t\t// Used to determine the transmission sequence of stored sent messages.\n\t\t\tthis._sequence = 0;\n\n\n\t\t\t// Load the local state, if any, from the saved version, only restore state relevant to this client.\n\t\t\tfor (var key in localStorage)\n\t\t\t\tif (   key.indexOf(\"Sent:\"+this._localKey) === 0 || key.indexOf(\"Received:\"+this._localKey) === 0)\n\t\t\t\t\tthis.restore(key);\n\t\t};\n\n\t\t// Messaging Client public instance members.\n\t\tClientImpl.prototype.host = null;\n\t\tClientImpl.prototype.port = null;\n\t\tClientImpl.prototype.path = null;\n\t\tClientImpl.prototype.uri = null;\n\t\tClientImpl.prototype.clientId = null;\n\n\t\t// Messaging Client private instance members.\n\t\tClientImpl.prototype.socket = null;\n\t\t/* true once we have received an acknowledgement to a CONNECT packet. */\n\t\tClientImpl.prototype.connected = false;\n\t\t/* The largest message identifier allowed, may not be larger than 2**16 but\n\t\t * if set smaller reduces the maximum number of outbound messages allowed.\n\t\t */\n\t\tClientImpl.prototype.maxMessageIdentifier = 65536;\n\t\tClientImpl.prototype.connectOptions = null;\n\t\tClientImpl.prototype.hostIndex = null;\n\t\tClientImpl.prototype.onConnected = null;\n\t\tClientImpl.prototype.onConnectionLost = null;\n\t\tClientImpl.prototype.onMessageDelivered = null;\n\t\tClientImpl.prototype.onMessageArrived = null;\n\t\tClientImpl.prototype.traceFunction = null;\n\t\tClientImpl.prototype._msg_queue = null;\n\t\tClientImpl.prototype._buffered_msg_queue = null;\n\t\tClientImpl.prototype._connectTimeout = null;\n\t\t/* The sendPinger monitors how long we allow before we send data to prove to the server that we are alive. */\n\t\tClientImpl.prototype.sendPinger = null;\n\t\t/* The receivePinger monitors how long we allow before we require evidence that the server is alive. */\n\t\tClientImpl.prototype.receivePinger = null;\n\t\tClientImpl.prototype._reconnectInterval = 1; // Reconnect Delay, starts at 1 second\n\t\tClientImpl.prototype._reconnecting = false;\n\t\tClientImpl.prototype._reconnectTimeout = null;\n\t\tClientImpl.prototype.disconnectedPublishing = false;\n\t\tClientImpl.prototype.disconnectedBufferSize = 5000;\n\n\t\tClientImpl.prototype.receiveBuffer = null;\n\n\t\tClientImpl.prototype._traceBuffer = null;\n\t\tClientImpl.prototype._MAX_TRACE_ENTRIES = 100;\n\n\t\tClientImpl.prototype.connect = function (connectOptions) {\n\t\t\tvar connectOptionsMasked = this._traceMask(connectOptions, \"password\");\n\t\t\tthis._trace(\"Client.connect\", connectOptionsMasked, this.socket, this.connected);\n\n\t\t\tif (this.connected)\n\t\t\t\tthrow new Error(format(ERROR.INVALID_STATE, [\"already connected\"]));\n\t\t\tif (this.socket)\n\t\t\t\tthrow new Error(format(ERROR.INVALID_STATE, [\"already connected\"]));\n\n\t\t\tif (this._reconnecting) {\n\t\t\t// connect() function is called while reconnect is in progress.\n\t\t\t// Terminate the auto reconnect process to use new connect options.\n\t\t\t\tthis._reconnectTimeout.cancel();\n\t\t\t\tthis._reconnectTimeout = null;\n\t\t\t\tthis._reconnecting = false;\n\t\t\t}\n\n\t\t\tthis.connectOptions = connectOptions;\n\t\t\tthis._reconnectInterval = 1;\n\t\t\tthis._reconnecting = false;\n\t\t\tif (connectOptions.uris) {\n\t\t\t\tthis.hostIndex = 0;\n\t\t\t\tthis._doConnect(connectOptions.uris[0]);\n\t\t\t} else {\n\t\t\t\tthis._doConnect(this.uri);\n\t\t\t}\n\n\t\t};\n\n\t\tClientImpl.prototype.subscribe = function (filter, subscribeOptions) {\n\t\t\tthis._trace(\"Client.subscribe\", filter, subscribeOptions);\n\n\t\t\tif (!this.connected)\n\t\t\t\tthrow new Error(format(ERROR.INVALID_STATE, [\"not connected\"]));\n\n            var wireMessage = new WireMessage(MESSAGE_TYPE.SUBSCRIBE);\n            wireMessage.topics = filter.constructor === Array ? filter : [filter];\n            if (subscribeOptions.qos === undefined)\n                subscribeOptions.qos = 0;\n            wireMessage.requestedQos = [];\n            for (var i = 0; i < wireMessage.topics.length; i++)\n                wireMessage.requestedQos[i] = subscribeOptions.qos;\n\n\t\t\tif (subscribeOptions.onSuccess) {\n\t\t\t\twireMessage.onSuccess = function(grantedQos) {subscribeOptions.onSuccess({invocationContext:subscribeOptions.invocationContext,grantedQos:grantedQos});};\n\t\t\t}\n\n\t\t\tif (subscribeOptions.onFailure) {\n\t\t\t\twireMessage.onFailure = function(errorCode) {subscribeOptions.onFailure({invocationContext:subscribeOptions.invocationContext,errorCode:errorCode, errorMessage:format(errorCode)});};\n\t\t\t}\n\n\t\t\tif (subscribeOptions.timeout) {\n\t\t\t\twireMessage.timeOut = new Timeout(this, subscribeOptions.timeout, subscribeOptions.onFailure,\n\t\t\t\t\t[{invocationContext:subscribeOptions.invocationContext,\n\t\t\t\t\t\terrorCode:ERROR.SUBSCRIBE_TIMEOUT.code,\n\t\t\t\t\t\terrorMessage:format(ERROR.SUBSCRIBE_TIMEOUT)}]);\n\t\t\t}\n\n\t\t\t// All subscriptions return a SUBACK.\n\t\t\tthis._requires_ack(wireMessage);\n\t\t\tthis._schedule_message(wireMessage);\n\t\t};\n\n\t\t/** @ignore */\n\t\tClientImpl.prototype.unsubscribe = function(filter, unsubscribeOptions) {\n\t\t\tthis._trace(\"Client.unsubscribe\", filter, unsubscribeOptions);\n\n\t\t\tif (!this.connected)\n\t\t\t\tthrow new Error(format(ERROR.INVALID_STATE, [\"not connected\"]));\n\n            var wireMessage = new WireMessage(MESSAGE_TYPE.UNSUBSCRIBE);\n            wireMessage.topics = filter.constructor === Array ? filter : [filter];\n\n\t\t\tif (unsubscribeOptions.onSuccess) {\n\t\t\t\twireMessage.callback = function() {unsubscribeOptions.onSuccess({invocationContext:unsubscribeOptions.invocationContext});};\n\t\t\t}\n\t\t\tif (unsubscribeOptions.timeout) {\n\t\t\t\twireMessage.timeOut = new Timeout(this, unsubscribeOptions.timeout, unsubscribeOptions.onFailure,\n\t\t\t\t\t[{invocationContext:unsubscribeOptions.invocationContext,\n\t\t\t\t\t\terrorCode:ERROR.UNSUBSCRIBE_TIMEOUT.code,\n\t\t\t\t\t\terrorMessage:format(ERROR.UNSUBSCRIBE_TIMEOUT)}]);\n\t\t\t}\n\n\t\t\t// All unsubscribes return a SUBACK.\n\t\t\tthis._requires_ack(wireMessage);\n\t\t\tthis._schedule_message(wireMessage);\n\t\t};\n\n\t\tClientImpl.prototype.send = function (message) {\n\t\t\tthis._trace(\"Client.send\", message);\n\n\t\t\tvar wireMessage = new WireMessage(MESSAGE_TYPE.PUBLISH);\n\t\t\twireMessage.payloadMessage = message;\n\n\t\t\tif (this.connected) {\n\t\t\t// Mark qos 1 & 2 message as \"ACK required\"\n\t\t\t// For qos 0 message, invoke onMessageDelivered callback if there is one.\n\t\t\t// Then schedule the message.\n\t\t\t\tif (message.qos > 0) {\n\t\t\t\t\tthis._requires_ack(wireMessage);\n\t\t\t\t} else if (this.onMessageDelivered) {\n\t\t\t\t\tthis._notify_msg_sent[wireMessage] = this.onMessageDelivered(wireMessage.payloadMessage);\n\t\t\t\t}\n\t\t\t\tthis._schedule_message(wireMessage);\n\t\t\t} else {\n\t\t\t// Currently disconnected, will not schedule this message\n\t\t\t// Check if reconnecting is in progress and disconnected publish is enabled.\n\t\t\t\tif (this._reconnecting && this.disconnectedPublishing) {\n\t\t\t\t// Check the limit which include the \"required ACK\" messages\n\t\t\t\t\tvar messageCount = Object.keys(this._sentMessages).length + this._buffered_msg_queue.length;\n\t\t\t\t\tif (messageCount > this.disconnectedBufferSize) {\n\t\t\t\t\t\tthrow new Error(format(ERROR.BUFFER_FULL, [this.disconnectedBufferSize]));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (message.qos > 0) {\n\t\t\t\t\t\t// Mark this message as \"ACK required\"\n\t\t\t\t\t\t\tthis._requires_ack(wireMessage);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twireMessage.sequence = ++this._sequence;\n\t\t\t\t\t\t\t// Add messages in fifo order to array, by adding to start\n\t\t\t\t\t\t\tthis._buffered_msg_queue.unshift(wireMessage);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_STATE, [\"not connected\"]));\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tClientImpl.prototype.disconnect = function () {\n\t\t\tthis._trace(\"Client.disconnect\");\n\n\t\t\tif (this._reconnecting) {\n\t\t\t// disconnect() function is called while reconnect is in progress.\n\t\t\t// Terminate the auto reconnect process.\n\t\t\t\tthis._reconnectTimeout.cancel();\n\t\t\t\tthis._reconnectTimeout = null;\n\t\t\t\tthis._reconnecting = false;\n\t\t\t}\n\n\t\t\tif (!this.socket)\n\t\t\t\tthrow new Error(format(ERROR.INVALID_STATE, [\"not connecting or connected\"]));\n\n\t\t\tvar wireMessage = new WireMessage(MESSAGE_TYPE.DISCONNECT);\n\n\t\t\t// Run the disconnected call back as soon as the message has been sent,\n\t\t\t// in case of a failure later on in the disconnect processing.\n\t\t\t// as a consequence, the _disconected call back may be run several times.\n\t\t\tthis._notify_msg_sent[wireMessage] = scope(this._disconnected, this);\n\n\t\t\tthis._schedule_message(wireMessage);\n\t\t};\n\n\t\tClientImpl.prototype.getTraceLog = function () {\n\t\t\tif ( this._traceBuffer !== null ) {\n\t\t\t\tthis._trace(\"Client.getTraceLog\", new Date());\n\t\t\t\tthis._trace(\"Client.getTraceLog in flight messages\", this._sentMessages.length);\n\t\t\t\tfor (var key in this._sentMessages)\n\t\t\t\t\tthis._trace(\"_sentMessages \",key, this._sentMessages[key]);\n\t\t\t\tfor (var key in this._receivedMessages)\n\t\t\t\t\tthis._trace(\"_receivedMessages \",key, this._receivedMessages[key]);\n\n\t\t\t\treturn this._traceBuffer;\n\t\t\t}\n\t\t};\n\n\t\tClientImpl.prototype.startTrace = function () {\n\t\t\tif ( this._traceBuffer === null ) {\n\t\t\t\tthis._traceBuffer = [];\n\t\t\t}\n\t\t\tthis._trace(\"Client.startTrace\", new Date(), version);\n\t\t};\n\n\t\tClientImpl.prototype.stopTrace = function () {\n\t\t\tdelete this._traceBuffer;\n\t\t};\n\n\t\tClientImpl.prototype._doConnect = function (wsurl) {\n\t\t// When the socket is open, this client will send the CONNECT WireMessage using the saved parameters.\n\t\t\tif (this.connectOptions.useSSL) {\n\t\t\t\tvar uriParts = wsurl.split(\":\");\n\t\t\t\turiParts[0] = \"wss\";\n\t\t\t\twsurl = uriParts.join(\":\");\n\t\t\t}\n\t\t\tthis._wsuri = wsurl;\n\t\t\tthis.connected = false;\n\n\n\n\t\t\tif (this.connectOptions.mqttVersion < 4) {\n\t\t\t\tthis.socket = new WebSocket(wsurl, [\"mqttv3.1\"]);\n\t\t\t} else {\n\t\t\t\tthis.socket = new WebSocket(wsurl, [\"mqtt\"]);\n\t\t\t}\n\t\t\tthis.socket.binaryType = \"arraybuffer\";\n\t\t\tthis.socket.onopen = scope(this._on_socket_open, this);\n\t\t\tthis.socket.onmessage = scope(this._on_socket_message, this);\n\t\t\tthis.socket.onerror = scope(this._on_socket_error, this);\n\t\t\tthis.socket.onclose = scope(this._on_socket_close, this);\n\n\t\t\tthis.sendPinger = new Pinger(this, this.connectOptions.keepAliveInterval);\n\t\t\tthis.receivePinger = new Pinger(this, this.connectOptions.keepAliveInterval);\n\t\t\tif (this._connectTimeout) {\n\t\t\t\tthis._connectTimeout.cancel();\n\t\t\t\tthis._connectTimeout = null;\n\t\t\t}\n\t\t\tthis._connectTimeout = new Timeout(this, this.connectOptions.timeout, this._disconnected,  [ERROR.CONNECT_TIMEOUT.code, format(ERROR.CONNECT_TIMEOUT)]);\n\t\t};\n\n\n\t\t// Schedule a new message to be sent over the WebSockets\n\t\t// connection. CONNECT messages cause WebSocket connection\n\t\t// to be started. All other messages are queued internally\n\t\t// until this has happened. When WS connection starts, process\n\t\t// all outstanding messages.\n\t\tClientImpl.prototype._schedule_message = function (message) {\n\t\t\t// Add messages in fifo order to array, by adding to start\n\t\t\tthis._msg_queue.unshift(message);\n\t\t\t// Process outstanding messages in the queue if we have an  open socket, and have received CONNACK.\n\t\t\tif (this.connected) {\n\t\t\t\tthis._process_queue();\n\t\t\t}\n\t\t};\n\n\t\tClientImpl.prototype.store = function(prefix, wireMessage) {\n\t\t\tvar storedMessage = {type:wireMessage.type, messageIdentifier:wireMessage.messageIdentifier, version:1};\n\n\t\t\tswitch(wireMessage.type) {\n\t\t\tcase MESSAGE_TYPE.PUBLISH:\n\t\t\t\tif(wireMessage.pubRecReceived)\n\t\t\t\t\tstoredMessage.pubRecReceived = true;\n\n\t\t\t\t// Convert the payload to a hex string.\n\t\t\t\tstoredMessage.payloadMessage = {};\n\t\t\t\tvar hex = \"\";\n\t\t\t\tvar messageBytes = wireMessage.payloadMessage.payloadBytes;\n\t\t\t\tfor (var i=0; i<messageBytes.length; i++) {\n\t\t\t\t\tif (messageBytes[i] <= 0xF)\n\t\t\t\t\t\thex = hex+\"0\"+messageBytes[i].toString(16);\n\t\t\t\t\telse\n\t\t\t\t\t\thex = hex+messageBytes[i].toString(16);\n\t\t\t\t}\n\t\t\t\tstoredMessage.payloadMessage.payloadHex = hex;\n\n\t\t\t\tstoredMessage.payloadMessage.qos = wireMessage.payloadMessage.qos;\n\t\t\t\tstoredMessage.payloadMessage.destinationName = wireMessage.payloadMessage.destinationName;\n\t\t\t\tif (wireMessage.payloadMessage.duplicate)\n\t\t\t\t\tstoredMessage.payloadMessage.duplicate = true;\n\t\t\t\tif (wireMessage.payloadMessage.retained)\n\t\t\t\t\tstoredMessage.payloadMessage.retained = true;\n\n\t\t\t\t// Add a sequence number to sent messages.\n\t\t\t\tif ( prefix.indexOf(\"Sent:\") === 0 ) {\n\t\t\t\t\tif ( wireMessage.sequence === undefined )\n\t\t\t\t\t\twireMessage.sequence = ++this._sequence;\n\t\t\t\t\tstoredMessage.sequence = wireMessage.sequence;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow Error(format(ERROR.INVALID_STORED_DATA, [prefix+this._localKey+wireMessage.messageIdentifier, storedMessage]));\n\t\t\t}\n\t\t\tlocalStorage.setItem(prefix+this._localKey+wireMessage.messageIdentifier, JSON.stringify(storedMessage));\n\t\t};\n\n\t\tClientImpl.prototype.restore = function(key) {\n\t\t\tvar value = localStorage.getItem(key);\n\t\t\tvar storedMessage = JSON.parse(value);\n\n\t\t\tvar wireMessage = new WireMessage(storedMessage.type, storedMessage);\n\n\t\t\tswitch(storedMessage.type) {\n\t\t\tcase MESSAGE_TYPE.PUBLISH:\n\t\t\t\t// Replace the payload message with a Message object.\n\t\t\t\tvar hex = storedMessage.payloadMessage.payloadHex;\n\t\t\t\tvar buffer = new ArrayBuffer((hex.length)/2);\n\t\t\t\tvar byteStream = new Uint8Array(buffer);\n\t\t\t\tvar i = 0;\n\t\t\t\twhile (hex.length >= 2) {\n\t\t\t\t\tvar x = parseInt(hex.substring(0, 2), 16);\n\t\t\t\t\thex = hex.substring(2, hex.length);\n\t\t\t\t\tbyteStream[i++] = x;\n\t\t\t\t}\n\t\t\t\tvar payloadMessage = new Message(byteStream);\n\n\t\t\t\tpayloadMessage.qos = storedMessage.payloadMessage.qos;\n\t\t\t\tpayloadMessage.destinationName = storedMessage.payloadMessage.destinationName;\n\t\t\t\tif (storedMessage.payloadMessage.duplicate)\n\t\t\t\t\tpayloadMessage.duplicate = true;\n\t\t\t\tif (storedMessage.payloadMessage.retained)\n\t\t\t\t\tpayloadMessage.retained = true;\n\t\t\t\twireMessage.payloadMessage = payloadMessage;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow Error(format(ERROR.INVALID_STORED_DATA, [key, value]));\n\t\t\t}\n\n\t\t\tif (key.indexOf(\"Sent:\"+this._localKey) === 0) {\n\t\t\t\twireMessage.payloadMessage.duplicate = true;\n\t\t\t\tthis._sentMessages[wireMessage.messageIdentifier] = wireMessage;\n\t\t\t} else if (key.indexOf(\"Received:\"+this._localKey) === 0) {\n\t\t\t\tthis._receivedMessages[wireMessage.messageIdentifier] = wireMessage;\n\t\t\t}\n\t\t};\n\n\t\tClientImpl.prototype._process_queue = function () {\n\t\t\tvar message = null;\n\n\t\t\t// Send all queued messages down socket connection\n\t\t\twhile ((message = this._msg_queue.pop())) {\n\t\t\t\tthis._socket_send(message);\n\t\t\t\t// Notify listeners that message was successfully sent\n\t\t\t\tif (this._notify_msg_sent[message]) {\n\t\t\t\t\tthis._notify_msg_sent[message]();\n\t\t\t\t\tdelete this._notify_msg_sent[message];\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t * Expect an ACK response for this message. Add message to the set of in progress\n\t * messages and set an unused identifier in this message.\n\t * @ignore\n\t */\n\t\tClientImpl.prototype._requires_ack = function (wireMessage) {\n\t\t\tvar messageCount = Object.keys(this._sentMessages).length;\n\t\t\tif (messageCount > this.maxMessageIdentifier)\n\t\t\t\tthrow Error (\"Too many messages:\"+messageCount);\n\n\t\t\twhile(this._sentMessages[this._message_identifier] !== undefined) {\n\t\t\t\tthis._message_identifier++;\n\t\t\t}\n\t\t\twireMessage.messageIdentifier = this._message_identifier;\n\t\t\tthis._sentMessages[wireMessage.messageIdentifier] = wireMessage;\n\t\t\tif (wireMessage.type === MESSAGE_TYPE.PUBLISH) {\n\t\t\t\tthis.store(\"Sent:\", wireMessage);\n\t\t\t}\n\t\t\tif (this._message_identifier === this.maxMessageIdentifier) {\n\t\t\t\tthis._message_identifier = 1;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t * Called when the underlying websocket has been opened.\n\t * @ignore\n\t */\n\t\tClientImpl.prototype._on_socket_open = function () {\n\t\t// Create the CONNECT message object.\n\t\t\tvar wireMessage = new WireMessage(MESSAGE_TYPE.CONNECT, this.connectOptions);\n\t\t\twireMessage.clientId = this.clientId;\n\t\t\tthis._socket_send(wireMessage);\n\t\t};\n\n\t\t/**\n\t * Called when the underlying websocket has received a complete packet.\n\t * @ignore\n\t */\n\t\tClientImpl.prototype._on_socket_message = function (event) {\n\t\t\tthis._trace(\"Client._on_socket_message\", event.data);\n\t\t\tvar messages = this._deframeMessages(event.data);\n\t\t\tfor (var i = 0; i < messages.length; i+=1) {\n\t\t\t\tthis._handleMessage(messages[i]);\n\t\t\t}\n\t\t};\n\n\t\tClientImpl.prototype._deframeMessages = function(data) {\n\t\t\tvar byteArray = new Uint8Array(data);\n\t\t\tvar messages = [];\n\t\t\tif (this.receiveBuffer) {\n\t\t\t\tvar newData = new Uint8Array(this.receiveBuffer.length+byteArray.length);\n\t\t\t\tnewData.set(this.receiveBuffer);\n\t\t\t\tnewData.set(byteArray,this.receiveBuffer.length);\n\t\t\t\tbyteArray = newData;\n\t\t\t\tdelete this.receiveBuffer;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tvar offset = 0;\n\t\t\t\twhile(offset < byteArray.length) {\n\t\t\t\t\tvar result = decodeMessage(byteArray,offset);\n\t\t\t\t\tvar wireMessage = result[0];\n\t\t\t\t\toffset = result[1];\n\t\t\t\t\tif (wireMessage !== null) {\n\t\t\t\t\t\tmessages.push(wireMessage);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (offset < byteArray.length) {\n\t\t\t\t\tthis.receiveBuffer = byteArray.subarray(offset);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tvar errorStack = ((error.hasOwnProperty(\"stack\") == \"undefined\") ? error.stack.toString() : \"No Error Stack Available\");\n\t\t\t\tthis._disconnected(ERROR.INTERNAL_ERROR.code , format(ERROR.INTERNAL_ERROR, [error.message,errorStack]));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn messages;\n\t\t};\n\n\t\tClientImpl.prototype._handleMessage = function(wireMessage) {\n\n\t\t\tthis._trace(\"Client._handleMessage\", wireMessage);\n\n\t\t\ttry {\n\t\t\t\tswitch(wireMessage.type) {\n\t\t\t\tcase MESSAGE_TYPE.CONNACK:\n\t\t\t\t\tthis._connectTimeout.cancel();\n\t\t\t\t\tif (this._reconnectTimeout)\n\t\t\t\t\t\tthis._reconnectTimeout.cancel();\n\n\t\t\t\t\t// If we have started using clean session then clear up the local state.\n\t\t\t\t\tif (this.connectOptions.cleanSession) {\n\t\t\t\t\t\tfor (var key in this._sentMessages) {\n\t\t\t\t\t\t\tvar sentMessage = this._sentMessages[key];\n\t\t\t\t\t\t\tlocalStorage.removeItem(\"Sent:\"+this._localKey+sentMessage.messageIdentifier);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._sentMessages = {};\n\n\t\t\t\t\t\tfor (var key in this._receivedMessages) {\n\t\t\t\t\t\t\tvar receivedMessage = this._receivedMessages[key];\n\t\t\t\t\t\t\tlocalStorage.removeItem(\"Received:\"+this._localKey+receivedMessage.messageIdentifier);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._receivedMessages = {};\n\t\t\t\t\t}\n\t\t\t\t\t// Client connected and ready for business.\n\t\t\t\t\tif (wireMessage.returnCode === 0) {\n\n\t\t\t\t\t\tthis.connected = true;\n\t\t\t\t\t\t// Jump to the end of the list of uris and stop looking for a good host.\n\n\t\t\t\t\t\tif (this.connectOptions.uris)\n\t\t\t\t\t\t\tthis.hostIndex = this.connectOptions.uris.length;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._disconnected(ERROR.CONNACK_RETURNCODE.code , format(ERROR.CONNACK_RETURNCODE, [wireMessage.returnCode, CONNACK_RC[wireMessage.returnCode]]));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Resend messages.\n\t\t\t\t\tvar sequencedMessages = [];\n\t\t\t\t\tfor (var msgId in this._sentMessages) {\n\t\t\t\t\t\tif (this._sentMessages.hasOwnProperty(msgId))\n\t\t\t\t\t\t\tsequencedMessages.push(this._sentMessages[msgId]);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Also schedule qos 0 buffered messages if any\n\t\t\t\t\tif (this._buffered_msg_queue.length > 0) {\n\t\t\t\t\t\tvar msg = null;\n\t\t\t\t\t\twhile ((msg = this._buffered_msg_queue.pop())) {\n\t\t\t\t\t\t\tsequencedMessages.push(msg);\n\t\t\t\t\t\t\tif (this.onMessageDelivered)\n\t\t\t\t\t\t\t\tthis._notify_msg_sent[msg] = this.onMessageDelivered(msg.payloadMessage);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Sort sentMessages into the original sent order.\n\t\t\t\t\tvar sequencedMessages = sequencedMessages.sort(function(a,b) {return a.sequence - b.sequence;} );\n\t\t\t\t\tfor (var i=0, len=sequencedMessages.length; i<len; i++) {\n\t\t\t\t\t\tvar sentMessage = sequencedMessages[i];\n\t\t\t\t\t\tif (sentMessage.type == MESSAGE_TYPE.PUBLISH && sentMessage.pubRecReceived) {\n\t\t\t\t\t\t\tvar pubRelMessage = new WireMessage(MESSAGE_TYPE.PUBREL, {messageIdentifier:sentMessage.messageIdentifier});\n\t\t\t\t\t\t\tthis._schedule_message(pubRelMessage);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._schedule_message(sentMessage);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Execute the connectOptions.onSuccess callback if there is one.\n\t\t\t\t\t// Will also now return if this connection was the result of an automatic\n\t\t\t\t\t// reconnect and which URI was successfully connected to.\n\t\t\t\t\tif (this.connectOptions.onSuccess) {\n\t\t\t\t\t\tthis.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});\n\t\t\t\t\t}\n\n\t\t\t\t\tvar reconnected = false;\n\t\t\t\t\tif (this._reconnecting) {\n\t\t\t\t\t\treconnected = true;\n\t\t\t\t\t\tthis._reconnectInterval = 1;\n\t\t\t\t\t\tthis._reconnecting = false;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Execute the onConnected callback if there is one.\n\t\t\t\t\tthis._connected(reconnected, this._wsuri);\n\n\t\t\t\t\t// Process all queued messages now that the connection is established.\n\t\t\t\t\tthis._process_queue();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MESSAGE_TYPE.PUBLISH:\n\t\t\t\t\tthis._receivePublish(wireMessage);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MESSAGE_TYPE.PUBACK:\n\t\t\t\t\tvar sentMessage = this._sentMessages[wireMessage.messageIdentifier];\n\t\t\t\t\t// If this is a re flow of a PUBACK after we have restarted receivedMessage will not exist.\n\t\t\t\t\tif (sentMessage) {\n\t\t\t\t\t\tdelete this._sentMessages[wireMessage.messageIdentifier];\n\t\t\t\t\t\tlocalStorage.removeItem(\"Sent:\"+this._localKey+wireMessage.messageIdentifier);\n\t\t\t\t\t\tif (this.onMessageDelivered)\n\t\t\t\t\t\t\tthis.onMessageDelivered(sentMessage.payloadMessage);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MESSAGE_TYPE.PUBREC:\n\t\t\t\t\tvar sentMessage = this._sentMessages[wireMessage.messageIdentifier];\n\t\t\t\t\t// If this is a re flow of a PUBREC after we have restarted receivedMessage will not exist.\n\t\t\t\t\tif (sentMessage) {\n\t\t\t\t\t\tsentMessage.pubRecReceived = true;\n\t\t\t\t\t\tvar pubRelMessage = new WireMessage(MESSAGE_TYPE.PUBREL, {messageIdentifier:wireMessage.messageIdentifier});\n\t\t\t\t\t\tthis.store(\"Sent:\", sentMessage);\n\t\t\t\t\t\tthis._schedule_message(pubRelMessage);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MESSAGE_TYPE.PUBREL:\n\t\t\t\t\tvar receivedMessage = this._receivedMessages[wireMessage.messageIdentifier];\n\t\t\t\t\tlocalStorage.removeItem(\"Received:\"+this._localKey+wireMessage.messageIdentifier);\n\t\t\t\t\t// If this is a re flow of a PUBREL after we have restarted receivedMessage will not exist.\n\t\t\t\t\tif (receivedMessage) {\n\t\t\t\t\t\tthis._receiveMessage(receivedMessage);\n\t\t\t\t\t\tdelete this._receivedMessages[wireMessage.messageIdentifier];\n\t\t\t\t\t}\n\t\t\t\t\t// Always flow PubComp, we may have previously flowed PubComp but the server lost it and restarted.\n\t\t\t\t\tvar pubCompMessage = new WireMessage(MESSAGE_TYPE.PUBCOMP, {messageIdentifier:wireMessage.messageIdentifier});\n\t\t\t\t\tthis._schedule_message(pubCompMessage);\n\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MESSAGE_TYPE.PUBCOMP:\n\t\t\t\t\tvar sentMessage = this._sentMessages[wireMessage.messageIdentifier];\n\t\t\t\t\tdelete this._sentMessages[wireMessage.messageIdentifier];\n\t\t\t\t\tlocalStorage.removeItem(\"Sent:\"+this._localKey+wireMessage.messageIdentifier);\n\t\t\t\t\tif (this.onMessageDelivered)\n\t\t\t\t\t\tthis.onMessageDelivered(sentMessage.payloadMessage);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MESSAGE_TYPE.SUBACK:\n\t\t\t\t\tvar sentMessage = this._sentMessages[wireMessage.messageIdentifier];\n\t\t\t\t\tif (sentMessage) {\n\t\t\t\t\t\tif(sentMessage.timeOut)\n\t\t\t\t\t\t\tsentMessage.timeOut.cancel();\n\t\t\t\t\t\t// This will need to be fixed when we add multiple topic support\n\t\t\t\t\t\tif (wireMessage.returnCode[0] === 0x80) {\n\t\t\t\t\t\t\tif (sentMessage.onFailure) {\n\t\t\t\t\t\t\t\tsentMessage.onFailure(wireMessage.returnCode);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (sentMessage.onSuccess) {\n\t\t\t\t\t\t\tsentMessage.onSuccess(wireMessage.returnCode);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete this._sentMessages[wireMessage.messageIdentifier];\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MESSAGE_TYPE.UNSUBACK:\n\t\t\t\t\tvar sentMessage = this._sentMessages[wireMessage.messageIdentifier];\n\t\t\t\t\tif (sentMessage) {\n\t\t\t\t\t\tif (sentMessage.timeOut)\n\t\t\t\t\t\t\tsentMessage.timeOut.cancel();\n\t\t\t\t\t\tif (sentMessage.callback) {\n\t\t\t\t\t\t\tsentMessage.callback();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete this._sentMessages[wireMessage.messageIdentifier];\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MESSAGE_TYPE.PINGRESP:\n\t\t\t\t/* The sendPinger or receivePinger may have sent a ping, the receivePinger has already been reset. */\n\t\t\t\t\tthis.sendPinger.reset();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MESSAGE_TYPE.DISCONNECT:\n\t\t\t\t// Clients do not expect to receive disconnect packets.\n\t\t\t\t\tthis._disconnected(ERROR.INVALID_MQTT_MESSAGE_TYPE.code , format(ERROR.INVALID_MQTT_MESSAGE_TYPE, [wireMessage.type]));\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis._disconnected(ERROR.INVALID_MQTT_MESSAGE_TYPE.code , format(ERROR.INVALID_MQTT_MESSAGE_TYPE, [wireMessage.type]));\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tvar errorStack = ((error.hasOwnProperty(\"stack\") == \"undefined\") ? error.stack.toString() : \"No Error Stack Available\");\n\t\t\t\tthis._disconnected(ERROR.INTERNAL_ERROR.code , format(ERROR.INTERNAL_ERROR, [error.message,errorStack]));\n\t\t\t\treturn;\n\t\t\t}\n\t\t};\n\n\t\t/** @ignore */\n\t\tClientImpl.prototype._on_socket_error = function (error) {\n\t\t\tif (!this._reconnecting) {\n\t\t\t\tthis._disconnected(ERROR.SOCKET_ERROR.code , format(ERROR.SOCKET_ERROR, [error.data]));\n\t\t\t}\n\t\t};\n\n\t\t/** @ignore */\n\t\tClientImpl.prototype._on_socket_close = function () {\n\t\t\tif (!this._reconnecting) {\n\t\t\t\tthis._disconnected(ERROR.SOCKET_CLOSE.code , format(ERROR.SOCKET_CLOSE));\n\t\t\t}\n\t\t};\n\n\t\t/** @ignore */\n\t\tClientImpl.prototype._socket_send = function (wireMessage) {\n\n\t\t\tif (wireMessage.type == 1) {\n\t\t\t\tvar wireMessageMasked = this._traceMask(wireMessage, \"password\");\n\t\t\t\tthis._trace(\"Client._socket_send\", wireMessageMasked);\n\t\t\t}\n\t\t\telse this._trace(\"Client._socket_send\", wireMessage);\n\n\t\t\tthis.socket.send(wireMessage.encode());\n\t\t\t/* We have proved to the server we are alive. */\n\t\t\tthis.sendPinger.reset();\n\t\t};\n\n\t\t/** @ignore */\n\t\tClientImpl.prototype._receivePublish = function (wireMessage) {\n\t\t\tswitch(wireMessage.payloadMessage.qos) {\n\t\t\tcase \"undefined\":\n\t\t\tcase 0:\n\t\t\t\tthis._receiveMessage(wireMessage);\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\tvar pubAckMessage = new WireMessage(MESSAGE_TYPE.PUBACK, {messageIdentifier:wireMessage.messageIdentifier});\n\t\t\t\tthis._schedule_message(pubAckMessage);\n\t\t\t\tthis._receiveMessage(wireMessage);\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\tthis._receivedMessages[wireMessage.messageIdentifier] = wireMessage;\n\t\t\t\tthis.store(\"Received:\", wireMessage);\n\t\t\t\tvar pubRecMessage = new WireMessage(MESSAGE_TYPE.PUBREC, {messageIdentifier:wireMessage.messageIdentifier});\n\t\t\t\tthis._schedule_message(pubRecMessage);\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow Error(\"Invaild qos=\" + wireMessage.payloadMessage.qos);\n\t\t\t}\n\t\t};\n\n\t\t/** @ignore */\n\t\tClientImpl.prototype._receiveMessage = function (wireMessage) {\n\t\t\tif (this.onMessageArrived) {\n\t\t\t\tthis.onMessageArrived(wireMessage.payloadMessage);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t * Client has connected.\n\t * @param {reconnect} [boolean] indicate if this was a result of reconnect operation.\n\t * @param {uri} [string] fully qualified WebSocket URI of the server.\n\t */\n\t\tClientImpl.prototype._connected = function (reconnect, uri) {\n\t\t// Execute the onConnected callback if there is one.\n\t\t\tif (this.onConnected)\n\t\t\t\tthis.onConnected(reconnect, uri);\n\t\t};\n\n\t\t/**\n\t * Attempts to reconnect the client to the server.\n   * For each reconnect attempt, will double the reconnect interval\n   * up to 128 seconds.\n\t */\n\t\tClientImpl.prototype._reconnect = function () {\n\t\t\tthis._trace(\"Client._reconnect\");\n\t\t\tif (!this.connected) {\n\t\t\t\tthis._reconnecting = true;\n\t\t\t\tthis.sendPinger.cancel();\n\t\t\t\tthis.receivePinger.cancel();\n\t\t\t\tif (this._reconnectInterval < 128)\n\t\t\t\t\tthis._reconnectInterval = this._reconnectInterval * 2;\n\t\t\t\tif (this.connectOptions.uris) {\n\t\t\t\t\tthis.hostIndex = 0;\n\t\t\t\t\tthis._doConnect(this.connectOptions.uris[0]);\n\t\t\t\t} else {\n\t\t\t\t\tthis._doConnect(this.uri);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t * Client has disconnected either at its own request or because the server\n\t * or network disconnected it. Remove all non-durable state.\n\t * @param {errorCode} [number] the error number.\n\t * @param {errorText} [string] the error text.\n\t * @ignore\n\t */\n\t\tClientImpl.prototype._disconnected = function (errorCode, errorText) {\n\t\t\tthis._trace(\"Client._disconnected\", errorCode, errorText);\n\n\t\t\tif (errorCode !== undefined && this._reconnecting) {\n\t\t\t\t//Continue automatic reconnect process\n\t\t\t\tthis._reconnectTimeout = new Timeout(this, this._reconnectInterval, this._reconnect);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.sendPinger.cancel();\n\t\t\tthis.receivePinger.cancel();\n\t\t\tif (this._connectTimeout) {\n\t\t\t\tthis._connectTimeout.cancel();\n\t\t\t\tthis._connectTimeout = null;\n\t\t\t}\n\n\t\t\t// Clear message buffers.\n\t\t\tthis._msg_queue = [];\n\t\t\tthis._buffered_msg_queue = [];\n\t\t\tthis._notify_msg_sent = {};\n\n\t\t\tif (this.socket) {\n\t\t\t// Cancel all socket callbacks so that they cannot be driven again by this socket.\n\t\t\t\tthis.socket.onopen = null;\n\t\t\t\tthis.socket.onmessage = null;\n\t\t\t\tthis.socket.onerror = null;\n\t\t\t\tthis.socket.onclose = null;\n\t\t\t\tif (this.socket.readyState === 1)\n\t\t\t\t\tthis.socket.close();\n\t\t\t\tdelete this.socket;\n\t\t\t}\n\n\t\t\tif (this.connectOptions.uris && this.hostIndex < this.connectOptions.uris.length-1) {\n\t\t\t// Try the next host.\n\t\t\t\tthis.hostIndex++;\n\t\t\t\tthis._doConnect(this.connectOptions.uris[this.hostIndex]);\n\t\t\t} else {\n\n\t\t\t\tif (errorCode === undefined) {\n\t\t\t\t\terrorCode = ERROR.OK.code;\n\t\t\t\t\terrorText = format(ERROR.OK);\n\t\t\t\t}\n\n\t\t\t\t// Run any application callbacks last as they may attempt to reconnect and hence create a new socket.\n\t\t\t\tif (this.connected) {\n\t\t\t\t\tthis.connected = false;\n\t\t\t\t\t// Execute the connectionLostCallback if there is one, and we were connected.\n\t\t\t\t\tif (this.onConnectionLost) {\n\t\t\t\t\t\tthis.onConnectionLost({errorCode:errorCode, errorMessage:errorText, reconnect:this.connectOptions.reconnect, uri:this._wsuri});\n\t\t\t\t\t}\n\t\t\t\t\tif (errorCode !== ERROR.OK.code && this.connectOptions.reconnect) {\n\t\t\t\t\t// Start automatic reconnect process for the very first time since last successful connect.\n\t\t\t\t\t\tthis._reconnectInterval = 1;\n\t\t\t\t\t\tthis._reconnect();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t// Otherwise we never had a connection, so indicate that the connect has failed.\n\t\t\t\t\tif (this.connectOptions.mqttVersion === 4 && this.connectOptions.mqttVersionExplicit === false) {\n\t\t\t\t\t\tthis._trace(\"Failed to connect V4, dropping back to V3\");\n\t\t\t\t\t\tthis.connectOptions.mqttVersion = 3;\n\t\t\t\t\t\tif (this.connectOptions.uris) {\n\t\t\t\t\t\t\tthis.hostIndex = 0;\n\t\t\t\t\t\t\tthis._doConnect(this.connectOptions.uris[0]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._doConnect(this.uri);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if(this.connectOptions.onFailure) {\n\t\t\t\t\t\tthis.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext, errorCode:errorCode, errorMessage:errorText});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/** @ignore */\n\t\tClientImpl.prototype._trace = function () {\n\t\t// Pass trace message back to client's callback function\n\t\t\tif (this.traceFunction) {\n\t\t\t\tvar args = Array.prototype.slice.call(arguments);\n\t\t\t\tfor (var i in args)\n\t\t\t\t{\n\t\t\t\t\tif (typeof args[i] !== \"undefined\")\n\t\t\t\t\t\targs.splice(i, 1, JSON.stringify(args[i]));\n\t\t\t\t}\n\t\t\t\tvar record = args.join(\"\");\n\t\t\t\tthis.traceFunction ({severity: \"Debug\", message: record\t});\n\t\t\t}\n\n\t\t\t//buffer style trace\n\t\t\tif ( this._traceBuffer !== null ) {\n\t\t\t\tfor (var i = 0, max = arguments.length; i < max; i++) {\n\t\t\t\t\tif ( this._traceBuffer.length == this._MAX_TRACE_ENTRIES ) {\n\t\t\t\t\t\tthis._traceBuffer.shift();\n\t\t\t\t\t}\n\t\t\t\t\tif (i === 0) this._traceBuffer.push(arguments[i]);\n\t\t\t\t\telse if (typeof arguments[i] === \"undefined\" ) this._traceBuffer.push(arguments[i]);\n\t\t\t\t\telse this._traceBuffer.push(\"  \"+JSON.stringify(arguments[i]));\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/** @ignore */\n\t\tClientImpl.prototype._traceMask = function (traceObject, masked) {\n\t\t\tvar traceObjectMasked = {};\n\t\t\tfor (var attr in traceObject) {\n\t\t\t\tif (traceObject.hasOwnProperty(attr)) {\n\t\t\t\t\tif (attr == masked)\n\t\t\t\t\t\ttraceObjectMasked[attr] = \"******\";\n\t\t\t\t\telse\n\t\t\t\t\t\ttraceObjectMasked[attr] = traceObject[attr];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn traceObjectMasked;\n\t\t};\n\n\t\t// ------------------------------------------------------------------------\n\t\t// Public Programming interface.\n\t\t// ------------------------------------------------------------------------\n\n\t\t/**\n\t * The JavaScript application communicates to the server using a {@link Paho.Client} object.\n\t * <p>\n\t * Most applications will create just one Client object and then call its connect() method,\n\t * however applications can create more than one Client object if they wish.\n\t * In this case the combination of host, port and clientId attributes must be different for each Client object.\n\t * <p>\n\t * The send, subscribe and unsubscribe methods are implemented as asynchronous JavaScript methods\n\t * (even though the underlying protocol exchange might be synchronous in nature).\n\t * This means they signal their completion by calling back to the application,\n\t * via Success or Failure callback functions provided by the application on the method in question.\n\t * Such callbacks are called at most once per method invocation and do not persist beyond the lifetime\n\t * of the script that made the invocation.\n\t * <p>\n\t * In contrast there are some callback functions, most notably <i>onMessageArrived</i>,\n\t * that are defined on the {@link Paho.Client} object.\n\t * These may get called multiple times, and aren't directly related to specific method invocations made by the client.\n\t *\n\t * @name Paho.Client\n\t *\n\t * @constructor\n\t *\n\t * @param {string} host - the address of the messaging server, as a fully qualified WebSocket URI, as a DNS name or dotted decimal IP address.\n\t * @param {number} port - the port number to connect to - only required if host is not a URI\n\t * @param {string} path - the path on the host to connect to - only used if host is not a URI. Default: '/mqtt'.\n\t * @param {string} clientId - the Messaging client identifier, between 1 and 23 characters in length.\n\t *\n\t * @property {string} host - <i>read only</i> the server's DNS hostname or dotted decimal IP address.\n\t * @property {number} port - <i>read only</i> the server's port.\n\t * @property {string} path - <i>read only</i> the server's path.\n\t * @property {string} clientId - <i>read only</i> used when connecting to the server.\n\t * @property {function} onConnectionLost - called when a connection has been lost.\n\t *                            after a connect() method has succeeded.\n\t *                            Establish the call back used when a connection has been lost. The connection may be\n\t *                            lost because the client initiates a disconnect or because the server or network\n\t *                            cause the client to be disconnected. The disconnect call back may be called without\n\t *                            the connectionComplete call back being invoked if, for example the client fails to\n\t *                            connect.\n\t *                            A single response object parameter is passed to the onConnectionLost callback containing the following fields:\n\t *                            <ol>\n\t *                            <li>errorCode\n\t *                            <li>errorMessage\n\t *                            </ol>\n\t * @property {function} onMessageDelivered - called when a message has been delivered.\n\t *                            All processing that this Client will ever do has been completed. So, for example,\n\t *                            in the case of a Qos=2 message sent by this client, the PubComp flow has been received from the server\n\t *                            and the message has been removed from persistent storage before this callback is invoked.\n\t *                            Parameters passed to the onMessageDelivered callback are:\n\t *                            <ol>\n\t *                            <li>{@link Paho.Message} that was delivered.\n\t *                            </ol>\n\t * @property {function} onMessageArrived - called when a message has arrived in this Paho.client.\n\t *                            Parameters passed to the onMessageArrived callback are:\n\t *                            <ol>\n\t *                            <li>{@link Paho.Message} that has arrived.\n\t *                            </ol>\n\t * @property {function} onConnected - called when a connection is successfully made to the server.\n\t *                                  after a connect() method.\n\t *                                  Parameters passed to the onConnected callback are:\n\t *                                  <ol>\n\t *                                  <li>reconnect (boolean) - If true, the connection was the result of a reconnect.</li>\n\t *                                  <li>URI (string) - The URI used to connect to the server.</li>\n\t *                                  </ol>\n\t * @property {boolean} disconnectedPublishing - if set, will enable disconnected publishing in\n\t *                                            in the event that the connection to the server is lost.\n\t * @property {number} disconnectedBufferSize - Used to set the maximum number of messages that the disconnected\n\t *                                             buffer will hold before rejecting new messages. Default size: 5000 messages\n\t * @property {function} trace - called whenever trace is called. TODO\n\t */\n\t\tvar Client = function (host, port, path, clientId) {\n\n\t\t\tvar uri;\n\n\t\t\tif (typeof host !== \"string\")\n\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof host, \"host\"]));\n\n\t\t\tif (arguments.length == 2) {\n\t\t\t// host: must be full ws:// uri\n\t\t\t// port: clientId\n\t\t\t\tclientId = port;\n\t\t\t\turi = host;\n\t\t\t\tvar match = uri.match(/^(wss?):\\/\\/((\\[(.+)\\])|([^\\/]+?))(:(\\d+))?(\\/.*)$/);\n\t\t\t\tif (match) {\n\t\t\t\t\thost = match[4]||match[2];\n\t\t\t\t\tport = parseInt(match[7]);\n\t\t\t\t\tpath = match[8];\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT,[host,\"host\"]));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (arguments.length == 3) {\n\t\t\t\t\tclientId = path;\n\t\t\t\t\tpath = \"/mqtt\";\n\t\t\t\t}\n\t\t\t\tif (typeof port !== \"number\" || port < 0)\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof port, \"port\"]));\n\t\t\t\tif (typeof path !== \"string\")\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof path, \"path\"]));\n\n\t\t\t\tvar ipv6AddSBracket = (host.indexOf(\":\") !== -1 && host.slice(0,1) !== \"[\" && host.slice(-1) !== \"]\");\n\t\t\t\turi = \"ws://\"+(ipv6AddSBracket?\"[\"+host+\"]\":host)+\":\"+port+path;\n\t\t\t}\n\n\t\t\tvar clientIdLength = 0;\n\t\t\tfor (var i = 0; i<clientId.length; i++) {\n\t\t\t\tvar charCode = clientId.charCodeAt(i);\n\t\t\t\tif (0xD800 <= charCode && charCode <= 0xDBFF)  {\n\t\t\t\t\ti++; // Surrogate pair.\n\t\t\t\t}\n\t\t\t\tclientIdLength++;\n\t\t\t}\n\t\t\tif (typeof clientId !== \"string\" || clientIdLength > 65535)\n\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [clientId, \"clientId\"]));\n\n\t\t\tvar client = new ClientImpl(uri, host, port, path, clientId);\n\n\t\t\t//Public Properties\n\t\t\tObject.defineProperties(this,{\n\t\t\t\t\"host\":{\n\t\t\t\t\tget: function() { return host; },\n\t\t\t\t\tset: function() { throw new Error(format(ERROR.UNSUPPORTED_OPERATION)); }\n\t\t\t\t},\n\t\t\t\t\"port\":{\n\t\t\t\t\tget: function() { return port; },\n\t\t\t\t\tset: function() { throw new Error(format(ERROR.UNSUPPORTED_OPERATION)); }\n\t\t\t\t},\n\t\t\t\t\"path\":{\n\t\t\t\t\tget: function() { return path; },\n\t\t\t\t\tset: function() { throw new Error(format(ERROR.UNSUPPORTED_OPERATION)); }\n\t\t\t\t},\n\t\t\t\t\"uri\":{\n\t\t\t\t\tget: function() { return uri; },\n\t\t\t\t\tset: function() { throw new Error(format(ERROR.UNSUPPORTED_OPERATION)); }\n\t\t\t\t},\n\t\t\t\t\"clientId\":{\n\t\t\t\t\tget: function() { return client.clientId; },\n\t\t\t\t\tset: function() { throw new Error(format(ERROR.UNSUPPORTED_OPERATION)); }\n\t\t\t\t},\n\t\t\t\t\"onConnected\":{\n\t\t\t\t\tget: function() { return client.onConnected; },\n\t\t\t\t\tset: function(newOnConnected) {\n\t\t\t\t\t\tif (typeof newOnConnected === \"function\")\n\t\t\t\t\t\t\tclient.onConnected = newOnConnected;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof newOnConnected, \"onConnected\"]));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"disconnectedPublishing\":{\n\t\t\t\t\tget: function() { return client.disconnectedPublishing; },\n\t\t\t\t\tset: function(newDisconnectedPublishing) {\n\t\t\t\t\t\tclient.disconnectedPublishing = newDisconnectedPublishing;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"disconnectedBufferSize\":{\n\t\t\t\t\tget: function() { return client.disconnectedBufferSize; },\n\t\t\t\t\tset: function(newDisconnectedBufferSize) {\n\t\t\t\t\t\tclient.disconnectedBufferSize = newDisconnectedBufferSize;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"onConnectionLost\":{\n\t\t\t\t\tget: function() { return client.onConnectionLost; },\n\t\t\t\t\tset: function(newOnConnectionLost) {\n\t\t\t\t\t\tif (typeof newOnConnectionLost === \"function\")\n\t\t\t\t\t\t\tclient.onConnectionLost = newOnConnectionLost;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof newOnConnectionLost, \"onConnectionLost\"]));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"onMessageDelivered\":{\n\t\t\t\t\tget: function() { return client.onMessageDelivered; },\n\t\t\t\t\tset: function(newOnMessageDelivered) {\n\t\t\t\t\t\tif (typeof newOnMessageDelivered === \"function\")\n\t\t\t\t\t\t\tclient.onMessageDelivered = newOnMessageDelivered;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof newOnMessageDelivered, \"onMessageDelivered\"]));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"onMessageArrived\":{\n\t\t\t\t\tget: function() { return client.onMessageArrived; },\n\t\t\t\t\tset: function(newOnMessageArrived) {\n\t\t\t\t\t\tif (typeof newOnMessageArrived === \"function\")\n\t\t\t\t\t\t\tclient.onMessageArrived = newOnMessageArrived;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof newOnMessageArrived, \"onMessageArrived\"]));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"trace\":{\n\t\t\t\t\tget: function() { return client.traceFunction; },\n\t\t\t\t\tset: function(trace) {\n\t\t\t\t\t\tif(typeof trace === \"function\"){\n\t\t\t\t\t\t\tclient.traceFunction = trace;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof trace, \"onTrace\"]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t/**\n\t\t * Connect this Messaging client to its server.\n\t\t *\n\t\t * @name Paho.Client#connect\n\t\t * @function\n\t\t * @param {object} connectOptions - Attributes used with the connection.\n\t\t * @param {number} connectOptions.timeout - If the connect has not succeeded within this\n\t\t *                    number of seconds, it is deemed to have failed.\n\t\t *                    The default is 30 seconds.\n\t\t * @param {string} connectOptions.userName - Authentication username for this connection.\n\t\t * @param {string} connectOptions.password - Authentication password for this connection.\n\t\t * @param {Paho.Message} connectOptions.willMessage - sent by the server when the client\n\t\t *                    disconnects abnormally.\n\t\t * @param {number} connectOptions.keepAliveInterval - the server disconnects this client if\n\t\t *                    there is no activity for this number of seconds.\n\t\t *                    The default value of 60 seconds is assumed if not set.\n\t\t * @param {boolean} connectOptions.cleanSession - if true(default) the client and server\n\t\t *                    persistent state is deleted on successful connect.\n\t\t * @param {boolean} connectOptions.useSSL - if present and true, use an SSL Websocket connection.\n\t\t * @param {object} connectOptions.invocationContext - passed to the onSuccess callback or onFailure callback.\n\t\t * @param {function} connectOptions.onSuccess - called when the connect acknowledgement\n\t\t *                    has been received from the server.\n\t\t * A single response object parameter is passed to the onSuccess callback containing the following fields:\n\t\t * <ol>\n\t\t * <li>invocationContext as passed in to the onSuccess method in the connectOptions.\n\t\t * </ol>\n\t * @param {function} connectOptions.onFailure - called when the connect request has failed or timed out.\n\t\t * A single response object parameter is passed to the onFailure callback containing the following fields:\n\t\t * <ol>\n\t\t * <li>invocationContext as passed in to the onFailure method in the connectOptions.\n\t\t * <li>errorCode a number indicating the nature of the error.\n\t\t * <li>errorMessage text describing the error.\n\t\t * </ol>\n\t * @param {array} connectOptions.hosts - If present this contains either a set of hostnames or fully qualified\n\t\t * WebSocket URIs (ws://iot.eclipse.org:80/ws), that are tried in order in place\n\t\t * of the host and port paramater on the construtor. The hosts are tried one at at time in order until\n\t\t * one of then succeeds.\n\t * @param {array} connectOptions.ports - If present the set of ports matching the hosts. If hosts contains URIs, this property\n\t\t * is not used.\n\t * @param {boolean} connectOptions.reconnect - Sets whether the client will automatically attempt to reconnect\n\t * to the server if the connection is lost.\n\t *<ul>\n\t *<li>If set to false, the client will not attempt to automatically reconnect to the server in the event that the\n\t * connection is lost.</li>\n\t *<li>If set to true, in the event that the connection is lost, the client will attempt to reconnect to the server.\n\t * It will initially wait 1 second before it attempts to reconnect, for every failed reconnect attempt, the delay\n\t * will double until it is at 2 minutes at which point the delay will stay at 2 minutes.</li>\n\t *</ul>\n\t * @param {number} connectOptions.mqttVersion - The version of MQTT to use to connect to the MQTT Broker.\n\t *<ul>\n\t *<li>3 - MQTT V3.1</li>\n\t *<li>4 - MQTT V3.1.1</li>\n\t *</ul>\n\t * @param {boolean} connectOptions.mqttVersionExplicit - If set to true, will force the connection to use the\n\t * selected MQTT Version or will fail to connect.\n\t * @param {array} connectOptions.uris - If present, should contain a list of fully qualified WebSocket uris\n\t * (e.g. ws://iot.eclipse.org:80/ws), that are tried in order in place of the host and port parameter of the construtor.\n\t * The uris are tried one at a time in order until one of them succeeds. Do not use this in conjunction with hosts as\n\t * the hosts array will be converted to uris and will overwrite this property.\n\t\t * @throws {InvalidState} If the client is not in disconnected state. The client must have received connectionLost\n\t\t * or disconnected before calling connect for a second or subsequent time.\n\t\t */\n\t\t\tthis.connect = function (connectOptions) {\n\t\t\t\tconnectOptions = connectOptions || {} ;\n\t\t\t\tvalidate(connectOptions,  {timeout:\"number\",\n\t\t\t\t\tuserName:\"string\",\n\t\t\t\t\tpassword:\"string\",\n\t\t\t\t\twillMessage:\"object\",\n\t\t\t\t\tkeepAliveInterval:\"number\",\n\t\t\t\t\tcleanSession:\"boolean\",\n\t\t\t\t\tuseSSL:\"boolean\",\n\t\t\t\t\tinvocationContext:\"object\",\n\t\t\t\t\tonSuccess:\"function\",\n\t\t\t\t\tonFailure:\"function\",\n\t\t\t\t\thosts:\"object\",\n\t\t\t\t\tports:\"object\",\n\t\t\t\t\treconnect:\"boolean\",\n\t\t\t\t\tmqttVersion:\"number\",\n\t\t\t\t\tmqttVersionExplicit:\"boolean\",\n\t\t\t\t\turis: \"object\"});\n\n\t\t\t\t// If no keep alive interval is set, assume 60 seconds.\n\t\t\t\tif (connectOptions.keepAliveInterval === undefined)\n\t\t\t\t\tconnectOptions.keepAliveInterval = 60;\n\n\t\t\t\tif (connectOptions.mqttVersion > 4 || connectOptions.mqttVersion < 3) {\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.mqttVersion, \"connectOptions.mqttVersion\"]));\n\t\t\t\t}\n\n\t\t\t\tif (connectOptions.mqttVersion === undefined) {\n\t\t\t\t\tconnectOptions.mqttVersionExplicit = false;\n\t\t\t\t\tconnectOptions.mqttVersion = 4;\n\t\t\t\t} else {\n\t\t\t\t\tconnectOptions.mqttVersionExplicit = true;\n\t\t\t\t}\n\n\t\t\t\t//Check that if password is set, so is username\n\t\t\t\tif (connectOptions.password !== undefined && connectOptions.userName === undefined)\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.password, \"connectOptions.password\"]));\n\n\t\t\t\tif (connectOptions.willMessage) {\n\t\t\t\t\tif (!(connectOptions.willMessage instanceof Message))\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [connectOptions.willMessage, \"connectOptions.willMessage\"]));\n\t\t\t\t\t// The will message must have a payload that can be represented as a string.\n\t\t\t\t\t// Cause the willMessage to throw an exception if this is not the case.\n\t\t\t\t\tconnectOptions.willMessage.stringPayload = null;\n\n\t\t\t\t\tif (typeof connectOptions.willMessage.destinationName === \"undefined\")\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof connectOptions.willMessage.destinationName, \"connectOptions.willMessage.destinationName\"]));\n\t\t\t\t}\n\t\t\t\tif (typeof connectOptions.cleanSession === \"undefined\")\n\t\t\t\t\tconnectOptions.cleanSession = true;\n\t\t\t\tif (connectOptions.hosts) {\n\n\t\t\t\t\tif (!(connectOptions.hosts instanceof Array) )\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.hosts, \"connectOptions.hosts\"]));\n\t\t\t\t\tif (connectOptions.hosts.length <1 )\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.hosts, \"connectOptions.hosts\"]));\n\n\t\t\t\t\tvar usingURIs = false;\n\t\t\t\t\tfor (var i = 0; i<connectOptions.hosts.length; i++) {\n\t\t\t\t\t\tif (typeof connectOptions.hosts[i] !== \"string\")\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof connectOptions.hosts[i], \"connectOptions.hosts[\"+i+\"]\"]));\n\t\t\t\t\t\tif (/^(wss?):\\/\\/((\\[(.+)\\])|([^\\/]+?))(:(\\d+))?(\\/.*)$/.test(connectOptions.hosts[i])) {\n\t\t\t\t\t\t\tif (i === 0) {\n\t\t\t\t\t\t\t\tusingURIs = true;\n\t\t\t\t\t\t\t} else if (!usingURIs) {\n\t\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.hosts[i], \"connectOptions.hosts[\"+i+\"]\"]));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (usingURIs) {\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.hosts[i], \"connectOptions.hosts[\"+i+\"]\"]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!usingURIs) {\n\t\t\t\t\t\tif (!connectOptions.ports)\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.ports, \"connectOptions.ports\"]));\n\t\t\t\t\t\tif (!(connectOptions.ports instanceof Array) )\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.ports, \"connectOptions.ports\"]));\n\t\t\t\t\t\tif (connectOptions.hosts.length !== connectOptions.ports.length)\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.ports, \"connectOptions.ports\"]));\n\n\t\t\t\t\t\tconnectOptions.uris = [];\n\n\t\t\t\t\t\tfor (var i = 0; i<connectOptions.hosts.length; i++) {\n\t\t\t\t\t\t\tif (typeof connectOptions.ports[i] !== \"number\" || connectOptions.ports[i] < 0)\n\t\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof connectOptions.ports[i], \"connectOptions.ports[\"+i+\"]\"]));\n\t\t\t\t\t\t\tvar host = connectOptions.hosts[i];\n\t\t\t\t\t\t\tvar port = connectOptions.ports[i];\n\n\t\t\t\t\t\t\tvar ipv6 = (host.indexOf(\":\") !== -1);\n\t\t\t\t\t\t\turi = \"ws://\"+(ipv6?\"[\"+host+\"]\":host)+\":\"+port+path;\n\t\t\t\t\t\t\tconnectOptions.uris.push(uri);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconnectOptions.uris = connectOptions.hosts;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tclient.connect(connectOptions);\n\t\t\t};\n\n\t\t\t/**\n\t\t * Subscribe for messages, request receipt of a copy of messages sent to the destinations described by the filter.\n\t\t *\n\t\t * @name Paho.Client#subscribe\n\t\t * @function\n\t\t * @param {string} filter describing the destinations to receive messages from.\n\t\t * <br>\n\t\t * @param {object} subscribeOptions - used to control the subscription\n\t\t *\n\t\t * @param {number} subscribeOptions.qos - the maximum qos of any publications sent\n\t\t *                                  as a result of making this subscription.\n\t\t * @param {object} subscribeOptions.invocationContext - passed to the onSuccess callback\n\t\t *                                  or onFailure callback.\n\t\t * @param {function} subscribeOptions.onSuccess - called when the subscribe acknowledgement\n\t\t *                                  has been received from the server.\n\t\t *                                  A single response object parameter is passed to the onSuccess callback containing the following fields:\n\t\t *                                  <ol>\n\t\t *                                  <li>invocationContext if set in the subscribeOptions.\n\t\t *                                  </ol>\n\t\t * @param {function} subscribeOptions.onFailure - called when the subscribe request has failed or timed out.\n\t\t *                                  A single response object parameter is passed to the onFailure callback containing the following fields:\n\t\t *                                  <ol>\n\t\t *                                  <li>invocationContext - if set in the subscribeOptions.\n\t\t *                                  <li>errorCode - a number indicating the nature of the error.\n\t\t *                                  <li>errorMessage - text describing the error.\n\t\t *                                  </ol>\n\t\t * @param {number} subscribeOptions.timeout - which, if present, determines the number of\n\t\t *                                  seconds after which the onFailure calback is called.\n\t\t *                                  The presence of a timeout does not prevent the onSuccess\n\t\t *                                  callback from being called when the subscribe completes.\n\t\t * @throws {InvalidState} if the client is not in connected state.\n\t\t */\n\t\t\tthis.subscribe = function (filter, subscribeOptions) {\n\t\t\t\tif (typeof filter !== \"string\" && filter.constructor !== Array)\n\t\t\t\t\tthrow new Error(\"Invalid argument:\"+filter);\n\t\t\t\tsubscribeOptions = subscribeOptions || {} ;\n\t\t\t\tvalidate(subscribeOptions,  {qos:\"number\",\n\t\t\t\t\tinvocationContext:\"object\",\n\t\t\t\t\tonSuccess:\"function\",\n\t\t\t\t\tonFailure:\"function\",\n\t\t\t\t\ttimeout:\"number\"\n\t\t\t\t});\n\t\t\t\tif (subscribeOptions.timeout && !subscribeOptions.onFailure)\n\t\t\t\t\tthrow new Error(\"subscribeOptions.timeout specified with no onFailure callback.\");\n\t\t\t\tif (typeof subscribeOptions.qos !== \"undefined\" && !(subscribeOptions.qos === 0 || subscribeOptions.qos === 1 || subscribeOptions.qos === 2 ))\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [subscribeOptions.qos, \"subscribeOptions.qos\"]));\n\t\t\t\tclient.subscribe(filter, subscribeOptions);\n\t\t\t};\n\n\t\t/**\n\t\t * Unsubscribe for messages, stop receiving messages sent to destinations described by the filter.\n\t\t *\n\t\t * @name Paho.Client#unsubscribe\n\t\t * @function\n\t\t * @param {string} filter - describing the destinations to receive messages from.\n\t\t * @param {object} unsubscribeOptions - used to control the subscription\n\t\t * @param {object} unsubscribeOptions.invocationContext - passed to the onSuccess callback\n\t\t\t\t\t\t\t\t\t\t\t  or onFailure callback.\n\t\t * @param {function} unsubscribeOptions.onSuccess - called when the unsubscribe acknowledgement has been received from the server.\n\t\t *                                    A single response object parameter is passed to the\n\t\t *                                    onSuccess callback containing the following fields:\n\t\t *                                    <ol>\n\t\t *                                    <li>invocationContext - if set in the unsubscribeOptions.\n\t\t *                                    </ol>\n\t\t * @param {function} unsubscribeOptions.onFailure called when the unsubscribe request has failed or timed out.\n\t\t *                                    A single response object parameter is passed to the onFailure callback containing the following fields:\n\t\t *                                    <ol>\n\t\t *                                    <li>invocationContext - if set in the unsubscribeOptions.\n\t\t *                                    <li>errorCode - a number indicating the nature of the error.\n\t\t *                                    <li>errorMessage - text describing the error.\n\t\t *                                    </ol>\n\t\t * @param {number} unsubscribeOptions.timeout - which, if present, determines the number of seconds\n\t\t *                                    after which the onFailure callback is called. The presence of\n\t\t *                                    a timeout does not prevent the onSuccess callback from being\n\t\t *                                    called when the unsubscribe completes\n\t\t * @throws {InvalidState} if the client is not in connected state.\n\t\t */\n\t\t\tthis.unsubscribe = function (filter, unsubscribeOptions) {\n\t\t\t\tif (typeof filter !== \"string\" && filter.constructor !== Array)\n\t\t\t\t\tthrow new Error(\"Invalid argument:\"+filter);\n\t\t\t\tunsubscribeOptions = unsubscribeOptions || {} ;\n\t\t\t\tvalidate(unsubscribeOptions,  {invocationContext:\"object\",\n\t\t\t\t\tonSuccess:\"function\",\n\t\t\t\t\tonFailure:\"function\",\n\t\t\t\t\ttimeout:\"number\"\n\t\t\t\t});\n\t\t\t\tif (unsubscribeOptions.timeout && !unsubscribeOptions.onFailure)\n\t\t\t\t\tthrow new Error(\"unsubscribeOptions.timeout specified with no onFailure callback.\");\n\t\t\t\tclient.unsubscribe(filter, unsubscribeOptions);\n\t\t\t};\n\n\t\t\t/**\n\t\t * Send a message to the consumers of the destination in the Message.\n\t\t *\n\t\t * @name Paho.Client#send\n\t\t * @function\n\t\t * @param {string|Paho.Message} topic - <b>mandatory</b> The name of the destination to which the message is to be sent.\n\t\t * \t\t\t\t\t   - If it is the only parameter, used as Paho.Message object.\n\t\t * @param {String|ArrayBuffer} payload - The message data to be sent.\n\t\t * @param {number} qos The Quality of Service used to deliver the message.\n\t\t * \t\t<dl>\n\t\t * \t\t\t<dt>0 Best effort (default).\n\t\t *     \t\t\t<dt>1 At least once.\n\t\t *     \t\t\t<dt>2 Exactly once.\n\t\t * \t\t</dl>\n\t\t * @param {Boolean} retained If true, the message is to be retained by the server and delivered\n\t\t *                     to both current and future subscriptions.\n\t\t *                     If false the server only delivers the message to current subscribers, this is the default for new Messages.\n\t\t *                     A received message has the retained boolean set to true if the message was published\n\t\t *                     with the retained boolean set to true\n\t\t *                     and the subscrption was made after the message has been published.\n\t\t * @throws {InvalidState} if the client is not connected.\n\t\t */\n\t\t\tthis.send = function (topic,payload,qos,retained) {\n\t\t\t\tvar message ;\n\n\t\t\t\tif(arguments.length === 0){\n\t\t\t\t\tthrow new Error(\"Invalid argument.\"+\"length\");\n\n\t\t\t\t}else if(arguments.length == 1) {\n\n\t\t\t\t\tif (!(topic instanceof Message) && (typeof topic !== \"string\"))\n\t\t\t\t\t\tthrow new Error(\"Invalid argument:\"+ typeof topic);\n\n\t\t\t\t\tmessage = topic;\n\t\t\t\t\tif (typeof message.destinationName === \"undefined\")\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT,[message.destinationName,\"Message.destinationName\"]));\n\t\t\t\t\tclient.send(message);\n\n\t\t\t\t}else {\n\t\t\t\t//parameter checking in Message object\n\t\t\t\t\tmessage = new Message(payload);\n\t\t\t\t\tmessage.destinationName = topic;\n\t\t\t\t\tif(arguments.length >= 3)\n\t\t\t\t\t\tmessage.qos = qos;\n\t\t\t\t\tif(arguments.length >= 4)\n\t\t\t\t\t\tmessage.retained = retained;\n\t\t\t\t\tclient.send(message);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t * Publish a message to the consumers of the destination in the Message.\n\t\t * Synonym for Paho.Mqtt.Client#send\n\t\t *\n\t\t * @name Paho.Client#publish\n\t\t * @function\n\t\t * @param {string|Paho.Message} topic - <b>mandatory</b> The name of the topic to which the message is to be published.\n\t\t * \t\t\t\t\t   - If it is the only parameter, used as Paho.Message object.\n\t\t * @param {String|ArrayBuffer} payload - The message data to be published.\n\t\t * @param {number} qos The Quality of Service used to deliver the message.\n\t\t * \t\t<dl>\n\t\t * \t\t\t<dt>0 Best effort (default).\n\t\t *     \t\t\t<dt>1 At least once.\n\t\t *     \t\t\t<dt>2 Exactly once.\n\t\t * \t\t</dl>\n\t\t * @param {Boolean} retained If true, the message is to be retained by the server and delivered\n\t\t *                     to both current and future subscriptions.\n\t\t *                     If false the server only delivers the message to current subscribers, this is the default for new Messages.\n\t\t *                     A received message has the retained boolean set to true if the message was published\n\t\t *                     with the retained boolean set to true\n\t\t *                     and the subscrption was made after the message has been published.\n\t\t * @throws {InvalidState} if the client is not connected.\n\t\t */\n\t\t\tthis.publish = function(topic,payload,qos,retained) {\n\t\t\t\tvar message ;\n\n\t\t\t\tif(arguments.length === 0){\n\t\t\t\t\tthrow new Error(\"Invalid argument.\"+\"length\");\n\n\t\t\t\t}else if(arguments.length == 1) {\n\n\t\t\t\t\tif (!(topic instanceof Message) && (typeof topic !== \"string\"))\n\t\t\t\t\t\tthrow new Error(\"Invalid argument:\"+ typeof topic);\n\n\t\t\t\t\tmessage = topic;\n\t\t\t\t\tif (typeof message.destinationName === \"undefined\")\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT,[message.destinationName,\"Message.destinationName\"]));\n\t\t\t\t\tclient.send(message);\n\n\t\t\t\t}else {\n\t\t\t\t\t//parameter checking in Message object\n\t\t\t\t\tmessage = new Message(payload);\n\t\t\t\t\tmessage.destinationName = topic;\n\t\t\t\t\tif(arguments.length >= 3)\n\t\t\t\t\t\tmessage.qos = qos;\n\t\t\t\t\tif(arguments.length >= 4)\n\t\t\t\t\t\tmessage.retained = retained;\n\t\t\t\t\tclient.send(message);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t * Normal disconnect of this Messaging client from its server.\n\t\t *\n\t\t * @name Paho.Client#disconnect\n\t\t * @function\n\t\t * @throws {InvalidState} if the client is already disconnected.\n\t\t */\n\t\t\tthis.disconnect = function () {\n\t\t\t\tclient.disconnect();\n\t\t\t};\n\n\t\t\t/**\n\t\t * Get the contents of the trace log.\n\t\t *\n\t\t * @name Paho.Client#getTraceLog\n\t\t * @function\n\t\t * @return {Object[]} tracebuffer containing the time ordered trace records.\n\t\t */\n\t\t\tthis.getTraceLog = function () {\n\t\t\t\treturn client.getTraceLog();\n\t\t\t};\n\n\t\t\t/**\n\t\t * Start tracing.\n\t\t *\n\t\t * @name Paho.Client#startTrace\n\t\t * @function\n\t\t */\n\t\t\tthis.startTrace = function () {\n\t\t\t\tclient.startTrace();\n\t\t\t};\n\n\t\t\t/**\n\t\t * Stop tracing.\n\t\t *\n\t\t * @name Paho.Client#stopTrace\n\t\t * @function\n\t\t */\n\t\t\tthis.stopTrace = function () {\n\t\t\t\tclient.stopTrace();\n\t\t\t};\n\n\t\t\tthis.isConnected = function() {\n\t\t\t\treturn client.connected;\n\t\t\t};\n\t\t};\n\n\t\t/**\n\t * An application message, sent or received.\n\t * <p>\n\t * All attributes may be null, which implies the default values.\n\t *\n\t * @name Paho.Message\n\t * @constructor\n\t * @param {String|ArrayBuffer} payload The message data to be sent.\n\t * <p>\n\t * @property {string} payloadString <i>read only</i> The payload as a string if the payload consists of valid UTF-8 characters.\n\t * @property {ArrayBuffer} payloadBytes <i>read only</i> The payload as an ArrayBuffer.\n\t * <p>\n\t * @property {string} destinationName <b>mandatory</b> The name of the destination to which the message is to be sent\n\t *                    (for messages about to be sent) or the name of the destination from which the message has been received.\n\t *                    (for messages received by the onMessage function).\n\t * <p>\n\t * @property {number} qos The Quality of Service used to deliver the message.\n\t * <dl>\n\t *     <dt>0 Best effort (default).\n\t *     <dt>1 At least once.\n\t *     <dt>2 Exactly once.\n\t * </dl>\n\t * <p>\n\t * @property {Boolean} retained If true, the message is to be retained by the server and delivered\n\t *                     to both current and future subscriptions.\n\t *                     If false the server only delivers the message to current subscribers, this is the default for new Messages.\n\t *                     A received message has the retained boolean set to true if the message was published\n\t *                     with the retained boolean set to true\n\t *                     and the subscrption was made after the message has been published.\n\t * <p>\n\t * @property {Boolean} duplicate <i>read only</i> If true, this message might be a duplicate of one which has already been received.\n\t *                     This is only set on messages received from the server.\n\t *\n\t */\n\t\tvar Message = function (newPayload) {\n\t\t\tvar payload;\n\t\t\tif (   typeof newPayload === \"string\" ||\n\t\tnewPayload instanceof ArrayBuffer ||\n\t\t(ArrayBuffer.isView(newPayload) && !(newPayload instanceof DataView))\n\t\t\t) {\n\t\t\t\tpayload = newPayload;\n\t\t\t} else {\n\t\t\t\tthrow (format(ERROR.INVALID_ARGUMENT, [newPayload, \"newPayload\"]));\n\t\t\t}\n\n\t\t\tvar destinationName;\n\t\t\tvar qos = 0;\n\t\t\tvar retained = false;\n\t\t\tvar duplicate = false;\n\n\t\t\tObject.defineProperties(this,{\n\t\t\t\t\"payloadString\":{\n\t\t\t\t\tenumerable : true,\n\t\t\t\t\tget : function () {\n\t\t\t\t\t\tif (typeof payload === \"string\")\n\t\t\t\t\t\t\treturn payload;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\treturn parseUTF8(payload, 0, payload.length);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"payloadBytes\":{\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tget: function() {\n\t\t\t\t\t\tif (typeof payload === \"string\") {\n\t\t\t\t\t\t\tvar buffer = new ArrayBuffer(UTF8Length(payload));\n\t\t\t\t\t\t\tvar byteStream = new Uint8Array(buffer);\n\t\t\t\t\t\t\tstringToUTF8(payload, byteStream, 0);\n\n\t\t\t\t\t\t\treturn byteStream;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn payload;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"destinationName\":{\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tget: function() { return destinationName; },\n\t\t\t\t\tset: function(newDestinationName) {\n\t\t\t\t\t\tif (typeof newDestinationName === \"string\")\n\t\t\t\t\t\t\tdestinationName = newDestinationName;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [newDestinationName, \"newDestinationName\"]));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"qos\":{\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tget: function() { return qos; },\n\t\t\t\t\tset: function(newQos) {\n\t\t\t\t\t\tif (newQos === 0 || newQos === 1 || newQos === 2 )\n\t\t\t\t\t\t\tqos = newQos;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthrow new Error(\"Invalid argument:\"+newQos);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"retained\":{\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tget: function() { return retained; },\n\t\t\t\t\tset: function(newRetained) {\n\t\t\t\t\t\tif (typeof newRetained === \"boolean\")\n\t\t\t\t\t\t\tretained = newRetained;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [newRetained, \"newRetained\"]));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"topic\":{\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tget: function() { return destinationName; },\n\t\t\t\t\tset: function(newTopic) {destinationName=newTopic;}\n\t\t\t\t},\n\t\t\t\t\"duplicate\":{\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tget: function() { return duplicate; },\n\t\t\t\t\tset: function(newDuplicate) {duplicate=newDuplicate;}\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\t// Module contents.\n\t\treturn {\n\t\t\tClient: Client,\n\t\t\tMessage: Message\n\t\t};\n\t// eslint-disable-next-line no-nested-ternary\n\t})(typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {});\n\treturn PahoMQTT;\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\ntslib_1.__exportStar(require(\"./EventStreamMarshaller\"), exports);\ntslib_1.__exportStar(require(\"./Int64\"), exports);\n//# sourceMappingURL=index.js.map","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['textract'] = {};\nAWS.Textract = Service.defineService('textract', ['2018-06-27']);\nObject.defineProperty(apiLoader.services['textract'], '2018-06-27', {\n  get: function get() {\n    var model = require('../apis/textract-2018-06-27.min.json');\n    model.paginators = require('../apis/textract-2018-06-27.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.Textract;\n","require('./browser_loader');\n\nvar AWS = require('./core');\n\nif (typeof window !== 'undefined') window.AWS = AWS;\nif (typeof module !== 'undefined') {\n    /**\n     * @api private\n     */\n    module.exports = AWS;\n}\nif (typeof self !== 'undefined') self.AWS = AWS;\n\n/**\n * @private\n * DO NOT REMOVE\n * browser builder will strip out this line if services are supplied on the command line.\n */\nrequire('../clients/browser_default');\n","'use strict';\n\nvar Observable = require('zen-observable');\n\nfunction addMethods(target, methods) {\n  Object.keys(methods).forEach(function(k) {\n    var desc = Object.getOwnPropertyDescriptor(methods, k);\n    desc.enumerable = false;\n    Object.defineProperty(target, k, desc);\n  });\n}\n\nfunction send(p, message, value) {\n  if (p._observer) {\n    sendMessage(p._observer, message, value);\n  } else if (p._observers) {\n    var list = [];\n    p._observers.forEach(function(to) { list.push(to); });\n    list.forEach(function(to) { sendMessage(to, message, value); });\n  }\n}\n\nfunction sendMessage(observer, message, value) {\n  if (observer.closed) {\n    return;\n  }\n  switch (message) {\n    case 'next': return observer.next(value);\n    case 'error': return observer.error(value);\n    case 'complete': return observer.complete(value);\n  }\n}\n\nfunction hasObserver(p) {\n  return p._observer || p._observers && p._observers.size > 0;\n}\n\nfunction addObserver(p, observer) {\n  if (p._observers) {\n    p._observers.add(observer);\n  } else if (!p._observer) {\n    p._observer = observer;\n  } else {\n    p._observers = new Set();\n    p._observers.add(p._observer);\n    p._observers.add(observer);\n    p._observer = null;\n  }\n}\n\nfunction deleteObserver(p, observer) {\n  if (p._observers) {\n    p._observers.delete(observer);\n  } else if (p._observer === observer) {\n    p._observer = null;\n  }\n}\n\nfunction notifyStart(p, opts) {\n  !hasObserver(p) && opts && opts.start && opts.start();\n}\n\nfunction notifyPause(p, opts) {\n  !hasObserver(p) && opts && opts.pause && opts.pause();\n}\n\nfunction PushStream(opts) {\n  var p = this;\n  this._observer = null;\n  this._observers = null;\n  this._observable = new Observable(function(observer) {\n    notifyStart(p, opts);\n    addObserver(p, observer);\n    return function() {\n      deleteObserver(p, observer);\n      notifyPause(p, opts);\n    };\n  });\n}\n\naddMethods(PushStream.prototype, {\n  get observable() { return this._observable; },\n  get observed() { return hasObserver(this); },\n  next: function(x) { send(this, 'next', x); },\n  error: function(e) { send(this, 'error', e); },\n  complete: function(x) { send(this, 'complete', x); },\n});\n\nmodule.exports = PushStream;\n","var getDefaultAdapter = function () {\n    if (window.indexedDB) {\n        return require('../indexeddb').default;\n    }\n    if (process && process.env) {\n        throw new Error('Node is not supported');\n    }\n};\nexport default getDefaultAdapter;\n//# sourceMappingURL=index.js.map","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\n\n/**\n * Represents a location in a Source.\n */\n\n/**\n * Takes a Source and a UTF-8 character offset, and returns the corresponding\n * line and column as a SourceLocation.\n */\nexport function getLocation(source, position) {\n  var lineRegexp = /\\r\\n|[\\n\\r]/g;\n  var line = 1;\n  var column = position + 1;\n  var match;\n\n  while ((match = lineRegexp.exec(source.body)) && match.index < position) {\n    line += 1;\n    column = position + 1 - (match.index + match[0].length);\n  }\n\n  return {\n    line: line,\n    column: column\n  };\n}","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\nimport { getLocation } from '../language/location';\n\n/**\n * Prints a GraphQLError to a string, representing useful location information\n * about the error's position in the source.\n */\nexport function printError(error) {\n  var printedLocations = [];\n\n  if (error.nodes) {\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = error.nodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var node = _step.value;\n\n        if (node.loc) {\n          printedLocations.push(highlightSourceAtLocation(node.loc.source, getLocation(node.loc.source, node.loc.start)));\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return != null) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n  } else if (error.source && error.locations) {\n    var source = error.source;\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = error.locations[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var location = _step2.value;\n        printedLocations.push(highlightSourceAtLocation(source, location));\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n          _iterator2.return();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n  }\n\n  return printedLocations.length === 0 ? error.message : [error.message].concat(printedLocations).join('\\n\\n') + '\\n';\n}\n/**\n * Render a helpful description of the location of the error in the GraphQL\n * Source document.\n */\n\nfunction highlightSourceAtLocation(source, location) {\n  var firstLineColumnOffset = source.locationOffset.column - 1;\n  var body = whitespace(firstLineColumnOffset) + source.body;\n  var lineIndex = location.line - 1;\n  var lineOffset = source.locationOffset.line - 1;\n  var lineNum = location.line + lineOffset;\n  var columnOffset = location.line === 1 ? firstLineColumnOffset : 0;\n  var columnNum = location.column + columnOffset;\n  var lines = body.split(/\\r\\n|[\\n\\r]/g);\n  return \"\".concat(source.name, \" (\").concat(lineNum, \":\").concat(columnNum, \")\\n\") + printPrefixedLines([// Lines specified like this: [\"prefix\", \"string\"],\n  [\"\".concat(lineNum - 1, \": \"), lines[lineIndex - 1]], [\"\".concat(lineNum, \": \"), lines[lineIndex]], ['', whitespace(columnNum - 1) + '^'], [\"\".concat(lineNum + 1, \": \"), lines[lineIndex + 1]]]);\n}\n\nfunction printPrefixedLines(lines) {\n  var existingLines = lines.filter(function (_ref) {\n    var _ = _ref[0],\n        line = _ref[1];\n    return line !== undefined;\n  });\n  var padLen = 0;\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = existingLines[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var _ref4 = _step3.value;\n      var prefix = _ref4[0];\n      padLen = Math.max(padLen, prefix.length);\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  return existingLines.map(function (_ref3) {\n    var prefix = _ref3[0],\n        line = _ref3[1];\n    return lpad(padLen, prefix) + line;\n  }).join('\\n');\n}\n\nfunction whitespace(len) {\n  return Array(len + 1).join(' ');\n}\n\nfunction lpad(len, str) {\n  return whitespace(len - str.length) + str;\n}","/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *  strict\n */\nimport { printError } from './printError';\nimport { getLocation } from '../language/location';\nexport function GraphQLError( // eslint-disable-line no-redeclare\nmessage, nodes, source, positions, path, originalError, extensions) {\n  // Compute list of blame nodes.\n  var _nodes = Array.isArray(nodes) ? nodes.length !== 0 ? nodes : undefined : nodes ? [nodes] : undefined; // Compute locations in the source for the given nodes/positions.\n\n\n  var _source = source;\n\n  if (!_source && _nodes) {\n    var node = _nodes[0];\n    _source = node && node.loc && node.loc.source;\n  }\n\n  var _positions = positions;\n\n  if (!_positions && _nodes) {\n    _positions = _nodes.reduce(function (list, node) {\n      if (node.loc) {\n        list.push(node.loc.start);\n      }\n\n      return list;\n    }, []);\n  }\n\n  if (_positions && _positions.length === 0) {\n    _positions = undefined;\n  }\n\n  var _locations;\n\n  if (positions && source) {\n    _locations = positions.map(function (pos) {\n      return getLocation(source, pos);\n    });\n  } else if (_nodes) {\n    _locations = _nodes.reduce(function (list, node) {\n      if (node.loc) {\n        list.push(getLocation(node.loc.source, node.loc.start));\n      }\n\n      return list;\n    }, []);\n  }\n\n  var _extensions = extensions || originalError && originalError.extensions;\n\n  Object.defineProperties(this, {\n    message: {\n      value: message,\n      // By being enumerable, JSON.stringify will include `message` in the\n      // resulting output. This ensures that the simplest possible GraphQL\n      // service adheres to the spec.\n      enumerable: true,\n      writable: true\n    },\n    locations: {\n      // Coercing falsey values to undefined ensures they will not be included\n      // in JSON.stringify() when not provided.\n      value: _locations || undefined,\n      // By being enumerable, JSON.stringify will include `locations` in the\n      // resulting output. This ensures that the simplest possible GraphQL\n      // service adheres to the spec.\n      enumerable: Boolean(_locations)\n    },\n    path: {\n      // Coercing falsey values to undefined ensures they will not be included\n      // in JSON.stringify() when not provided.\n      value: path || undefined,\n      // By being enumerable, JSON.stringify will include `path` in the\n      // resulting output. This ensures that the simplest possible GraphQL\n      // service adheres to the spec.\n      enumerable: Boolean(path)\n    },\n    nodes: {\n      value: _nodes || undefined\n    },\n    source: {\n      value: _source || undefined\n    },\n    positions: {\n      value: _positions || undefined\n    },\n    originalError: {\n      value: originalError\n    },\n    extensions: {\n      // Coercing falsey values to undefined ensures they will not be included\n      // in JSON.stringify() when not provided.\n      value: _extensions || undefined,\n      // By being enumerable, JSON.stringify will include `path` in the\n      // resulting output. This ensures that the simplest possible GraphQL\n      // service adheres to the spec.\n      enumerable: Boolean(_extensions)\n    }\n  }); // Include (non-enumerable) stack trace.\n\n  if (originalError && originalError.stack) {\n    Object.defineProperty(this, 'stack', {\n      value: originalError.stack,\n      writable: true,\n      configurable: true\n    });\n  } else if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, GraphQLError);\n  } else {\n    Object.defineProperty(this, 'stack', {\n      value: Error().stack,\n      writable: true,\n      configurable: true\n    });\n  }\n}\nGraphQLError.prototype = Object.create(Error.prototype, {\n  constructor: {\n    value: GraphQLError\n  },\n  name: {\n    value: 'GraphQLError'\n  },\n  toString: {\n    value: function toString() {\n      return printError(this);\n    }\n  }\n});","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","var util = require('../util');\n\nfunction QueryParamSerializer() {\n}\n\nQueryParamSerializer.prototype.serialize = function(params, shape, fn) {\n  serializeStructure('', params, shape, fn);\n};\n\nfunction ucfirst(shape) {\n  if (shape.isQueryName || shape.api.protocol !== 'ec2') {\n    return shape.name;\n  } else {\n    return shape.name[0].toUpperCase() + shape.name.substr(1);\n  }\n}\n\nfunction serializeStructure(prefix, struct, rules, fn) {\n  util.each(rules.members, function(name, member) {\n    var value = struct[name];\n    if (value === null || value === undefined) return;\n\n    var memberName = ucfirst(member);\n    memberName = prefix ? prefix + '.' + memberName : memberName;\n    serializeMember(memberName, value, member, fn);\n  });\n}\n\nfunction serializeMap(name, map, rules, fn) {\n  var i = 1;\n  util.each(map, function (key, value) {\n    var prefix = rules.flattened ? '.' : '.entry.';\n    var position = prefix + (i++) + '.';\n    var keyName = position + (rules.key.name || 'key');\n    var valueName = position + (rules.value.name || 'value');\n    serializeMember(name + keyName, key, rules.key, fn);\n    serializeMember(name + valueName, value, rules.value, fn);\n  });\n}\n\nfunction serializeList(name, list, rules, fn) {\n  var memberRules = rules.member || {};\n\n  if (list.length === 0) {\n    fn.call(this, name, null);\n    return;\n  }\n\n  util.arrayEach(list, function (v, n) {\n    var suffix = '.' + (n + 1);\n    if (rules.api.protocol === 'ec2') {\n      // Do nothing for EC2\n      suffix = suffix + ''; // make linter happy\n    } else if (rules.flattened) {\n      if (memberRules.name) {\n        var parts = name.split('.');\n        parts.pop();\n        parts.push(ucfirst(memberRules));\n        name = parts.join('.');\n      }\n    } else {\n      suffix = '.' + (memberRules.name ? memberRules.name : 'member') + suffix;\n    }\n    serializeMember(name + suffix, v, memberRules, fn);\n  });\n}\n\nfunction serializeMember(name, value, rules, fn) {\n  if (value === null || value === undefined) return;\n  if (rules.type === 'structure') {\n    serializeStructure(name, value, rules, fn);\n  } else if (rules.type === 'list') {\n    serializeList(name, value, rules, fn);\n  } else if (rules.type === 'map') {\n    serializeMap(name, value, rules, fn);\n  } else {\n    fn(name, rules.toWireFormat(value).toString());\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = QueryParamSerializer;\n","var util = require('../util');\nvar XmlNode = require('./xml-node').XmlNode;\nvar XmlText = require('./xml-text').XmlText;\n\nfunction XmlBuilder() { }\n\nXmlBuilder.prototype.toXML = function(params, shape, rootElement, noEmpty) {\n  var xml = new XmlNode(rootElement);\n  applyNamespaces(xml, shape, true);\n  serialize(xml, params, shape);\n  return xml.children.length > 0 || noEmpty ? xml.toString() : '';\n};\n\nfunction serialize(xml, value, shape) {\n  switch (shape.type) {\n    case 'structure': return serializeStructure(xml, value, shape);\n    case 'map': return serializeMap(xml, value, shape);\n    case 'list': return serializeList(xml, value, shape);\n    default: return serializeScalar(xml, value, shape);\n  }\n}\n\nfunction serializeStructure(xml, params, shape) {\n  util.arrayEach(shape.memberNames, function(memberName) {\n    var memberShape = shape.members[memberName];\n    if (memberShape.location !== 'body') return;\n\n    var value = params[memberName];\n    var name = memberShape.name;\n    if (value !== undefined && value !== null) {\n      if (memberShape.isXmlAttribute) {\n        xml.addAttribute(name, value);\n      } else if (memberShape.flattened) {\n        serialize(xml, value, memberShape);\n      } else {\n        var element = new XmlNode(name);\n        xml.addChildNode(element);\n        applyNamespaces(element, memberShape);\n        serialize(element, value, memberShape);\n      }\n    }\n  });\n}\n\nfunction serializeMap(xml, map, shape) {\n  var xmlKey = shape.key.name || 'key';\n  var xmlValue = shape.value.name || 'value';\n\n  util.each(map, function(key, value) {\n    var entry = new XmlNode(shape.flattened ? shape.name : 'entry');\n    xml.addChildNode(entry);\n\n    var entryKey = new XmlNode(xmlKey);\n    var entryValue = new XmlNode(xmlValue);\n    entry.addChildNode(entryKey);\n    entry.addChildNode(entryValue);\n\n    serialize(entryKey, key, shape.key);\n    serialize(entryValue, value, shape.value);\n  });\n}\n\nfunction serializeList(xml, list, shape) {\n  if (shape.flattened) {\n    util.arrayEach(list, function(value) {\n      var name = shape.member.name || shape.name;\n      var element = new XmlNode(name);\n      xml.addChildNode(element);\n      serialize(element, value, shape.member);\n    });\n  } else {\n    util.arrayEach(list, function(value) {\n      var name = shape.member.name || 'member';\n      var element = new XmlNode(name);\n      xml.addChildNode(element);\n      serialize(element, value, shape.member);\n    });\n  }\n}\n\nfunction serializeScalar(xml, value, shape) {\n  xml.addChildNode(\n    new XmlText(shape.toWireFormat(value))\n  );\n}\n\nfunction applyNamespaces(xml, shape, isRoot) {\n  var uri, prefix = 'xmlns';\n  if (shape.xmlNamespaceUri) {\n    uri = shape.xmlNamespaceUri;\n    if (shape.xmlNamespacePrefix) prefix += ':' + shape.xmlNamespacePrefix;\n  } else if (isRoot && shape.api.xmlNamespaceUri) {\n    uri = shape.api.xmlNamespaceUri;\n  }\n\n  if (uri) xml.addAttribute(prefix, uri);\n}\n\n/**\n * @api private\n */\nmodule.exports = XmlBuilder;\n","var escapeAttribute = require('./escape-attribute').escapeAttribute;\n\n/**\n * Represents an XML node.\n * @api private\n */\nfunction XmlNode(name, children) {\n    if (children === void 0) { children = []; }\n    this.name = name;\n    this.children = children;\n    this.attributes = {};\n}\nXmlNode.prototype.addAttribute = function (name, value) {\n    this.attributes[name] = value;\n    return this;\n};\nXmlNode.prototype.addChildNode = function (child) {\n    this.children.push(child);\n    return this;\n};\nXmlNode.prototype.removeAttribute = function (name) {\n    delete this.attributes[name];\n    return this;\n};\nXmlNode.prototype.toString = function () {\n    var hasChildren = Boolean(this.children.length);\n    var xmlText = '<' + this.name;\n    // add attributes\n    var attributes = this.attributes;\n    for (var i = 0, attributeNames = Object.keys(attributes); i < attributeNames.length; i++) {\n        var attributeName = attributeNames[i];\n        var attribute = attributes[attributeName];\n        if (typeof attribute !== 'undefined' && attribute !== null) {\n            xmlText += ' ' + attributeName + '=\\\"' + escapeAttribute('' + attribute) + '\\\"';\n        }\n    }\n    return xmlText += !hasChildren ? '/>' : '>' + this.children.map(function (c) { return c.toString(); }).join('') + '</' + this.name + '>';\n};\n\n/**\n * @api private\n */\nmodule.exports = {\n    XmlNode: XmlNode\n};\n","/**\n * Escapes characters that can not be in an XML attribute.\n */\nfunction escapeAttribute(value) {\n    return value.replace(/&/g, '&amp;').replace(/'/g, '&apos;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    escapeAttribute: escapeAttribute\n};\n","var escapeElement = require('./escape-element').escapeElement;\n\n/**\n * Represents an XML text value.\n * @api private\n */\nfunction XmlText(value) {\n    this.value = value;\n}\n\nXmlText.prototype.toString = function () {\n    return escapeElement('' + this.value);\n};\n\n/**\n * @api private\n */\nmodule.exports = {\n    XmlText: XmlText\n};\n","/**\n * Escapes characters that can not be in an XML element.\n */\nfunction escapeElement(value) {\n    return value.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    escapeElement: escapeElement\n};\n","function apiLoader(svc, version) {\n  if (!apiLoader.services.hasOwnProperty(svc)) {\n    throw new Error('InvalidService: Failed to load api for ' + svc);\n  }\n  return apiLoader.services[svc][version];\n}\n\n/**\n * @api private\n *\n * This member of AWS.apiLoader is private, but changing it will necessitate a\n * change to ../scripts/services-table-generator.ts\n */\napiLoader.services = {};\n\n/**\n * @api private\n */\nmodule.exports = apiLoader;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LRU_1 = require(\"./utils/LRU\");\nvar CACHE_SIZE = 1000;\n/**\n * Inspired node-lru-cache[https://github.com/isaacs/node-lru-cache]\n */\nvar EndpointCache = /** @class */ (function () {\n    function EndpointCache(maxSize) {\n        if (maxSize === void 0) { maxSize = CACHE_SIZE; }\n        this.maxSize = maxSize;\n        this.cache = new LRU_1.LRUCache(maxSize);\n    }\n    ;\n    Object.defineProperty(EndpointCache.prototype, \"size\", {\n        get: function () {\n            return this.cache.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EndpointCache.prototype.put = function (key, value) {\n      var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n        var endpointRecord = this.populateValue(value);\n        this.cache.put(keyString, endpointRecord);\n    };\n    EndpointCache.prototype.get = function (key) {\n      var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n        var now = Date.now();\n        var records = this.cache.get(keyString);\n        if (records) {\n            for (var i = 0; i < records.length; i++) {\n                var record = records[i];\n                if (record.Expire < now) {\n                    this.cache.remove(keyString);\n                    return undefined;\n                }\n            }\n        }\n        return records;\n    };\n    EndpointCache.getKeyString = function (key) {\n        var identifiers = [];\n        var identifierNames = Object.keys(key).sort();\n        for (var i = 0; i < identifierNames.length; i++) {\n            var identifierName = identifierNames[i];\n            if (key[identifierName] === undefined)\n                continue;\n            identifiers.push(key[identifierName]);\n        }\n        return identifiers.join(' ');\n    };\n    EndpointCache.prototype.populateValue = function (endpoints) {\n        var now = Date.now();\n        return endpoints.map(function (endpoint) { return ({\n            Address: endpoint.Address || '',\n            Expire: now + (endpoint.CachePeriodInMinutes || 1) * 60 * 1000\n        }); });\n    };\n    EndpointCache.prototype.empty = function () {\n        this.cache.empty();\n    };\n    EndpointCache.prototype.remove = function (key) {\n      var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n        this.cache.remove(keyString);\n    };\n    return EndpointCache;\n}());\nexports.EndpointCache = EndpointCache;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LinkedListNode = /** @class */ (function () {\n    function LinkedListNode(key, value) {\n        this.key = key;\n        this.value = value;\n    }\n    return LinkedListNode;\n}());\nvar LRUCache = /** @class */ (function () {\n    function LRUCache(size) {\n        this.nodeMap = {};\n        this.size = 0;\n        if (typeof size !== 'number' || size < 1) {\n            throw new Error('Cache size can only be positive number');\n        }\n        this.sizeLimit = size;\n    }\n    Object.defineProperty(LRUCache.prototype, \"length\", {\n        get: function () {\n            return this.size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LRUCache.prototype.prependToList = function (node) {\n        if (!this.headerNode) {\n            this.tailNode = node;\n        }\n        else {\n            this.headerNode.prev = node;\n            node.next = this.headerNode;\n        }\n        this.headerNode = node;\n        this.size++;\n    };\n    LRUCache.prototype.removeFromTail = function () {\n        if (!this.tailNode) {\n            return undefined;\n        }\n        var node = this.tailNode;\n        var prevNode = node.prev;\n        if (prevNode) {\n            prevNode.next = undefined;\n        }\n        node.prev = undefined;\n        this.tailNode = prevNode;\n        this.size--;\n        return node;\n    };\n    LRUCache.prototype.detachFromList = function (node) {\n        if (this.headerNode === node) {\n            this.headerNode = node.next;\n        }\n        if (this.tailNode === node) {\n            this.tailNode = node.prev;\n        }\n        if (node.prev) {\n            node.prev.next = node.next;\n        }\n        if (node.next) {\n            node.next.prev = node.prev;\n        }\n        node.next = undefined;\n        node.prev = undefined;\n        this.size--;\n    };\n    LRUCache.prototype.get = function (key) {\n        if (this.nodeMap[key]) {\n            var node = this.nodeMap[key];\n            this.detachFromList(node);\n            this.prependToList(node);\n            return node.value;\n        }\n    };\n    LRUCache.prototype.remove = function (key) {\n        if (this.nodeMap[key]) {\n            var node = this.nodeMap[key];\n            this.detachFromList(node);\n            delete this.nodeMap[key];\n        }\n    };\n    LRUCache.prototype.put = function (key, value) {\n        if (this.nodeMap[key]) {\n            this.remove(key);\n        }\n        else if (this.size === this.sizeLimit) {\n            var tailNode = this.removeFromTail();\n            var key_1 = tailNode.key;\n            delete this.nodeMap[key_1];\n        }\n        var newNode = new LinkedListNode(key, value);\n        this.nodeMap[key] = newNode;\n        this.prependToList(newNode);\n    };\n    LRUCache.prototype.empty = function () {\n        var keys = Object.keys(this.nodeMap);\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            var node = this.nodeMap[key];\n            this.detachFromList(node);\n            delete this.nodeMap[key];\n        }\n    };\n    return LRUCache;\n}());\nexports.LRUCache = LRUCache;","var AWS = require('./core');\nvar Api = require('./model/api');\nvar regionConfig = require('./region_config');\n\nvar inherit = AWS.util.inherit;\nvar clientCount = 0;\n\n/**\n * The service class representing an AWS service.\n *\n * @class_abstract This class is an abstract class.\n *\n * @!attribute apiVersions\n *   @return [Array<String>] the list of API versions supported by this service.\n *   @readonly\n */\nAWS.Service = inherit({\n  /**\n   * Create a new service object with a configuration object\n   *\n   * @param config [map] a map of configuration options\n   */\n  constructor: function Service(config) {\n    if (!this.loadServiceClass) {\n      throw AWS.util.error(new Error(),\n        'Service must be constructed with `new\\' operator');\n    }\n    var ServiceClass = this.loadServiceClass(config || {});\n    if (ServiceClass) {\n      var originalConfig = AWS.util.copy(config);\n      var svc = new ServiceClass(config);\n      Object.defineProperty(svc, '_originalConfig', {\n        get: function() { return originalConfig; },\n        enumerable: false,\n        configurable: true\n      });\n      svc._clientId = ++clientCount;\n      return svc;\n    }\n    this.initialize(config);\n  },\n\n  /**\n   * @api private\n   */\n  initialize: function initialize(config) {\n    var svcConfig = AWS.config[this.serviceIdentifier];\n    this.config = new AWS.Config(AWS.config);\n    if (svcConfig) this.config.update(svcConfig, true);\n    if (config) this.config.update(config, true);\n\n    this.validateService();\n    if (!this.config.endpoint) regionConfig(this);\n\n    this.config.endpoint = this.endpointFromTemplate(this.config.endpoint);\n    this.setEndpoint(this.config.endpoint);\n    //enable attaching listeners to service client\n    AWS.SequentialExecutor.call(this);\n    AWS.Service.addDefaultMonitoringListeners(this);\n    if ((this.config.clientSideMonitoring || AWS.Service._clientSideMonitoring) && this.publisher) {\n      var publisher = this.publisher;\n      this.addNamedListener('PUBLISH_API_CALL', 'apiCall', function PUBLISH_API_CALL(event) {\n        process.nextTick(function() {publisher.eventHandler(event);});\n      });\n      this.addNamedListener('PUBLISH_API_ATTEMPT', 'apiCallAttempt', function PUBLISH_API_ATTEMPT(event) {\n        process.nextTick(function() {publisher.eventHandler(event);});\n      });\n    }\n  },\n\n  /**\n   * @api private\n   */\n  validateService: function validateService() {\n  },\n\n  /**\n   * @api private\n   */\n  loadServiceClass: function loadServiceClass(serviceConfig) {\n    var config = serviceConfig;\n    if (!AWS.util.isEmpty(this.api)) {\n      return null;\n    } else if (config.apiConfig) {\n      return AWS.Service.defineServiceApi(this.constructor, config.apiConfig);\n    } else if (!this.constructor.services) {\n      return null;\n    } else {\n      config = new AWS.Config(AWS.config);\n      config.update(serviceConfig, true);\n      var version = config.apiVersions[this.constructor.serviceIdentifier];\n      version = version || config.apiVersion;\n      return this.getLatestServiceClass(version);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  getLatestServiceClass: function getLatestServiceClass(version) {\n    version = this.getLatestServiceVersion(version);\n    if (this.constructor.services[version] === null) {\n      AWS.Service.defineServiceApi(this.constructor, version);\n    }\n\n    return this.constructor.services[version];\n  },\n\n  /**\n   * @api private\n   */\n  getLatestServiceVersion: function getLatestServiceVersion(version) {\n    if (!this.constructor.services || this.constructor.services.length === 0) {\n      throw new Error('No services defined on ' +\n                      this.constructor.serviceIdentifier);\n    }\n\n    if (!version) {\n      version = 'latest';\n    } else if (AWS.util.isType(version, Date)) {\n      version = AWS.util.date.iso8601(version).split('T')[0];\n    }\n\n    if (Object.hasOwnProperty(this.constructor.services, version)) {\n      return version;\n    }\n\n    var keys = Object.keys(this.constructor.services).sort();\n    var selectedVersion = null;\n    for (var i = keys.length - 1; i >= 0; i--) {\n      // versions that end in \"*\" are not available on disk and can be\n      // skipped, so do not choose these as selectedVersions\n      if (keys[i][keys[i].length - 1] !== '*') {\n        selectedVersion = keys[i];\n      }\n      if (keys[i].substr(0, 10) <= version) {\n        return selectedVersion;\n      }\n    }\n\n    throw new Error('Could not find ' + this.constructor.serviceIdentifier +\n                    ' API to satisfy version constraint `' + version + '\\'');\n  },\n\n  /**\n   * @api private\n   */\n  api: {},\n\n  /**\n   * @api private\n   */\n  defaultRetryCount: 3,\n\n  /**\n   * @api private\n   */\n  customizeRequests: function customizeRequests(callback) {\n    if (!callback) {\n      this.customRequestHandler = null;\n    } else if (typeof callback === 'function') {\n      this.customRequestHandler = callback;\n    } else {\n      throw new Error('Invalid callback type \\'' + typeof callback + '\\' provided in customizeRequests');\n    }\n  },\n\n  /**\n   * Calls an operation on a service with the given input parameters.\n   *\n   * @param operation [String] the name of the operation to call on the service.\n   * @param params [map] a map of input options for the operation\n   * @callback callback function(err, data)\n   *   If a callback is supplied, it is called when a response is returned\n   *   from the service.\n   *   @param err [Error] the error object returned from the request.\n   *     Set to `null` if the request is successful.\n   *   @param data [Object] the de-serialized data returned from\n   *     the request. Set to `null` if a request error occurs.\n   */\n  makeRequest: function makeRequest(operation, params, callback) {\n    if (typeof params === 'function') {\n      callback = params;\n      params = null;\n    }\n\n    params = params || {};\n    if (this.config.params) { // copy only toplevel bound params\n      var rules = this.api.operations[operation];\n      if (rules) {\n        params = AWS.util.copy(params);\n        AWS.util.each(this.config.params, function(key, value) {\n          if (rules.input.members[key]) {\n            if (params[key] === undefined || params[key] === null) {\n              params[key] = value;\n            }\n          }\n        });\n      }\n    }\n\n    var request = new AWS.Request(this, operation, params);\n    this.addAllRequestListeners(request);\n    this.attachMonitoringEmitter(request);\n    if (callback) request.send(callback);\n    return request;\n  },\n\n  /**\n   * Calls an operation on a service with the given input parameters, without\n   * any authentication data. This method is useful for \"public\" API operations.\n   *\n   * @param operation [String] the name of the operation to call on the service.\n   * @param params [map] a map of input options for the operation\n   * @callback callback function(err, data)\n   *   If a callback is supplied, it is called when a response is returned\n   *   from the service.\n   *   @param err [Error] the error object returned from the request.\n   *     Set to `null` if the request is successful.\n   *   @param data [Object] the de-serialized data returned from\n   *     the request. Set to `null` if a request error occurs.\n   */\n  makeUnauthenticatedRequest: function makeUnauthenticatedRequest(operation, params, callback) {\n    if (typeof params === 'function') {\n      callback = params;\n      params = {};\n    }\n\n    var request = this.makeRequest(operation, params).toUnauthenticated();\n    return callback ? request.send(callback) : request;\n  },\n\n  /**\n   * Waits for a given state\n   *\n   * @param state [String] the state on the service to wait for\n   * @param params [map] a map of parameters to pass with each request\n   * @option params $waiter [map] a map of configuration options for the waiter\n   * @option params $waiter.delay [Number] The number of seconds to wait between\n   *                                       requests\n   * @option params $waiter.maxAttempts [Number] The maximum number of requests\n   *                                             to send while waiting\n   * @callback callback function(err, data)\n   *   If a callback is supplied, it is called when a response is returned\n   *   from the service.\n   *   @param err [Error] the error object returned from the request.\n   *     Set to `null` if the request is successful.\n   *   @param data [Object] the de-serialized data returned from\n   *     the request. Set to `null` if a request error occurs.\n   */\n  waitFor: function waitFor(state, params, callback) {\n    var waiter = new AWS.ResourceWaiter(this, state);\n    return waiter.wait(params, callback);\n  },\n\n  /**\n   * @api private\n   */\n  addAllRequestListeners: function addAllRequestListeners(request) {\n    var list = [AWS.events, AWS.EventListeners.Core, this.serviceInterface(),\n                AWS.EventListeners.CorePost];\n    for (var i = 0; i < list.length; i++) {\n      if (list[i]) request.addListeners(list[i]);\n    }\n\n    // disable parameter validation\n    if (!this.config.paramValidation) {\n      request.removeListener('validate',\n        AWS.EventListeners.Core.VALIDATE_PARAMETERS);\n    }\n\n    if (this.config.logger) { // add logging events\n      request.addListeners(AWS.EventListeners.Logger);\n    }\n\n    this.setupRequestListeners(request);\n    // call prototype's customRequestHandler\n    if (typeof this.constructor.prototype.customRequestHandler === 'function') {\n      this.constructor.prototype.customRequestHandler(request);\n    }\n    // call instance's customRequestHandler\n    if (Object.prototype.hasOwnProperty.call(this, 'customRequestHandler') && typeof this.customRequestHandler === 'function') {\n      this.customRequestHandler(request);\n    }\n  },\n\n  /**\n   * Event recording metrics for a whole API call.\n   * @returns {object} a subset of api call metrics\n   * @api private\n   */\n  apiCallEvent: function apiCallEvent(request) {\n    var api = request.service.api.operations[request.operation];\n    var monitoringEvent = {\n      Type: 'ApiCall',\n      Api: api ? api.name : request.operation,\n      Version: 1,\n      Service: request.service.api.serviceId || request.service.api.endpointPrefix,\n      Region: request.httpRequest.region,\n      MaxRetriesExceeded: 0,\n      UserAgent: request.httpRequest.getUserAgent(),\n    };\n    var response = request.response;\n    if (response.httpResponse.statusCode) {\n      monitoringEvent.FinalHttpStatusCode = response.httpResponse.statusCode;\n    }\n    if (response.error) {\n      var error = response.error;\n      var statusCode = response.httpResponse.statusCode;\n      if (statusCode > 299) {\n        if (error.code) monitoringEvent.FinalAwsException = error.code;\n        if (error.message) monitoringEvent.FinalAwsExceptionMessage = error.message;\n      } else {\n        if (error.code || error.name) monitoringEvent.FinalSdkException = error.code || error.name;\n        if (error.message) monitoringEvent.FinalSdkExceptionMessage = error.message;\n      }\n    }\n    return monitoringEvent;\n  },\n\n  /**\n   * Event recording metrics for an API call attempt.\n   * @returns {object} a subset of api call attempt metrics\n   * @api private\n   */\n  apiAttemptEvent: function apiAttemptEvent(request) {\n    var api = request.service.api.operations[request.operation];\n    var monitoringEvent = {\n      Type: 'ApiCallAttempt',\n      Api: api ? api.name : request.operation,\n      Version: 1,\n      Service: request.service.api.serviceId || request.service.api.endpointPrefix,\n      Fqdn: request.httpRequest.endpoint.hostname,\n      UserAgent: request.httpRequest.getUserAgent(),\n    };\n    var response = request.response;\n    if (response.httpResponse.statusCode) {\n      monitoringEvent.HttpStatusCode = response.httpResponse.statusCode;\n    }\n    if (\n      !request._unAuthenticated &&\n      request.service.config.credentials &&\n      request.service.config.credentials.accessKeyId\n    ) {\n      monitoringEvent.AccessKey = request.service.config.credentials.accessKeyId;\n    }\n    if (!response.httpResponse.headers) return monitoringEvent;\n    if (request.httpRequest.headers['x-amz-security-token']) {\n      monitoringEvent.SessionToken = request.httpRequest.headers['x-amz-security-token'];\n    }\n    if (response.httpResponse.headers['x-amzn-requestid']) {\n      monitoringEvent.XAmznRequestId = response.httpResponse.headers['x-amzn-requestid'];\n    }\n    if (response.httpResponse.headers['x-amz-request-id']) {\n      monitoringEvent.XAmzRequestId = response.httpResponse.headers['x-amz-request-id'];\n    }\n    if (response.httpResponse.headers['x-amz-id-2']) {\n      monitoringEvent.XAmzId2 = response.httpResponse.headers['x-amz-id-2'];\n    }\n    return monitoringEvent;\n  },\n\n  /**\n   * Add metrics of failed request.\n   * @api private\n   */\n  attemptFailEvent: function attemptFailEvent(request) {\n    var monitoringEvent = this.apiAttemptEvent(request);\n    var response = request.response;\n    var error = response.error;\n    if (response.httpResponse.statusCode > 299 ) {\n      if (error.code) monitoringEvent.AwsException = error.code;\n      if (error.message) monitoringEvent.AwsExceptionMessage = error.message;\n    } else {\n      if (error.code || error.name) monitoringEvent.SdkException = error.code || error.name;\n      if (error.message) monitoringEvent.SdkExceptionMessage = error.message;\n    }\n    return monitoringEvent;\n  },\n\n  /**\n   * Attach listeners to request object to fetch metrics of each request\n   * and emit data object through \\'ApiCall\\' and \\'ApiCallAttempt\\' events.\n   * @api private\n   */\n  attachMonitoringEmitter: function attachMonitoringEmitter(request) {\n    var attemptTimestamp; //timestamp marking the beginning of a request attempt\n    var attemptStartRealTime; //Start time of request attempt. Used to calculating attemptLatency\n    var attemptLatency; //latency from request sent out to http response reaching SDK\n    var callStartRealTime; //Start time of API call. Used to calculating API call latency\n    var attemptCount = 0; //request.retryCount is not reliable here\n    var region; //region cache region for each attempt since it can be updated in plase (e.g. s3)\n    var callTimestamp; //timestamp when the request is created\n    var self = this;\n    var addToHead = true;\n\n    request.on('validate', function () {\n      callStartRealTime = AWS.util.realClock.now();\n      callTimestamp = Date.now();\n    }, addToHead);\n    request.on('sign', function () {\n      attemptStartRealTime = AWS.util.realClock.now();\n      attemptTimestamp = Date.now();\n      region = request.httpRequest.region;\n      attemptCount++;\n    }, addToHead);\n    request.on('validateResponse', function() {\n      attemptLatency = Math.round(AWS.util.realClock.now() - attemptStartRealTime);\n    });\n    request.addNamedListener('API_CALL_ATTEMPT', 'success', function API_CALL_ATTEMPT() {\n      var apiAttemptEvent = self.apiAttemptEvent(request);\n      apiAttemptEvent.Timestamp = attemptTimestamp;\n      apiAttemptEvent.AttemptLatency = attemptLatency >= 0 ? attemptLatency : 0;\n      apiAttemptEvent.Region = region;\n      self.emit('apiCallAttempt', [apiAttemptEvent]);\n    });\n    request.addNamedListener('API_CALL_ATTEMPT_RETRY', 'retry', function API_CALL_ATTEMPT_RETRY() {\n      var apiAttemptEvent = self.attemptFailEvent(request);\n      apiAttemptEvent.Timestamp = attemptTimestamp;\n      //attemptLatency may not be available if fail before response\n      attemptLatency = attemptLatency ||\n        Math.round(AWS.util.realClock.now() - attemptStartRealTime);\n      apiAttemptEvent.AttemptLatency = attemptLatency >= 0 ? attemptLatency : 0;\n      apiAttemptEvent.Region = region;\n      self.emit('apiCallAttempt', [apiAttemptEvent]);\n    });\n    request.addNamedListener('API_CALL', 'complete', function API_CALL() {\n      var apiCallEvent = self.apiCallEvent(request);\n      apiCallEvent.AttemptCount = attemptCount;\n      if (apiCallEvent.AttemptCount <= 0) return;\n      apiCallEvent.Timestamp = callTimestamp;\n      var latency = Math.round(AWS.util.realClock.now() - callStartRealTime);\n      apiCallEvent.Latency = latency >= 0 ? latency : 0;\n      var response = request.response;\n      if (\n        typeof response.retryCount === 'number' &&\n        typeof response.maxRetries === 'number' &&\n        (response.retryCount >= response.maxRetries)\n      ) {\n        apiCallEvent.MaxRetriesExceeded = 1;\n      }\n      self.emit('apiCall', [apiCallEvent]);\n    });\n  },\n\n  /**\n   * Override this method to setup any custom request listeners for each\n   * new request to the service.\n   *\n   * @method_abstract This is an abstract method.\n   */\n  setupRequestListeners: function setupRequestListeners(request) {\n  },\n\n  /**\n   * Gets the signer class for a given request\n   * @api private\n   */\n  getSignerClass: function getSignerClass(request) {\n    var version;\n    // get operation authtype if present\n    var operation = null;\n    var authtype = '';\n    if (request) {\n      var operations = request.service.api.operations || {};\n      operation = operations[request.operation] || null;\n      authtype = operation ? operation.authtype : '';\n    }\n    if (this.config.signatureVersion) {\n      version = this.config.signatureVersion;\n    } else if (authtype === 'v4' || authtype === 'v4-unsigned-body') {\n      version = 'v4';\n    } else {\n      version = this.api.signatureVersion;\n    }\n    return AWS.Signers.RequestSigner.getVersion(version);\n  },\n\n  /**\n   * @api private\n   */\n  serviceInterface: function serviceInterface() {\n    switch (this.api.protocol) {\n      case 'ec2': return AWS.EventListeners.Query;\n      case 'query': return AWS.EventListeners.Query;\n      case 'json': return AWS.EventListeners.Json;\n      case 'rest-json': return AWS.EventListeners.RestJson;\n      case 'rest-xml': return AWS.EventListeners.RestXml;\n    }\n    if (this.api.protocol) {\n      throw new Error('Invalid service `protocol\\' ' +\n        this.api.protocol + ' in API config');\n    }\n  },\n\n  /**\n   * @api private\n   */\n  successfulResponse: function successfulResponse(resp) {\n    return resp.httpResponse.statusCode < 300;\n  },\n\n  /**\n   * How many times a failed request should be retried before giving up.\n   * the defaultRetryCount can be overriden by service classes.\n   *\n   * @api private\n   */\n  numRetries: function numRetries() {\n    if (this.config.maxRetries !== undefined) {\n      return this.config.maxRetries;\n    } else {\n      return this.defaultRetryCount;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  retryDelays: function retryDelays(retryCount) {\n    return AWS.util.calculateRetryDelay(retryCount, this.config.retryDelayOptions);\n  },\n\n  /**\n   * @api private\n   */\n  retryableError: function retryableError(error) {\n    if (this.timeoutError(error)) return true;\n    if (this.networkingError(error)) return true;\n    if (this.expiredCredentialsError(error)) return true;\n    if (this.throttledError(error)) return true;\n    if (error.statusCode >= 500) return true;\n    return false;\n  },\n\n  /**\n   * @api private\n   */\n  networkingError: function networkingError(error) {\n    return error.code === 'NetworkingError';\n  },\n\n  /**\n   * @api private\n   */\n  timeoutError: function timeoutError(error) {\n    return error.code === 'TimeoutError';\n  },\n\n  /**\n   * @api private\n   */\n  expiredCredentialsError: function expiredCredentialsError(error) {\n    // TODO : this only handles *one* of the expired credential codes\n    return (error.code === 'ExpiredTokenException');\n  },\n\n  /**\n   * @api private\n   */\n  clockSkewError: function clockSkewError(error) {\n    switch (error.code) {\n      case 'RequestTimeTooSkewed':\n      case 'RequestExpired':\n      case 'InvalidSignatureException':\n      case 'SignatureDoesNotMatch':\n      case 'AuthFailure':\n      case 'RequestInTheFuture':\n        return true;\n      default: return false;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  getSkewCorrectedDate: function getSkewCorrectedDate() {\n    return new Date(Date.now() + this.config.systemClockOffset);\n  },\n\n  /**\n   * @api private\n   */\n  applyClockOffset: function applyClockOffset(newServerTime) {\n    if (newServerTime) {\n      this.config.systemClockOffset = newServerTime - Date.now();\n    }\n  },\n\n  /**\n   * @api private\n   */\n  isClockSkewed: function isClockSkewed(newServerTime) {\n    if (newServerTime) {\n      return Math.abs(this.getSkewCorrectedDate().getTime() - newServerTime) >= 30000;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  throttledError: function throttledError(error) {\n    // this logic varies between services\n    switch (error.code) {\n      case 'ProvisionedThroughputExceededException':\n      case 'Throttling':\n      case 'ThrottlingException':\n      case 'RequestLimitExceeded':\n      case 'RequestThrottled':\n      case 'RequestThrottledException':\n      case 'TooManyRequestsException':\n      case 'TransactionInProgressException': //dynamodb\n        return true;\n      default:\n        return false;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  endpointFromTemplate: function endpointFromTemplate(endpoint) {\n    if (typeof endpoint !== 'string') return endpoint;\n\n    var e = endpoint;\n    e = e.replace(/\\{service\\}/g, this.api.endpointPrefix);\n    e = e.replace(/\\{region\\}/g, this.config.region);\n    e = e.replace(/\\{scheme\\}/g, this.config.sslEnabled ? 'https' : 'http');\n    return e;\n  },\n\n  /**\n   * @api private\n   */\n  setEndpoint: function setEndpoint(endpoint) {\n    this.endpoint = new AWS.Endpoint(endpoint, this.config);\n  },\n\n  /**\n   * @api private\n   */\n  paginationConfig: function paginationConfig(operation, throwException) {\n    var paginator = this.api.operations[operation].paginator;\n    if (!paginator) {\n      if (throwException) {\n        var e = new Error();\n        throw AWS.util.error(e, 'No pagination configuration for ' + operation);\n      }\n      return null;\n    }\n\n    return paginator;\n  }\n});\n\nAWS.util.update(AWS.Service, {\n\n  /**\n   * Adds one method for each operation described in the api configuration\n   *\n   * @api private\n   */\n  defineMethods: function defineMethods(svc) {\n    AWS.util.each(svc.prototype.api.operations, function iterator(method) {\n      if (svc.prototype[method]) return;\n      var operation = svc.prototype.api.operations[method];\n      if (operation.authtype === 'none') {\n        svc.prototype[method] = function (params, callback) {\n          return this.makeUnauthenticatedRequest(method, params, callback);\n        };\n      } else {\n        svc.prototype[method] = function (params, callback) {\n          return this.makeRequest(method, params, callback);\n        };\n      }\n    });\n  },\n\n  /**\n   * Defines a new Service class using a service identifier and list of versions\n   * including an optional set of features (functions) to apply to the class\n   * prototype.\n   *\n   * @param serviceIdentifier [String] the identifier for the service\n   * @param versions [Array<String>] a list of versions that work with this\n   *   service\n   * @param features [Object] an object to attach to the prototype\n   * @return [Class<Service>] the service class defined by this function.\n   */\n  defineService: function defineService(serviceIdentifier, versions, features) {\n    AWS.Service._serviceMap[serviceIdentifier] = true;\n    if (!Array.isArray(versions)) {\n      features = versions;\n      versions = [];\n    }\n\n    var svc = inherit(AWS.Service, features || {});\n\n    if (typeof serviceIdentifier === 'string') {\n      AWS.Service.addVersions(svc, versions);\n\n      var identifier = svc.serviceIdentifier || serviceIdentifier;\n      svc.serviceIdentifier = identifier;\n    } else { // defineService called with an API\n      svc.prototype.api = serviceIdentifier;\n      AWS.Service.defineMethods(svc);\n    }\n    AWS.SequentialExecutor.call(this.prototype);\n    //util.clientSideMonitoring is only available in node\n    if (!this.prototype.publisher && AWS.util.clientSideMonitoring) {\n      var Publisher = AWS.util.clientSideMonitoring.Publisher;\n      var configProvider = AWS.util.clientSideMonitoring.configProvider;\n      var publisherConfig = configProvider();\n      this.prototype.publisher = new Publisher(publisherConfig);\n      if (publisherConfig.enabled) {\n        //if csm is enabled in environment, SDK should send all metrics\n        AWS.Service._clientSideMonitoring = true;\n      }\n    }\n    AWS.SequentialExecutor.call(svc.prototype);\n    AWS.Service.addDefaultMonitoringListeners(svc.prototype);\n    return svc;\n  },\n\n  /**\n   * @api private\n   */\n  addVersions: function addVersions(svc, versions) {\n    if (!Array.isArray(versions)) versions = [versions];\n\n    svc.services = svc.services || {};\n    for (var i = 0; i < versions.length; i++) {\n      if (svc.services[versions[i]] === undefined) {\n        svc.services[versions[i]] = null;\n      }\n    }\n\n    svc.apiVersions = Object.keys(svc.services).sort();\n  },\n\n  /**\n   * @api private\n   */\n  defineServiceApi: function defineServiceApi(superclass, version, apiConfig) {\n    var svc = inherit(superclass, {\n      serviceIdentifier: superclass.serviceIdentifier\n    });\n\n    function setApi(api) {\n      if (api.isApi) {\n        svc.prototype.api = api;\n      } else {\n        svc.prototype.api = new Api(api);\n      }\n    }\n\n    if (typeof version === 'string') {\n      if (apiConfig) {\n        setApi(apiConfig);\n      } else {\n        try {\n          setApi(AWS.apiLoader(superclass.serviceIdentifier, version));\n        } catch (err) {\n          throw AWS.util.error(err, {\n            message: 'Could not find API configuration ' +\n              superclass.serviceIdentifier + '-' + version\n          });\n        }\n      }\n      if (!Object.prototype.hasOwnProperty.call(superclass.services, version)) {\n        superclass.apiVersions = superclass.apiVersions.concat(version).sort();\n      }\n      superclass.services[version] = svc;\n    } else {\n      setApi(version);\n    }\n\n    AWS.Service.defineMethods(svc);\n    return svc;\n  },\n\n  /**\n   * @api private\n   */\n  hasService: function(identifier) {\n    return Object.prototype.hasOwnProperty.call(AWS.Service._serviceMap, identifier);\n  },\n\n  /**\n   * @param attachOn attach default monitoring listeners to object\n   *\n   * Each monitoring event should be emitted from service client to service constructor prototype and then\n   * to global service prototype like bubbling up. These default monitoring events listener will transfer\n   * the monitoring events to the upper layer.\n   * @api private\n   */\n  addDefaultMonitoringListeners: function addDefaultMonitoringListeners(attachOn) {\n    attachOn.addNamedListener('MONITOR_EVENTS_BUBBLE', 'apiCallAttempt', function EVENTS_BUBBLE(event) {\n      var baseClass = Object.getPrototypeOf(attachOn);\n      if (baseClass._events) baseClass.emit('apiCallAttempt', [event]);\n    });\n    attachOn.addNamedListener('CALL_EVENTS_BUBBLE', 'apiCall', function CALL_EVENTS_BUBBLE(event) {\n      var baseClass = Object.getPrototypeOf(attachOn);\n      if (baseClass._events) baseClass.emit('apiCall', [event]);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  _serviceMap: {}\n});\n\nAWS.util.mixin(AWS.Service, AWS.SequentialExecutor);\n\n/**\n * @api private\n */\nmodule.exports = AWS.Service;\n","var util = require('./util');\nvar regionConfig = require('./region_config_data.json');\n\nfunction generateRegionPrefix(region) {\n  if (!region) return null;\n\n  var parts = region.split('-');\n  if (parts.length < 3) return null;\n  return parts.slice(0, parts.length - 2).join('-') + '-*';\n}\n\nfunction derivedKeys(service) {\n  var region = service.config.region;\n  var regionPrefix = generateRegionPrefix(region);\n  var endpointPrefix = service.api.endpointPrefix;\n\n  return [\n    [region, endpointPrefix],\n    [regionPrefix, endpointPrefix],\n    [region, '*'],\n    [regionPrefix, '*'],\n    ['*', endpointPrefix],\n    ['*', '*']\n  ].map(function(item) {\n    return item[0] && item[1] ? item.join('/') : null;\n  });\n}\n\nfunction applyConfig(service, config) {\n  util.each(config, function(key, value) {\n    if (key === 'globalEndpoint') return;\n    if (service.config[key] === undefined || service.config[key] === null) {\n      service.config[key] = value;\n    }\n  });\n}\n\nfunction configureEndpoint(service) {\n  var keys = derivedKeys(service);\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!key) continue;\n\n    if (Object.prototype.hasOwnProperty.call(regionConfig.rules, key)) {\n      var config = regionConfig.rules[key];\n      if (typeof config === 'string') {\n        config = regionConfig.patterns[config];\n      }\n\n      // set dualstack endpoint\n      if (service.config.useDualstack && util.isDualstackAvailable(service)) {\n        config = util.copy(config);\n        config.endpoint = '{service}.dualstack.{region}.amazonaws.com';\n      }\n\n      // set global endpoint\n      service.isGlobalEndpoint = !!config.globalEndpoint;\n\n      // signature version\n      if (!config.signatureVersion) config.signatureVersion = 'v4';\n\n      // merge config\n      applyConfig(service, config);\n      return;\n    }\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = configureEndpoint;\n","var AWS = require('./core');\nrequire('./credentials');\nrequire('./credentials/credential_provider_chain');\nvar PromisesDependency;\n\n/**\n * The main configuration class used by all service objects to set\n * the region, credentials, and other options for requests.\n *\n * By default, credentials and region settings are left unconfigured.\n * This should be configured by the application before using any\n * AWS service APIs.\n *\n * In order to set global configuration options, properties should\n * be assigned to the global {AWS.config} object.\n *\n * @see AWS.config\n *\n * @!group General Configuration Options\n *\n * @!attribute credentials\n *   @return [AWS.Credentials] the AWS credentials to sign requests with.\n *\n * @!attribute region\n *   @example Set the global region setting to us-west-2\n *     AWS.config.update({region: 'us-west-2'});\n *   @return [AWS.Credentials] The region to send service requests to.\n *   @see http://docs.amazonwebservices.com/general/latest/gr/rande.html\n *     A list of available endpoints for each AWS service\n *\n * @!attribute maxRetries\n *   @return [Integer] the maximum amount of retries to perform for a\n *     service request. By default this value is calculated by the specific\n *     service object that the request is being made to.\n *\n * @!attribute maxRedirects\n *   @return [Integer] the maximum amount of redirects to follow for a\n *     service request. Defaults to 10.\n *\n * @!attribute paramValidation\n *   @return [Boolean|map] whether input parameters should be validated against\n *     the operation description before sending the request. Defaults to true.\n *     Pass a map to enable any of the following specific validation features:\n *\n *     * **min** [Boolean] &mdash; Validates that a value meets the min\n *       constraint. This is enabled by default when paramValidation is set\n *       to `true`.\n *     * **max** [Boolean] &mdash; Validates that a value meets the max\n *       constraint.\n *     * **pattern** [Boolean] &mdash; Validates that a string value matches a\n *       regular expression.\n *     * **enum** [Boolean] &mdash; Validates that a string value matches one\n *       of the allowable enum values.\n *\n * @!attribute computeChecksums\n *   @return [Boolean] whether to compute checksums for payload bodies when\n *     the service accepts it (currently supported in S3 only).\n *\n * @!attribute convertResponseTypes\n *   @return [Boolean] whether types are converted when parsing response data.\n *     Currently only supported for JSON based services. Turning this off may\n *     improve performance on large response payloads. Defaults to `true`.\n *\n * @!attribute correctClockSkew\n *   @return [Boolean] whether to apply a clock skew correction and retry\n *     requests that fail because of an skewed client clock. Defaults to\n *     `false`.\n *\n * @!attribute sslEnabled\n *   @return [Boolean] whether SSL is enabled for requests\n *\n * @!attribute s3ForcePathStyle\n *   @return [Boolean] whether to force path style URLs for S3 objects\n *\n * @!attribute s3BucketEndpoint\n *   @note Setting this configuration option requires an `endpoint` to be\n *     provided explicitly to the service constructor.\n *   @return [Boolean] whether the provided endpoint addresses an individual\n *     bucket (false if it addresses the root API endpoint).\n *\n * @!attribute s3DisableBodySigning\n *   @return [Boolean] whether to disable S3 body signing when using signature version `v4`.\n *     Body signing can only be disabled when using https. Defaults to `true`.\n *\n * @!attribute useAccelerateEndpoint\n *   @note This configuration option is only compatible with S3 while accessing\n *     dns-compatible buckets.\n *   @return [Boolean] Whether to use the Accelerate endpoint with the S3 service.\n *     Defaults to `false`.\n *\n * @!attribute retryDelayOptions\n *   @example Set the base retry delay for all services to 300 ms\n *     AWS.config.update({retryDelayOptions: {base: 300}});\n *     // Delays with maxRetries = 3: 300, 600, 1200\n *   @example Set a custom backoff function to provide delay values on retries\n *     AWS.config.update({retryDelayOptions: {customBackoff: function(retryCount) {\n *       // returns delay in ms\n *     }}});\n *   @return [map] A set of options to configure the retry delay on retryable errors.\n *     Currently supported options are:\n *\n *     * **base** [Integer] &mdash; The base number of milliseconds to use in the\n *       exponential backoff for operation retries. Defaults to 100 ms for all services except\n *       DynamoDB, where it defaults to 50ms.\n *     * **customBackoff ** [function] &mdash; A custom function that accepts a retry count\n *       and returns the amount of time to delay in milliseconds. The `base` option will be\n *       ignored if this option is supplied.\n *\n * @!attribute httpOptions\n *   @return [map] A set of options to pass to the low-level HTTP request.\n *     Currently supported options are:\n *\n *     * **proxy** [String] &mdash; the URL to proxy requests through\n *     * **agent** [http.Agent, https.Agent] &mdash; the Agent object to perform\n *       HTTP requests with. Used for connection pooling. Note that for\n *       SSL connections, a special Agent object is used in order to enable\n *       peer certificate verification. This feature is only supported in the\n *       Node.js environment.\n *     * **connectTimeout** [Integer] &mdash; Sets the socket to timeout after\n *       failing to establish a connection with the server after\n *       `connectTimeout` milliseconds. This timeout has no effect once a socket\n *       connection has been established.\n *     * **timeout** [Integer] &mdash; Sets the socket to timeout after timeout\n *       milliseconds of inactivity on the socket. Defaults to two minutes\n *       (120000)\n *     * **xhrAsync** [Boolean] &mdash; Whether the SDK will send asynchronous\n *       HTTP requests. Used in the browser environment only. Set to false to\n *       send requests synchronously. Defaults to true (async on).\n *     * **xhrWithCredentials** [Boolean] &mdash; Sets the \"withCredentials\"\n *       property of an XMLHttpRequest object. Used in the browser environment\n *       only. Defaults to false.\n * @!attribute logger\n *   @return [#write,#log] an object that responds to .write() (like a stream)\n *     or .log() (like the console object) in order to log information about\n *     requests\n *\n * @!attribute systemClockOffset\n *   @return [Number] an offset value in milliseconds to apply to all signing\n *     times. Use this to compensate for clock skew when your system may be\n *     out of sync with the service time. Note that this configuration option\n *     can only be applied to the global `AWS.config` object and cannot be\n *     overridden in service-specific configuration. Defaults to 0 milliseconds.\n *\n * @!attribute signatureVersion\n *   @return [String] the signature version to sign requests with (overriding\n *     the API configuration). Possible values are: 'v2', 'v3', 'v4'.\n *\n * @!attribute signatureCache\n *   @return [Boolean] whether the signature to sign requests with (overriding\n *     the API configuration) is cached. Only applies to the signature version 'v4'.\n *     Defaults to `true`.\n *\n * @!attribute endpointDiscoveryEnabled\n *   @return [Boolean] whether to enable endpoint discovery for operations that\n *     allow optionally using an endpoint returned by the service.\n *     Defaults to 'false'\n *\n * @!attribute endpointCacheSize\n *   @return [Number] the size of the global cache storing endpoints from endpoint\n *     discovery operations. Once endpoint cache is created, updating this setting\n *     cannot change existing cache size.\n *     Defaults to 1000\n *\n * @!attribute hostPrefixEnabled\n *   @return [Boolean] whether to marshal request parameters to the prefix of\n *     hostname. Defaults to `true`.\n */\nAWS.Config = AWS.util.inherit({\n  /**\n   * @!endgroup\n   */\n\n  /**\n   * Creates a new configuration object. This is the object that passes\n   * option data along to service requests, including credentials, security,\n   * region information, and some service specific settings.\n   *\n   * @example Creating a new configuration object with credentials and region\n   *   var config = new AWS.Config({\n   *     accessKeyId: 'AKID', secretAccessKey: 'SECRET', region: 'us-west-2'\n   *   });\n   * @option options accessKeyId [String] your AWS access key ID.\n   * @option options secretAccessKey [String] your AWS secret access key.\n   * @option options sessionToken [AWS.Credentials] the optional AWS\n   *   session token to sign requests with.\n   * @option options credentials [AWS.Credentials] the AWS credentials\n   *   to sign requests with. You can either specify this object, or\n   *   specify the accessKeyId and secretAccessKey options directly.\n   * @option options credentialProvider [AWS.CredentialProviderChain] the\n   *   provider chain used to resolve credentials if no static `credentials`\n   *   property is set.\n   * @option options region [String] the region to send service requests to.\n   *   See {region} for more information.\n   * @option options maxRetries [Integer] the maximum amount of retries to\n   *   attempt with a request. See {maxRetries} for more information.\n   * @option options maxRedirects [Integer] the maximum amount of redirects to\n   *   follow with a request. See {maxRedirects} for more information.\n   * @option options sslEnabled [Boolean] whether to enable SSL for\n   *   requests.\n   * @option options paramValidation [Boolean|map] whether input parameters\n   *   should be validated against the operation description before sending\n   *   the request. Defaults to true. Pass a map to enable any of the\n   *   following specific validation features:\n   *\n   *   * **min** [Boolean] &mdash; Validates that a value meets the min\n   *     constraint. This is enabled by default when paramValidation is set\n   *     to `true`.\n   *   * **max** [Boolean] &mdash; Validates that a value meets the max\n   *     constraint.\n   *   * **pattern** [Boolean] &mdash; Validates that a string value matches a\n   *     regular expression.\n   *   * **enum** [Boolean] &mdash; Validates that a string value matches one\n   *     of the allowable enum values.\n   * @option options computeChecksums [Boolean] whether to compute checksums\n   *   for payload bodies when the service accepts it (currently supported\n   *   in S3 only)\n   * @option options convertResponseTypes [Boolean] whether types are converted\n   *     when parsing response data. Currently only supported for JSON based\n   *     services. Turning this off may improve performance on large response\n   *     payloads. Defaults to `true`.\n   * @option options correctClockSkew [Boolean] whether to apply a clock skew\n   *     correction and retry requests that fail because of an skewed client\n   *     clock. Defaults to `false`.\n   * @option options s3ForcePathStyle [Boolean] whether to force path\n   *   style URLs for S3 objects.\n   * @option options s3BucketEndpoint [Boolean] whether the provided endpoint\n   *   addresses an individual bucket (false if it addresses the root API\n   *   endpoint). Note that setting this configuration option requires an\n   *   `endpoint` to be provided explicitly to the service constructor.\n   * @option options s3DisableBodySigning [Boolean] whether S3 body signing\n   *   should be disabled when using signature version `v4`. Body signing\n   *   can only be disabled when using https. Defaults to `true`.\n   *\n   * @option options retryDelayOptions [map] A set of options to configure\n   *   the retry delay on retryable errors. Currently supported options are:\n   *\n   *   * **base** [Integer] &mdash; The base number of milliseconds to use in the\n   *     exponential backoff for operation retries. Defaults to 100 ms for all\n   *     services except DynamoDB, where it defaults to 50ms.\n   *   * **customBackoff ** [function] &mdash; A custom function that accepts a retry count\n   *     and returns the amount of time to delay in milliseconds. The `base` option will be\n   *     ignored if this option is supplied.\n   * @option options httpOptions [map] A set of options to pass to the low-level\n   *   HTTP request. Currently supported options are:\n   *\n   *   * **proxy** [String] &mdash; the URL to proxy requests through\n   *   * **agent** [http.Agent, https.Agent] &mdash; the Agent object to perform\n   *     HTTP requests with. Used for connection pooling. Defaults to the global\n   *     agent (`http.globalAgent`) for non-SSL connections. Note that for\n   *     SSL connections, a special Agent object is used in order to enable\n   *     peer certificate verification. This feature is only available in the\n   *     Node.js environment.\n   *   * **connectTimeout** [Integer] &mdash; Sets the socket to timeout after\n   *     failing to establish a connection with the server after\n   *     `connectTimeout` milliseconds. This timeout has no effect once a socket\n   *     connection has been established.\n   *   * **timeout** [Integer] &mdash; Sets the socket to timeout after timeout\n   *     milliseconds of inactivity on the socket. Defaults to two minutes\n   *     (120000).\n   *   * **xhrAsync** [Boolean] &mdash; Whether the SDK will send asynchronous\n   *     HTTP requests. Used in the browser environment only. Set to false to\n   *     send requests synchronously. Defaults to true (async on).\n   *   * **xhrWithCredentials** [Boolean] &mdash; Sets the \"withCredentials\"\n   *     property of an XMLHttpRequest object. Used in the browser environment\n   *     only. Defaults to false.\n   * @option options apiVersion [String, Date] a String in YYYY-MM-DD format\n   *   (or a date) that represents the latest possible API version that can be\n   *   used in all services (unless overridden by `apiVersions`). Specify\n   *   'latest' to use the latest possible version.\n   * @option options apiVersions [map<String, String|Date>] a map of service\n   *   identifiers (the lowercase service class name) with the API version to\n   *   use when instantiating a service. Specify 'latest' for each individual\n   *   that can use the latest available version.\n   * @option options logger [#write,#log] an object that responds to .write()\n   *   (like a stream) or .log() (like the console object) in order to log\n   *   information about requests\n   * @option options systemClockOffset [Number] an offset value in milliseconds\n   *   to apply to all signing times. Use this to compensate for clock skew\n   *   when your system may be out of sync with the service time. Note that\n   *   this configuration option can only be applied to the global `AWS.config`\n   *   object and cannot be overridden in service-specific configuration.\n   *   Defaults to 0 milliseconds.\n   * @option options signatureVersion [String] the signature version to sign\n   *   requests with (overriding the API configuration). Possible values are:\n   *   'v2', 'v3', 'v4'.\n   * @option options signatureCache [Boolean] whether the signature to sign\n   *   requests with (overriding the API configuration) is cached. Only applies\n   *   to the signature version 'v4'. Defaults to `true`.\n   * @option options dynamoDbCrc32 [Boolean] whether to validate the CRC32\n   *   checksum of HTTP response bodies returned by DynamoDB. Default: `true`.\n   * @option options useAccelerateEndpoint [Boolean] Whether to use the\n   *   S3 Transfer Acceleration endpoint with the S3 service. Default: `false`.\n   * @option options clientSideMonitoring [Boolean] whether to collect and\n   *   publish this client's performance metrics of all its API requests.\n   * @option options endpointDiscoveryEnabled [Boolean] whether to enable endpoint\n   *   discovery for operations that allow optionally using an endpoint returned by\n   *   the service.\n   *   Defaults to 'false'\n   * @option options endpointCacheSize [Number] the size of the global cache storing\n   *   endpoints from endpoint discovery operations. Once endpoint cache is created,\n   *   updating this setting cannot change existing cache size.\n   *   Defaults to 1000\n   * @option options hostPrefixEnabled [Boolean] whether to marshal request\n   *   parameters to the prefix of hostname.\n   *   Defaults to `true`.\n   */\n  constructor: function Config(options) {\n    if (options === undefined) options = {};\n    options = this.extractCredentials(options);\n\n    AWS.util.each.call(this, this.keys, function (key, value) {\n      this.set(key, options[key], value);\n    });\n  },\n\n  /**\n   * @!group Managing Credentials\n   */\n\n  /**\n   * Loads credentials from the configuration object. This is used internally\n   * by the SDK to ensure that refreshable {Credentials} objects are properly\n   * refreshed and loaded when sending a request. If you want to ensure that\n   * your credentials are loaded prior to a request, you can use this method\n   * directly to provide accurate credential data stored in the object.\n   *\n   * @note If you configure the SDK with static or environment credentials,\n   *   the credential data should already be present in {credentials} attribute.\n   *   This method is primarily necessary to load credentials from asynchronous\n   *   sources, or sources that can refresh credentials periodically.\n   * @example Getting your access key\n   *   AWS.config.getCredentials(function(err) {\n   *     if (err) console.log(err.stack); // credentials not loaded\n   *     else console.log(\"Access Key:\", AWS.config.credentials.accessKeyId);\n   *   })\n   * @callback callback function(err)\n   *   Called when the {credentials} have been properly set on the configuration\n   *   object.\n   *\n   *   @param err [Error] if this is set, credentials were not successfully\n   *     loaded and this error provides information why.\n   * @see credentials\n   * @see Credentials\n   */\n  getCredentials: function getCredentials(callback) {\n    var self = this;\n\n    function finish(err) {\n      callback(err, err ? null : self.credentials);\n    }\n\n    function credError(msg, err) {\n      return new AWS.util.error(err || new Error(), {\n        code: 'CredentialsError',\n        message: msg,\n        name: 'CredentialsError'\n      });\n    }\n\n    function getAsyncCredentials() {\n      self.credentials.get(function(err) {\n        if (err) {\n          var msg = 'Could not load credentials from ' +\n            self.credentials.constructor.name;\n          err = credError(msg, err);\n        }\n        finish(err);\n      });\n    }\n\n    function getStaticCredentials() {\n      var err = null;\n      if (!self.credentials.accessKeyId || !self.credentials.secretAccessKey) {\n        err = credError('Missing credentials');\n      }\n      finish(err);\n    }\n\n    if (self.credentials) {\n      if (typeof self.credentials.get === 'function') {\n        getAsyncCredentials();\n      } else { // static credentials\n        getStaticCredentials();\n      }\n    } else if (self.credentialProvider) {\n      self.credentialProvider.resolve(function(err, creds) {\n        if (err) {\n          err = credError('Could not load credentials from any providers', err);\n        }\n        self.credentials = creds;\n        finish(err);\n      });\n    } else {\n      finish(credError('No credentials to load'));\n    }\n  },\n\n  /**\n   * @!group Loading and Setting Configuration Options\n   */\n\n  /**\n   * @overload update(options, allowUnknownKeys = false)\n   *   Updates the current configuration object with new options.\n   *\n   *   @example Update maxRetries property of a configuration object\n   *     config.update({maxRetries: 10});\n   *   @param [Object] options a map of option keys and values.\n   *   @param [Boolean] allowUnknownKeys whether unknown keys can be set on\n   *     the configuration object. Defaults to `false`.\n   *   @see constructor\n   */\n  update: function update(options, allowUnknownKeys) {\n    allowUnknownKeys = allowUnknownKeys || false;\n    options = this.extractCredentials(options);\n    AWS.util.each.call(this, options, function (key, value) {\n      if (allowUnknownKeys || Object.prototype.hasOwnProperty.call(this.keys, key) ||\n          AWS.Service.hasService(key)) {\n        this.set(key, value);\n      }\n    });\n  },\n\n  /**\n   * Loads configuration data from a JSON file into this config object.\n   * @note Loading configuration will reset all existing configuration\n   *   on the object.\n   * @!macro nobrowser\n   * @param path [String] the path relative to your process's current\n   *    working directory to load configuration from.\n   * @return [AWS.Config] the same configuration object\n   */\n  loadFromPath: function loadFromPath(path) {\n    this.clear();\n\n    var options = JSON.parse(AWS.util.readFileSync(path));\n    var fileSystemCreds = new AWS.FileSystemCredentials(path);\n    var chain = new AWS.CredentialProviderChain();\n    chain.providers.unshift(fileSystemCreds);\n    chain.resolve(function (err, creds) {\n      if (err) throw err;\n      else options.credentials = creds;\n    });\n\n    this.constructor(options);\n\n    return this;\n  },\n\n  /**\n   * Clears configuration data on this object\n   *\n   * @api private\n   */\n  clear: function clear() {\n    /*jshint forin:false */\n    AWS.util.each.call(this, this.keys, function (key) {\n      delete this[key];\n    });\n\n    // reset credential provider\n    this.set('credentials', undefined);\n    this.set('credentialProvider', undefined);\n  },\n\n  /**\n   * Sets a property on the configuration object, allowing for a\n   * default value\n   * @api private\n   */\n  set: function set(property, value, defaultValue) {\n    if (value === undefined) {\n      if (defaultValue === undefined) {\n        defaultValue = this.keys[property];\n      }\n      if (typeof defaultValue === 'function') {\n        this[property] = defaultValue.call(this);\n      } else {\n        this[property] = defaultValue;\n      }\n    } else if (property === 'httpOptions' && this[property]) {\n      // deep merge httpOptions\n      this[property] = AWS.util.merge(this[property], value);\n    } else {\n      this[property] = value;\n    }\n  },\n\n  /**\n   * All of the keys with their default values.\n   *\n   * @constant\n   * @api private\n   */\n  keys: {\n    credentials: null,\n    credentialProvider: null,\n    region: null,\n    logger: null,\n    apiVersions: {},\n    apiVersion: null,\n    endpoint: undefined,\n    httpOptions: {\n      timeout: 120000\n    },\n    maxRetries: undefined,\n    maxRedirects: 10,\n    paramValidation: true,\n    sslEnabled: true,\n    s3ForcePathStyle: false,\n    s3BucketEndpoint: false,\n    s3DisableBodySigning: true,\n    computeChecksums: true,\n    convertResponseTypes: true,\n    correctClockSkew: false,\n    customUserAgent: null,\n    dynamoDbCrc32: true,\n    systemClockOffset: 0,\n    signatureVersion: null,\n    signatureCache: true,\n    retryDelayOptions: {},\n    useAccelerateEndpoint: false,\n    clientSideMonitoring: false,\n    endpointDiscoveryEnabled: false,\n    endpointCacheSize: 1000,\n    hostPrefixEnabled: true\n  },\n\n  /**\n   * Extracts accessKeyId, secretAccessKey and sessionToken\n   * from a configuration hash.\n   *\n   * @api private\n   */\n  extractCredentials: function extractCredentials(options) {\n    if (options.accessKeyId && options.secretAccessKey) {\n      options = AWS.util.copy(options);\n      options.credentials = new AWS.Credentials(options);\n    }\n    return options;\n  },\n\n  /**\n   * Sets the promise dependency the SDK will use wherever Promises are returned.\n   * Passing `null` will force the SDK to use native Promises if they are available.\n   * If native Promises are not available, passing `null` will have no effect.\n   * @param [Constructor] dep A reference to a Promise constructor\n   */\n  setPromisesDependency: function setPromisesDependency(dep) {\n    PromisesDependency = dep;\n    // if null was passed in, we should try to use native promises\n    if (dep === null && typeof Promise === 'function') {\n      PromisesDependency = Promise;\n    }\n    var constructors = [AWS.Request, AWS.Credentials, AWS.CredentialProviderChain];\n    if (AWS.S3 && AWS.S3.ManagedUpload) constructors.push(AWS.S3.ManagedUpload);\n    AWS.util.addPromises(constructors, PromisesDependency);\n  },\n\n  /**\n   * Gets the promise dependency set by `AWS.config.setPromisesDependency`.\n   */\n  getPromisesDependency: function getPromisesDependency() {\n    return PromisesDependency;\n  }\n});\n\n/**\n * @return [AWS.Config] The global configuration object singleton instance\n * @readonly\n * @see AWS.Config\n */\nAWS.config = new AWS.Config();\n","var AWS = require('./core');\nvar SequentialExecutor = require('./sequential_executor');\nvar DISCOVER_ENDPOINT = require('./discover_endpoint').discoverEndpoint;\n/**\n * The namespace used to register global event listeners for request building\n * and sending.\n */\nAWS.EventListeners = {\n  /**\n   * @!attribute VALIDATE_CREDENTIALS\n   *   A request listener that validates whether the request is being\n   *   sent with credentials.\n   *   Handles the {AWS.Request~validate 'validate' Request event}\n   *   @example Sending a request without validating credentials\n   *     var listener = AWS.EventListeners.Core.VALIDATE_CREDENTIALS;\n   *     request.removeListener('validate', listener);\n   *   @readonly\n   *   @return [Function]\n   * @!attribute VALIDATE_REGION\n   *   A request listener that validates whether the region is set\n   *   for a request.\n   *   Handles the {AWS.Request~validate 'validate' Request event}\n   *   @example Sending a request without validating region configuration\n   *     var listener = AWS.EventListeners.Core.VALIDATE_REGION;\n   *     request.removeListener('validate', listener);\n   *   @readonly\n   *   @return [Function]\n   * @!attribute VALIDATE_PARAMETERS\n   *   A request listener that validates input parameters in a request.\n   *   Handles the {AWS.Request~validate 'validate' Request event}\n   *   @example Sending a request without validating parameters\n   *     var listener = AWS.EventListeners.Core.VALIDATE_PARAMETERS;\n   *     request.removeListener('validate', listener);\n   *   @example Disable parameter validation globally\n   *     AWS.EventListeners.Core.removeListener('validate',\n   *       AWS.EventListeners.Core.VALIDATE_REGION);\n   *   @readonly\n   *   @return [Function]\n   * @!attribute SEND\n   *   A request listener that initiates the HTTP connection for a\n   *   request being sent. Handles the {AWS.Request~send 'send' Request event}\n   *   @example Replacing the HTTP handler\n   *     var listener = AWS.EventListeners.Core.SEND;\n   *     request.removeListener('send', listener);\n   *     request.on('send', function(response) {\n   *       customHandler.send(response);\n   *     });\n   *   @return [Function]\n   *   @readonly\n   * @!attribute HTTP_DATA\n   *   A request listener that reads data from the HTTP connection in order\n   *   to build the response data.\n   *   Handles the {AWS.Request~httpData 'httpData' Request event}.\n   *   Remove this handler if you are overriding the 'httpData' event and\n   *   do not want extra data processing and buffering overhead.\n   *   @example Disabling default data processing\n   *     var listener = AWS.EventListeners.Core.HTTP_DATA;\n   *     request.removeListener('httpData', listener);\n   *   @return [Function]\n   *   @readonly\n   */\n  Core: {} /* doc hack */\n};\n\n/**\n * @api private\n */\nfunction getOperationAuthtype(req) {\n  if (!req.service.api.operations) {\n    return '';\n  }\n  var operation = req.service.api.operations[req.operation];\n  return operation ? operation.authtype : '';\n}\n\nAWS.EventListeners = {\n  Core: new SequentialExecutor().addNamedListeners(function(add, addAsync) {\n    addAsync('VALIDATE_CREDENTIALS', 'validate',\n        function VALIDATE_CREDENTIALS(req, done) {\n      if (!req.service.api.signatureVersion) return done(); // none\n      req.service.config.getCredentials(function(err) {\n        if (err) {\n          req.response.error = AWS.util.error(err,\n            {code: 'CredentialsError', message: 'Missing credentials in config'});\n        }\n        done();\n      });\n    });\n\n    add('VALIDATE_REGION', 'validate', function VALIDATE_REGION(req) {\n      if (!req.service.config.region && !req.service.isGlobalEndpoint) {\n        req.response.error = AWS.util.error(new Error(),\n          {code: 'ConfigError', message: 'Missing region in config'});\n      }\n    });\n\n    add('BUILD_IDEMPOTENCY_TOKENS', 'validate', function BUILD_IDEMPOTENCY_TOKENS(req) {\n      if (!req.service.api.operations) {\n        return;\n      }\n      var operation = req.service.api.operations[req.operation];\n      if (!operation) {\n        return;\n      }\n      var idempotentMembers = operation.idempotentMembers;\n      if (!idempotentMembers.length) {\n        return;\n      }\n      // creates a copy of params so user's param object isn't mutated\n      var params = AWS.util.copy(req.params);\n      for (var i = 0, iLen = idempotentMembers.length; i < iLen; i++) {\n        if (!params[idempotentMembers[i]]) {\n          // add the member\n          params[idempotentMembers[i]] = AWS.util.uuid.v4();\n        }\n      }\n      req.params = params;\n    });\n\n    add('VALIDATE_PARAMETERS', 'validate', function VALIDATE_PARAMETERS(req) {\n      if (!req.service.api.operations) {\n        return;\n      }\n      var rules = req.service.api.operations[req.operation].input;\n      var validation = req.service.config.paramValidation;\n      new AWS.ParamValidator(validation).validate(rules, req.params);\n    });\n\n    addAsync('COMPUTE_SHA256', 'afterBuild', function COMPUTE_SHA256(req, done) {\n      req.haltHandlersOnError();\n      if (!req.service.api.operations) {\n        return;\n      }\n      var operation = req.service.api.operations[req.operation];\n      var authtype = operation ? operation.authtype : '';\n      if (!req.service.api.signatureVersion && !authtype) return done(); // none\n      if (req.service.getSignerClass(req) === AWS.Signers.V4) {\n        var body = req.httpRequest.body || '';\n        if (authtype.indexOf('unsigned-body') >= 0) {\n          req.httpRequest.headers['X-Amz-Content-Sha256'] = 'UNSIGNED-PAYLOAD';\n          return done();\n        }\n        AWS.util.computeSha256(body, function(err, sha) {\n          if (err) {\n            done(err);\n          }\n          else {\n            req.httpRequest.headers['X-Amz-Content-Sha256'] = sha;\n            done();\n          }\n        });\n      } else {\n        done();\n      }\n    });\n\n    add('SET_CONTENT_LENGTH', 'afterBuild', function SET_CONTENT_LENGTH(req) {\n      var authtype = getOperationAuthtype(req);\n      var payloadMember = AWS.util.getRequestPayloadShape(req);\n      if (req.httpRequest.headers['Content-Length'] === undefined) {\n        try {\n          var length = AWS.util.string.byteLength(req.httpRequest.body);\n          req.httpRequest.headers['Content-Length'] = length;\n        } catch (err) {\n          if (payloadMember && payloadMember.isStreaming) {\n            if (payloadMember.requiresLength) {\n              //streaming payload requires length(s3, glacier)\n              throw err;\n            } else if (authtype.indexOf('unsigned-body') >= 0) {\n              //unbounded streaming payload(lex, mediastore)\n              req.httpRequest.headers['Transfer-Encoding'] = 'chunked';\n              return;\n            } else {\n              throw err;\n            }\n          }\n          throw err;\n        }\n      }\n    });\n\n    add('SET_HTTP_HOST', 'afterBuild', function SET_HTTP_HOST(req) {\n      req.httpRequest.headers['Host'] = req.httpRequest.endpoint.host;\n    });\n\n    add('RESTART', 'restart', function RESTART() {\n      var err = this.response.error;\n      if (!err || !err.retryable) return;\n\n      this.httpRequest = new AWS.HttpRequest(\n        this.service.endpoint,\n        this.service.region\n      );\n\n      if (this.response.retryCount < this.service.config.maxRetries) {\n        this.response.retryCount++;\n      } else {\n        this.response.error = null;\n      }\n    });\n\n    var addToHead = true;\n    addAsync('DISCOVER_ENDPOINT', 'sign', DISCOVER_ENDPOINT, addToHead);\n\n    addAsync('SIGN', 'sign', function SIGN(req, done) {\n      var service = req.service;\n      var operations = req.service.api.operations || {};\n      var operation = operations[req.operation];\n      var authtype = operation ? operation.authtype : '';\n      if (!service.api.signatureVersion && !authtype) return done(); // none\n\n      service.config.getCredentials(function (err, credentials) {\n        if (err) {\n          req.response.error = err;\n          return done();\n        }\n\n        try {\n          var date = service.getSkewCorrectedDate();\n          var SignerClass = service.getSignerClass(req);\n          var signer = new SignerClass(req.httpRequest,\n            service.api.signingName || service.api.endpointPrefix,\n            {\n              signatureCache: service.config.signatureCache,\n              operation: operation,\n              signatureVersion: service.api.signatureVersion\n            });\n          signer.setServiceClientId(service._clientId);\n\n          // clear old authorization headers\n          delete req.httpRequest.headers['Authorization'];\n          delete req.httpRequest.headers['Date'];\n          delete req.httpRequest.headers['X-Amz-Date'];\n\n          // add new authorization\n          signer.addAuthorization(credentials, date);\n          req.signedAt = date;\n        } catch (e) {\n          req.response.error = e;\n        }\n        done();\n      });\n    });\n\n    add('VALIDATE_RESPONSE', 'validateResponse', function VALIDATE_RESPONSE(resp) {\n      if (this.service.successfulResponse(resp, this)) {\n        resp.data = {};\n        resp.error = null;\n      } else {\n        resp.data = null;\n        resp.error = AWS.util.error(new Error(),\n          {code: 'UnknownError', message: 'An unknown error occurred.'});\n      }\n    });\n\n    addAsync('SEND', 'send', function SEND(resp, done) {\n      resp.httpResponse._abortCallback = done;\n      resp.error = null;\n      resp.data = null;\n\n      function callback(httpResp) {\n        resp.httpResponse.stream = httpResp;\n        var stream = resp.request.httpRequest.stream;\n        var service = resp.request.service;\n        var api = service.api;\n        var operationName = resp.request.operation;\n        var operation = api.operations[operationName] || {};\n\n        httpResp.on('headers', function onHeaders(statusCode, headers, statusMessage) {\n          resp.request.emit(\n            'httpHeaders',\n            [statusCode, headers, resp, statusMessage]\n          );\n\n          if (!resp.httpResponse.streaming) {\n            if (AWS.HttpClient.streamsApiVersion === 2) { // streams2 API check\n              // if we detect event streams, we're going to have to\n              // return the stream immediately\n              if (operation.hasEventOutput && service.successfulResponse(resp)) {\n                // skip reading the IncomingStream\n                resp.request.emit('httpDone');\n                done();\n                return;\n              }\n\n              httpResp.on('readable', function onReadable() {\n                var data = httpResp.read();\n                if (data !== null) {\n                  resp.request.emit('httpData', [data, resp]);\n                }\n              });\n            } else { // legacy streams API\n              httpResp.on('data', function onData(data) {\n                resp.request.emit('httpData', [data, resp]);\n              });\n            }\n          }\n        });\n\n        httpResp.on('end', function onEnd() {\n          if (!stream || !stream.didCallback) {\n            if (AWS.HttpClient.streamsApiVersion === 2 && (operation.hasEventOutput && service.successfulResponse(resp))) {\n              // don't concatenate response chunks when streaming event stream data when response is successful\n              return;\n            }\n            resp.request.emit('httpDone');\n            done();\n          }\n        });\n      }\n\n      function progress(httpResp) {\n        httpResp.on('sendProgress', function onSendProgress(value) {\n          resp.request.emit('httpUploadProgress', [value, resp]);\n        });\n\n        httpResp.on('receiveProgress', function onReceiveProgress(value) {\n          resp.request.emit('httpDownloadProgress', [value, resp]);\n        });\n      }\n\n      function error(err) {\n        if (err.code !== 'RequestAbortedError') {\n          var errCode = err.code === 'TimeoutError' ? err.code : 'NetworkingError';\n          err = AWS.util.error(err, {\n            code: errCode,\n            region: resp.request.httpRequest.region,\n            hostname: resp.request.httpRequest.endpoint.hostname,\n            retryable: true\n          });\n        }\n        resp.error = err;\n        resp.request.emit('httpError', [resp.error, resp], function() {\n          done();\n        });\n      }\n\n      function executeSend() {\n        var http = AWS.HttpClient.getInstance();\n        var httpOptions = resp.request.service.config.httpOptions || {};\n        try {\n          var stream = http.handleRequest(resp.request.httpRequest, httpOptions,\n                                          callback, error);\n          progress(stream);\n        } catch (err) {\n          error(err);\n        }\n      }\n      var timeDiff = (resp.request.service.getSkewCorrectedDate() - this.signedAt) / 1000;\n      if (timeDiff >= 60 * 10) { // if we signed 10min ago, re-sign\n        this.emit('sign', [this], function(err) {\n          if (err) done(err);\n          else executeSend();\n        });\n      } else {\n        executeSend();\n      }\n    });\n\n    add('HTTP_HEADERS', 'httpHeaders',\n        function HTTP_HEADERS(statusCode, headers, resp, statusMessage) {\n      resp.httpResponse.statusCode = statusCode;\n      resp.httpResponse.statusMessage = statusMessage;\n      resp.httpResponse.headers = headers;\n      resp.httpResponse.body = AWS.util.buffer.toBuffer('');\n      resp.httpResponse.buffers = [];\n      resp.httpResponse.numBytes = 0;\n      var dateHeader = headers.date || headers.Date;\n      var service = resp.request.service;\n      if (dateHeader) {\n        var serverTime = Date.parse(dateHeader);\n        if (service.config.correctClockSkew\n            && service.isClockSkewed(serverTime)) {\n          service.applyClockOffset(serverTime);\n        }\n      }\n    });\n\n    add('HTTP_DATA', 'httpData', function HTTP_DATA(chunk, resp) {\n      if (chunk) {\n        if (AWS.util.isNode()) {\n          resp.httpResponse.numBytes += chunk.length;\n\n          var total = resp.httpResponse.headers['content-length'];\n          var progress = { loaded: resp.httpResponse.numBytes, total: total };\n          resp.request.emit('httpDownloadProgress', [progress, resp]);\n        }\n\n        resp.httpResponse.buffers.push(AWS.util.buffer.toBuffer(chunk));\n      }\n    });\n\n    add('HTTP_DONE', 'httpDone', function HTTP_DONE(resp) {\n      // convert buffers array into single buffer\n      if (resp.httpResponse.buffers && resp.httpResponse.buffers.length > 0) {\n        var body = AWS.util.buffer.concat(resp.httpResponse.buffers);\n        resp.httpResponse.body = body;\n      }\n      delete resp.httpResponse.numBytes;\n      delete resp.httpResponse.buffers;\n    });\n\n    add('FINALIZE_ERROR', 'retry', function FINALIZE_ERROR(resp) {\n      if (resp.httpResponse.statusCode) {\n        resp.error.statusCode = resp.httpResponse.statusCode;\n        if (resp.error.retryable === undefined) {\n          resp.error.retryable = this.service.retryableError(resp.error, this);\n        }\n      }\n    });\n\n    add('INVALIDATE_CREDENTIALS', 'retry', function INVALIDATE_CREDENTIALS(resp) {\n      if (!resp.error) return;\n      switch (resp.error.code) {\n        case 'RequestExpired': // EC2 only\n        case 'ExpiredTokenException':\n        case 'ExpiredToken':\n          resp.error.retryable = true;\n          resp.request.service.config.credentials.expired = true;\n      }\n    });\n\n    add('EXPIRED_SIGNATURE', 'retry', function EXPIRED_SIGNATURE(resp) {\n      var err = resp.error;\n      if (!err) return;\n      if (typeof err.code === 'string' && typeof err.message === 'string') {\n        if (err.code.match(/Signature/) && err.message.match(/expired/)) {\n          resp.error.retryable = true;\n        }\n      }\n    });\n\n    add('CLOCK_SKEWED', 'retry', function CLOCK_SKEWED(resp) {\n      if (!resp.error) return;\n      if (this.service.clockSkewError(resp.error)\n          && this.service.config.correctClockSkew) {\n        resp.error.retryable = true;\n      }\n    });\n\n    add('REDIRECT', 'retry', function REDIRECT(resp) {\n      if (resp.error && resp.error.statusCode >= 300 &&\n          resp.error.statusCode < 400 && resp.httpResponse.headers['location']) {\n        this.httpRequest.endpoint =\n          new AWS.Endpoint(resp.httpResponse.headers['location']);\n        this.httpRequest.headers['Host'] = this.httpRequest.endpoint.host;\n        resp.error.redirect = true;\n        resp.error.retryable = true;\n      }\n    });\n\n    add('RETRY_CHECK', 'retry', function RETRY_CHECK(resp) {\n      if (resp.error) {\n        if (resp.error.redirect && resp.redirectCount < resp.maxRedirects) {\n          resp.error.retryDelay = 0;\n        } else if (resp.retryCount < resp.maxRetries) {\n          resp.error.retryDelay = this.service.retryDelays(resp.retryCount) || 0;\n        }\n      }\n    });\n\n    addAsync('RESET_RETRY_STATE', 'afterRetry', function RESET_RETRY_STATE(resp, done) {\n      var delay, willRetry = false;\n\n      if (resp.error) {\n        delay = resp.error.retryDelay || 0;\n        if (resp.error.retryable && resp.retryCount < resp.maxRetries) {\n          resp.retryCount++;\n          willRetry = true;\n        } else if (resp.error.redirect && resp.redirectCount < resp.maxRedirects) {\n          resp.redirectCount++;\n          willRetry = true;\n        }\n      }\n\n      if (willRetry) {\n        resp.error = null;\n        setTimeout(done, delay);\n      } else {\n        done();\n      }\n    });\n  }),\n\n  CorePost: new SequentialExecutor().addNamedListeners(function(add) {\n    add('EXTRACT_REQUEST_ID', 'extractData', AWS.util.extractRequestId);\n    add('EXTRACT_REQUEST_ID', 'extractError', AWS.util.extractRequestId);\n\n    add('ENOTFOUND_ERROR', 'httpError', function ENOTFOUND_ERROR(err) {\n      if (err.code === 'NetworkingError' && err.errno === 'ENOTFOUND') {\n        var message = 'Inaccessible host: `' + err.hostname +\n          '\\'. This service may not be available in the `' + err.region +\n          '\\' region.';\n        this.response.error = AWS.util.error(new Error(message), {\n          code: 'UnknownEndpoint',\n          region: err.region,\n          hostname: err.hostname,\n          retryable: true,\n          originalError: err\n        });\n      }\n    });\n  }),\n\n  Logger: new SequentialExecutor().addNamedListeners(function(add) {\n    add('LOG_REQUEST', 'complete', function LOG_REQUEST(resp) {\n      var req = resp.request;\n      var logger = req.service.config.logger;\n      if (!logger) return;\n      function filterSensitiveLog(inputShape, shape) {\n        if (!shape) {\n          return shape;\n        }\n        switch (inputShape.type) {\n          case 'structure':\n            var struct = {};\n            AWS.util.each(shape, function(subShapeName, subShape) {\n              if (Object.prototype.hasOwnProperty.call(inputShape.members, subShapeName)) {\n                struct[subShapeName] = filterSensitiveLog(inputShape.members[subShapeName], subShape);\n              } else {\n                struct[subShapeName] = subShape;\n              }\n            });\n            return struct;\n          case 'list':\n            var list = [];\n            AWS.util.arrayEach(shape, function(subShape, index) {\n              list.push(filterSensitiveLog(inputShape.member, subShape));\n            });\n            return list;\n          case 'map':\n            var map = {};\n            AWS.util.each(shape, function(key, value) {\n              map[key] = filterSensitiveLog(inputShape.value, value);\n            });\n            return map;\n          default:\n            if (inputShape.isSensitive) {\n              return '***SensitiveInformation***';\n            } else {\n              return shape;\n            }\n        }\n      }\n\n      function buildMessage() {\n        var time = resp.request.service.getSkewCorrectedDate().getTime();\n        var delta = (time - req.startTime.getTime()) / 1000;\n        var ansi = logger.isTTY ? true : false;\n        var status = resp.httpResponse.statusCode;\n        var censoredParams = req.params;\n        if (\n          req.service.api.operations &&\n              req.service.api.operations[req.operation] &&\n              req.service.api.operations[req.operation].input\n        ) {\n          var inputShape = req.service.api.operations[req.operation].input;\n          censoredParams = filterSensitiveLog(inputShape, req.params);\n        }\n        var params = require('util').inspect(censoredParams, true, null);\n        var message = '';\n        if (ansi) message += '\\x1B[33m';\n        message += '[AWS ' + req.service.serviceIdentifier + ' ' + status;\n        message += ' ' + delta.toString() + 's ' + resp.retryCount + ' retries]';\n        if (ansi) message += '\\x1B[0;1m';\n        message += ' ' + AWS.util.string.lowerFirst(req.operation);\n        message += '(' + params + ')';\n        if (ansi) message += '\\x1B[0m';\n        return message;\n      }\n\n      var line = buildMessage();\n      if (typeof logger.log === 'function') {\n        logger.log(line);\n      } else if (typeof logger.write === 'function') {\n        logger.write(line + '\\n');\n      }\n    });\n  }),\n\n  Json: new SequentialExecutor().addNamedListeners(function(add) {\n    var svc = require('./protocol/json');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n\n  Rest: new SequentialExecutor().addNamedListeners(function(add) {\n    var svc = require('./protocol/rest');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n\n  RestJson: new SequentialExecutor().addNamedListeners(function(add) {\n    var svc = require('./protocol/rest_json');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n\n  RestXml: new SequentialExecutor().addNamedListeners(function(add) {\n    var svc = require('./protocol/rest_xml');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n\n  Query: new SequentialExecutor().addNamedListeners(function(add) {\n    var svc = require('./protocol/query');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  })\n};\n","var AWS = require('./core');\nvar util = require('./util');\nvar endpointDiscoveryEnabledEnvs = ['AWS_ENABLE_ENDPOINT_DISCOVERY', 'AWS_ENDPOINT_DISCOVERY_ENABLED'];\n\n/**\n * Generate key (except resources and operation part) to index the endpoints in the cache\n * If input shape has endpointdiscoveryid trait then use\n *   accessKey + operation + resources + region + service as cache key\n * If input shape doesn't have endpointdiscoveryid trait then use\n *   accessKey + region + service as cache key\n * @return [map<String,String>] object with keys to index endpoints.\n * @api private\n */\nfunction getCacheKey(request) {\n  var service = request.service;\n  var api = service.api || {};\n  var operations = api.operations;\n  var identifiers = {};\n  if (service.config.region) {\n    identifiers.region = service.config.region;\n  }\n  if (api.serviceId) {\n    identifiers.serviceId = api.serviceId;\n  }\n  if (service.config.credentials.accessKeyId) {\n    identifiers.accessKeyId = service.config.credentials.accessKeyId;\n  }\n  return identifiers;\n}\n\n/**\n * Recursive helper for marshallCustomIdentifiers().\n * Looks for required string input members that have 'endpointdiscoveryid' trait.\n * @api private\n */\nfunction marshallCustomIdentifiersHelper(result, params, shape) {\n  if (!shape || params === undefined || params === null) return;\n  if (shape.type === 'structure' && shape.required && shape.required.length > 0) {\n    util.arrayEach(shape.required, function(name) {\n      var memberShape = shape.members[name];\n      if (memberShape.endpointDiscoveryId === true) {\n        var locationName = memberShape.isLocationName ? memberShape.name : name;\n        result[locationName] = String(params[name]);\n      } else {\n        marshallCustomIdentifiersHelper(result, params[name], memberShape);\n      }\n    });\n  }\n}\n\n/**\n * Get custom identifiers for cache key.\n * Identifies custom identifiers by checking each shape's `endpointDiscoveryId` trait.\n * @param [object] request object\n * @param [object] input shape of the given operation's api\n * @api private\n */\nfunction marshallCustomIdentifiers(request, shape) {\n  var identifiers = {};\n  marshallCustomIdentifiersHelper(identifiers, request.params, shape);\n  return identifiers;\n}\n\n/**\n * Call endpoint discovery operation when it's optional.\n * When endpoint is available in cache then use the cached endpoints. If endpoints\n * are unavailable then use regional endpoints and call endpoint discovery operation\n * asynchronously. This is turned off by default.\n * @param [object] request object\n * @api private\n */\nfunction optionalDiscoverEndpoint(request) {\n  var service = request.service;\n  var api = service.api;\n  var operationModel = api.operations ? api.operations[request.operation] : undefined;\n  var inputShape = operationModel ? operationModel.input : undefined;\n\n  var identifiers = marshallCustomIdentifiers(request, inputShape);\n  var cacheKey = getCacheKey(request);\n  if (Object.keys(identifiers).length > 0) {\n    cacheKey = util.update(cacheKey, identifiers);\n    if (operationModel) cacheKey.operation = operationModel.name;\n  }\n  var endpoints = AWS.endpointCache.get(cacheKey);\n  if (endpoints && endpoints.length === 1 && endpoints[0].Address === '') {\n    //endpoint operation is being made but response not yet received\n    //or endpoint operation just failed in 1 minute\n    return;\n  } else if (endpoints && endpoints.length > 0) {\n    //found endpoint record from cache\n    request.httpRequest.updateEndpoint(endpoints[0].Address);\n  } else {\n    //endpoint record not in cache or outdated. make discovery operation\n    var endpointRequest = service.makeRequest(api.endpointOperation, {\n      Operation: operationModel.name,\n      Identifiers: identifiers,\n    });\n    addApiVersionHeader(endpointRequest);\n    endpointRequest.removeListener('validate', AWS.EventListeners.Core.VALIDATE_PARAMETERS);\n    endpointRequest.removeListener('retry', AWS.EventListeners.Core.RETRY_CHECK);\n    //put in a placeholder for endpoints already requested, prevent\n    //too much in-flight calls\n    AWS.endpointCache.put(cacheKey, [{\n      Address: '',\n      CachePeriodInMinutes: 1\n    }]);\n    endpointRequest.send(function(err, data) {\n      if (data && data.Endpoints) {\n        AWS.endpointCache.put(cacheKey, data.Endpoints);\n      } else if (err) {\n        AWS.endpointCache.put(cacheKey, [{\n          Address: '',\n          CachePeriodInMinutes: 1 //not to make more endpoint operation in next 1 minute\n        }]);\n      }\n    });\n  }\n}\n\nvar requestQueue = {};\n\n/**\n * Call endpoint discovery operation when it's required.\n * When endpoint is available in cache then use cached ones. If endpoints are\n * unavailable then SDK should call endpoint operation then use returned new\n * endpoint for the api call. SDK will automatically attempt to do endpoint\n * discovery. This is turned off by default\n * @param [object] request object\n * @api private\n */\nfunction requiredDiscoverEndpoint(request, done) {\n  var service = request.service;\n  var api = service.api;\n  var operationModel = api.operations ? api.operations[request.operation] : undefined;\n  var inputShape = operationModel ? operationModel.input : undefined;\n\n  var identifiers = marshallCustomIdentifiers(request, inputShape);\n  var cacheKey = getCacheKey(request);\n  if (Object.keys(identifiers).length > 0) {\n    cacheKey = util.update(cacheKey, identifiers);\n    if (operationModel) cacheKey.operation = operationModel.name;\n  }\n  var cacheKeyStr = AWS.EndpointCache.getKeyString(cacheKey);\n  var endpoints = AWS.endpointCache.get(cacheKeyStr); //endpoint cache also accepts string keys\n  if (endpoints && endpoints.length === 1 && endpoints[0].Address === '') {\n    //endpoint operation is being made but response not yet received\n    //push request object to a pending queue\n    if (!requestQueue[cacheKeyStr]) requestQueue[cacheKeyStr] = [];\n    requestQueue[cacheKeyStr].push({request: request, callback: done});\n    return;\n  } else if (endpoints && endpoints.length > 0) {\n    request.httpRequest.updateEndpoint(endpoints[0].Address);\n    done();\n  } else {\n    var endpointRequest = service.makeRequest(api.endpointOperation, {\n      Operation: operationModel.name,\n      Identifiers: identifiers,\n    });\n    endpointRequest.removeListener('validate', AWS.EventListeners.Core.VALIDATE_PARAMETERS);\n    addApiVersionHeader(endpointRequest);\n\n    //put in a placeholder for endpoints already requested, prevent\n    //too much in-flight calls\n    AWS.endpointCache.put(cacheKeyStr, [{\n      Address: '',\n      CachePeriodInMinutes: 60 //long-live cache\n    }]);\n    endpointRequest.send(function(err, data) {\n      if (err) {\n        var errorParams = {\n          code: 'EndpointDiscoveryException',\n          message: 'Request cannot be fulfilled without specifying an endpoint',\n          retryable: false\n        };\n        request.response.error = util.error(err, errorParams);\n        AWS.endpointCache.remove(cacheKey);\n\n        //fail all the pending requests in batch\n        if (requestQueue[cacheKeyStr]) {\n          var pendingRequests = requestQueue[cacheKeyStr];\n          util.arrayEach(pendingRequests, function(requestContext) {\n            requestContext.request.response.error = util.error(err, errorParams);\n            requestContext.callback();\n          });\n          delete requestQueue[cacheKeyStr];\n        }\n      } else if (data) {\n        AWS.endpointCache.put(cacheKeyStr, data.Endpoints);\n        request.httpRequest.updateEndpoint(data.Endpoints[0].Address);\n\n        //update the endpoint for all the pending requests in batch\n        if (requestQueue[cacheKeyStr]) {\n          var pendingRequests = requestQueue[cacheKeyStr];\n          util.arrayEach(pendingRequests, function(requestContext) {\n            requestContext.request.httpRequest.updateEndpoint(data.Endpoints[0].Address);\n            requestContext.callback();\n          });\n          delete requestQueue[cacheKeyStr];\n        }\n      }\n      done();\n    });\n  }\n}\n\n/**\n * add api version header to endpoint operation\n * @api private\n */\nfunction addApiVersionHeader(endpointRequest) {\n  var api = endpointRequest.service.api;\n  var apiVersion = api.apiVersion;\n  if (apiVersion && !endpointRequest.httpRequest.headers['x-amz-api-version']) {\n    endpointRequest.httpRequest.headers['x-amz-api-version'] = apiVersion;\n  }\n}\n\n/**\n * If api call gets invalid endpoint exception, SDK should attempt to remove the invalid\n * endpoint from cache.\n * @api private\n */\nfunction invalidateCachedEndpoints(response) {\n  var error = response.error;\n  var httpResponse = response.httpResponse;\n  if (error &&\n    (error.code === 'InvalidEndpointException' || httpResponse.statusCode === 421)\n  ) {\n    var request = response.request;\n    var operations = request.service.api.operations || {};\n    var inputShape = operations[request.operation] ? operations[request.operation].input : undefined;\n    var identifiers = marshallCustomIdentifiers(request, inputShape);\n    var cacheKey = getCacheKey(request);\n    if (Object.keys(identifiers).length > 0) {\n      cacheKey = util.update(cacheKey, identifiers);\n      if (operations[request.operation]) cacheKey.operation = operations[request.operation].name;\n    }\n    AWS.endpointCache.remove(cacheKey);\n  }\n}\n\n/**\n * If endpoint is explicitly configured, SDK should not do endpoint discovery in anytime.\n * @param [object] client Service client object.\n * @api private\n */\nfunction hasCustomEndpoint(client) {\n  //if set endpoint is set for specific client, enable endpoint discovery will raise an error.\n  if (client._originalConfig && client._originalConfig.endpoint && client._originalConfig.endpointDiscoveryEnabled === true) {\n    throw util.error(new Error(), {\n      code: 'ConfigurationException',\n      message: 'Custom endpoint is supplied; endpointDiscoveryEnabled must not be true.'\n    });\n  };\n  var svcConfig = AWS.config[client.serviceIdentifier] || {};\n  return Boolean(AWS.config.endpoint || svcConfig.endpoint || (client._originalConfig && client._originalConfig.endpoint));\n}\n\n/**\n * @api private\n */\nfunction isFalsy(value) {\n  return ['false', '0'].indexOf(value) >= 0;\n}\n\n/**\n * If endpoint discovery should perform for this request when endpoint discovery is optional.\n * SDK performs config resolution in order like below:\n * 1. If turned on client configuration(default to off) then turn on endpoint discovery.\n * 2. If turned on in env AWS_ENABLE_ENDPOINT_DISCOVERY then turn on endpoint discovery.\n * 3. If turned on in shared ini config file with key 'endpoint_discovery_enabled', then\n *   turn on endpoint discovery.\n * @param [object] request request object.\n * @api private\n */\nfunction isEndpointDiscoveryApplicable(request) {\n  var service = request.service || {};\n  if (service.config.endpointDiscoveryEnabled === true) return true;\n\n  //shared ini file is only available in Node\n  //not to check env in browser\n  if (util.isBrowser()) return false;\n\n  for (var i = 0; i < endpointDiscoveryEnabledEnvs.length; i++) {\n    var env = endpointDiscoveryEnabledEnvs[i];\n    if (Object.prototype.hasOwnProperty.call(process.env, env)) {\n      if (process.env[env] === '' || process.env[env] === undefined) {\n        throw util.error(new Error(), {\n          code: 'ConfigurationException',\n          message: 'environmental variable ' + env + ' cannot be set to nothing'\n        });\n      }\n      if (!isFalsy(process.env[env])) return true;\n    }\n  }\n\n  var configFile = {};\n  try {\n    configFile = AWS.util.iniLoader ? AWS.util.iniLoader.loadFrom({\n      isConfig: true,\n      filename: process.env[AWS.util.sharedConfigFileEnv]\n    }) : {};\n  } catch (e) {}\n  var sharedFileConfig = configFile[\n    process.env.AWS_PROFILE || AWS.util.defaultProfile\n  ] || {};\n  if (Object.prototype.hasOwnProperty.call(sharedFileConfig, 'endpoint_discovery_enabled')) {\n    if (sharedFileConfig.endpoint_discovery_enabled === undefined) {\n      throw util.error(new Error(), {\n        code: 'ConfigurationException',\n        message: 'config file entry \\'endpoint_discovery_enabled\\' cannot be set to nothing'\n      });\n    }\n    if (!isFalsy(sharedFileConfig.endpoint_discovery_enabled)) return true;\n  }\n  return false;\n}\n\n/**\n * attach endpoint discovery logic to request object\n * @param [object] request\n * @api private\n */\nfunction discoverEndpoint(request, done) {\n  var service = request.service || {};\n  if (hasCustomEndpoint(service) || request.isPresigned()) return done();\n\n  if (!isEndpointDiscoveryApplicable(request)) return done();\n\n  request.httpRequest.appendToUserAgent('endpoint-discovery');\n\n  var operations = service.api.operations || {};\n  var operationModel = operations[request.operation];\n  var isEndpointDiscoveryRequired = operationModel ? operationModel.endpointDiscoveryRequired : 'NULL';\n  switch (isEndpointDiscoveryRequired) {\n    case 'OPTIONAL':\n      optionalDiscoverEndpoint(request);\n      request.addNamedListener('INVALIDATE_CACHED_ENDPOINTS', 'extractError', invalidateCachedEndpoints);\n      done();\n      break;\n    case 'REQUIRED':\n      request.addNamedListener('INVALIDATE_CACHED_ENDPOINTS', 'extractError', invalidateCachedEndpoints);\n      requiredDiscoverEndpoint(request, done);\n      break;\n    case 'NULL':\n    default:\n      done();\n      break;\n  }\n}\n\nmodule.exports = {\n  discoverEndpoint: discoverEndpoint,\n  requiredDiscoverEndpoint: requiredDiscoverEndpoint,\n  optionalDiscoverEndpoint: optionalDiscoverEndpoint,\n  marshallCustomIdentifiers: marshallCustomIdentifiers,\n  getCacheKey: getCacheKey,\n  invalidateCachedEndpoint: invalidateCachedEndpoints,\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","var AWS = require('./core');\nvar AcceptorStateMachine = require('./state_machine');\nvar inherit = AWS.util.inherit;\nvar domain = AWS.util.domain;\nvar jmespath = require('jmespath');\n\n/**\n * @api private\n */\nvar hardErrorStates = {success: 1, error: 1, complete: 1};\n\nfunction isTerminalState(machine) {\n  return Object.prototype.hasOwnProperty.call(hardErrorStates, machine._asm.currentState);\n}\n\nvar fsm = new AcceptorStateMachine();\nfsm.setupStates = function() {\n  var transition = function(_, done) {\n    var self = this;\n    self._haltHandlersOnError = false;\n\n    self.emit(self._asm.currentState, function(err) {\n      if (err) {\n        if (isTerminalState(self)) {\n          if (domain && self.domain instanceof domain.Domain) {\n            err.domainEmitter = self;\n            err.domain = self.domain;\n            err.domainThrown = false;\n            self.domain.emit('error', err);\n          } else {\n            throw err;\n          }\n        } else {\n          self.response.error = err;\n          done(err);\n        }\n      } else {\n        done(self.response.error);\n      }\n    });\n\n  };\n\n  this.addState('validate', 'build', 'error', transition);\n  this.addState('build', 'afterBuild', 'restart', transition);\n  this.addState('afterBuild', 'sign', 'restart', transition);\n  this.addState('sign', 'send', 'retry', transition);\n  this.addState('retry', 'afterRetry', 'afterRetry', transition);\n  this.addState('afterRetry', 'sign', 'error', transition);\n  this.addState('send', 'validateResponse', 'retry', transition);\n  this.addState('validateResponse', 'extractData', 'extractError', transition);\n  this.addState('extractError', 'extractData', 'retry', transition);\n  this.addState('extractData', 'success', 'retry', transition);\n  this.addState('restart', 'build', 'error', transition);\n  this.addState('success', 'complete', 'complete', transition);\n  this.addState('error', 'complete', 'complete', transition);\n  this.addState('complete', null, null, transition);\n};\nfsm.setupStates();\n\n/**\n * ## Asynchronous Requests\n *\n * All requests made through the SDK are asynchronous and use a\n * callback interface. Each service method that kicks off a request\n * returns an `AWS.Request` object that you can use to register\n * callbacks.\n *\n * For example, the following service method returns the request\n * object as \"request\", which can be used to register callbacks:\n *\n * ```javascript\n * // request is an AWS.Request object\n * var request = ec2.describeInstances();\n *\n * // register callbacks on request to retrieve response data\n * request.on('success', function(response) {\n *   console.log(response.data);\n * });\n * ```\n *\n * When a request is ready to be sent, the {send} method should\n * be called:\n *\n * ```javascript\n * request.send();\n * ```\n *\n * Since registered callbacks may or may not be idempotent, requests should only\n * be sent once. To perform the same operation multiple times, you will need to\n * create multiple request objects, each with its own registered callbacks.\n *\n * ## Removing Default Listeners for Events\n *\n * Request objects are built with default listeners for the various events,\n * depending on the service type. In some cases, you may want to remove\n * some built-in listeners to customize behaviour. Doing this requires\n * access to the built-in listener functions, which are exposed through\n * the {AWS.EventListeners.Core} namespace. For instance, you may\n * want to customize the HTTP handler used when sending a request. In this\n * case, you can remove the built-in listener associated with the 'send'\n * event, the {AWS.EventListeners.Core.SEND} listener and add your own.\n *\n * ## Multiple Callbacks and Chaining\n *\n * You can register multiple callbacks on any request object. The\n * callbacks can be registered for different events, or all for the\n * same event. In addition, you can chain callback registration, for\n * example:\n *\n * ```javascript\n * request.\n *   on('success', function(response) {\n *     console.log(\"Success!\");\n *   }).\n *   on('error', function(error, response) {\n *     console.log(\"Error!\");\n *   }).\n *   on('complete', function(response) {\n *     console.log(\"Always!\");\n *   }).\n *   send();\n * ```\n *\n * The above example will print either \"Success! Always!\", or \"Error! Always!\",\n * depending on whether the request succeeded or not.\n *\n * @!attribute httpRequest\n *   @readonly\n *   @!group HTTP Properties\n *   @return [AWS.HttpRequest] the raw HTTP request object\n *     containing request headers and body information\n *     sent by the service.\n *\n * @!attribute startTime\n *   @readonly\n *   @!group Operation Properties\n *   @return [Date] the time that the request started\n *\n * @!group Request Building Events\n *\n * @!event validate(request)\n *   Triggered when a request is being validated. Listeners\n *   should throw an error if the request should not be sent.\n *   @param request [Request] the request object being sent\n *   @see AWS.EventListeners.Core.VALIDATE_CREDENTIALS\n *   @see AWS.EventListeners.Core.VALIDATE_REGION\n *   @example Ensuring that a certain parameter is set before sending a request\n *     var req = s3.putObject(params);\n *     req.on('validate', function() {\n *       if (!req.params.Body.match(/^Hello\\s/)) {\n *         throw new Error('Body must start with \"Hello \"');\n *       }\n *     });\n *     req.send(function(err, data) { ... });\n *\n * @!event build(request)\n *   Triggered when the request payload is being built. Listeners\n *   should fill the necessary information to send the request\n *   over HTTP.\n *   @param (see AWS.Request~validate)\n *   @example Add a custom HTTP header to a request\n *     var req = s3.putObject(params);\n *     req.on('build', function() {\n *       req.httpRequest.headers['Custom-Header'] = 'value';\n *     });\n *     req.send(function(err, data) { ... });\n *\n * @!event sign(request)\n *   Triggered when the request is being signed. Listeners should\n *   add the correct authentication headers and/or adjust the body,\n *   depending on the authentication mechanism being used.\n *   @param (see AWS.Request~validate)\n *\n * @!group Request Sending Events\n *\n * @!event send(response)\n *   Triggered when the request is ready to be sent. Listeners\n *   should call the underlying transport layer to initiate\n *   the sending of the request.\n *   @param response [Response] the response object\n *   @context [Request] the request object that was sent\n *   @see AWS.EventListeners.Core.SEND\n *\n * @!event retry(response)\n *   Triggered when a request failed and might need to be retried or redirected.\n *   If the response is retryable, the listener should set the\n *   `response.error.retryable` property to `true`, and optionally set\n *   `response.error.retryDelay` to the millisecond delay for the next attempt.\n *   In the case of a redirect, `response.error.redirect` should be set to\n *   `true` with `retryDelay` set to an optional delay on the next request.\n *\n *   If a listener decides that a request should not be retried,\n *   it should set both `retryable` and `redirect` to false.\n *\n *   Note that a retryable error will be retried at most\n *   {AWS.Config.maxRetries} times (based on the service object's config).\n *   Similarly, a request that is redirected will only redirect at most\n *   {AWS.Config.maxRedirects} times.\n *\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *   @example Adding a custom retry for a 404 response\n *     request.on('retry', function(response) {\n *       // this resource is not yet available, wait 10 seconds to get it again\n *       if (response.httpResponse.statusCode === 404 && response.error) {\n *         response.error.retryable = true;   // retry this error\n *         response.error.retryDelay = 10000; // wait 10 seconds\n *       }\n *     });\n *\n * @!group Data Parsing Events\n *\n * @!event extractError(response)\n *   Triggered on all non-2xx requests so that listeners can extract\n *   error details from the response body. Listeners to this event\n *   should set the `response.error` property.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @!event extractData(response)\n *   Triggered in successful requests to allow listeners to\n *   de-serialize the response body into `response.data`.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @!group Completion Events\n *\n * @!event success(response)\n *   Triggered when the request completed successfully.\n *   `response.data` will contain the response data and\n *   `response.error` will be null.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @!event error(error, response)\n *   Triggered when an error occurs at any point during the\n *   request. `response.error` will contain details about the error\n *   that occurred. `response.data` will be null.\n *   @param error [Error] the error object containing details about\n *     the error that occurred.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @!event complete(response)\n *   Triggered whenever a request cycle completes. `response.error`\n *   should be checked, since the request may have failed.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @!group HTTP Events\n *\n * @!event httpHeaders(statusCode, headers, response, statusMessage)\n *   Triggered when headers are sent by the remote server\n *   @param statusCode [Integer] the HTTP response code\n *   @param headers [map<String,String>] the response headers\n *   @param (see AWS.Request~send)\n *   @param statusMessage [String] A status message corresponding to the HTTP\n *                                 response code\n *   @context (see AWS.Request~send)\n *\n * @!event httpData(chunk, response)\n *   Triggered when data is sent by the remote server\n *   @param chunk [Buffer] the buffer data containing the next data chunk\n *     from the server\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *   @see AWS.EventListeners.Core.HTTP_DATA\n *\n * @!event httpUploadProgress(progress, response)\n *   Triggered when the HTTP request has uploaded more data\n *   @param progress [map] An object containing the `loaded` and `total` bytes\n *     of the request.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *   @note This event will not be emitted in Node.js 0.8.x.\n *\n * @!event httpDownloadProgress(progress, response)\n *   Triggered when the HTTP request has downloaded more data\n *   @param progress [map] An object containing the `loaded` and `total` bytes\n *     of the request.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *   @note This event will not be emitted in Node.js 0.8.x.\n *\n * @!event httpError(error, response)\n *   Triggered when the HTTP request failed\n *   @param error [Error] the error object that was thrown\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @!event httpDone(response)\n *   Triggered when the server is finished sending data\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @see AWS.Response\n */\nAWS.Request = inherit({\n\n  /**\n   * Creates a request for an operation on a given service with\n   * a set of input parameters.\n   *\n   * @param service [AWS.Service] the service to perform the operation on\n   * @param operation [String] the operation to perform on the service\n   * @param params [Object] parameters to send to the operation.\n   *   See the operation's documentation for the format of the\n   *   parameters.\n   */\n  constructor: function Request(service, operation, params) {\n    var endpoint = service.endpoint;\n    var region = service.config.region;\n    var customUserAgent = service.config.customUserAgent;\n\n    // global endpoints sign as us-east-1\n    if (service.isGlobalEndpoint) region = 'us-east-1';\n\n    this.domain = domain && domain.active;\n    this.service = service;\n    this.operation = operation;\n    this.params = params || {};\n    this.httpRequest = new AWS.HttpRequest(endpoint, region);\n    this.httpRequest.appendToUserAgent(customUserAgent);\n    this.startTime = service.getSkewCorrectedDate();\n\n    this.response = new AWS.Response(this);\n    this._asm = new AcceptorStateMachine(fsm.states, 'validate');\n    this._haltHandlersOnError = false;\n\n    AWS.SequentialExecutor.call(this);\n    this.emit = this.emitEvent;\n  },\n\n  /**\n   * @!group Sending a Request\n   */\n\n  /**\n   * @overload send(callback = null)\n   *   Sends the request object.\n   *\n   *   @callback callback function(err, data)\n   *     If a callback is supplied, it is called when a response is returned\n   *     from the service.\n   *     @context [AWS.Request] the request object being sent.\n   *     @param err [Error] the error object returned from the request.\n   *       Set to `null` if the request is successful.\n   *     @param data [Object] the de-serialized data returned from\n   *       the request. Set to `null` if a request error occurs.\n   *   @example Sending a request with a callback\n   *     request = s3.putObject({Bucket: 'bucket', Key: 'key'});\n   *     request.send(function(err, data) { console.log(err, data); });\n   *   @example Sending a request with no callback (using event handlers)\n   *     request = s3.putObject({Bucket: 'bucket', Key: 'key'});\n   *     request.on('complete', function(response) { ... }); // register a callback\n   *     request.send();\n   */\n  send: function send(callback) {\n    if (callback) {\n      // append to user agent\n      this.httpRequest.appendToUserAgent('callback');\n      this.on('complete', function (resp) {\n        callback.call(resp, resp.error, resp.data);\n      });\n    }\n    this.runTo();\n\n    return this.response;\n  },\n\n  /**\n   * @!method  promise()\n   *   Sends the request and returns a 'thenable' promise.\n   *\n   *   Two callbacks can be provided to the `then` method on the returned promise.\n   *   The first callback will be called if the promise is fulfilled, and the second\n   *   callback will be called if the promise is rejected.\n   *   @callback fulfilledCallback function(data)\n   *     Called if the promise is fulfilled.\n   *     @param data [Object] the de-serialized data returned from the request.\n   *   @callback rejectedCallback function(error)\n   *     Called if the promise is rejected.\n   *     @param error [Error] the error object returned from the request.\n   *   @return [Promise] A promise that represents the state of the request.\n   *   @example Sending a request using promises.\n   *     var request = s3.putObject({Bucket: 'bucket', Key: 'key'});\n   *     var result = request.promise();\n   *     result.then(function(data) { ... }, function(error) { ... });\n   */\n\n  /**\n   * @api private\n   */\n  build: function build(callback) {\n    return this.runTo('send', callback);\n  },\n\n  /**\n   * @api private\n   */\n  runTo: function runTo(state, done) {\n    this._asm.runTo(state, done, this);\n    return this;\n  },\n\n  /**\n   * Aborts a request, emitting the error and complete events.\n   *\n   * @!macro nobrowser\n   * @example Aborting a request after sending\n   *   var params = {\n   *     Bucket: 'bucket', Key: 'key',\n   *     Body: Buffer.alloc(1024 * 1024 * 5) // 5MB payload\n   *   };\n   *   var request = s3.putObject(params);\n   *   request.send(function (err, data) {\n   *     if (err) console.log(\"Error:\", err.code, err.message);\n   *     else console.log(data);\n   *   });\n   *\n   *   // abort request in 1 second\n   *   setTimeout(request.abort.bind(request), 1000);\n   *\n   *   // prints \"Error: RequestAbortedError Request aborted by user\"\n   * @return [AWS.Request] the same request object, for chaining.\n   * @since v1.4.0\n   */\n  abort: function abort() {\n    this.removeAllListeners('validateResponse');\n    this.removeAllListeners('extractError');\n    this.on('validateResponse', function addAbortedError(resp) {\n      resp.error = AWS.util.error(new Error('Request aborted by user'), {\n         code: 'RequestAbortedError', retryable: false\n      });\n    });\n\n    if (this.httpRequest.stream && !this.httpRequest.stream.didCallback) { // abort HTTP stream\n      this.httpRequest.stream.abort();\n      if (this.httpRequest._abortCallback) {\n         this.httpRequest._abortCallback();\n      } else {\n        this.removeAllListeners('send'); // haven't sent yet, so let's not\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Iterates over each page of results given a pageable request, calling\n   * the provided callback with each page of data. After all pages have been\n   * retrieved, the callback is called with `null` data.\n   *\n   * @note This operation can generate multiple requests to a service.\n   * @example Iterating over multiple pages of objects in an S3 bucket\n   *   var pages = 1;\n   *   s3.listObjects().eachPage(function(err, data) {\n   *     if (err) return;\n   *     console.log(\"Page\", pages++);\n   *     console.log(data);\n   *   });\n   * @example Iterating over multiple pages with an asynchronous callback\n   *   s3.listObjects(params).eachPage(function(err, data, done) {\n   *     doSomethingAsyncAndOrExpensive(function() {\n   *       // The next page of results isn't fetched until done is called\n   *       done();\n   *     });\n   *   });\n   * @callback callback function(err, data, [doneCallback])\n   *   Called with each page of resulting data from the request. If the\n   *   optional `doneCallback` is provided in the function, it must be called\n   *   when the callback is complete.\n   *\n   *   @param err [Error] an error object, if an error occurred.\n   *   @param data [Object] a single page of response data. If there is no\n   *     more data, this object will be `null`.\n   *   @param doneCallback [Function] an optional done callback. If this\n   *     argument is defined in the function declaration, it should be called\n   *     when the next page is ready to be retrieved. This is useful for\n   *     controlling serial pagination across asynchronous operations.\n   *   @return [Boolean] if the callback returns `false`, pagination will\n   *     stop.\n   *\n   * @see AWS.Request.eachItem\n   * @see AWS.Response.nextPage\n   * @since v1.4.0\n   */\n  eachPage: function eachPage(callback) {\n    // Make all callbacks async-ish\n    callback = AWS.util.fn.makeAsync(callback, 3);\n\n    function wrappedCallback(response) {\n      callback.call(response, response.error, response.data, function (result) {\n        if (result === false) return;\n\n        if (response.hasNextPage()) {\n          response.nextPage().on('complete', wrappedCallback).send();\n        } else {\n          callback.call(response, null, null, AWS.util.fn.noop);\n        }\n      });\n    }\n\n    this.on('complete', wrappedCallback).send();\n  },\n\n  /**\n   * Enumerates over individual items of a request, paging the responses if\n   * necessary.\n   *\n   * @api experimental\n   * @since v1.4.0\n   */\n  eachItem: function eachItem(callback) {\n    var self = this;\n    function wrappedCallback(err, data) {\n      if (err) return callback(err, null);\n      if (data === null) return callback(null, null);\n\n      var config = self.service.paginationConfig(self.operation);\n      var resultKey = config.resultKey;\n      if (Array.isArray(resultKey)) resultKey = resultKey[0];\n      var items = jmespath.search(data, resultKey);\n      var continueIteration = true;\n      AWS.util.arrayEach(items, function(item) {\n        continueIteration = callback(null, item);\n        if (continueIteration === false) {\n          return AWS.util.abort;\n        }\n      });\n      return continueIteration;\n    }\n\n    this.eachPage(wrappedCallback);\n  },\n\n  /**\n   * @return [Boolean] whether the operation can return multiple pages of\n   *   response data.\n   * @see AWS.Response.eachPage\n   * @since v1.4.0\n   */\n  isPageable: function isPageable() {\n    return this.service.paginationConfig(this.operation) ? true : false;\n  },\n\n  /**\n   * Sends the request and converts the request object into a readable stream\n   * that can be read from or piped into a writable stream.\n   *\n   * @note The data read from a readable stream contains only\n   *   the raw HTTP body contents.\n   * @example Manually reading from a stream\n   *   request.createReadStream().on('data', function(data) {\n   *     console.log(\"Got data:\", data.toString());\n   *   });\n   * @example Piping a request body into a file\n   *   var out = fs.createWriteStream('/path/to/outfile.jpg');\n   *   s3.service.getObject(params).createReadStream().pipe(out);\n   * @return [Stream] the readable stream object that can be piped\n   *   or read from (by registering 'data' event listeners).\n   * @!macro nobrowser\n   */\n  createReadStream: function createReadStream() {\n    var streams = AWS.util.stream;\n    var req = this;\n    var stream = null;\n\n    if (AWS.HttpClient.streamsApiVersion === 2) {\n      stream = new streams.PassThrough();\n      process.nextTick(function() { req.send(); });\n    } else {\n      stream = new streams.Stream();\n      stream.readable = true;\n\n      stream.sent = false;\n      stream.on('newListener', function(event) {\n        if (!stream.sent && event === 'data') {\n          stream.sent = true;\n          process.nextTick(function() { req.send(); });\n        }\n      });\n    }\n\n    this.on('error', function(err) {\n      stream.emit('error', err);\n    });\n\n    this.on('httpHeaders', function streamHeaders(statusCode, headers, resp) {\n      if (statusCode < 300) {\n        req.removeListener('httpData', AWS.EventListeners.Core.HTTP_DATA);\n        req.removeListener('httpError', AWS.EventListeners.Core.HTTP_ERROR);\n        req.on('httpError', function streamHttpError(error) {\n          resp.error = error;\n          resp.error.retryable = false;\n        });\n\n        var shouldCheckContentLength = false;\n        var expectedLen;\n        if (req.httpRequest.method !== 'HEAD') {\n          expectedLen = parseInt(headers['content-length'], 10);\n        }\n        if (expectedLen !== undefined && !isNaN(expectedLen) && expectedLen >= 0) {\n          shouldCheckContentLength = true;\n          var receivedLen = 0;\n        }\n\n        var checkContentLengthAndEmit = function checkContentLengthAndEmit() {\n          if (shouldCheckContentLength && receivedLen !== expectedLen) {\n            stream.emit('error', AWS.util.error(\n              new Error('Stream content length mismatch. Received ' +\n                receivedLen + ' of ' + expectedLen + ' bytes.'),\n              { code: 'StreamContentLengthMismatch' }\n            ));\n          } else if (AWS.HttpClient.streamsApiVersion === 2) {\n            stream.end();\n          } else {\n            stream.emit('end');\n          }\n        };\n\n        var httpStream = resp.httpResponse.createUnbufferedStream();\n\n        if (AWS.HttpClient.streamsApiVersion === 2) {\n          if (shouldCheckContentLength) {\n            var lengthAccumulator = new streams.PassThrough();\n            lengthAccumulator._write = function(chunk) {\n              if (chunk && chunk.length) {\n                receivedLen += chunk.length;\n              }\n              return streams.PassThrough.prototype._write.apply(this, arguments);\n            };\n\n            lengthAccumulator.on('end', checkContentLengthAndEmit);\n            stream.on('error', function(err) {\n              shouldCheckContentLength = false;\n              httpStream.unpipe(lengthAccumulator);\n              lengthAccumulator.emit('end');\n              lengthAccumulator.end();\n            });\n            httpStream.pipe(lengthAccumulator).pipe(stream, { end: false });\n          } else {\n            httpStream.pipe(stream);\n          }\n        } else {\n\n          if (shouldCheckContentLength) {\n            httpStream.on('data', function(arg) {\n              if (arg && arg.length) {\n                receivedLen += arg.length;\n              }\n            });\n          }\n\n          httpStream.on('data', function(arg) {\n            stream.emit('data', arg);\n          });\n          httpStream.on('end', checkContentLengthAndEmit);\n        }\n\n        httpStream.on('error', function(err) {\n          shouldCheckContentLength = false;\n          stream.emit('error', err);\n        });\n      }\n    });\n\n    return stream;\n  },\n\n  /**\n   * @param [Array,Response] args This should be the response object,\n   *   or an array of args to send to the event.\n   * @api private\n   */\n  emitEvent: function emit(eventName, args, done) {\n    if (typeof args === 'function') { done = args; args = null; }\n    if (!done) done = function() { };\n    if (!args) args = this.eventParameters(eventName, this.response);\n\n    var origEmit = AWS.SequentialExecutor.prototype.emit;\n    origEmit.call(this, eventName, args, function (err) {\n      if (err) this.response.error = err;\n      done.call(this, err);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  eventParameters: function eventParameters(eventName) {\n    switch (eventName) {\n      case 'restart':\n      case 'validate':\n      case 'sign':\n      case 'build':\n      case 'afterValidate':\n      case 'afterBuild':\n        return [this];\n      case 'error':\n        return [this.response.error, this.response];\n      default:\n        return [this.response];\n    }\n  },\n\n  /**\n   * @api private\n   */\n  presign: function presign(expires, callback) {\n    if (!callback && typeof expires === 'function') {\n      callback = expires;\n      expires = null;\n    }\n    return new AWS.Signers.Presign().sign(this.toGet(), expires, callback);\n  },\n\n  /**\n   * @api private\n   */\n  isPresigned: function isPresigned() {\n    return Object.prototype.hasOwnProperty.call(this.httpRequest.headers, 'presigned-expires');\n  },\n\n  /**\n   * @api private\n   */\n  toUnauthenticated: function toUnauthenticated() {\n    this._unAuthenticated = true;\n    this.removeListener('validate', AWS.EventListeners.Core.VALIDATE_CREDENTIALS);\n    this.removeListener('sign', AWS.EventListeners.Core.SIGN);\n    return this;\n  },\n\n  /**\n   * @api private\n   */\n  toGet: function toGet() {\n    if (this.service.api.protocol === 'query' ||\n        this.service.api.protocol === 'ec2') {\n      this.removeListener('build', this.buildAsGet);\n      this.addListener('build', this.buildAsGet);\n    }\n    return this;\n  },\n\n  /**\n   * @api private\n   */\n  buildAsGet: function buildAsGet(request) {\n    request.httpRequest.method = 'GET';\n    request.httpRequest.path = request.service.endpoint.path +\n                               '?' + request.httpRequest.body;\n    request.httpRequest.body = '';\n\n    // don't need these headers on a GET request\n    delete request.httpRequest.headers['Content-Length'];\n    delete request.httpRequest.headers['Content-Type'];\n  },\n\n  /**\n   * @api private\n   */\n  haltHandlersOnError: function haltHandlersOnError() {\n    this._haltHandlersOnError = true;\n  }\n});\n\n/**\n * @api private\n */\nAWS.Request.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n  this.prototype.promise = function promise() {\n    var self = this;\n    // append to user agent\n    this.httpRequest.appendToUserAgent('promise');\n    return new PromiseDependency(function(resolve, reject) {\n      self.on('complete', function(resp) {\n        if (resp.error) {\n          reject(resp.error);\n        } else {\n          // define $response property so that it is not enumberable\n          // this prevents circular reference errors when stringifying the JSON object\n          resolve(Object.defineProperty(\n            resp.data || {},\n            '$response',\n            {value: resp}\n          ));\n        }\n      });\n      self.runTo();\n    });\n  };\n};\n\n/**\n * @api private\n */\nAWS.Request.deletePromisesFromClass = function deletePromisesFromClass() {\n  delete this.prototype.promise;\n};\n\nAWS.util.addPromises(AWS.Request);\n\nAWS.util.mixin(AWS.Request, AWS.SequentialExecutor);\n","function AcceptorStateMachine(states, state) {\n  this.currentState = state || null;\n  this.states = states || {};\n}\n\nAcceptorStateMachine.prototype.runTo = function runTo(finalState, done, bindObject, inputError) {\n  if (typeof finalState === 'function') {\n    inputError = bindObject; bindObject = done;\n    done = finalState; finalState = null;\n  }\n\n  var self = this;\n  var state = self.states[self.currentState];\n  state.fn.call(bindObject || self, inputError, function(err) {\n    if (err) {\n      if (state.fail) self.currentState = state.fail;\n      else return done ? done.call(bindObject, err) : null;\n    } else {\n      if (state.accept) self.currentState = state.accept;\n      else return done ? done.call(bindObject) : null;\n    }\n    if (self.currentState === finalState) {\n      return done ? done.call(bindObject, err) : null;\n    }\n\n    self.runTo(finalState, done, bindObject, err);\n  });\n};\n\nAcceptorStateMachine.prototype.addState = function addState(name, acceptState, failState, fn) {\n  if (typeof acceptState === 'function') {\n    fn = acceptState; acceptState = null; failState = null;\n  } else if (typeof failState === 'function') {\n    fn = failState; failState = null;\n  }\n\n  if (!this.currentState) this.currentState = name;\n  this.states[name] = { accept: acceptState, fail: failState, fn: fn };\n  return this;\n};\n\n/**\n * @api private\n */\nmodule.exports = AcceptorStateMachine;\n","var AWS = require('./core');\nvar inherit = AWS.util.inherit;\nvar jmespath = require('jmespath');\n\n/**\n * This class encapsulates the response information\n * from a service request operation sent through {AWS.Request}.\n * The response object has two main properties for getting information\n * back from a request:\n *\n * ## The `data` property\n *\n * The `response.data` property contains the serialized object data\n * retrieved from the service request. For instance, for an\n * Amazon DynamoDB `listTables` method call, the response data might\n * look like:\n *\n * ```\n * > resp.data\n * { TableNames:\n *    [ 'table1', 'table2', ... ] }\n * ```\n *\n * The `data` property can be null if an error occurs (see below).\n *\n * ## The `error` property\n *\n * In the event of a service error (or transfer error), the\n * `response.error` property will be filled with the given\n * error data in the form:\n *\n * ```\n * { code: 'SHORT_UNIQUE_ERROR_CODE',\n *   message: 'Some human readable error message' }\n * ```\n *\n * In the case of an error, the `data` property will be `null`.\n * Note that if you handle events that can be in a failure state,\n * you should always check whether `response.error` is set\n * before attempting to access the `response.data` property.\n *\n * @!attribute data\n *   @readonly\n *   @!group Data Properties\n *   @note Inside of a {AWS.Request~httpData} event, this\n *     property contains a single raw packet instead of the\n *     full de-serialized service response.\n *   @return [Object] the de-serialized response data\n *     from the service.\n *\n * @!attribute error\n *   An structure containing information about a service\n *   or networking error.\n *   @readonly\n *   @!group Data Properties\n *   @note This attribute is only filled if a service or\n *     networking error occurs.\n *   @return [Error]\n *     * code [String] a unique short code representing the\n *       error that was emitted.\n *     * message [String] a longer human readable error message\n *     * retryable [Boolean] whether the error message is\n *       retryable.\n *     * statusCode [Numeric] in the case of a request that reached the service,\n *       this value contains the response status code.\n *     * time [Date] the date time object when the error occurred.\n *     * hostname [String] set when a networking error occurs to easily\n *       identify the endpoint of the request.\n *     * region [String] set when a networking error occurs to easily\n *       identify the region of the request.\n *\n * @!attribute requestId\n *   @readonly\n *   @!group Data Properties\n *   @return [String] the unique request ID associated with the response.\n *     Log this value when debugging requests for AWS support.\n *\n * @!attribute retryCount\n *   @readonly\n *   @!group Operation Properties\n *   @return [Integer] the number of retries that were\n *     attempted before the request was completed.\n *\n * @!attribute redirectCount\n *   @readonly\n *   @!group Operation Properties\n *   @return [Integer] the number of redirects that were\n *     followed before the request was completed.\n *\n * @!attribute httpResponse\n *   @readonly\n *   @!group HTTP Properties\n *   @return [AWS.HttpResponse] the raw HTTP response object\n *     containing the response headers and body information\n *     from the server.\n *\n * @see AWS.Request\n */\nAWS.Response = inherit({\n\n  /**\n   * @api private\n   */\n  constructor: function Response(request) {\n    this.request = request;\n    this.data = null;\n    this.error = null;\n    this.retryCount = 0;\n    this.redirectCount = 0;\n    this.httpResponse = new AWS.HttpResponse();\n    if (request) {\n      this.maxRetries = request.service.numRetries();\n      this.maxRedirects = request.service.config.maxRedirects;\n    }\n  },\n\n  /**\n   * Creates a new request for the next page of response data, calling the\n   * callback with the page data if a callback is provided.\n   *\n   * @callback callback function(err, data)\n   *   Called when a page of data is returned from the next request.\n   *\n   *   @param err [Error] an error object, if an error occurred in the request\n   *   @param data [Object] the next page of data, or null, if there are no\n   *     more pages left.\n   * @return [AWS.Request] the request object for the next page of data\n   * @return [null] if no callback is provided and there are no pages left\n   *   to retrieve.\n   * @since v1.4.0\n   */\n  nextPage: function nextPage(callback) {\n    var config;\n    var service = this.request.service;\n    var operation = this.request.operation;\n    try {\n      config = service.paginationConfig(operation, true);\n    } catch (e) { this.error = e; }\n\n    if (!this.hasNextPage()) {\n      if (callback) callback(this.error, null);\n      else if (this.error) throw this.error;\n      return null;\n    }\n\n    var params = AWS.util.copy(this.request.params);\n    if (!this.nextPageTokens) {\n      return callback ? callback(null, null) : null;\n    } else {\n      var inputTokens = config.inputToken;\n      if (typeof inputTokens === 'string') inputTokens = [inputTokens];\n      for (var i = 0; i < inputTokens.length; i++) {\n        params[inputTokens[i]] = this.nextPageTokens[i];\n      }\n      return service.makeRequest(this.request.operation, params, callback);\n    }\n  },\n\n  /**\n   * @return [Boolean] whether more pages of data can be returned by further\n   *   requests\n   * @since v1.4.0\n   */\n  hasNextPage: function hasNextPage() {\n    this.cacheNextPageTokens();\n    if (this.nextPageTokens) return true;\n    if (this.nextPageTokens === undefined) return undefined;\n    else return false;\n  },\n\n  /**\n   * @api private\n   */\n  cacheNextPageTokens: function cacheNextPageTokens() {\n    if (Object.prototype.hasOwnProperty.call(this, 'nextPageTokens')) return this.nextPageTokens;\n    this.nextPageTokens = undefined;\n\n    var config = this.request.service.paginationConfig(this.request.operation);\n    if (!config) return this.nextPageTokens;\n\n    this.nextPageTokens = null;\n    if (config.moreResults) {\n      if (!jmespath.search(this.data, config.moreResults)) {\n        return this.nextPageTokens;\n      }\n    }\n\n    var exprs = config.outputToken;\n    if (typeof exprs === 'string') exprs = [exprs];\n    AWS.util.arrayEach.call(this, exprs, function (expr) {\n      var output = jmespath.search(this.data, expr);\n      if (output) {\n        this.nextPageTokens = this.nextPageTokens || [];\n        this.nextPageTokens.push(output);\n      }\n    });\n\n    return this.nextPageTokens;\n  }\n\n});\n","/**\n * Copyright 2012-2013 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You\n * may not use this file except in compliance with the License. A copy of\n * the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n\nvar AWS = require('./core');\nvar inherit = AWS.util.inherit;\nvar jmespath = require('jmespath');\n\n/**\n * @api private\n */\nfunction CHECK_ACCEPTORS(resp) {\n  var waiter = resp.request._waiter;\n  var acceptors = waiter.config.acceptors;\n  var acceptorMatched = false;\n  var state = 'retry';\n\n  acceptors.forEach(function(acceptor) {\n    if (!acceptorMatched) {\n      var matcher = waiter.matchers[acceptor.matcher];\n      if (matcher && matcher(resp, acceptor.expected, acceptor.argument)) {\n        acceptorMatched = true;\n        state = acceptor.state;\n      }\n    }\n  });\n\n  if (!acceptorMatched && resp.error) state = 'failure';\n\n  if (state === 'success') {\n    waiter.setSuccess(resp);\n  } else {\n    waiter.setError(resp, state === 'retry');\n  }\n}\n\n/**\n * @api private\n */\nAWS.ResourceWaiter = inherit({\n  /**\n   * Waits for a given state on a service object\n   * @param service [Service] the service object to wait on\n   * @param state [String] the state (defined in waiter configuration) to wait\n   *   for.\n   * @example Create a waiter for running EC2 instances\n   *   var ec2 = new AWS.EC2;\n   *   var waiter = new AWS.ResourceWaiter(ec2, 'instanceRunning');\n   */\n  constructor: function constructor(service, state) {\n    this.service = service;\n    this.state = state;\n    this.loadWaiterConfig(this.state);\n  },\n\n  service: null,\n\n  state: null,\n\n  config: null,\n\n  matchers: {\n    path: function(resp, expected, argument) {\n      try {\n        var result = jmespath.search(resp.data, argument);\n      } catch (err) {\n        return false;\n      }\n\n      return jmespath.strictDeepEqual(result,expected);\n    },\n\n    pathAll: function(resp, expected, argument) {\n      try {\n        var results = jmespath.search(resp.data, argument);\n      } catch (err) {\n        return false;\n      }\n\n      if (!Array.isArray(results)) results = [results];\n      var numResults = results.length;\n      if (!numResults) return false;\n      for (var ind = 0 ; ind < numResults; ind++) {\n        if (!jmespath.strictDeepEqual(results[ind], expected)) {\n          return false;\n        }\n      }\n      return true;\n    },\n\n    pathAny: function(resp, expected, argument) {\n      try {\n        var results = jmespath.search(resp.data, argument);\n      } catch (err) {\n        return false;\n      }\n\n      if (!Array.isArray(results)) results = [results];\n      var numResults = results.length;\n      for (var ind = 0 ; ind < numResults; ind++) {\n        if (jmespath.strictDeepEqual(results[ind], expected)) {\n          return true;\n        }\n      }\n      return false;\n    },\n\n    status: function(resp, expected) {\n      var statusCode = resp.httpResponse.statusCode;\n      return (typeof statusCode === 'number') && (statusCode === expected);\n    },\n\n    error: function(resp, expected) {\n      if (typeof expected === 'string' && resp.error) {\n        return expected === resp.error.code;\n      }\n      // if expected is not string, can be boolean indicating presence of error\n      return expected === !!resp.error;\n    }\n  },\n\n  listeners: new AWS.SequentialExecutor().addNamedListeners(function(add) {\n    add('RETRY_CHECK', 'retry', function(resp) {\n      var waiter = resp.request._waiter;\n      if (resp.error && resp.error.code === 'ResourceNotReady') {\n        resp.error.retryDelay = (waiter.config.delay || 0) * 1000;\n      }\n    });\n\n    add('CHECK_OUTPUT', 'extractData', CHECK_ACCEPTORS);\n\n    add('CHECK_ERROR', 'extractError', CHECK_ACCEPTORS);\n  }),\n\n  /**\n   * @return [AWS.Request]\n   */\n  wait: function wait(params, callback) {\n    if (typeof params === 'function') {\n      callback = params; params = undefined;\n    }\n\n    if (params && params.$waiter) {\n      params = AWS.util.copy(params);\n      if (typeof params.$waiter.delay === 'number') {\n        this.config.delay = params.$waiter.delay;\n      }\n      if (typeof params.$waiter.maxAttempts === 'number') {\n        this.config.maxAttempts = params.$waiter.maxAttempts;\n      }\n      delete params.$waiter;\n    }\n\n    var request = this.service.makeRequest(this.config.operation, params);\n    request._waiter = this;\n    request.response.maxRetries = this.config.maxAttempts;\n    request.addListeners(this.listeners);\n\n    if (callback) request.send(callback);\n    return request;\n  },\n\n  setSuccess: function setSuccess(resp) {\n    resp.error = null;\n    resp.data = resp.data || {};\n    resp.request.removeAllListeners('extractData');\n  },\n\n  setError: function setError(resp, retryable) {\n    resp.data = null;\n    resp.error = AWS.util.error(resp.error || new Error(), {\n      code: 'ResourceNotReady',\n      message: 'Resource is not in the state ' + this.state,\n      retryable: retryable\n    });\n  },\n\n  /**\n   * Loads waiter configuration from API configuration\n   *\n   * @api private\n   */\n  loadWaiterConfig: function loadWaiterConfig(state) {\n    if (!this.service.api.waiters[state]) {\n      throw new AWS.util.error(new Error(), {\n        code: 'StateNotFoundError',\n        message: 'State ' + state + ' not found.'\n      });\n    }\n\n    this.config = AWS.util.copy(this.service.api.waiters[state]);\n  }\n});\n","var AWS = require('../core');\n\nvar inherit = AWS.util.inherit;\n\n/**\n * @api private\n */\nAWS.Signers.RequestSigner = inherit({\n  constructor: function RequestSigner(request) {\n    this.request = request;\n  },\n\n  setServiceClientId: function setServiceClientId(id) {\n    this.serviceClientId = id;\n  },\n\n  getServiceClientId: function getServiceClientId() {\n    return this.serviceClientId;\n  }\n});\n\nAWS.Signers.RequestSigner.getVersion = function getVersion(version) {\n  switch (version) {\n    case 'v2': return AWS.Signers.V2;\n    case 'v3': return AWS.Signers.V3;\n    case 's3v4': return AWS.Signers.V4;\n    case 'v4': return AWS.Signers.V4;\n    case 's3': return AWS.Signers.S3;\n    case 'v3https': return AWS.Signers.V3Https;\n  }\n  throw new Error('Unknown signing version ' + version);\n};\n\nrequire('./v2');\nrequire('./v3');\nrequire('./v3https');\nrequire('./v4');\nrequire('./s3');\nrequire('./presign');\n","var AWS = require('../core');\nvar inherit = AWS.util.inherit;\n\n/**\n * @api private\n */\nAWS.Signers.V2 = inherit(AWS.Signers.RequestSigner, {\n  addAuthorization: function addAuthorization(credentials, date) {\n\n    if (!date) date = AWS.util.date.getDate();\n\n    var r = this.request;\n\n    r.params.Timestamp = AWS.util.date.iso8601(date);\n    r.params.SignatureVersion = '2';\n    r.params.SignatureMethod = 'HmacSHA256';\n    r.params.AWSAccessKeyId = credentials.accessKeyId;\n\n    if (credentials.sessionToken) {\n      r.params.SecurityToken = credentials.sessionToken;\n    }\n\n    delete r.params.Signature; // delete old Signature for re-signing\n    r.params.Signature = this.signature(credentials);\n\n    r.body = AWS.util.queryParamsToString(r.params);\n    r.headers['Content-Length'] = r.body.length;\n  },\n\n  signature: function signature(credentials) {\n    return AWS.util.crypto.hmac(credentials.secretAccessKey, this.stringToSign(), 'base64');\n  },\n\n  stringToSign: function stringToSign() {\n    var parts = [];\n    parts.push(this.request.method);\n    parts.push(this.request.endpoint.host.toLowerCase());\n    parts.push(this.request.pathname());\n    parts.push(AWS.util.queryParamsToString(this.request.params));\n    return parts.join('\\n');\n  }\n\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.Signers.V2;\n","var AWS = require('../core');\nvar inherit = AWS.util.inherit;\n\nrequire('./v3');\n\n/**\n * @api private\n */\nAWS.Signers.V3Https = inherit(AWS.Signers.V3, {\n  authorization: function authorization(credentials) {\n    return 'AWS3-HTTPS ' +\n      'AWSAccessKeyId=' + credentials.accessKeyId + ',' +\n      'Algorithm=HmacSHA256,' +\n      'Signature=' + this.signature(credentials);\n  },\n\n  stringToSign: function stringToSign() {\n    return this.request.headers['X-Amz-Date'];\n  }\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.Signers.V3Https;\n","var AWS = require('../core');\nvar v4Credentials = require('./v4_credentials');\nvar inherit = AWS.util.inherit;\n\n/**\n * @api private\n */\nvar expiresHeader = 'presigned-expires';\n\n/**\n * @api private\n */\nAWS.Signers.V4 = inherit(AWS.Signers.RequestSigner, {\n  constructor: function V4(request, serviceName, options) {\n    AWS.Signers.RequestSigner.call(this, request);\n    this.serviceName = serviceName;\n    options = options || {};\n    this.signatureCache = typeof options.signatureCache === 'boolean' ? options.signatureCache : true;\n    this.operation = options.operation;\n    this.signatureVersion = options.signatureVersion;\n  },\n\n  algorithm: 'AWS4-HMAC-SHA256',\n\n  addAuthorization: function addAuthorization(credentials, date) {\n    var datetime = AWS.util.date.iso8601(date).replace(/[:\\-]|\\.\\d{3}/g, '');\n\n    if (this.isPresigned()) {\n      this.updateForPresigned(credentials, datetime);\n    } else {\n      this.addHeaders(credentials, datetime);\n    }\n\n    this.request.headers['Authorization'] =\n      this.authorization(credentials, datetime);\n  },\n\n  addHeaders: function addHeaders(credentials, datetime) {\n    this.request.headers['X-Amz-Date'] = datetime;\n    if (credentials.sessionToken) {\n      this.request.headers['x-amz-security-token'] = credentials.sessionToken;\n    }\n  },\n\n  updateForPresigned: function updateForPresigned(credentials, datetime) {\n    var credString = this.credentialString(datetime);\n    var qs = {\n      'X-Amz-Date': datetime,\n      'X-Amz-Algorithm': this.algorithm,\n      'X-Amz-Credential': credentials.accessKeyId + '/' + credString,\n      'X-Amz-Expires': this.request.headers[expiresHeader],\n      'X-Amz-SignedHeaders': this.signedHeaders()\n    };\n\n    if (credentials.sessionToken) {\n      qs['X-Amz-Security-Token'] = credentials.sessionToken;\n    }\n\n    if (this.request.headers['Content-Type']) {\n      qs['Content-Type'] = this.request.headers['Content-Type'];\n    }\n    if (this.request.headers['Content-MD5']) {\n      qs['Content-MD5'] = this.request.headers['Content-MD5'];\n    }\n    if (this.request.headers['Cache-Control']) {\n      qs['Cache-Control'] = this.request.headers['Cache-Control'];\n    }\n\n    // need to pull in any other X-Amz-* headers\n    AWS.util.each.call(this, this.request.headers, function(key, value) {\n      if (key === expiresHeader) return;\n      if (this.isSignableHeader(key)) {\n        var lowerKey = key.toLowerCase();\n        // Metadata should be normalized\n        if (lowerKey.indexOf('x-amz-meta-') === 0) {\n          qs[lowerKey] = value;\n        } else if (lowerKey.indexOf('x-amz-') === 0) {\n          qs[key] = value;\n        }\n      }\n    });\n\n    var sep = this.request.path.indexOf('?') >= 0 ? '&' : '?';\n    this.request.path += sep + AWS.util.queryParamsToString(qs);\n  },\n\n  authorization: function authorization(credentials, datetime) {\n    var parts = [];\n    var credString = this.credentialString(datetime);\n    parts.push(this.algorithm + ' Credential=' +\n      credentials.accessKeyId + '/' + credString);\n    parts.push('SignedHeaders=' + this.signedHeaders());\n    parts.push('Signature=' + this.signature(credentials, datetime));\n    return parts.join(', ');\n  },\n\n  signature: function signature(credentials, datetime) {\n    var signingKey = v4Credentials.getSigningKey(\n      credentials,\n      datetime.substr(0, 8),\n      this.request.region,\n      this.serviceName,\n      this.signatureCache\n    );\n    return AWS.util.crypto.hmac(signingKey, this.stringToSign(datetime), 'hex');\n  },\n\n  stringToSign: function stringToSign(datetime) {\n    var parts = [];\n    parts.push('AWS4-HMAC-SHA256');\n    parts.push(datetime);\n    parts.push(this.credentialString(datetime));\n    parts.push(this.hexEncodedHash(this.canonicalString()));\n    return parts.join('\\n');\n  },\n\n  canonicalString: function canonicalString() {\n    var parts = [], pathname = this.request.pathname();\n    if (this.serviceName !== 's3' && this.signatureVersion !== 's3v4') pathname = AWS.util.uriEscapePath(pathname);\n\n    parts.push(this.request.method);\n    parts.push(pathname);\n    parts.push(this.request.search());\n    parts.push(this.canonicalHeaders() + '\\n');\n    parts.push(this.signedHeaders());\n    parts.push(this.hexEncodedBodyHash());\n    return parts.join('\\n');\n  },\n\n  canonicalHeaders: function canonicalHeaders() {\n    var headers = [];\n    AWS.util.each.call(this, this.request.headers, function (key, item) {\n      headers.push([key, item]);\n    });\n    headers.sort(function (a, b) {\n      return a[0].toLowerCase() < b[0].toLowerCase() ? -1 : 1;\n    });\n    var parts = [];\n    AWS.util.arrayEach.call(this, headers, function (item) {\n      var key = item[0].toLowerCase();\n      if (this.isSignableHeader(key)) {\n        var value = item[1];\n        if (typeof value === 'undefined' || value === null || typeof value.toString !== 'function') {\n          throw AWS.util.error(new Error('Header ' + key + ' contains invalid value'), {\n            code: 'InvalidHeader'\n          });\n        }\n        parts.push(key + ':' +\n          this.canonicalHeaderValues(value.toString()));\n      }\n    });\n    return parts.join('\\n');\n  },\n\n  canonicalHeaderValues: function canonicalHeaderValues(values) {\n    return values.replace(/\\s+/g, ' ').replace(/^\\s+|\\s+$/g, '');\n  },\n\n  signedHeaders: function signedHeaders() {\n    var keys = [];\n    AWS.util.each.call(this, this.request.headers, function (key) {\n      key = key.toLowerCase();\n      if (this.isSignableHeader(key)) keys.push(key);\n    });\n    return keys.sort().join(';');\n  },\n\n  credentialString: function credentialString(datetime) {\n    return v4Credentials.createScope(\n      datetime.substr(0, 8),\n      this.request.region,\n      this.serviceName\n    );\n  },\n\n  hexEncodedHash: function hash(string) {\n    return AWS.util.crypto.sha256(string, 'hex');\n  },\n\n  hexEncodedBodyHash: function hexEncodedBodyHash() {\n    var request = this.request;\n    if (this.isPresigned() && this.serviceName === 's3' && !request.body) {\n      return 'UNSIGNED-PAYLOAD';\n    } else if (request.headers['X-Amz-Content-Sha256']) {\n      return request.headers['X-Amz-Content-Sha256'];\n    } else {\n      return this.hexEncodedHash(this.request.body || '');\n    }\n  },\n\n  unsignableHeaders: [\n    'authorization',\n    'content-type',\n    'content-length',\n    'user-agent',\n    expiresHeader,\n    'expect',\n    'x-amzn-trace-id'\n  ],\n\n  isSignableHeader: function isSignableHeader(key) {\n    if (key.toLowerCase().indexOf('x-amz-') === 0) return true;\n    return this.unsignableHeaders.indexOf(key) < 0;\n  },\n\n  isPresigned: function isPresigned() {\n    return this.request.headers[expiresHeader] ? true : false;\n  }\n\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.Signers.V4;\n","var AWS = require('../core');\nvar inherit = AWS.util.inherit;\n\n/**\n * @api private\n */\nAWS.Signers.S3 = inherit(AWS.Signers.RequestSigner, {\n  /**\n   * When building the stringToSign, these sub resource params should be\n   * part of the canonical resource string with their NON-decoded values\n   */\n  subResources: {\n    'acl': 1,\n    'accelerate': 1,\n    'analytics': 1,\n    'cors': 1,\n    'lifecycle': 1,\n    'delete': 1,\n    'inventory': 1,\n    'location': 1,\n    'logging': 1,\n    'metrics': 1,\n    'notification': 1,\n    'partNumber': 1,\n    'policy': 1,\n    'requestPayment': 1,\n    'replication': 1,\n    'restore': 1,\n    'tagging': 1,\n    'torrent': 1,\n    'uploadId': 1,\n    'uploads': 1,\n    'versionId': 1,\n    'versioning': 1,\n    'versions': 1,\n    'website': 1\n  },\n\n  // when building the stringToSign, these querystring params should be\n  // part of the canonical resource string with their NON-encoded values\n  responseHeaders: {\n    'response-content-type': 1,\n    'response-content-language': 1,\n    'response-expires': 1,\n    'response-cache-control': 1,\n    'response-content-disposition': 1,\n    'response-content-encoding': 1\n  },\n\n  addAuthorization: function addAuthorization(credentials, date) {\n    if (!this.request.headers['presigned-expires']) {\n      this.request.headers['X-Amz-Date'] = AWS.util.date.rfc822(date);\n    }\n\n    if (credentials.sessionToken) {\n      // presigned URLs require this header to be lowercased\n      this.request.headers['x-amz-security-token'] = credentials.sessionToken;\n    }\n\n    var signature = this.sign(credentials.secretAccessKey, this.stringToSign());\n    var auth = 'AWS ' + credentials.accessKeyId + ':' + signature;\n\n    this.request.headers['Authorization'] = auth;\n  },\n\n  stringToSign: function stringToSign() {\n    var r = this.request;\n\n    var parts = [];\n    parts.push(r.method);\n    parts.push(r.headers['Content-MD5'] || '');\n    parts.push(r.headers['Content-Type'] || '');\n\n    // This is the \"Date\" header, but we use X-Amz-Date.\n    // The S3 signing mechanism requires us to pass an empty\n    // string for this Date header regardless.\n    parts.push(r.headers['presigned-expires'] || '');\n\n    var headers = this.canonicalizedAmzHeaders();\n    if (headers) parts.push(headers);\n    parts.push(this.canonicalizedResource());\n\n    return parts.join('\\n');\n\n  },\n\n  canonicalizedAmzHeaders: function canonicalizedAmzHeaders() {\n\n    var amzHeaders = [];\n\n    AWS.util.each(this.request.headers, function (name) {\n      if (name.match(/^x-amz-/i))\n        amzHeaders.push(name);\n    });\n\n    amzHeaders.sort(function (a, b) {\n      return a.toLowerCase() < b.toLowerCase() ? -1 : 1;\n    });\n\n    var parts = [];\n    AWS.util.arrayEach.call(this, amzHeaders, function (name) {\n      parts.push(name.toLowerCase() + ':' + String(this.request.headers[name]));\n    });\n\n    return parts.join('\\n');\n\n  },\n\n  canonicalizedResource: function canonicalizedResource() {\n\n    var r = this.request;\n\n    var parts = r.path.split('?');\n    var path = parts[0];\n    var querystring = parts[1];\n\n    var resource = '';\n\n    if (r.virtualHostedBucket)\n      resource += '/' + r.virtualHostedBucket;\n\n    resource += path;\n\n    if (querystring) {\n\n      // collect a list of sub resources and query params that need to be signed\n      var resources = [];\n\n      AWS.util.arrayEach.call(this, querystring.split('&'), function (param) {\n        var name = param.split('=')[0];\n        var value = param.split('=')[1];\n        if (this.subResources[name] || this.responseHeaders[name]) {\n          var subresource = { name: name };\n          if (value !== undefined) {\n            if (this.subResources[name]) {\n              subresource.value = value;\n            } else {\n              subresource.value = decodeURIComponent(value);\n            }\n          }\n          resources.push(subresource);\n        }\n      });\n\n      resources.sort(function (a, b) { return a.name < b.name ? -1 : 1; });\n\n      if (resources.length) {\n\n        querystring = [];\n        AWS.util.arrayEach(resources, function (res) {\n          if (res.value === undefined) {\n            querystring.push(res.name);\n          } else {\n            querystring.push(res.name + '=' + res.value);\n          }\n        });\n\n        resource += '?' + querystring.join('&');\n      }\n\n    }\n\n    return resource;\n\n  },\n\n  sign: function sign(secret, string) {\n    return AWS.util.crypto.hmac(secret, string, 'base64', 'sha1');\n  }\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.Signers.S3;\n","var AWS = require('../core');\nvar inherit = AWS.util.inherit;\n\n/**\n * @api private\n */\nvar expiresHeader = 'presigned-expires';\n\n/**\n * @api private\n */\nfunction signedUrlBuilder(request) {\n  var expires = request.httpRequest.headers[expiresHeader];\n  var signerClass = request.service.getSignerClass(request);\n\n  delete request.httpRequest.headers['User-Agent'];\n  delete request.httpRequest.headers['X-Amz-User-Agent'];\n\n  if (signerClass === AWS.Signers.V4) {\n    if (expires > 604800) { // one week expiry is invalid\n      var message = 'Presigning does not support expiry time greater ' +\n                    'than a week with SigV4 signing.';\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidExpiryTime', message: message, retryable: false\n      });\n    }\n    request.httpRequest.headers[expiresHeader] = expires;\n  } else if (signerClass === AWS.Signers.S3) {\n    var now = request.service ? request.service.getSkewCorrectedDate() : AWS.util.date.getDate();\n    request.httpRequest.headers[expiresHeader] = parseInt(\n      AWS.util.date.unixTimestamp(now) + expires, 10).toString();\n  } else {\n    throw AWS.util.error(new Error(), {\n      message: 'Presigning only supports S3 or SigV4 signing.',\n      code: 'UnsupportedSigner', retryable: false\n    });\n  }\n}\n\n/**\n * @api private\n */\nfunction signedUrlSigner(request) {\n  var endpoint = request.httpRequest.endpoint;\n  var parsedUrl = AWS.util.urlParse(request.httpRequest.path);\n  var queryParams = {};\n\n  if (parsedUrl.search) {\n    queryParams = AWS.util.queryStringParse(parsedUrl.search.substr(1));\n  }\n\n  var auth = request.httpRequest.headers['Authorization'].split(' ');\n  if (auth[0] === 'AWS') {\n    auth = auth[1].split(':');\n    queryParams['AWSAccessKeyId'] = auth[0];\n    queryParams['Signature'] = auth[1];\n\n    AWS.util.each(request.httpRequest.headers, function (key, value) {\n      if (key === expiresHeader) key = 'Expires';\n      if (key.indexOf('x-amz-meta-') === 0) {\n        // Delete existing, potentially not normalized key\n        delete queryParams[key];\n        key = key.toLowerCase();\n      }\n      queryParams[key] = value;\n    });\n    delete request.httpRequest.headers[expiresHeader];\n    delete queryParams['Authorization'];\n    delete queryParams['Host'];\n  } else if (auth[0] === 'AWS4-HMAC-SHA256') { // SigV4 signing\n    auth.shift();\n    var rest = auth.join(' ');\n    var signature = rest.match(/Signature=(.*?)(?:,|\\s|\\r?\\n|$)/)[1];\n    queryParams['X-Amz-Signature'] = signature;\n    delete queryParams['Expires'];\n  }\n\n  // build URL\n  endpoint.pathname = parsedUrl.pathname;\n  endpoint.search = AWS.util.queryParamsToString(queryParams);\n}\n\n/**\n * @api private\n */\nAWS.Signers.Presign = inherit({\n  /**\n   * @api private\n   */\n  sign: function sign(request, expireTime, callback) {\n    request.httpRequest.headers[expiresHeader] = expireTime || 3600;\n    request.on('build', signedUrlBuilder);\n    request.on('sign', signedUrlSigner);\n    request.removeListener('afterBuild',\n      AWS.EventListeners.Core.SET_CONTENT_LENGTH);\n    request.removeListener('afterBuild',\n      AWS.EventListeners.Core.COMPUTE_SHA256);\n\n    request.emit('beforePresign', [request]);\n\n    if (callback) {\n      request.build(function() {\n        if (this.response.error) callback(this.response.error);\n        else {\n          callback(null, AWS.util.urlFormat(request.httpRequest.endpoint));\n        }\n      });\n    } else {\n      request.build();\n      if (request.response.error) throw request.response.error;\n      return AWS.util.urlFormat(request.httpRequest.endpoint);\n    }\n  }\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.Signers.Presign;\n","var AWS = require('./core');\n\n/**\n * @api private\n */\nAWS.ParamValidator = AWS.util.inherit({\n  /**\n   * Create a new validator object.\n   *\n   * @param validation [Boolean|map] whether input parameters should be\n   *     validated against the operation description before sending the\n   *     request. Pass a map to enable any of the following specific\n   *     validation features:\n   *\n   *     * **min** [Boolean] &mdash; Validates that a value meets the min\n   *       constraint. This is enabled by default when paramValidation is set\n   *       to `true`.\n   *     * **max** [Boolean] &mdash; Validates that a value meets the max\n   *       constraint.\n   *     * **pattern** [Boolean] &mdash; Validates that a string value matches a\n   *       regular expression.\n   *     * **enum** [Boolean] &mdash; Validates that a string value matches one\n   *       of the allowable enum values.\n   */\n  constructor: function ParamValidator(validation) {\n    if (validation === true || validation === undefined) {\n      validation = {'min': true};\n    }\n    this.validation = validation;\n  },\n\n  validate: function validate(shape, params, context) {\n    this.errors = [];\n    this.validateMember(shape, params || {}, context || 'params');\n\n    if (this.errors.length > 1) {\n      var msg = this.errors.join('\\n* ');\n      msg = 'There were ' + this.errors.length +\n        ' validation errors:\\n* ' + msg;\n      throw AWS.util.error(new Error(msg),\n        {code: 'MultipleValidationErrors', errors: this.errors});\n    } else if (this.errors.length === 1) {\n      throw this.errors[0];\n    } else {\n      return true;\n    }\n  },\n\n  fail: function fail(code, message) {\n    this.errors.push(AWS.util.error(new Error(message), {code: code}));\n  },\n\n  validateStructure: function validateStructure(shape, params, context) {\n    this.validateType(params, context, ['object'], 'structure');\n\n    var paramName;\n    for (var i = 0; shape.required && i < shape.required.length; i++) {\n      paramName = shape.required[i];\n      var value = params[paramName];\n      if (value === undefined || value === null) {\n        this.fail('MissingRequiredParameter',\n          'Missing required key \\'' + paramName + '\\' in ' + context);\n      }\n    }\n\n    // validate hash members\n    for (paramName in params) {\n      if (!Object.prototype.hasOwnProperty.call(params, paramName)) continue;\n\n      var paramValue = params[paramName],\n          memberShape = shape.members[paramName];\n\n      if (memberShape !== undefined) {\n        var memberContext = [context, paramName].join('.');\n        this.validateMember(memberShape, paramValue, memberContext);\n      } else {\n        this.fail('UnexpectedParameter',\n          'Unexpected key \\'' + paramName + '\\' found in ' + context);\n      }\n    }\n\n    return true;\n  },\n\n  validateMember: function validateMember(shape, param, context) {\n    switch (shape.type) {\n      case 'structure':\n        return this.validateStructure(shape, param, context);\n      case 'list':\n        return this.validateList(shape, param, context);\n      case 'map':\n        return this.validateMap(shape, param, context);\n      default:\n        return this.validateScalar(shape, param, context);\n    }\n  },\n\n  validateList: function validateList(shape, params, context) {\n    if (this.validateType(params, context, [Array])) {\n      this.validateRange(shape, params.length, context, 'list member count');\n      // validate array members\n      for (var i = 0; i < params.length; i++) {\n        this.validateMember(shape.member, params[i], context + '[' + i + ']');\n      }\n    }\n  },\n\n  validateMap: function validateMap(shape, params, context) {\n    if (this.validateType(params, context, ['object'], 'map')) {\n      // Build up a count of map members to validate range traits.\n      var mapCount = 0;\n      for (var param in params) {\n        if (!Object.prototype.hasOwnProperty.call(params, param)) continue;\n        // Validate any map key trait constraints\n        this.validateMember(shape.key, param,\n                            context + '[key=\\'' + param + '\\']');\n        this.validateMember(shape.value, params[param],\n                            context + '[\\'' + param + '\\']');\n        mapCount++;\n      }\n      this.validateRange(shape, mapCount, context, 'map member count');\n    }\n  },\n\n  validateScalar: function validateScalar(shape, value, context) {\n    switch (shape.type) {\n      case null:\n      case undefined:\n      case 'string':\n        return this.validateString(shape, value, context);\n      case 'base64':\n      case 'binary':\n        return this.validatePayload(value, context);\n      case 'integer':\n      case 'float':\n        return this.validateNumber(shape, value, context);\n      case 'boolean':\n        return this.validateType(value, context, ['boolean']);\n      case 'timestamp':\n        return this.validateType(value, context, [Date,\n          /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$/, 'number'],\n          'Date object, ISO-8601 string, or a UNIX timestamp');\n      default:\n        return this.fail('UnkownType', 'Unhandled type ' +\n                         shape.type + ' for ' + context);\n    }\n  },\n\n  validateString: function validateString(shape, value, context) {\n    var validTypes = ['string'];\n    if (shape.isJsonValue) {\n      validTypes = validTypes.concat(['number', 'object', 'boolean']);\n    }\n    if (value !== null && this.validateType(value, context, validTypes)) {\n      this.validateEnum(shape, value, context);\n      this.validateRange(shape, value.length, context, 'string length');\n      this.validatePattern(shape, value, context);\n      this.validateUri(shape, value, context);\n    }\n  },\n\n  validateUri: function validateUri(shape, value, context) {\n    if (shape['location'] === 'uri') {\n      if (value.length === 0) {\n        this.fail('UriParameterError', 'Expected uri parameter to have length >= 1,'\n          + ' but found \"' + value +'\" for ' + context);\n      }\n    }\n  },\n\n  validatePattern: function validatePattern(shape, value, context) {\n    if (this.validation['pattern'] && shape['pattern'] !== undefined) {\n      if (!(new RegExp(shape['pattern'])).test(value)) {\n        this.fail('PatternMatchError', 'Provided value \"' + value + '\" '\n          + 'does not match regex pattern /' + shape['pattern'] + '/ for '\n          + context);\n      }\n    }\n  },\n\n  validateRange: function validateRange(shape, value, context, descriptor) {\n    if (this.validation['min']) {\n      if (shape['min'] !== undefined && value < shape['min']) {\n        this.fail('MinRangeError', 'Expected ' + descriptor + ' >= '\n          + shape['min'] + ', but found ' + value + ' for ' + context);\n      }\n    }\n    if (this.validation['max']) {\n      if (shape['max'] !== undefined && value > shape['max']) {\n        this.fail('MaxRangeError', 'Expected ' + descriptor + ' <= '\n          + shape['max'] + ', but found ' + value + ' for ' + context);\n      }\n    }\n  },\n\n  validateEnum: function validateRange(shape, value, context) {\n    if (this.validation['enum'] && shape['enum'] !== undefined) {\n      // Fail if the string value is not present in the enum list\n      if (shape['enum'].indexOf(value) === -1) {\n        this.fail('EnumError', 'Found string value of ' + value + ', but '\n          + 'expected ' + shape['enum'].join('|') + ' for ' + context);\n      }\n    }\n  },\n\n  validateType: function validateType(value, context, acceptedTypes, type) {\n    // We will not log an error for null or undefined, but we will return\n    // false so that callers know that the expected type was not strictly met.\n    if (value === null || value === undefined) return false;\n\n    var foundInvalidType = false;\n    for (var i = 0; i < acceptedTypes.length; i++) {\n      if (typeof acceptedTypes[i] === 'string') {\n        if (typeof value === acceptedTypes[i]) return true;\n      } else if (acceptedTypes[i] instanceof RegExp) {\n        if ((value || '').toString().match(acceptedTypes[i])) return true;\n      } else {\n        if (value instanceof acceptedTypes[i]) return true;\n        if (AWS.util.isType(value, acceptedTypes[i])) return true;\n        if (!type && !foundInvalidType) acceptedTypes = acceptedTypes.slice();\n        acceptedTypes[i] = AWS.util.typeName(acceptedTypes[i]);\n      }\n      foundInvalidType = true;\n    }\n\n    var acceptedType = type;\n    if (!acceptedType) {\n      acceptedType = acceptedTypes.join(', ').replace(/,([^,]+)$/, ', or$1');\n    }\n\n    var vowel = acceptedType.match(/^[aeiou]/i) ? 'n' : '';\n    this.fail('InvalidParameterType', 'Expected ' + context + ' to be a' +\n              vowel + ' ' + acceptedType);\n    return false;\n  },\n\n  validateNumber: function validateNumber(shape, value, context) {\n    if (value === null || value === undefined) return;\n    if (typeof value === 'string') {\n      var castedValue = parseFloat(value);\n      if (castedValue.toString() === value) value = castedValue;\n    }\n    if (this.validateType(value, context, ['number'])) {\n      this.validateRange(shape, value, context, 'numeric value');\n    }\n  },\n\n  validatePayload: function validatePayload(value, context) {\n    if (value === null || value === undefined) return;\n    if (typeof value === 'string') return;\n    if (value && typeof value.byteLength === 'number') return; // typed arrays\n    if (AWS.util.isNode()) { // special check for buffer/stream in Node.js\n      var Stream = AWS.util.stream.Stream;\n      if (AWS.util.Buffer.isBuffer(value) || value instanceof Stream) return;\n    } else {\n      if (typeof Blob !== void 0 && value instanceof Blob) return;\n    }\n\n    var types = ['Buffer', 'Stream', 'File', 'Blob', 'ArrayBuffer', 'DataView'];\n    if (value) {\n      for (var i = 0; i < types.length; i++) {\n        if (AWS.util.isType(value, types[i])) return;\n        if (AWS.util.typeName(value.constructor) === types[i]) return;\n      }\n    }\n\n    this.fail('InvalidParameterType', 'Expected ' + context + ' to be a ' +\n      'string, Buffer, Stream, Blob, or typed array object');\n  }\n});\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","var Hmac = require('./browserHmac');\nvar Md5 = require('./browserMd5');\nvar Sha1 = require('./browserSha1');\nvar Sha256 = require('./browserSha256');\n\n/**\n * @api private\n */\nmodule.exports = exports = {\n    createHash: function createHash(alg) {\n      alg = alg.toLowerCase();\n      if (alg === 'md5') {\n        return new Md5();\n      } else if (alg === 'sha256') {\n        return new Sha256();\n      } else if (alg === 'sha1') {\n        return new Sha1();\n      }\n\n      throw new Error('Hash algorithm ' + alg + ' is not supported in the browser SDK');\n    },\n    createHmac: function createHmac(alg, key) {\n      alg = alg.toLowerCase();\n      if (alg === 'md5') {\n        return new Hmac(Md5, key);\n      } else if (alg === 'sha256') {\n        return new Hmac(Sha256, key);\n      } else if (alg === 'sha1') {\n        return new Hmac(Sha1, key);\n      }\n\n      throw new Error('HMAC algorithm ' + alg + ' is not supported in the browser SDK');\n    },\n    createSign: function() {\n      throw new Error('createSign is not implemented in the browser');\n    }\n  };\n","var hashUtils = require('./browserHashUtils');\n\n/**\n * @api private\n */\nfunction Hmac(hashCtor, secret) {\n    this.hash = new hashCtor();\n    this.outer = new hashCtor();\n\n    var inner = bufferFromSecret(hashCtor, secret);\n    var outer = new Uint8Array(hashCtor.BLOCK_SIZE);\n    outer.set(inner);\n\n    for (var i = 0; i < hashCtor.BLOCK_SIZE; i++) {\n        inner[i] ^= 0x36;\n        outer[i] ^= 0x5c;\n    }\n\n    this.hash.update(inner);\n    this.outer.update(outer);\n\n    // Zero out the copied key buffer.\n    for (var i = 0; i < inner.byteLength; i++) {\n        inner[i] = 0;\n    }\n}\n\n/**\n * @api private\n */\nmodule.exports = exports = Hmac;\n\nHmac.prototype.update = function (toHash) {\n    if (hashUtils.isEmptyData(toHash) || this.error) {\n        return this;\n    }\n\n    try {\n        this.hash.update(hashUtils.convertToBuffer(toHash));\n    } catch (e) {\n        this.error = e;\n    }\n\n    return this;\n};\n\nHmac.prototype.digest = function (encoding) {\n    if (!this.outer.finished) {\n        this.outer.update(this.hash.digest());\n    }\n\n    return this.outer.digest(encoding);\n};\n\nfunction bufferFromSecret(hashCtor, secret) {\n    var input = hashUtils.convertToBuffer(secret);\n    if (input.byteLength > hashCtor.BLOCK_SIZE) {\n        var bufferHash = new hashCtor;\n        bufferHash.update(input);\n        input = bufferHash.digest();\n    }\n    var buffer = new Uint8Array(hashCtor.BLOCK_SIZE);\n    buffer.set(input);\n    return buffer;\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","var hashUtils = require('./browserHashUtils');\nvar Buffer = require('buffer/').Buffer;\n\nvar BLOCK_SIZE = 64;\n\nvar DIGEST_LENGTH = 16;\n\nvar INIT = [\n    0x67452301,\n    0xefcdab89,\n    0x98badcfe,\n    0x10325476,\n];\n\n/**\n * @api private\n */\nfunction Md5() {\n    this.state = [\n        0x67452301,\n        0xefcdab89,\n        0x98badcfe,\n        0x10325476,\n    ];\n    this.buffer = new DataView(new ArrayBuffer(BLOCK_SIZE));\n    this.bufferLength = 0;\n    this.bytesHashed = 0;\n    this.finished = false;\n}\n\n/**\n * @api private\n */\nmodule.exports = exports = Md5;\n\nMd5.BLOCK_SIZE = BLOCK_SIZE;\n\nMd5.prototype.update = function (sourceData) {\n    if (hashUtils.isEmptyData(sourceData)) {\n        return this;\n    } else if (this.finished) {\n        throw new Error('Attempted to update an already finished hash.');\n    }\n\n    var data = hashUtils.convertToBuffer(sourceData);\n    var position = 0;\n    var byteLength = data.byteLength;\n    this.bytesHashed += byteLength;\n    while (byteLength > 0) {\n        this.buffer.setUint8(this.bufferLength++, data[position++]);\n        byteLength--;\n        if (this.bufferLength === BLOCK_SIZE) {\n            this.hashBuffer();\n            this.bufferLength = 0;\n        }\n    }\n\n    return this;\n};\n\nMd5.prototype.digest = function (encoding) {\n    if (!this.finished) {\n        var _a = this, buffer = _a.buffer, undecoratedLength = _a.bufferLength, bytesHashed = _a.bytesHashed;\n        var bitsHashed = bytesHashed * 8;\n        buffer.setUint8(this.bufferLength++, 128);\n        // Ensure the final block has enough room for the hashed length\n        if (undecoratedLength % BLOCK_SIZE >= BLOCK_SIZE - 8) {\n            for (var i = this.bufferLength; i < BLOCK_SIZE; i++) {\n                buffer.setUint8(i, 0);\n            }\n            this.hashBuffer();\n            this.bufferLength = 0;\n        }\n        for (var i = this.bufferLength; i < BLOCK_SIZE - 8; i++) {\n            buffer.setUint8(i, 0);\n        }\n        buffer.setUint32(BLOCK_SIZE - 8, bitsHashed >>> 0, true);\n        buffer.setUint32(BLOCK_SIZE - 4, Math.floor(bitsHashed / 0x100000000), true);\n        this.hashBuffer();\n        this.finished = true;\n    }\n    var out = new DataView(new ArrayBuffer(DIGEST_LENGTH));\n    for (var i = 0; i < 4; i++) {\n        out.setUint32(i * 4, this.state[i], true);\n    }\n    var buff = new Buffer(out.buffer, out.byteOffset, out.byteLength);\n    return encoding ? buff.toString(encoding) : buff;\n};\n\nMd5.prototype.hashBuffer = function () {\n    var _a = this, buffer = _a.buffer, state = _a.state;\n    var a = state[0], b = state[1], c = state[2], d = state[3];\n    a = ff(a, b, c, d, buffer.getUint32(0, true), 7, 0xd76aa478);\n    d = ff(d, a, b, c, buffer.getUint32(4, true), 12, 0xe8c7b756);\n    c = ff(c, d, a, b, buffer.getUint32(8, true), 17, 0x242070db);\n    b = ff(b, c, d, a, buffer.getUint32(12, true), 22, 0xc1bdceee);\n    a = ff(a, b, c, d, buffer.getUint32(16, true), 7, 0xf57c0faf);\n    d = ff(d, a, b, c, buffer.getUint32(20, true), 12, 0x4787c62a);\n    c = ff(c, d, a, b, buffer.getUint32(24, true), 17, 0xa8304613);\n    b = ff(b, c, d, a, buffer.getUint32(28, true), 22, 0xfd469501);\n    a = ff(a, b, c, d, buffer.getUint32(32, true), 7, 0x698098d8);\n    d = ff(d, a, b, c, buffer.getUint32(36, true), 12, 0x8b44f7af);\n    c = ff(c, d, a, b, buffer.getUint32(40, true), 17, 0xffff5bb1);\n    b = ff(b, c, d, a, buffer.getUint32(44, true), 22, 0x895cd7be);\n    a = ff(a, b, c, d, buffer.getUint32(48, true), 7, 0x6b901122);\n    d = ff(d, a, b, c, buffer.getUint32(52, true), 12, 0xfd987193);\n    c = ff(c, d, a, b, buffer.getUint32(56, true), 17, 0xa679438e);\n    b = ff(b, c, d, a, buffer.getUint32(60, true), 22, 0x49b40821);\n    a = gg(a, b, c, d, buffer.getUint32(4, true), 5, 0xf61e2562);\n    d = gg(d, a, b, c, buffer.getUint32(24, true), 9, 0xc040b340);\n    c = gg(c, d, a, b, buffer.getUint32(44, true), 14, 0x265e5a51);\n    b = gg(b, c, d, a, buffer.getUint32(0, true), 20, 0xe9b6c7aa);\n    a = gg(a, b, c, d, buffer.getUint32(20, true), 5, 0xd62f105d);\n    d = gg(d, a, b, c, buffer.getUint32(40, true), 9, 0x02441453);\n    c = gg(c, d, a, b, buffer.getUint32(60, true), 14, 0xd8a1e681);\n    b = gg(b, c, d, a, buffer.getUint32(16, true), 20, 0xe7d3fbc8);\n    a = gg(a, b, c, d, buffer.getUint32(36, true), 5, 0x21e1cde6);\n    d = gg(d, a, b, c, buffer.getUint32(56, true), 9, 0xc33707d6);\n    c = gg(c, d, a, b, buffer.getUint32(12, true), 14, 0xf4d50d87);\n    b = gg(b, c, d, a, buffer.getUint32(32, true), 20, 0x455a14ed);\n    a = gg(a, b, c, d, buffer.getUint32(52, true), 5, 0xa9e3e905);\n    d = gg(d, a, b, c, buffer.getUint32(8, true), 9, 0xfcefa3f8);\n    c = gg(c, d, a, b, buffer.getUint32(28, true), 14, 0x676f02d9);\n    b = gg(b, c, d, a, buffer.getUint32(48, true), 20, 0x8d2a4c8a);\n    a = hh(a, b, c, d, buffer.getUint32(20, true), 4, 0xfffa3942);\n    d = hh(d, a, b, c, buffer.getUint32(32, true), 11, 0x8771f681);\n    c = hh(c, d, a, b, buffer.getUint32(44, true), 16, 0x6d9d6122);\n    b = hh(b, c, d, a, buffer.getUint32(56, true), 23, 0xfde5380c);\n    a = hh(a, b, c, d, buffer.getUint32(4, true), 4, 0xa4beea44);\n    d = hh(d, a, b, c, buffer.getUint32(16, true), 11, 0x4bdecfa9);\n    c = hh(c, d, a, b, buffer.getUint32(28, true), 16, 0xf6bb4b60);\n    b = hh(b, c, d, a, buffer.getUint32(40, true), 23, 0xbebfbc70);\n    a = hh(a, b, c, d, buffer.getUint32(52, true), 4, 0x289b7ec6);\n    d = hh(d, a, b, c, buffer.getUint32(0, true), 11, 0xeaa127fa);\n    c = hh(c, d, a, b, buffer.getUint32(12, true), 16, 0xd4ef3085);\n    b = hh(b, c, d, a, buffer.getUint32(24, true), 23, 0x04881d05);\n    a = hh(a, b, c, d, buffer.getUint32(36, true), 4, 0xd9d4d039);\n    d = hh(d, a, b, c, buffer.getUint32(48, true), 11, 0xe6db99e5);\n    c = hh(c, d, a, b, buffer.getUint32(60, true), 16, 0x1fa27cf8);\n    b = hh(b, c, d, a, buffer.getUint32(8, true), 23, 0xc4ac5665);\n    a = ii(a, b, c, d, buffer.getUint32(0, true), 6, 0xf4292244);\n    d = ii(d, a, b, c, buffer.getUint32(28, true), 10, 0x432aff97);\n    c = ii(c, d, a, b, buffer.getUint32(56, true), 15, 0xab9423a7);\n    b = ii(b, c, d, a, buffer.getUint32(20, true), 21, 0xfc93a039);\n    a = ii(a, b, c, d, buffer.getUint32(48, true), 6, 0x655b59c3);\n    d = ii(d, a, b, c, buffer.getUint32(12, true), 10, 0x8f0ccc92);\n    c = ii(c, d, a, b, buffer.getUint32(40, true), 15, 0xffeff47d);\n    b = ii(b, c, d, a, buffer.getUint32(4, true), 21, 0x85845dd1);\n    a = ii(a, b, c, d, buffer.getUint32(32, true), 6, 0x6fa87e4f);\n    d = ii(d, a, b, c, buffer.getUint32(60, true), 10, 0xfe2ce6e0);\n    c = ii(c, d, a, b, buffer.getUint32(24, true), 15, 0xa3014314);\n    b = ii(b, c, d, a, buffer.getUint32(52, true), 21, 0x4e0811a1);\n    a = ii(a, b, c, d, buffer.getUint32(16, true), 6, 0xf7537e82);\n    d = ii(d, a, b, c, buffer.getUint32(44, true), 10, 0xbd3af235);\n    c = ii(c, d, a, b, buffer.getUint32(8, true), 15, 0x2ad7d2bb);\n    b = ii(b, c, d, a, buffer.getUint32(36, true), 21, 0xeb86d391);\n    state[0] = (a + state[0]) & 0xFFFFFFFF;\n    state[1] = (b + state[1]) & 0xFFFFFFFF;\n    state[2] = (c + state[2]) & 0xFFFFFFFF;\n    state[3] = (d + state[3]) & 0xFFFFFFFF;\n};\n\nfunction cmn(q, a, b, x, s, t) {\n    a = (((a + q) & 0xFFFFFFFF) + ((x + t) & 0xFFFFFFFF)) & 0xFFFFFFFF;\n    return (((a << s) | (a >>> (32 - s))) + b) & 0xFFFFFFFF;\n}\n\nfunction ff(a, b, c, d, x, s, t) {\n    return cmn((b & c) | ((~b) & d), a, b, x, s, t);\n}\n\nfunction gg(a, b, c, d, x, s, t) {\n    return cmn((b & d) | (c & (~d)), a, b, x, s, t);\n}\n\nfunction hh(a, b, c, d, x, s, t) {\n    return cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction ii(a, b, c, d, x, s, t) {\n    return cmn(c ^ (b | (~d)), a, b, x, s, t);\n}\n","var Buffer = require('buffer/').Buffer;\nvar hashUtils = require('./browserHashUtils');\n\nvar BLOCK_SIZE = 64;\n\nvar DIGEST_LENGTH = 20;\n\nvar KEY = new Uint32Array([\n    0x5a827999,\n    0x6ed9eba1,\n    0x8f1bbcdc | 0,\n    0xca62c1d6 | 0\n]);\n\nvar INIT = [\n    0x6a09e667,\n    0xbb67ae85,\n    0x3c6ef372,\n    0xa54ff53a,\n    0x510e527f,\n    0x9b05688c,\n    0x1f83d9ab,\n    0x5be0cd19,\n];\n\nvar MAX_HASHABLE_LENGTH = Math.pow(2, 53) - 1;\n\n/**\n * @api private\n */\nfunction Sha1() {\n    this.h0 = 0x67452301;\n    this.h1 = 0xEFCDAB89;\n    this.h2 = 0x98BADCFE;\n    this.h3 = 0x10325476;\n    this.h4 = 0xC3D2E1F0;\n    // The first 64 bytes (16 words) is the data chunk\n    this.block = new Uint32Array(80);\n    this.offset = 0;\n    this.shift = 24;\n    this.totalLength = 0;\n}\n\n/**\n * @api private\n */\nmodule.exports = exports = Sha1;\n\nSha1.BLOCK_SIZE = BLOCK_SIZE;\n\nSha1.prototype.update = function (data) {\n    if (this.finished) {\n        throw new Error('Attempted to update an already finished hash.');\n    }\n\n    if (hashUtils.isEmptyData(data)) {\n        return this;\n    }\n\n    data = hashUtils.convertToBuffer(data);\n\n    var length = data.length;\n    this.totalLength += length * 8;\n    for (var i = 0; i < length; i++) {\n        this.write(data[i]);\n    }\n\n    return this;\n};\n\nSha1.prototype.write = function write(byte) {\n    this.block[this.offset] |= (byte & 0xff) << this.shift;\n    if (this.shift) {\n        this.shift -= 8;\n    } else {\n        this.offset++;\n        this.shift = 24;\n    }\n\n    if (this.offset === 16) this.processBlock();\n};\n\nSha1.prototype.digest = function (encoding) {\n    // Pad\n    this.write(0x80);\n    if (this.offset > 14 || (this.offset === 14 && this.shift < 24)) {\n      this.processBlock();\n    }\n    this.offset = 14;\n    this.shift = 24;\n\n    // 64-bit length big-endian\n    this.write(0x00); // numbers this big aren't accurate in javascript anyway\n    this.write(0x00); // ..So just hard-code to zero.\n    this.write(this.totalLength > 0xffffffffff ? this.totalLength / 0x10000000000 : 0x00);\n    this.write(this.totalLength > 0xffffffff ? this.totalLength / 0x100000000 : 0x00);\n    for (var s = 24; s >= 0; s -= 8) {\n        this.write(this.totalLength >> s);\n    }\n    // The value in state is little-endian rather than big-endian, so flip\n    // each word into a new Uint8Array\n    var out = new Buffer(DIGEST_LENGTH);\n    var outView = new DataView(out.buffer);\n    outView.setUint32(0, this.h0, false);\n    outView.setUint32(4, this.h1, false);\n    outView.setUint32(8, this.h2, false);\n    outView.setUint32(12, this.h3, false);\n    outView.setUint32(16, this.h4, false);\n\n    return encoding ? out.toString(encoding) : out;\n};\n\nSha1.prototype.processBlock = function processBlock() {\n    // Extend the sixteen 32-bit words into eighty 32-bit words:\n    for (var i = 16; i < 80; i++) {\n      var w = this.block[i - 3] ^ this.block[i - 8] ^ this.block[i - 14] ^ this.block[i - 16];\n      this.block[i] = (w << 1) | (w >>> 31);\n    }\n\n    // Initialize hash value for this chunk:\n    var a = this.h0;\n    var b = this.h1;\n    var c = this.h2;\n    var d = this.h3;\n    var e = this.h4;\n    var f, k;\n\n    // Main loop:\n    for (i = 0; i < 80; i++) {\n      if (i < 20) {\n        f = d ^ (b & (c ^ d));\n        k = 0x5A827999;\n      }\n      else if (i < 40) {\n        f = b ^ c ^ d;\n        k = 0x6ED9EBA1;\n      }\n      else if (i < 60) {\n        f = (b & c) | (d & (b | c));\n        k = 0x8F1BBCDC;\n      }\n      else {\n        f = b ^ c ^ d;\n        k = 0xCA62C1D6;\n      }\n      var temp = (a << 5 | a >>> 27) + f + e + k + (this.block[i]|0);\n      e = d;\n      d = c;\n      c = (b << 30 | b >>> 2);\n      b = a;\n      a = temp;\n    }\n\n    // Add this chunk's hash to result so far:\n    this.h0 = (this.h0 + a) | 0;\n    this.h1 = (this.h1 + b) | 0;\n    this.h2 = (this.h2 + c) | 0;\n    this.h3 = (this.h3 + d) | 0;\n    this.h4 = (this.h4 + e) | 0;\n\n    // The block is now reusable.\n    this.offset = 0;\n    for (i = 0; i < 16; i++) {\n        this.block[i] = 0;\n    }\n};\n","var Buffer = require('buffer/').Buffer;\nvar hashUtils = require('./browserHashUtils');\n\nvar BLOCK_SIZE = 64;\n\nvar DIGEST_LENGTH = 32;\n\nvar KEY = new Uint32Array([\n    0x428a2f98,\n    0x71374491,\n    0xb5c0fbcf,\n    0xe9b5dba5,\n    0x3956c25b,\n    0x59f111f1,\n    0x923f82a4,\n    0xab1c5ed5,\n    0xd807aa98,\n    0x12835b01,\n    0x243185be,\n    0x550c7dc3,\n    0x72be5d74,\n    0x80deb1fe,\n    0x9bdc06a7,\n    0xc19bf174,\n    0xe49b69c1,\n    0xefbe4786,\n    0x0fc19dc6,\n    0x240ca1cc,\n    0x2de92c6f,\n    0x4a7484aa,\n    0x5cb0a9dc,\n    0x76f988da,\n    0x983e5152,\n    0xa831c66d,\n    0xb00327c8,\n    0xbf597fc7,\n    0xc6e00bf3,\n    0xd5a79147,\n    0x06ca6351,\n    0x14292967,\n    0x27b70a85,\n    0x2e1b2138,\n    0x4d2c6dfc,\n    0x53380d13,\n    0x650a7354,\n    0x766a0abb,\n    0x81c2c92e,\n    0x92722c85,\n    0xa2bfe8a1,\n    0xa81a664b,\n    0xc24b8b70,\n    0xc76c51a3,\n    0xd192e819,\n    0xd6990624,\n    0xf40e3585,\n    0x106aa070,\n    0x19a4c116,\n    0x1e376c08,\n    0x2748774c,\n    0x34b0bcb5,\n    0x391c0cb3,\n    0x4ed8aa4a,\n    0x5b9cca4f,\n    0x682e6ff3,\n    0x748f82ee,\n    0x78a5636f,\n    0x84c87814,\n    0x8cc70208,\n    0x90befffa,\n    0xa4506ceb,\n    0xbef9a3f7,\n    0xc67178f2\n]);\n\nvar INIT = [\n    0x6a09e667,\n    0xbb67ae85,\n    0x3c6ef372,\n    0xa54ff53a,\n    0x510e527f,\n    0x9b05688c,\n    0x1f83d9ab,\n    0x5be0cd19,\n];\n\nvar MAX_HASHABLE_LENGTH = Math.pow(2, 53) - 1;\n\n/**\n * @private\n */\nfunction Sha256() {\n    this.state = [\n        0x6a09e667,\n        0xbb67ae85,\n        0x3c6ef372,\n        0xa54ff53a,\n        0x510e527f,\n        0x9b05688c,\n        0x1f83d9ab,\n        0x5be0cd19,\n    ];\n    this.temp = new Int32Array(64);\n    this.buffer = new Uint8Array(64);\n    this.bufferLength = 0;\n    this.bytesHashed = 0;\n    /**\n     * @private\n     */\n    this.finished = false;\n}\n\n/**\n * @api private\n */\nmodule.exports = exports = Sha256;\n\nSha256.BLOCK_SIZE = BLOCK_SIZE;\n\nSha256.prototype.update = function (data) {\n    if (this.finished) {\n        throw new Error('Attempted to update an already finished hash.');\n    }\n\n    if (hashUtils.isEmptyData(data)) {\n        return this;\n    }\n\n    data = hashUtils.convertToBuffer(data);\n\n    var position = 0;\n    var byteLength = data.byteLength;\n    this.bytesHashed += byteLength;\n    if (this.bytesHashed * 8 > MAX_HASHABLE_LENGTH) {\n        throw new Error('Cannot hash more than 2^53 - 1 bits');\n    }\n\n    while (byteLength > 0) {\n        this.buffer[this.bufferLength++] = data[position++];\n        byteLength--;\n        if (this.bufferLength === BLOCK_SIZE) {\n            this.hashBuffer();\n            this.bufferLength = 0;\n        }\n    }\n\n    return this;\n};\n\nSha256.prototype.digest = function (encoding) {\n    if (!this.finished) {\n        var bitsHashed = this.bytesHashed * 8;\n        var bufferView = new DataView(this.buffer.buffer, this.buffer.byteOffset, this.buffer.byteLength);\n        var undecoratedLength = this.bufferLength;\n        bufferView.setUint8(this.bufferLength++, 0x80);\n        // Ensure the final block has enough room for the hashed length\n        if (undecoratedLength % BLOCK_SIZE >= BLOCK_SIZE - 8) {\n            for (var i = this.bufferLength; i < BLOCK_SIZE; i++) {\n                bufferView.setUint8(i, 0);\n            }\n            this.hashBuffer();\n            this.bufferLength = 0;\n        }\n        for (var i = this.bufferLength; i < BLOCK_SIZE - 8; i++) {\n            bufferView.setUint8(i, 0);\n        }\n        bufferView.setUint32(BLOCK_SIZE - 8, Math.floor(bitsHashed / 0x100000000), true);\n        bufferView.setUint32(BLOCK_SIZE - 4, bitsHashed);\n        this.hashBuffer();\n        this.finished = true;\n    }\n    // The value in state is little-endian rather than big-endian, so flip\n    // each word into a new Uint8Array\n    var out = new Buffer(DIGEST_LENGTH);\n    for (var i = 0; i < 8; i++) {\n        out[i * 4] = (this.state[i] >>> 24) & 0xff;\n        out[i * 4 + 1] = (this.state[i] >>> 16) & 0xff;\n        out[i * 4 + 2] = (this.state[i] >>> 8) & 0xff;\n        out[i * 4 + 3] = (this.state[i] >>> 0) & 0xff;\n    }\n    return encoding ? out.toString(encoding) : out;\n};\n\nSha256.prototype.hashBuffer = function () {\n    var _a = this,\n        buffer = _a.buffer,\n        state = _a.state;\n    var state0 = state[0],\n        state1 = state[1],\n        state2 = state[2],\n        state3 = state[3],\n        state4 = state[4],\n        state5 = state[5],\n        state6 = state[6],\n        state7 = state[7];\n    for (var i = 0; i < BLOCK_SIZE; i++) {\n        if (i < 16) {\n            this.temp[i] = (((buffer[i * 4] & 0xff) << 24) |\n                ((buffer[(i * 4) + 1] & 0xff) << 16) |\n                ((buffer[(i * 4) + 2] & 0xff) << 8) |\n                (buffer[(i * 4) + 3] & 0xff));\n        }\n        else {\n            var u = this.temp[i - 2];\n            var t1_1 = (u >>> 17 | u << 15) ^\n                (u >>> 19 | u << 13) ^\n                (u >>> 10);\n            u = this.temp[i - 15];\n            var t2_1 = (u >>> 7 | u << 25) ^\n                (u >>> 18 | u << 14) ^\n                (u >>> 3);\n            this.temp[i] = (t1_1 + this.temp[i - 7] | 0) +\n                (t2_1 + this.temp[i - 16] | 0);\n        }\n        var t1 = (((((state4 >>> 6 | state4 << 26) ^\n            (state4 >>> 11 | state4 << 21) ^\n            (state4 >>> 25 | state4 << 7))\n            + ((state4 & state5) ^ (~state4 & state6))) | 0)\n            + ((state7 + ((KEY[i] + this.temp[i]) | 0)) | 0)) | 0;\n        var t2 = (((state0 >>> 2 | state0 << 30) ^\n            (state0 >>> 13 | state0 << 19) ^\n            (state0 >>> 22 | state0 << 10)) + ((state0 & state1) ^ (state0 & state2) ^ (state1 & state2))) | 0;\n        state7 = state6;\n        state6 = state5;\n        state5 = state4;\n        state4 = (state3 + t1) | 0;\n        state3 = state2;\n        state2 = state1;\n        state1 = state0;\n        state0 = (t1 + t2) | 0;\n    }\n    state[0] += state0;\n    state[1] += state1;\n    state[2] += state2;\n    state[3] += state3;\n    state[4] += state4;\n    state[5] += state5;\n    state[6] += state6;\n    state[7] += state7;\n};\n","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","module.exports = {\n  //provide realtime clock for performance measurement\n  now: function now() {\n    if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n      return performance.now();\n    }\n    return Date.now();\n  }\n};\n","var eventMessageChunker = require('../event-stream/event-message-chunker').eventMessageChunker;\nvar parseEvent = require('./parse-event').parseEvent;\n\nfunction createEventStream(body, parser, model) {\n    var eventMessages = eventMessageChunker(body);\n\n    var events = [];\n\n    for (var i = 0; i < eventMessages.length; i++) {\n        events.push(parseEvent(parser, eventMessages[i], model));\n    }\n\n    return events;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    createEventStream: createEventStream\n};\n","/**\n * Takes in a buffer of event messages and splits them into individual messages.\n * @param {Buffer} buffer\n * @api private\n */\nfunction eventMessageChunker(buffer) {\n    /** @type Buffer[] */\n    var messages = [];\n    var offset = 0;\n\n    while (offset < buffer.length) {\n        var totalLength = buffer.readInt32BE(offset);\n\n        // create new buffer for individual message (shares memory with original)\n        var message = buffer.slice(offset, totalLength + offset);\n        // increment offset to it starts at the next message\n        offset += totalLength;\n\n        messages.push(message);\n    }\n\n    return messages;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    eventMessageChunker: eventMessageChunker\n};\n","var parseMessage = require('./parse-message').parseMessage;\n\n/**\n *\n * @param {*} parser\n * @param {Buffer} message\n * @param {*} shape\n * @api private\n */\nfunction parseEvent(parser, message, shape) {\n    var parsedMessage = parseMessage(message);\n\n    // check if message is an event or error\n    var messageType = parsedMessage.headers[':message-type'];\n    if (messageType) {\n        if (messageType.value === 'error') {\n            throw parseError(parsedMessage);\n        } else if (messageType.value !== 'event') {\n            // not sure how to parse non-events/non-errors, ignore for now\n            return;\n        }\n    }\n\n    // determine event type\n    var eventType = parsedMessage.headers[':event-type'];\n    // check that the event type is modeled\n    var eventModel = shape.members[eventType.value];\n    if (!eventModel) {\n        return;\n    }\n\n    var result = {};\n    // check if an event payload exists\n    var eventPayloadMemberName = eventModel.eventPayloadMemberName;\n    if (eventPayloadMemberName) {\n        var payloadShape = eventModel.members[eventPayloadMemberName];\n        // if the shape is binary, return the byte array\n        if (payloadShape.type === 'binary') {\n            result[eventPayloadMemberName] = parsedMessage.body;\n        } else {\n            result[eventPayloadMemberName] = parser.parse(parsedMessage.body.toString(), payloadShape);\n        }\n    }\n\n    // read event headers\n    var eventHeaderNames = eventModel.eventHeaderMemberNames;\n    for (var i = 0; i < eventHeaderNames.length; i++) {\n        var name = eventHeaderNames[i];\n        if (parsedMessage.headers[name]) {\n            // parse the header!\n            result[name] = eventModel.members[name].toType(parsedMessage.headers[name].value);\n        }\n    }\n\n    var output = {};\n    output[eventType.value] = result;\n    return output;\n}\n\nfunction parseError(message) {\n    var errorCode = message.headers[':error-code'];\n    var errorMessage = message.headers[':error-message'];\n    var error = new Error(errorMessage.value || errorMessage);\n    error.code = error.name = errorCode.value || errorCode;\n    return error;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    parseEvent: parseEvent\n};\n","var Int64 = require('./int64').Int64;\n\nvar splitMessage = require('./split-message').splitMessage;\n\nvar BOOLEAN_TAG = 'boolean';\nvar BYTE_TAG = 'byte';\nvar SHORT_TAG = 'short';\nvar INT_TAG = 'integer';\nvar LONG_TAG = 'long';\nvar BINARY_TAG = 'binary';\nvar STRING_TAG = 'string';\nvar TIMESTAMP_TAG = 'timestamp';\nvar UUID_TAG = 'uuid';\n\n/**\n * @api private\n *\n * @param {Buffer} headers\n */\nfunction parseHeaders(headers) {\n    var out = {};\n    var position = 0;\n    while (position < headers.length) {\n        var nameLength = headers.readUInt8(position++);\n        var name = headers.slice(position, position + nameLength).toString();\n        position += nameLength;\n        switch (headers.readUInt8(position++)) {\n            case 0 /* boolTrue */:\n                out[name] = {\n                    type: BOOLEAN_TAG,\n                    value: true\n                };\n                break;\n            case 1 /* boolFalse */:\n                out[name] = {\n                    type: BOOLEAN_TAG,\n                    value: false\n                };\n                break;\n            case 2 /* byte */:\n                out[name] = {\n                    type: BYTE_TAG,\n                    value: headers.readInt8(position++)\n                };\n                break;\n            case 3 /* short */:\n                out[name] = {\n                    type: SHORT_TAG,\n                    value: headers.readInt16BE(position)\n                };\n                position += 2;\n                break;\n            case 4 /* integer */:\n                out[name] = {\n                    type: INT_TAG,\n                    value: headers.readInt32BE(position)\n                };\n                position += 4;\n                break;\n            case 5 /* long */:\n                out[name] = {\n                    type: LONG_TAG,\n                    value: new Int64(headers.slice(position, position + 8))\n                };\n                position += 8;\n                break;\n            case 6 /* byteArray */:\n                var binaryLength = headers.readUInt16BE(position);\n                position += 2;\n                out[name] = {\n                    type: BINARY_TAG,\n                    value: headers.slice(position, position + binaryLength)\n                };\n                position += binaryLength;\n                break;\n            case 7 /* string */:\n                var stringLength = headers.readUInt16BE(position);\n                position += 2;\n                out[name] = {\n                    type: STRING_TAG,\n                    value: headers.slice(\n                        position,\n                        position + stringLength\n                    ).toString()\n                };\n                position += stringLength;\n                break;\n            case 8 /* timestamp */:\n                out[name] = {\n                    type: TIMESTAMP_TAG,\n                    value: new Date(\n                        new Int64(headers.slice(position, position + 8))\n                            .valueOf()\n                    )\n                };\n                position += 8;\n                break;\n            case 9 /* uuid */:\n                var uuidChars = headers.slice(position, position + 16)\n                    .toString('hex');\n                position += 16;\n                out[name] = {\n                    type: UUID_TAG,\n                    value: uuidChars.substr(0, 8) + '-' +\n                        uuidChars.substr(8, 4) + '-' +\n                        uuidChars.substr(12, 4) + '-' +\n                        uuidChars.substr(16, 4) + '-' +\n                        uuidChars.substr(20)\n                };\n                break;\n            default:\n                throw new Error('Unrecognized header type tag');\n        }\n    }\n    return out;\n}\n\nfunction parseMessage(message) {\n    var parsed = splitMessage(message);\n    return { headers: parseHeaders(parsed.headers), body: parsed.body };\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    parseMessage: parseMessage\n};\n","var util = require('../core').util;\nvar toBuffer = util.buffer.toBuffer;\n\n/**\n * A lossless representation of a signed, 64-bit integer. Instances of this\n * class may be used in arithmetic expressions as if they were numeric\n * primitives, but the binary representation will be preserved unchanged as the\n * `bytes` property of the object. The bytes should be encoded as big-endian,\n * two's complement integers.\n * @param {Buffer} bytes\n *\n * @api private\n */\nfunction Int64(bytes) {\n    if (bytes.length !== 8) {\n        throw new Error('Int64 buffers must be exactly 8 bytes');\n    }\n    if (!util.Buffer.isBuffer(bytes)) bytes = toBuffer(bytes);\n\n    this.bytes = bytes;\n}\n\n/**\n * @param {number} number\n * @returns {Int64}\n *\n * @api private\n */\nInt64.fromNumber = function(number) {\n    if (number > 9223372036854775807 || number < -9223372036854775808) {\n        throw new Error(\n            number + ' is too large (or, if negative, too small) to represent as an Int64'\n        );\n    }\n\n    var bytes = new Uint8Array(8);\n    for (\n        var i = 7, remaining = Math.abs(Math.round(number));\n        i > -1 && remaining > 0;\n        i--, remaining /= 256\n    ) {\n        bytes[i] = remaining;\n    }\n\n    if (number < 0) {\n        negate(bytes);\n    }\n\n    return new Int64(bytes);\n};\n\n/**\n * @returns {number}\n *\n * @api private\n */\nInt64.prototype.valueOf = function() {\n    var bytes = this.bytes.slice(0);\n    var negative = bytes[0] & 128;\n    if (negative) {\n        negate(bytes);\n    }\n\n    return parseInt(bytes.toString('hex'), 16) * (negative ? -1 : 1);\n};\n\nInt64.prototype.toString = function() {\n    return String(this.valueOf());\n};\n\n/**\n * @param {Buffer} bytes\n *\n * @api private\n */\nfunction negate(bytes) {\n    for (var i = 0; i < 8; i++) {\n        bytes[i] ^= 0xFF;\n    }\n    for (var i = 7; i > -1; i--) {\n        bytes[i]++;\n        if (bytes[i] !== 0) {\n            break;\n        }\n    }\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    Int64: Int64\n};\n","var util = require('../core').util;\nvar toBuffer = util.buffer.toBuffer;\n\n// All prelude components are unsigned, 32-bit integers\nvar PRELUDE_MEMBER_LENGTH = 4;\n// The prelude consists of two components\nvar PRELUDE_LENGTH = PRELUDE_MEMBER_LENGTH * 2;\n// Checksums are always CRC32 hashes.\nvar CHECKSUM_LENGTH = 4;\n// Messages must include a full prelude, a prelude checksum, and a message checksum\nvar MINIMUM_MESSAGE_LENGTH = PRELUDE_LENGTH + CHECKSUM_LENGTH * 2;\n\n/**\n * @api private\n *\n * @param {Buffer} message\n */\nfunction splitMessage(message) {\n    if (!util.Buffer.isBuffer(message)) message = toBuffer(message);\n\n    if (message.length < MINIMUM_MESSAGE_LENGTH) {\n        throw new Error('Provided message too short to accommodate event stream message overhead');\n    }\n\n    if (message.length !== message.readUInt32BE(0)) {\n        throw new Error('Reported message length does not match received message length');\n    }\n\n    var expectedPreludeChecksum = message.readUInt32BE(PRELUDE_LENGTH);\n\n    if (\n        expectedPreludeChecksum !== util.crypto.crc32(\n            message.slice(0, PRELUDE_LENGTH)\n        )\n    ) {\n        throw new Error(\n            'The prelude checksum specified in the message (' +\n            expectedPreludeChecksum +\n            ') does not match the calculated CRC32 checksum.'\n        );\n    }\n\n    var expectedMessageChecksum = message.readUInt32BE(message.length - CHECKSUM_LENGTH);\n\n    if (\n        expectedMessageChecksum !== util.crypto.crc32(\n            message.slice(0, message.length - CHECKSUM_LENGTH)\n        )\n    ) {\n        throw new Error(\n            'The message checksum did not match the expected value of ' +\n                expectedMessageChecksum\n        );\n    }\n\n    var headersStart = PRELUDE_LENGTH + CHECKSUM_LENGTH;\n    var headersEnd = headersStart + message.readUInt32BE(PRELUDE_MEMBER_LENGTH);\n\n    return {\n        headers: message.slice(headersStart, headersEnd),\n        body: message.slice(headersEnd, message.length - CHECKSUM_LENGTH),\n    };\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    splitMessage: splitMessage\n};\n","var AWS = require('../core');\nvar STS = require('../../clients/sts');\n\n/**\n * Represents temporary credentials retrieved from {AWS.STS}. Without any\n * extra parameters, credentials will be fetched from the\n * {AWS.STS.getSessionToken} operation. If an IAM role is provided, the\n * {AWS.STS.assumeRole} operation will be used to fetch credentials for the\n * role instead.\n *\n * @note AWS.TemporaryCredentials is deprecated, but remains available for\n *   backwards compatibility. {AWS.ChainableTemporaryCredentials} is the\n *   preferred class for temporary credentials.\n *\n * To setup temporary credentials, configure a set of master credentials\n * using the standard credentials providers (environment, EC2 instance metadata,\n * or from the filesystem), then set the global credentials to a new\n * temporary credentials object:\n *\n * ```javascript\n * // Note that environment credentials are loaded by default,\n * // the following line is shown for clarity:\n * AWS.config.credentials = new AWS.EnvironmentCredentials('AWS');\n *\n * // Now set temporary credentials seeded from the master credentials\n * AWS.config.credentials = new AWS.TemporaryCredentials();\n *\n * // subsequent requests will now use temporary credentials from AWS STS.\n * new AWS.S3().listBucket(function(err, data) { ... });\n * ```\n *\n * @!attribute masterCredentials\n *   @return [AWS.Credentials] the master (non-temporary) credentials used to\n *     get and refresh temporary credentials from AWS STS.\n * @note (see constructor)\n */\nAWS.TemporaryCredentials = AWS.util.inherit(AWS.Credentials, {\n  /**\n   * Creates a new temporary credentials object.\n   *\n   * @note In order to create temporary credentials, you first need to have\n   *   \"master\" credentials configured in {AWS.Config.credentials}. These\n   *   master credentials are necessary to retrieve the temporary credentials,\n   *   as well as refresh the credentials when they expire.\n   * @param params [map] a map of options that are passed to the\n   *   {AWS.STS.assumeRole} or {AWS.STS.getSessionToken} operations.\n   *   If a `RoleArn` parameter is passed in, credentials will be based on the\n   *   IAM role.\n   * @param masterCredentials [AWS.Credentials] the master (non-temporary) credentials\n   *  used to get and refresh temporary credentials from AWS STS.\n   * @example Creating a new credentials object for generic temporary credentials\n   *   AWS.config.credentials = new AWS.TemporaryCredentials();\n   * @example Creating a new credentials object for an IAM role\n   *   AWS.config.credentials = new AWS.TemporaryCredentials({\n   *     RoleArn: 'arn:aws:iam::1234567890:role/TemporaryCredentials',\n   *   });\n   * @see AWS.STS.assumeRole\n   * @see AWS.STS.getSessionToken\n   */\n  constructor: function TemporaryCredentials(params, masterCredentials) {\n    AWS.Credentials.call(this);\n    this.loadMasterCredentials(masterCredentials);\n    this.expired = true;\n\n    this.params = params || {};\n    if (this.params.RoleArn) {\n      this.params.RoleSessionName =\n        this.params.RoleSessionName || 'temporary-credentials';\n    }\n  },\n\n  /**\n   * Refreshes credentials using {AWS.STS.assumeRole} or\n   * {AWS.STS.getSessionToken}, depending on whether an IAM role ARN was passed\n   * to the credentials {constructor}.\n   *\n   * @callback callback function(err)\n   *   Called when the STS service responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh (callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n   */\n  load: function load (callback) {\n    var self = this;\n    self.createClients();\n    self.masterCredentials.get(function () {\n      self.service.config.credentials = self.masterCredentials;\n      var operation = self.params.RoleArn ?\n        self.service.assumeRole : self.service.getSessionToken;\n      operation.call(self.service, function (err, data) {\n        if (!err) {\n          self.service.credentialsFrom(data, self);\n        }\n        callback(err);\n      });\n    });\n  },\n\n  /**\n   * @api private\n   */\n  loadMasterCredentials: function loadMasterCredentials (masterCredentials) {\n    this.masterCredentials = masterCredentials || AWS.config.credentials;\n    while (this.masterCredentials.masterCredentials) {\n      this.masterCredentials = this.masterCredentials.masterCredentials;\n    }\n\n    if (typeof this.masterCredentials.get !== 'function') {\n      this.masterCredentials = new AWS.Credentials(this.masterCredentials);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  createClients: function () {\n    this.service = this.service || new STS({params: this.params});\n  }\n\n});\n","var AWS = require('../core');\n\nAWS.util.update(AWS.STS.prototype, {\n  /**\n   * @overload credentialsFrom(data, credentials = null)\n   *   Creates a credentials object from STS response data containing\n   *   credentials information. Useful for quickly setting AWS credentials.\n   *\n   *   @note This is a low-level utility function. If you want to load temporary\n   *     credentials into your process for subsequent requests to AWS resources,\n   *     you should use {AWS.TemporaryCredentials} instead.\n   *   @param data [map] data retrieved from a call to {getFederatedToken},\n   *     {getSessionToken}, {assumeRole}, or {assumeRoleWithWebIdentity}.\n   *   @param credentials [AWS.Credentials] an optional credentials object to\n   *     fill instead of creating a new object. Useful when modifying an\n   *     existing credentials object from a refresh call.\n   *   @return [AWS.TemporaryCredentials] the set of temporary credentials\n   *     loaded from a raw STS operation response.\n   *   @example Using credentialsFrom to load global AWS credentials\n   *     var sts = new AWS.STS();\n   *     sts.getSessionToken(function (err, data) {\n   *       if (err) console.log(\"Error getting credentials\");\n   *       else {\n   *         AWS.config.credentials = sts.credentialsFrom(data);\n   *       }\n   *     });\n   *   @see AWS.TemporaryCredentials\n   */\n  credentialsFrom: function credentialsFrom(data, credentials) {\n    if (!data) return null;\n    if (!credentials) credentials = new AWS.TemporaryCredentials();\n    credentials.expired = false;\n    credentials.accessKeyId = data.Credentials.AccessKeyId;\n    credentials.secretAccessKey = data.Credentials.SecretAccessKey;\n    credentials.sessionToken = data.Credentials.SessionToken;\n    credentials.expireTime = data.Credentials.Expiration;\n    return credentials;\n  },\n\n  assumeRoleWithWebIdentity: function assumeRoleWithWebIdentity(params, callback) {\n    return this.makeUnauthenticatedRequest('assumeRoleWithWebIdentity', params, callback);\n  },\n\n  assumeRoleWithSAML: function assumeRoleWithSAML(params, callback) {\n    return this.makeUnauthenticatedRequest('assumeRoleWithSAML', params, callback);\n  }\n});\n","var AWS = require('../core');\nvar STS = require('../../clients/sts');\n\n/**\n * Represents temporary credentials retrieved from {AWS.STS}. Without any\n * extra parameters, credentials will be fetched from the\n * {AWS.STS.getSessionToken} operation. If an IAM role is provided, the\n * {AWS.STS.assumeRole} operation will be used to fetch credentials for the\n * role instead.\n *\n * AWS.ChainableTemporaryCredentials differs from AWS.TemporaryCredentials in\n * the way masterCredentials and refreshes are handled.\n * AWS.ChainableTemporaryCredentials refreshes expired credentials using the\n * masterCredentials passed by the user to support chaining of STS credentials.\n * However, AWS.TemporaryCredentials recursively collapses the masterCredentials\n * during instantiation, precluding the ability to refresh credentials which\n * require intermediate, temporary credentials.\n *\n * For example, if the application should use RoleA, which must be assumed from\n * RoleB, and the environment provides credentials which can assume RoleB, then\n * AWS.ChainableTemporaryCredentials must be used to support refreshing the\n * temporary credentials for RoleA:\n *\n * ```javascript\n * var roleACreds = new AWS.ChainableTemporaryCredentials({\n *   params: {RoleArn: 'RoleA'},\n *   masterCredentials: new AWS.ChainableTemporaryCredentials({\n *     params: {RoleArn: 'RoleB'},\n *     masterCredentials: new AWS.EnvironmentCredentials('AWS')\n *   })\n * });\n * ```\n *\n * If AWS.TemporaryCredentials had been used in the previous example,\n * `roleACreds` would fail to refresh because `roleACreds` would\n * use the environment credentials for the AssumeRole request.\n *\n * Another difference is that AWS.ChainableTemporaryCredentials creates the STS\n * service instance during instantiation while AWS.TemporaryCredentials creates\n * the STS service instance during the first refresh. Creating the service\n * instance during instantiation effectively captures the master credentials\n * from the global config, so that subsequent changes to the global config do\n * not affect the master credentials used to refresh the temporary credentials.\n *\n * This allows an instance of AWS.ChainableTemporaryCredentials to be assigned\n * to AWS.config.credentials:\n *\n * ```javascript\n * var envCreds = new AWS.EnvironmentCredentials('AWS');\n * AWS.config.credentials = envCreds;\n * // masterCredentials will be envCreds\n * AWS.config.credentials = new AWS.ChainableTemporaryCredentials({\n *   params: {RoleArn: '...'}\n * });\n * ```\n *\n * Similarly, to use the CredentialProviderChain's default providers as the\n * master credentials, simply create a new instance of\n * AWS.ChainableTemporaryCredentials:\n *\n * ```javascript\n * AWS.config.credentials = new ChainableTemporaryCredentials({\n *   params: {RoleArn: '...'}\n * });\n * ```\n *\n * @!attribute service\n *   @return [AWS.STS] the STS service instance used to\n *     get and refresh temporary credentials from AWS STS.\n * @note (see constructor)\n */\nAWS.ChainableTemporaryCredentials = AWS.util.inherit(AWS.Credentials, {\n  /**\n   * Creates a new temporary credentials object.\n   *\n   * @param options [map] a set of options\n   * @option options params [map] ({}) a map of options that are passed to the\n   *   {AWS.STS.assumeRole} or {AWS.STS.getSessionToken} operations.\n   *   If a `RoleArn` parameter is passed in, credentials will be based on the\n   *   IAM role. If a `SerialNumber` parameter is passed in, {tokenCodeFn} must\n   *   also be passed in or an error will be thrown.\n   * @option options masterCredentials [AWS.Credentials] the master credentials\n   *   used to get and refresh temporary credentials from AWS STS. By default,\n   *   AWS.config.credentials or AWS.config.credentialProvider will be used.\n   * @option options tokenCodeFn [Function] (null) Function to provide\n   *   `TokenCode`, if `SerialNumber` is provided for profile in {params}. Function\n   *   is called with value of `SerialNumber` and `callback`, and should provide\n   *   the `TokenCode` or an error to the callback in the format\n   *   `callback(err, token)`.\n   * @example Creating a new credentials object for generic temporary credentials\n   *   AWS.config.credentials = new AWS.ChainableTemporaryCredentials();\n   * @example Creating a new credentials object for an IAM role\n   *   AWS.config.credentials = new AWS.ChainableTemporaryCredentials({\n   *     params: {\n   *       RoleArn: 'arn:aws:iam::1234567890:role/TemporaryCredentials'\n   *     }\n   *   });\n   * @see AWS.STS.assumeRole\n   * @see AWS.STS.getSessionToken\n   */\n  constructor: function ChainableTemporaryCredentials(options) {\n    AWS.Credentials.call(this);\n    options = options || {};\n    this.errorCode = 'ChainableTemporaryCredentialsProviderFailure';\n    this.expired = true;\n    this.tokenCodeFn = null;\n\n    var params = AWS.util.copy(options.params) || {};\n    if (params.RoleArn) {\n      params.RoleSessionName = params.RoleSessionName || 'temporary-credentials';\n    }\n    if (params.SerialNumber) {\n      if (!options.tokenCodeFn || (typeof options.tokenCodeFn !== 'function')) {\n        throw new AWS.util.error(\n          new Error('tokenCodeFn must be a function when params.SerialNumber is given'),\n          {code: this.errorCode}\n        );\n      } else {\n        this.tokenCodeFn = options.tokenCodeFn;\n      }\n    }\n    config = AWS.util.merge(\n      {\n        params: params,\n        credentials: options.masterCredentials || AWS.config.credentials\n      },\n      options.stsConfig || {}\n    );\n    this.service = new STS(config);\n  },\n\n  /**\n   * Refreshes credentials using {AWS.STS.assumeRole} or\n   * {AWS.STS.getSessionToken}, depending on whether an IAM role ARN was passed\n   * to the credentials {constructor}.\n   *\n   * @callback callback function(err)\n   *   Called when the STS service responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see AWS.Credentials.get\n   */\n  refresh: function refresh(callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n   * @param callback\n   */\n  load: function load(callback) {\n    var self = this;\n    var operation = self.service.config.params.RoleArn ? 'assumeRole' : 'getSessionToken';\n    this.getTokenCode(function (err, tokenCode) {\n      var params = {};\n      if (err) {\n        callback(err);\n        return;\n      }\n      if (tokenCode) {\n        params.TokenCode = tokenCode;\n      }\n      self.service[operation](params, function (err, data) {\n        if (!err) {\n          self.service.credentialsFrom(data, self);\n        }\n        callback(err);\n      });\n    });\n  },\n\n  /**\n   * @api private\n   */\n  getTokenCode: function getTokenCode(callback) {\n    var self = this;\n    if (this.tokenCodeFn) {\n      this.tokenCodeFn(this.service.config.params.SerialNumber, function (err, token) {\n        if (err) {\n          var message = err;\n          if (err instanceof Error) {\n            message = err.message;\n          }\n          callback(\n            AWS.util.error(\n              new Error('Error fetching MFA token: ' + message),\n              { code: self.errorCode}\n            )\n          );\n          return;\n        }\n        callback(null, token);\n      });\n    } else {\n      callback(null);\n    }\n  }\n});\n","var AWS = require('../core');\nvar STS = require('../../clients/sts');\n\n/**\n * Represents credentials retrieved from STS Web Identity Federation support.\n *\n * By default this provider gets credentials using the\n * {AWS.STS.assumeRoleWithWebIdentity} service operation. This operation\n * requires a `RoleArn` containing the ARN of the IAM trust policy for the\n * application for which credentials will be given. In addition, the\n * `WebIdentityToken` must be set to the token provided by the identity\n * provider. See {constructor} for an example on creating a credentials\n * object with proper `RoleArn` and `WebIdentityToken` values.\n *\n * ## Refreshing Credentials from Identity Service\n *\n * In addition to AWS credentials expiring after a given amount of time, the\n * login token from the identity provider will also expire. Once this token\n * expires, it will not be usable to refresh AWS credentials, and another\n * token will be needed. The SDK does not manage refreshing of the token value,\n * but this can be done through a \"refresh token\" supported by most identity\n * providers. Consult the documentation for the identity provider for refreshing\n * tokens. Once the refreshed token is acquired, you should make sure to update\n * this new token in the credentials object's {params} property. The following\n * code will update the WebIdentityToken, assuming you have retrieved an updated\n * token from the identity provider:\n *\n * ```javascript\n * AWS.config.credentials.params.WebIdentityToken = updatedToken;\n * ```\n *\n * Future calls to `credentials.refresh()` will now use the new token.\n *\n * @!attribute params\n *   @return [map] the map of params passed to\n *     {AWS.STS.assumeRoleWithWebIdentity}. To update the token, set the\n *     `params.WebIdentityToken` property.\n * @!attribute data\n *   @return [map] the raw data response from the call to\n *     {AWS.STS.assumeRoleWithWebIdentity}. Use this if you want to get\n *     access to other properties from the response.\n */\nAWS.WebIdentityCredentials = AWS.util.inherit(AWS.Credentials, {\n  /**\n   * Creates a new credentials object.\n   * @param (see AWS.STS.assumeRoleWithWebIdentity)\n   * @example Creating a new credentials object\n   *   AWS.config.credentials = new AWS.WebIdentityCredentials({\n   *     RoleArn: 'arn:aws:iam::1234567890:role/WebIdentity',\n   *     WebIdentityToken: 'ABCDEFGHIJKLMNOP', // token from identity service\n   *     RoleSessionName: 'web' // optional name, defaults to web-identity\n   *   }, {\n   *     // optionally provide configuration to apply to the underlying AWS.STS service client\n   *     // if configuration is not provided, then configuration will be pulled from AWS.config\n   *\n   *     // specify timeout options\n   *     httpOptions: {\n   *       timeout: 100\n   *     }\n   *   });\n   * @see AWS.STS.assumeRoleWithWebIdentity\n   * @see AWS.Config\n   */\n  constructor: function WebIdentityCredentials(params, clientConfig) {\n    AWS.Credentials.call(this);\n    this.expired = true;\n    this.params = params;\n    this.params.RoleSessionName = this.params.RoleSessionName || 'web-identity';\n    this.data = null;\n    this._clientConfig = AWS.util.copy(clientConfig || {});\n  },\n\n  /**\n   * Refreshes credentials using {AWS.STS.assumeRoleWithWebIdentity}\n   *\n   * @callback callback function(err)\n   *   Called when the STS service responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n   */\n  load: function load(callback) {\n    var self = this;\n    self.createClients();\n    self.service.assumeRoleWithWebIdentity(function (err, data) {\n      self.data = null;\n      if (!err) {\n        self.data = data;\n        self.service.credentialsFrom(data, self);\n      }\n      callback(err);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  createClients: function() {\n    if (!this.service) {\n      var stsConfig = AWS.util.merge({}, this._clientConfig);\n      stsConfig.params = this.params;\n      this.service = new STS(stsConfig);\n    }\n  }\n\n});\n","var AWS = require('../core');\nvar CognitoIdentity = require('../../clients/cognitoidentity');\nvar STS = require('../../clients/sts');\n\n/**\n * Represents credentials retrieved from STS Web Identity Federation using\n * the Amazon Cognito Identity service.\n *\n * By default this provider gets credentials using the\n * {AWS.CognitoIdentity.getCredentialsForIdentity} service operation, which\n * requires either an `IdentityId` or an `IdentityPoolId` (Amazon Cognito\n * Identity Pool ID), which is used to call {AWS.CognitoIdentity.getId} to\n * obtain an `IdentityId`. If the identity or identity pool is not configured in\n * the Amazon Cognito Console to use IAM roles with the appropriate permissions,\n * then additionally a `RoleArn` is required containing the ARN of the IAM trust\n * policy for the Amazon Cognito role that the user will log into. If a `RoleArn`\n * is provided, then this provider gets credentials using the\n * {AWS.STS.assumeRoleWithWebIdentity} service operation, after first getting an\n * Open ID token from {AWS.CognitoIdentity.getOpenIdToken}.\n *\n * In addition, if this credential provider is used to provide authenticated\n * login, the `Logins` map may be set to the tokens provided by the respective\n * identity providers. See {constructor} for an example on creating a credentials\n * object with proper property values.\n *\n * ## Refreshing Credentials from Identity Service\n *\n * In addition to AWS credentials expiring after a given amount of time, the\n * login token from the identity provider will also expire. Once this token\n * expires, it will not be usable to refresh AWS credentials, and another\n * token will be needed. The SDK does not manage refreshing of the token value,\n * but this can be done through a \"refresh token\" supported by most identity\n * providers. Consult the documentation for the identity provider for refreshing\n * tokens. Once the refreshed token is acquired, you should make sure to update\n * this new token in the credentials object's {params} property. The following\n * code will update the WebIdentityToken, assuming you have retrieved an updated\n * token from the identity provider:\n *\n * ```javascript\n * AWS.config.credentials.params.Logins['graph.facebook.com'] = updatedToken;\n * ```\n *\n * Future calls to `credentials.refresh()` will now use the new token.\n *\n * @!attribute params\n *   @return [map] the map of params passed to\n *     {AWS.CognitoIdentity.getId},\n *     {AWS.CognitoIdentity.getOpenIdToken}, and\n *     {AWS.STS.assumeRoleWithWebIdentity}. To update the token, set the\n *     `params.WebIdentityToken` property.\n * @!attribute data\n *   @return [map] the raw data response from the call to\n *     {AWS.CognitoIdentity.getCredentialsForIdentity}, or\n *     {AWS.STS.assumeRoleWithWebIdentity}. Use this if you want to get\n *     access to other properties from the response.\n * @!attribute identityId\n *   @return [String] the Cognito ID returned by the last call to\n *     {AWS.CognitoIdentity.getOpenIdToken}. This ID represents the actual\n *     final resolved identity ID from Amazon Cognito.\n */\nAWS.CognitoIdentityCredentials = AWS.util.inherit(AWS.Credentials, {\n  /**\n   * @api private\n   */\n  localStorageKey: {\n    id: 'aws.cognito.identity-id.',\n    providers: 'aws.cognito.identity-providers.'\n  },\n\n  /**\n   * Creates a new credentials object.\n   * @example Creating a new credentials object\n   *   AWS.config.credentials = new AWS.CognitoIdentityCredentials({\n   *\n   *     // either IdentityPoolId or IdentityId is required\n   *     // See the IdentityPoolId param for AWS.CognitoIdentity.getID (linked below)\n   *     // See the IdentityId param for AWS.CognitoIdentity.getCredentialsForIdentity\n   *     // or AWS.CognitoIdentity.getOpenIdToken (linked below)\n   *     IdentityPoolId: 'us-east-1:1699ebc0-7900-4099-b910-2df94f52a030',\n   *     IdentityId: 'us-east-1:128d0a74-c82f-4553-916d-90053e4a8b0f'\n   *\n   *     // optional, only necessary when the identity pool is not configured\n   *     // to use IAM roles in the Amazon Cognito Console\n   *     // See the RoleArn param for AWS.STS.assumeRoleWithWebIdentity (linked below)\n   *     RoleArn: 'arn:aws:iam::1234567890:role/MYAPP-CognitoIdentity',\n   *\n   *     // optional tokens, used for authenticated login\n   *     // See the Logins param for AWS.CognitoIdentity.getID (linked below)\n   *     Logins: {\n   *       'graph.facebook.com': 'FBTOKEN',\n   *       'www.amazon.com': 'AMAZONTOKEN',\n   *       'accounts.google.com': 'GOOGLETOKEN',\n   *       'api.twitter.com': 'TWITTERTOKEN',\n   *       'www.digits.com': 'DIGITSTOKEN'\n   *     },\n   *\n   *     // optional name, defaults to web-identity\n   *     // See the RoleSessionName param for AWS.STS.assumeRoleWithWebIdentity (linked below)\n   *     RoleSessionName: 'web',\n   *\n   *     // optional, only necessary when application runs in a browser\n   *     // and multiple users are signed in at once, used for caching\n   *     LoginId: 'example@gmail.com'\n   *\n   *   }, {\n   *      // optionally provide configuration to apply to the underlying service clients\n   *      // if configuration is not provided, then configuration will be pulled from AWS.config\n   *\n   *      // region should match the region your identity pool is located in\n   *      region: 'us-east-1',\n   *\n   *      // specify timeout options\n   *      httpOptions: {\n   *        timeout: 100\n   *      }\n   *   });\n   * @see AWS.CognitoIdentity.getId\n   * @see AWS.CognitoIdentity.getCredentialsForIdentity\n   * @see AWS.STS.assumeRoleWithWebIdentity\n   * @see AWS.CognitoIdentity.getOpenIdToken\n   * @see AWS.Config\n   * @note If a region is not provided in the global AWS.config, or\n   *   specified in the `clientConfig` to the CognitoIdentityCredentials\n   *   constructor, you may encounter a 'Missing credentials in config' error\n   *   when calling making a service call.\n   */\n  constructor: function CognitoIdentityCredentials(params, clientConfig) {\n    AWS.Credentials.call(this);\n    this.expired = true;\n    this.params = params;\n    this.data = null;\n    this._identityId = null;\n    this._clientConfig = AWS.util.copy(clientConfig || {});\n    this.loadCachedId();\n    var self = this;\n    Object.defineProperty(this, 'identityId', {\n      get: function() {\n        self.loadCachedId();\n        return self._identityId || self.params.IdentityId;\n      },\n      set: function(identityId) {\n        self._identityId = identityId;\n      }\n    });\n  },\n\n  /**\n   * Refreshes credentials using {AWS.CognitoIdentity.getCredentialsForIdentity},\n   * or {AWS.STS.assumeRoleWithWebIdentity}.\n   *\n   * @callback callback function(err)\n   *   Called when the STS service responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see AWS.Credentials.get\n   */\n  refresh: function refresh(callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n   * @param callback\n   */\n  load: function load(callback) {\n    var self = this;\n    self.createClients();\n    self.data = null;\n    self._identityId = null;\n    self.getId(function(err) {\n      if (!err) {\n        if (!self.params.RoleArn) {\n          self.getCredentialsForIdentity(callback);\n        } else {\n          self.getCredentialsFromSTS(callback);\n        }\n      } else {\n        self.clearIdOnNotAuthorized(err);\n        callback(err);\n      }\n    });\n  },\n\n  /**\n   * Clears the cached Cognito ID associated with the currently configured\n   * identity pool ID. Use this to manually invalidate your cache if\n   * the identity pool ID was deleted.\n   */\n  clearCachedId: function clearCache() {\n    this._identityId = null;\n    delete this.params.IdentityId;\n\n    var poolId = this.params.IdentityPoolId;\n    var loginId = this.params.LoginId || '';\n    delete this.storage[this.localStorageKey.id + poolId + loginId];\n    delete this.storage[this.localStorageKey.providers + poolId + loginId];\n  },\n\n  /**\n   * @api private\n   */\n  clearIdOnNotAuthorized: function clearIdOnNotAuthorized(err) {\n    var self = this;\n    if (err.code == 'NotAuthorizedException') {\n      self.clearCachedId();\n    }\n  },\n\n  /**\n   * Retrieves a Cognito ID, loading from cache if it was already retrieved\n   * on this device.\n   *\n   * @callback callback function(err, identityId)\n   *   @param err [Error, null] an error object if the call failed or null if\n   *     it succeeded.\n   *   @param identityId [String, null] if successful, the callback will return\n   *     the Cognito ID.\n   * @note If not loaded explicitly, the Cognito ID is loaded and stored in\n   *   localStorage in the browser environment of a device.\n   * @api private\n   */\n  getId: function getId(callback) {\n    var self = this;\n    if (typeof self.params.IdentityId === 'string') {\n      return callback(null, self.params.IdentityId);\n    }\n\n    self.cognito.getId(function(err, data) {\n      if (!err && data.IdentityId) {\n        self.params.IdentityId = data.IdentityId;\n        callback(null, data.IdentityId);\n      } else {\n        callback(err);\n      }\n    });\n  },\n\n\n  /**\n   * @api private\n   */\n  loadCredentials: function loadCredentials(data, credentials) {\n    if (!data || !credentials) return;\n    credentials.expired = false;\n    credentials.accessKeyId = data.Credentials.AccessKeyId;\n    credentials.secretAccessKey = data.Credentials.SecretKey;\n    credentials.sessionToken = data.Credentials.SessionToken;\n    credentials.expireTime = data.Credentials.Expiration;\n  },\n\n  /**\n   * @api private\n   */\n  getCredentialsForIdentity: function getCredentialsForIdentity(callback) {\n    var self = this;\n    self.cognito.getCredentialsForIdentity(function(err, data) {\n      if (!err) {\n        self.cacheId(data);\n        self.data = data;\n        self.loadCredentials(self.data, self);\n      } else {\n        self.clearIdOnNotAuthorized(err);\n      }\n      callback(err);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  getCredentialsFromSTS: function getCredentialsFromSTS(callback) {\n    var self = this;\n    self.cognito.getOpenIdToken(function(err, data) {\n      if (!err) {\n        self.cacheId(data);\n        self.params.WebIdentityToken = data.Token;\n        self.webIdentityCredentials.refresh(function(webErr) {\n          if (!webErr) {\n            self.data = self.webIdentityCredentials.data;\n            self.sts.credentialsFrom(self.data, self);\n          }\n          callback(webErr);\n        });\n      } else {\n        self.clearIdOnNotAuthorized(err);\n        callback(err);\n      }\n    });\n  },\n\n  /**\n   * @api private\n   */\n  loadCachedId: function loadCachedId() {\n    var self = this;\n\n    // in the browser we source default IdentityId from localStorage\n    if (AWS.util.isBrowser() && !self.params.IdentityId) {\n      var id = self.getStorage('id');\n      if (id && self.params.Logins) {\n        var actualProviders = Object.keys(self.params.Logins);\n        var cachedProviders =\n          (self.getStorage('providers') || '').split(',');\n\n        // only load ID if at least one provider used this ID before\n        var intersect = cachedProviders.filter(function(n) {\n          return actualProviders.indexOf(n) !== -1;\n        });\n        if (intersect.length !== 0) {\n          self.params.IdentityId = id;\n        }\n      } else if (id) {\n        self.params.IdentityId = id;\n      }\n    }\n  },\n\n  /**\n   * @api private\n   */\n  createClients: function() {\n    var clientConfig = this._clientConfig;\n    this.webIdentityCredentials = this.webIdentityCredentials ||\n      new AWS.WebIdentityCredentials(this.params, clientConfig);\n    if (!this.cognito) {\n      var cognitoConfig = AWS.util.merge({}, clientConfig);\n      cognitoConfig.params = this.params;\n      this.cognito = new CognitoIdentity(cognitoConfig);\n    }\n    this.sts = this.sts || new STS(clientConfig);\n  },\n\n  /**\n   * @api private\n   */\n  cacheId: function cacheId(data) {\n    this._identityId = data.IdentityId;\n    this.params.IdentityId = this._identityId;\n\n    // cache this IdentityId in browser localStorage if possible\n    if (AWS.util.isBrowser()) {\n      this.setStorage('id', data.IdentityId);\n\n      if (this.params.Logins) {\n        this.setStorage('providers', Object.keys(this.params.Logins).join(','));\n      }\n    }\n  },\n\n  /**\n   * @api private\n   */\n  getStorage: function getStorage(key) {\n    return this.storage[this.localStorageKey[key] + this.params.IdentityPoolId + (this.params.LoginId || '')];\n  },\n\n  /**\n   * @api private\n   */\n  setStorage: function setStorage(key, val) {\n    try {\n      this.storage[this.localStorageKey[key] + this.params.IdentityPoolId + (this.params.LoginId || '')] = val;\n    } catch (_) {}\n  },\n\n  /**\n   * @api private\n   */\n  storage: (function() {\n    try {\n      var storage = AWS.util.isBrowser() && window.localStorage !== null && typeof window.localStorage === 'object' ?\n          window.localStorage : {};\n\n      // Test set/remove which would throw an error in Safari's private browsing\n      storage['aws.test-storage'] = 'foobar';\n      delete storage['aws.test-storage'];\n\n      return storage;\n    } catch (_) {\n      return {};\n    }\n  })()\n});\n","var AWS = require('../core');\n\nAWS.util.update(AWS.CognitoIdentity.prototype, {\n  getOpenIdToken: function getOpenIdToken(params, callback) {\n    return this.makeUnauthenticatedRequest('getOpenIdToken', params, callback);\n  },\n\n  getId: function getId(params, callback) {\n    return this.makeUnauthenticatedRequest('getId', params, callback);\n  },\n\n  getCredentialsForIdentity: function getCredentialsForIdentity(params, callback) {\n    return this.makeUnauthenticatedRequest('getCredentialsForIdentity', params, callback);\n  }\n});\n","var AWS = require('../core');\nvar STS = require('../../clients/sts');\n\n/**\n * Represents credentials retrieved from STS SAML support.\n *\n * By default this provider gets credentials using the\n * {AWS.STS.assumeRoleWithSAML} service operation. This operation\n * requires a `RoleArn` containing the ARN of the IAM trust policy for the\n * application for which credentials will be given, as well as a `PrincipalArn`\n * representing the ARN for the SAML identity provider. In addition, the\n * `SAMLAssertion` must be set to the token provided by the identity\n * provider. See {constructor} for an example on creating a credentials\n * object with proper `RoleArn`, `PrincipalArn`, and `SAMLAssertion` values.\n *\n * ## Refreshing Credentials from Identity Service\n *\n * In addition to AWS credentials expiring after a given amount of time, the\n * login token from the identity provider will also expire. Once this token\n * expires, it will not be usable to refresh AWS credentials, and another\n * token will be needed. The SDK does not manage refreshing of the token value,\n * but this can be done through a \"refresh token\" supported by most identity\n * providers. Consult the documentation for the identity provider for refreshing\n * tokens. Once the refreshed token is acquired, you should make sure to update\n * this new token in the credentials object's {params} property. The following\n * code will update the SAMLAssertion, assuming you have retrieved an updated\n * token from the identity provider:\n *\n * ```javascript\n * AWS.config.credentials.params.SAMLAssertion = updatedToken;\n * ```\n *\n * Future calls to `credentials.refresh()` will now use the new token.\n *\n * @!attribute params\n *   @return [map] the map of params passed to\n *     {AWS.STS.assumeRoleWithSAML}. To update the token, set the\n *     `params.SAMLAssertion` property.\n */\nAWS.SAMLCredentials = AWS.util.inherit(AWS.Credentials, {\n  /**\n   * Creates a new credentials object.\n   * @param (see AWS.STS.assumeRoleWithSAML)\n   * @example Creating a new credentials object\n   *   AWS.config.credentials = new AWS.SAMLCredentials({\n   *     RoleArn: 'arn:aws:iam::1234567890:role/SAMLRole',\n   *     PrincipalArn: 'arn:aws:iam::1234567890:role/SAMLPrincipal',\n   *     SAMLAssertion: 'base64-token', // base64-encoded token from IdP\n   *   });\n   * @see AWS.STS.assumeRoleWithSAML\n   */\n  constructor: function SAMLCredentials(params) {\n    AWS.Credentials.call(this);\n    this.expired = true;\n    this.params = params;\n  },\n\n  /**\n   * Refreshes credentials using {AWS.STS.assumeRoleWithSAML}\n   *\n   * @callback callback function(err)\n   *   Called when the STS service responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n   */\n  load: function load(callback) {\n    var self = this;\n    self.createClients();\n    self.service.assumeRoleWithSAML(function (err, data) {\n      if (!err) {\n        self.service.credentialsFrom(data, self);\n      }\n      callback(err);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  createClients: function() {\n    this.service = this.service || new STS({params: this.params});\n  }\n\n});\n","var util = require('../util');\nvar Shape = require('../model/shape');\n\nfunction DomXmlParser() { }\n\nDomXmlParser.prototype.parse = function(xml, shape) {\n  if (xml.replace(/^\\s+/, '') === '') return {};\n\n  var result, error;\n  try {\n    if (window.DOMParser) {\n      try {\n        var parser = new DOMParser();\n        result = parser.parseFromString(xml, 'text/xml');\n      } catch (syntaxError) {\n        throw util.error(new Error('Parse error in document'),\n          {\n            originalError: syntaxError,\n            code: 'XMLParserError',\n            retryable: true\n          });\n      }\n\n      if (result.documentElement === null) {\n        throw util.error(new Error('Cannot parse empty document.'),\n          {\n            code: 'XMLParserError',\n            retryable: true\n          });\n      }\n\n      var isError = result.getElementsByTagName('parsererror')[0];\n      if (isError && (isError.parentNode === result ||\n          isError.parentNode.nodeName === 'body' ||\n          isError.parentNode.parentNode === result ||\n          isError.parentNode.parentNode.nodeName === 'body')) {\n        var errorElement = isError.getElementsByTagName('div')[0] || isError;\n        throw util.error(new Error(errorElement.textContent || 'Parser error in document'),\n          {\n            code: 'XMLParserError',\n            retryable: true\n          });\n      }\n    } else if (window.ActiveXObject) {\n      result = new window.ActiveXObject('Microsoft.XMLDOM');\n      result.async = false;\n\n      if (!result.loadXML(xml)) {\n        throw util.error(new Error('Parse error in document'),\n          {\n            code: 'XMLParserError',\n            retryable: true\n          });\n      }\n    } else {\n      throw new Error('Cannot load XML parser');\n    }\n  } catch (e) {\n    error = e;\n  }\n\n  if (result && result.documentElement && !error) {\n    var data = parseXml(result.documentElement, shape);\n    var metadata = getElementByTagName(result.documentElement, 'ResponseMetadata');\n    if (metadata) {\n      data.ResponseMetadata = parseXml(metadata, {});\n    }\n    return data;\n  } else if (error) {\n    throw util.error(error || new Error(), {code: 'XMLParserError', retryable: true});\n  } else { // empty xml document\n    return {};\n  }\n};\n\nfunction getElementByTagName(xml, tag) {\n  var elements = xml.getElementsByTagName(tag);\n  for (var i = 0, iLen = elements.length; i < iLen; i++) {\n    if (elements[i].parentNode === xml) {\n      return elements[i];\n    }\n  }\n}\n\nfunction parseXml(xml, shape) {\n  if (!shape) shape = {};\n  switch (shape.type) {\n    case 'structure': return parseStructure(xml, shape);\n    case 'map': return parseMap(xml, shape);\n    case 'list': return parseList(xml, shape);\n    case undefined: case null: return parseUnknown(xml);\n    default: return parseScalar(xml, shape);\n  }\n}\n\nfunction parseStructure(xml, shape) {\n  var data = {};\n  if (xml === null) return data;\n\n  util.each(shape.members, function(memberName, memberShape) {\n    if (memberShape.isXmlAttribute) {\n      if (Object.prototype.hasOwnProperty.call(xml.attributes, memberShape.name)) {\n        var value = xml.attributes[memberShape.name].value;\n        data[memberName] = parseXml({textContent: value}, memberShape);\n      }\n    } else {\n      var xmlChild = memberShape.flattened ? xml :\n        getElementByTagName(xml, memberShape.name);\n      if (xmlChild) {\n        data[memberName] = parseXml(xmlChild, memberShape);\n      } else if (!memberShape.flattened && memberShape.type === 'list') {\n        data[memberName] = memberShape.defaultValue;\n      }\n    }\n  });\n\n  return data;\n}\n\nfunction parseMap(xml, shape) {\n  var data = {};\n  var xmlKey = shape.key.name || 'key';\n  var xmlValue = shape.value.name || 'value';\n  var tagName = shape.flattened ? shape.name : 'entry';\n\n  var child = xml.firstElementChild;\n  while (child) {\n    if (child.nodeName === tagName) {\n      var key = getElementByTagName(child, xmlKey).textContent;\n      var value = getElementByTagName(child, xmlValue);\n      data[key] = parseXml(value, shape.value);\n    }\n    child = child.nextElementSibling;\n  }\n  return data;\n}\n\nfunction parseList(xml, shape) {\n  var data = [];\n  var tagName = shape.flattened ? shape.name : (shape.member.name || 'member');\n\n  var child = xml.firstElementChild;\n  while (child) {\n    if (child.nodeName === tagName) {\n      data.push(parseXml(child, shape.member));\n    }\n    child = child.nextElementSibling;\n  }\n  return data;\n}\n\nfunction parseScalar(xml, shape) {\n  if (xml.getAttribute) {\n    var encoding = xml.getAttribute('encoding');\n    if (encoding === 'base64') {\n      shape = new Shape.create({type: encoding});\n    }\n  }\n\n  var text = xml.textContent;\n  if (text === '') text = null;\n  if (typeof shape.toType === 'function') {\n    return shape.toType(text);\n  } else {\n    return text;\n  }\n}\n\nfunction parseUnknown(xml) {\n  if (xml === undefined || xml === null) return '';\n\n  // empty object\n  if (!xml.firstElementChild) {\n    if (xml.parentNode.parentNode === null) return {};\n    if (xml.childNodes.length === 0) return '';\n    else return xml.textContent;\n  }\n\n  // object, parse as structure\n  var shape = {type: 'structure', members: {}};\n  var child = xml.firstElementChild;\n  while (child) {\n    var tag = child.nodeName;\n    if (Object.prototype.hasOwnProperty.call(shape.members, tag)) {\n      // multiple tags of the same name makes it a list\n      shape.members[tag].type = 'list';\n    } else {\n      shape.members[tag] = {name: tag};\n    }\n    child = child.nextElementSibling;\n  }\n  return parseStructure(xml, shape);\n}\n\n/**\n * @api private\n */\nmodule.exports = DomXmlParser;\n","var AWS = require('../core');\nvar EventEmitter = require('events').EventEmitter;\nrequire('../http');\n\n/**\n * @api private\n */\nAWS.XHRClient = AWS.util.inherit({\n  handleRequest: function handleRequest(httpRequest, httpOptions, callback, errCallback) {\n    var self = this;\n    var endpoint = httpRequest.endpoint;\n    var emitter = new EventEmitter();\n    var href = endpoint.protocol + '//' + endpoint.hostname;\n    if (endpoint.port !== 80 && endpoint.port !== 443) {\n      href += ':' + endpoint.port;\n    }\n    href += httpRequest.path;\n\n    var xhr = new XMLHttpRequest(), headersEmitted = false;\n    httpRequest.stream = xhr;\n\n    xhr.addEventListener('readystatechange', function() {\n      try {\n        if (xhr.status === 0) return; // 0 code is invalid\n      } catch (e) { return; }\n\n      if (this.readyState >= this.HEADERS_RECEIVED && !headersEmitted) {\n        emitter.statusCode = xhr.status;\n        emitter.headers = self.parseHeaders(xhr.getAllResponseHeaders());\n        emitter.emit(\n          'headers',\n          emitter.statusCode,\n          emitter.headers,\n          xhr.statusText\n        );\n        headersEmitted = true;\n      }\n      if (this.readyState === this.DONE) {\n        self.finishRequest(xhr, emitter);\n      }\n    }, false);\n    xhr.upload.addEventListener('progress', function (evt) {\n      emitter.emit('sendProgress', evt);\n    });\n    xhr.addEventListener('progress', function (evt) {\n      emitter.emit('receiveProgress', evt);\n    }, false);\n    xhr.addEventListener('timeout', function () {\n      errCallback(AWS.util.error(new Error('Timeout'), {code: 'TimeoutError'}));\n    }, false);\n    xhr.addEventListener('error', function () {\n      errCallback(AWS.util.error(new Error('Network Failure'), {\n        code: 'NetworkingError'\n      }));\n    }, false);\n    xhr.addEventListener('abort', function () {\n      errCallback(AWS.util.error(new Error('Request aborted'), {\n        code: 'RequestAbortedError'\n      }));\n    }, false);\n\n    callback(emitter);\n    xhr.open(httpRequest.method, href, httpOptions.xhrAsync !== false);\n    AWS.util.each(httpRequest.headers, function (key, value) {\n      if (key !== 'Content-Length' && key !== 'User-Agent' && key !== 'Host') {\n        xhr.setRequestHeader(key, value);\n      }\n    });\n\n    if (httpOptions.timeout && httpOptions.xhrAsync !== false) {\n      xhr.timeout = httpOptions.timeout;\n    }\n\n    if (httpOptions.xhrWithCredentials) {\n      xhr.withCredentials = true;\n    }\n    try { xhr.responseType = 'arraybuffer'; } catch (e) {}\n\n    try {\n      if (httpRequest.body) {\n        xhr.send(httpRequest.body);\n      } else {\n        xhr.send();\n      }\n    } catch (err) {\n      if (httpRequest.body && typeof httpRequest.body.buffer === 'object') {\n        xhr.send(httpRequest.body.buffer); // send ArrayBuffer directly\n      } else {\n        throw err;\n      }\n    }\n\n    return emitter;\n  },\n\n  parseHeaders: function parseHeaders(rawHeaders) {\n    var headers = {};\n    AWS.util.arrayEach(rawHeaders.split(/\\r?\\n/), function (line) {\n      var key = line.split(':', 1)[0];\n      var value = line.substring(key.length + 2);\n      if (key.length > 0) headers[key.toLowerCase()] = value;\n    });\n    return headers;\n  },\n\n  finishRequest: function finishRequest(xhr, emitter) {\n    var buffer;\n    if (xhr.responseType === 'arraybuffer' && xhr.response) {\n      var ab = xhr.response;\n      buffer = new AWS.util.Buffer(ab.byteLength);\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < buffer.length; ++i) {\n        buffer[i] = view[i];\n      }\n    }\n\n    try {\n      if (!buffer && typeof xhr.responseText === 'string') {\n        buffer = new AWS.util.Buffer(xhr.responseText);\n      }\n    } catch (e) {}\n\n    if (buffer) emitter.emit('data', buffer);\n    emitter.emit('end');\n  }\n});\n\n/**\n * @api private\n */\nAWS.HttpClient.prototype = AWS.XHRClient.prototype;\n\n/**\n * @api private\n */\nAWS.HttpClient.streamsApiVersion = 1;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Observable = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// === Symbol Support ===\nvar hasSymbols = function () {\n  return typeof Symbol === 'function';\n};\n\nvar hasSymbol = function (name) {\n  return hasSymbols() && Boolean(Symbol[name]);\n};\n\nvar getSymbol = function (name) {\n  return hasSymbol(name) ? Symbol[name] : '@@' + name;\n};\n\nif (hasSymbols() && !hasSymbol('observable')) {\n  Symbol.observable = Symbol('observable');\n}\n\nvar SymbolIterator = getSymbol('iterator');\nvar SymbolObservable = getSymbol('observable');\nvar SymbolSpecies = getSymbol('species'); // === Abstract Operations ===\n\nfunction getMethod(obj, key) {\n  var value = obj[key];\n  if (value == null) return undefined;\n  if (typeof value !== 'function') throw new TypeError(value + ' is not a function');\n  return value;\n}\n\nfunction getSpecies(obj) {\n  var ctor = obj.constructor;\n\n  if (ctor !== undefined) {\n    ctor = ctor[SymbolSpecies];\n\n    if (ctor === null) {\n      ctor = undefined;\n    }\n  }\n\n  return ctor !== undefined ? ctor : Observable;\n}\n\nfunction isObservable(x) {\n  return x instanceof Observable; // SPEC: Brand check\n}\n\nfunction hostReportError(e) {\n  if (hostReportError.log) {\n    hostReportError.log(e);\n  } else {\n    setTimeout(function () {\n      throw e;\n    });\n  }\n}\n\nfunction enqueue(fn) {\n  Promise.resolve().then(function () {\n    try {\n      fn();\n    } catch (e) {\n      hostReportError(e);\n    }\n  });\n}\n\nfunction cleanupSubscription(subscription) {\n  var cleanup = subscription._cleanup;\n  if (cleanup === undefined) return;\n  subscription._cleanup = undefined;\n\n  if (!cleanup) {\n    return;\n  }\n\n  try {\n    if (typeof cleanup === 'function') {\n      cleanup();\n    } else {\n      var unsubscribe = getMethod(cleanup, 'unsubscribe');\n\n      if (unsubscribe) {\n        unsubscribe.call(cleanup);\n      }\n    }\n  } catch (e) {\n    hostReportError(e);\n  }\n}\n\nfunction closeSubscription(subscription) {\n  subscription._observer = undefined;\n  subscription._queue = undefined;\n  subscription._state = 'closed';\n}\n\nfunction flushSubscription(subscription) {\n  var queue = subscription._queue;\n\n  if (!queue) {\n    return;\n  }\n\n  subscription._queue = undefined;\n  subscription._state = 'ready';\n\n  for (var i = 0; i < queue.length; ++i) {\n    notifySubscription(subscription, queue[i].type, queue[i].value);\n    if (subscription._state === 'closed') break;\n  }\n}\n\nfunction notifySubscription(subscription, type, value) {\n  subscription._state = 'running';\n  var observer = subscription._observer;\n\n  try {\n    var m = getMethod(observer, type);\n\n    switch (type) {\n      case 'next':\n        if (m) m.call(observer, value);\n        break;\n\n      case 'error':\n        closeSubscription(subscription);\n        if (m) m.call(observer, value);else throw value;\n        break;\n\n      case 'complete':\n        closeSubscription(subscription);\n        if (m) m.call(observer);\n        break;\n    }\n  } catch (e) {\n    hostReportError(e);\n  }\n\n  if (subscription._state === 'closed') cleanupSubscription(subscription);else if (subscription._state === 'running') subscription._state = 'ready';\n}\n\nfunction onNotify(subscription, type, value) {\n  if (subscription._state === 'closed') return;\n\n  if (subscription._state === 'buffering') {\n    subscription._queue.push({\n      type: type,\n      value: value\n    });\n\n    return;\n  }\n\n  if (subscription._state !== 'ready') {\n    subscription._state = 'buffering';\n    subscription._queue = [{\n      type: type,\n      value: value\n    }];\n    enqueue(function () {\n      return flushSubscription(subscription);\n    });\n    return;\n  }\n\n  notifySubscription(subscription, type, value);\n}\n\nvar Subscription =\n/*#__PURE__*/\nfunction () {\n  function Subscription(observer, subscriber) {\n    _classCallCheck(this, Subscription);\n\n    // ASSERT: observer is an object\n    // ASSERT: subscriber is callable\n    this._cleanup = undefined;\n    this._observer = observer;\n    this._queue = undefined;\n    this._state = 'initializing';\n    var subscriptionObserver = new SubscriptionObserver(this);\n\n    try {\n      this._cleanup = subscriber.call(undefined, subscriptionObserver);\n    } catch (e) {\n      subscriptionObserver.error(e);\n    }\n\n    if (this._state === 'initializing') this._state = 'ready';\n  }\n\n  _createClass(Subscription, [{\n    key: \"unsubscribe\",\n    value: function unsubscribe() {\n      if (this._state !== 'closed') {\n        closeSubscription(this);\n        cleanupSubscription(this);\n      }\n    }\n  }, {\n    key: \"closed\",\n    get: function () {\n      return this._state === 'closed';\n    }\n  }]);\n\n  return Subscription;\n}();\n\nvar SubscriptionObserver =\n/*#__PURE__*/\nfunction () {\n  function SubscriptionObserver(subscription) {\n    _classCallCheck(this, SubscriptionObserver);\n\n    this._subscription = subscription;\n  }\n\n  _createClass(SubscriptionObserver, [{\n    key: \"next\",\n    value: function next(value) {\n      onNotify(this._subscription, 'next', value);\n    }\n  }, {\n    key: \"error\",\n    value: function error(value) {\n      onNotify(this._subscription, 'error', value);\n    }\n  }, {\n    key: \"complete\",\n    value: function complete() {\n      onNotify(this._subscription, 'complete');\n    }\n  }, {\n    key: \"closed\",\n    get: function () {\n      return this._subscription._state === 'closed';\n    }\n  }]);\n\n  return SubscriptionObserver;\n}();\n\nvar Observable =\n/*#__PURE__*/\nfunction () {\n  function Observable(subscriber) {\n    _classCallCheck(this, Observable);\n\n    if (!(this instanceof Observable)) throw new TypeError('Observable cannot be called as a function');\n    if (typeof subscriber !== 'function') throw new TypeError('Observable initializer must be a function');\n    this._subscriber = subscriber;\n  }\n\n  _createClass(Observable, [{\n    key: \"subscribe\",\n    value: function subscribe(observer) {\n      if (typeof observer !== 'object' || observer === null) {\n        observer = {\n          next: observer,\n          error: arguments[1],\n          complete: arguments[2]\n        };\n      }\n\n      return new Subscription(observer, this._subscriber);\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(fn) {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        if (typeof fn !== 'function') {\n          reject(new TypeError(fn + ' is not a function'));\n          return;\n        }\n\n        function done() {\n          subscription.unsubscribe();\n          resolve();\n        }\n\n        var subscription = _this.subscribe({\n          next: function (value) {\n            try {\n              fn(value, done);\n            } catch (e) {\n              reject(e);\n              subscription.unsubscribe();\n            }\n          },\n          error: reject,\n          complete: resolve\n        });\n      });\n    }\n  }, {\n    key: \"map\",\n    value: function map(fn) {\n      var _this2 = this;\n\n      if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\n      var C = getSpecies(this);\n      return new C(function (observer) {\n        return _this2.subscribe({\n          next: function (value) {\n            try {\n              value = fn(value);\n            } catch (e) {\n              return observer.error(e);\n            }\n\n            observer.next(value);\n          },\n          error: function (e) {\n            observer.error(e);\n          },\n          complete: function () {\n            observer.complete();\n          }\n        });\n      });\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(fn) {\n      var _this3 = this;\n\n      if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\n      var C = getSpecies(this);\n      return new C(function (observer) {\n        return _this3.subscribe({\n          next: function (value) {\n            try {\n              if (!fn(value)) return;\n            } catch (e) {\n              return observer.error(e);\n            }\n\n            observer.next(value);\n          },\n          error: function (e) {\n            observer.error(e);\n          },\n          complete: function () {\n            observer.complete();\n          }\n        });\n      });\n    }\n  }, {\n    key: \"reduce\",\n    value: function reduce(fn) {\n      var _this4 = this;\n\n      if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\n      var C = getSpecies(this);\n      var hasSeed = arguments.length > 1;\n      var hasValue = false;\n      var seed = arguments[1];\n      var acc = seed;\n      return new C(function (observer) {\n        return _this4.subscribe({\n          next: function (value) {\n            var first = !hasValue;\n            hasValue = true;\n\n            if (!first || hasSeed) {\n              try {\n                acc = fn(acc, value);\n              } catch (e) {\n                return observer.error(e);\n              }\n            } else {\n              acc = value;\n            }\n          },\n          error: function (e) {\n            observer.error(e);\n          },\n          complete: function () {\n            if (!hasValue && !hasSeed) return observer.error(new TypeError('Cannot reduce an empty sequence'));\n            observer.next(acc);\n            observer.complete();\n          }\n        });\n      });\n    }\n  }, {\n    key: \"concat\",\n    value: function concat() {\n      var _this5 = this;\n\n      for (var _len = arguments.length, sources = new Array(_len), _key = 0; _key < _len; _key++) {\n        sources[_key] = arguments[_key];\n      }\n\n      var C = getSpecies(this);\n      return new C(function (observer) {\n        var subscription;\n        var index = 0;\n\n        function startNext(next) {\n          subscription = next.subscribe({\n            next: function (v) {\n              observer.next(v);\n            },\n            error: function (e) {\n              observer.error(e);\n            },\n            complete: function () {\n              if (index === sources.length) {\n                subscription = undefined;\n                observer.complete();\n              } else {\n                startNext(C.from(sources[index++]));\n              }\n            }\n          });\n        }\n\n        startNext(_this5);\n        return function () {\n          if (subscription) {\n            subscription.unsubscribe();\n            subscription = undefined;\n          }\n        };\n      });\n    }\n  }, {\n    key: \"flatMap\",\n    value: function flatMap(fn) {\n      var _this6 = this;\n\n      if (typeof fn !== 'function') throw new TypeError(fn + ' is not a function');\n      var C = getSpecies(this);\n      return new C(function (observer) {\n        var subscriptions = [];\n\n        var outer = _this6.subscribe({\n          next: function (value) {\n            if (fn) {\n              try {\n                value = fn(value);\n              } catch (e) {\n                return observer.error(e);\n              }\n            }\n\n            var inner = C.from(value).subscribe({\n              next: function (value) {\n                observer.next(value);\n              },\n              error: function (e) {\n                observer.error(e);\n              },\n              complete: function () {\n                var i = subscriptions.indexOf(inner);\n                if (i >= 0) subscriptions.splice(i, 1);\n                completeIfDone();\n              }\n            });\n            subscriptions.push(inner);\n          },\n          error: function (e) {\n            observer.error(e);\n          },\n          complete: function () {\n            completeIfDone();\n          }\n        });\n\n        function completeIfDone() {\n          if (outer.closed && subscriptions.length === 0) observer.complete();\n        }\n\n        return function () {\n          subscriptions.forEach(function (s) {\n            return s.unsubscribe();\n          });\n          outer.unsubscribe();\n        };\n      });\n    }\n  }, {\n    key: SymbolObservable,\n    value: function () {\n      return this;\n    }\n  }], [{\n    key: \"from\",\n    value: function from(x) {\n      var C = typeof this === 'function' ? this : Observable;\n      if (x == null) throw new TypeError(x + ' is not an object');\n      var method = getMethod(x, SymbolObservable);\n\n      if (method) {\n        var observable = method.call(x);\n        if (Object(observable) !== observable) throw new TypeError(observable + ' is not an object');\n        if (isObservable(observable) && observable.constructor === C) return observable;\n        return new C(function (observer) {\n          return observable.subscribe(observer);\n        });\n      }\n\n      if (hasSymbol('iterator')) {\n        method = getMethod(x, SymbolIterator);\n\n        if (method) {\n          return new C(function (observer) {\n            enqueue(function () {\n              if (observer.closed) return;\n              var _iteratorNormalCompletion = true;\n              var _didIteratorError = false;\n              var _iteratorError = undefined;\n\n              try {\n                for (var _iterator = method.call(x)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                  var _item = _step.value;\n                  observer.next(_item);\n                  if (observer.closed) return;\n                }\n              } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n              } finally {\n                try {\n                  if (!_iteratorNormalCompletion && _iterator.return != null) {\n                    _iterator.return();\n                  }\n                } finally {\n                  if (_didIteratorError) {\n                    throw _iteratorError;\n                  }\n                }\n              }\n\n              observer.complete();\n            });\n          });\n        }\n      }\n\n      if (Array.isArray(x)) {\n        return new C(function (observer) {\n          enqueue(function () {\n            if (observer.closed) return;\n\n            for (var i = 0; i < x.length; ++i) {\n              observer.next(x[i]);\n              if (observer.closed) return;\n            }\n\n            observer.complete();\n          });\n        });\n      }\n\n      throw new TypeError(x + ' is not observable');\n    }\n  }, {\n    key: \"of\",\n    value: function of() {\n      for (var _len2 = arguments.length, items = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        items[_key2] = arguments[_key2];\n      }\n\n      var C = typeof this === 'function' ? this : Observable;\n      return new C(function (observer) {\n        enqueue(function () {\n          if (observer.closed) return;\n\n          for (var i = 0; i < items.length; ++i) {\n            observer.next(items[i]);\n            if (observer.closed) return;\n          }\n\n          observer.complete();\n        });\n      });\n    }\n  }, {\n    key: SymbolSpecies,\n    get: function () {\n      return this;\n    }\n  }]);\n\n  return Observable;\n}();\n\nexports.Observable = Observable;\n\nif (hasSymbols()) {\n  Object.defineProperty(Observable, Symbol('extensions'), {\n    value: {\n      symbol: SymbolObservable,\n      hostReportError: hostReportError\n    },\n    configurable: true\n  });\n}","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var C_enc = C.enc;\n\t    var Utf8 = C_enc.Utf8;\n\t    var C_algo = C.algo;\n\n\t    /**\n\t     * HMAC algorithm.\n\t     */\n\t    var HMAC = C_algo.HMAC = Base.extend({\n\t        /**\n\t         * Initializes a newly created HMAC.\n\t         *\n\t         * @param {Hasher} hasher The hash algorithm to use.\n\t         * @param {WordArray|string} key The secret key.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);\n\t         */\n\t        init: function (hasher, key) {\n\t            // Init hasher\n\t            hasher = this._hasher = new hasher.init();\n\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof key == 'string') {\n\t                key = Utf8.parse(key);\n\t            }\n\n\t            // Shortcuts\n\t            var hasherBlockSize = hasher.blockSize;\n\t            var hasherBlockSizeBytes = hasherBlockSize * 4;\n\n\t            // Allow arbitrary length keys\n\t            if (key.sigBytes > hasherBlockSizeBytes) {\n\t                key = hasher.finalize(key);\n\t            }\n\n\t            // Clamp excess bits\n\t            key.clamp();\n\n\t            // Clone key for inner and outer pads\n\t            var oKey = this._oKey = key.clone();\n\t            var iKey = this._iKey = key.clone();\n\n\t            // Shortcuts\n\t            var oKeyWords = oKey.words;\n\t            var iKeyWords = iKey.words;\n\n\t            // XOR keys with pad constants\n\t            for (var i = 0; i < hasherBlockSize; i++) {\n\t                oKeyWords[i] ^= 0x5c5c5c5c;\n\t                iKeyWords[i] ^= 0x36363636;\n\t            }\n\t            oKey.sigBytes = iKey.sigBytes = hasherBlockSizeBytes;\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this HMAC to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Reset\n\t            hasher.reset();\n\t            hasher.update(this._iKey);\n\t        },\n\n\t        /**\n\t         * Updates this HMAC with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {HMAC} This HMAC instance.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.update('message');\n\t         *     hmacHasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            this._hasher.update(messageUpdate);\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the HMAC computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The HMAC.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmac = hmacHasher.finalize();\n\t         *     var hmac = hmacHasher.finalize('message');\n\t         *     var hmac = hmacHasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Compute HMAC\n\t            var innerHash = hasher.finalize(messageUpdate);\n\t            hasher.reset();\n\t            var hmac = hasher.finalize(this._oKey.clone().concat(innerHash));\n\n\t            return hmac;\n\t        }\n\t    });\n\t}());\n\n\n}));","var AWS = require('../core');\nvar v4Credentials = require('../signers/v4_credentials');\n\n// Pull in managed upload extension\nrequire('../s3/managed_upload');\n\n/**\n * @api private\n */\nvar operationsWith200StatusCodeError = {\n  'completeMultipartUpload': true,\n  'copyObject': true,\n  'uploadPartCopy': true\n};\n\n/**\n * @api private\n */\n var regionRedirectErrorCodes = [\n  'AuthorizationHeaderMalformed', // non-head operations on virtual-hosted global bucket endpoints\n  'BadRequest', // head operations on virtual-hosted global bucket endpoints\n  'PermanentRedirect', // non-head operations on path-style or regional endpoints\n  301 // head operations on path-style or regional endpoints\n ];\n\nAWS.util.update(AWS.S3.prototype, {\n  /**\n   * @api private\n   */\n  getSignatureVersion: function getSignatureVersion(request) {\n    var defaultApiVersion = this.api.signatureVersion;\n    var userDefinedVersion = this._originalConfig ? this._originalConfig.signatureVersion : null;\n    var regionDefinedVersion = this.config.signatureVersion;\n    var isPresigned = request ? request.isPresigned() : false;\n    /*\n      1) User defined version specified:\n        a) always return user defined version\n      2) No user defined version specified:\n        a) default to lowest version the region supports\n        b) If using presigned urls, default to lowest version the region supports\n    */\n    if (userDefinedVersion) {\n      userDefinedVersion = userDefinedVersion === 'v2' ? 's3' : userDefinedVersion;\n      return userDefinedVersion;\n    }\n    if (isPresigned !== true) {\n      defaultApiVersion = 'v4';\n    } else if (regionDefinedVersion) {\n      defaultApiVersion = regionDefinedVersion;\n    }\n    return defaultApiVersion;\n  },\n\n  /**\n   * @api private\n   */\n  getSignerClass: function getSignerClass(request) {\n    var signatureVersion = this.getSignatureVersion(request);\n    return AWS.Signers.RequestSigner.getVersion(signatureVersion);\n  },\n\n  /**\n   * @api private\n   */\n  validateService: function validateService() {\n    var msg;\n    var messages = [];\n\n    // default to us-east-1 when no region is provided\n    if (!this.config.region) this.config.region = 'us-east-1';\n\n    if (!this.config.endpoint && this.config.s3BucketEndpoint) {\n      messages.push('An endpoint must be provided when configuring ' +\n                    '`s3BucketEndpoint` to true.');\n    }\n    if (messages.length === 1) {\n      msg = messages[0];\n    } else if (messages.length > 1) {\n      msg = 'Multiple configuration errors:\\n' + messages.join('\\n');\n    }\n    if (msg) {\n      throw AWS.util.error(new Error(),\n        {name: 'InvalidEndpoint', message: msg});\n    }\n  },\n\n  /**\n   * @api private\n   */\n  shouldDisableBodySigning: function shouldDisableBodySigning(request) {\n    var signerClass = this.getSignerClass();\n    if (this.config.s3DisableBodySigning === true && signerClass === AWS.Signers.V4\n        && request.httpRequest.endpoint.protocol === 'https:') {\n      return true;\n    }\n    return false;\n  },\n\n  /**\n   * @api private\n   */\n  setupRequestListeners: function setupRequestListeners(request) {\n    var prependListener = true;\n    request.addListener('validate', this.validateScheme);\n    request.addListener('validate', this.validateBucketEndpoint);\n    request.addListener('validate', this.correctBucketRegionFromCache);\n    request.addListener('validate', this.validateBucketName, prependListener);\n\n    request.addListener('build', this.addContentType);\n    request.addListener('build', this.populateURI);\n    request.addListener('build', this.computeContentMd5);\n    request.addListener('build', this.computeSseCustomerKeyMd5);\n    request.addListener('afterBuild', this.addExpect100Continue);\n    request.removeListener('validate',\n      AWS.EventListeners.Core.VALIDATE_REGION);\n    request.addListener('extractError', this.extractError);\n    request.onAsync('extractError', this.requestBucketRegion);\n    request.addListener('extractData', this.extractData);\n    request.addListener('extractData', AWS.util.hoistPayloadMember);\n    request.addListener('beforePresign', this.prepareSignedUrl);\n    if (AWS.util.isBrowser()) {\n      request.onAsync('retry', this.reqRegionForNetworkingError);\n    }\n    if (this.shouldDisableBodySigning(request))  {\n      request.removeListener('afterBuild', AWS.EventListeners.Core.COMPUTE_SHA256);\n      request.addListener('afterBuild', this.disableBodySigning);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  validateScheme: function(req) {\n    var params = req.params,\n        scheme = req.httpRequest.endpoint.protocol,\n        sensitive = params.SSECustomerKey || params.CopySourceSSECustomerKey;\n    if (sensitive && scheme !== 'https:') {\n      var msg = 'Cannot send SSE keys over HTTP. Set \\'sslEnabled\\'' +\n        'to \\'true\\' in your configuration';\n      throw AWS.util.error(new Error(),\n        { code: 'ConfigError', message: msg });\n    }\n  },\n\n  /**\n   * @api private\n   */\n  validateBucketEndpoint: function(req) {\n    if (!req.params.Bucket && req.service.config.s3BucketEndpoint) {\n      var msg = 'Cannot send requests to root API with `s3BucketEndpoint` set.';\n      throw AWS.util.error(new Error(),\n        { code: 'ConfigError', message: msg });\n    }\n  },\n\n  /**\n   * @api private\n   */\n  validateBucketName: function validateBucketName(req) {\n    var service = req.service;\n    var signatureVersion = service.getSignatureVersion(req);\n    var bucket = req.params && req.params.Bucket;\n    var key = req.params && req.params.Key;\n    var slashIndex = bucket && bucket.indexOf('/');\n    if (bucket && slashIndex >= 0) {\n      if (typeof key === 'string' && slashIndex > 0) {\n        req.params = AWS.util.copy(req.params);\n        // Need to include trailing slash to match sigv2 behavior\n        var prefix = bucket.substr(slashIndex + 1) || '';\n        req.params.Key = prefix + '/' + key;\n        req.params.Bucket = bucket.substr(0, slashIndex);\n      } else if (signatureVersion === 'v4') {\n        var msg = 'Bucket names cannot contain forward slashes. Bucket: ' + bucket;\n        throw AWS.util.error(new Error(),\n          { code: 'InvalidBucket', message: msg });\n      }\n    }\n  },\n\n  /**\n   * @api private\n   */\n  isValidAccelerateOperation: function isValidAccelerateOperation(operation) {\n    var invalidOperations = [\n      'createBucket',\n      'deleteBucket',\n      'listBuckets'\n    ];\n    return invalidOperations.indexOf(operation) === -1;\n  },\n\n\n  /**\n   * S3 prefers dns-compatible bucket names to be moved from the uri path\n   * to the hostname as a sub-domain.  This is not possible, even for dns-compat\n   * buckets when using SSL and the bucket name contains a dot ('.').  The\n   * ssl wildcard certificate is only 1-level deep.\n   *\n   * @api private\n   */\n  populateURI: function populateURI(req) {\n    var httpRequest = req.httpRequest;\n    var b = req.params.Bucket;\n    var service = req.service;\n    var endpoint = httpRequest.endpoint;\n    if (b) {\n      if (!service.pathStyleBucketName(b)) {\n        if (service.config.useAccelerateEndpoint && service.isValidAccelerateOperation(req.operation)) {\n          if (service.config.useDualstack) {\n            endpoint.hostname = b + '.s3-accelerate.dualstack.amazonaws.com';\n          } else {\n            endpoint.hostname = b + '.s3-accelerate.amazonaws.com';\n          }\n        } else if (!service.config.s3BucketEndpoint) {\n          endpoint.hostname =\n            b + '.' + endpoint.hostname;\n        }\n\n        var port = endpoint.port;\n        if (port !== 80 && port !== 443) {\n          endpoint.host = endpoint.hostname + ':' +\n            endpoint.port;\n        } else {\n          endpoint.host = endpoint.hostname;\n        }\n\n        httpRequest.virtualHostedBucket = b; // needed for signing the request\n        service.removeVirtualHostedBucketFromPath(req);\n      }\n    }\n  },\n\n  /**\n   * Takes the bucket name out of the path if bucket is virtual-hosted\n   *\n   * @api private\n   */\n  removeVirtualHostedBucketFromPath: function removeVirtualHostedBucketFromPath(req) {\n    var httpRequest = req.httpRequest;\n    var bucket = httpRequest.virtualHostedBucket;\n    if (bucket && httpRequest.path) {\n      if (req.params && req.params.Key) {\n        var encodedS3Key = '/' + AWS.util.uriEscapePath(req.params.Key);\n        if (httpRequest.path.indexOf(encodedS3Key) === 0 && (httpRequest.path.length === encodedS3Key.length || httpRequest.path[encodedS3Key.length] === '?')) {\n          //path only contains key or path contains only key and querystring\n          return;\n        }\n      }\n      httpRequest.path = httpRequest.path.replace(new RegExp('/' + bucket), '');\n      if (httpRequest.path[0] !== '/') {\n        httpRequest.path = '/' + httpRequest.path;\n      }\n    }\n  },\n\n  /**\n   * Adds Expect: 100-continue header if payload is greater-or-equal 1MB\n   * @api private\n   */\n  addExpect100Continue: function addExpect100Continue(req) {\n    var len = req.httpRequest.headers['Content-Length'];\n    if (AWS.util.isNode() && (len >= 1024 * 1024 || req.params.Body instanceof AWS.util.stream.Stream)) {\n      req.httpRequest.headers['Expect'] = '100-continue';\n    }\n  },\n\n  /**\n   * Adds a default content type if none is supplied.\n   *\n   * @api private\n   */\n  addContentType: function addContentType(req) {\n    var httpRequest = req.httpRequest;\n    if (httpRequest.method === 'GET' || httpRequest.method === 'HEAD') {\n      // Content-Type is not set in GET/HEAD requests\n      delete httpRequest.headers['Content-Type'];\n      return;\n    }\n\n    if (!httpRequest.headers['Content-Type']) { // always have a Content-Type\n      httpRequest.headers['Content-Type'] = 'application/octet-stream';\n    }\n\n    var contentType = httpRequest.headers['Content-Type'];\n    if (AWS.util.isBrowser()) {\n      if (typeof httpRequest.body === 'string' && !contentType.match(/;\\s*charset=/)) {\n        var charset = '; charset=UTF-8';\n        httpRequest.headers['Content-Type'] += charset;\n      } else {\n        var replaceFn = function(_, prefix, charsetName) {\n          return prefix + charsetName.toUpperCase();\n        };\n\n        httpRequest.headers['Content-Type'] =\n          contentType.replace(/(;\\s*charset=)(.+)$/, replaceFn);\n      }\n    }\n  },\n\n  /**\n   * @api private\n   */\n  computableChecksumOperations: {\n    putBucketCors: true,\n    putBucketLifecycle: true,\n    putBucketLifecycleConfiguration: true,\n    putBucketTagging: true,\n    deleteObjects: true,\n    putBucketReplication: true,\n    putObjectLegalHold: true,\n    putObjectRetention: true,\n    putObjectLockConfiguration: true\n  },\n\n  /**\n   * Checks whether checksums should be computed for the request.\n   * If the request requires checksums to be computed, this will always\n   * return true, otherwise it depends on whether {AWS.Config.computeChecksums}\n   * is set.\n   *\n   * @param req [AWS.Request] the request to check against\n   * @return [Boolean] whether to compute checksums for a request.\n   * @api private\n   */\n  willComputeChecksums: function willComputeChecksums(req) {\n    if (this.computableChecksumOperations[req.operation]) return true;\n    if (!this.config.computeChecksums) return false;\n\n    // TODO: compute checksums for Stream objects\n    if (!AWS.util.Buffer.isBuffer(req.httpRequest.body) &&\n        typeof req.httpRequest.body !== 'string') {\n      return false;\n    }\n\n    var rules = req.service.api.operations[req.operation].input.members;\n\n    // Sha256 signing disabled, and not a presigned url\n    if (req.service.shouldDisableBodySigning(req) && !Object.prototype.hasOwnProperty.call(req.httpRequest.headers, 'presigned-expires')) {\n      if (rules.ContentMD5 && !req.params.ContentMD5) {\n        return true;\n      }\n    }\n\n    // V4 signer uses SHA256 signatures so only compute MD5 if it is required\n    if (req.service.getSignerClass(req) === AWS.Signers.V4) {\n      if (rules.ContentMD5 && !rules.ContentMD5.required) return false;\n    }\n\n    if (rules.ContentMD5 && !req.params.ContentMD5) return true;\n  },\n\n  /**\n   * A listener that computes the Content-MD5 and sets it in the header.\n   * @see AWS.S3.willComputeChecksums\n   * @api private\n   */\n  computeContentMd5: function computeContentMd5(req) {\n    if (req.service.willComputeChecksums(req)) {\n      var md5 = AWS.util.crypto.md5(req.httpRequest.body, 'base64');\n      req.httpRequest.headers['Content-MD5'] = md5;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  computeSseCustomerKeyMd5: function computeSseCustomerKeyMd5(req) {\n    var keys = {\n      SSECustomerKey: 'x-amz-server-side-encryption-customer-key-MD5',\n      CopySourceSSECustomerKey: 'x-amz-copy-source-server-side-encryption-customer-key-MD5'\n    };\n    AWS.util.each(keys, function(key, header) {\n      if (req.params[key]) {\n        var value = AWS.util.crypto.md5(req.params[key], 'base64');\n        req.httpRequest.headers[header] = value;\n      }\n    });\n  },\n\n  /**\n   * Returns true if the bucket name should be left in the URI path for\n   * a request to S3.  This function takes into account the current\n   * endpoint protocol (e.g. http or https).\n   *\n   * @api private\n   */\n  pathStyleBucketName: function pathStyleBucketName(bucketName) {\n    // user can force path style requests via the configuration\n    if (this.config.s3ForcePathStyle) return true;\n    if (this.config.s3BucketEndpoint) return false;\n\n    if (this.dnsCompatibleBucketName(bucketName)) {\n      return (this.config.sslEnabled && bucketName.match(/\\./)) ? true : false;\n    } else {\n      return true; // not dns compatible names must always use path style\n    }\n  },\n\n  /**\n   * Returns true if the bucket name is DNS compatible.  Buckets created\n   * outside of the classic region MUST be DNS compatible.\n   *\n   * @api private\n   */\n  dnsCompatibleBucketName: function dnsCompatibleBucketName(bucketName) {\n    var b = bucketName;\n    var domain = new RegExp(/^[a-z0-9][a-z0-9\\.\\-]{1,61}[a-z0-9]$/);\n    var ipAddress = new RegExp(/(\\d+\\.){3}\\d+/);\n    var dots = new RegExp(/\\.\\./);\n    return (b.match(domain) && !b.match(ipAddress) && !b.match(dots)) ? true : false;\n  },\n\n  /**\n   * @return [Boolean] whether response contains an error\n   * @api private\n   */\n  successfulResponse: function successfulResponse(resp) {\n    var req = resp.request;\n    var httpResponse = resp.httpResponse;\n    if (operationsWith200StatusCodeError[req.operation] &&\n        httpResponse.body.toString().match('<Error>')) {\n      return false;\n    } else {\n      return httpResponse.statusCode < 300;\n    }\n  },\n\n  /**\n   * @return [Boolean] whether the error can be retried\n   * @api private\n   */\n  retryableError: function retryableError(error, request) {\n    if (operationsWith200StatusCodeError[request.operation] &&\n        error.statusCode === 200) {\n      return true;\n    } else if (request._requestRegionForBucket &&\n        request.service.bucketRegionCache[request._requestRegionForBucket]) {\n      return false;\n    } else if (error && error.code === 'RequestTimeout') {\n      return true;\n    } else if (error &&\n        regionRedirectErrorCodes.indexOf(error.code) != -1 &&\n        error.region && error.region != request.httpRequest.region) {\n      request.httpRequest.region = error.region;\n      if (error.statusCode === 301) {\n        request.service.updateReqBucketRegion(request);\n      }\n      return true;\n    } else {\n      var _super = AWS.Service.prototype.retryableError;\n      return _super.call(this, error, request);\n    }\n  },\n\n  /**\n   * Updates httpRequest with region. If region is not provided, then\n   * the httpRequest will be updated based on httpRequest.region\n   *\n   * @api private\n   */\n  updateReqBucketRegion: function updateReqBucketRegion(request, region) {\n    var httpRequest = request.httpRequest;\n    if (typeof region === 'string' && region.length) {\n      httpRequest.region = region;\n    }\n    if (!httpRequest.endpoint.host.match(/s3(?!-accelerate).*\\.amazonaws\\.com$/)) {\n      return;\n    }\n    var service = request.service;\n    var s3Config = service.config;\n    var s3BucketEndpoint = s3Config.s3BucketEndpoint;\n    if (s3BucketEndpoint) {\n      delete s3Config.s3BucketEndpoint;\n    }\n    var newConfig = AWS.util.copy(s3Config);\n    delete newConfig.endpoint;\n    newConfig.region = httpRequest.region;\n\n    httpRequest.endpoint = (new AWS.S3(newConfig)).endpoint;\n    service.populateURI(request);\n    s3Config.s3BucketEndpoint = s3BucketEndpoint;\n    httpRequest.headers.Host = httpRequest.endpoint.host;\n\n    if (request._asm.currentState === 'validate') {\n      request.removeListener('build', service.populateURI);\n      request.addListener('build', service.removeVirtualHostedBucketFromPath);\n    }\n  },\n\n  /**\n   * Provides a specialized parser for getBucketLocation -- all other\n   * operations are parsed by the super class.\n   *\n   * @api private\n   */\n  extractData: function extractData(resp) {\n    var req = resp.request;\n    if (req.operation === 'getBucketLocation') {\n      var match = resp.httpResponse.body.toString().match(/>(.+)<\\/Location/);\n      delete resp.data['_'];\n      if (match) {\n        resp.data.LocationConstraint = match[1];\n      } else {\n        resp.data.LocationConstraint = '';\n      }\n    }\n    var bucket = req.params.Bucket || null;\n    if (req.operation === 'deleteBucket' && typeof bucket === 'string' && !resp.error) {\n      req.service.clearBucketRegionCache(bucket);\n    } else {\n      var headers = resp.httpResponse.headers || {};\n      var region = headers['x-amz-bucket-region'] || null;\n      if (!region && req.operation === 'createBucket' && !resp.error) {\n        var createBucketConfiguration = req.params.CreateBucketConfiguration;\n        if (!createBucketConfiguration) {\n          region = 'us-east-1';\n        } else if (createBucketConfiguration.LocationConstraint === 'EU') {\n          region = 'eu-west-1';\n        } else {\n          region = createBucketConfiguration.LocationConstraint;\n        }\n      }\n      if (region) {\n          if (bucket && region !== req.service.bucketRegionCache[bucket]) {\n            req.service.bucketRegionCache[bucket] = region;\n          }\n      }\n    }\n    req.service.extractRequestIds(resp);\n  },\n\n  /**\n   * Extracts an error object from the http response.\n   *\n   * @api private\n   */\n  extractError: function extractError(resp) {\n    var codes = {\n      304: 'NotModified',\n      403: 'Forbidden',\n      400: 'BadRequest',\n      404: 'NotFound'\n    };\n\n    var req = resp.request;\n    var code = resp.httpResponse.statusCode;\n    var body = resp.httpResponse.body || '';\n\n    var headers = resp.httpResponse.headers || {};\n    var region = headers['x-amz-bucket-region'] || null;\n    var bucket = req.params.Bucket || null;\n    var bucketRegionCache = req.service.bucketRegionCache;\n    if (region && bucket && region !== bucketRegionCache[bucket]) {\n      bucketRegionCache[bucket] = region;\n    }\n\n    var cachedRegion;\n    if (codes[code] && body.length === 0) {\n      if (bucket && !region) {\n        cachedRegion = bucketRegionCache[bucket] || null;\n        if (cachedRegion !== req.httpRequest.region) {\n          region = cachedRegion;\n        }\n      }\n      resp.error = AWS.util.error(new Error(), {\n        code: codes[code],\n        message: null,\n        region: region\n      });\n    } else {\n      var data = new AWS.XML.Parser().parse(body.toString());\n\n      if (data.Region && !region) {\n        region = data.Region;\n        if (bucket && region !== bucketRegionCache[bucket]) {\n          bucketRegionCache[bucket] = region;\n        }\n      } else if (bucket && !region && !data.Region) {\n        cachedRegion = bucketRegionCache[bucket] || null;\n        if (cachedRegion !== req.httpRequest.region) {\n          region = cachedRegion;\n        }\n      }\n\n      resp.error = AWS.util.error(new Error(), {\n        code: data.Code || code,\n        message: data.Message || null,\n        region: region\n      });\n    }\n    req.service.extractRequestIds(resp);\n  },\n\n  /**\n   * If region was not obtained synchronously, then send async request\n   * to get bucket region for errors resulting from wrong region.\n   *\n   * @api private\n   */\n  requestBucketRegion: function requestBucketRegion(resp, done) {\n    var error = resp.error;\n    var req = resp.request;\n    var bucket = req.params.Bucket || null;\n\n    if (!error || !bucket || error.region || req.operation === 'listObjects' ||\n        (AWS.util.isNode() && req.operation === 'headBucket') ||\n        (error.statusCode === 400 && req.operation !== 'headObject') ||\n        regionRedirectErrorCodes.indexOf(error.code) === -1) {\n      return done();\n    }\n    var reqOperation = AWS.util.isNode() ? 'headBucket' : 'listObjects';\n    var reqParams = {Bucket: bucket};\n    if (reqOperation === 'listObjects') reqParams.MaxKeys = 0;\n    var regionReq = req.service[reqOperation](reqParams);\n    regionReq._requestRegionForBucket = bucket;\n    regionReq.send(function() {\n      var region = req.service.bucketRegionCache[bucket] || null;\n      error.region = region;\n      done();\n    });\n  },\n\n   /**\n   * For browser only. If NetworkingError received, will attempt to obtain\n   * the bucket region.\n   *\n   * @api private\n   */\n   reqRegionForNetworkingError: function reqRegionForNetworkingError(resp, done) {\n    if (!AWS.util.isBrowser()) {\n      return done();\n    }\n    var error = resp.error;\n    var request = resp.request;\n    var bucket = request.params.Bucket;\n    if (!error || error.code !== 'NetworkingError' || !bucket ||\n        request.httpRequest.region === 'us-east-1') {\n      return done();\n    }\n    var service = request.service;\n    var bucketRegionCache = service.bucketRegionCache;\n    var cachedRegion = bucketRegionCache[bucket] || null;\n\n    if (cachedRegion && cachedRegion !== request.httpRequest.region) {\n      service.updateReqBucketRegion(request, cachedRegion);\n      done();\n    } else if (!service.dnsCompatibleBucketName(bucket)) {\n      service.updateReqBucketRegion(request, 'us-east-1');\n      if (bucketRegionCache[bucket] !== 'us-east-1') {\n        bucketRegionCache[bucket] = 'us-east-1';\n      }\n      done();\n    } else if (request.httpRequest.virtualHostedBucket) {\n      var getRegionReq = service.listObjects({Bucket: bucket, MaxKeys: 0});\n      service.updateReqBucketRegion(getRegionReq, 'us-east-1');\n      getRegionReq._requestRegionForBucket = bucket;\n\n      getRegionReq.send(function() {\n        var region = service.bucketRegionCache[bucket] || null;\n        if (region && region !== request.httpRequest.region) {\n          service.updateReqBucketRegion(request, region);\n        }\n        done();\n      });\n    } else {\n      // DNS-compatible path-style\n      // (s3ForcePathStyle or bucket name with dot over https)\n      // Cannot obtain region information for this case\n      done();\n    }\n   },\n\n  /**\n   * Cache for bucket region.\n   *\n   * @api private\n   */\n   bucketRegionCache: {},\n\n  /**\n   * Clears bucket region cache.\n   *\n   * @api private\n   */\n   clearBucketRegionCache: function(buckets) {\n    var bucketRegionCache = this.bucketRegionCache;\n    if (!buckets) {\n      buckets = Object.keys(bucketRegionCache);\n    } else if (typeof buckets === 'string') {\n      buckets = [buckets];\n    }\n    for (var i = 0; i < buckets.length; i++) {\n      delete bucketRegionCache[buckets[i]];\n    }\n    return bucketRegionCache;\n   },\n\n   /**\n    * Corrects request region if bucket's cached region is different\n    *\n    * @api private\n    */\n  correctBucketRegionFromCache: function correctBucketRegionFromCache(req) {\n    var bucket = req.params.Bucket || null;\n    if (bucket) {\n      var service = req.service;\n      var requestRegion = req.httpRequest.region;\n      var cachedRegion = service.bucketRegionCache[bucket];\n      if (cachedRegion && cachedRegion !== requestRegion) {\n        service.updateReqBucketRegion(req, cachedRegion);\n      }\n    }\n  },\n\n  /**\n   * Extracts S3 specific request ids from the http response.\n   *\n   * @api private\n   */\n  extractRequestIds: function extractRequestIds(resp) {\n    var extendedRequestId = resp.httpResponse.headers ? resp.httpResponse.headers['x-amz-id-2'] : null;\n    var cfId = resp.httpResponse.headers ? resp.httpResponse.headers['x-amz-cf-id'] : null;\n    resp.extendedRequestId = extendedRequestId;\n    resp.cfId = cfId;\n\n    if (resp.error) {\n      resp.error.requestId = resp.requestId || null;\n      resp.error.extendedRequestId = extendedRequestId;\n      resp.error.cfId = cfId;\n    }\n  },\n\n  /**\n   * Get a pre-signed URL for a given operation name.\n   *\n   * @note You must ensure that you have static or previously resolved\n   *   credentials if you call this method synchronously (with no callback),\n   *   otherwise it may not properly sign the request. If you cannot guarantee\n   *   this (you are using an asynchronous credential provider, i.e., EC2\n   *   IAM roles), you should always call this method with an asynchronous\n   *   callback.\n   * @note Not all operation parameters are supported when using pre-signed\n   *   URLs. Certain parameters, such as `SSECustomerKey`, `ACL`, `Expires`,\n   *   `ContentLength`, or `Tagging` must be provided as headers when sending a\n   *   request. If you are using pre-signed URLs to upload from a browser and\n   *   need to use these fields, see {createPresignedPost}.\n   * @note The default signer allows altering the request by adding corresponding\n   *   headers to set some parameters (e.g. Range) and these added parameters\n   *   won't be signed. You must use signatureVersion v4 to to include these\n   *   parameters in the signed portion of the URL and enforce exact matching\n   *   between headers and signed params in the URL.\n   * @note This operation cannot be used with a promise. See note above regarding\n   *   asynchronous credentials and use with a callback.\n   * @param operation [String] the name of the operation to call\n   * @param params [map] parameters to pass to the operation. See the given\n   *   operation for the expected operation parameters. In addition, you can\n   *   also pass the \"Expires\" parameter to inform S3 how long the URL should\n   *   work for.\n   * @option params Expires [Integer] (900) the number of seconds to expire\n   *   the pre-signed URL operation in. Defaults to 15 minutes.\n   * @param callback [Function] if a callback is provided, this function will\n   *   pass the URL as the second parameter (after the error parameter) to\n   *   the callback function.\n   * @return [String] if called synchronously (with no callback), returns the\n   *   signed URL.\n   * @return [null] nothing is returned if a callback is provided.\n   * @example Pre-signing a getObject operation (synchronously)\n   *   var params = {Bucket: 'bucket', Key: 'key'};\n   *   var url = s3.getSignedUrl('getObject', params);\n   *   console.log('The URL is', url);\n   * @example Pre-signing a putObject (asynchronously)\n   *   var params = {Bucket: 'bucket', Key: 'key'};\n   *   s3.getSignedUrl('putObject', params, function (err, url) {\n   *     console.log('The URL is', url);\n   *   });\n   * @example Pre-signing a putObject operation with a specific payload\n   *   var params = {Bucket: 'bucket', Key: 'key', Body: 'body'};\n   *   var url = s3.getSignedUrl('putObject', params);\n   *   console.log('The URL is', url);\n   * @example Passing in a 1-minute expiry time for a pre-signed URL\n   *   var params = {Bucket: 'bucket', Key: 'key', Expires: 60};\n   *   var url = s3.getSignedUrl('getObject', params);\n   *   console.log('The URL is', url); // expires in 60 seconds\n   */\n  getSignedUrl: function getSignedUrl(operation, params, callback) {\n    params = AWS.util.copy(params || {});\n    var expires = params.Expires || 900;\n\n    if (typeof expires !== 'number') {\n      throw AWS.util.error(new Error(),\n        { code: 'InvalidParameterException', message: 'The expiration must be a number, received ' + typeof expires });\n    }\n\n    delete params.Expires; // we can't validate this\n    var request = this.makeRequest(operation, params);\n\n    if (callback) {\n      AWS.util.defer(function() {\n        request.presign(expires, callback);\n      });\n    } else {\n      return request.presign(expires, callback);\n    }\n  },\n\n\n  /**\n   * Get a pre-signed POST policy to support uploading to S3 directly from an\n   * HTML form.\n   *\n   * @param params [map]\n   * @option params Bucket [String]     The bucket to which the post should be\n   *                                    uploaded\n   * @option params Expires [Integer]   (3600) The number of seconds for which\n   *                                    the presigned policy should be valid.\n   * @option params Conditions [Array]  An array of conditions that must be met\n   *                                    for the presigned policy to allow the\n   *                                    upload. This can include required tags,\n   *                                    the accepted range for content lengths,\n   *                                    etc.\n   * @see http://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-HTTPPOSTConstructPolicy.html\n   * @option params Fields [map]        Fields to include in the form. All\n   *                                    values passed in as fields will be\n   *                                    signed as exact match conditions.\n   * @param callback [Function]\n   *\n   * @note All fields passed in when creating presigned post data will be signed\n   *   as exact match conditions. Any fields that will be interpolated by S3\n   *   must be added to the fields hash after signing, and an appropriate\n   *   condition for such fields must be explicitly added to the Conditions\n   *   array passed to this function before signing.\n   *\n   * @example Presiging post data with a known key\n   *   var params = {\n   *     Bucket: 'bucket',\n   *     Fields: {\n   *       key: 'key'\n   *     }\n   *   };\n   *   s3.createPresignedPost(params, function(err, data) {\n   *     if (err) {\n   *       console.error('Presigning post data encountered an error', err);\n   *     } else {\n   *       console.log('The post data is', data);\n   *     }\n   *   });\n   *\n   * @example Presigning post data with an interpolated key\n   *   var params = {\n   *     Bucket: 'bucket',\n   *     Conditions: [\n   *       ['starts-with', '$key', 'path/to/uploads/']\n   *     ]\n   *   };\n   *   s3.createPresignedPost(params, function(err, data) {\n   *     if (err) {\n   *       console.error('Presigning post data encountered an error', err);\n   *     } else {\n   *       data.Fields.key = 'path/to/uploads/${filename}';\n   *       console.log('The post data is', data);\n   *     }\n   *   });\n   *\n   * @note You must ensure that you have static or previously resolved\n   *   credentials if you call this method synchronously (with no callback),\n   *   otherwise it may not properly sign the request. If you cannot guarantee\n   *   this (you are using an asynchronous credential provider, i.e., EC2\n   *   IAM roles), you should always call this method with an asynchronous\n   *   callback.\n   *\n   * @return [map]  If called synchronously (with no callback), returns a hash\n   *                with the url to set as the form action and a hash of fields\n   *                to include in the form.\n   * @return [null] Nothing is returned if a callback is provided.\n   *\n   * @callback callback function (err, data)\n   *  @param err [Error] the error object returned from the policy signer\n   *  @param data [map] The data necessary to construct an HTML form\n   *  @param data.url [String] The URL to use as the action of the form\n   *  @param data.fields [map] A hash of fields that must be included in the\n   *                           form for the upload to succeed. This hash will\n   *                           include the signed POST policy, your access key\n   *                           ID and security token (if present), etc. These\n   *                           may be safely included as input elements of type\n   *                           'hidden.'\n   */\n  createPresignedPost: function createPresignedPost(params, callback) {\n    if (typeof params === 'function' && callback === undefined) {\n      callback = params;\n      params = null;\n    }\n\n    params = AWS.util.copy(params || {});\n    var boundParams = this.config.params || {};\n    var bucket = params.Bucket || boundParams.Bucket,\n      self = this,\n      config = this.config,\n      endpoint = AWS.util.copy(this.endpoint);\n    if (!config.s3BucketEndpoint) {\n      endpoint.pathname = '/' + bucket;\n    }\n\n    function finalizePost() {\n      return {\n        url: AWS.util.urlFormat(endpoint),\n        fields: self.preparePostFields(\n          config.credentials,\n          config.region,\n          bucket,\n          params.Fields,\n          params.Conditions,\n          params.Expires\n        )\n      };\n    }\n\n    if (callback) {\n      config.getCredentials(function (err) {\n        if (err) {\n          callback(err);\n        }\n\n        callback(null, finalizePost());\n      });\n    } else {\n      return finalizePost();\n    }\n  },\n\n  /**\n   * @api private\n   */\n  preparePostFields: function preparePostFields(\n    credentials,\n    region,\n    bucket,\n    fields,\n    conditions,\n    expiresInSeconds\n  ) {\n    var now = this.getSkewCorrectedDate();\n    if (!credentials || !region || !bucket) {\n      throw new Error('Unable to create a POST object policy without a bucket,'\n        + ' region, and credentials');\n    }\n    fields = AWS.util.copy(fields || {});\n    conditions = (conditions || []).slice(0);\n    expiresInSeconds = expiresInSeconds || 3600;\n\n    var signingDate = AWS.util.date.iso8601(now).replace(/[:\\-]|\\.\\d{3}/g, '');\n    var shortDate = signingDate.substr(0, 8);\n    var scope = v4Credentials.createScope(shortDate, region, 's3');\n    var credential = credentials.accessKeyId + '/' + scope;\n\n    fields['bucket'] = bucket;\n    fields['X-Amz-Algorithm'] = 'AWS4-HMAC-SHA256';\n    fields['X-Amz-Credential'] = credential;\n    fields['X-Amz-Date'] = signingDate;\n    if (credentials.sessionToken) {\n      fields['X-Amz-Security-Token'] = credentials.sessionToken;\n    }\n    for (var field in fields) {\n      if (fields.hasOwnProperty(field)) {\n        var condition = {};\n        condition[field] = fields[field];\n        conditions.push(condition);\n      }\n    }\n\n    fields.Policy = this.preparePostPolicy(\n      new Date(now.valueOf() + expiresInSeconds * 1000),\n      conditions\n    );\n    fields['X-Amz-Signature'] = AWS.util.crypto.hmac(\n      v4Credentials.getSigningKey(credentials, shortDate, region, 's3', true),\n      fields.Policy,\n      'hex'\n    );\n\n    return fields;\n  },\n\n  /**\n   * @api private\n   */\n  preparePostPolicy: function preparePostPolicy(expiration, conditions) {\n    return AWS.util.base64.encode(JSON.stringify({\n      expiration: AWS.util.date.iso8601(expiration),\n      conditions: conditions\n    }));\n  },\n\n  /**\n   * @api private\n   */\n  prepareSignedUrl: function prepareSignedUrl(request) {\n    request.addListener('validate', request.service.noPresignedContentLength);\n    request.removeListener('build', request.service.addContentType);\n    if (!request.params.Body) {\n      // no Content-MD5/SHA-256 if body is not provided\n      request.removeListener('build', request.service.computeContentMd5);\n    } else {\n      request.addListener('afterBuild', AWS.EventListeners.Core.COMPUTE_SHA256);\n    }\n  },\n\n  /**\n   * @api private\n   * @param request\n   */\n  disableBodySigning: function disableBodySigning(request) {\n    var headers = request.httpRequest.headers;\n    // Add the header to anything that isn't a presigned url, unless that presigned url had a body defined\n    if (!Object.prototype.hasOwnProperty.call(headers, 'presigned-expires')) {\n      headers['X-Amz-Content-Sha256'] = 'UNSIGNED-PAYLOAD';\n    }\n  },\n\n  /**\n   * @api private\n   */\n  noPresignedContentLength: function noPresignedContentLength(request) {\n    if (request.params.ContentLength !== undefined) {\n      throw AWS.util.error(new Error(), {code: 'UnexpectedParameter',\n        message: 'ContentLength is not supported in pre-signed URLs.'});\n    }\n  },\n\n  createBucket: function createBucket(params, callback) {\n    // When creating a bucket *outside* the classic region, the location\n    // constraint must be set for the bucket and it must match the endpoint.\n    // This chunk of code will set the location constraint param based\n    // on the region (when possible), but it will not override a passed-in\n    // location constraint.\n    if (typeof params === 'function' || !params) {\n      callback = callback || params;\n      params = {};\n    }\n    var hostname = this.endpoint.hostname;\n    if (hostname !== this.api.globalEndpoint && !params.CreateBucketConfiguration) {\n      params.CreateBucketConfiguration = { LocationConstraint: this.config.region };\n    }\n    return this.makeRequest('createBucket', params, callback);\n  },\n\n  /**\n   * @see AWS.S3.ManagedUpload\n   * @overload upload(params = {}, [options], [callback])\n   *   Uploads an arbitrarily sized buffer, blob, or stream, using intelligent\n   *   concurrent handling of parts if the payload is large enough. You can\n   *   configure the concurrent queue size by setting `options`. Note that this\n   *   is the only operation for which the SDK can retry requests with stream\n   *   bodies.\n   *\n   *   @param (see AWS.S3.putObject)\n   *   @option (see AWS.S3.ManagedUpload.constructor)\n   *   @return [AWS.S3.ManagedUpload] the managed upload object that can call\n   *     `send()` or track progress.\n   *   @example Uploading a stream object\n   *     var params = {Bucket: 'bucket', Key: 'key', Body: stream};\n   *     s3.upload(params, function(err, data) {\n   *       console.log(err, data);\n   *     });\n   *   @example Uploading a stream with concurrency of 1 and partSize of 10mb\n   *     var params = {Bucket: 'bucket', Key: 'key', Body: stream};\n   *     var options = {partSize: 10 * 1024 * 1024, queueSize: 1};\n   *     s3.upload(params, options, function(err, data) {\n   *       console.log(err, data);\n   *     });\n   * @callback callback function(err, data)\n   *   @param err [Error] an error or null if no error occurred.\n   *   @param data [map] The response data from the successful upload:\n   *   @param data.Location [String] the URL of the uploaded object\n   *   @param data.ETag [String] the ETag of the uploaded object\n   *   @param data.Bucket [String]  the bucket to which the object was uploaded\n   *   @param data.Key [String] the key to which the object was uploaded\n   */\n  upload: function upload(params, options, callback) {\n    if (typeof options === 'function' && callback === undefined) {\n      callback = options;\n      options = null;\n    }\n\n    options = options || {};\n    options = AWS.util.merge(options || {}, {service: this, params: params});\n\n    var uploader = new AWS.S3.ManagedUpload(options);\n    if (typeof callback === 'function') uploader.send(callback);\n    return uploader;\n  }\n});\n","var AWS = require('../core');\nvar byteLength = AWS.util.string.byteLength;\nvar Buffer = AWS.util.Buffer;\n\n/**\n * The managed uploader allows for easy and efficient uploading of buffers,\n * blobs, or streams, using a configurable amount of concurrency to perform\n * multipart uploads where possible. This abstraction also enables uploading\n * streams of unknown size due to the use of multipart uploads.\n *\n * To construct a managed upload object, see the {constructor} function.\n *\n * ## Tracking upload progress\n *\n * The managed upload object can also track progress by attaching an\n * 'httpUploadProgress' listener to the upload manager. This event is similar\n * to {AWS.Request~httpUploadProgress} but groups all concurrent upload progress\n * into a single event. See {AWS.S3.ManagedUpload~httpUploadProgress} for more\n * information.\n *\n * ## Handling Multipart Cleanup\n *\n * By default, this class will automatically clean up any multipart uploads\n * when an individual part upload fails. This behavior can be disabled in order\n * to manually handle failures by setting the `leavePartsOnError` configuration\n * option to `true` when initializing the upload object.\n *\n * @!event httpUploadProgress(progress)\n *   Triggered when the uploader has uploaded more data.\n *   @note The `total` property may not be set if the stream being uploaded has\n *     not yet finished chunking. In this case the `total` will be undefined\n *     until the total stream size is known.\n *   @note This event will not be emitted in Node.js 0.8.x.\n *   @param progress [map] An object containing the `loaded` and `total` bytes\n *     of the request and the `key` of the S3 object. Note that `total` may be undefined until the payload\n *     size is known.\n *   @context (see AWS.Request~send)\n */\nAWS.S3.ManagedUpload = AWS.util.inherit({\n  /**\n   * Creates a managed upload object with a set of configuration options.\n   *\n   * @note A \"Body\" parameter is required to be set prior to calling {send}.\n   * @note In Node.js, sending \"Body\" as {https://nodejs.org/dist/latest/docs/api/stream.html#stream_object_mode object-mode stream}\n   *   may result in upload hangs. Using buffer stream is preferable.\n   * @option options params [map] a map of parameters to pass to the upload\n   *   requests. The \"Body\" parameter is required to be specified either on\n   *   the service or in the params option.\n   * @note ContentMD5 should not be provided when using the managed upload object.\n   *   Instead, setting \"computeChecksums\" to true will enable automatic ContentMD5 generation\n   *   by the managed upload object.\n   * @option options queueSize [Number] (4) the size of the concurrent queue\n   *   manager to upload parts in parallel. Set to 1 for synchronous uploading\n   *   of parts. Note that the uploader will buffer at most queueSize * partSize\n   *   bytes into memory at any given time.\n   * @option options partSize [Number] (5mb) the size in bytes for each\n   *   individual part to be uploaded. Adjust the part size to ensure the number\n   *   of parts does not exceed {maxTotalParts}. See {minPartSize} for the\n   *   minimum allowed part size.\n   * @option options leavePartsOnError [Boolean] (false) whether to abort the\n   *   multipart upload if an error occurs. Set to true if you want to handle\n   *   failures manually.\n   * @option options service [AWS.S3] an optional S3 service object to use for\n   *   requests. This object might have bound parameters used by the uploader.\n   * @option options tags [Array<map>] The tags to apply to the uploaded object.\n   *   Each tag should have a `Key` and `Value` keys.\n   * @example Creating a default uploader for a stream object\n   *   var upload = new AWS.S3.ManagedUpload({\n   *     params: {Bucket: 'bucket', Key: 'key', Body: stream}\n   *   });\n   * @example Creating an uploader with concurrency of 1 and partSize of 10mb\n   *   var upload = new AWS.S3.ManagedUpload({\n   *     partSize: 10 * 1024 * 1024, queueSize: 1,\n   *     params: {Bucket: 'bucket', Key: 'key', Body: stream}\n   *   });\n   * @example Creating an uploader with tags\n   *   var upload = new AWS.S3.ManagedUpload({\n   *     params: {Bucket: 'bucket', Key: 'key', Body: stream},\n   *     tags: [{Key: 'tag1', Value: 'value1'}, {Key: 'tag2', Value: 'value2'}]\n   *   });\n   * @see send\n   */\n  constructor: function ManagedUpload(options) {\n    var self = this;\n    AWS.SequentialExecutor.call(self);\n    self.body = null;\n    self.sliceFn = null;\n    self.callback = null;\n    self.parts = {};\n    self.completeInfo = [];\n    self.fillQueue = function() {\n      self.callback(new Error('Unsupported body payload ' + typeof self.body));\n    };\n\n    self.configure(options);\n  },\n\n  /**\n   * @api private\n   */\n  configure: function configure(options) {\n    options = options || {};\n    this.partSize = this.minPartSize;\n\n    if (options.queueSize) this.queueSize = options.queueSize;\n    if (options.partSize) this.partSize = options.partSize;\n    if (options.leavePartsOnError) this.leavePartsOnError = true;\n    if (options.tags) {\n      if (!Array.isArray(options.tags)) {\n        throw new Error('Tags must be specified as an array; ' +\n          typeof options.tags + ' provided.');\n      }\n      this.tags = options.tags;\n    }\n\n    if (this.partSize < this.minPartSize) {\n      throw new Error('partSize must be greater than ' +\n                      this.minPartSize);\n    }\n\n    this.service = options.service;\n    this.bindServiceObject(options.params);\n    this.validateBody();\n    this.adjustTotalBytes();\n  },\n\n  /**\n   * @api private\n   */\n  leavePartsOnError: false,\n\n  /**\n   * @api private\n   */\n  queueSize: 4,\n\n  /**\n   * @api private\n   */\n  partSize: null,\n\n  /**\n   * @readonly\n   * @return [Number] the minimum number of bytes for an individual part\n   *   upload.\n   */\n  minPartSize: 1024 * 1024 * 5,\n\n  /**\n   * @readonly\n   * @return [Number] the maximum allowed number of parts in a multipart upload.\n   */\n  maxTotalParts: 10000,\n\n  /**\n   * Initiates the managed upload for the payload.\n   *\n   * @callback callback function(err, data)\n   *   @param err [Error] an error or null if no error occurred.\n   *   @param data [map] The response data from the successful upload:\n   *     * `Location` (String) the URL of the uploaded object\n   *     * `ETag` (String) the ETag of the uploaded object\n   *     * `Bucket` (String) the bucket to which the object was uploaded\n   *     * `Key` (String) the key to which the object was uploaded\n   * @example Sending a managed upload object\n   *   var params = {Bucket: 'bucket', Key: 'key', Body: stream};\n   *   var upload = new AWS.S3.ManagedUpload({params: params});\n   *   upload.send(function(err, data) {\n   *     console.log(err, data);\n   *   });\n   */\n  send: function(callback) {\n    var self = this;\n    self.failed = false;\n    self.callback = callback || function(err) { if (err) throw err; };\n\n    var runFill = true;\n    if (self.sliceFn) {\n      self.fillQueue = self.fillBuffer;\n    } else if (AWS.util.isNode()) {\n      var Stream = AWS.util.stream.Stream;\n      if (self.body instanceof Stream) {\n        runFill = false;\n        self.fillQueue = self.fillStream;\n        self.partBuffers = [];\n        self.body.\n          on('error', function(err) { self.cleanup(err); }).\n          on('readable', function() { self.fillQueue(); }).\n          on('end', function() {\n            self.isDoneChunking = true;\n            self.numParts = self.totalPartNumbers;\n            self.fillQueue.call(self);\n\n            if (self.isDoneChunking && self.totalPartNumbers >= 1 && self.doneParts === self.numParts) {\n              self.finishMultiPart();\n            }\n          });\n      }\n    }\n\n    if (runFill) self.fillQueue.call(self);\n  },\n\n  /**\n   * @!method  promise()\n   *   Returns a 'thenable' promise.\n   *\n   *   Two callbacks can be provided to the `then` method on the returned promise.\n   *   The first callback will be called if the promise is fulfilled, and the second\n   *   callback will be called if the promise is rejected.\n   *   @callback fulfilledCallback function(data)\n   *     Called if the promise is fulfilled.\n   *     @param data [map] The response data from the successful upload:\n   *       `Location` (String) the URL of the uploaded object\n   *       `ETag` (String) the ETag of the uploaded object\n   *       `Bucket` (String) the bucket to which the object was uploaded\n   *       `Key` (String) the key to which the object was uploaded\n   *   @callback rejectedCallback function(err)\n   *     Called if the promise is rejected.\n   *     @param err [Error] an error or null if no error occurred.\n   *   @return [Promise] A promise that represents the state of the upload request.\n   *   @example Sending an upload request using promises.\n   *     var upload = s3.upload({Bucket: 'bucket', Key: 'key', Body: stream});\n   *     var promise = upload.promise();\n   *     promise.then(function(data) { ... }, function(err) { ... });\n   */\n\n  /**\n   * Aborts a managed upload, including all concurrent upload requests.\n   * @note By default, calling this function will cleanup a multipart upload\n   *   if one was created. To leave the multipart upload around after aborting\n   *   a request, configure `leavePartsOnError` to `true` in the {constructor}.\n   * @note Calling {abort} in the browser environment will not abort any requests\n   *   that are already in flight. If a multipart upload was created, any parts\n   *   not yet uploaded will not be sent, and the multipart upload will be cleaned up.\n   * @example Aborting an upload\n   *   var params = {\n   *     Bucket: 'bucket', Key: 'key',\n   *     Body: Buffer.alloc(1024 * 1024 * 25) // 25MB payload\n   *   };\n   *   var upload = s3.upload(params);\n   *   upload.send(function (err, data) {\n   *     if (err) console.log(\"Error:\", err.code, err.message);\n   *     else console.log(data);\n   *   });\n   *\n   *   // abort request in 1 second\n   *   setTimeout(upload.abort.bind(upload), 1000);\n   */\n  abort: function() {\n    var self = this;\n    //abort putObject request\n    if (self.isDoneChunking === true && self.totalPartNumbers === 1 && self.singlePart) {\n      self.singlePart.abort();\n    } else {\n      self.cleanup(AWS.util.error(new Error('Request aborted by user'), {\n        code: 'RequestAbortedError', retryable: false\n      }));\n    }\n  },\n\n  /**\n   * @api private\n   */\n  validateBody: function validateBody() {\n    var self = this;\n    self.body = self.service.config.params.Body;\n    if (typeof self.body === 'string') {\n      self.body = AWS.util.buffer.toBuffer(self.body);\n    } else if (!self.body) {\n      throw new Error('params.Body is required');\n    }\n    self.sliceFn = AWS.util.arraySliceFn(self.body);\n  },\n\n  /**\n   * @api private\n   */\n  bindServiceObject: function bindServiceObject(params) {\n    params = params || {};\n    var self = this;\n    // bind parameters to new service object\n    if (!self.service) {\n      self.service = new AWS.S3({params: params});\n    } else {\n      var service = self.service;\n      var config = AWS.util.copy(service.config);\n      config.signatureVersion = service.getSignatureVersion();\n      self.service = new service.constructor.__super__(config);\n      self.service.config.params =\n        AWS.util.merge(self.service.config.params || {}, params);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  adjustTotalBytes: function adjustTotalBytes() {\n    var self = this;\n    try { // try to get totalBytes\n      self.totalBytes = byteLength(self.body);\n    } catch (e) { }\n\n    // try to adjust partSize if we know payload length\n    if (self.totalBytes) {\n      var newPartSize = Math.ceil(self.totalBytes / self.maxTotalParts);\n      if (newPartSize > self.partSize) self.partSize = newPartSize;\n    } else {\n      self.totalBytes = undefined;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  isDoneChunking: false,\n\n  /**\n   * @api private\n   */\n  partPos: 0,\n\n  /**\n   * @api private\n   */\n  totalChunkedBytes: 0,\n\n  /**\n   * @api private\n   */\n  totalUploadedBytes: 0,\n\n  /**\n   * @api private\n   */\n  totalBytes: undefined,\n\n  /**\n   * @api private\n   */\n  numParts: 0,\n\n  /**\n   * @api private\n   */\n  totalPartNumbers: 0,\n\n  /**\n   * @api private\n   */\n  activeParts: 0,\n\n  /**\n   * @api private\n   */\n  doneParts: 0,\n\n  /**\n   * @api private\n   */\n  parts: null,\n\n  /**\n   * @api private\n   */\n  completeInfo: null,\n\n  /**\n   * @api private\n   */\n  failed: false,\n\n  /**\n   * @api private\n   */\n  multipartReq: null,\n\n  /**\n   * @api private\n   */\n  partBuffers: null,\n\n  /**\n   * @api private\n   */\n  partBufferLength: 0,\n\n  /**\n   * @api private\n   */\n  fillBuffer: function fillBuffer() {\n    var self = this;\n    var bodyLen = byteLength(self.body);\n\n    if (bodyLen === 0) {\n      self.isDoneChunking = true;\n      self.numParts = 1;\n      self.nextChunk(self.body);\n      return;\n    }\n\n    while (self.activeParts < self.queueSize && self.partPos < bodyLen) {\n      var endPos = Math.min(self.partPos + self.partSize, bodyLen);\n      var buf = self.sliceFn.call(self.body, self.partPos, endPos);\n      self.partPos += self.partSize;\n\n      if (byteLength(buf) < self.partSize || self.partPos === bodyLen) {\n        self.isDoneChunking = true;\n        self.numParts = self.totalPartNumbers + 1;\n      }\n      self.nextChunk(buf);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  fillStream: function fillStream() {\n    var self = this;\n    if (self.activeParts >= self.queueSize) return;\n\n    var buf = self.body.read(self.partSize - self.partBufferLength) ||\n              self.body.read();\n    if (buf) {\n      self.partBuffers.push(buf);\n      self.partBufferLength += buf.length;\n      self.totalChunkedBytes += buf.length;\n    }\n\n    if (self.partBufferLength >= self.partSize) {\n      // if we have single buffer we avoid copyfull concat\n      var pbuf = self.partBuffers.length === 1 ?\n        self.partBuffers[0] : Buffer.concat(self.partBuffers);\n      self.partBuffers = [];\n      self.partBufferLength = 0;\n\n      // if we have more than partSize, push the rest back on the queue\n      if (pbuf.length > self.partSize) {\n        var rest = pbuf.slice(self.partSize);\n        self.partBuffers.push(rest);\n        self.partBufferLength += rest.length;\n        pbuf = pbuf.slice(0, self.partSize);\n      }\n\n      self.nextChunk(pbuf);\n    }\n\n    if (self.isDoneChunking && !self.isDoneSending) {\n      // if we have single buffer we avoid copyfull concat\n      pbuf = self.partBuffers.length === 1 ?\n          self.partBuffers[0] : Buffer.concat(self.partBuffers);\n      self.partBuffers = [];\n      self.partBufferLength = 0;\n      self.totalBytes = self.totalChunkedBytes;\n      self.isDoneSending = true;\n\n      if (self.numParts === 0 || pbuf.length > 0) {\n        self.numParts++;\n        self.nextChunk(pbuf);\n      }\n    }\n\n    self.body.read(0);\n  },\n\n  /**\n   * @api private\n   */\n  nextChunk: function nextChunk(chunk) {\n    var self = this;\n    if (self.failed) return null;\n\n    var partNumber = ++self.totalPartNumbers;\n    if (self.isDoneChunking && partNumber === 1) {\n      var params = {Body: chunk};\n      if (this.tags) {\n        params.Tagging = this.getTaggingHeader();\n      }\n      var req = self.service.putObject(params);\n      req._managedUpload = self;\n      req.on('httpUploadProgress', self.progress).send(self.finishSinglePart);\n      self.singlePart = req; //save the single part request\n      return null;\n    } else if (self.service.config.params.ContentMD5) {\n      var err = AWS.util.error(new Error('The Content-MD5 you specified is invalid for multi-part uploads.'), {\n        code: 'InvalidDigest', retryable: false\n      });\n\n      self.cleanup(err);\n      return null;\n    }\n\n    if (self.completeInfo[partNumber] && self.completeInfo[partNumber].ETag !== null) {\n      return null; // Already uploaded this part.\n    }\n\n    self.activeParts++;\n    if (!self.service.config.params.UploadId) {\n\n      if (!self.multipartReq) { // create multipart\n        self.multipartReq = self.service.createMultipartUpload();\n        self.multipartReq.on('success', function(resp) {\n          self.service.config.params.UploadId = resp.data.UploadId;\n          self.multipartReq = null;\n        });\n        self.queueChunks(chunk, partNumber);\n        self.multipartReq.on('error', function(err) {\n          self.cleanup(err);\n        });\n        self.multipartReq.send();\n      } else {\n        self.queueChunks(chunk, partNumber);\n      }\n    } else { // multipart is created, just send\n      self.uploadPart(chunk, partNumber);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  getTaggingHeader: function getTaggingHeader() {\n    var kvPairStrings = [];\n    for (var i = 0; i < this.tags.length; i++) {\n      kvPairStrings.push(AWS.util.uriEscape(this.tags[i].Key) + '=' +\n        AWS.util.uriEscape(this.tags[i].Value));\n    }\n\n    return kvPairStrings.join('&');\n  },\n\n  /**\n   * @api private\n   */\n  uploadPart: function uploadPart(chunk, partNumber) {\n    var self = this;\n\n    var partParams = {\n      Body: chunk,\n      ContentLength: AWS.util.string.byteLength(chunk),\n      PartNumber: partNumber\n    };\n\n    var partInfo = {ETag: null, PartNumber: partNumber};\n    self.completeInfo[partNumber] = partInfo;\n\n    var req = self.service.uploadPart(partParams);\n    self.parts[partNumber] = req;\n    req._lastUploadedBytes = 0;\n    req._managedUpload = self;\n    req.on('httpUploadProgress', self.progress);\n    req.send(function(err, data) {\n      delete self.parts[partParams.PartNumber];\n      self.activeParts--;\n\n      if (!err && (!data || !data.ETag)) {\n        var message = 'No access to ETag property on response.';\n        if (AWS.util.isBrowser()) {\n          message += ' Check CORS configuration to expose ETag header.';\n        }\n\n        err = AWS.util.error(new Error(message), {\n          code: 'ETagMissing', retryable: false\n        });\n      }\n      if (err) return self.cleanup(err);\n      //prevent sending part being returned twice (https://github.com/aws/aws-sdk-js/issues/2304)\n      if (self.completeInfo[partNumber] && self.completeInfo[partNumber].ETag !== null) return null;\n      partInfo.ETag = data.ETag;\n      self.doneParts++;\n      if (self.isDoneChunking && self.doneParts === self.numParts) {\n        self.finishMultiPart();\n      } else {\n        self.fillQueue.call(self);\n      }\n    });\n  },\n\n  /**\n   * @api private\n   */\n  queueChunks: function queueChunks(chunk, partNumber) {\n    var self = this;\n    self.multipartReq.on('success', function() {\n      self.uploadPart(chunk, partNumber);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  cleanup: function cleanup(err) {\n    var self = this;\n    if (self.failed) return;\n\n    // clean up stream\n    if (typeof self.body.removeAllListeners === 'function' &&\n        typeof self.body.resume === 'function') {\n      self.body.removeAllListeners('readable');\n      self.body.removeAllListeners('end');\n      self.body.resume();\n    }\n\n    // cleanup multipartReq listeners\n    if (self.multipartReq) {\n      self.multipartReq.removeAllListeners('success');\n      self.multipartReq.removeAllListeners('error');\n      self.multipartReq.removeAllListeners('complete');\n      delete self.multipartReq;\n    }\n\n    if (self.service.config.params.UploadId && !self.leavePartsOnError) {\n      self.service.abortMultipartUpload().send();\n    } else if (self.leavePartsOnError) {\n      self.isDoneChunking = false;\n    }\n\n    AWS.util.each(self.parts, function(partNumber, part) {\n      part.removeAllListeners('complete');\n      part.abort();\n    });\n\n    self.activeParts = 0;\n    self.partPos = 0;\n    self.numParts = 0;\n    self.totalPartNumbers = 0;\n    self.parts = {};\n    self.failed = true;\n    self.callback(err);\n  },\n\n  /**\n   * @api private\n   */\n  finishMultiPart: function finishMultiPart() {\n    var self = this;\n    var completeParams = { MultipartUpload: { Parts: self.completeInfo.slice(1) } };\n    self.service.completeMultipartUpload(completeParams, function(err, data) {\n      if (err) {\n        return self.cleanup(err);\n      }\n\n      if (data && typeof data.Location === 'string') {\n        data.Location = data.Location.replace(/%2F/g, '/');\n      }\n\n      if (Array.isArray(self.tags)) {\n        for (var i = 0; i < self.tags.length; i++) {\n          self.tags[i].Value = String(self.tags[i].Value);\n        }\n        self.service.putObjectTagging(\n          {Tagging: {TagSet: self.tags}},\n          function(e, d) {\n            if (e) {\n              self.callback(e);\n            } else {\n              self.callback(e, data);\n            }\n          }\n        );\n      } else {\n        self.callback(err, data);\n      }\n    });\n  },\n\n  /**\n   * @api private\n   */\n  finishSinglePart: function finishSinglePart(err, data) {\n    var upload = this.request._managedUpload;\n    var httpReq = this.request.httpRequest;\n    var endpoint = httpReq.endpoint;\n    if (err) return upload.callback(err);\n    data.Location =\n      [endpoint.protocol, '//', endpoint.host, httpReq.path].join('');\n    data.key = this.request.params.Key; // will stay undocumented\n    data.Key = this.request.params.Key;\n    data.Bucket = this.request.params.Bucket;\n    upload.callback(err, data);\n  },\n\n  /**\n   * @api private\n   */\n  progress: function progress(info) {\n    var upload = this._managedUpload;\n    if (this.operation === 'putObject') {\n      info.part = 1;\n      info.key = this.params.Key;\n    } else {\n      upload.totalUploadedBytes += info.loaded - this._lastUploadedBytes;\n      this._lastUploadedBytes = info.loaded;\n      info = {\n        loaded: upload.totalUploadedBytes,\n        total: upload.totalBytes,\n        part: this.params.PartNumber,\n        key: this.params.Key\n      };\n    }\n    upload.emit('httpUploadProgress', [info]);\n  }\n});\n\nAWS.util.mixin(AWS.S3.ManagedUpload, AWS.SequentialExecutor);\n\n/**\n * @api private\n */\nAWS.S3.ManagedUpload.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n  this.prototype.promise = AWS.util.promisifyMethod('send', PromiseDependency);\n};\n\n/**\n * @api private\n */\nAWS.S3.ManagedUpload.deletePromisesFromClass = function deletePromisesFromClass() {\n  delete this.prototype.promise;\n};\n\nAWS.util.addPromises(AWS.S3.ManagedUpload);\n\n/**\n * @api private\n */\nmodule.exports = AWS.S3.ManagedUpload;\n","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n","'use strict';\n\nvar isAbsoluteURL = require('../helpers/isAbsoluteURL');\nvar combineURLs = require('../helpers/combineURLs');\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","require('../polly/presigner');\n","var AWS = require('../core');\nvar rest = AWS.Protocol.Rest;\n\n/**\n * A presigner object can be used to generate presigned urls for the Polly service.\n */\nAWS.Polly.Presigner = AWS.util.inherit({\n    /**\n     * Creates a presigner object with a set of configuration options.\n     *\n     * @option options params [map] An optional map of parameters to bind to every\n     *   request sent by this service object.\n     * @option options service [AWS.Polly] An optional pre-configured instance\n     *  of the AWS.Polly service object to use for requests. The object may\n     *  bound parameters used by the presigner.\n     * @see AWS.Polly.constructor\n     */\n    constructor: function Signer(options) {\n        options = options || {};\n        this.options = options;\n        this.service = options.service;\n        this.bindServiceObject(options);\n        this._operations = {};\n    },\n\n    /**\n     * @api private\n     */\n    bindServiceObject: function bindServiceObject(options) {\n        options = options || {};\n        if (!this.service) {\n            this.service = new AWS.Polly(options);\n        } else {\n            var config = AWS.util.copy(this.service.config);\n            this.service = new this.service.constructor.__super__(config);\n            this.service.config.params = AWS.util.merge(this.service.config.params || {}, options.params);\n        }\n    },\n\n    /**\n     * @api private\n     */\n    modifyInputMembers: function modifyInputMembers(input) {\n        // make copies of the input so we don't overwrite the api\n        // need to be careful to copy anything we access/modify\n        var modifiedInput = AWS.util.copy(input);\n        modifiedInput.members = AWS.util.copy(input.members);\n        AWS.util.each(input.members, function(name, member) {\n            modifiedInput.members[name] = AWS.util.copy(member);\n            // update location and locationName\n            if (!member.location || member.location === 'body') {\n                modifiedInput.members[name].location = 'querystring';\n                modifiedInput.members[name].locationName = name;\n            }\n        });\n        return modifiedInput;\n    },\n\n    /**\n     * @api private\n     */\n    convertPostToGet: function convertPostToGet(req) {\n        // convert method\n        req.httpRequest.method = 'GET';\n\n        var operation = req.service.api.operations[req.operation];\n        // get cached operation input first\n        var input = this._operations[req.operation];\n        if (!input) {\n            // modify the original input\n            this._operations[req.operation] = input = this.modifyInputMembers(operation.input);\n        }\n\n        var uri = rest.generateURI(req.httpRequest.endpoint.path, operation.httpPath, input, req.params);\n\n        req.httpRequest.path = uri;\n        req.httpRequest.body = '';\n\n        // don't need these headers on a GET request\n        delete req.httpRequest.headers['Content-Length'];\n        delete req.httpRequest.headers['Content-Type'];\n    },\n\n    /**\n     * @overload getSynthesizeSpeechUrl(params = {}, [expires = 3600], [callback])\n     *   Generate a presigned url for {AWS.Polly.synthesizeSpeech}.\n     *   @note You must ensure that you have static or previously resolved\n     *     credentials if you call this method synchronously (with no callback),\n     *     otherwise it may not properly sign the request. If you cannot guarantee\n     *     this (you are using an asynchronous credential provider, i.e., EC2\n     *     IAM roles), you should always call this method with an asynchronous\n     *     callback.\n     *   @param params [map] parameters to pass to the operation. See the {AWS.Polly.synthesizeSpeech}\n     *     operation for the expected operation parameters.\n     *   @param expires [Integer] (3600) the number of seconds to expire the pre-signed URL operation in.\n     *     Defaults to 1 hour.\n     *   @return [string] if called synchronously (with no callback), returns the signed URL.\n     *   @return [null] nothing is returned if a callback is provided.\n     *   @callback callback function (err, url)\n     *     If a callback is supplied, it is called when a signed URL has been generated.\n     *     @param err [Error] the error object returned from the presigner.\n     *     @param url [String] the signed URL.\n     *   @see AWS.Polly.synthesizeSpeech\n     */\n    getSynthesizeSpeechUrl: function getSynthesizeSpeechUrl(params, expires, callback) {\n        var self = this;\n        var request = this.service.makeRequest('synthesizeSpeech', params);\n        // remove existing build listeners\n        request.removeAllListeners('build');\n        request.on('build', function(req) {\n            self.convertPostToGet(req);\n        });\n        return request.presign(expires, callback);\n    }\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar HeaderMarshaller_1 = require(\"./HeaderMarshaller\");\nvar splitMessage_1 = require(\"./splitMessage\");\nvar crc32_1 = require(\"@aws-crypto/crc32\");\n/**\n * A marshaller that can convert binary-packed event stream messages into\n * JavaScript objects and back again into their binary format.\n */\nvar EventStreamMarshaller = /** @class */ (function () {\n    function EventStreamMarshaller(toUtf8, fromUtf8) {\n        this.headerMarshaller = new HeaderMarshaller_1.HeaderMarshaller(toUtf8, fromUtf8);\n    }\n    /**\n     * Convert a structured JavaScript object with tagged headers into a binary\n     * event stream message.\n     */\n    EventStreamMarshaller.prototype.marshall = function (_a) {\n        var rawHeaders = _a.headers, body = _a.body;\n        var headers = this.headerMarshaller.format(rawHeaders);\n        var length = headers.byteLength + body.byteLength + 16;\n        var out = new Uint8Array(length);\n        var view = new DataView(out.buffer, out.byteOffset, out.byteLength);\n        var checksum = new crc32_1.Crc32;\n        // Format message\n        view.setUint32(0, length, false);\n        view.setUint32(4, headers.byteLength, false);\n        view.setUint32(8, checksum.update(out.subarray(0, 8)).digest(), false);\n        out.set(headers, 12);\n        out.set(body, headers.byteLength + 12);\n        // Write trailing message checksum\n        view.setUint32(length - 4, checksum.update(out.subarray(8, length - 4)).digest(), false);\n        return out;\n    };\n    /**\n     * Convert a binary event stream message into a JavaScript object with an\n     * opaque, binary body and tagged, parsed headers.\n     */\n    EventStreamMarshaller.prototype.unmarshall = function (message) {\n        var _a = splitMessage_1.splitMessage(message), headers = _a.headers, body = _a.body;\n        return { headers: this.headerMarshaller.parse(headers), body: body };\n    };\n    return EventStreamMarshaller;\n}());\nexports.EventStreamMarshaller = EventStreamMarshaller;\n//# sourceMappingURL=EventStreamMarshaller.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar util_hex_encoding_1 = require(\"@aws-sdk/util-hex-encoding\");\nvar Int64_1 = require(\"./Int64\");\n/**\n * @internal\n */\nvar HeaderMarshaller = /** @class */ (function () {\n    function HeaderMarshaller(toUtf8, fromUtf8) {\n        this.toUtf8 = toUtf8;\n        this.fromUtf8 = fromUtf8;\n    }\n    HeaderMarshaller.prototype.format = function (headers) {\n        var e_1, _a, e_2, _b;\n        var chunks = [];\n        try {\n            for (var _c = tslib_1.__values(Object.keys(headers)), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var headerName = _d.value;\n                var bytes = this.fromUtf8(headerName);\n                chunks.push(Uint8Array.from([bytes.byteLength]), bytes, this.formatHeaderValue(headers[headerName]));\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        var out = new Uint8Array(chunks.reduce(function (carry, bytes) { return carry + bytes.byteLength; }, 0));\n        var position = 0;\n        try {\n            for (var chunks_1 = tslib_1.__values(chunks), chunks_1_1 = chunks_1.next(); !chunks_1_1.done; chunks_1_1 = chunks_1.next()) {\n                var chunk = chunks_1_1.value;\n                out.set(chunk, position);\n                position += chunk.byteLength;\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (chunks_1_1 && !chunks_1_1.done && (_b = chunks_1.return)) _b.call(chunks_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return out;\n    };\n    HeaderMarshaller.prototype.formatHeaderValue = function (header) {\n        switch (header.type) {\n            case 'boolean':\n                return Uint8Array.from([\n                    header.value\n                        ? 0 /* boolTrue */\n                        : 1 /* boolFalse */,\n                ]);\n            case 'byte':\n                return Uint8Array.from([\n                    2 /* byte */,\n                    header.value,\n                ]);\n            case 'short':\n                var shortView = new DataView(new ArrayBuffer(3));\n                shortView.setUint8(0, 3 /* short */);\n                shortView.setInt16(1, header.value, false);\n                return new Uint8Array(shortView.buffer);\n            case 'integer':\n                var intView = new DataView(new ArrayBuffer(5));\n                intView.setUint8(0, 4 /* integer */);\n                intView.setInt32(1, header.value, false);\n                return new Uint8Array(intView.buffer);\n            case 'long':\n                var longBytes = new Uint8Array(9);\n                longBytes[0] = 5 /* long */;\n                longBytes.set(header.value.bytes, 1);\n                return longBytes;\n            case 'binary':\n                var binView = new DataView(new ArrayBuffer(3 + header.value.byteLength));\n                binView.setUint8(0, 6 /* byteArray */);\n                binView.setUint16(1, header.value.byteLength, false);\n                var binBytes = new Uint8Array(binView.buffer);\n                binBytes.set(header.value, 3);\n                return binBytes;\n            case 'string':\n                var utf8Bytes = this.fromUtf8(header.value);\n                var strView = new DataView(new ArrayBuffer(3 + utf8Bytes.byteLength));\n                strView.setUint8(0, 7 /* string */);\n                strView.setUint16(1, utf8Bytes.byteLength, false);\n                var strBytes = new Uint8Array(strView.buffer);\n                strBytes.set(utf8Bytes, 3);\n                return strBytes;\n            case 'timestamp':\n                var tsBytes = new Uint8Array(9);\n                tsBytes[0] = 8 /* timestamp */;\n                tsBytes.set(Int64_1.Int64.fromNumber(header.value.valueOf()).bytes, 1);\n                return tsBytes;\n            case 'uuid':\n                if (!UUID_PATTERN.test(header.value)) {\n                    throw new Error(\"Invalid UUID received: \" + header.value);\n                }\n                var uuidBytes = new Uint8Array(17);\n                uuidBytes[0] = 9 /* uuid */;\n                uuidBytes.set(util_hex_encoding_1.fromHex(header.value.replace(/\\-/g, '')), 1);\n                return uuidBytes;\n        }\n    };\n    HeaderMarshaller.prototype.parse = function (headers) {\n        var out = {};\n        var position = 0;\n        while (position < headers.byteLength) {\n            var nameLength = headers.getUint8(position++);\n            var name = this.toUtf8(new Uint8Array(headers.buffer, headers.byteOffset + position, nameLength));\n            position += nameLength;\n            switch (headers.getUint8(position++)) {\n                case 0 /* boolTrue */:\n                    out[name] = {\n                        type: BOOLEAN_TAG,\n                        value: true,\n                    };\n                    break;\n                case 1 /* boolFalse */:\n                    out[name] = {\n                        type: BOOLEAN_TAG,\n                        value: false,\n                    };\n                    break;\n                case 2 /* byte */:\n                    out[name] = {\n                        type: BYTE_TAG,\n                        value: headers.getInt8(position++),\n                    };\n                    break;\n                case 3 /* short */:\n                    out[name] = {\n                        type: SHORT_TAG,\n                        value: headers.getInt16(position, false),\n                    };\n                    position += 2;\n                    break;\n                case 4 /* integer */:\n                    out[name] = {\n                        type: INT_TAG,\n                        value: headers.getInt32(position, false),\n                    };\n                    position += 4;\n                    break;\n                case 5 /* long */:\n                    out[name] = {\n                        type: LONG_TAG,\n                        value: new Int64_1.Int64(new Uint8Array(headers.buffer, headers.byteOffset + position, 8))\n                    };\n                    position += 8;\n                    break;\n                case 6 /* byteArray */:\n                    var binaryLength = headers.getUint16(position, false);\n                    position += 2;\n                    out[name] = {\n                        type: BINARY_TAG,\n                        value: new Uint8Array(headers.buffer, headers.byteOffset + position, binaryLength),\n                    };\n                    position += binaryLength;\n                    break;\n                case 7 /* string */:\n                    var stringLength = headers.getUint16(position, false);\n                    position += 2;\n                    out[name] = {\n                        type: STRING_TAG,\n                        value: this.toUtf8(new Uint8Array(headers.buffer, headers.byteOffset + position, stringLength)),\n                    };\n                    position += stringLength;\n                    break;\n                case 8 /* timestamp */:\n                    out[name] = {\n                        type: TIMESTAMP_TAG,\n                        value: new Date(new Int64_1.Int64(new Uint8Array(headers.buffer, headers.byteOffset + position, 8)).valueOf()),\n                    };\n                    position += 8;\n                    break;\n                case 9 /* uuid */:\n                    var uuidBytes = new Uint8Array(headers.buffer, headers.byteOffset + position, 16);\n                    position += 16;\n                    out[name] = {\n                        type: UUID_TAG,\n                        value: util_hex_encoding_1.toHex(uuidBytes.subarray(0, 4)) + \"-\" + util_hex_encoding_1.toHex(uuidBytes.subarray(4, 6)) + \"-\" + util_hex_encoding_1.toHex(uuidBytes.subarray(6, 8)) + \"-\" + util_hex_encoding_1.toHex(uuidBytes.subarray(8, 10)) + \"-\" + util_hex_encoding_1.toHex(uuidBytes.subarray(10)),\n                    };\n                    break;\n                default:\n                    throw new Error(\"Unrecognized header type tag\");\n            }\n        }\n        return out;\n    };\n    return HeaderMarshaller;\n}());\nexports.HeaderMarshaller = HeaderMarshaller;\n;\nvar BOOLEAN_TAG = 'boolean';\nvar BYTE_TAG = 'byte';\nvar SHORT_TAG = 'short';\nvar INT_TAG = 'integer';\nvar LONG_TAG = 'long';\nvar BINARY_TAG = 'binary';\nvar STRING_TAG = 'string';\nvar TIMESTAMP_TAG = 'timestamp';\nvar UUID_TAG = 'uuid';\nvar UUID_PATTERN = /^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;\n//# sourceMappingURL=HeaderMarshaller.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar crc32_1 = require(\"@aws-crypto/crc32\");\n// All prelude components are unsigned, 32-bit integers\nvar PRELUDE_MEMBER_LENGTH = 4;\n// The prelude consists of two components\nvar PRELUDE_LENGTH = PRELUDE_MEMBER_LENGTH * 2;\n// Checksums are always CRC32 hashes.\nvar CHECKSUM_LENGTH = 4;\n// Messages must include a full prelude, a prelude checksum, and a message checksum\nvar MINIMUM_MESSAGE_LENGTH = PRELUDE_LENGTH + CHECKSUM_LENGTH * 2;\n/**\n * @internal\n */\nfunction splitMessage(_a) {\n    var byteLength = _a.byteLength, byteOffset = _a.byteOffset, buffer = _a.buffer;\n    if (byteLength < MINIMUM_MESSAGE_LENGTH) {\n        throw new Error('Provided message too short to accommodate event stream message overhead');\n    }\n    var view = new DataView(buffer, byteOffset, byteLength);\n    var messageLength = view.getUint32(0, false);\n    if (byteLength !== messageLength) {\n        throw new Error('Reported message length does not match received message length');\n    }\n    var headerLength = view.getUint32(PRELUDE_MEMBER_LENGTH, false);\n    var expectedPreludeChecksum = view.getUint32(PRELUDE_LENGTH, false);\n    var expectedMessageChecksum = view.getUint32(byteLength - CHECKSUM_LENGTH, false);\n    var checksummer = (new crc32_1.Crc32).update(new Uint8Array(buffer, byteOffset, PRELUDE_LENGTH));\n    if (expectedPreludeChecksum !== checksummer.digest()) {\n        throw new Error(\"The prelude checksum specified in the message (\" + expectedPreludeChecksum + \") does not match the calculated CRC32 checksum (\" + checksummer.digest() + \")\");\n    }\n    checksummer.update(new Uint8Array(buffer, byteOffset + PRELUDE_LENGTH, byteLength - (PRELUDE_LENGTH + CHECKSUM_LENGTH)));\n    if (expectedMessageChecksum !== checksummer.digest()) {\n        throw new Error(\"The message checksum (\" + checksummer.digest() + \") did not match the expected value of \" + expectedMessageChecksum);\n    }\n    return {\n        headers: new DataView(buffer, byteOffset + PRELUDE_LENGTH + CHECKSUM_LENGTH, headerLength),\n        body: new Uint8Array(buffer, byteOffset + PRELUDE_LENGTH + CHECKSUM_LENGTH + headerLength, messageLength - headerLength - (PRELUDE_LENGTH + CHECKSUM_LENGTH + CHECKSUM_LENGTH))\n    };\n}\nexports.splitMessage = splitMessage;\n//# sourceMappingURL=splitMessage.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar buffer_1 = require(\"buffer\");\nvar is_array_buffer_1 = require(\"@aws-sdk/is-array-buffer\");\nfunction fromArrayBuffer(input, offset, length) {\n    if (offset === void 0) { offset = 0; }\n    if (length === void 0) { length = input.byteLength - offset; }\n    if (!is_array_buffer_1.isArrayBuffer(input)) {\n        throw new Error('argument passed to fromArrayBuffer was not an ArrayBuffer');\n    }\n    if (typeof buffer_1.Buffer.from === 'function' && buffer_1.Buffer.from !== Uint8Array.from) {\n        return buffer_1.Buffer.from(input, offset, length);\n    }\n    // Any version of node that supports the optional offset and length\n    // parameters, which were added in Node 6.0.0, will support Buffer.from and\n    // have already returned. Throw if offset is not 0 or if length differs from\n    // the underlying buffer's length.\n    if (offset !== 0 || length !== input.byteLength) {\n        throw new Error(\"Unable to convert TypedArray to Buffer in Node \" + process.version);\n    }\n    return new buffer_1.Buffer(input);\n}\nexports.fromArrayBuffer = fromArrayBuffer;\nfunction fromString(input, encoding) {\n    if (typeof input !== 'string') {\n        throw new Error('argument passed to fromString was not a string');\n    }\n    if (typeof buffer_1.Buffer.from === 'function' && buffer_1.Buffer.from !== Uint8Array.from) {\n        return buffer_1.Buffer.from(input, encoding);\n    }\n    return new buffer_1.Buffer(input, encoding);\n}\nexports.fromString = fromString;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isArrayBuffer(arg) {\n    return (typeof ArrayBuffer === 'function' && arg instanceof ArrayBuffer)\n        || Object.prototype.toString.call(arg) === '[object ArrayBuffer]';\n}\nexports.isArrayBuffer = isArrayBuffer;\n//# sourceMappingURL=index.js.map","require('../lib/node_loader');\nmodule.exports = {\n  ACM: require('./acm'),\n  APIGateway: require('./apigateway'),\n  ApplicationAutoScaling: require('./applicationautoscaling'),\n  AutoScaling: require('./autoscaling'),\n  CloudFormation: require('./cloudformation'),\n  CloudFront: require('./cloudfront'),\n  CloudHSM: require('./cloudhsm'),\n  CloudTrail: require('./cloudtrail'),\n  CloudWatch: require('./cloudwatch'),\n  CloudWatchEvents: require('./cloudwatchevents'),\n  CloudWatchLogs: require('./cloudwatchlogs'),\n  CodeBuild: require('./codebuild'),\n  CodeCommit: require('./codecommit'),\n  CodeDeploy: require('./codedeploy'),\n  CodePipeline: require('./codepipeline'),\n  CognitoIdentity: require('./cognitoidentity'),\n  CognitoIdentityServiceProvider: require('./cognitoidentityserviceprovider'),\n  CognitoSync: require('./cognitosync'),\n  ConfigService: require('./configservice'),\n  CUR: require('./cur'),\n  DeviceFarm: require('./devicefarm'),\n  DirectConnect: require('./directconnect'),\n  DynamoDB: require('./dynamodb'),\n  DynamoDBStreams: require('./dynamodbstreams'),\n  EC2: require('./ec2'),\n  ECR: require('./ecr'),\n  ECS: require('./ecs'),\n  EFS: require('./efs'),\n  ElastiCache: require('./elasticache'),\n  ElasticBeanstalk: require('./elasticbeanstalk'),\n  ELB: require('./elb'),\n  ELBv2: require('./elbv2'),\n  EMR: require('./emr'),\n  ElasticTranscoder: require('./elastictranscoder'),\n  Firehose: require('./firehose'),\n  GameLift: require('./gamelift'),\n  IAM: require('./iam'),\n  Inspector: require('./inspector'),\n  Iot: require('./iot'),\n  IotData: require('./iotdata'),\n  Kinesis: require('./kinesis'),\n  KMS: require('./kms'),\n  Lambda: require('./lambda'),\n  LexRuntime: require('./lexruntime'),\n  MachineLearning: require('./machinelearning'),\n  MarketplaceCommerceAnalytics: require('./marketplacecommerceanalytics'),\n  MTurk: require('./mturk'),\n  MobileAnalytics: require('./mobileanalytics'),\n  OpsWorks: require('./opsworks'),\n  Polly: require('./polly'),\n  RDS: require('./rds'),\n  Redshift: require('./redshift'),\n  Rekognition: require('./rekognition'),\n  Route53: require('./route53'),\n  Route53Domains: require('./route53domains'),\n  S3: require('./s3'),\n  ServiceCatalog: require('./servicecatalog'),\n  SES: require('./ses'),\n  SNS: require('./sns'),\n  SQS: require('./sqs'),\n  SSM: require('./ssm'),\n  StorageGateway: require('./storagegateway'),\n  STS: require('./sts'),\n  WAF: require('./waf'),\n  WorkDocs: require('./workdocs'),\n  LexModelBuildingService: require('./lexmodelbuildingservice'),\n  Pricing: require('./pricing'),\n  CostExplorer: require('./costexplorer'),\n  MediaStoreData: require('./mediastoredata'),\n  Comprehend: require('./comprehend'),\n  KinesisVideoArchivedMedia: require('./kinesisvideoarchivedmedia'),\n  KinesisVideoMedia: require('./kinesisvideomedia'),\n  KinesisVideo: require('./kinesisvideo'),\n  Translate: require('./translate'),\n  ResourceGroups: require('./resourcegroups'),\n  SecretsManager: require('./secretsmanager'),\n  ComprehendMedical: require('./comprehendmedical'),\n  Personalize: require('./personalize'),\n  PersonalizeEvents: require('./personalizeevents'),\n  PersonalizeRuntime: require('./personalizeruntime')\n};","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['acm'] = {};\nAWS.ACM = Service.defineService('acm', ['2015-12-08']);\nObject.defineProperty(apiLoader.services['acm'], '2015-12-08', {\n  get: function get() {\n    var model = require('../apis/acm-2015-12-08.min.json');\n    model.paginators = require('../apis/acm-2015-12-08.paginators.json').pagination;\n    model.waiters = require('../apis/acm-2015-12-08.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.ACM;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['apigateway'] = {};\nAWS.APIGateway = Service.defineService('apigateway', ['2015-07-09']);\nrequire('../lib/services/apigateway');\nObject.defineProperty(apiLoader.services['apigateway'], '2015-07-09', {\n  get: function get() {\n    var model = require('../apis/apigateway-2015-07-09.min.json');\n    model.paginators = require('../apis/apigateway-2015-07-09.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.APIGateway;\n","var AWS = require('../core');\n\nAWS.util.update(AWS.APIGateway.prototype, {\n/**\n * Sets the Accept header to application/json.\n *\n * @api private\n */\n  setAcceptHeader: function setAcceptHeader(req) {\n    var httpRequest = req.httpRequest;\n    if (!httpRequest.headers.Accept) {\n      httpRequest.headers['Accept'] = 'application/json';\n    }\n  },\n\n  /**\n   * @api private\n   */\n  setupRequestListeners: function setupRequestListeners(request) {\n    request.addListener('build', this.setAcceptHeader);\n    if (request.operation === 'getExport') {\n      var params = request.params || {};\n      if (params.exportType === 'swagger') {\n        request.addListener('extractData', AWS.util.convertPayloadToString);\n      }\n    }\n  }\n});\n\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['applicationautoscaling'] = {};\nAWS.ApplicationAutoScaling = Service.defineService('applicationautoscaling', ['2016-02-06']);\nObject.defineProperty(apiLoader.services['applicationautoscaling'], '2016-02-06', {\n  get: function get() {\n    var model = require('../apis/application-autoscaling-2016-02-06.min.json');\n    model.paginators = require('../apis/application-autoscaling-2016-02-06.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.ApplicationAutoScaling;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['autoscaling'] = {};\nAWS.AutoScaling = Service.defineService('autoscaling', ['2011-01-01']);\nObject.defineProperty(apiLoader.services['autoscaling'], '2011-01-01', {\n  get: function get() {\n    var model = require('../apis/autoscaling-2011-01-01.min.json');\n    model.paginators = require('../apis/autoscaling-2011-01-01.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.AutoScaling;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['cloudformation'] = {};\nAWS.CloudFormation = Service.defineService('cloudformation', ['2010-05-15']);\nObject.defineProperty(apiLoader.services['cloudformation'], '2010-05-15', {\n  get: function get() {\n    var model = require('../apis/cloudformation-2010-05-15.min.json');\n    model.paginators = require('../apis/cloudformation-2010-05-15.paginators.json').pagination;\n    model.waiters = require('../apis/cloudformation-2010-05-15.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.CloudFormation;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['cloudfront'] = {};\nAWS.CloudFront = Service.defineService('cloudfront', ['2013-05-12*', '2013-11-11*', '2014-05-31*', '2014-10-21*', '2014-11-06*', '2015-04-17*', '2015-07-27*', '2015-09-17*', '2016-01-13*', '2016-01-28*', '2016-08-01*', '2016-08-20*', '2016-09-07*', '2016-09-29*', '2016-11-25', '2016-11-25*', '2017-03-25', '2017-03-25*', '2017-10-30', '2017-10-30*', '2018-06-18', '2018-06-18*', '2018-11-05', '2018-11-05*', '2019-03-26']);\nrequire('../lib/services/cloudfront');\nObject.defineProperty(apiLoader.services['cloudfront'], '2016-11-25', {\n  get: function get() {\n    var model = require('../apis/cloudfront-2016-11-25.min.json');\n    model.paginators = require('../apis/cloudfront-2016-11-25.paginators.json').pagination;\n    model.waiters = require('../apis/cloudfront-2016-11-25.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\nObject.defineProperty(apiLoader.services['cloudfront'], '2017-03-25', {\n  get: function get() {\n    var model = require('../apis/cloudfront-2017-03-25.min.json');\n    model.paginators = require('../apis/cloudfront-2017-03-25.paginators.json').pagination;\n    model.waiters = require('../apis/cloudfront-2017-03-25.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\nObject.defineProperty(apiLoader.services['cloudfront'], '2017-10-30', {\n  get: function get() {\n    var model = require('../apis/cloudfront-2017-10-30.min.json');\n    model.paginators = require('../apis/cloudfront-2017-10-30.paginators.json').pagination;\n    model.waiters = require('../apis/cloudfront-2017-10-30.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\nObject.defineProperty(apiLoader.services['cloudfront'], '2018-06-18', {\n  get: function get() {\n    var model = require('../apis/cloudfront-2018-06-18.min.json');\n    model.paginators = require('../apis/cloudfront-2018-06-18.paginators.json').pagination;\n    model.waiters = require('../apis/cloudfront-2018-06-18.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\nObject.defineProperty(apiLoader.services['cloudfront'], '2018-11-05', {\n  get: function get() {\n    var model = require('../apis/cloudfront-2018-11-05.min.json');\n    model.paginators = require('../apis/cloudfront-2018-11-05.paginators.json').pagination;\n    model.waiters = require('../apis/cloudfront-2018-11-05.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\nObject.defineProperty(apiLoader.services['cloudfront'], '2019-03-26', {\n  get: function get() {\n    var model = require('../apis/cloudfront-2019-03-26.min.json');\n    model.paginators = require('../apis/cloudfront-2019-03-26.paginators.json').pagination;\n    model.waiters = require('../apis/cloudfront-2019-03-26.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.CloudFront;\n","var AWS = require('../core');\n\n// pull in CloudFront signer\nrequire('../cloudfront/signer');\n\nAWS.util.update(AWS.CloudFront.prototype, {\n\n  setupRequestListeners: function setupRequestListeners(request) {\n    request.addListener('extractData', AWS.util.hoistPayloadMember);\n  }\n\n});\n","var AWS = require('../core'),\n    url = AWS.util.url,\n    crypto = AWS.util.crypto.lib,\n    base64Encode = AWS.util.base64.encode,\n    inherit = AWS.util.inherit;\n\nvar queryEncode = function (string) {\n    var replacements = {\n        '+': '-',\n        '=': '_',\n        '/': '~'\n    };\n    return string.replace(/[\\+=\\/]/g, function (match) {\n        return replacements[match];\n    });\n};\n\nvar signPolicy = function (policy, privateKey) {\n    var sign = crypto.createSign('RSA-SHA1');\n    sign.write(policy);\n    return queryEncode(sign.sign(privateKey, 'base64'));\n};\n\nvar signWithCannedPolicy = function (url, expires, keyPairId, privateKey) {\n    var policy = JSON.stringify({\n        Statement: [\n            {\n                Resource: url,\n                Condition: { DateLessThan: { 'AWS:EpochTime': expires } }\n            }\n        ]\n    });\n\n    return {\n        Expires: expires,\n        'Key-Pair-Id': keyPairId,\n        Signature: signPolicy(policy.toString(), privateKey)\n    };\n};\n\nvar signWithCustomPolicy = function (policy, keyPairId, privateKey) {\n    policy = policy.replace(/\\s/mg, '');\n\n    return {\n        Policy: queryEncode(base64Encode(policy)),\n        'Key-Pair-Id': keyPairId,\n        Signature: signPolicy(policy, privateKey)\n    };\n};\n\nvar determineScheme = function (url) {\n    var parts = url.split('://');\n    if (parts.length < 2) {\n        throw new Error('Invalid URL.');\n    }\n\n    return parts[0].replace('*', '');\n};\n\nvar getRtmpUrl = function (rtmpUrl) {\n    var parsed = url.parse(rtmpUrl);\n    return parsed.path.replace(/^\\//, '') + (parsed.hash || '');\n};\n\nvar getResource = function (url) {\n    switch (determineScheme(url)) {\n        case 'http':\n        case 'https':\n            return url;\n        case 'rtmp':\n            return getRtmpUrl(url);\n        default:\n            throw new Error('Invalid URI scheme. Scheme must be one of'\n                + ' http, https, or rtmp');\n    }\n};\n\nvar handleError = function (err, callback) {\n    if (!callback || typeof callback !== 'function') {\n        throw err;\n    }\n\n    callback(err);\n};\n\nvar handleSuccess = function (result, callback) {\n    if (!callback || typeof callback !== 'function') {\n        return result;\n    }\n\n    callback(null, result);\n};\n\nAWS.CloudFront.Signer = inherit({\n    /**\n     * A signer object can be used to generate signed URLs and cookies for granting\n     * access to content on restricted CloudFront distributions.\n     *\n     * @see http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/PrivateContent.html\n     *\n     * @param keyPairId [String]    (Required) The ID of the CloudFront key pair\n     *                              being used.\n     * @param privateKey [String]   (Required) A private key in RSA format.\n     */\n    constructor: function Signer(keyPairId, privateKey) {\n        if (keyPairId === void 0 || privateKey === void 0) {\n            throw new Error('A key pair ID and private key are required');\n        }\n\n        this.keyPairId = keyPairId;\n        this.privateKey = privateKey;\n    },\n\n    /**\n     * Create a signed Amazon CloudFront Cookie.\n     *\n     * @param options [Object]            The options to create a signed cookie.\n     * @option options url [String]     The URL to which the signature will grant\n     *                                  access. Required unless you pass in a full\n     *                                  policy.\n     * @option options expires [Number] A Unix UTC timestamp indicating when the\n     *                                  signature should expire. Required unless you\n     *                                  pass in a full policy.\n     * @option options policy [String]  A CloudFront JSON policy. Required unless\n     *                                  you pass in a url and an expiry time.\n     *\n     * @param cb [Function] if a callback is provided, this function will\n     *   pass the hash as the second parameter (after the error parameter) to\n     *   the callback function.\n     *\n     * @return [Object] if called synchronously (with no callback), returns the\n     *   signed cookie parameters.\n     * @return [null] nothing is returned if a callback is provided.\n     */\n    getSignedCookie: function (options, cb) {\n        var signatureHash = 'policy' in options\n            ? signWithCustomPolicy(options.policy, this.keyPairId, this.privateKey)\n            : signWithCannedPolicy(options.url, options.expires, this.keyPairId, this.privateKey);\n\n        var cookieHash = {};\n        for (var key in signatureHash) {\n            if (Object.prototype.hasOwnProperty.call(signatureHash, key)) {\n                cookieHash['CloudFront-' + key] = signatureHash[key];\n            }\n        }\n\n        return handleSuccess(cookieHash, cb);\n    },\n\n    /**\n     * Create a signed Amazon CloudFront URL.\n     *\n     * Keep in mind that URLs meant for use in media/flash players may have\n     * different requirements for URL formats (e.g. some require that the\n     * extension be removed, some require the file name to be prefixed\n     * - mp4:<path>, some require you to add \"/cfx/st\" into your URL).\n     *\n     * @param options [Object]          The options to create a signed URL.\n     * @option options url [String]     The URL to which the signature will grant\n     *                                  access. Any query params included with\n     *                                  the URL should be encoded. Required.\n     * @option options expires [Number] A Unix UTC timestamp indicating when the\n     *                                  signature should expire. Required unless you\n     *                                  pass in a full policy.\n     * @option options policy [String]  A CloudFront JSON policy. Required unless\n     *                                  you pass in a url and an expiry time.\n     *\n     * @param cb [Function] if a callback is provided, this function will\n     *   pass the URL as the second parameter (after the error parameter) to\n     *   the callback function.\n     *\n     * @return [String] if called synchronously (with no callback), returns the\n     *   signed URL.\n     * @return [null] nothing is returned if a callback is provided.\n     */\n    getSignedUrl: function (options, cb) {\n        try {\n            var resource = getResource(options.url);\n        } catch (err) {\n            return handleError(err, cb);\n        }\n\n        var parsedUrl = url.parse(options.url, true),\n            signatureHash = Object.prototype.hasOwnProperty.call(options, 'policy')\n                ? signWithCustomPolicy(options.policy, this.keyPairId, this.privateKey)\n                : signWithCannedPolicy(resource, options.expires, this.keyPairId, this.privateKey);\n\n        parsedUrl.search = null;\n        for (var key in signatureHash) {\n            if (Object.prototype.hasOwnProperty.call(signatureHash, key)) {\n                parsedUrl.query[key] = signatureHash[key];\n            }\n        }\n\n        try {\n            var signedUrl = determineScheme(options.url) === 'rtmp'\n                    ? getRtmpUrl(url.format(parsedUrl))\n                    : url.format(parsedUrl);\n        } catch (err) {\n            return handleError(err, cb);\n        }\n\n        return handleSuccess(signedUrl, cb);\n    }\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.CloudFront.Signer;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['cloudhsm'] = {};\nAWS.CloudHSM = Service.defineService('cloudhsm', ['2014-05-30']);\nObject.defineProperty(apiLoader.services['cloudhsm'], '2014-05-30', {\n  get: function get() {\n    var model = require('../apis/cloudhsm-2014-05-30.min.json');\n    model.paginators = require('../apis/cloudhsm-2014-05-30.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.CloudHSM;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['cloudtrail'] = {};\nAWS.CloudTrail = Service.defineService('cloudtrail', ['2013-11-01']);\nObject.defineProperty(apiLoader.services['cloudtrail'], '2013-11-01', {\n  get: function get() {\n    var model = require('../apis/cloudtrail-2013-11-01.min.json');\n    model.paginators = require('../apis/cloudtrail-2013-11-01.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.CloudTrail;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['cloudwatch'] = {};\nAWS.CloudWatch = Service.defineService('cloudwatch', ['2010-08-01']);\nObject.defineProperty(apiLoader.services['cloudwatch'], '2010-08-01', {\n  get: function get() {\n    var model = require('../apis/monitoring-2010-08-01.min.json');\n    model.paginators = require('../apis/monitoring-2010-08-01.paginators.json').pagination;\n    model.waiters = require('../apis/monitoring-2010-08-01.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.CloudWatch;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['cloudwatchevents'] = {};\nAWS.CloudWatchEvents = Service.defineService('cloudwatchevents', ['2014-02-03*', '2015-10-07']);\nObject.defineProperty(apiLoader.services['cloudwatchevents'], '2015-10-07', {\n  get: function get() {\n    var model = require('../apis/events-2015-10-07.min.json');\n    model.paginators = require('../apis/events-2015-10-07.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.CloudWatchEvents;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['cloudwatchlogs'] = {};\nAWS.CloudWatchLogs = Service.defineService('cloudwatchlogs', ['2014-03-28']);\nObject.defineProperty(apiLoader.services['cloudwatchlogs'], '2014-03-28', {\n  get: function get() {\n    var model = require('../apis/logs-2014-03-28.min.json');\n    model.paginators = require('../apis/logs-2014-03-28.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.CloudWatchLogs;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['codebuild'] = {};\nAWS.CodeBuild = Service.defineService('codebuild', ['2016-10-06']);\nObject.defineProperty(apiLoader.services['codebuild'], '2016-10-06', {\n  get: function get() {\n    var model = require('../apis/codebuild-2016-10-06.min.json');\n    model.paginators = require('../apis/codebuild-2016-10-06.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.CodeBuild;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['codecommit'] = {};\nAWS.CodeCommit = Service.defineService('codecommit', ['2015-04-13']);\nObject.defineProperty(apiLoader.services['codecommit'], '2015-04-13', {\n  get: function get() {\n    var model = require('../apis/codecommit-2015-04-13.min.json');\n    model.paginators = require('../apis/codecommit-2015-04-13.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.CodeCommit;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['codedeploy'] = {};\nAWS.CodeDeploy = Service.defineService('codedeploy', ['2014-10-06']);\nObject.defineProperty(apiLoader.services['codedeploy'], '2014-10-06', {\n  get: function get() {\n    var model = require('../apis/codedeploy-2014-10-06.min.json');\n    model.paginators = require('../apis/codedeploy-2014-10-06.paginators.json').pagination;\n    model.waiters = require('../apis/codedeploy-2014-10-06.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.CodeDeploy;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['codepipeline'] = {};\nAWS.CodePipeline = Service.defineService('codepipeline', ['2015-07-09']);\nObject.defineProperty(apiLoader.services['codepipeline'], '2015-07-09', {\n  get: function get() {\n    var model = require('../apis/codepipeline-2015-07-09.min.json');\n    model.paginators = require('../apis/codepipeline-2015-07-09.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.CodePipeline;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['cognitoidentityserviceprovider'] = {};\nAWS.CognitoIdentityServiceProvider = Service.defineService('cognitoidentityserviceprovider', ['2016-04-18']);\nObject.defineProperty(apiLoader.services['cognitoidentityserviceprovider'], '2016-04-18', {\n  get: function get() {\n    var model = require('../apis/cognito-idp-2016-04-18.min.json');\n    model.paginators = require('../apis/cognito-idp-2016-04-18.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.CognitoIdentityServiceProvider;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['cognitosync'] = {};\nAWS.CognitoSync = Service.defineService('cognitosync', ['2014-06-30']);\nObject.defineProperty(apiLoader.services['cognitosync'], '2014-06-30', {\n  get: function get() {\n    var model = require('../apis/cognito-sync-2014-06-30.min.json');\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.CognitoSync;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['configservice'] = {};\nAWS.ConfigService = Service.defineService('configservice', ['2014-11-12']);\nObject.defineProperty(apiLoader.services['configservice'], '2014-11-12', {\n  get: function get() {\n    var model = require('../apis/config-2014-11-12.min.json');\n    model.paginators = require('../apis/config-2014-11-12.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.ConfigService;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['cur'] = {};\nAWS.CUR = Service.defineService('cur', ['2017-01-06']);\nObject.defineProperty(apiLoader.services['cur'], '2017-01-06', {\n  get: function get() {\n    var model = require('../apis/cur-2017-01-06.min.json');\n    model.paginators = require('../apis/cur-2017-01-06.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.CUR;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['devicefarm'] = {};\nAWS.DeviceFarm = Service.defineService('devicefarm', ['2015-06-23']);\nObject.defineProperty(apiLoader.services['devicefarm'], '2015-06-23', {\n  get: function get() {\n    var model = require('../apis/devicefarm-2015-06-23.min.json');\n    model.paginators = require('../apis/devicefarm-2015-06-23.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.DeviceFarm;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['directconnect'] = {};\nAWS.DirectConnect = Service.defineService('directconnect', ['2012-10-25']);\nObject.defineProperty(apiLoader.services['directconnect'], '2012-10-25', {\n  get: function get() {\n    var model = require('../apis/directconnect-2012-10-25.min.json');\n    model.paginators = require('../apis/directconnect-2012-10-25.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.DirectConnect;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['dynamodb'] = {};\nAWS.DynamoDB = Service.defineService('dynamodb', ['2011-12-05', '2012-08-10']);\nrequire('../lib/services/dynamodb');\nObject.defineProperty(apiLoader.services['dynamodb'], '2011-12-05', {\n  get: function get() {\n    var model = require('../apis/dynamodb-2011-12-05.min.json');\n    model.paginators = require('../apis/dynamodb-2011-12-05.paginators.json').pagination;\n    model.waiters = require('../apis/dynamodb-2011-12-05.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\nObject.defineProperty(apiLoader.services['dynamodb'], '2012-08-10', {\n  get: function get() {\n    var model = require('../apis/dynamodb-2012-08-10.min.json');\n    model.paginators = require('../apis/dynamodb-2012-08-10.paginators.json').pagination;\n    model.waiters = require('../apis/dynamodb-2012-08-10.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.DynamoDB;\n","var AWS = require('../core');\nrequire('../dynamodb/document_client');\n\nAWS.util.update(AWS.DynamoDB.prototype, {\n  /**\n   * @api private\n   */\n  setupRequestListeners: function setupRequestListeners(request) {\n    if (request.service.config.dynamoDbCrc32) {\n      request.removeListener('extractData', AWS.EventListeners.Json.EXTRACT_DATA);\n      request.addListener('extractData', this.checkCrc32);\n      request.addListener('extractData', AWS.EventListeners.Json.EXTRACT_DATA);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  checkCrc32: function checkCrc32(resp) {\n    if (!resp.httpResponse.streaming && !resp.request.service.crc32IsValid(resp)) {\n      resp.data = null;\n      resp.error = AWS.util.error(new Error(), {\n        code: 'CRC32CheckFailed',\n        message: 'CRC32 integrity check failed',\n        retryable: true\n      });\n      resp.request.haltHandlersOnError();\n      throw (resp.error);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  crc32IsValid: function crc32IsValid(resp) {\n    var crc = resp.httpResponse.headers['x-amz-crc32'];\n    if (!crc) return true; // no (valid) CRC32 header\n    return parseInt(crc, 10) === AWS.util.crypto.crc32(resp.httpResponse.body);\n  },\n\n  /**\n   * @api private\n   */\n  defaultRetryCount: 10,\n\n  /**\n   * @api private\n   */\n  retryDelays: function retryDelays(retryCount) {\n    var retryDelayOptions = AWS.util.copy(this.config.retryDelayOptions);\n\n    if (typeof retryDelayOptions.base !== 'number') {\n        retryDelayOptions.base = 50; // default for dynamodb\n    }\n    var delay = AWS.util.calculateRetryDelay(retryCount, retryDelayOptions);\n    return delay;\n  }\n});\n","var AWS = require('../core');\nvar Translator = require('./translator');\nvar DynamoDBSet = require('./set');\n\n/**\n * The document client simplifies working with items in Amazon DynamoDB\n * by abstracting away the notion of attribute values. This abstraction\n * annotates native JavaScript types supplied as input parameters, as well\n * as converts annotated response data to native JavaScript types.\n *\n * ## Marshalling Input and Unmarshalling Response Data\n *\n * The document client affords developers the use of native JavaScript types\n * instead of `AttributeValue`s to simplify the JavaScript development\n * experience with Amazon DynamoDB. JavaScript objects passed in as parameters\n * are marshalled into `AttributeValue` shapes required by Amazon DynamoDB.\n * Responses from DynamoDB are unmarshalled into plain JavaScript objects\n * by the `DocumentClient`. The `DocumentClient`, does not accept\n * `AttributeValue`s in favor of native JavaScript types.\n *\n * |                             JavaScript Type                            | DynamoDB AttributeValue |\n * |:----------------------------------------------------------------------:|-------------------------|\n * | String                                                                 | S                       |\n * | Number                                                                 | N                       |\n * | Boolean                                                                | BOOL                    |\n * | null                                                                   | NULL                    |\n * | Array                                                                  | L                       |\n * | Object                                                                 | M                       |\n * | Buffer, File, Blob, ArrayBuffer, DataView, and JavaScript typed arrays | B                       |\n *\n * ## Support for Sets\n *\n * The `DocumentClient` offers a convenient way to create sets from\n * JavaScript Arrays. The type of set is inferred from the first element\n * in the array. DynamoDB supports string, number, and binary sets. To\n * learn more about supported types see the\n * [Amazon DynamoDB Data Model Documentation](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DataModel.html)\n * For more information see {AWS.DynamoDB.DocumentClient.createSet}\n *\n */\nAWS.DynamoDB.DocumentClient = AWS.util.inherit({\n\n  /**\n   * Creates a DynamoDB document client with a set of configuration options.\n   *\n   * @option options params [map] An optional map of parameters to bind to every\n   *   request sent by this service object.\n   * @option options service [AWS.DynamoDB] An optional pre-configured instance\n   *  of the AWS.DynamoDB service object to use for requests. The object may\n   *  bound parameters used by the document client.\n   * @option options convertEmptyValues [Boolean] set to true if you would like\n   *  the document client to convert empty values (0-length strings, binary\n   *  buffers, and sets) to be converted to NULL types when persisting to\n   *  DynamoDB.\n   * @see AWS.DynamoDB.constructor\n   *\n   */\n  constructor: function DocumentClient(options) {\n    var self = this;\n    self.options = options || {};\n    self.configure(self.options);\n  },\n\n  /**\n   * @api private\n   */\n  configure: function configure(options) {\n    var self = this;\n    self.service = options.service;\n    self.bindServiceObject(options);\n    self.attrValue = options.attrValue =\n      self.service.api.operations.putItem.input.members.Item.value.shape;\n  },\n\n  /**\n   * @api private\n   */\n  bindServiceObject: function bindServiceObject(options) {\n    var self = this;\n    options = options || {};\n\n    if (!self.service) {\n      self.service = new AWS.DynamoDB(options);\n    } else {\n      var config = AWS.util.copy(self.service.config);\n      self.service = new self.service.constructor.__super__(config);\n      self.service.config.params =\n        AWS.util.merge(self.service.config.params || {}, options.params);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  makeServiceRequest: function(operation, params, callback) {\n    var self = this;\n    var request = self.service[operation](params);\n    self.setupRequest(request);\n    self.setupResponse(request);\n    if (typeof callback === 'function') {\n      request.send(callback);\n    }\n    return request;\n  },\n\n  /**\n   * @api private\n   */\n  serviceClientOperationsMap: {\n    batchGet: 'batchGetItem',\n    batchWrite: 'batchWriteItem',\n    delete: 'deleteItem',\n    get: 'getItem',\n    put: 'putItem',\n    query: 'query',\n    scan: 'scan',\n    update: 'updateItem',\n    transactGet: 'transactGetItems',\n    transactWrite: 'transactWriteItems'\n  },\n\n  /**\n   * Returns the attributes of one or more items from one or more tables\n   * by delegating to `AWS.DynamoDB.batchGetItem()`.\n   *\n   * Supply the same parameters as {AWS.DynamoDB.batchGetItem} with\n   * `AttributeValue`s substituted by native JavaScript types.\n   *\n   * @see AWS.DynamoDB.batchGetItem\n   * @example Get items from multiple tables\n   *  var params = {\n   *    RequestItems: {\n   *      'Table-1': {\n   *        Keys: [\n   *          {\n   *             HashKey: 'haskey',\n   *             NumberRangeKey: 1\n   *          }\n   *        ]\n   *      },\n   *      'Table-2': {\n   *        Keys: [\n   *          { foo: 'bar' },\n   *        ]\n   *      }\n   *    }\n   *  };\n   *\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\n   *\n   *  documentClient.batchGet(params, function(err, data) {\n   *    if (err) console.log(err);\n   *    else console.log(data);\n   *  });\n   *\n   */\n  batchGet: function(params, callback) {\n    var operation = this.serviceClientOperationsMap['batchGet'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\n   * Puts or deletes multiple items in one or more tables by delegating\n   * to `AWS.DynamoDB.batchWriteItem()`.\n   *\n   * Supply the same parameters as {AWS.DynamoDB.batchWriteItem} with\n   * `AttributeValue`s substituted by native JavaScript types.\n   *\n   * @see AWS.DynamoDB.batchWriteItem\n   * @example Write to and delete from a table\n   *  var params = {\n   *    RequestItems: {\n   *      'Table-1': [\n   *        {\n   *          DeleteRequest: {\n   *            Key: { HashKey: 'someKey' }\n   *          }\n   *        },\n   *        {\n   *          PutRequest: {\n   *            Item: {\n   *              HashKey: 'anotherKey',\n   *              NumAttribute: 1,\n   *              BoolAttribute: true,\n   *              ListAttribute: [1, 'two', false],\n   *              MapAttribute: { foo: 'bar' }\n   *            }\n   *          }\n   *        }\n   *      ]\n   *    }\n   *  };\n   *\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\n   *\n   *  documentClient.batchWrite(params, function(err, data) {\n   *    if (err) console.log(err);\n   *    else console.log(data);\n   *  });\n   *\n   */\n  batchWrite: function(params, callback) {\n    var operation = this.serviceClientOperationsMap['batchWrite'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\n   * Deletes a single item in a table by primary key by delegating to\n   * `AWS.DynamoDB.deleteItem()`\n   *\n   * Supply the same parameters as {AWS.DynamoDB.deleteItem} with\n   * `AttributeValue`s substituted by native JavaScript types.\n   *\n   * @see AWS.DynamoDB.deleteItem\n   * @example Delete an item from a table\n   *  var params = {\n   *    TableName : 'Table',\n   *    Key: {\n   *      HashKey: 'hashkey',\n   *      NumberRangeKey: 1\n   *    }\n   *  };\n   *\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\n   *\n   *  documentClient.delete(params, function(err, data) {\n   *    if (err) console.log(err);\n   *    else console.log(data);\n   *  });\n   *\n   */\n  delete: function(params, callback) {\n    var operation = this.serviceClientOperationsMap['delete'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\n   * Returns a set of attributes for the item with the given primary key\n   * by delegating to `AWS.DynamoDB.getItem()`.\n   *\n   * Supply the same parameters as {AWS.DynamoDB.getItem} with\n   * `AttributeValue`s substituted by native JavaScript types.\n   *\n   * @see AWS.DynamoDB.getItem\n   * @example Get an item from a table\n   *  var params = {\n   *    TableName : 'Table',\n   *    Key: {\n   *      HashKey: 'hashkey'\n   *    }\n   *  };\n   *\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\n   *\n   *  documentClient.get(params, function(err, data) {\n   *    if (err) console.log(err);\n   *    else console.log(data);\n   *  });\n   *\n   */\n  get: function(params, callback) {\n    var operation = this.serviceClientOperationsMap['get'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\n   * Creates a new item, or replaces an old item with a new item by\n   * delegating to `AWS.DynamoDB.putItem()`.\n   *\n   * Supply the same parameters as {AWS.DynamoDB.putItem} with\n   * `AttributeValue`s substituted by native JavaScript types.\n   *\n   * @see AWS.DynamoDB.putItem\n   * @example Create a new item in a table\n   *  var params = {\n   *    TableName : 'Table',\n   *    Item: {\n   *       HashKey: 'haskey',\n   *       NumAttribute: 1,\n   *       BoolAttribute: true,\n   *       ListAttribute: [1, 'two', false],\n   *       MapAttribute: { foo: 'bar'},\n   *       NullAttribute: null\n   *    }\n   *  };\n   *\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\n   *\n   *  documentClient.put(params, function(err, data) {\n   *    if (err) console.log(err);\n   *    else console.log(data);\n   *  });\n   *\n   */\n  put: function(params, callback) {\n    var operation = this.serviceClientOperationsMap['put'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\n   * Edits an existing item's attributes, or adds a new item to the table if\n   * it does not already exist by delegating to `AWS.DynamoDB.updateItem()`.\n   *\n   * Supply the same parameters as {AWS.DynamoDB.updateItem} with\n   * `AttributeValue`s substituted by native JavaScript types.\n   *\n   * @see AWS.DynamoDB.updateItem\n   * @example Update an item with expressions\n   *  var params = {\n   *    TableName: 'Table',\n   *    Key: { HashKey : 'hashkey' },\n   *    UpdateExpression: 'set #a = :x + :y',\n   *    ConditionExpression: '#a < :MAX',\n   *    ExpressionAttributeNames: {'#a' : 'Sum'},\n   *    ExpressionAttributeValues: {\n   *      ':x' : 20,\n   *      ':y' : 45,\n   *      ':MAX' : 100,\n   *    }\n   *  };\n   *\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\n   *\n   *  documentClient.update(params, function(err, data) {\n   *     if (err) console.log(err);\n   *     else console.log(data);\n   *  });\n   *\n   */\n  update: function(params, callback) {\n    var operation = this.serviceClientOperationsMap['update'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\n   * Returns one or more items and item attributes by accessing every item\n   * in a table or a secondary index.\n   *\n   * Supply the same parameters as {AWS.DynamoDB.scan} with\n   * `AttributeValue`s substituted by native JavaScript types.\n   *\n   * @see AWS.DynamoDB.scan\n   * @example Scan the table with a filter expression\n   *  var params = {\n   *    TableName : 'Table',\n   *    FilterExpression : 'Year = :this_year',\n   *    ExpressionAttributeValues : {':this_year' : 2015}\n   *  };\n   *\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\n   *\n   *  documentClient.scan(params, function(err, data) {\n   *     if (err) console.log(err);\n   *     else console.log(data);\n   *  });\n   *\n   */\n  scan: function(params, callback) {\n    var operation = this.serviceClientOperationsMap['scan'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n   /**\n    * Directly access items from a table by primary key or a secondary index.\n    *\n    * Supply the same parameters as {AWS.DynamoDB.query} with\n    * `AttributeValue`s substituted by native JavaScript types.\n    *\n    * @see AWS.DynamoDB.query\n    * @example Query an index\n    *  var params = {\n    *    TableName: 'Table',\n    *    IndexName: 'Index',\n    *    KeyConditionExpression: 'HashKey = :hkey and RangeKey > :rkey',\n    *    ExpressionAttributeValues: {\n    *      ':hkey': 'key',\n    *      ':rkey': 2015\n    *    }\n    *  };\n    *\n    *  var documentClient = new AWS.DynamoDB.DocumentClient();\n    *\n    *  documentClient.query(params, function(err, data) {\n    *     if (err) console.log(err);\n    *     else console.log(data);\n    *  });\n    *\n    */\n  query: function(params, callback) {\n    var operation = this.serviceClientOperationsMap['query'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\n   * Synchronous write operation that groups up to 10 action requests\n   *\n   * Supply the same parameters as {AWS.DynamoDB.transactWriteItems} with\n   * `AttributeValue`s substituted by native JavaScript types.\n   *\n   * @see AWS.DynamoDB.transactWriteItems\n   * @example Get items from multiple tables\n   *  var params = {\n   *    TransactItems: [{\n   *      Put: {\n   *        TableName : 'Table0',\n   *        Item: {\n   *          HashKey: 'haskey',\n   *          NumAttribute: 1,\n   *          BoolAttribute: true,\n   *          ListAttribute: [1, 'two', false],\n   *          MapAttribute: { foo: 'bar'},\n   *          NullAttribute: null\n   *        }\n   *      }\n   *    }, {\n   *      Update: {\n   *        TableName: 'Table1',\n   *        Key: { HashKey : 'hashkey' },\n   *        UpdateExpression: 'set #a = :x + :y',\n   *        ConditionExpression: '#a < :MAX',\n   *        ExpressionAttributeNames: {'#a' : 'Sum'},\n   *        ExpressionAttributeValues: {\n   *          ':x' : 20,\n   *          ':y' : 45,\n   *          ':MAX' : 100,\n   *        }\n   *      }\n   *    }]\n   *  };\n   *\n   *  documentClient.transactWrite(params, function(err, data) {\n   *    if (err) console.log(err);\n   *    else console.log(data);\n   *  });\n   */\n  transactWrite: function(params, callback) {\n    var operation = this.serviceClientOperationsMap['transactWrite'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\n   * Atomically retrieves multiple items from one or more tables (but not from indexes)\n   * in a single account and region.\n   *\n   * Supply the same parameters as {AWS.DynamoDB.transactGetItems} with\n   * `AttributeValue`s substituted by native JavaScript types.\n   *\n   * @see AWS.DynamoDB.transactGetItems\n   * @example Get items from multiple tables\n   *  var params = {\n   *    TransactItems: [{\n   *      Get: {\n   *        TableName : 'Table0',\n   *        Key: {\n   *          HashKey: 'hashkey0'\n   *        }\n   *      }\n   *    }, {\n   *      Get: {\n   *        TableName : 'Table1',\n   *        Key: {\n   *          HashKey: 'hashkey1'\n   *        }\n   *      }\n   *    }]\n   *  };\n   *\n   *  documentClient.transactGet(params, function(err, data) {\n   *    if (err) console.log(err);\n   *    else console.log(data);\n   *  });\n   */\n  transactGet: function(params, callback) {\n    var operation = this.serviceClientOperationsMap['transactGet'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\n   * Creates a set of elements inferring the type of set from\n   * the type of the first element. Amazon DynamoDB currently supports\n   * the number sets, string sets, and binary sets. For more information\n   * about DynamoDB data types see the documentation on the\n   * [Amazon DynamoDB Data Model](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DataModel.html#DataModel.DataTypes).\n   *\n   * @param list [Array] Collection to represent your DynamoDB Set\n   * @param options [map]\n   *  * **validate** [Boolean] set to true if you want to validate the type\n   *    of each element in the set. Defaults to `false`.\n   * @example Creating a number set\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\n   *\n   *  var params = {\n   *    Item: {\n   *      hashkey: 'hashkey'\n   *      numbers: documentClient.createSet([1, 2, 3]);\n   *    }\n   *  };\n   *\n   *  documentClient.put(params, function(err, data) {\n   *    if (err) console.log(err);\n   *    else console.log(data);\n   *  });\n   *\n   */\n  createSet: function(list, options) {\n    options = options || {};\n    return new DynamoDBSet(list, options);\n  },\n\n  /**\n   * @api private\n   */\n  getTranslator: function() {\n    return new Translator(this.options);\n  },\n\n  /**\n   * @api private\n   */\n  setupRequest: function setupRequest(request) {\n    var self = this;\n    var translator = self.getTranslator();\n    var operation = request.operation;\n    var inputShape = request.service.api.operations[operation].input;\n    request._events.validate.unshift(function(req) {\n      req.rawParams = AWS.util.copy(req.params);\n      req.params = translator.translateInput(req.rawParams, inputShape);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  setupResponse: function setupResponse(request) {\n    var self = this;\n    var translator = self.getTranslator();\n    var outputShape = self.service.api.operations[request.operation].output;\n    request.on('extractData', function(response) {\n      response.data = translator.translateOutput(response.data, outputShape);\n    });\n\n    var response = request.response;\n    response.nextPage = function(cb) {\n      var resp = this;\n      var req = resp.request;\n      var config;\n      var service = req.service;\n      var operation = req.operation;\n      try {\n        config = service.paginationConfig(operation, true);\n      } catch (e) { resp.error = e; }\n\n      if (!resp.hasNextPage()) {\n        if (cb) cb(resp.error, null);\n        else if (resp.error) throw resp.error;\n        return null;\n      }\n\n      var params = AWS.util.copy(req.rawParams);\n      if (!resp.nextPageTokens) {\n        return cb ? cb(null, null) : null;\n      } else {\n        var inputTokens = config.inputToken;\n        if (typeof inputTokens === 'string') inputTokens = [inputTokens];\n        for (var i = 0; i < inputTokens.length; i++) {\n          params[inputTokens[i]] = resp.nextPageTokens[i];\n        }\n        return self[operation](params, cb);\n      }\n    };\n  }\n\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.DynamoDB.DocumentClient;\n","var util = require('../core').util;\nvar convert = require('./converter');\n\nvar Translator = function(options) {\n  options = options || {};\n  this.attrValue = options.attrValue;\n  this.convertEmptyValues = Boolean(options.convertEmptyValues);\n  this.wrapNumbers = Boolean(options.wrapNumbers);\n};\n\nTranslator.prototype.translateInput = function(value, shape) {\n  this.mode = 'input';\n  return this.translate(value, shape);\n};\n\nTranslator.prototype.translateOutput = function(value, shape) {\n  this.mode = 'output';\n  return this.translate(value, shape);\n};\n\nTranslator.prototype.translate = function(value, shape) {\n  var self = this;\n  if (!shape || value === undefined) return undefined;\n\n  if (shape.shape === self.attrValue) {\n    return convert[self.mode](value, {\n      convertEmptyValues: self.convertEmptyValues,\n      wrapNumbers: self.wrapNumbers,\n    });\n  }\n  switch (shape.type) {\n    case 'structure': return self.translateStructure(value, shape);\n    case 'map': return self.translateMap(value, shape);\n    case 'list': return self.translateList(value, shape);\n    default: return self.translateScalar(value, shape);\n  }\n};\n\nTranslator.prototype.translateStructure = function(structure, shape) {\n  var self = this;\n  if (structure == null) return undefined;\n\n  var struct = {};\n  util.each(structure, function(name, value) {\n    var memberShape = shape.members[name];\n    if (memberShape) {\n      var result = self.translate(value, memberShape);\n      if (result !== undefined) struct[name] = result;\n    }\n  });\n  return struct;\n};\n\nTranslator.prototype.translateList = function(list, shape) {\n  var self = this;\n  if (list == null) return undefined;\n\n  var out = [];\n  util.arrayEach(list, function(value) {\n    var result = self.translate(value, shape.member);\n    if (result === undefined) out.push(null);\n    else out.push(result);\n  });\n  return out;\n};\n\nTranslator.prototype.translateMap = function(map, shape) {\n  var self = this;\n  if (map == null) return undefined;\n\n  var out = {};\n  util.each(map, function(key, value) {\n    var result = self.translate(value, shape.value);\n    if (result === undefined) out[key] = null;\n    else out[key] = result;\n  });\n  return out;\n};\n\nTranslator.prototype.translateScalar = function(value, shape) {\n  return shape.toType(value);\n};\n\n/**\n * @api private\n */\nmodule.exports = Translator;\n","var AWS = require('../core');\nvar util = AWS.util;\nvar typeOf = require('./types').typeOf;\nvar DynamoDBSet = require('./set');\nvar NumberValue = require('./numberValue');\n\nAWS.DynamoDB.Converter = {\n  /**\n   * Convert a JavaScript value to its equivalent DynamoDB AttributeValue type\n   *\n   * @param data [any] The data to convert to a DynamoDB AttributeValue\n   * @param options [map]\n   * @option options convertEmptyValues [Boolean] Whether to automatically\n   *                                              convert empty strings, blobs,\n   *                                              and sets to `null`\n   * @option options wrapNumbers [Boolean]  Whether to return numbers as a\n   *                                        NumberValue object instead of\n   *                                        converting them to native JavaScript\n   *                                        numbers. This allows for the safe\n   *                                        round-trip transport of numbers of\n   *                                        arbitrary size.\n   * @return [map] An object in the Amazon DynamoDB AttributeValue format\n   *\n   * @see AWS.DynamoDB.Converter.marshall AWS.DynamoDB.Converter.marshall to\n   *    convert entire records (rather than individual attributes)\n   */\n  input: function convertInput(data, options) {\n    options = options || {};\n    var type = typeOf(data);\n    if (type === 'Object') {\n      return formatMap(data, options);\n    } else if (type === 'Array') {\n      return formatList(data, options);\n    } else if (type === 'Set') {\n      return formatSet(data, options);\n    } else if (type === 'String') {\n      if (data.length === 0 && options.convertEmptyValues) {\n        return convertInput(null);\n      }\n      return { S: data };\n    } else if (type === 'Number' || type === 'NumberValue') {\n      return { N: data.toString() };\n    } else if (type === 'Binary') {\n      if (data.length === 0 && options.convertEmptyValues) {\n        return convertInput(null);\n      }\n      return { B: data };\n    } else if (type === 'Boolean') {\n      return { BOOL: data };\n    } else if (type === 'null') {\n      return { NULL: true };\n    } else if (type !== 'undefined' && type !== 'Function') {\n      // this value has a custom constructor\n      return formatMap(data, options);\n    }\n  },\n\n  /**\n   * Convert a JavaScript object into a DynamoDB record.\n   *\n   * @param data [any] The data to convert to a DynamoDB record\n   * @param options [map]\n   * @option options convertEmptyValues [Boolean] Whether to automatically\n   *                                              convert empty strings, blobs,\n   *                                              and sets to `null`\n   * @option options wrapNumbers [Boolean]  Whether to return numbers as a\n   *                                        NumberValue object instead of\n   *                                        converting them to native JavaScript\n   *                                        numbers. This allows for the safe\n   *                                        round-trip transport of numbers of\n   *                                        arbitrary size.\n   *\n   * @return [map] An object in the DynamoDB record format.\n   *\n   * @example Convert a JavaScript object into a DynamoDB record\n   *  var marshalled = AWS.DynamoDB.Converter.marshall({\n   *    string: 'foo',\n   *    list: ['fizz', 'buzz', 'pop'],\n   *    map: {\n   *      nestedMap: {\n   *        key: 'value',\n   *      }\n   *    },\n   *    number: 123,\n   *    nullValue: null,\n   *    boolValue: true,\n   *    stringSet: new DynamoDBSet(['foo', 'bar', 'baz'])\n   *  });\n   */\n  marshall: function marshallItem(data, options) {\n    return AWS.DynamoDB.Converter.input(data, options).M;\n  },\n\n  /**\n   * Convert a DynamoDB AttributeValue object to its equivalent JavaScript type.\n   *\n   * @param data [map] An object in the Amazon DynamoDB AttributeValue format\n   * @param options [map]\n   * @option options convertEmptyValues [Boolean] Whether to automatically\n   *                                              convert empty strings, blobs,\n   *                                              and sets to `null`\n   * @option options wrapNumbers [Boolean]  Whether to return numbers as a\n   *                                        NumberValue object instead of\n   *                                        converting them to native JavaScript\n   *                                        numbers. This allows for the safe\n   *                                        round-trip transport of numbers of\n   *                                        arbitrary size.\n   *\n   * @return [Object|Array|String|Number|Boolean|null]\n   *\n   * @see AWS.DynamoDB.Converter.unmarshall AWS.DynamoDB.Converter.unmarshall to\n   *    convert entire records (rather than individual attributes)\n   */\n  output: function convertOutput(data, options) {\n    options = options || {};\n    var list, map, i;\n    for (var type in data) {\n      var values = data[type];\n      if (type === 'M') {\n        map = {};\n        for (var key in values) {\n          map[key] = convertOutput(values[key], options);\n        }\n        return map;\n      } else if (type === 'L') {\n        list = [];\n        for (i = 0; i < values.length; i++) {\n          list.push(convertOutput(values[i], options));\n        }\n        return list;\n      } else if (type === 'SS') {\n        list = [];\n        for (i = 0; i < values.length; i++) {\n          list.push(values[i] + '');\n        }\n        return new DynamoDBSet(list);\n      } else if (type === 'NS') {\n        list = [];\n        for (i = 0; i < values.length; i++) {\n          list.push(convertNumber(values[i], options.wrapNumbers));\n        }\n        return new DynamoDBSet(list);\n      } else if (type === 'BS') {\n        list = [];\n        for (i = 0; i < values.length; i++) {\n          list.push(AWS.util.buffer.toBuffer(values[i]));\n        }\n        return new DynamoDBSet(list);\n      } else if (type === 'S') {\n        return values + '';\n      } else if (type === 'N') {\n        return convertNumber(values, options.wrapNumbers);\n      } else if (type === 'B') {\n        return util.buffer.toBuffer(values);\n      } else if (type === 'BOOL') {\n        return (values === 'true' || values === 'TRUE' || values === true);\n      } else if (type === 'NULL') {\n        return null;\n      }\n    }\n  },\n\n  /**\n   * Convert a DynamoDB record into a JavaScript object.\n   *\n   * @param data [any] The DynamoDB record\n   * @param options [map]\n   * @option options convertEmptyValues [Boolean] Whether to automatically\n   *                                              convert empty strings, blobs,\n   *                                              and sets to `null`\n   * @option options wrapNumbers [Boolean]  Whether to return numbers as a\n   *                                        NumberValue object instead of\n   *                                        converting them to native JavaScript\n   *                                        numbers. This allows for the safe\n   *                                        round-trip transport of numbers of\n   *                                        arbitrary size.\n   *\n   * @return [map] An object whose properties have been converted from\n   *    DynamoDB's AttributeValue format into their corresponding native\n   *    JavaScript types.\n   *\n   * @example Convert a record received from a DynamoDB stream\n   *  var unmarshalled = AWS.DynamoDB.Converter.unmarshall({\n   *    string: {S: 'foo'},\n   *    list: {L: [{S: 'fizz'}, {S: 'buzz'}, {S: 'pop'}]},\n   *    map: {\n   *      M: {\n   *        nestedMap: {\n   *          M: {\n   *            key: {S: 'value'}\n   *          }\n   *        }\n   *      }\n   *    },\n   *    number: {N: '123'},\n   *    nullValue: {NULL: true},\n   *    boolValue: {BOOL: true}\n   *  });\n   */\n  unmarshall: function unmarshall(data, options) {\n    return AWS.DynamoDB.Converter.output({M: data}, options);\n  }\n};\n\n/**\n * @api private\n * @param data [Array]\n * @param options [map]\n */\nfunction formatList(data, options) {\n  var list = {L: []};\n  for (var i = 0; i < data.length; i++) {\n    list['L'].push(AWS.DynamoDB.Converter.input(data[i], options));\n  }\n  return list;\n}\n\n/**\n * @api private\n * @param value [String]\n * @param wrapNumbers [Boolean]\n */\nfunction convertNumber(value, wrapNumbers) {\n  return wrapNumbers ? new NumberValue(value) : Number(value);\n}\n\n/**\n * @api private\n * @param data [map]\n * @param options [map]\n */\nfunction formatMap(data, options) {\n  var map = {M: {}};\n  for (var key in data) {\n    var formatted = AWS.DynamoDB.Converter.input(data[key], options);\n    if (formatted !== void 0) {\n      map['M'][key] = formatted;\n    }\n  }\n  return map;\n}\n\n/**\n * @api private\n */\nfunction formatSet(data, options) {\n  options = options || {};\n  var values = data.values;\n  if (options.convertEmptyValues) {\n    values = filterEmptySetValues(data);\n    if (values.length === 0) {\n      return AWS.DynamoDB.Converter.input(null);\n    }\n  }\n\n  var map = {};\n  switch (data.type) {\n    case 'String': map['SS'] = values; break;\n    case 'Binary': map['BS'] = values; break;\n    case 'Number': map['NS'] = values.map(function (value) {\n      return value.toString();\n    });\n  }\n  return map;\n}\n\n/**\n * @api private\n */\nfunction filterEmptySetValues(set) {\n    var nonEmptyValues = [];\n    var potentiallyEmptyTypes = {\n        String: true,\n        Binary: true,\n        Number: false\n    };\n    if (potentiallyEmptyTypes[set.type]) {\n        for (var i = 0; i < set.values.length; i++) {\n            if (set.values[i].length === 0) {\n                continue;\n            }\n            nonEmptyValues.push(set.values[i]);\n        }\n\n        return nonEmptyValues;\n    }\n\n    return set.values;\n}\n\n/**\n * @api private\n */\nmodule.exports = AWS.DynamoDB.Converter;\n","var util = require('../core').util;\n\n/**\n * An object recognizable as a numeric value that stores the underlying number\n * as a string.\n *\n * Intended to be a deserialization target for the DynamoDB Document Client when\n * the `wrapNumbers` flag is set. This allows for numeric values that lose\n * precision when converted to JavaScript's `number` type.\n */\nvar DynamoDBNumberValue = util.inherit({\n  constructor: function NumberValue(value) {\n    this.wrapperName = 'NumberValue';\n    this.value = value.toString();\n  },\n\n  /**\n   * Render the underlying value as a number when converting to JSON.\n   */\n  toJSON: function () {\n    return this.toNumber();\n  },\n\n  /**\n   * Convert the underlying value to a JavaScript number.\n   */\n  toNumber: function () {\n    return Number(this.value);\n  },\n\n  /**\n   * Return a string representing the unaltered value provided to the\n   * constructor.\n   */\n  toString: function () {\n    return this.value;\n  }\n});\n\n/**\n * @api private\n */\nmodule.exports = DynamoDBNumberValue;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['dynamodbstreams'] = {};\nAWS.DynamoDBStreams = Service.defineService('dynamodbstreams', ['2012-08-10']);\nObject.defineProperty(apiLoader.services['dynamodbstreams'], '2012-08-10', {\n  get: function get() {\n    var model = require('../apis/streams.dynamodb-2012-08-10.min.json');\n    model.paginators = require('../apis/streams.dynamodb-2012-08-10.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.DynamoDBStreams;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['ec2'] = {};\nAWS.EC2 = Service.defineService('ec2', ['2013-06-15*', '2013-10-15*', '2014-02-01*', '2014-05-01*', '2014-06-15*', '2014-09-01*', '2014-10-01*', '2015-03-01*', '2015-04-15*', '2015-10-01*', '2016-04-01*', '2016-09-15*', '2016-11-15']);\nrequire('../lib/services/ec2');\nObject.defineProperty(apiLoader.services['ec2'], '2016-11-15', {\n  get: function get() {\n    var model = require('../apis/ec2-2016-11-15.min.json');\n    model.paginators = require('../apis/ec2-2016-11-15.paginators.json').pagination;\n    model.waiters = require('../apis/ec2-2016-11-15.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.EC2;\n","var AWS = require('../core');\n\nAWS.util.update(AWS.EC2.prototype, {\n  /**\n   * @api private\n   */\n  setupRequestListeners: function setupRequestListeners(request) {\n    request.removeListener('extractError', AWS.EventListeners.Query.EXTRACT_ERROR);\n    request.addListener('extractError', this.extractError);\n\n    if (request.operation === 'copySnapshot') {\n      request.onAsync('validate', this.buildCopySnapshotPresignedUrl);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  buildCopySnapshotPresignedUrl: function buildCopySnapshotPresignedUrl(req, done) {\n    if (req.params.PresignedUrl || req._subRequest) {\n      return done();\n    }\n\n    req.params = AWS.util.copy(req.params);\n    req.params.DestinationRegion = req.service.config.region;\n\n    var config = AWS.util.copy(req.service.config);\n    delete config.endpoint;\n    config.region = req.params.SourceRegion;\n    var svc = new req.service.constructor(config);\n    var newReq = svc[req.operation](req.params);\n    newReq._subRequest = true;\n    newReq.presign(function(err, url) {\n      if (err) done(err);\n      else {\n        req.params.PresignedUrl = url;\n        done();\n      }\n    });\n  },\n\n  /**\n   * @api private\n   */\n  extractError: function extractError(resp) {\n    // EC2 nests the error code and message deeper than other AWS Query services.\n    var httpResponse = resp.httpResponse;\n    var data = new AWS.XML.Parser().parse(httpResponse.body.toString() || '');\n    if (data.Errors) {\n      resp.error = AWS.util.error(new Error(), {\n        code: data.Errors.Error.Code,\n        message: data.Errors.Error.Message\n      });\n    } else {\n      resp.error = AWS.util.error(new Error(), {\n        code: httpResponse.statusCode,\n        message: null\n      });\n    }\n    resp.error.requestId = data.RequestID || null;\n  }\n});\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['ecr'] = {};\nAWS.ECR = Service.defineService('ecr', ['2015-09-21']);\nObject.defineProperty(apiLoader.services['ecr'], '2015-09-21', {\n  get: function get() {\n    var model = require('../apis/ecr-2015-09-21.min.json');\n    model.paginators = require('../apis/ecr-2015-09-21.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.ECR;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['ecs'] = {};\nAWS.ECS = Service.defineService('ecs', ['2014-11-13']);\nObject.defineProperty(apiLoader.services['ecs'], '2014-11-13', {\n  get: function get() {\n    var model = require('../apis/ecs-2014-11-13.min.json');\n    model.paginators = require('../apis/ecs-2014-11-13.paginators.json').pagination;\n    model.waiters = require('../apis/ecs-2014-11-13.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.ECS;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['efs'] = {};\nAWS.EFS = Service.defineService('efs', ['2015-02-01']);\nObject.defineProperty(apiLoader.services['efs'], '2015-02-01', {\n  get: function get() {\n    var model = require('../apis/elasticfilesystem-2015-02-01.min.json');\n    model.paginators = require('../apis/elasticfilesystem-2015-02-01.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.EFS;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['elasticache'] = {};\nAWS.ElastiCache = Service.defineService('elasticache', ['2012-11-15*', '2014-03-24*', '2014-07-15*', '2014-09-30*', '2015-02-02']);\nObject.defineProperty(apiLoader.services['elasticache'], '2015-02-02', {\n  get: function get() {\n    var model = require('../apis/elasticache-2015-02-02.min.json');\n    model.paginators = require('../apis/elasticache-2015-02-02.paginators.json').pagination;\n    model.waiters = require('../apis/elasticache-2015-02-02.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.ElastiCache;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['elasticbeanstalk'] = {};\nAWS.ElasticBeanstalk = Service.defineService('elasticbeanstalk', ['2010-12-01']);\nObject.defineProperty(apiLoader.services['elasticbeanstalk'], '2010-12-01', {\n  get: function get() {\n    var model = require('../apis/elasticbeanstalk-2010-12-01.min.json');\n    model.paginators = require('../apis/elasticbeanstalk-2010-12-01.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.ElasticBeanstalk;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['elb'] = {};\nAWS.ELB = Service.defineService('elb', ['2012-06-01']);\nObject.defineProperty(apiLoader.services['elb'], '2012-06-01', {\n  get: function get() {\n    var model = require('../apis/elasticloadbalancing-2012-06-01.min.json');\n    model.paginators = require('../apis/elasticloadbalancing-2012-06-01.paginators.json').pagination;\n    model.waiters = require('../apis/elasticloadbalancing-2012-06-01.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.ELB;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['elbv2'] = {};\nAWS.ELBv2 = Service.defineService('elbv2', ['2015-12-01']);\nObject.defineProperty(apiLoader.services['elbv2'], '2015-12-01', {\n  get: function get() {\n    var model = require('../apis/elasticloadbalancingv2-2015-12-01.min.json');\n    model.paginators = require('../apis/elasticloadbalancingv2-2015-12-01.paginators.json').pagination;\n    model.waiters = require('../apis/elasticloadbalancingv2-2015-12-01.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.ELBv2;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['emr'] = {};\nAWS.EMR = Service.defineService('emr', ['2009-03-31']);\nObject.defineProperty(apiLoader.services['emr'], '2009-03-31', {\n  get: function get() {\n    var model = require('../apis/elasticmapreduce-2009-03-31.min.json');\n    model.paginators = require('../apis/elasticmapreduce-2009-03-31.paginators.json').pagination;\n    model.waiters = require('../apis/elasticmapreduce-2009-03-31.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.EMR;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['elastictranscoder'] = {};\nAWS.ElasticTranscoder = Service.defineService('elastictranscoder', ['2012-09-25']);\nObject.defineProperty(apiLoader.services['elastictranscoder'], '2012-09-25', {\n  get: function get() {\n    var model = require('../apis/elastictranscoder-2012-09-25.min.json');\n    model.paginators = require('../apis/elastictranscoder-2012-09-25.paginators.json').pagination;\n    model.waiters = require('../apis/elastictranscoder-2012-09-25.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.ElasticTranscoder;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['gamelift'] = {};\nAWS.GameLift = Service.defineService('gamelift', ['2015-10-01']);\nObject.defineProperty(apiLoader.services['gamelift'], '2015-10-01', {\n  get: function get() {\n    var model = require('../apis/gamelift-2015-10-01.min.json');\n    model.paginators = require('../apis/gamelift-2015-10-01.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.GameLift;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['iam'] = {};\nAWS.IAM = Service.defineService('iam', ['2010-05-08']);\nObject.defineProperty(apiLoader.services['iam'], '2010-05-08', {\n  get: function get() {\n    var model = require('../apis/iam-2010-05-08.min.json');\n    model.paginators = require('../apis/iam-2010-05-08.paginators.json').pagination;\n    model.waiters = require('../apis/iam-2010-05-08.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.IAM;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['inspector'] = {};\nAWS.Inspector = Service.defineService('inspector', ['2015-08-18*', '2016-02-16']);\nObject.defineProperty(apiLoader.services['inspector'], '2016-02-16', {\n  get: function get() {\n    var model = require('../apis/inspector-2016-02-16.min.json');\n    model.paginators = require('../apis/inspector-2016-02-16.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.Inspector;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['iot'] = {};\nAWS.Iot = Service.defineService('iot', ['2015-05-28']);\nObject.defineProperty(apiLoader.services['iot'], '2015-05-28', {\n  get: function get() {\n    var model = require('../apis/iot-2015-05-28.min.json');\n    model.paginators = require('../apis/iot-2015-05-28.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.Iot;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['iotdata'] = {};\nAWS.IotData = Service.defineService('iotdata', ['2015-05-28']);\nrequire('../lib/services/iotdata');\nObject.defineProperty(apiLoader.services['iotdata'], '2015-05-28', {\n  get: function get() {\n    var model = require('../apis/iot-data-2015-05-28.min.json');\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.IotData;\n","var AWS = require('../core');\n\n/**\n * @api private\n */\nvar blobPayloadOutputOps = [\n  'deleteThingShadow',\n  'getThingShadow',\n  'updateThingShadow'\n];\n\n/**\n * Constructs a service interface object. Each API operation is exposed as a\n * function on service.\n *\n * ### Sending a Request Using IotData\n *\n * ```javascript\n * var iotdata = new AWS.IotData({endpoint: 'my.host.tld'});\n * iotdata.getThingShadow(params, function (err, data) {\n *   if (err) console.log(err, err.stack); // an error occurred\n *   else     console.log(data);           // successful response\n * });\n * ```\n *\n * ### Locking the API Version\n *\n * In order to ensure that the IotData object uses this specific API,\n * you can construct the object by passing the `apiVersion` option to the\n * constructor:\n *\n * ```javascript\n * var iotdata = new AWS.IotData({\n *   endpoint: 'my.host.tld',\n *   apiVersion: '2015-05-28'\n * });\n * ```\n *\n * You can also set the API version globally in `AWS.config.apiVersions` using\n * the **iotdata** service identifier:\n *\n * ```javascript\n * AWS.config.apiVersions = {\n *   iotdata: '2015-05-28',\n *   // other service API versions\n * };\n *\n * var iotdata = new AWS.IotData({endpoint: 'my.host.tld'});\n * ```\n *\n * @note You *must* provide an `endpoint` configuration parameter when\n *   constructing this service. See {constructor} for more information.\n *\n * @!method constructor(options = {})\n *   Constructs a service object. This object has one method for each\n *   API operation.\n *\n *   @example Constructing a IotData object\n *     var iotdata = new AWS.IotData({endpoint: 'my.host.tld'});\n *   @note You *must* provide an `endpoint` when constructing this service.\n *   @option (see AWS.Config.constructor)\n *\n * @service iotdata\n * @version 2015-05-28\n */\nAWS.util.update(AWS.IotData.prototype, {\n    /**\n     * @api private\n     */\n    validateService: function validateService() {\n        if (!this.config.endpoint || this.config.endpoint.indexOf('{') >= 0) {\n            var msg = 'AWS.IotData requires an explicit ' +\n                '`endpoint\\' configuration option.';\n            throw AWS.util.error(new Error(),\n                {name: 'InvalidEndpoint', message: msg});\n        }\n    },\n\n    /**\n     * @api private\n     */\n    setupRequestListeners: function setupRequestListeners(request) {\n        request.addListener('validateResponse', this.validateResponseBody);\n        if (blobPayloadOutputOps.indexOf(request.operation) > -1) {\n            request.addListener('extractData', AWS.util.convertPayloadToString);\n        }\n    },\n\n    /**\n     * @api private\n     */\n    validateResponseBody: function validateResponseBody(resp) {\n        var body = resp.httpResponse.body.toString() || '{}';\n        var bodyCheck = body.trim();\n        if (!bodyCheck || bodyCheck.charAt(0) !== '{') {\n            resp.httpResponse.body = '';\n        }\n    }\n\n});\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['kms'] = {};\nAWS.KMS = Service.defineService('kms', ['2014-11-01']);\nObject.defineProperty(apiLoader.services['kms'], '2014-11-01', {\n  get: function get() {\n    var model = require('../apis/kms-2014-11-01.min.json');\n    model.paginators = require('../apis/kms-2014-11-01.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.KMS;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['lambda'] = {};\nAWS.Lambda = Service.defineService('lambda', ['2014-11-11', '2015-03-31']);\nrequire('../lib/services/lambda');\nObject.defineProperty(apiLoader.services['lambda'], '2014-11-11', {\n  get: function get() {\n    var model = require('../apis/lambda-2014-11-11.min.json');\n    model.paginators = require('../apis/lambda-2014-11-11.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\nObject.defineProperty(apiLoader.services['lambda'], '2015-03-31', {\n  get: function get() {\n    var model = require('../apis/lambda-2015-03-31.min.json');\n    model.paginators = require('../apis/lambda-2015-03-31.paginators.json').pagination;\n    model.waiters = require('../apis/lambda-2015-03-31.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.Lambda;\n","var AWS = require('../core');\n\nAWS.util.update(AWS.Lambda.prototype, {\n  /**\n   * @api private\n   */\n  setupRequestListeners: function setupRequestListeners(request) {\n    if (request.operation === 'invoke') {\n      request.addListener('extractData', AWS.util.convertPayloadToString);\n    }\n  }\n});\n\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['machinelearning'] = {};\nAWS.MachineLearning = Service.defineService('machinelearning', ['2014-12-12']);\nrequire('../lib/services/machinelearning');\nObject.defineProperty(apiLoader.services['machinelearning'], '2014-12-12', {\n  get: function get() {\n    var model = require('../apis/machinelearning-2014-12-12.min.json');\n    model.paginators = require('../apis/machinelearning-2014-12-12.paginators.json').pagination;\n    model.waiters = require('../apis/machinelearning-2014-12-12.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.MachineLearning;\n","var AWS = require('../core');\n\nAWS.util.update(AWS.MachineLearning.prototype, {\n  /**\n   * @api private\n   */\n  setupRequestListeners: function setupRequestListeners(request) {\n    if (request.operation === 'predict') {\n      request.addListener('build', this.buildEndpoint);\n    }\n  },\n\n  /**\n   * Updates request endpoint from PredictEndpoint\n   * @api private\n   */\n  buildEndpoint: function buildEndpoint(request) {\n    var url = request.params.PredictEndpoint;\n    if (url) {\n      request.httpRequest.endpoint = new AWS.Endpoint(url);\n    }\n  }\n\n});\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['marketplacecommerceanalytics'] = {};\nAWS.MarketplaceCommerceAnalytics = Service.defineService('marketplacecommerceanalytics', ['2015-07-01']);\nObject.defineProperty(apiLoader.services['marketplacecommerceanalytics'], '2015-07-01', {\n  get: function get() {\n    var model = require('../apis/marketplacecommerceanalytics-2015-07-01.min.json');\n    model.paginators = require('../apis/marketplacecommerceanalytics-2015-07-01.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.MarketplaceCommerceAnalytics;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['mturk'] = {};\nAWS.MTurk = Service.defineService('mturk', ['2017-01-17']);\nObject.defineProperty(apiLoader.services['mturk'], '2017-01-17', {\n  get: function get() {\n    var model = require('../apis/mturk-requester-2017-01-17.min.json');\n    model.paginators = require('../apis/mturk-requester-2017-01-17.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.MTurk;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['mobileanalytics'] = {};\nAWS.MobileAnalytics = Service.defineService('mobileanalytics', ['2014-06-05']);\nObject.defineProperty(apiLoader.services['mobileanalytics'], '2014-06-05', {\n  get: function get() {\n    var model = require('../apis/mobileanalytics-2014-06-05.min.json');\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.MobileAnalytics;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['opsworks'] = {};\nAWS.OpsWorks = Service.defineService('opsworks', ['2013-02-18']);\nObject.defineProperty(apiLoader.services['opsworks'], '2013-02-18', {\n  get: function get() {\n    var model = require('../apis/opsworks-2013-02-18.min.json');\n    model.paginators = require('../apis/opsworks-2013-02-18.paginators.json').pagination;\n    model.waiters = require('../apis/opsworks-2013-02-18.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.OpsWorks;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['rds'] = {};\nAWS.RDS = Service.defineService('rds', ['2013-01-10', '2013-02-12', '2013-09-09', '2014-09-01', '2014-09-01*', '2014-10-31']);\nrequire('../lib/services/rds');\nObject.defineProperty(apiLoader.services['rds'], '2013-01-10', {\n  get: function get() {\n    var model = require('../apis/rds-2013-01-10.min.json');\n    model.paginators = require('../apis/rds-2013-01-10.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\nObject.defineProperty(apiLoader.services['rds'], '2013-02-12', {\n  get: function get() {\n    var model = require('../apis/rds-2013-02-12.min.json');\n    model.paginators = require('../apis/rds-2013-02-12.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\nObject.defineProperty(apiLoader.services['rds'], '2013-09-09', {\n  get: function get() {\n    var model = require('../apis/rds-2013-09-09.min.json');\n    model.paginators = require('../apis/rds-2013-09-09.paginators.json').pagination;\n    model.waiters = require('../apis/rds-2013-09-09.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\nObject.defineProperty(apiLoader.services['rds'], '2014-09-01', {\n  get: function get() {\n    var model = require('../apis/rds-2014-09-01.min.json');\n    model.paginators = require('../apis/rds-2014-09-01.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\nObject.defineProperty(apiLoader.services['rds'], '2014-10-31', {\n  get: function get() {\n    var model = require('../apis/rds-2014-10-31.min.json');\n    model.paginators = require('../apis/rds-2014-10-31.paginators.json').pagination;\n    model.waiters = require('../apis/rds-2014-10-31.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.RDS;\n","var AWS = require('../core');\nrequire('../rds/signer');\n /**\n  * @api private\n  */\n var crossRegionOperations = ['copyDBSnapshot', 'createDBInstanceReadReplica', 'createDBCluster', 'copyDBClusterSnapshot'];\n\n AWS.util.update(AWS.RDS.prototype, {\n   /**\n    * @api private\n    */\n   setupRequestListeners: function setupRequestListeners(request) {\n     if (crossRegionOperations.indexOf(request.operation) !== -1 &&\n         request.params.SourceRegion) {\n       request.params = AWS.util.copy(request.params);\n       if (request.params.PreSignedUrl ||\n           request.params.SourceRegion === this.config.region) {\n         delete request.params.SourceRegion;\n       } else {\n         var doesParamValidation = !!this.config.paramValidation;\n         // remove the validate parameters listener so we can re-add it after we build the URL\n         if (doesParamValidation) {\n           request.removeListener('validate', AWS.EventListeners.Core.VALIDATE_PARAMETERS);\n         }\n         request.onAsync('validate', this.buildCrossRegionPresignedUrl);\n         if (doesParamValidation) {\n           request.addListener('validate', AWS.EventListeners.Core.VALIDATE_PARAMETERS);\n         }\n       }\n     }\n   },\n\n   /**\n    * @api private\n    */\n   buildCrossRegionPresignedUrl: function buildCrossRegionPresignedUrl(req, done) {\n     var config = AWS.util.copy(req.service.config);\n     config.region = req.params.SourceRegion;\n     delete req.params.SourceRegion;\n     delete config.endpoint;\n     // relevant params for the operation will already be in req.params\n     delete config.params;\n     config.signatureVersion = 'v4';\n     var destinationRegion = req.service.config.region;\n\n     var svc = new req.service.constructor(config);\n     var newReq = svc[req.operation](AWS.util.copy(req.params));\n     newReq.on('build', function addDestinationRegionParam(request) {\n       var httpRequest = request.httpRequest;\n       httpRequest.params.DestinationRegion = destinationRegion;\n       httpRequest.body = AWS.util.queryParamsToString(httpRequest.params);\n     });\n     newReq.presign(function(err, url) {\n       if (err) done(err);\n       else {\n         req.params.PreSignedUrl = url;\n         done();\n       }\n     });\n   }\n });\n","var AWS = require('../core');\n\n/**\n * @api private\n */\nvar service = null;\n\n/**\n * @api private\n */\nvar api = {\n    signatureVersion: 'v4',\n    signingName: 'rds-db'\n};\n\n/**\n * @api private\n */\nvar requiredAuthTokenOptions = {\n    region: 'string',\n    hostname: 'string',\n    port: 'number',\n    username: 'string'\n};\n\n/**\n * A signer object can be used to generate an auth token to a database.\n */\nAWS.RDS.Signer = AWS.util.inherit({\n    /**\n     * Creates a signer object can be used to generate an auth token.\n     *\n     * @option options credentials [AWS.Credentials] the AWS credentials\n     *   to sign requests with. Uses the default credential provider chain\n     *   if not specified.\n     * @option options hostname [String] the hostname of the database to connect to.\n     * @option options port [Number] the port number the database is listening on.\n     * @option options region [String] the region the database is located in.\n     * @option options username [String] the username to login as.\n     * @example Passing in options to constructor\n     *   var signer = new AWS.RDS.Signer({\n     *     credentials: new AWS.SharedIniFileCredentials({profile: 'default'}),\n     *     region: 'us-east-1',\n     *     hostname: 'db.us-east-1.rds.amazonaws.com',\n     *     port: 8000,\n     *     username: 'name'\n     *   });\n     */\n    constructor: function Signer(options) {\n        this.options = options || {};\n    },\n\n    /**\n     * @api private\n     * Strips the protocol from a url.\n     */\n    convertUrlToAuthToken: function convertUrlToAuthToken(url) {\n        // we are always using https as the protocol\n        var protocol = 'https://';\n        if (url.indexOf(protocol) === 0) {\n            return url.substring(protocol.length);\n        }\n    },\n\n    /**\n     * @overload getAuthToken(options = {}, [callback])\n     *   Generate an auth token to a database.\n     *   @note You must ensure that you have static or previously resolved\n     *     credentials if you call this method synchronously (with no callback),\n     *     otherwise it may not properly sign the request. If you cannot guarantee\n     *     this (you are using an asynchronous credential provider, i.e., EC2\n     *     IAM roles), you should always call this method with an asynchronous\n     *     callback.\n     *\n     *   @param options [map] The fields to use when generating an auth token.\n     *     Any options specified here will be merged on top of any options passed\n     *     to AWS.RDS.Signer:\n     *\n     *     * **credentials** (AWS.Credentials) &mdash; the AWS credentials\n     *         to sign requests with. Uses the default credential provider chain\n     *         if not specified.\n     *     * **hostname** (String) &mdash; the hostname of the database to connect to.\n     *     * **port** (Number) &mdash; the port number the database is listening on.\n     *     * **region** (String) &mdash; the region the database is located in.\n     *     * **username** (String) &mdash; the username to login as.\n     *   @return [String] if called synchronously (with no callback), returns the\n     *     auth token.\n     *   @return [null] nothing is returned if a callback is provided.\n     *   @callback callback function (err, token)\n     *     If a callback is supplied, it is called when an auth token has been generated.\n     *     @param err [Error] the error object returned from the signer.\n     *     @param token [String] the auth token.\n     *\n     *   @example Generating an auth token synchronously\n     *     var signer = new AWS.RDS.Signer({\n     *       // configure options\n     *       region: 'us-east-1',\n     *       username: 'default',\n     *       hostname: 'db.us-east-1.amazonaws.com',\n     *       port: 8000\n     *     });\n     *     var token = signer.getAuthToken({\n     *       // these options are merged with those defined when creating the signer, overriding in the case of a duplicate option\n     *       // credentials are not specified here or when creating the signer, so default credential provider will be used\n     *       username: 'test' // overriding username\n     *     });\n     *   @example Generating an auth token asynchronously\n     *     var signer = new AWS.RDS.Signer({\n     *       // configure options\n     *       region: 'us-east-1',\n     *       username: 'default',\n     *       hostname: 'db.us-east-1.amazonaws.com',\n     *       port: 8000\n     *     });\n     *     signer.getAuthToken({\n     *       // these options are merged with those defined when creating the signer, overriding in the case of a duplicate option\n     *       // credentials are not specified here or when creating the signer, so default credential provider will be used\n     *       username: 'test' // overriding username\n     *     }, function(err, token) {\n     *       if (err) {\n     *         // handle error\n     *       } else {\n     *         // use token\n     *       }\n     *     });\n     *\n     */\n    getAuthToken: function getAuthToken(options, callback) {\n        if (typeof options === 'function' && callback === undefined) {\n            callback = options;\n            options = {};\n        }\n        var self = this;\n        var hasCallback = typeof callback === 'function';\n        // merge options with existing options\n        options = AWS.util.merge(this.options, options);\n        // validate options\n        var optionsValidation = this.validateAuthTokenOptions(options);\n        if (optionsValidation !== true) {\n            if (hasCallback) {\n                return callback(optionsValidation, null);\n            }\n            throw optionsValidation;\n        }\n\n        // 15 minutes\n        var expires = 900;\n        // create service to generate a request from\n        var serviceOptions = {\n            region: options.region,\n            endpoint: new AWS.Endpoint(options.hostname + ':' + options.port),\n            paramValidation: false,\n            signatureVersion: 'v4'\n        };\n        if (options.credentials) {\n            serviceOptions.credentials = options.credentials;\n        }\n        service = new AWS.Service(serviceOptions);\n        // ensure the SDK is using sigv4 signing (config is not enough)\n        service.api = api;\n\n        var request = service.makeRequest();\n        // add listeners to request to properly build auth token\n        this.modifyRequestForAuthToken(request, options);\n\n        if (hasCallback) {\n            request.presign(expires, function(err, url) {\n                if (url) {\n                    url = self.convertUrlToAuthToken(url);\n                }\n                callback(err, url);\n            });\n        } else {\n            var url = request.presign(expires);\n            return this.convertUrlToAuthToken(url);\n        }\n    },\n\n    /**\n     * @api private\n     * Modifies a request to allow the presigner to generate an auth token.\n     */\n    modifyRequestForAuthToken: function modifyRequestForAuthToken(request, options) {\n        request.on('build', request.buildAsGet);\n        var httpRequest = request.httpRequest;\n        httpRequest.body = AWS.util.queryParamsToString({\n            Action: 'connect',\n            DBUser: options.username\n        });\n    },\n\n    /**\n     * @api private\n     * Validates that the options passed in contain all the keys with values of the correct type that\n     *   are needed to generate an auth token.\n     */\n    validateAuthTokenOptions: function validateAuthTokenOptions(options) {\n        // iterate over all keys in options\n        var message = '';\n        options = options || {};\n        for (var key in requiredAuthTokenOptions) {\n            if (!Object.prototype.hasOwnProperty.call(requiredAuthTokenOptions, key)) {\n                continue;\n            }\n            if (typeof options[key] !== requiredAuthTokenOptions[key]) {\n                message += 'option \\'' + key + '\\' should have been type \\'' + requiredAuthTokenOptions[key] + '\\', was \\'' + typeof options[key] + '\\'.\\n';\n            }\n        }\n        if (message.length) {\n            return AWS.util.error(new Error(), {\n                code: 'InvalidParameter',\n                message: message\n            });\n        }\n        return true;\n    }\n});\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['redshift'] = {};\nAWS.Redshift = Service.defineService('redshift', ['2012-12-01']);\nObject.defineProperty(apiLoader.services['redshift'], '2012-12-01', {\n  get: function get() {\n    var model = require('../apis/redshift-2012-12-01.min.json');\n    model.paginators = require('../apis/redshift-2012-12-01.paginators.json').pagination;\n    model.waiters = require('../apis/redshift-2012-12-01.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.Redshift;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['route53'] = {};\nAWS.Route53 = Service.defineService('route53', ['2013-04-01']);\nrequire('../lib/services/route53');\nObject.defineProperty(apiLoader.services['route53'], '2013-04-01', {\n  get: function get() {\n    var model = require('../apis/route53-2013-04-01.min.json');\n    model.paginators = require('../apis/route53-2013-04-01.paginators.json').pagination;\n    model.waiters = require('../apis/route53-2013-04-01.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.Route53;\n","var AWS = require('../core');\n\nAWS.util.update(AWS.Route53.prototype, {\n  /**\n   * @api private\n   */\n  setupRequestListeners: function setupRequestListeners(request) {\n    request.on('build', this.sanitizeUrl);\n  },\n\n  /**\n   * @api private\n   */\n  sanitizeUrl: function sanitizeUrl(request) {\n    var path = request.httpRequest.path;\n    request.httpRequest.path = path.replace(/\\/%2F\\w+%2F/, '/');\n  },\n\n  /**\n   * @return [Boolean] whether the error can be retried\n   * @api private\n   */\n  retryableError: function retryableError(error) {\n    if (error.code === 'PriorRequestNotComplete' &&\n        error.statusCode === 400) {\n      return true;\n    } else {\n      var _super = AWS.Service.prototype.retryableError;\n      return _super.call(this, error);\n    }\n  }\n});\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['route53domains'] = {};\nAWS.Route53Domains = Service.defineService('route53domains', ['2014-05-15']);\nObject.defineProperty(apiLoader.services['route53domains'], '2014-05-15', {\n  get: function get() {\n    var model = require('../apis/route53domains-2014-05-15.min.json');\n    model.paginators = require('../apis/route53domains-2014-05-15.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.Route53Domains;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['servicecatalog'] = {};\nAWS.ServiceCatalog = Service.defineService('servicecatalog', ['2015-12-10']);\nObject.defineProperty(apiLoader.services['servicecatalog'], '2015-12-10', {\n  get: function get() {\n    var model = require('../apis/servicecatalog-2015-12-10.min.json');\n    model.paginators = require('../apis/servicecatalog-2015-12-10.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.ServiceCatalog;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['ses'] = {};\nAWS.SES = Service.defineService('ses', ['2010-12-01']);\nObject.defineProperty(apiLoader.services['ses'], '2010-12-01', {\n  get: function get() {\n    var model = require('../apis/email-2010-12-01.min.json');\n    model.paginators = require('../apis/email-2010-12-01.paginators.json').pagination;\n    model.waiters = require('../apis/email-2010-12-01.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.SES;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['sns'] = {};\nAWS.SNS = Service.defineService('sns', ['2010-03-31']);\nObject.defineProperty(apiLoader.services['sns'], '2010-03-31', {\n  get: function get() {\n    var model = require('../apis/sns-2010-03-31.min.json');\n    model.paginators = require('../apis/sns-2010-03-31.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.SNS;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['sqs'] = {};\nAWS.SQS = Service.defineService('sqs', ['2012-11-05']);\nrequire('../lib/services/sqs');\nObject.defineProperty(apiLoader.services['sqs'], '2012-11-05', {\n  get: function get() {\n    var model = require('../apis/sqs-2012-11-05.min.json');\n    model.paginators = require('../apis/sqs-2012-11-05.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.SQS;\n","var AWS = require('../core');\n\nAWS.util.update(AWS.SQS.prototype, {\n  /**\n   * @api private\n   */\n  setupRequestListeners: function setupRequestListeners(request) {\n    request.addListener('build', this.buildEndpoint);\n\n    if (request.service.config.computeChecksums) {\n      if (request.operation === 'sendMessage') {\n        request.addListener('extractData', this.verifySendMessageChecksum);\n      } else if (request.operation === 'sendMessageBatch') {\n        request.addListener('extractData', this.verifySendMessageBatchChecksum);\n      } else if (request.operation === 'receiveMessage') {\n        request.addListener('extractData', this.verifyReceiveMessageChecksum);\n      }\n    }\n  },\n\n  /**\n   * @api private\n   */\n  verifySendMessageChecksum: function verifySendMessageChecksum(response) {\n    if (!response.data) return;\n\n    var md5 = response.data.MD5OfMessageBody;\n    var body = this.params.MessageBody;\n    var calculatedMd5 = this.service.calculateChecksum(body);\n    if (calculatedMd5 !== md5) {\n      var msg = 'Got \"' + response.data.MD5OfMessageBody +\n        '\", expecting \"' + calculatedMd5 + '\".';\n      this.service.throwInvalidChecksumError(response,\n        [response.data.MessageId], msg);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  verifySendMessageBatchChecksum: function verifySendMessageBatchChecksum(response) {\n    if (!response.data) return;\n\n    var service = this.service;\n    var entries = {};\n    var errors = [];\n    var messageIds = [];\n    AWS.util.arrayEach(response.data.Successful, function (entry) {\n      entries[entry.Id] = entry;\n    });\n    AWS.util.arrayEach(this.params.Entries, function (entry) {\n      if (entries[entry.Id]) {\n        var md5 = entries[entry.Id].MD5OfMessageBody;\n        var body = entry.MessageBody;\n        if (!service.isChecksumValid(md5, body)) {\n          errors.push(entry.Id);\n          messageIds.push(entries[entry.Id].MessageId);\n        }\n      }\n    });\n\n    if (errors.length > 0) {\n      service.throwInvalidChecksumError(response, messageIds,\n        'Invalid messages: ' + errors.join(', '));\n    }\n  },\n\n  /**\n   * @api private\n   */\n  verifyReceiveMessageChecksum: function verifyReceiveMessageChecksum(response) {\n    if (!response.data) return;\n\n    var service = this.service;\n    var messageIds = [];\n    AWS.util.arrayEach(response.data.Messages, function(message) {\n      var md5 = message.MD5OfBody;\n      var body = message.Body;\n      if (!service.isChecksumValid(md5, body)) {\n        messageIds.push(message.MessageId);\n      }\n    });\n\n    if (messageIds.length > 0) {\n      service.throwInvalidChecksumError(response, messageIds,\n        'Invalid messages: ' + messageIds.join(', '));\n    }\n  },\n\n  /**\n   * @api private\n   */\n  throwInvalidChecksumError: function throwInvalidChecksumError(response, ids, message) {\n    response.error = AWS.util.error(new Error(), {\n      retryable: true,\n      code: 'InvalidChecksum',\n      messageIds: ids,\n      message: response.request.operation +\n               ' returned an invalid MD5 response. ' + message\n    });\n  },\n\n  /**\n   * @api private\n   */\n  isChecksumValid: function isChecksumValid(checksum, data) {\n    return this.calculateChecksum(data) === checksum;\n  },\n\n  /**\n   * @api private\n   */\n  calculateChecksum: function calculateChecksum(data) {\n    return AWS.util.crypto.md5(data, 'hex');\n  },\n\n  /**\n   * @api private\n   */\n  buildEndpoint: function buildEndpoint(request) {\n    var url = request.httpRequest.params.QueueUrl;\n    if (url) {\n      request.httpRequest.endpoint = new AWS.Endpoint(url);\n\n      // signature version 4 requires the region name to be set,\n      // sqs queue urls contain the region name\n      var matches = request.httpRequest.endpoint.host.match(/^sqs\\.(.+?)\\./);\n      if (matches) request.httpRequest.region = matches[1];\n    }\n  }\n});\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['ssm'] = {};\nAWS.SSM = Service.defineService('ssm', ['2014-11-06']);\nObject.defineProperty(apiLoader.services['ssm'], '2014-11-06', {\n  get: function get() {\n    var model = require('../apis/ssm-2014-11-06.min.json');\n    model.paginators = require('../apis/ssm-2014-11-06.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.SSM;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['storagegateway'] = {};\nAWS.StorageGateway = Service.defineService('storagegateway', ['2013-06-30']);\nObject.defineProperty(apiLoader.services['storagegateway'], '2013-06-30', {\n  get: function get() {\n    var model = require('../apis/storagegateway-2013-06-30.min.json');\n    model.paginators = require('../apis/storagegateway-2013-06-30.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.StorageGateway;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['waf'] = {};\nAWS.WAF = Service.defineService('waf', ['2015-08-24']);\nObject.defineProperty(apiLoader.services['waf'], '2015-08-24', {\n  get: function get() {\n    var model = require('../apis/waf-2015-08-24.min.json');\n    model.paginators = require('../apis/waf-2015-08-24.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.WAF;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['workdocs'] = {};\nAWS.WorkDocs = Service.defineService('workdocs', ['2016-05-01']);\nObject.defineProperty(apiLoader.services['workdocs'], '2016-05-01', {\n  get: function get() {\n    var model = require('../apis/workdocs-2016-05-01.min.json');\n    model.paginators = require('../apis/workdocs-2016-05-01.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.WorkDocs;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['lexmodelbuildingservice'] = {};\nAWS.LexModelBuildingService = Service.defineService('lexmodelbuildingservice', ['2017-04-19']);\nObject.defineProperty(apiLoader.services['lexmodelbuildingservice'], '2017-04-19', {\n  get: function get() {\n    var model = require('../apis/lex-models-2017-04-19.min.json');\n    model.paginators = require('../apis/lex-models-2017-04-19.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.LexModelBuildingService;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['pricing'] = {};\nAWS.Pricing = Service.defineService('pricing', ['2017-10-15']);\nObject.defineProperty(apiLoader.services['pricing'], '2017-10-15', {\n  get: function get() {\n    var model = require('../apis/pricing-2017-10-15.min.json');\n    model.paginators = require('../apis/pricing-2017-10-15.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.Pricing;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['costexplorer'] = {};\nAWS.CostExplorer = Service.defineService('costexplorer', ['2017-10-25']);\nObject.defineProperty(apiLoader.services['costexplorer'], '2017-10-25', {\n  get: function get() {\n    var model = require('../apis/ce-2017-10-25.min.json');\n    model.paginators = require('../apis/ce-2017-10-25.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.CostExplorer;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['mediastoredata'] = {};\nAWS.MediaStoreData = Service.defineService('mediastoredata', ['2017-09-01']);\nObject.defineProperty(apiLoader.services['mediastoredata'], '2017-09-01', {\n  get: function get() {\n    var model = require('../apis/mediastore-data-2017-09-01.min.json');\n    model.paginators = require('../apis/mediastore-data-2017-09-01.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.MediaStoreData;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['comprehend'] = {};\nAWS.Comprehend = Service.defineService('comprehend', ['2017-11-27']);\nObject.defineProperty(apiLoader.services['comprehend'], '2017-11-27', {\n  get: function get() {\n    var model = require('../apis/comprehend-2017-11-27.min.json');\n    model.paginators = require('../apis/comprehend-2017-11-27.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.Comprehend;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['kinesisvideoarchivedmedia'] = {};\nAWS.KinesisVideoArchivedMedia = Service.defineService('kinesisvideoarchivedmedia', ['2017-09-30']);\nObject.defineProperty(apiLoader.services['kinesisvideoarchivedmedia'], '2017-09-30', {\n  get: function get() {\n    var model = require('../apis/kinesis-video-archived-media-2017-09-30.min.json');\n    model.paginators = require('../apis/kinesis-video-archived-media-2017-09-30.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.KinesisVideoArchivedMedia;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['kinesisvideomedia'] = {};\nAWS.KinesisVideoMedia = Service.defineService('kinesisvideomedia', ['2017-09-30']);\nObject.defineProperty(apiLoader.services['kinesisvideomedia'], '2017-09-30', {\n  get: function get() {\n    var model = require('../apis/kinesis-video-media-2017-09-30.min.json');\n    model.paginators = require('../apis/kinesis-video-media-2017-09-30.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.KinesisVideoMedia;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['kinesisvideo'] = {};\nAWS.KinesisVideo = Service.defineService('kinesisvideo', ['2017-09-30']);\nObject.defineProperty(apiLoader.services['kinesisvideo'], '2017-09-30', {\n  get: function get() {\n    var model = require('../apis/kinesisvideo-2017-09-30.min.json');\n    model.paginators = require('../apis/kinesisvideo-2017-09-30.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.KinesisVideo;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['resourcegroups'] = {};\nAWS.ResourceGroups = Service.defineService('resourcegroups', ['2017-11-27']);\nObject.defineProperty(apiLoader.services['resourcegroups'], '2017-11-27', {\n  get: function get() {\n    var model = require('../apis/resource-groups-2017-11-27.min.json');\n    model.paginators = require('../apis/resource-groups-2017-11-27.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.ResourceGroups;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['secretsmanager'] = {};\nAWS.SecretsManager = Service.defineService('secretsmanager', ['2017-10-17']);\nObject.defineProperty(apiLoader.services['secretsmanager'], '2017-10-17', {\n  get: function get() {\n    var model = require('../apis/secretsmanager-2017-10-17.min.json');\n    model.paginators = require('../apis/secretsmanager-2017-10-17.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.SecretsManager;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['comprehendmedical'] = {};\nAWS.ComprehendMedical = Service.defineService('comprehendmedical', ['2018-10-30']);\nObject.defineProperty(apiLoader.services['comprehendmedical'], '2018-10-30', {\n  get: function get() {\n    var model = require('../apis/comprehendmedical-2018-10-30.min.json');\n    model.paginators = require('../apis/comprehendmedical-2018-10-30.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.ComprehendMedical;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['personalize'] = {};\nAWS.Personalize = Service.defineService('personalize', ['2018-05-22']);\nObject.defineProperty(apiLoader.services['personalize'], '2018-05-22', {\n  get: function get() {\n    var model = require('../apis/personalize-2018-05-22.min.json');\n    model.paginators = require('../apis/personalize-2018-05-22.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.Personalize;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['personalizeruntime'] = {};\nAWS.PersonalizeRuntime = Service.defineService('personalizeruntime', ['2018-05-22']);\nObject.defineProperty(apiLoader.services['personalizeruntime'], '2018-05-22', {\n  get: function get() {\n    var model = require('../apis/personalize-runtime-2018-05-22.min.json');\n    model.paginators = require('../apis/personalize-runtime-2018-05-22.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.PersonalizeRuntime;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","module.exports = require(\"./zen-observable.js\").Observable;\n","'use strict'; (function(fn, name) { if (typeof exports !== \"undefined\") { fn(exports, module); } else if (typeof self !== \"undefined\") { var e = name === \"*\" ? self : (name ? self[name] = {} : {}); fn(e, { exports: e }); } })(function(exports, module) { // === Symbol Support ===\n\nfunction hasSymbol(name) {\n  return typeof Symbol === \"function\" && Boolean(Symbol[name]);\n}\n\nfunction getSymbol(name) {\n  return hasSymbol(name) ? Symbol[name] : \"@@\" + name;\n}\n\n// Ponyfill Symbol.observable for interoperability with other libraries\nif (typeof Symbol === \"function\" && !Symbol.observable) {\n  Symbol.observable = Symbol(\"observable\");\n}\n\n// === Abstract Operations ===\n\nfunction hostReportError(e) {\n  setTimeout(function() { throw e });\n}\n\nfunction getMethod(obj, key) {\n  var value = obj[key];\n\n  if (value == null)\n    return undefined;\n\n  if (typeof value !== \"function\")\n    throw new TypeError(value + \" is not a function\");\n\n  return value;\n}\n\nfunction getSpecies(obj) {\n  var ctor = obj.constructor;\n  if (ctor !== undefined) {\n    ctor = ctor[getSymbol(\"species\")];\n    if (ctor === null) {\n      ctor = undefined;\n    }\n  }\n  return ctor !== undefined ? ctor : Observable;\n}\n\nfunction addMethods(target, methods) {\n  Object.keys(methods).forEach(function(k) {\n    var desc = Object.getOwnPropertyDescriptor(methods, k);\n    desc.enumerable = false;\n    Object.defineProperty(target, k, desc);\n  });\n}\n\nfunction cleanupSubscription(subscription) {\n  // Assert:  observer._observer is undefined\n\n  var cleanup = subscription._cleanup;\n\n  if (!cleanup)\n    return;\n\n  // Drop the reference to the cleanup function so that we won't call it\n  // more than once\n  subscription._cleanup = undefined;\n\n  // Call the cleanup function\n  try { cleanup() }\n  catch (e) { hostReportError(e) }\n}\n\nfunction subscriptionClosed(subscription) {\n  return subscription._observer === undefined;\n}\n\nfunction closeSubscription(subscription) {\n  if (subscriptionClosed(subscription))\n    return;\n\n  subscription._observer = undefined;\n  cleanupSubscription(subscription);\n}\n\nfunction cleanupFromSubscription(subscription) {\n  return function() { subscription.unsubscribe() };\n}\n\nfunction Subscription(observer, subscriber) {\n  // Assert: subscriber is callable\n\n  // The observer must be an object\n  if (Object(observer) !== observer)\n    throw new TypeError(\"Observer must be an object\");\n\n  this._cleanup = undefined;\n  this._observer = observer;\n\n  try {\n    var start$0 = getMethod(observer, \"start\");\n    if (start$0) start$0.call(observer, this);\n  } catch (e) {\n    hostReportError(e);\n  }\n\n  if (subscriptionClosed(this))\n    return;\n\n  observer = new SubscriptionObserver(this);\n\n  try {\n    // Call the subscriber function\n    var cleanup$0 = subscriber.call(undefined, observer);\n\n    // The return value must be undefined, null, a subscription object, or a function\n    if (cleanup$0 != null) {\n      if (typeof cleanup$0.unsubscribe === \"function\")\n        cleanup$0 = cleanupFromSubscription(cleanup$0);\n      else if (typeof cleanup$0 !== \"function\")\n        throw new TypeError(cleanup$0 + \" is not a function\");\n\n      this._cleanup = cleanup$0;\n    }\n  } catch (e) {\n    // If an error occurs during startup, then attempt to send the error\n    // to the observer\n    observer.error(e);\n    return;\n  }\n\n  // If the stream is already finished, then perform cleanup\n  if (subscriptionClosed(this))\n    cleanupSubscription(this);\n}\n\naddMethods(Subscription.prototype = {}, {\n  get closed() { return subscriptionClosed(this) },\n  unsubscribe: function() { closeSubscription(this) },\n});\n\nfunction SubscriptionObserver(subscription) {\n  this._subscription = subscription;\n}\n\naddMethods(SubscriptionObserver.prototype = {}, {\n\n  get closed() { return subscriptionClosed(this._subscription) },\n\n  next: function(value) {\n    var subscription = this._subscription;\n\n    // If the stream is closed, then return undefined\n    if (subscriptionClosed(subscription))\n      return;\n\n    var observer = subscription._observer;\n\n    try {\n      // If the observer has a \"next\" method, send the next value\n      var m$0 = getMethod(observer, \"next\");\n      if (m$0) m$0.call(observer, value);\n    } catch (e) {\n      hostReportError(e);\n    }\n  },\n\n  error: function(value) {\n    var subscription = this._subscription;\n\n    // If the stream is closed, throw the error to the caller\n    if (subscriptionClosed(subscription)) {\n      hostReportError(value);\n      return;\n    }\n\n    var observer = subscription._observer;\n    subscription._observer = undefined;\n\n    try {\n      var m$1 = getMethod(observer, \"error\");\n      if (m$1) m$1.call(observer, value);\n      else throw value;\n    } catch (e) {\n      hostReportError(e);\n    }\n\n    cleanupSubscription(subscription);\n  },\n\n  complete: function() {\n    var subscription = this._subscription;\n\n    if (subscriptionClosed(subscription))\n      return;\n\n    var observer = subscription._observer;\n    subscription._observer = undefined;\n\n    try {\n      var m$2 = getMethod(observer, \"complete\");\n      if (m$2) m$2.call(observer);\n    } catch (e) {\n      hostReportError(e);\n    }\n\n    cleanupSubscription(subscription);\n  },\n\n});\n\nfunction Observable(subscriber) {\n  // Constructor cannot be called as a function\n  if (!(this instanceof Observable))\n    throw new TypeError(\"Observable cannot be called as a function\");\n\n  // The stream subscriber must be a function\n  if (typeof subscriber !== \"function\")\n    throw new TypeError(\"Observable initializer must be a function\");\n\n  this._subscriber = subscriber;\n}\n\naddMethods(Observable.prototype, {\n\n  subscribe: function(observer) { for (var args = [], __$0 = 1; __$0 < arguments.length; ++__$0) args.push(arguments[__$0]); \n    if (typeof observer === 'function') {\n      observer = {\n        next: observer,\n        error: args[0],\n        complete: args[1],\n      };\n    } else if (typeof observer !== 'object' || observer === null) {\n      observer = {};\n    }\n\n    return new Subscription(observer, this._subscriber);\n  },\n\n  forEach: function(fn) { var __this = this; \n    return new Promise(function(resolve, reject) {\n      if (typeof fn !== \"function\")\n        return Promise.reject(new TypeError(fn + \" is not a function\"));\n\n      __this.subscribe({\n        _subscription: null,\n\n        start: function(subscription) {\n          if (Object(subscription) !== subscription)\n            throw new TypeError(subscription + \" is not an object\");\n\n          this._subscription = subscription;\n        },\n\n        next: function(value) {\n          var subscription = this._subscription;\n\n          if (subscription.closed)\n            return;\n\n          try {\n            fn(value);\n          } catch (err) {\n            reject(err);\n            subscription.unsubscribe();\n          }\n        },\n\n        error: reject,\n        complete: resolve,\n      });\n    });\n  },\n\n  map: function(fn) { var __this = this; \n    if (typeof fn !== \"function\")\n      throw new TypeError(fn + \" is not a function\");\n\n    var C = getSpecies(this);\n\n    return new C(function(observer) { return __this.subscribe({\n      next: function(value) {\n        if (observer.closed)\n          return;\n\n        try { value = fn(value) }\n        catch (e) { return observer.error(e) }\n\n        observer.next(value);\n      },\n\n      error: function(e) { observer.error(e) },\n      complete: function() { observer.complete() },\n    }); });\n  },\n\n  filter: function(fn) { var __this = this; \n    if (typeof fn !== \"function\")\n      throw new TypeError(fn + \" is not a function\");\n\n    var C = getSpecies(this);\n\n    return new C(function(observer) { return __this.subscribe({\n      next: function(value) {\n        if (observer.closed)\n          return;\n\n        try { if (!fn(value)) return }\n        catch (e) { return observer.error(e) }\n\n        observer.next(value);\n      },\n\n      error: function(e) { observer.error(e) },\n      complete: function() { observer.complete() },\n    }); });\n  },\n\n  reduce: function(fn) { var __this = this; \n    if (typeof fn !== \"function\")\n      throw new TypeError(fn + \" is not a function\");\n\n    var C = getSpecies(this);\n    var hasSeed = arguments.length > 1;\n    var hasValue = false;\n    var seed = arguments[1];\n    var acc = seed;\n\n    return new C(function(observer) { return __this.subscribe({\n\n      next: function(value) {\n        if (observer.closed)\n          return;\n\n        var first = !hasValue;\n        hasValue = true;\n\n        if (!first || hasSeed) {\n          try { acc = fn(acc, value) }\n          catch (e) { return observer.error(e) }\n        } else {\n          acc = value;\n        }\n      },\n\n      error: function(e) { observer.error(e) },\n\n      complete: function() {\n        if (!hasValue && !hasSeed) {\n          return observer.error(new TypeError(\"Cannot reduce an empty sequence\"));\n        }\n\n        observer.next(acc);\n        observer.complete();\n      },\n\n    }); });\n  },\n\n});\n\nObject.defineProperty(Observable.prototype, getSymbol(\"observable\"), {\n  value: function() { return this },\n  writable: true,\n  configurable: true,\n});\n\naddMethods(Observable, {\n\n  from: function(x) {\n    var C = typeof this === \"function\" ? this : Observable;\n\n    if (x == null)\n      throw new TypeError(x + \" is not an object\");\n\n    var method = getMethod(x, getSymbol(\"observable\"));\n\n    if (method) {\n      var observable$0 = method.call(x);\n\n      if (Object(observable$0) !== observable$0)\n        throw new TypeError(observable$0 + \" is not an object\");\n\n      if (observable$0.constructor === C)\n        return observable$0;\n\n      return new C(function(observer) { return observable$0.subscribe(observer); });\n    }\n\n    if (hasSymbol(\"iterator\") && (method = getMethod(x, getSymbol(\"iterator\")))) {\n      return new C(function(observer) {\n        for (var __$0 = (method.call(x))[Symbol.iterator](), __$1; __$1 = __$0.next(), !__$1.done;) { var item$0 = __$1.value; \n          observer.next(item$0);\n          if (observer.closed)\n            return;\n        }\n\n        observer.complete();\n      });\n    }\n\n    if (Array.isArray(x)) {\n      return new C(function(observer) {\n        for (var i$0 = 0; i$0 < x.length; ++i$0) {\n          observer.next(x[i$0]);\n          if (observer.closed)\n            return;\n        }\n\n        observer.complete();\n      });\n    }\n\n    throw new TypeError(x + \" is not observable\");\n  },\n\n  of: function() { for (var items = [], __$0 = 0; __$0 < arguments.length; ++__$0) items.push(arguments[__$0]); \n    var C = typeof this === \"function\" ? this : Observable;\n\n    return new C(function(observer) {\n      for (var i$1 = 0; i$1 < items.length; ++i$1) {\n        observer.next(items[i$1]);\n        if (observer.closed)\n          return;\n      }\n\n      observer.complete();\n    });\n  },\n\n});\n\nObject.defineProperty(Observable, getSymbol(\"species\"), {\n  get: function() { return this },\n  configurable: true,\n});\n\nObject.defineProperty(Observable, \"extensions\", {\n  value: {\n    observableSymbol: getSymbol(\"observable\"),\n    setHostReportError: function(fn) { hostReportError = fn },\n  },\n});\n\nexports.Observable = Observable;\n\n\n}, \"*\");","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nvar logger = new Logger('EventsBuffer');\nvar RETRYABLE_CODES = [429, 500];\nvar ACCEPTED_CODES = [202];\nvar EventsBuffer = /** @class */ (function () {\n    function EventsBuffer(client, config) {\n        this._pause = false;\n        this._flush = false;\n        logger.debug('Instantiating buffer with config:', config);\n        this._buffer = [];\n        this._client = client;\n        this._config = config;\n        this._sendBatch = this._sendBatch.bind(this);\n        this._startLoop();\n    }\n    EventsBuffer.prototype.push = function (event) {\n        var _a;\n        if (this._buffer > this._config.bufferSize) {\n            logger.debug('Exceeded analytics events buffer size');\n            return event.handlers.reject(new Error('Exceeded the size of analytics events buffer'));\n        }\n        var eventId = event.params.event.eventId;\n        var bufferElement = (_a = {}, _a[eventId] = event, _a);\n        this._buffer.push(bufferElement);\n    };\n    EventsBuffer.prototype.pause = function () {\n        this._pause = true;\n    };\n    EventsBuffer.prototype.resume = function () {\n        this._pause = false;\n    };\n    EventsBuffer.prototype.updateClient = function (client) {\n        this._client = client;\n    };\n    EventsBuffer.prototype.flush = function () {\n        this._flush = true;\n    };\n    EventsBuffer.prototype._startLoop = function () {\n        if (this._interval) {\n            clearInterval(this._interval);\n        }\n        var flushInterval = this._config.flushInterval;\n        this._interval = setInterval(this._sendBatch, flushInterval);\n    };\n    EventsBuffer.prototype._sendBatch = function () {\n        var bufferLength = this._buffer.length;\n        if (this._flush && !bufferLength) {\n            clearInterval(this._interval);\n        }\n        if (this._pause || !bufferLength) {\n            return;\n        }\n        var flushSize = this._config.flushSize;\n        var batchSize = Math.min(flushSize, bufferLength);\n        var bufferSubset = this._buffer.splice(0, batchSize);\n        this._putEvents(bufferSubset);\n    };\n    EventsBuffer.prototype._putEvents = function (buffer) {\n        return __awaiter(this, void 0, void 0, function () {\n            var eventMap, batchEventParams, data, err_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        eventMap = this._bufferToMap(buffer);\n                        batchEventParams = this._generateBatchEventParams(eventMap);\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this._client.putEvents(batchEventParams).promise()];\n                    case 2:\n                        data = _a.sent();\n                        this._processPutEventsSuccessResponse(data, eventMap);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_1 = _a.sent();\n                        return [2 /*return*/, this._handlePutEventsFailure(err_1, eventMap)];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    EventsBuffer.prototype._generateBatchEventParams = function (eventMap) {\n        var batchEventParams = {\n            ApplicationId: '',\n            EventsRequest: {\n                BatchItem: {},\n            },\n        };\n        Object.values(eventMap).forEach(function (item) {\n            var params = item.params;\n            var event = params.event, timestamp = params.timestamp, config = params.config;\n            var name = event.name, attributes = event.attributes, metrics = event.metrics, eventId = event.eventId, session = event.session;\n            var appId = config.appId, endpointId = config.endpointId;\n            var batchItem = batchEventParams.EventsRequest.BatchItem;\n            batchEventParams.ApplicationId = batchEventParams.ApplicationId || appId;\n            if (!batchItem[endpointId]) {\n                batchItem[endpointId] = {\n                    Endpoint: {},\n                    Events: {},\n                };\n            }\n            batchItem[endpointId].Events[eventId] = {\n                EventType: name,\n                Timestamp: new Date(timestamp).toISOString(),\n                Attributes: attributes,\n                Metrics: metrics,\n                Session: session,\n            };\n        });\n        return batchEventParams;\n    };\n    EventsBuffer.prototype._handlePutEventsFailure = function (err, eventMap) {\n        logger.debug('_putEvents Failed:', err);\n        var statusCode = err.statusCode;\n        if (RETRYABLE_CODES.includes(statusCode)) {\n            var retryableEvents = Object.values(eventMap);\n            this._retry(retryableEvents);\n            return;\n        }\n    };\n    EventsBuffer.prototype._processPutEventsSuccessResponse = function (data, eventMap) {\n        var Results = data.EventsResponse.Results;\n        var retryableEvents = [];\n        Object.entries(Results).forEach(function (_a) {\n            var endpointId = _a[0], endpointValues = _a[1];\n            var responses = endpointValues.EventsItemResponse;\n            Object.entries(responses).forEach(function (_a) {\n                var _b, _c;\n                var eventId = _a[0], _d = _a[1], StatusCode = _d.StatusCode, Message = _d.Message;\n                var eventObject = eventMap[eventId];\n                // manually crafting handlers response to keep API consistant\n                var response = {\n                    EventsResponse: {\n                        Results: (_b = {},\n                            _b[endpointId] = {\n                                EventsItemResponse: (_c = {},\n                                    _c[eventId] = { StatusCode: StatusCode, Message: Message },\n                                    _c),\n                            },\n                            _b),\n                    },\n                };\n                if (ACCEPTED_CODES.includes(StatusCode)) {\n                    eventObject.handlers.resolve(response);\n                    return;\n                }\n                if (RETRYABLE_CODES.includes(StatusCode)) {\n                    retryableEvents.push(eventObject);\n                    return;\n                }\n                var name = eventObject.params.event.name;\n                logger.error(\"event \" + eventId + \" : \" + name + \" failed with error: \" + Message);\n                return eventObject.handlers.reject(response);\n            });\n        });\n        if (retryableEvents.length) {\n            this._retry(retryableEvents);\n        }\n    };\n    EventsBuffer.prototype._retry = function (retryableEvents) {\n        var _a;\n        // retryable events that haven't reached the resendLimit\n        var eligibleEvents = [];\n        retryableEvents.forEach(function (event) {\n            var _a;\n            var params = event.params;\n            var _b = params.event, eventId = _b.eventId, name = _b.name;\n            if (params.resendLimit-- > 0) {\n                logger.debug(\"resending event \" + eventId + \" : \" + name + \" with \" + params.resendLimit + \" retry attempts remaining\");\n                eligibleEvents.push((_a = {}, _a[eventId] = event, _a));\n                return;\n            }\n            logger.debug(\"no retry attempts remaining for event \" + eventId + \" : \" + name);\n        });\n        // add the events to the front of the buffer\n        (_a = this._buffer).unshift.apply(_a, eligibleEvents);\n    };\n    // convert buffer to map, i.e. { eventId1: { params, handler }, eventId2: { params, handlers } }\n    // this allows us to easily access the handlers after receiving a batch response\n    EventsBuffer.prototype._bufferToMap = function (buffer) {\n        return buffer.reduce(function (acc, curVal) {\n            var _a = Object.entries(curVal)[0], key = _a[0], value = _a[1];\n            acc[key] = value;\n            return acc;\n        }, {});\n    };\n    return EventsBuffer;\n}());\nexport default EventsBuffer;\n//# sourceMappingURL=EventBuffer.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ConsoleLogger as Logger, ClientDevice, Platform, Credentials, Signer, JS, Hub, } from '@aws-amplify/core';\nimport * as Pinpoint from 'aws-sdk/clients/pinpoint';\nimport Cache from '@aws-amplify/cache';\nimport { v1 as uuid } from 'uuid';\nimport EventsBuffer from './EventBuffer';\nvar AMPLIFY_SYMBOL = (typeof Symbol !== 'undefined' &&\n    typeof Symbol.for === 'function'\n    ? Symbol.for('amplify_default')\n    : '@@amplify_default');\nvar dispatchAnalyticsEvent = function (event, data) {\n    Hub.dispatch('analytics', { event: event, data: data }, 'Analytics', AMPLIFY_SYMBOL);\n};\nvar logger = new Logger('AWSPinpointProvider');\nvar RETRYABLE_CODES = [429, 500];\nvar ACCEPTED_CODES = [202];\nvar FORBIDDEN_CODE = 403;\nvar BAD_REQUEST_CODE = 400;\nvar MOBILE_SERVICE_NAME = 'mobiletargeting';\nvar EXPIRED_TOKEN_CODE = 'ExpiredTokenException';\nvar UPDATE_ENDPOINT = '_update_endpoint';\nvar SESSION_START = '_session.start';\nvar SESSION_STOP = '_session.stop';\nvar BEACON_SUPPORTED = typeof navigator !== 'undefined' &&\n    navigator &&\n    typeof navigator.sendBeacon === 'function';\n// events buffer\nvar BUFFER_SIZE = 1000;\nvar FLUSH_SIZE = 100;\nvar FLUSH_INTERVAL = 5 * 1000; // 5s\nvar RESEND_LIMIT = 5;\n// params: { event: {name: , .... }, timeStamp, config, resendLimit }\nvar AWSPinpointProvider = /** @class */ (function () {\n    function AWSPinpointProvider(config) {\n        this._endpointGenerating = true;\n        this._endpointUpdateInProgress = false;\n        this._buffer = null;\n        this._endpointBuffer = [];\n        this._config = config ? config : {};\n        this._config.bufferSize = this._config.bufferSize || BUFFER_SIZE;\n        this._config.flushSize = this._config.flushSize || FLUSH_SIZE;\n        this._config.flushInterval = this._config.flushInterval || FLUSH_INTERVAL;\n        this._config.resendLimit = this._config.resendLimit || RESEND_LIMIT;\n        this._clientInfo = ClientDevice.clientInfo();\n    }\n    /**\n     * get the category of the plugin\n     */\n    AWSPinpointProvider.prototype.getCategory = function () {\n        return AWSPinpointProvider.category;\n    };\n    /**\n     * get provider name of the plugin\n     */\n    AWSPinpointProvider.prototype.getProviderName = function () {\n        return AWSPinpointProvider.providerName;\n    };\n    /**\n     * configure the plugin\n     * @param {Object} config - configuration\n     */\n    AWSPinpointProvider.prototype.configure = function (config) {\n        var _this = this;\n        logger.debug('configure Analytics', config);\n        var conf = config || {};\n        this._config = Object.assign({}, this._config, conf);\n        if (this._config.appId && !this._config.disabled) {\n            if (!this._config.endpointId) {\n                var cacheKey = this.getProviderName() + '_' + this._config.appId;\n                this._getEndpointId(cacheKey)\n                    .then(function (endpointId) {\n                    logger.debug('setting endpoint id from the cache', endpointId);\n                    _this._config.endpointId = endpointId;\n                    dispatchAnalyticsEvent('pinpointProvider_configured', null);\n                })\n                    .catch(function (err) {\n                    logger.debug('Failed to generate endpointId', err);\n                });\n            }\n            else {\n                dispatchAnalyticsEvent('pinpointProvider_configured', null);\n            }\n        }\n        else {\n            this._flushBuffer();\n        }\n        return this._config;\n    };\n    /**\n     * record an event\n     * @param {Object} params - the params of an event\n     */\n    AWSPinpointProvider.prototype.record = function (params, handlers) {\n        return __awaiter(this, void 0, void 0, function () {\n            var credentials, timestamp;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        logger.debug('_public record', params);\n                        return [4 /*yield*/, this._getCredentials()];\n                    case 1:\n                        credentials = _a.sent();\n                        if (!credentials || !this._config.appId || !this._config.region) {\n                            logger.debug('cannot send events without credentials, applicationId or region');\n                            return [2 /*return*/, handlers.reject(new Error('No credentials, applicationId or region'))];\n                        }\n                        this._initClients(credentials);\n                        timestamp = new Date().getTime();\n                        // attach the session and eventId\n                        this._generateSession(params);\n                        params.event.eventId = uuid();\n                        Object.assign(params, { timestamp: timestamp, config: this._config });\n                        if (params.event.immediate) {\n                            return [2 /*return*/, this._send(params, handlers)];\n                        }\n                        else {\n                            this._putToBuffer(params, handlers);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AWSPinpointProvider.prototype._sendEndpointUpdate = function (endpointObject) {\n        return __awaiter(this, void 0, void 0, function () {\n            var next;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this._endpointUpdateInProgress) {\n                            this._endpointBuffer.push(endpointObject);\n                            return [2 /*return*/];\n                        }\n                        this._endpointUpdateInProgress = true;\n                        return [4 /*yield*/, this._updateEndpoint(endpointObject)];\n                    case 1:\n                        _a.sent();\n                        next = this._endpointBuffer.shift();\n                        this._endpointUpdateInProgress = false;\n                        next && this._sendEndpointUpdate(next);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * @private\n     * @param params - params for event recording\n     * Put events into buffer\n     */\n    AWSPinpointProvider.prototype._putToBuffer = function (params, handlers) {\n        if (params.event.name === UPDATE_ENDPOINT) {\n            this._sendEndpointUpdate({ params: params, handlers: handlers });\n            return;\n        }\n        this._buffer && this._buffer.push({ params: params, handlers: handlers });\n    };\n    AWSPinpointProvider.prototype._generateSession = function (params) {\n        this._sessionId = this._sessionId || uuid();\n        var event = params.event;\n        switch (event.name) {\n            case SESSION_START:\n                // refresh the session id and session start time\n                this._sessionStartTimestamp = new Date().getTime();\n                this._sessionId = uuid();\n                event.session = {\n                    Id: this._sessionId,\n                    StartTimestamp: new Date(this._sessionStartTimestamp).toISOString(),\n                };\n                break;\n            case SESSION_STOP:\n                var stopTimestamp = new Date().getTime();\n                this._sessionStartTimestamp =\n                    this._sessionStartTimestamp || new Date().getTime();\n                this._sessionId = this._sessionId || uuid();\n                event.session = {\n                    Id: this._sessionId,\n                    Duration: stopTimestamp - this._sessionStartTimestamp,\n                    StartTimestamp: new Date(this._sessionStartTimestamp).toISOString(),\n                    StopTimestamp: new Date(stopTimestamp).toISOString(),\n                };\n                this._sessionId = undefined;\n                this._sessionStartTimestamp = undefined;\n                break;\n            default:\n                this._sessionStartTimestamp =\n                    this._sessionStartTimestamp || new Date().getTime();\n                this._sessionId = this._sessionId || uuid();\n                event.session = {\n                    Id: this._sessionId,\n                    StartTimestamp: new Date(this._sessionStartTimestamp).toISOString(),\n                };\n        }\n    };\n    AWSPinpointProvider.prototype._send = function (params, handlers) {\n        return __awaiter(this, void 0, void 0, function () {\n            var event;\n            return __generator(this, function (_a) {\n                event = params.event;\n                switch (event.name) {\n                    case UPDATE_ENDPOINT:\n                        return [2 /*return*/, this._updateEndpoint({ params: params, handlers: handlers })];\n                    case SESSION_STOP:\n                        return [2 /*return*/, this._pinpointSendStopSession(params, handlers)];\n                    default:\n                        return [2 /*return*/, this._pinpointPutEvents(params, handlers)];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    AWSPinpointProvider.prototype._generateBatchItemContext = function (params) {\n        var _a;\n        var event = params.event, timestamp = params.timestamp, config = params.config;\n        var name = event.name, attributes = event.attributes, metrics = event.metrics, eventId = event.eventId, session = event.session;\n        var appId = config.appId, endpointId = config.endpointId;\n        var endpointContext = {};\n        var eventParams = {\n            ApplicationId: appId,\n            EventsRequest: {\n                BatchItem: {},\n            },\n        };\n        eventParams.EventsRequest.BatchItem[endpointId] = {};\n        var endpointObj = eventParams.EventsRequest.BatchItem[endpointId];\n        endpointObj.Endpoint = endpointContext;\n        endpointObj.Events = (_a = {},\n            _a[eventId] = {\n                EventType: name,\n                Timestamp: new Date(timestamp).toISOString(),\n                Attributes: attributes,\n                Metrics: metrics,\n                Session: session,\n            },\n            _a);\n        return eventParams;\n    };\n    AWSPinpointProvider.prototype._pinpointPutEvents = function (params, handlers) {\n        return __awaiter(this, void 0, void 0, function () {\n            var eventId, endpointId, eventParams, data, _a, _b, _c, StatusCode, Message, err_1;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        eventId = params.event.eventId, endpointId = params.config.endpointId;\n                        eventParams = this._generateBatchItemContext(params);\n                        _d.label = 1;\n                    case 1:\n                        _d.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.pinpointClient.putEvents(eventParams).promise()];\n                    case 2:\n                        data = _d.sent();\n                        _a = endpointId, _b = eventId, _c = data.EventsResponse.Results[_a].EventsItemResponse[_b], StatusCode = _c.StatusCode, Message = _c.Message;\n                        if (ACCEPTED_CODES.includes(StatusCode)) {\n                            logger.debug('record event success. ', data);\n                            return [2 /*return*/, handlers.resolve(data)];\n                        }\n                        else {\n                            if (RETRYABLE_CODES.includes(StatusCode)) {\n                                this._retry(params, handlers);\n                            }\n                            else {\n                                logger.error(\"Event \" + eventId + \" is not accepted, the error is \" + Message);\n                                return [2 /*return*/, handlers.reject(data)];\n                            }\n                        }\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_1 = _d.sent();\n                        this._eventError(err_1);\n                        return [2 /*return*/, handlers.reject(err_1)];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AWSPinpointProvider.prototype._pinpointSendStopSession = function (params, handlers) {\n        if (!BEACON_SUPPORTED) {\n            this._pinpointPutEvents(params, handlers);\n            return;\n        }\n        var eventParams = this._generateBatchItemContext(params);\n        var region = this._config.region;\n        var ApplicationId = eventParams.ApplicationId, EventsRequest = eventParams.EventsRequest;\n        var accessInfo = {\n            secret_key: this._config.credentials.secretAccessKey,\n            access_key: this._config.credentials.accessKeyId,\n            session_token: this._config.credentials.sessionToken,\n        };\n        var url = \"https://pinpoint.\" + region + \".amazonaws.com/v1/apps/\" + ApplicationId + \"/events/legacy\";\n        var body = JSON.stringify(EventsRequest);\n        var method = 'POST';\n        var request = {\n            url: url,\n            body: body,\n            method: method,\n        };\n        var serviceInfo = { region: region, service: MOBILE_SERVICE_NAME };\n        var requestUrl = Signer.signUrl(request, accessInfo, serviceInfo, null);\n        var success = navigator.sendBeacon(requestUrl, body);\n        if (success) {\n            return handlers.resolve('sendBeacon success');\n        }\n        return handlers.reject('sendBeacon failure');\n    };\n    AWSPinpointProvider.prototype._retry = function (params, handlers) {\n        var resendLimit = params.config.resendLimit;\n        // For backward compatibility\n        params.resendLimit =\n            typeof params.resendLimit === 'number' ? params.resendLimit : resendLimit;\n        if (params.resendLimit-- > 0) {\n            logger.debug(\"resending event \" + params.eventName + \" with \" + params.resendLimit + \" retry times left\");\n            this._pinpointPutEvents(params, handlers);\n        }\n        else {\n            logger.debug(\"retry times used up for event \" + params.eventName);\n        }\n    };\n    AWSPinpointProvider.prototype._updateEndpoint = function (endpointObject) {\n        return __awaiter(this, void 0, void 0, function () {\n            var params, handlers, config, event, appId, endpointId, request, update_params, data, err_2, failureData;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        params = endpointObject.params, handlers = endpointObject.handlers;\n                        config = params.config, event = params.event;\n                        appId = config.appId, endpointId = config.endpointId;\n                        request = this._endpointRequest(config, JS.transferKeyToLowerCase(event, [], ['attributes', 'userAttributes', 'Attributes', 'UserAttributes']));\n                        update_params = {\n                            ApplicationId: appId,\n                            EndpointId: endpointId,\n                            EndpointRequest: request,\n                        };\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.pinpointClient\n                                .updateEndpoint(update_params)\n                                .promise()];\n                    case 2:\n                        data = _a.sent();\n                        logger.debug('updateEndpoint success', data);\n                        this._endpointGenerating = false;\n                        this._resumeBuffer();\n                        handlers.resolve(data);\n                        return [2 /*return*/];\n                    case 3:\n                        err_2 = _a.sent();\n                        failureData = {\n                            err: err_2,\n                            update_params: update_params,\n                            endpointObject: endpointObject,\n                        };\n                        return [2 /*return*/, this._handleEndpointUpdateFailure(failureData)];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AWSPinpointProvider.prototype._handleEndpointUpdateFailure = function (failureData) {\n        return __awaiter(this, void 0, void 0, function () {\n            var err, endpointObject, statusCode, exponential;\n            return __generator(this, function (_a) {\n                err = failureData.err, endpointObject = failureData.endpointObject;\n                statusCode = err.statusCode;\n                logger.debug('updateEndpoint failed', err);\n                switch (statusCode) {\n                    case BAD_REQUEST_CODE:\n                        return [2 /*return*/, this._handleEndpointUpdateBadRequest(failureData)];\n                    case FORBIDDEN_CODE:\n                        return [2 /*return*/, this._handleEndpointUpdateForbidden(failureData)];\n                    default:\n                        if (RETRYABLE_CODES.includes(statusCode)) {\n                            exponential = true;\n                            return [2 /*return*/, this._retryEndpointUpdate(endpointObject, exponential)];\n                        }\n                        endpointObject.handlers.reject(err);\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    AWSPinpointProvider.prototype._handleEndpointUpdateBadRequest = function (failureData) {\n        return __awaiter(this, void 0, void 0, function () {\n            var err, update_params, endpointObject, message, ApplicationId, EndpointRequest, err_3;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        err = failureData.err, update_params = failureData.update_params, endpointObject = failureData.endpointObject;\n                        message = err.message;\n                        ApplicationId = update_params.ApplicationId, EndpointRequest = update_params.EndpointRequest;\n                        if (!String(message).startsWith('Exceeded maximum endpoint per user count')) {\n                            return [2 /*return*/, endpointObject.handlers.reject(err)];\n                        }\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this._removeUnusedEndpoints(ApplicationId, EndpointRequest.User.UserId)];\n                    case 2:\n                        _a.sent();\n                        logger.debug('Removed unused endpoints successfully');\n                        this._retryEndpointUpdate(endpointObject);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_3 = _a.sent();\n                        logger.warn(\"Failed to remove unused endpoints with error: \" + err_3);\n                        logger.warn(\"Please ensure you have updated your Pinpoint IAM Policy \" +\n                            \"with the Action: \\\"mobiletargeting:GetUserEndpoints\\\" \" +\n                            \"in order to get endpoints info of the user\");\n                        return [2 /*return*/, endpointObject.handlers.reject(err_3)];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AWSPinpointProvider.prototype._handleEndpointUpdateForbidden = function (failureData) {\n        var err = failureData.err, endpointObject = failureData.endpointObject;\n        var code = err.code, retryable = err.retryable;\n        if (code !== EXPIRED_TOKEN_CODE && !retryable) {\n            return endpointObject.handlers.reject(err);\n        }\n        this._retryEndpointUpdate(endpointObject);\n    };\n    AWSPinpointProvider.prototype._retryEndpointUpdate = function (endpointObject, exponential) {\n        if (exponential === void 0) { exponential = false; }\n        logger.debug('_retryEndpointUpdate', endpointObject);\n        var params = endpointObject.params;\n        // TODO: implement retry with exp back off once exp function is available\n        var resendLimit = params.config.resendLimit;\n        params.resendLimit =\n            typeof params.resendLimit === 'number' ? params.resendLimit : resendLimit;\n        if (params.resendLimit-- > 0) {\n            logger.debug(\"resending endpoint update \" + params.event.eventId + \" with \" + params.resendLimit + \" retry attempts remaining\");\n            // insert at the front of endpointBuffer\n            this._endpointBuffer.length\n                ? this._endpointBuffer.unshift(endpointObject)\n                : this._updateEndpoint(endpointObject);\n            return;\n        }\n        logger.warn(\"resending endpoint update \" + params.event.eventId + \" failed after \" + params.config.resendLimit + \" attempts\");\n        if (this._endpointGenerating) {\n            logger.error('Initial endpoint update failed. ');\n        }\n    };\n    AWSPinpointProvider.prototype._removeUnusedEndpoints = function (appId, userId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (res, rej) {\n                        // TODO: re-write with Promise (during refactor pt. 2)\n                        _this.pinpointClient.getUserEndpoints({\n                            ApplicationId: appId,\n                            UserId: userId,\n                        }, function (err, data) {\n                            if (err) {\n                                logger.debug(\"Failed to get endpoints associated with the userId: \" + userId + \" with error\", err);\n                                return rej(err);\n                            }\n                            var endpoints = data.EndpointsResponse.Item;\n                            logger.debug(\"get endpoints associated with the userId: \" + userId + \" with data\", endpoints);\n                            var endpointToBeDeleted = endpoints[0];\n                            for (var i = 1; i < endpoints.length; i++) {\n                                var timeStamp1 = Date.parse(endpointToBeDeleted['EffectiveDate']);\n                                var timeStamp2 = Date.parse(endpoints[i]['EffectiveDate']);\n                                // delete the one with invalid effective date\n                                if (isNaN(timeStamp1))\n                                    break;\n                                if (isNaN(timeStamp2)) {\n                                    endpointToBeDeleted = endpoints[i];\n                                    break;\n                                }\n                                if (timeStamp2 < timeStamp1) {\n                                    endpointToBeDeleted = endpoints[i];\n                                }\n                            }\n                            // update the endpoint's user id with an empty string\n                            var update_params = {\n                                ApplicationId: appId,\n                                EndpointId: endpointToBeDeleted['Id'],\n                                EndpointRequest: {\n                                    User: {\n                                        UserId: '',\n                                    },\n                                },\n                            };\n                            _this.pinpointClient.updateEndpoint(update_params, function (err, data) {\n                                if (err) {\n                                    logger.debug('Failed to update the endpoint', err);\n                                    return rej(err);\n                                }\n                                logger.debug('The old endpoint is updated with an empty string for user id');\n                                return res(data);\n                            });\n                        });\n                    })];\n            });\n        });\n    };\n    /**\n     * @private\n     * @param config\n     * Init the clients\n     */\n    AWSPinpointProvider.prototype._initClients = function (credentials) {\n        return __awaiter(this, void 0, void 0, function () {\n            var identityId, region;\n            return __generator(this, function (_a) {\n                logger.debug('init clients');\n                if (this.pinpointClient &&\n                    this._config.credentials &&\n                    this._config.credentials.sessionToken === credentials.sessionToken &&\n                    this._config.credentials.identityId === credentials.identityId) {\n                    logger.debug('no change for aws credentials, directly return from init');\n                    return [2 /*return*/];\n                }\n                identityId = this._config.credentials\n                    ? this._config.credentials.identityId\n                    : null;\n                this._config.credentials = credentials;\n                region = this._config.region;\n                logger.debug('init clients with credentials', credentials);\n                this.pinpointClient = new Pinpoint({ region: region, credentials: credentials });\n                if (this._bufferExists() && identityId === credentials.identityId) {\n                    // if the identity has remained the same, pass the updated client to the buffer\n                    this._updateBufferClient();\n                }\n                else {\n                    // otherwise flush the buffer and instantiate a new one\n                    // this will cause the old buffer to send any remaining events\n                    // with the old credentials and then stop looping and shortly thereafter get picked up by GC\n                    this._initBuffer();\n                }\n                this._customizePinpointClientReq();\n                return [2 /*return*/];\n            });\n        });\n    };\n    AWSPinpointProvider.prototype._bufferExists = function () {\n        return this._buffer && this._buffer instanceof EventsBuffer;\n    };\n    AWSPinpointProvider.prototype._initBuffer = function () {\n        if (this._bufferExists()) {\n            this._flushBuffer();\n        }\n        this._buffer = new EventsBuffer(this.pinpointClient, this._config);\n        // if the first endpoint update hasn't yet resolved pause the buffer to\n        // prevent race conditions. It will be resumed as soon as that request succeeds\n        if (this._endpointGenerating) {\n            this._buffer.pause();\n        }\n    };\n    AWSPinpointProvider.prototype._updateBufferClient = function () {\n        if (this._bufferExists()) {\n            this._buffer.updateClient(this.pinpointClient);\n        }\n    };\n    AWSPinpointProvider.prototype._flushBuffer = function () {\n        if (this._bufferExists()) {\n            this._buffer.flush();\n            this._buffer = null;\n        }\n    };\n    AWSPinpointProvider.prototype._resumeBuffer = function () {\n        if (this._bufferExists()) {\n            this._buffer.resume();\n        }\n    };\n    AWSPinpointProvider.prototype._customizePinpointClientReq = function () {\n        this.pinpointClient.customizeRequests(function (request) {\n            request.on('build', function (req) {\n                if (Platform.isReactNative) {\n                    req.httpRequest.headers['user-agent'] = Platform.userAgent;\n                }\n                // TODO: remove this after we switch to using the current API (non-legacy)\n                if (req.httpRequest.path.includes('/events')) {\n                    req.httpRequest.path += '/legacy';\n                }\n            });\n        });\n    };\n    AWSPinpointProvider.prototype._getEndpointId = function (cacheKey) {\n        return __awaiter(this, void 0, void 0, function () {\n            var endpointId;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, Cache.getItem(cacheKey)];\n                    case 1:\n                        endpointId = _a.sent();\n                        logger.debug('endpointId from cache', endpointId, 'type', typeof endpointId);\n                        if (!endpointId) {\n                            endpointId = uuid();\n                            Cache.setItem(cacheKey, endpointId);\n                        }\n                        return [2 /*return*/, endpointId];\n                }\n            });\n        });\n    };\n    /**\n     * EndPoint request\n     * @return {Object} - The request of updating endpoint\n     */\n    AWSPinpointProvider.prototype._endpointRequest = function (config, event) {\n        var credentials = config.credentials;\n        var clientInfo = this._clientInfo || {};\n        var clientContext = config.clientContext || {};\n        // for now we have three different ways for default endpoint configurations\n        // clientInfo\n        // clientContext (deprecated)\n        // config.endpoint\n        var defaultEndpointConfig = config.endpoint || {};\n        var demographicByClientInfo = {\n            appVersion: clientInfo.appVersion,\n            make: clientInfo.make,\n            model: clientInfo.model,\n            modelVersion: clientInfo.version,\n            platform: clientInfo.platform,\n        };\n        // for backward compatibility\n        var clientId = clientContext.clientId, appTitle = clientContext.appTitle, appVersionName = clientContext.appVersionName, appVersionCode = clientContext.appVersionCode, appPackageName = clientContext.appPackageName, demographicByClientContext = __rest(clientContext, [\"clientId\", \"appTitle\", \"appVersionName\", \"appVersionCode\", \"appPackageName\"]);\n        var channelType = event.address\n            ? clientInfo.platform === 'android'\n                ? 'GCM'\n                : 'APNS'\n            : undefined;\n        var tmp = __assign(__assign(__assign({ channelType: channelType, requestId: uuid(), effectiveDate: new Date().toISOString() }, defaultEndpointConfig), event), { attributes: __assign(__assign({}, defaultEndpointConfig.attributes), event.attributes), demographic: __assign(__assign(__assign(__assign({}, demographicByClientInfo), demographicByClientContext), defaultEndpointConfig.demographic), event.demographic), location: __assign(__assign({}, defaultEndpointConfig.location), event.location), metrics: __assign(__assign({}, defaultEndpointConfig.metrics), event.metrics), user: {\n                userId: event.userId ||\n                    defaultEndpointConfig.userId ||\n                    credentials.identityId,\n                userAttributes: __assign(__assign({}, defaultEndpointConfig.userAttributes), event.userAttributes),\n            } });\n        // eliminate unnecessary params\n        var userId = tmp.userId, userAttributes = tmp.userAttributes, name = tmp.name, session = tmp.session, eventId = tmp.eventId, immediate = tmp.immediate, ret = __rest(tmp, [\"userId\", \"userAttributes\", \"name\", \"session\", \"eventId\", \"immediate\"]);\n        return JS.transferKeyToUpperCase(ret, [], ['metrics', 'userAttributes', 'attributes']);\n    };\n    AWSPinpointProvider.prototype._eventError = function (err) {\n        logger.error('record event failed.', err);\n        logger.warn(\"Please ensure you have updated your Pinpoint IAM Policy \" +\n            \"with the Action: \\\"mobiletargeting:PutEvents\\\" \" +\n            \"in order to record events\");\n    };\n    AWSPinpointProvider.prototype._getCredentials = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var credentials, err_4;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, Credentials.get()];\n                    case 1:\n                        credentials = _a.sent();\n                        if (!credentials)\n                            return [2 /*return*/, null];\n                        logger.debug('set credentials for analytics', credentials);\n                        return [2 /*return*/, Credentials.shear(credentials)];\n                    case 2:\n                        err_4 = _a.sent();\n                        logger.debug('ensure credentials error', err_4);\n                        return [2 /*return*/, null];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AWSPinpointProvider.category = 'Analytics';\n    AWSPinpointProvider.providerName = 'AWSPinpoint';\n    return AWSPinpointProvider;\n}());\nexport default AWSPinpointProvider;\n//# sourceMappingURL=AWSPinpointProvider.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar lists = [];\nvar MethodEmbed = /** @class */ (function () {\n    function MethodEmbed(context, methodName) {\n        this.context = context;\n        this.methodName = methodName;\n        this._originalMethod = context[methodName].bind(context);\n    }\n    MethodEmbed.add = function (context, methodName, methodOverride) {\n        getInstance(context, methodName).set(methodOverride);\n    };\n    MethodEmbed.remove = function (context, methodName) {\n        getInstance(context, methodName).remove();\n    };\n    MethodEmbed.prototype.set = function (methodOverride) {\n        var _this = this;\n        this.context[this.methodName] = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return methodOverride(_this._originalMethod.apply(_this, args));\n        };\n    };\n    MethodEmbed.prototype.remove = function () {\n        this.context[this.methodName] = this._originalMethod;\n    };\n    return MethodEmbed;\n}());\nexport default MethodEmbed;\nfunction getInstance(context, methodName) {\n    var instance = lists.filter(function (h) { return h.context === context && h.methodName === methodName; })[0];\n    if (!instance) {\n        instance = new MethodEmbed(context, methodName);\n        lists.push(instance);\n    }\n    return instance;\n}\n//# sourceMappingURL=MethodEmbed.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport MethodEmbed from '../utils/MethodEmbed';\nimport { ConsoleLogger as Logger, JS } from '@aws-amplify/core';\nvar logger = new Logger('PageViewTracker');\nvar PREV_URL_KEY = 'aws-amplify-analytics-prevUrl';\nvar getUrl = function () {\n    if (!JS.browserOrNode().isBrowser)\n        return '';\n    else\n        return window.location.origin + window.location.pathname;\n};\nvar defaultOpts = {\n    enable: false,\n    provider: 'AWSPinpoint',\n    getUrl: getUrl,\n};\nvar PageViewTracker = /** @class */ (function () {\n    function PageViewTracker(tracker, opts) {\n        logger.debug('initialize pageview tracker with opts', opts);\n        this._config = Object.assign({}, defaultOpts, opts);\n        this._tracker = tracker;\n        this._hasEnabled = false;\n        this._trackFunc = this._trackFunc.bind(this);\n        if (this._config.type === 'SPA') {\n            this._pageViewTrackSPA();\n        }\n        else {\n            this._pageViewTrackDefault();\n        }\n    }\n    PageViewTracker.prototype.configure = function (opts) {\n        Object.assign(this._config, opts);\n        // if spa, need to remove those listeners if disabled\n        if (this._config.type === 'SPA') {\n            this._pageViewTrackSPA();\n        }\n        return this._config;\n    };\n    PageViewTracker.prototype._isSameUrl = function () {\n        var prevUrl = sessionStorage.getItem(PREV_URL_KEY);\n        var curUrl = this._config.getUrl();\n        if (prevUrl === curUrl) {\n            logger.debug('the url is same');\n            return true;\n        }\n        else\n            return false;\n    };\n    PageViewTracker.prototype._pageViewTrackDefault = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var url, customAttrs, _a, attributes;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!JS.browserOrNode().isBrowser ||\n                            !window.addEventListener ||\n                            !window.sessionStorage) {\n                            logger.debug('not in the supported web enviroment');\n                            return [2 /*return*/];\n                        }\n                        url = this._config.getUrl();\n                        if (!(typeof this._config.attributes === 'function')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this._config.attributes()];\n                    case 1:\n                        _a = _b.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        _a = this._config.attributes;\n                        _b.label = 3;\n                    case 3:\n                        customAttrs = _a;\n                        attributes = Object.assign({\n                            url: url,\n                        }, customAttrs);\n                        if (this._config.enable && !this._isSameUrl()) {\n                            this._tracker({\n                                name: this._config.eventName || 'pageView',\n                                attributes: attributes,\n                            }, this._config.provider).catch(function (e) {\n                                logger.debug('Failed to record the page view event', e);\n                            });\n                            sessionStorage.setItem(PREV_URL_KEY, url);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PageViewTracker.prototype._trackFunc = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var url, customAttrs, _a, attributes;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!JS.browserOrNode().isBrowser ||\n                            !window.addEventListener ||\n                            !history.pushState ||\n                            !window.sessionStorage) {\n                            logger.debug('not in the supported web enviroment');\n                            return [2 /*return*/];\n                        }\n                        url = this._config.getUrl();\n                        if (!(typeof this._config.attributes === 'function')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this._config.attributes()];\n                    case 1:\n                        _a = _b.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        _a = this._config.attributes;\n                        _b.label = 3;\n                    case 3:\n                        customAttrs = _a;\n                        attributes = Object.assign({\n                            url: url,\n                        }, customAttrs);\n                        if (!this._isSameUrl()) {\n                            this._tracker({\n                                name: this._config.eventName || 'pageView',\n                                attributes: attributes,\n                            }, this._config.provider).catch(function (e) {\n                                logger.debug('Failed to record the page view event', e);\n                            });\n                            sessionStorage.setItem(PREV_URL_KEY, url);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PageViewTracker.prototype._pageViewTrackSPA = function () {\n        if (!JS.browserOrNode().isBrowser ||\n            !window.addEventListener ||\n            !history.pushState) {\n            logger.debug('not in the supported web enviroment');\n            return;\n        }\n        if (this._config.enable && !this._hasEnabled) {\n            MethodEmbed.add(history, 'pushState', this._trackFunc);\n            MethodEmbed.add(history, 'replaceState', this._trackFunc);\n            window.addEventListener('popstate', this._trackFunc);\n            this._trackFunc();\n            this._hasEnabled = true;\n        }\n        else {\n            MethodEmbed.remove(history, 'pushState');\n            MethodEmbed.remove(history, 'replaceState');\n            window.removeEventListener('popstate', this._trackFunc);\n            this._hasEnabled = false;\n        }\n    };\n    return PageViewTracker;\n}());\nexport default PageViewTracker;\n//# sourceMappingURL=PageViewTracker.js.map","/**\n * Copyright (c) 2017, Philip Walton <philip@philipwalton.com>\n */\nimport { JS } from '@aws-amplify/core';\nvar proto = JS.browserOrNode().isBrowser && window['Element']\n    ? window['Element'].prototype\n    : null;\nvar nativeMatches = proto\n    ? proto.matches ||\n        // @ts-ignore\n        proto.matchesSelector ||\n        // @ts-ignore\n        proto.webkitMatchesSelector ||\n        // @ts-ignore\n        proto.mozMatchesSelector ||\n        // @ts-ignore\n        proto.msMatchesSelector ||\n        // @ts-ignore\n        proto.oMatchesSelector\n    : null;\n/**\n * Tests if a DOM elements matches any of the test DOM elements or selectors.\n * @param {Element} element The DOM element to test.\n * @param {Element|string|Array<Element|string>} test A DOM element, a CSS\n *     selector, or an array of DOM elements or CSS selectors to match against.\n * @return {boolean} True of any part of the test matches.\n */\nexport default function matches(element, test) {\n    // Validate input.\n    if (element && element.nodeType === 1 && test) {\n        // if test is a string or DOM element test it.\n        if (typeof test === 'string' || test.nodeType === 1) {\n            return (element === test || matchesSelector(element, /** @type {string} */ test));\n        }\n        else if ('length' in test) {\n            // if it has a length property iterate over the items\n            // and return true if any match.\n            for (var i = 0, item = void 0; (item = test[i]); i++) {\n                if (element === item || matchesSelector(element, item))\n                    return true;\n            }\n        }\n    }\n    // Still here? Return false\n    return false;\n}\n/**\n * Tests whether a DOM element matches a selector. This polyfills the native\n * Element.prototype.matches method across browsers.\n * @param {!Element} element The DOM element to test.\n * @param {string} selector The CSS selector to test element against.\n * @return {boolean} True if the selector matches.\n */\nfunction matchesSelector(element, selector) {\n    if (typeof selector !== 'string')\n        return false;\n    if (nativeMatches)\n        return nativeMatches.call(element, selector);\n    var nodes = element.parentNode.querySelectorAll(selector);\n    for (var i = 0, node = void 0; (node = nodes[i]); i++) {\n        if (node === element)\n            return true;\n    }\n    return false;\n}\n//# sourceMappingURL=matches.js.map","/**\n * Copyright (c) 2017, Philip Walton <philip@philipwalton.com>\n */\nimport closest from './closest';\nimport matches from './matches';\n/**\n * Delegates the handling of events for an element matching a selector to an\n * ancestor of the matching element.\n * @param {!Node} ancestor The ancestor element to add the listener to.\n * @param {string} eventType The event type to listen to.\n * @param {string} selector A CSS selector to match against child elements.\n * @param {!Function} callback A function to run any time the event happens.\n * @param {Object=} opts A configuration options object. The available options:\n *     - useCapture<boolean>: If true, bind to the event capture phase.\n *     - deep<boolean>: If true, delegate into shadow trees.\n * @return {Object} The delegate object. It contains a destroy method.\n */\nexport default function delegate(ancestor, eventType, selector, callback, opts) {\n    if (opts === void 0) { opts = {}; }\n    // Defines the event listener.\n    var listener = function (event) {\n        var delegateTarget;\n        // If opts.composed is true and the event originated from inside a Shadow\n        // tree, check the composed path nodes.\n        if (opts['composed'] && typeof event['composedPath'] === 'function') {\n            var composedPath = event.composedPath();\n            for (var i = 0, node = void 0; (node = composedPath[i]); i++) {\n                if (node.nodeType === 1 && matches(node, selector)) {\n                    delegateTarget = node;\n                }\n            }\n        }\n        else {\n            // Otherwise check the parents.\n            delegateTarget = closest(event.target, selector, true);\n        }\n        if (delegateTarget) {\n            callback.call(delegateTarget, event, delegateTarget);\n        }\n    };\n    ancestor.addEventListener(eventType, listener, opts['useCapture']);\n    return {\n        destroy: function () {\n            ancestor.removeEventListener(eventType, listener, opts['useCapture']);\n        },\n    };\n}\n//# sourceMappingURL=delegate.js.map","/**\n * Copyright (c) 2017, Philip Walton <philip@philipwalton.com>\n */\nimport matches from './matches';\nimport parents from './parents';\n/**\n * Gets the closest parent element that matches the passed selector.\n * @param {Element} element The element whose parents to check.\n * @param {string} selector The CSS selector to match against.\n * @param {boolean=} shouldCheckSelf True if the selector should test against\n *     the passed element itself.\n * @return {Element|undefined} The matching element or undefined.\n */\nexport default function closest(element, selector, shouldCheckSelf) {\n    if (shouldCheckSelf === void 0) { shouldCheckSelf = false; }\n    if (!(element && element.nodeType === 1 && selector))\n        return;\n    var parentElements = (shouldCheckSelf ? [element] : []).concat(parents(element));\n    for (var i = 0, parent_1; (parent_1 = parentElements[i]); i++) {\n        if (matches(parent_1, selector))\n            return parent_1;\n    }\n}\n//# sourceMappingURL=closest.js.map","/**\n * Copyright (c) 2017, Philip Walton <philip@philipwalton.com>\n */\n/**\n * Returns an array of a DOM element's parent elements.\n * @param {!Element} element The DOM element whose parents to get.\n * @return {!Array} An array of all parent elemets, or an empty array if no\n *     parent elements are found.\n */\nexport default function parents(ele) {\n    var list = [];\n    var element = ele;\n    while (element && element.parentNode && element.parentNode.nodeType === 1) {\n        element = /** @type {!Element} */ element.parentNode;\n        list.push(element);\n    }\n    return list;\n}\n//# sourceMappingURL=parents.js.map","/**\n * Copyright (c) 2017, Philip Walton <philip@philipwalton.com>\n */\nimport { JS } from '@aws-amplify/core';\nvar HTTP_PORT = '80';\nvar HTTPS_PORT = '443';\nvar DEFAULT_PORT = RegExp(':(' + HTTP_PORT + '|' + HTTPS_PORT + ')$');\nvar a = JS.browserOrNode().isBrowser ? document.createElement('a') : null;\nvar cache = {};\n/**\n * Parses the given url and returns an object mimicing a `Location` object.\n * @param {string} url The url to parse.\n * @return {!Object} An object with the same properties as a `Location`.\n */\nexport default function parseUrl(u) {\n    var url = u;\n    // All falsy values (as well as \".\") should map to the current URL.\n    url = !url || url === '.' ? location.href : url;\n    if (cache[url])\n        return cache[url];\n    a.href = url;\n    // When parsing file relative paths (e.g. `../index.html`), IE will correctly\n    // resolve the `href` property but will keep the `..` in the `path` property.\n    // It will also not include the `host` or `hostname` properties. Furthermore,\n    // IE will sometimes return no protocol or just a colon, especially for things\n    // like relative protocol URLs (e.g. \"//google.com\").\n    // To workaround all of these issues, we reparse with the full URL from the\n    // `href` property.\n    if (url.charAt(0) === '.' || url.charAt(0) === '/')\n        return parseUrl(a.href);\n    // Don't include default ports.\n    var port = a.port === HTTP_PORT || a.port === HTTPS_PORT ? '' : a.port;\n    // PhantomJS sets the port to \"0\" when using the file: protocol.\n    port = port === '0' ? '' : port;\n    // Sometimes IE incorrectly includes a port for default ports\n    // (e.g. `:80` or `:443`) even when no port is specified in the URL.\n    // http://bit.ly/1rQNoMg\n    var host = a.host.replace(DEFAULT_PORT, '');\n    // Not all browser support `origin` so we have to build it.\n    var origin = a['origin'] ? a['origin'] : a.protocol + '//' + host;\n    // Sometimes IE doesn't include the leading slash for pathname.\n    // http://bit.ly/1rQNoMg\n    var pathname = a.pathname.charAt(0) === '/' ? a.pathname : '/' + a.pathname;\n    return (cache[url] = {\n        hash: a.hash,\n        host: host,\n        hostname: a.hostname,\n        href: a.href,\n        origin: origin,\n        pathname: pathname,\n        port: port,\n        protocol: a.protocol,\n        search: a.search,\n    });\n}\n//# sourceMappingURL=parse-url.js.map","var HTML5_MEDIA_EVENT;\n(function (HTML5_MEDIA_EVENT) {\n    HTML5_MEDIA_EVENT[\"PLAY\"] = \"play\";\n    HTML5_MEDIA_EVENT[\"PAUSE\"] = \"pause\";\n    HTML5_MEDIA_EVENT[\"ENDED\"] = \"Ended\";\n})(HTML5_MEDIA_EVENT || (HTML5_MEDIA_EVENT = {}));\nvar MEDIA_TYPE;\n(function (MEDIA_TYPE) {\n    MEDIA_TYPE[\"IFRAME\"] = \"IFRAME\";\n    MEDIA_TYPE[\"VIDEO\"] = \"VIDEO\";\n    MEDIA_TYPE[\"AUDIO\"] = \"AUDIO\";\n})(MEDIA_TYPE || (MEDIA_TYPE = {}));\nvar EVENT_TYPE;\n(function (EVENT_TYPE) {\n    EVENT_TYPE[\"PLAY\"] = \"Play\";\n    EVENT_TYPE[\"ENDED\"] = \"Ended\";\n    EVENT_TYPE[\"PAUSE\"] = \"Pause\";\n    EVENT_TYPE[\"TIME_WATCHED\"] = \"TimeWatched\";\n})(EVENT_TYPE || (EVENT_TYPE = {}));\nvar MediaAutoTrack = /** @class */ (function () {\n    function MediaAutoTrack(params, provider) {\n        var _a;\n        this.eventActionMapping = (_a = {},\n            _a[EVENT_TYPE.ENDED] = this.endedEventAction.bind(this),\n            _a[EVENT_TYPE.PLAY] = this.playEventAction.bind(this),\n            _a[EVENT_TYPE.PAUSE] = this.pauseEventAction.bind(this),\n            _a);\n        var eventData = params.eventData;\n        this._params = params;\n        this._mediaElement = document.getElementById(eventData.properties['domElementId']);\n        this._started = false;\n        this._provider = provider;\n        var mediaTrackFunMapping = {\n            IFRAME: this._iframeMediaTracker,\n            VIDEO: this._html5MediaTracker,\n            AUDIO: this._html5MediaTracker,\n        };\n        mediaTrackFunMapping[this._mediaElement.tagName].bind(this)();\n        this._initYoutubeFrame();\n    }\n    MediaAutoTrack.prototype._initYoutubeFrame = function () {\n        this._youTubeIframeLoader = {\n            src: 'https://www.youtube.com/iframe_api',\n            loading: false,\n            loaded: false,\n            listeners: [],\n            load: function (callback) {\n                var _this = this;\n                this.listeners.push(callback);\n                if (this.loaded) {\n                    setTimeout(function () {\n                        _this.done();\n                    });\n                    return;\n                }\n                if (this.loading) {\n                    return;\n                }\n                this.loading = true;\n                window['onYouTubeIframeAPIReady'] = function () {\n                    _this.loaded = true;\n                    _this.done();\n                };\n                var script = document.createElement('script');\n                script.type = 'text/javascript';\n                script.src = this.src;\n                document.body.appendChild(script);\n            },\n            done: function () {\n                delete window['onYouTubeIframeAPIReady'];\n                while (this.listeners.length) {\n                    this.listeners.pop()(window['YT']);\n                }\n            },\n        };\n    };\n    MediaAutoTrack.prototype._iframeMediaTracker = function () {\n        var that = this;\n        setInterval(function () {\n            if (that._started) {\n                that.recordEvent(MEDIA_TYPE.IFRAME, EVENT_TYPE.TIME_WATCHED);\n            }\n        }, 3 * 1000);\n        this._youTubeIframeLoader.load(function (YT) {\n            that._iframePlayer = new YT.Player(that._mediaElement.id, {\n                events: { onStateChange: that._onPlayerStateChange.bind(that) },\n            });\n        });\n    };\n    MediaAutoTrack.prototype._onPlayerStateChange = function (event) {\n        var iframeEventMapping = {\n            0: EVENT_TYPE.ENDED,\n            1: EVENT_TYPE.PLAY,\n            2: EVENT_TYPE.PAUSE,\n        };\n        var eventType = iframeEventMapping[event.data];\n        if (eventType) {\n            this.eventActionMapping[eventType](MEDIA_TYPE.IFRAME);\n        }\n    };\n    MediaAutoTrack.prototype._html5MediaTracker = function () {\n        var that = this;\n        setInterval(function () {\n            if (that._started) {\n                that.recordEvent(MEDIA_TYPE.VIDEO, EVENT_TYPE.TIME_WATCHED);\n            }\n        }, 3 * 1000);\n        this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.PLAY, function () {\n            that.eventActionMapping[EVENT_TYPE.PLAY](MEDIA_TYPE.VIDEO);\n        }, false);\n        this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.PAUSE, function () {\n            that.eventActionMapping[EVENT_TYPE.PAUSE](MEDIA_TYPE.VIDEO);\n        }, false);\n        this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.ENDED, function () {\n            that.eventActionMapping[EVENT_TYPE.ENDED](MEDIA_TYPE.VIDEO);\n        }, false);\n    };\n    MediaAutoTrack.prototype.playEventAction = function (mediaType) {\n        this._started = true;\n        this.recordEvent(mediaType, EVENT_TYPE.PLAY);\n    };\n    MediaAutoTrack.prototype.pauseEventAction = function (mediaType) {\n        this._started = false;\n        this.recordEvent(mediaType, EVENT_TYPE.PAUSE);\n    };\n    MediaAutoTrack.prototype.endedEventAction = function (mediaType) {\n        this._started = false;\n        this.recordEvent(mediaType, EVENT_TYPE.ENDED);\n    };\n    MediaAutoTrack.prototype.recordEvent = function (mediaType, eventType) {\n        var newParams = Object.assign({}, this._params);\n        var eventData = newParams.eventData;\n        eventData.eventType = eventType;\n        if (mediaType === MEDIA_TYPE.VIDEO) {\n            eventData.properties.timestamp = this._mediaElement.currentTime;\n            eventData.properties.duration = this._mediaElement.duration;\n        }\n        else {\n            eventData.properties.timestamp = this._financial(this._iframePlayer.getCurrentTime());\n            eventData.properties.duration = this._financial(this._iframePlayer.getDuration());\n        }\n        var percentage = parseFloat(eventData.properties.timestamp) /\n            parseFloat(eventData.properties.duration);\n        eventData.properties.eventValue = Number(percentage.toFixed(4));\n        delete eventData.properties.domElementId;\n        this._provider.putToBuffer(newParams);\n    };\n    MediaAutoTrack.prototype._financial = function (x) {\n        return Number.parseFloat(x).toFixed(4);\n    };\n    return MediaAutoTrack;\n}());\nexport { MediaAutoTrack };\n//# sourceMappingURL=MediaAutoTrack.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { delegate } from '../vendor/dom-utils';\nimport { ConsoleLogger as Logger, JS } from '@aws-amplify/core';\nvar logger = new Logger('EventTracker');\nvar defaultOpts = {\n    enable: false,\n    events: ['click'],\n    selectorPrefix: 'data-amplify-analytics-',\n    provider: 'AWSPinpoint',\n};\nvar EventTracker = /** @class */ (function () {\n    function EventTracker(tracker, opts) {\n        if (!JS.browserOrNode().isBrowser || !window.addEventListener) {\n            logger.debug('not in the supported web environment');\n            return;\n        }\n        this._config = Object.assign({}, defaultOpts, opts);\n        this._tracker = tracker;\n        this._delegates = {};\n        this._trackFunc = this._trackFunc.bind(this);\n        logger.debug('initialize pageview tracker with opts', this._config);\n        this.configure(this._config);\n    }\n    EventTracker.prototype.configure = function (opts) {\n        var _this = this;\n        Object.assign(this._config, opts);\n        if (!this._config.enable) {\n            Object.keys(this._delegates).forEach(function (key) {\n                if (typeof _this._delegates[key].destroy === 'function')\n                    _this._delegates[key].destroy();\n            });\n            this._delegates = {};\n        }\n        else if (this._config.enable &&\n            Object.keys(this._delegates).length === 0) {\n            var selector_1 = '[' + this._config.selectorPrefix + 'on]';\n            this._config.events.forEach(function (evt) {\n                _this._delegates[evt] = delegate(document, evt, selector_1, _this._trackFunc, { composed: true, useCapture: true });\n            });\n        }\n        return this._config;\n    };\n    EventTracker.prototype._trackFunc = function (event, element) {\n        return __awaiter(this, void 0, void 0, function () {\n            var customAttrs, events, eventName, attrs, defaultAttrs, _a, attributes;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        customAttrs = {};\n                        events = element\n                            .getAttribute(this._config.selectorPrefix + 'on')\n                            .split(/\\s*,\\s*/);\n                        eventName = element.getAttribute(this._config.selectorPrefix + 'name');\n                        attrs = element.getAttribute(this._config.selectorPrefix + 'attrs');\n                        if (attrs) {\n                            attrs.split(/\\s*,\\s*/).forEach(function (attr) {\n                                var tmp = attr.trim().split(/\\s*:\\s*/);\n                                customAttrs[tmp[0]] = tmp[1];\n                            });\n                        }\n                        if (!(typeof this._config.attributes === 'function')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this._config.attributes()];\n                    case 1:\n                        _a = _b.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        _a = this._config.attributes;\n                        _b.label = 3;\n                    case 3:\n                        defaultAttrs = _a;\n                        attributes = Object.assign({\n                            type: event.type,\n                            target: event.target.localName + \" with id \" + event.target.id,\n                        }, defaultAttrs, customAttrs);\n                        logger.debug('events needed to be recorded', events);\n                        logger.debug('attributes needed to be attached', customAttrs);\n                        if (events.indexOf(event.type) < 0) {\n                            logger.debug(\"event \" + event.type + \" is not selected to be recorded\");\n                            return [2 /*return*/];\n                        }\n                        this._tracker({\n                            name: eventName || 'event',\n                            attributes: attributes,\n                        }, this._config.provider).catch(function (e) {\n                            logger.debug(\"Failed to record the \" + event.type + \" event', \" + e);\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return EventTracker;\n}());\nexport default EventTracker;\n//# sourceMappingURL=EventTracker.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n// the session tracker for web\nimport { ConsoleLogger as Logger, JS } from '@aws-amplify/core';\nvar logger = new Logger('SessionTracker');\nvar defaultOpts = {\n    enable: false,\n    provider: 'AWSPinpoint',\n};\nvar initialEventSent = false;\nvar SessionTracker = /** @class */ (function () {\n    function SessionTracker(tracker, opts) {\n        this._config = Object.assign({}, defaultOpts, opts);\n        this._tracker = tracker;\n        this._hasEnabled = false;\n        this._trackFunc = this._trackFunc.bind(this);\n        this._trackBeforeUnload = this._trackBeforeUnload.bind(this);\n        this.configure(this._config);\n    }\n    SessionTracker.prototype._envCheck = function () {\n        if (!JS.browserOrNode().isBrowser) {\n            return false;\n        }\n        if (!document || !document.addEventListener) {\n            logger.debug('not in the supported web environment');\n            return false;\n        }\n        if (typeof document.hidden !== 'undefined') {\n            this._hidden = 'hidden';\n            this._visibilityChange = 'visibilitychange';\n        }\n        else if (typeof document['msHidden'] !== 'undefined') {\n            this._hidden = 'msHidden';\n            this._visibilityChange = 'msvisibilitychange';\n        }\n        else if (typeof document['webkitHidden'] !== 'undefined') {\n            this._hidden = 'webkitHidden';\n            this._visibilityChange = 'webkitvisibilitychange';\n        }\n        else {\n            logger.debug('not in the supported web environment');\n            return false;\n        }\n        return true;\n    };\n    SessionTracker.prototype._trackFunc = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var customAttrs, _a, attributes;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!(typeof this._config.attributes === 'function')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this._config.attributes()];\n                    case 1:\n                        _a = _b.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        _a = this._config.attributes;\n                        _b.label = 3;\n                    case 3:\n                        customAttrs = _a;\n                        attributes = Object.assign({}, customAttrs);\n                        if (document.visibilityState === this._hidden) {\n                            this._tracker({\n                                name: '_session.stop',\n                                attributes: attributes,\n                            }, this._config.provider).catch(function (e) {\n                                logger.debug('record session stop event failed.', e);\n                            });\n                        }\n                        else {\n                            this._tracker({\n                                name: '_session.start',\n                                attributes: attributes,\n                            }, this._config.provider).catch(function (e) {\n                                logger.debug('record session start event failed.', e);\n                            });\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SessionTracker.prototype._trackBeforeUnload = function (event) {\n        // before unload callback cannot be async => https://github.com/aws-amplify/amplify-js/issues/2088\n        var _this = this;\n        var customAttrs = typeof this._config.attributes === 'function'\n            ? Promise.resolve(this._config.attributes())\n            : Promise.resolve(this._config.attributes);\n        customAttrs.then(function (custom) {\n            var attributes = Object.assign({}, custom);\n            _this._tracker({\n                name: '_session.stop',\n                attributes: attributes,\n                immediate: true,\n            }, _this._config.provider).catch(function (e) {\n                logger.debug('record session stop event failed.', e);\n            });\n        });\n    };\n    // to keep configure a synchronized function\n    SessionTracker.prototype._sendInitialEvent = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var customAttrs, _a, attributes;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (initialEventSent) {\n                            logger.debug('the start session has been sent when the page is loaded');\n                            return [2 /*return*/];\n                        }\n                        else {\n                            initialEventSent = true;\n                        }\n                        if (!(typeof this._config.attributes === 'function')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this._config.attributes()];\n                    case 1:\n                        _a = _b.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        _a = this._config.attributes;\n                        _b.label = 3;\n                    case 3:\n                        customAttrs = _a;\n                        attributes = Object.assign({}, customAttrs);\n                        this._tracker({\n                            name: '_session.start',\n                            attributes: attributes,\n                        }, this._config.provider).catch(function (e) {\n                            logger.debug('record session start event failed.', e);\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SessionTracker.prototype.configure = function (opts) {\n        if (!this._envCheck()) {\n            return this._config;\n        }\n        Object.assign(this._config, opts);\n        if (this._config.enable && !this._hasEnabled) {\n            // send a start session as soon as it's enabled\n            this._sendInitialEvent();\n            // listen on events\n            document.addEventListener(this._visibilityChange, this._trackFunc, false);\n            window.addEventListener('beforeunload', this._trackBeforeUnload, false);\n            this._hasEnabled = true;\n        }\n        else if (!this._config.enable && this._hasEnabled) {\n            document.removeEventListener(this._visibilityChange, this._trackFunc, false);\n            window.removeEventListener('beforeunload', this._trackBeforeUnload, false);\n            this._hasEnabled = false;\n        }\n        return this._config;\n    };\n    return SessionTracker;\n}());\nexport default SessionTracker;\n//# sourceMappingURL=SessionTracker.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { ConsoleLogger as Logger, Hub, Parser } from '@aws-amplify/core';\nimport AWSPinpointProvider from './Providers/AWSPinpointProvider';\nimport { PageViewTracker, EventTracker, SessionTracker } from './trackers';\nvar logger = new Logger('AnalyticsClass');\nvar AMPLIFY_SYMBOL = (typeof Symbol !== 'undefined' &&\n    typeof Symbol.for === 'function'\n    ? Symbol.for('amplify_default')\n    : '@@amplify_default');\nvar dispatchAnalyticsEvent = function (event, data, message) {\n    Hub.dispatch('analytics', { event: event, data: data, message: message }, 'Analytics', AMPLIFY_SYMBOL);\n};\nvar trackers = {\n    pageView: PageViewTracker,\n    event: EventTracker,\n    session: SessionTracker,\n};\n/**\n * Provide mobile analytics client functions\n */\nvar AnalyticsClass = /** @class */ (function () {\n    /**\n     * Initialize Analtyics\n     * @param config - Configuration of the Analytics\n     */\n    function AnalyticsClass() {\n        this._config = {};\n        this._pluggables = [];\n        this._disabled = false;\n        this._trackers = {};\n        this.record = this.record.bind(this);\n    }\n    AnalyticsClass.prototype.getModuleName = function () {\n        return 'Analytics';\n    };\n    /**\n     * configure Analytics\n     * @param {Object} config - Configuration of the Analytics\n     */\n    AnalyticsClass.prototype.configure = function (config) {\n        var _this = this;\n        if (!config)\n            return this._config;\n        logger.debug('configure Analytics', config);\n        var amplifyConfig = Parser.parseMobilehubConfig(config);\n        this._config = Object.assign({}, this._config, amplifyConfig.Analytics, config);\n        if (this._config['disabled']) {\n            this._disabled = true;\n        }\n        this._pluggables.forEach(function (pluggable) {\n            // for backward compatibility\n            var providerConfig = pluggable.getProviderName() === 'AWSPinpoint' &&\n                !_this._config['AWSPinpoint']\n                ? _this._config\n                : _this._config[pluggable.getProviderName()];\n            pluggable.configure(__assign({ disabled: _this._config['disabled'] }, providerConfig));\n        });\n        if (this._pluggables.length === 0) {\n            this.addPluggable(new AWSPinpointProvider());\n        }\n        // turn on the autoSessionRecord if not specified\n        if (this._config['autoSessionRecord'] === undefined) {\n            this._config['autoSessionRecord'] = true;\n        }\n        dispatchAnalyticsEvent('configured', null, \"The Analytics category has been configured successfully\");\n        logger.debug('current configuration', this._config);\n        return this._config;\n    };\n    /**\n     * add plugin into Analytics category\n     * @param {Object} pluggable - an instance of the plugin\n     */\n    AnalyticsClass.prototype.addPluggable = function (pluggable) {\n        if (pluggable && pluggable.getCategory() === 'Analytics') {\n            this._pluggables.push(pluggable);\n            // for backward compatibility\n            var providerConfig = pluggable.getProviderName() === 'AWSPinpoint' &&\n                !this._config['AWSPinpoint']\n                ? this._config\n                : this._config[pluggable.getProviderName()];\n            var config = __assign({ disabled: this._config['disabled'] }, providerConfig);\n            pluggable.configure(config);\n            return config;\n        }\n    };\n    /**\n     * Get the plugin object\n     * @param providerName - the name of the plugin\n     */\n    AnalyticsClass.prototype.getPluggable = function (providerName) {\n        for (var i = 0; i < this._pluggables.length; i += 1) {\n            var pluggable = this._pluggables[i];\n            if (pluggable.getProviderName() === providerName) {\n                return pluggable;\n            }\n        }\n        logger.debug('No plugin found with providerName', providerName);\n        return null;\n    };\n    /**\n     * Remove the plugin object\n     * @param providerName - the name of the plugin\n     */\n    AnalyticsClass.prototype.removePluggable = function (providerName) {\n        var idx = 0;\n        while (idx < this._pluggables.length) {\n            if (this._pluggables[idx].getProviderName() === providerName) {\n                break;\n            }\n            idx += 1;\n        }\n        if (idx === this._pluggables.length) {\n            logger.debug('No plugin found with providerName', providerName);\n            return;\n        }\n        else {\n            this._pluggables.splice(idx, idx + 1);\n            return;\n        }\n    };\n    /**\n     * stop sending events\n     */\n    AnalyticsClass.prototype.disable = function () {\n        this._disabled = true;\n    };\n    /**\n     * start sending events\n     */\n    AnalyticsClass.prototype.enable = function () {\n        this._disabled = false;\n    };\n    /**\n     * Record Session start\n     * @return - A promise which resolves if buffer doesn't overflow\n     */\n    AnalyticsClass.prototype.startSession = function (provider) {\n        return __awaiter(this, void 0, void 0, function () {\n            var params;\n            return __generator(this, function (_a) {\n                params = { event: { name: '_session.start' }, provider: provider };\n                return [2 /*return*/, this._sendEvent(params)];\n            });\n        });\n    };\n    /**\n     * Record Session stop\n     * @return - A promise which resolves if buffer doesn't overflow\n     */\n    AnalyticsClass.prototype.stopSession = function (provider) {\n        return __awaiter(this, void 0, void 0, function () {\n            var params;\n            return __generator(this, function (_a) {\n                params = { event: { name: '_session.stop' }, provider: provider };\n                return [2 /*return*/, this._sendEvent(params)];\n            });\n        });\n    };\n    /**\n     * Record one analytic event and send it to Pinpoint\n     * @param {String} name - The name of the event\n     * @param {Object} [attributs] - Attributes of the event\n     * @param {Object} [metrics] - Event metrics\n     * @return - A promise which resolves if buffer doesn't overflow\n     */\n    AnalyticsClass.prototype.record = function (event, provider, metrics) {\n        return __awaiter(this, void 0, void 0, function () {\n            var errMsg, params;\n            return __generator(this, function (_a) {\n                if (!this.isAnalyticsConfigured()) {\n                    errMsg = 'Analytics has not been configured';\n                    logger.debug(errMsg);\n                    return [2 /*return*/, Promise.reject(new Error(errMsg))];\n                }\n                params = null;\n                // this is just for compatibility, going to be deprecated\n                if (typeof event === 'string') {\n                    params = {\n                        event: {\n                            name: event,\n                            attributes: provider,\n                            metrics: metrics,\n                        },\n                        provider: 'AWSPinpoint',\n                    };\n                }\n                else {\n                    params = { event: event, provider: provider };\n                }\n                return [2 /*return*/, this._sendEvent(params)];\n            });\n        });\n    };\n    AnalyticsClass.prototype.updateEndpoint = function (attrs, provider) {\n        return __awaiter(this, void 0, void 0, function () {\n            var event;\n            return __generator(this, function (_a) {\n                event = __assign(__assign({}, attrs), { name: '_update_endpoint' });\n                return [2 /*return*/, this.record(event, provider)];\n            });\n        });\n    };\n    AnalyticsClass.prototype._sendEvent = function (params) {\n        var _this = this;\n        if (!this.isAnalyticsConfigured()) {\n            var errMsg = 'Analytics has not been configured';\n            logger.debug(errMsg);\n            return Promise.reject(new Error(errMsg));\n        }\n        if (this._disabled) {\n            logger.debug('Analytics has been disabled');\n            return Promise.resolve();\n        }\n        var provider = params.provider ? params.provider : 'AWSPinpoint';\n        return new Promise(function (resolve, reject) {\n            _this._pluggables.forEach(function (pluggable) {\n                if (pluggable.getProviderName() === provider) {\n                    pluggable.record(params, { resolve: resolve, reject: reject });\n                }\n            });\n        });\n    };\n    AnalyticsClass.prototype.autoTrack = function (trackerType, opts) {\n        if (!trackers[trackerType]) {\n            logger.debug('invalid tracker type');\n            return;\n        }\n        // to sync up two different configuration ways of auto session tracking\n        if (trackerType === 'session') {\n            this._config['autoSessionRecord'] = opts['enable'];\n        }\n        var tracker = this._trackers[trackerType];\n        if (!tracker) {\n            this._trackers[trackerType] = new trackers[trackerType](this.record, opts);\n        }\n        else {\n            tracker.configure(opts);\n        }\n    };\n    AnalyticsClass.prototype.isAnalyticsConfigured = function () {\n        return this._config && Object.entries(this._config).length > 0;\n    };\n    return AnalyticsClass;\n}());\nexport default AnalyticsClass;\n//# sourceMappingURL=Analytics.js.map","/*\n * Copyright 2017-2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { ConsoleLogger as Logger, Credentials } from '@aws-amplify/core';\nimport * as Kinesis from 'aws-sdk/clients/kinesis';\nvar logger = new Logger('AWSKineisProvider');\n// events buffer\nvar BUFFER_SIZE = 1000;\nvar FLUSH_SIZE = 100;\nvar FLUSH_INTERVAL = 5 * 1000; // 5s\nvar RESEND_LIMIT = 5;\nvar AWSKinesisProvider = /** @class */ (function () {\n    function AWSKinesisProvider(config) {\n        this._buffer = [];\n        this._config = config || {};\n        this._config.bufferSize = this._config.bufferSize || BUFFER_SIZE;\n        this._config.flushSize = this._config.flushSize || FLUSH_SIZE;\n        this._config.flushInterval = this._config.flushInterval || FLUSH_INTERVAL;\n        this._config.resendLimit = this._config.resendLimit || RESEND_LIMIT;\n        this._setupTimer();\n    }\n    AWSKinesisProvider.prototype._setupTimer = function () {\n        var _this = this;\n        if (this._timer) {\n            clearInterval(this._timer);\n        }\n        var _a = this._config, flushSize = _a.flushSize, flushInterval = _a.flushInterval;\n        this._timer = setInterval(function () {\n            var size = _this._buffer.length < flushSize ? _this._buffer.length : flushSize;\n            var events = [];\n            for (var i = 0; i < size; i += 1) {\n                var params = _this._buffer.shift();\n                events.push(params);\n            }\n            _this._sendFromBuffer(events);\n        }, flushInterval);\n    };\n    /**\n     * get the category of the plugin\n     */\n    AWSKinesisProvider.prototype.getCategory = function () {\n        return 'Analytics';\n    };\n    /**\n     * get provider name of the plugin\n     */\n    AWSKinesisProvider.prototype.getProviderName = function () {\n        return 'AWSKinesis';\n    };\n    /**\n     * configure the plugin\n     * @param {Object} config - configuration\n     */\n    AWSKinesisProvider.prototype.configure = function (config) {\n        logger.debug('configure Analytics', config);\n        var conf = config || {};\n        this._config = Object.assign({}, this._config, conf);\n        this._setupTimer();\n        return this._config;\n    };\n    /**\n     * record an event\n     * @param {Object} params - the params of an event\n     */\n    AWSKinesisProvider.prototype.record = function (params) {\n        return __awaiter(this, void 0, void 0, function () {\n            var credentials;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._getCredentials()];\n                    case 1:\n                        credentials = _a.sent();\n                        if (!credentials)\n                            return [2 /*return*/, Promise.resolve(false)];\n                        Object.assign(params, { config: this._config, credentials: credentials });\n                        return [2 /*return*/, this._putToBuffer(params)];\n                }\n            });\n        });\n    };\n    AWSKinesisProvider.prototype.updateEndpoint = function (params) {\n        logger.debug('updateEndpoint is not implemented in Kinesis provider');\n        return Promise.resolve(true);\n    };\n    /**\n     * @private\n     * @param params - params for the event recording\n     * Put events into buffer\n     */\n    AWSKinesisProvider.prototype._putToBuffer = function (params) {\n        if (this._buffer.length < BUFFER_SIZE) {\n            this._buffer.push(params);\n            return Promise.resolve(true);\n        }\n        else {\n            logger.debug('exceed analytics events buffer size');\n            return Promise.reject(false);\n        }\n    };\n    AWSKinesisProvider.prototype._sendFromBuffer = function (events) {\n        var _this = this;\n        // collapse events by credentials\n        // events = [ {params} ]\n        var eventsGroups = [];\n        var preCred = null;\n        var group = [];\n        for (var i = 0; i < events.length; i += 1) {\n            var cred = events[i].credentials;\n            if (i === 0) {\n                group.push(events[i]);\n                preCred = cred;\n            }\n            else {\n                if (cred.sessionToken === preCred.sessionToken &&\n                    cred.identityId === preCred.identityId) {\n                    logger.debug('no change for cred, put event in the same group');\n                    group.push(events[i]);\n                }\n                else {\n                    eventsGroups.push(group);\n                    group = [];\n                    group.push(events[i]);\n                    preCred = cred;\n                }\n            }\n        }\n        eventsGroups.push(group);\n        eventsGroups.map(function (evts) {\n            _this._sendEvents(evts);\n        });\n    };\n    AWSKinesisProvider.prototype._sendEvents = function (group) {\n        var _this = this;\n        if (group.length === 0) {\n            return;\n        }\n        var _a = group[0], config = _a.config, credentials = _a.credentials;\n        var initClients = this._init(config, credentials);\n        if (!initClients)\n            return false;\n        var records = {};\n        group.map(function (params) {\n            // spit by streamName\n            var evt = params.event;\n            var streamName = evt.streamName;\n            if (records[streamName] === undefined) {\n                records[streamName] = [];\n            }\n            var Data = JSON.stringify(evt.data);\n            var PartitionKey = evt.partitionKey || 'partition-' + credentials.identityId;\n            var record = { Data: Data, PartitionKey: PartitionKey };\n            records[streamName].push(record);\n        });\n        Object.keys(records).map(function (streamName) {\n            logger.debug('putting records to kinesis with records', records[streamName]);\n            _this._kinesis.putRecords({\n                Records: records[streamName],\n                StreamName: streamName,\n            }, function (err, data) {\n                if (err)\n                    logger.debug('Failed to upload records to Kinesis', err);\n                else\n                    logger.debug('Upload records to stream', streamName);\n            });\n        });\n    };\n    AWSKinesisProvider.prototype._init = function (config, credentials) {\n        logger.debug('init clients');\n        if (this._kinesis &&\n            this._config.credentials &&\n            this._config.credentials.sessionToken === credentials.sessionToken &&\n            this._config.credentials.identityId === credentials.identityId) {\n            logger.debug('no change for analytics config, directly return from init');\n            return true;\n        }\n        this._config.credentials = credentials;\n        var region = config.region;\n        return this._initKinesis(region, credentials);\n    };\n    AWSKinesisProvider.prototype._initKinesis = function (region, credentials) {\n        logger.debug('initialize kinesis with credentials', credentials);\n        this._kinesis = new Kinesis({\n            apiVersion: '2013-12-02',\n            region: region,\n            credentials: credentials,\n        });\n        return true;\n    };\n    /**\n     * @private\n     * check if current credentials exists\n     */\n    AWSKinesisProvider.prototype._getCredentials = function () {\n        var _this = this;\n        return Credentials.get()\n            .then(function (credentials) {\n            if (!credentials)\n                return null;\n            logger.debug('set credentials for analytics', _this._config.credentials);\n            return Credentials.shear(credentials);\n        })\n            .catch(function (err) {\n            logger.debug('ensure credentials error', err);\n            return null;\n        });\n    };\n    return AWSKinesisProvider;\n}());\nexport default AWSKinesisProvider;\n//# sourceMappingURL=AWSKinesisProvider.js.map","/*\n * Copyright 2017-2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nimport { AWSKinesisProvider } from './index';\nimport * as Firehose from 'aws-sdk/clients/firehose';\nvar logger = new Logger('AWSKineisFirehoseProvider');\nvar AWSKinesisFirehoseProvider = /** @class */ (function (_super) {\n    __extends(AWSKinesisFirehoseProvider, _super);\n    function AWSKinesisFirehoseProvider(config) {\n        return _super.call(this, config) || this;\n    }\n    /**\n     * get provider name of the plugin\n     */\n    AWSKinesisFirehoseProvider.prototype.getProviderName = function () {\n        return 'AWSKinesisFirehose';\n    };\n    AWSKinesisFirehoseProvider.prototype._sendEvents = function (group) {\n        var _this = this;\n        if (group.length === 0) {\n            return;\n        }\n        var _a = group[0], config = _a.config, credentials = _a.credentials;\n        var initClients = this._init(config, credentials);\n        if (!initClients)\n            return false;\n        var records = {};\n        group.map(function (params) {\n            // spit by streamName\n            var evt = params.event;\n            var streamName = evt.streamName;\n            if (records[streamName] === undefined) {\n                records[streamName] = [];\n            }\n            var PartitionKey = evt.partitionKey || \"partition-\" + credentials.identityId;\n            Object.assign(evt.data, { PartitionKey: PartitionKey });\n            var Data = JSON.stringify(evt.data);\n            var record = { Data: Data };\n            records[streamName].push(record);\n        });\n        Object.keys(records).map(function (streamName) {\n            logger.debug('putting records to kinesis', streamName, 'with records', records[streamName]);\n            _this._kinesisFirehose.putRecordBatch({\n                Records: records[streamName],\n                DeliveryStreamName: streamName,\n            }, function (err) {\n                if (err)\n                    logger.debug('Failed to upload records to Kinesis', err);\n                else\n                    logger.debug('Upload records to stream', streamName);\n            });\n        });\n    };\n    AWSKinesisFirehoseProvider.prototype._init = function (config, credentials) {\n        logger.debug('init clients');\n        if (this._kinesisFirehose &&\n            this._config.credentials &&\n            this._config.credentials.sessionToken === credentials.sessionToken &&\n            this._config.credentials.identityId === credentials.identityId) {\n            logger.debug('no change for analytics config, directly return from init');\n            return true;\n        }\n        this._config.credentials = credentials;\n        var region = config.region;\n        return this._initFirehose(region, credentials);\n    };\n    AWSKinesisFirehoseProvider.prototype._initFirehose = function (region, credentials) {\n        logger.debug('initialize kinesis firehose with credentials', credentials);\n        this._kinesisFirehose = new Firehose({\n            apiVersion: '2015-08-04',\n            region: region,\n            credentials: credentials,\n        });\n        return true;\n    };\n    return AWSKinesisFirehoseProvider;\n}(AWSKinesisProvider));\nexport default AWSKinesisFirehoseProvider;\n//# sourceMappingURL=AWSKinesisFirehoseProvider.js.map","import { isEmpty, isEqual } from 'lodash';\nimport { v1 as uuid } from 'uuid';\nimport { ConsoleLogger as Logger, JS } from '@aws-amplify/core';\nimport Cache from '@aws-amplify/cache';\nvar PERSONALIZE_CACHE = '_awsct';\nvar PERSONALIZE_CACHE_USERID = '_awsct_uid';\nvar PERSONALIZE_CACHE_SESSIONID = '_awsct_sid';\nvar DEFAULT_CACHE_PREFIX = 'peronslize';\nvar TIMER_INTERVAL = 30 * 1000;\nvar DELIMITER = '.';\nvar CACHE_EXPIRY_IN_DAYS = 7;\nvar logger = new Logger('AmazonPersonalizeProvider');\nvar SessionInfoManager = /** @class */ (function () {\n    function SessionInfoManager(prefixKey) {\n        if (prefixKey === void 0) { prefixKey = ''; }\n        this._isBrowser = JS.browserOrNode().isBrowser;\n        this._timerKey = uuid().substr(0, 15);\n        this._refreshTimer();\n    }\n    SessionInfoManager.prototype._refreshTimer = function () {\n        if (this._timer) {\n            clearInterval(this._timer);\n        }\n        var that = this;\n        this._timer = setInterval(function () {\n            that._timerKey = uuid().substr(0, 15);\n        }, TIMER_INTERVAL);\n    };\n    SessionInfoManager.prototype.storeValue = function (key, value) {\n        var today = new Date();\n        var expire = new Date();\n        expire.setTime(today.getTime() + 3600000 * 24 * CACHE_EXPIRY_IN_DAYS);\n        Cache.setItem(this._getCachePrefix(key), value, {\n            expires: expire.getTime(),\n        });\n    };\n    SessionInfoManager.prototype.retrieveValue = function (key) {\n        return Cache.getItem(this._getCachePrefix(key));\n    };\n    SessionInfoManager.prototype._getCachePrefix = function (key) {\n        if (this._isBrowser) {\n            return key + DELIMITER + window.location.host;\n        }\n        return DEFAULT_CACHE_PREFIX;\n    };\n    SessionInfoManager.prototype.getTimerKey = function () {\n        return this._timerKey;\n    };\n    SessionInfoManager.prototype.updateSessionInfo = function (userId, sessionInfo) {\n        var existUserId = sessionInfo.userId;\n        var existSessionId = sessionInfo.sessionId;\n        if (this._isRequireNewSession(userId, existUserId, existSessionId)) {\n            var newSessionId = uuid();\n            this.storeValue(PERSONALIZE_CACHE_USERID, userId);\n            this.storeValue(PERSONALIZE_CACHE_SESSIONID, newSessionId);\n            sessionInfo.sessionId = newSessionId;\n        }\n        else if (this._isRequireUpdateSessionInfo(userId, existUserId, existSessionId)) {\n            this.storeValue(PERSONALIZE_CACHE_USERID, userId);\n        }\n        sessionInfo.userId = userId;\n    };\n    SessionInfoManager.prototype._isRequireUpdateSessionInfo = function (userId, cachedSessionUserId, cachedSessionSessionId) {\n        // anonymouse => sign in : hasSession && s_userId == null && curr_userId !=null\n        var isNoCachedSession = isEmpty(cachedSessionSessionId);\n        return (!isNoCachedSession && isEmpty(cachedSessionUserId) && !isEmpty(userId));\n    };\n    SessionInfoManager.prototype.retrieveSessionInfo = function (trackingId) {\n        var sessionInfo = {};\n        sessionInfo.trackingId = trackingId;\n        sessionInfo.sessionId = this.retrieveValue(PERSONALIZE_CACHE_SESSIONID);\n        sessionInfo.userId = this.retrieveValue(PERSONALIZE_CACHE_USERID);\n        if (isEmpty(sessionInfo.sessionId)) {\n            sessionInfo.sessionId = uuid();\n            this.storeValue(PERSONALIZE_CACHE_SESSIONID, sessionInfo.sessionId);\n        }\n        this.storeValue(PERSONALIZE_CACHE, trackingId);\n        return sessionInfo;\n    };\n    SessionInfoManager.prototype._isRequireNewSession = function (userId, cachedSessionUserId, cachedSessionSessionId) {\n        // new session => 1. no cached session info 2. signOut: s_userId !=null && curr_userId ==null\n        // 3. switch account: s_userId !=null && curr_userId !=null && s_userId != curr_userId\n        var isNoCachedSession = isEmpty(cachedSessionSessionId);\n        var isSignoutCase = isEmpty(userId) && !isEmpty(cachedSessionUserId);\n        var isSwitchUserCase = !isEmpty(userId) &&\n            !isEmpty(cachedSessionUserId) &&\n            !isEqual(userId, cachedSessionUserId);\n        return isNoCachedSession || isSignoutCase || isSwitchUserCase;\n    };\n    return SessionInfoManager;\n}());\nexport { SessionInfoManager };\n//# sourceMappingURL=SessionInfoManager.js.map","/*\n * Copyright 2019-2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { ConsoleLogger as Logger, Credentials, JS } from '@aws-amplify/core';\nimport * as PersonalizeEvents from 'aws-sdk/clients/personalizeevents';\nimport { SessionInfoManager, MediaAutoTrack, } from './AmazonPersonalizeHelper';\nimport { isEmpty, isEqual, get } from 'lodash';\nvar logger = new Logger('AmazonPersonalizeProvider');\n// events buffer\nvar FLUSH_SIZE = 5;\nvar FLUSH_SIZE_THRESHHOLD = 10;\nvar FLUSH_INTERVAL = 5 * 1000; // 5s\nvar IDENTIFY_EVENT = 'Identify';\nvar AmazonPersonalizeProvider = /** @class */ (function () {\n    function AmazonPersonalizeProvider(config) {\n        this._buffer = [];\n        this._config = config ? config : {};\n        this._config.flushSize =\n            this._config.flushSize > 0 &&\n                this._config.flushSize <= FLUSH_SIZE_THRESHHOLD\n                ? this._config.flushSize\n                : FLUSH_SIZE;\n        this._config.flushInterval = this._config.flushInterval || FLUSH_INTERVAL;\n        this._sessionManager = new SessionInfoManager();\n        if (!isEmpty(this._config.trackingId)) {\n            this._sessionInfo = this._sessionManager.retrieveSessionInfo(this._config.trackingId);\n        }\n        this._isBrowser = JS.browserOrNode().isBrowser;\n        // flush event buffer\n        this._setupTimer();\n    }\n    AmazonPersonalizeProvider.prototype._setupTimer = function () {\n        if (this._timer) {\n            clearInterval(this._timer);\n        }\n        var _a = this._config, flushSize = _a.flushSize, flushInterval = _a.flushInterval;\n        var that = this;\n        this._timer = setInterval(function () {\n            that._sendFromBuffer();\n        }, flushInterval);\n    };\n    /**\n     * Record event\n     * @param eventType      - type of the event action. e.g. \"Click\"\n     * @param properties     - properties of the event\n     * @return Promise\n     */\n    AmazonPersonalizeProvider.prototype.record = function (params) {\n        return __awaiter(this, void 0, void 0, function () {\n            var credentials, _a, eventType, properties, requestParams, isLoaded;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this._getCredentials()];\n                    case 1:\n                        credentials = _b.sent();\n                        if (!credentials)\n                            return [2 /*return*/, Promise.resolve(false)];\n                        Object.assign(params, {\n                            config: this._config,\n                            credentials: credentials,\n                            sentAt: new Date().getTime() / 1000,\n                        });\n                        _a = params.event, eventType = _a.eventType, properties = _a.properties;\n                        if (eventType === IDENTIFY_EVENT) {\n                            this._sessionManager.updateSessionInfo(properties && properties.userId ? properties.userId : '', this._sessionInfo);\n                            return [2 /*return*/];\n                        }\n                        else if (!isEmpty(params.event.userId)) {\n                            this._sessionManager.updateSessionInfo(params.event.userId, this._sessionInfo);\n                        }\n                        requestParams = this.generateRequestParams(params, this._sessionInfo);\n                        if (!(eventType === 'MediaAutoTrack')) return [3 /*break*/, 7];\n                        if (!this._isBrowser) return [3 /*break*/, 5];\n                        if (!!isEmpty(get(requestParams, 'eventData.properties.domElementId', null))) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this.isElementFullyLoaded(this.loadElement, requestParams.eventData.properties['domElementId'], 500, 5)];\n                    case 2:\n                        isLoaded = _b.sent();\n                        if (isLoaded) {\n                            new MediaAutoTrack(requestParams, this);\n                        }\n                        else {\n                            logger.debug('Cannot find the media element.');\n                        }\n                        return [3 /*break*/, 4];\n                    case 3:\n                        logger.debug(\"Missing domElementId field in 'properties' for MediaAutoTrack event type.\");\n                        _b.label = 4;\n                    case 4: return [3 /*break*/, 6];\n                    case 5:\n                        logger.debug('MediaAutoTrack only for browser');\n                        _b.label = 6;\n                    case 6: return [2 /*return*/];\n                    case 7: return [2 /*return*/, this.putToBuffer(requestParams)];\n                }\n            });\n        });\n    };\n    AmazonPersonalizeProvider.prototype.loadElement = function (domId) {\n        return new Promise(function (resolve, reject) {\n            if (document.getElementById(domId) &&\n                document.getElementById(domId).clientHeight) {\n                return resolve(true);\n            }\n            else {\n                return reject(true);\n            }\n        });\n    };\n    AmazonPersonalizeProvider.prototype.isElementFullyLoaded = function (operation, params, delay, times) {\n        var _this = this;\n        var wait = function (ms) { return new Promise(function (r) { return setTimeout(r, ms); }); };\n        return new Promise(function (resolve, reject) {\n            return operation(params)\n                .then(resolve)\n                .catch(function (reason) {\n                if (times - 1 > 0) {\n                    return wait(delay)\n                        .then(_this.isElementFullyLoaded.bind(null, operation, params, delay, times - 1))\n                        .then(resolve)\n                        .catch(reject);\n                }\n                return reject(reason);\n            });\n        });\n    };\n    /**\n     * get the category of the plugin\n     */\n    AmazonPersonalizeProvider.prototype.getCategory = function () {\n        return 'Analytics';\n    };\n    /**\n     * get provider name of the plugin\n     */\n    AmazonPersonalizeProvider.prototype.getProviderName = function () {\n        return 'AmazonPersonalize';\n    };\n    /**\n     * configure the plugin\n     * @param {Object} config - configuration\n     */\n    AmazonPersonalizeProvider.prototype.configure = function (config) {\n        logger.debug('configure Analytics', config);\n        var conf = config ? config : {};\n        this._config = Object.assign({}, this._config, conf);\n        if (!isEmpty(this._config.trackingId)) {\n            this._sessionInfo = this._sessionManager.retrieveSessionInfo(this._config.trackingId);\n        }\n        this._setupTimer();\n        return this._config;\n    };\n    /**\n     * Generate the requestParams from customer input params and sessionInfo\n     * @private\n     * @param eventData      - customer input for event data\n     * @param api            - api name\n     * @return RequestParams - wrapper object with all information required for make request\n     */\n    AmazonPersonalizeProvider.prototype.generateRequestParams = function (params, sessionInfo) {\n        var requestParams = {};\n        var _a = params.event, eventType = _a.eventType, properties = _a.properties;\n        requestParams.eventData = { eventType: eventType, properties: properties };\n        requestParams.sessionInfo = sessionInfo;\n        requestParams.sentAt = params.sentAt;\n        requestParams.credentials = params.credentials;\n        requestParams.config = params.config;\n        return requestParams;\n    };\n    /**\n     * record an event\n     * @param {Object} params - the params of an event\n     */\n    AmazonPersonalizeProvider.prototype._sendEvents = function (group) {\n        var groupLen = group.length;\n        if (groupLen === 0) {\n            logger.debug('events array is empty, directly return');\n            return;\n        }\n        var _a = group[0], config = _a.config, credentials = _a.credentials, sessionInfo = _a.sessionInfo;\n        var initClients = this._init(config, credentials);\n        if (!initClients)\n            return false;\n        if (groupLen > 0) {\n            var events = [];\n            for (var i = 0; i < groupLen; i += 1) {\n                var params = group.shift();\n                var eventPayload = this._generateSingleRecordPayload(params, sessionInfo);\n                events.push(eventPayload);\n            }\n            var payload = {};\n            payload.trackingId = sessionInfo.trackingId;\n            payload.sessionId = sessionInfo.sessionId;\n            payload.userId = sessionInfo.userId;\n            payload.eventList = events;\n            this._personalize.putEvents(payload, function (err, data) {\n                if (err)\n                    logger.debug('Failed to call putEvents in Personalize', err);\n                else\n                    logger.debug('Put events');\n            });\n        }\n    };\n    /**\n     * Put event into buffer\n     * @private\n     * @param params - params for the event recording\n     */\n    AmazonPersonalizeProvider.prototype.putToBuffer = function (params) {\n        if (this._buffer.length < this._config.flushSize) {\n            this._buffer.push(params);\n        }\n        else {\n            this._buffer.push(params);\n            this._sendFromBuffer();\n        }\n        return Promise.resolve(true);\n    };\n    /**\n     * flush the buffer and batch sending the request\n     * @private\n     * @param eventsParams - the buffer for cache the payload\n     */\n    AmazonPersonalizeProvider.prototype._sendFromBuffer = function () {\n        var _this = this;\n        var size = this._buffer.length;\n        if (size <= 0)\n            return;\n        var eventsGroups = [];\n        var preCred = null;\n        var group = [];\n        for (var i = 0; i < size; i += 1) {\n            var currRequestParams = this._buffer.shift();\n            var cred = currRequestParams.credentials;\n            var sessionInfo = currRequestParams.sessionInfo;\n            if (i === 0) {\n                group.push(currRequestParams);\n                preCred = cred;\n            }\n            else {\n                if (isEqual(sessionInfo, this._sessionInfo) &&\n                    cred.sessionToken === preCred.sessionToken &&\n                    cred.identityId === preCred.identityId) {\n                    logger.debug('no change for cred, put event in the same group');\n                    group.push(currRequestParams);\n                }\n                else {\n                    eventsGroups.push(group);\n                    group = [];\n                    group.push(currRequestParams);\n                    preCred = cred;\n                    this._sessionInfo = sessionInfo;\n                }\n            }\n        }\n        eventsGroups.push(group);\n        eventsGroups.map(function (group) {\n            _this._sendEvents(group);\n        });\n    };\n    /**\n     * Generate the record payload for single event\n     * @private\n     * @param params - RequestParams\n     */\n    AmazonPersonalizeProvider.prototype._generateSingleRecordPayload = function (params, sessionInfo) {\n        var eventData = params.eventData, sentAt = params.sentAt;\n        var trackPayload = {};\n        trackPayload.sentAt = sentAt;\n        trackPayload.properties = eventData.properties;\n        trackPayload.eventId =\n            this._sessionManager.getTimerKey() + sessionInfo.sessionId;\n        trackPayload.eventType = eventData.eventType;\n        return trackPayload;\n    };\n    /**\n     * Initialize the personalize client\n     * @private\n     * @param params - RequestParams\n     */\n    AmazonPersonalizeProvider.prototype._init = function (config, credentials) {\n        logger.debug('init clients');\n        if (this._personalize &&\n            this._config.credentials &&\n            this._config.credentials.sessionToken === credentials.sessionToken &&\n            this._config.credentials.identityId === credentials.identityId) {\n            logger.debug('no change for analytics config, directly return from init');\n            return true;\n        }\n        this._config.credentials = credentials;\n        var region = config.region;\n        logger.debug('initialize personalize with credentials', credentials);\n        this._personalize = new PersonalizeEvents({\n            apiVersion: '2018-03-22',\n            region: region,\n            credentials: credentials,\n        });\n        return true;\n    };\n    /**\n     * check if current credentials exists\n     * @private\n     */\n    AmazonPersonalizeProvider.prototype._getCredentials = function () {\n        var that = this;\n        return Credentials.get()\n            .then(function (credentials) {\n            if (!credentials)\n                return null;\n            logger.debug('set credentials for analytics', that._config.credentials);\n            return Credentials.shear(credentials);\n        })\n            .catch(function (err) {\n            logger.debug('ensure credentials error', err);\n            return null;\n        });\n    };\n    return AmazonPersonalizeProvider;\n}());\nexport default AmazonPersonalizeProvider;\n//# sourceMappingURL=AmazonPersonalizeProvider.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { ConsoleLogger as Logger, Hub, Credentials, Parser, } from '@aws-amplify/core';\nimport * as S3 from 'aws-sdk/clients/s3';\nvar logger = new Logger('AWSS3Provider');\nvar AMPLIFY_SYMBOL = (typeof Symbol !== 'undefined' &&\n    typeof Symbol.for === 'function'\n    ? Symbol.for('amplify_default')\n    : '@@amplify_default');\nvar dispatchStorageEvent = function (track, event, attrs, metrics, message) {\n    if (track) {\n        Hub.dispatch('storage', {\n            event: event,\n            data: { attrs: attrs, metrics: metrics },\n            message: message,\n        }, 'Storage', AMPLIFY_SYMBOL);\n    }\n};\nvar localTestingStorageEndpoint = 'http://localhost:20005';\n/**\n * Provide storage methods to use AWS S3\n */\nvar AWSS3Provider = /** @class */ (function () {\n    /**\n     * Initialize Storage with AWS configurations\n     * @param {Object} config - Configuration object for storage\n     */\n    function AWSS3Provider(config) {\n        this._config = config ? config : {};\n        logger.debug('Storage Options', this._config);\n    }\n    /**\n     * get the category of the plugin\n     */\n    AWSS3Provider.prototype.getCategory = function () {\n        return AWSS3Provider.CATEGORY;\n    };\n    /**\n     * get provider name of the plugin\n     */\n    AWSS3Provider.prototype.getProviderName = function () {\n        return AWSS3Provider.PROVIDER_NAME;\n    };\n    /**\n     * Configure Storage part with aws configuration\n     * @param {Object} config - Configuration of the Storage\n     * @return {Object} - Current configuration\n     */\n    AWSS3Provider.prototype.configure = function (config) {\n        logger.debug('configure Storage', config);\n        if (!config)\n            return this._config;\n        var amplifyConfig = Parser.parseMobilehubConfig(config);\n        this._config = Object.assign({}, this._config, amplifyConfig.Storage);\n        if (!this._config.bucket) {\n            logger.debug('Do not have bucket yet');\n        }\n        return this._config;\n    };\n    /**\n     * Get a presigned URL of the file or the object data when download:true\n     *\n     * @param {String} key - key of the object\n     * @param {Object} [config] - { level : private|protected|public, download: true|false }\n     * @return - A promise resolves to Amazon S3 presigned URL on success\n     */\n    AWSS3Provider.prototype.get = function (key, config) {\n        return __awaiter(this, void 0, void 0, function () {\n            var credentialsOK, opt, bucket, download, cacheControl, contentDisposition, contentEncoding, contentLanguage, contentType, expires, track, prefix, final_key, s3, params;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._ensureCredentials()];\n                    case 1:\n                        credentialsOK = _a.sent();\n                        if (!credentialsOK) {\n                            return [2 /*return*/, Promise.reject('No credentials')];\n                        }\n                        opt = Object.assign({}, this._config, config);\n                        bucket = opt.bucket, download = opt.download, cacheControl = opt.cacheControl, contentDisposition = opt.contentDisposition, contentEncoding = opt.contentEncoding, contentLanguage = opt.contentLanguage, contentType = opt.contentType, expires = opt.expires, track = opt.track;\n                        prefix = this._prefix(opt);\n                        final_key = prefix + key;\n                        s3 = this._createS3(opt);\n                        logger.debug('get ' + key + ' from ' + final_key);\n                        params = {\n                            Bucket: bucket,\n                            Key: final_key,\n                        };\n                        // See: https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/S3.html#getObject-property\n                        if (cacheControl)\n                            params.ResponseCacheControl = cacheControl;\n                        if (contentDisposition)\n                            params.ResponseContentDisposition = contentDisposition;\n                        if (contentEncoding)\n                            params.ResponseContentEncoding = contentEncoding;\n                        if (contentLanguage)\n                            params.ResponseContentLanguage = contentLanguage;\n                        if (contentType)\n                            params.ResponseContentType = contentType;\n                        if (download === true) {\n                            return [2 /*return*/, new Promise(function (res, rej) {\n                                    s3.getObject(params, function (err, data) {\n                                        if (err) {\n                                            dispatchStorageEvent(track, 'download', {\n                                                method: 'get',\n                                                result: 'failed',\n                                            }, null, \"Download failed with \" + err.message);\n                                            rej(err);\n                                        }\n                                        else {\n                                            dispatchStorageEvent(track, 'download', { method: 'get', result: 'success' }, { fileSize: Number(data.Body['length']) }, \"Download success for \" + key);\n                                            res(data);\n                                        }\n                                    });\n                                })];\n                        }\n                        if (expires) {\n                            params.Expires = expires;\n                        }\n                        return [2 /*return*/, new Promise(function (res, rej) {\n                                try {\n                                    var url = s3.getSignedUrl('getObject', params);\n                                    dispatchStorageEvent(track, 'getSignedUrl', { method: 'get', result: 'success' }, null, \"Signed URL: \" + url);\n                                    res(url);\n                                }\n                                catch (e) {\n                                    logger.warn('get signed url error', e);\n                                    dispatchStorageEvent(track, 'getSignedUrl', { method: 'get', result: 'failed' }, null, \"Could not get a signed URL for \" + key);\n                                    rej(e);\n                                }\n                            })];\n                }\n            });\n        });\n    };\n    /**\n     * Put a file in S3 bucket specified to configure method\n     * @param {String} key - key of the object\n     * @param {Object} object - File to be put in Amazon S3 bucket\n     * @param {Object} [config] - { level : private|protected|public, contentType: MIME Types,\n     *  progressCallback: function }\n     * @return - promise resolves to object on success\n     */\n    AWSS3Provider.prototype.put = function (key, object, config) {\n        return __awaiter(this, void 0, void 0, function () {\n            var credentialsOK, opt, bucket, track, progressCallback, contentType, contentDisposition, cacheControl, expires, metadata, tagging, serverSideEncryption, SSECustomerAlgorithm, SSECustomerKey, SSECustomerKeyMD5, SSEKMSKeyId, type, prefix, final_key, s3, params, upload, data, e_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._ensureCredentials()];\n                    case 1:\n                        credentialsOK = _a.sent();\n                        if (!credentialsOK) {\n                            return [2 /*return*/, Promise.reject('No credentials')];\n                        }\n                        opt = Object.assign({}, this._config, config);\n                        bucket = opt.bucket, track = opt.track, progressCallback = opt.progressCallback;\n                        contentType = opt.contentType, contentDisposition = opt.contentDisposition, cacheControl = opt.cacheControl, expires = opt.expires, metadata = opt.metadata, tagging = opt.tagging;\n                        serverSideEncryption = opt.serverSideEncryption, SSECustomerAlgorithm = opt.SSECustomerAlgorithm, SSECustomerKey = opt.SSECustomerKey, SSECustomerKeyMD5 = opt.SSECustomerKeyMD5, SSEKMSKeyId = opt.SSEKMSKeyId;\n                        type = contentType ? contentType : 'binary/octet-stream';\n                        prefix = this._prefix(opt);\n                        final_key = prefix + key;\n                        s3 = this._createS3(opt);\n                        logger.debug('put ' + key + ' to ' + final_key);\n                        params = {\n                            Bucket: bucket,\n                            Key: final_key,\n                            Body: object,\n                            ContentType: type,\n                        };\n                        if (cacheControl) {\n                            params.CacheControl = cacheControl;\n                        }\n                        if (contentDisposition) {\n                            params.ContentDisposition = contentDisposition;\n                        }\n                        if (expires) {\n                            params.Expires = expires;\n                        }\n                        if (metadata) {\n                            params.Metadata = metadata;\n                        }\n                        if (tagging) {\n                            params.Tagging = tagging;\n                        }\n                        if (serverSideEncryption) {\n                            params.ServerSideEncryption = serverSideEncryption;\n                            if (SSECustomerAlgorithm) {\n                                params.SSECustomerAlgorithm = SSECustomerAlgorithm;\n                            }\n                            if (SSECustomerKey) {\n                                params.SSECustomerKey = SSECustomerKey;\n                            }\n                            if (SSECustomerKeyMD5) {\n                                params.SSECustomerKeyMD5 = SSECustomerKeyMD5;\n                            }\n                            if (SSEKMSKeyId) {\n                                params.SSEKMSKeyId = SSEKMSKeyId;\n                            }\n                        }\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 4, , 5]);\n                        upload = s3.upload(params).on('httpUploadProgress', function (progress) {\n                            if (progressCallback) {\n                                if (typeof progressCallback === 'function') {\n                                    progressCallback(progress);\n                                }\n                                else {\n                                    logger.warn('progressCallback should be a function, not a ' +\n                                        typeof progressCallback);\n                                }\n                            }\n                        });\n                        return [4 /*yield*/, upload.promise()];\n                    case 3:\n                        data = _a.sent();\n                        logger.debug('upload result', data);\n                        dispatchStorageEvent(track, 'upload', { method: 'put', result: 'success' }, null, \"Upload success for \" + key);\n                        return [2 /*return*/, {\n                                key: data.Key.substr(prefix.length),\n                            }];\n                    case 4:\n                        e_1 = _a.sent();\n                        logger.warn('error uploading', e_1);\n                        dispatchStorageEvent(track, 'upload', { method: 'put', result: 'failed' }, null, \"Error uploading \" + key);\n                        throw e_1;\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Remove the object for specified key\n     * @param {String} key - key of the object\n     * @param {Object} [config] - { level : private|protected|public }\n     * @return - Promise resolves upon successful removal of the object\n     */\n    AWSS3Provider.prototype.remove = function (key, config) {\n        return __awaiter(this, void 0, void 0, function () {\n            var credentialsOK, opt, bucket, track, prefix, final_key, s3, params;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._ensureCredentials()];\n                    case 1:\n                        credentialsOK = _a.sent();\n                        if (!credentialsOK) {\n                            return [2 /*return*/, Promise.reject('No credentials')];\n                        }\n                        opt = Object.assign({}, this._config, config);\n                        bucket = opt.bucket, track = opt.track;\n                        prefix = this._prefix(opt);\n                        final_key = prefix + key;\n                        s3 = this._createS3(opt);\n                        logger.debug('remove ' + key + ' from ' + final_key);\n                        params = {\n                            Bucket: bucket,\n                            Key: final_key,\n                        };\n                        return [2 /*return*/, new Promise(function (res, rej) {\n                                s3.deleteObject(params, function (err, data) {\n                                    if (err) {\n                                        dispatchStorageEvent(track, 'delete', { method: 'remove', result: 'failed' }, null, \"Deletion of \" + key + \" failed with \" + err);\n                                        rej(err);\n                                    }\n                                    else {\n                                        dispatchStorageEvent(track, 'delete', { method: 'remove', result: 'success' }, null, \"Deleted \" + key + \" successfully\");\n                                        res(data);\n                                    }\n                                });\n                            })];\n                }\n            });\n        });\n    };\n    /**\n     * List bucket objects relative to the level and prefix specified\n     * @param {String} path - the path that contains objects\n     * @param {Object} [config] - { level : private|protected|public }\n     * @return - Promise resolves to list of keys for all objects in path\n     */\n    AWSS3Provider.prototype.list = function (path, config) {\n        return __awaiter(this, void 0, void 0, function () {\n            var credentialsOK, opt, bucket, track, maxKeys, prefix, final_path, s3, params;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._ensureCredentials()];\n                    case 1:\n                        credentialsOK = _a.sent();\n                        if (!credentialsOK) {\n                            return [2 /*return*/, Promise.reject('No credentials')];\n                        }\n                        opt = Object.assign({}, this._config, config);\n                        bucket = opt.bucket, track = opt.track, maxKeys = opt.maxKeys;\n                        prefix = this._prefix(opt);\n                        final_path = prefix + path;\n                        s3 = this._createS3(opt);\n                        logger.debug('list ' + path + ' from ' + final_path);\n                        params = {\n                            Bucket: bucket,\n                            Prefix: final_path,\n                            MaxKeys: maxKeys,\n                        };\n                        return [2 /*return*/, new Promise(function (res, rej) {\n                                s3.listObjects(params, function (err, data) {\n                                    if (err) {\n                                        logger.warn('list error', err);\n                                        dispatchStorageEvent(track, 'list', { method: 'list', result: 'failed' }, null, \"Listing items failed: \" + err.message);\n                                        rej(err);\n                                    }\n                                    else {\n                                        var list = data.Contents.map(function (item) {\n                                            return {\n                                                key: item.Key.substr(prefix.length),\n                                                eTag: item.ETag,\n                                                lastModified: item.LastModified,\n                                                size: item.Size,\n                                            };\n                                        });\n                                        dispatchStorageEvent(track, 'list', { method: 'list', result: 'success' }, null, list.length + \" items returned from list operation\");\n                                        logger.debug('list', list);\n                                        res(list);\n                                    }\n                                });\n                            })];\n                }\n            });\n        });\n    };\n    /**\n     * @private\n     */\n    AWSS3Provider.prototype._ensureCredentials = function () {\n        var _this = this;\n        return Credentials.get()\n            .then(function (credentials) {\n            if (!credentials)\n                return false;\n            var cred = Credentials.shear(credentials);\n            logger.debug('set credentials for storage', cred);\n            _this._config.credentials = cred;\n            return true;\n        })\n            .catch(function (err) {\n            logger.warn('ensure credentials error', err);\n            return false;\n        });\n    };\n    /**\n     * @private\n     */\n    AWSS3Provider.prototype._prefix = function (config) {\n        var credentials = config.credentials, level = config.level;\n        var customPrefix = config.customPrefix || {};\n        var identityId = config.identityId || credentials.identityId;\n        var privatePath = (customPrefix.private !== undefined ? customPrefix.private : 'private/') +\n            identityId +\n            '/';\n        var protectedPath = (customPrefix.protected !== undefined\n            ? customPrefix.protected\n            : 'protected/') +\n            identityId +\n            '/';\n        var publicPath = customPrefix.public !== undefined ? customPrefix.public : 'public/';\n        switch (level) {\n            case 'private':\n                return privatePath;\n            case 'protected':\n                return protectedPath;\n            default:\n                return publicPath;\n        }\n    };\n    /**\n     * @private\n     */\n    AWSS3Provider.prototype._createS3 = function (config) {\n        var bucket = config.bucket, region = config.region, credentials = config.credentials, dangerouslyConnectToHttpEndpointForTesting = config.dangerouslyConnectToHttpEndpointForTesting;\n        var localTestingConfig = {};\n        if (dangerouslyConnectToHttpEndpointForTesting) {\n            localTestingConfig = {\n                endpoint: localTestingStorageEndpoint,\n                s3BucketEndpoint: true,\n                s3ForcePathStyle: true,\n            };\n        }\n        return new S3(__assign({ apiVersion: '2006-03-01', params: { Bucket: bucket }, signatureVersion: 'v4', region: region,\n            credentials: credentials }, localTestingConfig));\n    };\n    AWSS3Provider.CATEGORY = 'Storage';\n    AWSS3Provider.PROVIDER_NAME = 'AWSS3';\n    return AWSS3Provider;\n}());\nexport default AWSS3Provider;\n//# sourceMappingURL=AWSS3Provider.js.map","/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { ConsoleLogger as Logger, Parser } from '@aws-amplify/core';\nimport AWSS3Provider from './Providers/AWSS3Provider';\nvar logger = new Logger('StorageClass');\nvar DEFAULT_PROVIDER = 'AWSS3';\n/**\n * Provide storage methods to use AWS S3\n */\nvar StorageClass = /** @class */ (function () {\n    /**\n     * Initialize Storage\n     * @param {Object} config - Configuration object for storage\n     */\n    function StorageClass() {\n        this._config = {};\n        this._pluggables = [];\n        logger.debug('Storage Options', this._config);\n        this.get = this.get.bind(this);\n        this.put = this.put.bind(this);\n        this.remove = this.remove.bind(this);\n        this.list = this.list.bind(this);\n    }\n    StorageClass.prototype.getModuleName = function () {\n        return 'Storage';\n    };\n    /**\n     * add plugin into Storage category\n     * @param {Object} pluggable - an instance of the plugin\n     */\n    StorageClass.prototype.addPluggable = function (pluggable) {\n        if (pluggable && pluggable.getCategory() === 'Storage') {\n            this._pluggables.push(pluggable);\n            var config = {};\n            config = pluggable.configure(this._config[pluggable.getProviderName()]);\n            return config;\n        }\n    };\n    /**\n     * Get the plugin object\n     * @param providerName - the name of the plugin\n     */\n    StorageClass.prototype.getPluggable = function (providerName) {\n        var pluggable = this._pluggables.find(function (pluggable) { return pluggable.getProviderName() === providerName; });\n        if (pluggable === undefined) {\n            logger.debug('No plugin found with providerName', providerName);\n            return null;\n        }\n        else\n            return pluggable;\n    };\n    /**\n     * Remove the plugin object\n     * @param providerName - the name of the plugin\n     */\n    StorageClass.prototype.removePluggable = function (providerName) {\n        this._pluggables = this._pluggables.filter(function (pluggable) { return pluggable.getProviderName() !== providerName; });\n        return;\n    };\n    /**\n     * Configure Storage\n     * @param {Object} config - Configuration object for storage\n     * @return {Object} - Current configuration\n     */\n    StorageClass.prototype.configure = function (config) {\n        var _this = this;\n        logger.debug('configure Storage');\n        if (!config)\n            return this._config;\n        var amplifyConfig = Parser.parseMobilehubConfig(config);\n        var storageKeysFromConfig = Object.keys(amplifyConfig.Storage);\n        var storageArrayKeys = [\n            'bucket',\n            'region',\n            'level',\n            'track',\n            'customPrefix',\n            'serverSideEncryption',\n            'SSECustomerAlgorithm',\n            'SSECustomerKey',\n            'SSECustomerKeyMD5',\n            'SSEKMSKeyId',\n        ];\n        var isInStorageArrayKeys = function (k) {\n            return storageArrayKeys.some(function (x) { return x === k; });\n        };\n        var checkConfigKeysFromArray = function (k) {\n            return k.find(function (k) { return isInStorageArrayKeys(k); });\n        };\n        if (storageKeysFromConfig &&\n            checkConfigKeysFromArray(storageKeysFromConfig) &&\n            !amplifyConfig.Storage[DEFAULT_PROVIDER]) {\n            amplifyConfig.Storage[DEFAULT_PROVIDER] = {};\n        }\n        Object.entries(amplifyConfig.Storage).map(function (_a) {\n            var key = _a[0], value = _a[1];\n            if (key && isInStorageArrayKeys(key) && value !== undefined) {\n                amplifyConfig.Storage[DEFAULT_PROVIDER][key] = value;\n                delete amplifyConfig.Storage[key];\n            }\n        });\n        // only update new values for each provider\n        Object.keys(amplifyConfig.Storage).forEach(function (providerName) {\n            if (typeof amplifyConfig.Storage[providerName] !== 'string') {\n                _this._config[providerName] = __assign(__assign({}, _this._config[providerName]), amplifyConfig.Storage[providerName]);\n            }\n        });\n        this._pluggables.forEach(function (pluggable) {\n            pluggable.configure(_this._config[pluggable.getProviderName()]);\n        });\n        if (this._pluggables.length === 0) {\n            this.addPluggable(new AWSS3Provider());\n        }\n        return this._config;\n    };\n    /**\n     * Get a presigned URL of the file or the object data when download:true\n     *\n     * @param {String} key - key of the object\n     * @param {Object} [config] - { level : private|protected|public, download: true|false }\n     * @return - A promise resolves to either a presigned url or the object\n     */\n    StorageClass.prototype.get = function (key, config) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, provider, prov;\n            return __generator(this, function (_b) {\n                _a = (config || {}).provider, provider = _a === void 0 ? DEFAULT_PROVIDER : _a;\n                prov = this._pluggables.find(function (pluggable) { return pluggable.getProviderName() === provider; });\n                if (prov === undefined) {\n                    logger.debug('No plugin found with providerName', provider);\n                    Promise.reject('No plugin found in Storage for the provider');\n                }\n                return [2 /*return*/, prov.get(key, config)];\n            });\n        });\n    };\n    /**\n     * Put a file in storage bucket specified to configure method\n     * @param {String} key - key of the object\n     * @param {Object} object - File to be put in bucket\n     * @param {Object} [config] - { level : private|protected|public, contentType: MIME Types,\n     *  progressCallback: function }\n     * @return - promise resolves to object on success\n     */\n    StorageClass.prototype.put = function (key, object, config) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, provider, prov;\n            return __generator(this, function (_b) {\n                _a = (config || {}).provider, provider = _a === void 0 ? DEFAULT_PROVIDER : _a;\n                prov = this._pluggables.find(function (pluggable) { return pluggable.getProviderName() === provider; });\n                if (prov === undefined) {\n                    logger.debug('No plugin found with providerName', provider);\n                    Promise.reject('No plugin found in Storage for the provider');\n                }\n                return [2 /*return*/, prov.put(key, object, config)];\n            });\n        });\n    };\n    /**\n     * Remove the object for specified key\n     * @param {String} key - key of the object\n     * @param {Object} [config] - { level : private|protected|public }\n     * @return - Promise resolves upon successful removal of the object\n     */\n    StorageClass.prototype.remove = function (key, config) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, provider, prov;\n            return __generator(this, function (_b) {\n                _a = (config || {}).provider, provider = _a === void 0 ? DEFAULT_PROVIDER : _a;\n                prov = this._pluggables.find(function (pluggable) { return pluggable.getProviderName() === provider; });\n                if (prov === undefined) {\n                    logger.debug('No plugin found with providerName', provider);\n                    Promise.reject('No plugin found in Storage for the provider');\n                }\n                return [2 /*return*/, prov.remove(key, config)];\n            });\n        });\n    };\n    /**\n     * List bucket objects relative to the level and prefix specified\n     * @param {String} path - the path that contains objects\n     * @param {Object} [config] - { level : private|protected|public, maxKeys: NUMBER }\n     * @return - Promise resolves to list of keys for all objects in path\n     */\n    StorageClass.prototype.list = function (path, config) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, provider, prov;\n            return __generator(this, function (_b) {\n                _a = (config || {}).provider, provider = _a === void 0 ? DEFAULT_PROVIDER : _a;\n                prov = this._pluggables.find(function (pluggable) { return pluggable.getProviderName() === provider; });\n                if (prov === undefined) {\n                    logger.debug('No plugin found with providerName', provider);\n                    Promise.reject('No plugin found in Storage for the provider');\n                }\n                return [2 /*return*/, prov.list(path, config)];\n            });\n        });\n    };\n    return StorageClass;\n}());\nexport default StorageClass;\n//# sourceMappingURL=Storage.js.map","/*\n * Copyright 2017-2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nvar logger = new Logger('AbstractInteractionsProvider');\nvar AbstractInteractionsProvider = /** @class */ (function () {\n    function AbstractInteractionsProvider(options) {\n        if (options === void 0) { options = {}; }\n        this._config = options;\n    }\n    AbstractInteractionsProvider.prototype.configure = function (config) {\n        if (config === void 0) { config = {}; }\n        this._config = __assign(__assign({}, this._config), config);\n        logger.debug(\"configure \" + this.getProviderName(), this._config);\n        return this.options;\n    };\n    AbstractInteractionsProvider.prototype.getCategory = function () {\n        return 'Interactions';\n    };\n    Object.defineProperty(AbstractInteractionsProvider.prototype, \"options\", {\n        get: function () {\n            return __assign({}, this._config);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return AbstractInteractionsProvider;\n}());\nexport { AbstractInteractionsProvider };\n//# sourceMappingURL=InteractionsProvider.js.map","/*\n * Copyright 2017-2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { AbstractInteractionsProvider } from './InteractionsProvider';\nimport * as LexRuntime from 'aws-sdk/clients/lexruntime';\nimport { ConsoleLogger as Logger, AWS, Credentials } from '@aws-amplify/core';\nvar logger = new Logger('AWSLexProvider');\nvar AWSLexProvider = /** @class */ (function (_super) {\n    __extends(AWSLexProvider, _super);\n    function AWSLexProvider(options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this, options) || this;\n        _this.aws_lex = new LexRuntime({ region: _this._config.region });\n        _this._botsCompleteCallback = {};\n        return _this;\n    }\n    AWSLexProvider.prototype.getProviderName = function () {\n        return 'AWSLexProvider';\n    };\n    AWSLexProvider.prototype.responseCallback = function (err, data, res, rej, botname) {\n        var _this = this;\n        if (err) {\n            rej(err);\n            return;\n        }\n        else {\n            // Check if state is fulfilled to resolve onFullfilment promise\n            logger.debug('postContent state', data.dialogState);\n            if (data.dialogState === 'ReadyForFulfillment' ||\n                data.dialogState === 'Fulfilled') {\n                if (typeof this._botsCompleteCallback[botname] === 'function') {\n                    setTimeout(function () {\n                        return _this._botsCompleteCallback[botname](null, { slots: data.slots });\n                    }, 0);\n                }\n                if (this._config &&\n                    typeof this._config[botname].onComplete === 'function') {\n                    setTimeout(function () { return _this._config[botname].onComplete(null, { slots: data.slots }); }, 0);\n                }\n            }\n            res(data);\n            if (data.dialogState === 'Failed') {\n                if (typeof this._botsCompleteCallback[botname] === 'function') {\n                    setTimeout(function () {\n                        return _this._botsCompleteCallback[botname]('Bot conversation failed');\n                    }, 0);\n                }\n                if (this._config &&\n                    typeof this._config[botname].onComplete === 'function') {\n                    setTimeout(function () { return _this._config[botname].onComplete('Bot conversation failed'); }, 0);\n                }\n            }\n        }\n    };\n    AWSLexProvider.prototype.sendMessage = function (botname, message) {\n        var _this = this;\n        return new Promise(function (res, rej) { return __awaiter(_this, void 0, void 0, function () {\n            var credentials, params;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this._config[botname]) {\n                            return [2 /*return*/, rej('Bot ' + botname + ' does not exist')];\n                        }\n                        return [4 /*yield*/, Credentials.get()];\n                    case 1:\n                        credentials = _a.sent();\n                        if (!credentials) {\n                            return [2 /*return*/, rej('No credentials')];\n                        }\n                        AWS.config.update({\n                            credentials: credentials,\n                        });\n                        this.aws_lex = new LexRuntime({\n                            region: this._config[botname].region,\n                            credentials: credentials,\n                        });\n                        if (typeof message === 'string') {\n                            params = {\n                                botAlias: this._config[botname].alias,\n                                botName: botname,\n                                inputText: message,\n                                userId: credentials.identityId,\n                            };\n                            logger.debug('postText to lex', message);\n                            this.aws_lex.postText(params, function (err, data) {\n                                _this.responseCallback(err, data, res, rej, botname);\n                            });\n                        }\n                        else {\n                            if (message.options['messageType'] === 'voice') {\n                                params = {\n                                    botAlias: this._config[botname].alias,\n                                    botName: botname,\n                                    contentType: 'audio/x-l16; sample-rate=16000',\n                                    inputStream: message.content,\n                                    userId: credentials.identityId,\n                                    accept: 'audio/mpeg',\n                                };\n                            }\n                            else {\n                                params = {\n                                    botAlias: this._config[botname].alias,\n                                    botName: botname,\n                                    contentType: 'text/plain; charset=utf-8',\n                                    inputStream: message.content,\n                                    userId: credentials.identityId,\n                                    accept: 'audio/mpeg',\n                                };\n                            }\n                            logger.debug('postContent to lex', message);\n                            this.aws_lex.postContent(params, function (err, data) {\n                                _this.responseCallback(err, data, res, rej, botname);\n                            });\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); });\n    };\n    AWSLexProvider.prototype.onComplete = function (botname, callback) {\n        if (!this._config[botname]) {\n            throw new ErrorEvent('Bot ' + botname + ' does not exist');\n        }\n        this._botsCompleteCallback[botname] = callback;\n    };\n    return AWSLexProvider;\n}(AbstractInteractionsProvider));\nexport { AWSLexProvider };\n//# sourceMappingURL=AWSLexProvider.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nimport { AWSLexProvider } from './Providers';\nvar logger = new Logger('Interactions');\nvar Interactions = /** @class */ (function () {\n    /**\n     * Initialize PubSub with AWS configurations\n     *\n     * @param {InteractionsOptions} options - Configuration object for Interactions\n     */\n    function Interactions(options) {\n        this._options = options;\n        logger.debug('Interactions Options', this._options);\n        this._pluggables = {};\n    }\n    Interactions.prototype.getModuleName = function () {\n        return 'Interactions';\n    };\n    /**\n     *\n     * @param {InteractionsOptions} options - Configuration object for Interactions\n     * @return {Object} - The current configuration\n     */\n    Interactions.prototype.configure = function (options) {\n        var _this = this;\n        var opt = options ? options.Interactions || options : {};\n        logger.debug('configure Interactions', { opt: opt });\n        this._options = __assign(__assign({ bots: {} }, opt), opt.Interactions);\n        var aws_bots_config = this._options.aws_bots_config;\n        var bots_config = this._options.bots;\n        if (!Object.keys(bots_config).length && aws_bots_config) {\n            // Convert aws_bots_config to bots object\n            if (Array.isArray(aws_bots_config)) {\n                aws_bots_config.forEach(function (bot) {\n                    _this._options.bots[bot.name] = bot;\n                });\n            }\n        }\n        // Check if AWSLex provider is already on pluggables\n        if (!this._pluggables.AWSLexProvider &&\n            bots_config &&\n            Object.keys(bots_config)\n                .map(function (key) { return bots_config[key]; })\n                .find(function (bot) { return !bot.providerName || bot.providerName === 'AWSLexProvider'; })) {\n            this._pluggables.AWSLexProvider = new AWSLexProvider();\n        }\n        Object.keys(this._pluggables).map(function (key) {\n            _this._pluggables[key].configure(_this._options.bots);\n        });\n        return this._options;\n    };\n    Interactions.prototype.addPluggable = function (pluggable) {\n        if (pluggable && pluggable.getCategory() === 'Interactions') {\n            if (!this._pluggables[pluggable.getProviderName()]) {\n                pluggable.configure(this._options.bots);\n                this._pluggables[pluggable.getProviderName()] = pluggable;\n                return;\n            }\n            else {\n                throw new Error('Bot ' + pluggable.getProviderName() + ' already plugged');\n            }\n        }\n    };\n    Interactions.prototype.send = function (botname, message) {\n        return __awaiter(this, void 0, void 0, function () {\n            var botProvider;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this._options.bots || !this._options.bots[botname]) {\n                            throw new Error('Bot ' + botname + ' does not exist');\n                        }\n                        botProvider = this._options.bots[botname].providerName || 'AWSLexProvider';\n                        if (!this._pluggables[botProvider]) {\n                            throw new Error('Bot ' +\n                                botProvider +\n                                ' does not have valid pluggin did you try addPluggable first?');\n                        }\n                        return [4 /*yield*/, this._pluggables[botProvider].sendMessage(botname, message)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    Interactions.prototype.onComplete = function (botname, callback) {\n        if (!this._options.bots || !this._options.bots[botname]) {\n            throw new Error('Bot ' + botname + ' does not exist');\n        }\n        var botProvider = this._options.bots[botname].providerName || 'AWSLexProvider';\n        if (!this._pluggables[botProvider]) {\n            throw new Error('Bot ' +\n                botProvider +\n                ' does not have valid pluggin did you try addPluggable first?');\n        }\n        this._pluggables[botProvider].onComplete(botname, callback);\n    };\n    return Interactions;\n}());\nexport default Interactions;\n//# sourceMappingURL=Interactions.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nvar logger = new Logger('AbstractXRProvider');\nvar AbstractXRProvider = /** @class */ (function () {\n    function AbstractXRProvider(options) {\n        if (options === void 0) { options = {}; }\n        this._config = options;\n    }\n    AbstractXRProvider.prototype.configure = function (config) {\n        if (config === void 0) { config = {}; }\n        this._config = __assign(__assign({}, config), this._config);\n        logger.debug(\"configure \" + this.getProviderName(), this._config);\n        return this.options;\n    };\n    AbstractXRProvider.prototype.getCategory = function () {\n        return 'XR';\n    };\n    Object.defineProperty(AbstractXRProvider.prototype, \"options\", {\n        get: function () {\n            return __assign({}, this._config);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return AbstractXRProvider;\n}());\nexport { AbstractXRProvider };\n//# sourceMappingURL=XRProvider.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n/*\n * Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { ConsoleLogger as Logger, Signer, Credentials, Constants, } from '@aws-amplify/core';\nimport { AbstractXRProvider } from './XRProvider';\nimport { XRNoSceneConfiguredError, XRSceneNotFoundError, XRSceneNotLoadedError, XRNoDomElement, XRSceneLoadFailure, } from '../Errors';\nvar SUMERIAN_SERVICE_NAME = 'sumerian';\nvar logger = new Logger('SumerianProvider');\nvar SumerianProvider = /** @class */ (function (_super) {\n    __extends(SumerianProvider, _super);\n    function SumerianProvider(options) {\n        if (options === void 0) { options = {}; }\n        return _super.call(this, options) || this;\n    }\n    SumerianProvider.prototype.getProviderName = function () {\n        return 'SumerianProvider';\n    };\n    SumerianProvider.prototype.loadScript = function (url) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        var scriptElement = document.createElement('script');\n                        scriptElement.src = url;\n                        scriptElement.addEventListener('load', function (event) {\n                            resolve();\n                        });\n                        scriptElement.addEventListener('error', function (event) {\n                            reject(new Error(\"Failed to load script: \" + url));\n                        });\n                        document.head.appendChild(scriptElement);\n                    })];\n            });\n        });\n    };\n    SumerianProvider.prototype.loadScene = function (sceneName, domElementId, sceneOptions) {\n        return __awaiter(this, void 0, void 0, function () {\n            var errorMsg, errorMsg, element, errorMsg, scene, errorMsg, sceneUrl, sceneId, sceneRegion, errorMsg, awsSDKConfigOverride, fetchOptions, url, credentials, accessInfo, serviceInfo, request, e_1, apiResponse, apiResponseJson, sceneBundleData, sceneBundle, sceneBundleJson, error_1, progressCallback, publishParamOverrides, sceneLoadParams, sceneController, _i, _a, warning;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!sceneName) {\n                            errorMsg = 'No scene name passed into loadScene';\n                            logger.error(errorMsg);\n                            throw new XRSceneLoadFailure(errorMsg);\n                        }\n                        if (!domElementId) {\n                            errorMsg = 'No dom element id passed into loadScene';\n                            logger.error(errorMsg);\n                            throw new XRNoDomElement(errorMsg);\n                        }\n                        element = document.getElementById(domElementId);\n                        if (!element) {\n                            errorMsg = \"DOM element id, \" + domElementId + \" not found\";\n                            logger.error(errorMsg);\n                            throw new XRNoDomElement(errorMsg);\n                        }\n                        scene = this.getScene(sceneName);\n                        if (!scene.sceneConfig) {\n                            errorMsg = \"No scene config configured for scene: \" + sceneName;\n                            logger.error(errorMsg);\n                            throw new XRSceneLoadFailure(errorMsg);\n                        }\n                        sceneUrl = scene.sceneConfig.url;\n                        sceneId = scene.sceneConfig.sceneId;\n                        if (scene.sceneConfig.hasOwnProperty('region')) {\n                            // Use the scene region on the Sumerian scene configuration\n                            sceneRegion = scene.sceneConfig.region;\n                        }\n                        else if (this.options.hasOwnProperty('region')) {\n                            // Use the scene region on the XR category configuration\n                            sceneRegion = this.options.region;\n                        }\n                        else {\n                            errorMsg = \"No region configured for scene: \" + sceneName;\n                            logger.error(errorMsg);\n                            throw new XRSceneLoadFailure(errorMsg);\n                        }\n                        awsSDKConfigOverride = {\n                            region: sceneRegion,\n                            // This is passed to the AWS clients created in\n                            // Sumerian's AwsSystem\n                            // This helps other services(like Lex and Polly) to track\n                            // traffic coming from Sumerian scenes embedded with Amplify\n                            customUserAgent: Constants.userAgent + \"-SumerianScene\",\n                        };\n                        fetchOptions = {\n                            headers: {\n                                // This sets the AWS user agent string\n                                // So the Sumerian service knows this request is\n                                // from Amplify\n                                'X-Amz-User-Agent': Constants.userAgent,\n                            },\n                        };\n                        url = sceneUrl;\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, Credentials.get()];\n                    case 2:\n                        credentials = _b.sent();\n                        awsSDKConfigOverride['credentials'] = credentials;\n                        accessInfo = {\n                            secret_key: credentials.secretAccessKey,\n                            access_key: credentials.accessKeyId,\n                            session_token: credentials.sessionToken,\n                        };\n                        serviceInfo = {\n                            region: sceneRegion,\n                            service: SUMERIAN_SERVICE_NAME,\n                        };\n                        request = Signer.sign({ method: 'GET', url: sceneUrl }, accessInfo, serviceInfo);\n                        fetchOptions.headers = __assign(__assign({}, fetchOptions.headers), request.headers);\n                        url = request.url;\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _b.sent();\n                        logger.debug('No credentials available, the request will be unsigned');\n                        return [3 /*break*/, 4];\n                    case 4: return [4 /*yield*/, fetch(url, fetchOptions)];\n                    case 5:\n                        apiResponse = _b.sent();\n                        return [4 /*yield*/, apiResponse.json()];\n                    case 6:\n                        apiResponseJson = _b.sent();\n                        if (apiResponse.status === 403) {\n                            if (apiResponseJson.message) {\n                                logger.error(\"Failure to authenticate user: \" + apiResponseJson.message);\n                                throw new XRSceneLoadFailure(\"Failure to authenticate user: \" + apiResponseJson.message);\n                            }\n                            else {\n                                logger.error(\"Failure to authenticate user\");\n                                throw new XRSceneLoadFailure(\"Failure to authenticate user\");\n                            }\n                        }\n                        sceneBundleData = apiResponseJson.bundleData[sceneId];\n                        return [4 /*yield*/, fetch(sceneBundleData.url, {\n                                headers: sceneBundleData.headers,\n                            })];\n                    case 7:\n                        sceneBundle = _b.sent();\n                        return [4 /*yield*/, sceneBundle.json()];\n                    case 8:\n                        sceneBundleJson = _b.sent();\n                        _b.label = 9;\n                    case 9:\n                        _b.trys.push([9, 11, , 12]);\n                        // Load the Sumerian bootstrapper script into the DOM\n                        return [4 /*yield*/, this.loadScript(sceneBundleJson[sceneId].bootstrapperUrl)];\n                    case 10:\n                        // Load the Sumerian bootstrapper script into the DOM\n                        _b.sent();\n                        return [3 /*break*/, 12];\n                    case 11:\n                        error_1 = _b.sent();\n                        logger.error(error_1);\n                        throw new XRSceneLoadFailure(error_1);\n                    case 12:\n                        progressCallback = sceneOptions.progressCallback\n                            ? sceneOptions.progressCallback\n                            : undefined;\n                        publishParamOverrides = scene.publishParamOverrides\n                            ? scene.publishParamOverrides\n                            : undefined;\n                        sceneLoadParams = {\n                            element: element,\n                            sceneId: sceneId,\n                            sceneBundle: sceneBundleJson,\n                            apiResponse: apiResponseJson,\n                            progressCallback: progressCallback,\n                            publishParamOverrides: publishParamOverrides,\n                            awsSDKConfigOverride: awsSDKConfigOverride,\n                        };\n                        return [4 /*yield*/, window.SumerianBootstrapper.loadScene(sceneLoadParams)];\n                    case 13:\n                        sceneController = _b.sent();\n                        scene.sceneController = sceneController;\n                        scene.isLoaded = true;\n                        // Log scene warnings\n                        for (_i = 0, _a = sceneController.sceneLoadWarnings; _i < _a.length; _i++) {\n                            warning = _a[_i];\n                            logger.warn(\"loadScene warning: \" + warning);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SumerianProvider.prototype.isSceneLoaded = function (sceneName) {\n        var scene = this.getScene(sceneName);\n        return scene.isLoaded || false;\n    };\n    SumerianProvider.prototype.getScene = function (sceneName) {\n        if (!this.options.scenes) {\n            var errorMsg = 'No scenes were defined in the configuration';\n            logger.error(errorMsg);\n            throw new XRNoSceneConfiguredError(errorMsg);\n        }\n        if (!sceneName) {\n            var errorMsg = 'No scene name was passed';\n            logger.error(errorMsg);\n            throw new XRSceneNotFoundError(errorMsg);\n        }\n        if (!this.options.scenes[sceneName]) {\n            var errorMsg = \"Scene '\" + sceneName + \"' is not configured\";\n            logger.error(errorMsg);\n            throw new XRSceneNotFoundError(errorMsg);\n        }\n        return this.options.scenes[sceneName];\n    };\n    SumerianProvider.prototype.getSceneController = function (sceneName) {\n        if (!this.options.scenes) {\n            var errorMsg = 'No scenes were defined in the configuration';\n            logger.error(errorMsg);\n            throw new XRNoSceneConfiguredError(errorMsg);\n        }\n        var scene = this.options.scenes[sceneName];\n        if (!scene) {\n            var errorMsg = \"Scene '\" + sceneName + \"' is not configured\";\n            logger.error(errorMsg);\n            throw new XRSceneNotFoundError(errorMsg);\n        }\n        var sceneController = scene.sceneController;\n        if (!sceneController) {\n            var errorMsg = \"Scene controller for '\" + sceneName + \"' has not been loaded\";\n            logger.error(errorMsg);\n            throw new XRSceneNotLoadedError(errorMsg);\n        }\n        return sceneController;\n    };\n    SumerianProvider.prototype.isVRCapable = function (sceneName) {\n        var sceneController = this.getSceneController(sceneName);\n        return sceneController.vrCapable;\n    };\n    SumerianProvider.prototype.isVRPresentationActive = function (sceneName) {\n        var sceneController = this.getSceneController(sceneName);\n        return sceneController.vrPresentationActive;\n    };\n    SumerianProvider.prototype.start = function (sceneName) {\n        var sceneController = this.getSceneController(sceneName);\n        sceneController.start();\n    };\n    SumerianProvider.prototype.enterVR = function (sceneName) {\n        var sceneController = this.getSceneController(sceneName);\n        sceneController.enterVR();\n    };\n    SumerianProvider.prototype.exitVR = function (sceneName) {\n        var sceneController = this.getSceneController(sceneName);\n        sceneController.exitVR();\n    };\n    SumerianProvider.prototype.isMuted = function (sceneName) {\n        var sceneController = this.getSceneController(sceneName);\n        return sceneController.muted;\n    };\n    SumerianProvider.prototype.setMuted = function (sceneName, muted) {\n        var sceneController = this.getSceneController(sceneName);\n        sceneController.muted = muted;\n    };\n    SumerianProvider.prototype.onSceneEvent = function (sceneName, eventName, eventHandler) {\n        var sceneController = this.getSceneController(sceneName);\n        sceneController.on(eventName, eventHandler);\n    };\n    SumerianProvider.prototype.enableAudio = function (sceneName) {\n        var sceneController = this.getSceneController(sceneName);\n        sceneController.enableAudio();\n    };\n    return SumerianProvider;\n}(AbstractXRProvider));\nexport { SumerianProvider };\n//# sourceMappingURL=SumerianProvider.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n/*\n * Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nimport { SumerianProvider } from './Providers/SumerianProvider';\nimport { XRProviderNotConfigured } from './Errors';\nvar logger = new Logger('XR');\nvar DEFAULT_PROVIDER_NAME = 'SumerianProvider';\nvar XR = /** @class */ (function () {\n    /**\n     * Initialize XR with AWS configurations\n     *\n     * @param {XROptions} options - Configuration object for XR\n     */\n    function XR(options) {\n        this._options = options;\n        logger.debug('XR Options', this._options);\n        this._defaultProvider = DEFAULT_PROVIDER_NAME;\n        this._pluggables = {};\n        // Add default provider\n        this.addPluggable(new SumerianProvider());\n    }\n    /**\n     * Configure XR part with configurations\n     *\n     * @param {XROptions} config - Configuration for XR\n     * @return {Object} - The current configuration\n     */\n    XR.prototype.configure = function (options) {\n        var _this = this;\n        var opt = options ? options.XR || options : {};\n        logger.debug('configure XR', { opt: opt });\n        this._options = Object.assign({}, this._options, opt);\n        Object.entries(this._pluggables).map(function (_a) {\n            var name = _a[0], provider = _a[1];\n            if (name === _this._defaultProvider && !opt[_this._defaultProvider]) {\n                provider.configure(_this._options);\n            }\n            else {\n                provider.configure(_this._options[name]);\n            }\n        });\n        return this._options;\n    };\n    /**\n     * add plugin into XR category\n     * @param {Object} pluggable - an instance of the plugin\n     */\n    XR.prototype.addPluggable = function (pluggable) {\n        return __awaiter(this, void 0, void 0, function () {\n            var config;\n            return __generator(this, function (_a) {\n                if (pluggable && pluggable.getCategory() === 'XR') {\n                    this._pluggables[pluggable.getProviderName()] = pluggable;\n                    config = pluggable.configure(this._options);\n                    return [2 /*return*/, config];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    XR.prototype.loadScene = function (sceneName, domElementId, sceneOptions, provider) {\n        if (sceneOptions === void 0) { sceneOptions = {}; }\n        if (provider === void 0) { provider = this._defaultProvider; }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this._pluggables[provider])\n                            throw new XRProviderNotConfigured(\"Provider '\" + provider + \"' not configured\");\n                        return [4 /*yield*/, this._pluggables[provider].loadScene(sceneName, domElementId, sceneOptions)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    XR.prototype.isSceneLoaded = function (sceneName, provider) {\n        if (provider === void 0) { provider = this._defaultProvider; }\n        if (!this._pluggables[provider])\n            throw new XRProviderNotConfigured(\"Provider '\" + provider + \"' not configured\");\n        return this._pluggables[provider].isSceneLoaded(sceneName);\n    };\n    XR.prototype.getSceneController = function (sceneName, provider) {\n        if (provider === void 0) { provider = this._defaultProvider; }\n        if (!this._pluggables[provider])\n            throw new XRProviderNotConfigured(\"Provider '\" + provider + \"' not configured\");\n        return this._pluggables[provider].getSceneController(sceneName);\n    };\n    XR.prototype.isVRCapable = function (sceneName, provider) {\n        if (provider === void 0) { provider = this._defaultProvider; }\n        if (!this._pluggables[provider])\n            throw new XRProviderNotConfigured(\"Provider '\" + provider + \"' not configured\");\n        return this._pluggables[provider].isVRCapable(sceneName);\n    };\n    XR.prototype.isVRPresentationActive = function (sceneName, provider) {\n        if (provider === void 0) { provider = this._defaultProvider; }\n        if (!this._pluggables[provider])\n            throw new XRProviderNotConfigured(\"Provider '\" + provider + \"' not configured\");\n        return this._pluggables[provider].isVRPresentationActive(sceneName);\n    };\n    XR.prototype.start = function (sceneName, provider) {\n        if (provider === void 0) { provider = this._defaultProvider; }\n        if (!this._pluggables[provider])\n            throw new XRProviderNotConfigured(\"Provider '\" + provider + \"' not configured\");\n        return this._pluggables[provider].start(sceneName);\n    };\n    XR.prototype.enterVR = function (sceneName, provider) {\n        if (provider === void 0) { provider = this._defaultProvider; }\n        if (!this._pluggables[provider])\n            throw new XRProviderNotConfigured(\"Provider '\" + provider + \"' not configured\");\n        return this._pluggables[provider].enterVR(sceneName);\n    };\n    XR.prototype.exitVR = function (sceneName, provider) {\n        if (provider === void 0) { provider = this._defaultProvider; }\n        if (!this._pluggables[provider])\n            throw new XRProviderNotConfigured(\"Provider '\" + provider + \"' not configured\");\n        return this._pluggables[provider].exitVR(sceneName);\n    };\n    XR.prototype.isMuted = function (sceneName, provider) {\n        if (provider === void 0) { provider = this._defaultProvider; }\n        if (!this._pluggables[provider])\n            throw new XRProviderNotConfigured(\"Provider '\" + provider + \"' not configured\");\n        return this._pluggables[provider].isMuted(sceneName);\n    };\n    XR.prototype.setMuted = function (sceneName, muted, provider) {\n        if (provider === void 0) { provider = this._defaultProvider; }\n        if (!this._pluggables[provider])\n            throw new XRProviderNotConfigured(\"Provider '\" + provider + \"' not configured\");\n        return this._pluggables[provider].setMuted(sceneName, muted);\n    };\n    XR.prototype.onSceneEvent = function (sceneName, eventName, eventHandler, provider) {\n        if (provider === void 0) { provider = this._defaultProvider; }\n        if (!this._pluggables[provider])\n            throw new XRProviderNotConfigured(\"Provider '\" + provider + \"' not configured\");\n        return this._pluggables[provider].onSceneEvent(sceneName, eventName, eventHandler);\n    };\n    XR.prototype.enableAudio = function (sceneName, provider) {\n        if (provider === void 0) { provider = this._defaultProvider; }\n        if (!this._pluggables[provider])\n            throw new XRProviderNotConfigured(\"Provider '\" + provider + \"' not configured\");\n        return this._pluggables[provider].enableAudio(sceneName);\n    };\n    return XR;\n}());\nexport default XR;\n//# sourceMappingURL=XR.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nvar logger = new Logger('Predictions');\nvar Predictions = /** @class */ (function () {\n    /**\n     * Initialize Predictions with AWS configurations\n     * @param {PredictionsOptions} options - Configuration object for Predictions\n     */\n    function Predictions(options) {\n        this._options = options;\n        this._convertPluggables = [];\n        this._identifyPluggables = [];\n        this._interpretPluggables = [];\n    }\n    Predictions.prototype.getModuleName = function () {\n        return 'Predictions';\n    };\n    /**\n     * add plugin/pluggable into Predictions category\n     * @param {Object} pluggable - an instance of the plugin/pluggable\n     **/\n    Predictions.prototype.addPluggable = function (pluggable) {\n        if (this.getPluggable(pluggable.getProviderName())) {\n            throw new Error(\"Pluggable with name \" + pluggable.getProviderName() + \" has already been added.\");\n        }\n        var pluggableAdded = false;\n        if (this.implementsConvertPluggable(pluggable)) {\n            this._convertPluggables.push(pluggable);\n            pluggableAdded = true;\n        }\n        if (this.implementsIdentifyPluggable(pluggable)) {\n            this._identifyPluggables.push(pluggable);\n            pluggableAdded = true;\n        }\n        if (this.implementsInterpretPluggable(pluggable)) {\n            this._interpretPluggables.push(pluggable);\n            pluggableAdded = true;\n        }\n        if (pluggableAdded) {\n            this.configurePluggable(pluggable);\n        }\n    };\n    /**\n     * Get the plugin object\n     * @param providerName - the name of the plugin\n     */\n    Predictions.prototype.getPluggable = function (providerName) {\n        var pluggable = this.getAllProviders().find(function (pluggable) { return pluggable.getProviderName() === providerName; });\n        if (pluggable === undefined) {\n            logger.debug('No plugin found with providerName=>', providerName);\n            return null;\n        }\n        else\n            return pluggable;\n    };\n    /**\n     * Remove the plugin object\n     * @param providerName - the name of the plugin\n     */\n    Predictions.prototype.removePluggable = function (providerName) {\n        this._convertPluggables = this._convertPluggables.filter(function (pluggable) { return pluggable.getProviderName() !== providerName; });\n        this._identifyPluggables = this._identifyPluggables.filter(function (pluggable) { return pluggable.getProviderName() !== providerName; });\n        this._interpretPluggables = this._interpretPluggables.filter(function (pluggable) { return pluggable.getProviderName() !== providerName; });\n        return;\n    };\n    /**\n     * To make both top level providers and category level providers work with same interface and configuration\n     * this method duplicates Predictions config into parent level config (for top level provider) and\n     * category level config (such as convert, identify etc) and pass both to each provider.\n     */\n    Predictions.prototype.configure = function (options) {\n        var _this = this;\n        var predictionsConfig = options ? options.predictions || options : {};\n        predictionsConfig = __assign(__assign({}, predictionsConfig), options);\n        this._options = Object.assign({}, this._options, predictionsConfig);\n        logger.debug('configure Predictions', this._options);\n        this.getAllProviders().forEach(function (pluggable) {\n            return _this.configurePluggable(pluggable);\n        });\n    };\n    Predictions.prototype.interpret = function (input, options) {\n        var pluggableToExecute = this.getPluggableToExecute(this._interpretPluggables, options);\n        return pluggableToExecute.interpret(input);\n    };\n    Predictions.prototype.convert = function (input, options) {\n        var pluggableToExecute = this.getPluggableToExecute(this._convertPluggables, options);\n        return pluggableToExecute.convert(input);\n    };\n    Predictions.prototype.identify = function (input, options) {\n        var pluggableToExecute = this.getPluggableToExecute(this._identifyPluggables, options);\n        return pluggableToExecute.identify(input);\n    };\n    // tslint:disable-next-line: max-line-length\n    Predictions.prototype.getPluggableToExecute = function (pluggables, providerOptions) {\n        // Give preference to provider name first since it is more specific to this call, even if\n        // there is only one provider configured to error out if the name provided is not the one matched.\n        if (providerOptions && providerOptions.providerName) {\n            return __spreadArrays(pluggables).find(function (pluggable) {\n                return pluggable.getProviderName() === providerOptions.providerName;\n            });\n        }\n        else {\n            if (pluggables.length === 1) {\n                return pluggables[0];\n            }\n            else {\n                throw new Error('More than one or no providers are configured, ' +\n                    'Either specify a provider name or configure exactly one provider');\n            }\n        }\n    };\n    Predictions.prototype.getAllProviders = function () {\n        return __spreadArrays(this._convertPluggables, this._identifyPluggables, this._interpretPluggables);\n    };\n    Predictions.prototype.configurePluggable = function (pluggable) {\n        var categoryConfig = Object.assign({}, this._options['predictions'], // Parent predictions config for the top level provider\n        this._options[pluggable.getCategory().toLowerCase()] // Actual category level config\n        );\n        pluggable.configure(categoryConfig);\n    };\n    Predictions.prototype.implementsConvertPluggable = function (obj) {\n        return obj && typeof obj.convert === 'function';\n    };\n    Predictions.prototype.implementsIdentifyPluggable = function (obj) {\n        return obj && typeof obj.identify === 'function';\n    };\n    Predictions.prototype.implementsInterpretPluggable = function (obj) {\n        return obj && typeof obj.interpret === 'function';\n    };\n    return Predictions;\n}());\nexport default Predictions;\n//# sourceMappingURL=Predictions.js.map","/**\n * Changes object keys to camel case. If optional parameter `keys` is given, then we extract only the\n * keys specified in `keys`.\n */\nexport function makeCamelCase(obj, keys) {\n    if (!obj)\n        return undefined;\n    var newObj = {};\n    var keysToRename = keys ? keys : Object.keys(obj);\n    keysToRename.forEach(function (key) {\n        var _a;\n        if (obj.hasOwnProperty(key)) {\n            // change the key to camelcase.\n            var camelCaseKey = key.charAt(0).toLowerCase() + key.substr(1);\n            Object.assign(newObj, (_a = {}, _a[camelCaseKey] = obj[key], _a));\n        }\n    });\n    return newObj;\n}\n/**\n * Given an array of object, call makeCamelCase(...) on each option.\n */\nexport function makeCamelCaseArray(objArr, keys) {\n    if (!objArr)\n        return undefined;\n    return objArr.map(function (obj) { return makeCamelCase(obj, keys); });\n}\n/**\n * Converts blob to array buffer\n */\nexport function blobToArrayBuffer(blob) {\n    return new Promise(function (res, rej) {\n        var reader = new FileReader();\n        reader.onload = function (_event) {\n            res(reader.result);\n        };\n        reader.onerror = function (err) {\n            rej(err);\n        };\n        try {\n            reader.readAsArrayBuffer(blob);\n        }\n        catch (err) {\n            rej(err); // in case user gives invalid type\n        }\n    });\n}\n//# sourceMappingURL=Utils.js.map","import { makeCamelCaseArray, makeCamelCase } from './Utils';\nfunction getBoundingBox(geometry) {\n    if (!geometry)\n        return undefined;\n    return makeCamelCase(geometry.BoundingBox);\n}\nfunction getPolygon(geometry) {\n    if (!geometry)\n        return undefined;\n    return makeCamelCaseArray(geometry.Polygon);\n}\n/**\n * Organizes blocks from Rekognition API to each of the categories and and structures\n * their data accordingly.\n * @param {Textract.BlockList} source - Array containing blocks returned from Textract API.\n * @return {IdentifyTextOutput} -  Object that categorizes each block and its information.\n */\nexport function categorizeRekognitionBlocks(blocks) {\n    // Skeleton IdentifyText API response. We will populate it as we iterate through blocks.\n    var response = {\n        text: {\n            fullText: '',\n            words: [],\n            lines: [],\n            linesDetailed: [],\n        },\n    };\n    // We categorize each block by running a forEach loop through them.\n    blocks.forEach(function (block) {\n        switch (block.Type) {\n            case 'LINE':\n                response.text.lines.push(block.DetectedText);\n                response.text.linesDetailed.push({\n                    text: block.DetectedText,\n                    polygon: getPolygon(block.Geometry),\n                    boundingBox: getBoundingBox(block.Geometry),\n                    page: null,\n                });\n                break;\n            case 'WORD':\n                response.text.fullText += block.DetectedText + ' ';\n                response.text.words.push({\n                    text: block.DetectedText,\n                    polygon: getPolygon(block.Geometry),\n                    boundingBox: getBoundingBox(block.Geometry),\n                });\n                break;\n        }\n    });\n    // remove trailing space of fullText\n    response.text.fullText = response.text.fullText.substr(0, response.text.fullText.length - 1);\n    return response;\n}\n/**\n * Organizes blocks from Textract API to each of the categories and and structures\n * their data accordingly.\n * @param {Textract.BlockList} source - Array containing blocks returned from Textract API.\n * @return {IdentifyTextOutput} -  Object that categorizes each block and its information.\n */\nexport function categorizeTextractBlocks(blocks) {\n    // Skeleton IdentifyText API response. We will populate it as we iterate through blocks.\n    var response = {\n        text: {\n            fullText: '',\n            words: [],\n            lines: [],\n            linesDetailed: [],\n        },\n    };\n    // if blocks is an empty array, ie. textract did not detect anything, return empty response.\n    if (blocks.length === 0)\n        return response;\n    /**\n     * We categorize each of the blocks by running a forEach loop through them.\n     *\n     * For complex structures such as Tables and KeyValue, we need to trasverse through their children. To do so,\n     * we will post-process them after the for each loop. We do this by storing table and keyvalues in arrays and\n     * mapping other blocks in `blockMap` (id to block) so we can reference them easily later.\n     *\n     * Note that we do not map `WORD` and `TABLE` in `blockMap` because they will not be referenced by any other\n     * block except the Page block.\n     */\n    var tableBlocks = Array();\n    var keyValueBlocks = Array();\n    var blockMap = {};\n    blocks.forEach(function (block) {\n        switch (block.BlockType) {\n            case 'LINE':\n                response.text.lines.push(block.Text);\n                response.text.linesDetailed.push({\n                    text: block.Text,\n                    polygon: getPolygon(block.Geometry),\n                    boundingBox: getBoundingBox(block.Geometry),\n                    page: block.Page,\n                });\n                break;\n            case 'WORD':\n                response.text.fullText += block.Text + ' ';\n                response.text.words.push({\n                    text: block.Text,\n                    polygon: getPolygon(block.Geometry),\n                    boundingBox: getBoundingBox(block.Geometry),\n                });\n                blockMap[block.Id] = block;\n                break;\n            case 'SELECTION_ELEMENT':\n                var selectionStatus = block.SelectionStatus === 'SELECTED' ? true : false;\n                if (!response.text.selections)\n                    response.text.selections = [];\n                response.text.selections.push({\n                    selected: selectionStatus,\n                    polygon: getPolygon(block.Geometry),\n                    boundingBox: getBoundingBox(block.Geometry),\n                });\n                blockMap[block.Id] = block;\n                break;\n            case 'TABLE':\n                tableBlocks.push(block);\n                break;\n            case 'KEY_VALUE_SET':\n                keyValueBlocks.push(block);\n                blockMap[block.Id] = block;\n                break;\n            default:\n                blockMap[block.Id] = block;\n        }\n    });\n    // remove trailing space in fullText\n    response.text.fullText = response.text.fullText.substr(0, response.text.fullText.length - 1);\n    // Post-process complex structures if they exist.\n    if (tableBlocks.length !== 0) {\n        var tableResponse_1 = Array();\n        tableBlocks.forEach(function (table) {\n            tableResponse_1.push(constructTable(table, blockMap));\n        });\n        response.text.tables = tableResponse_1;\n    }\n    if (keyValueBlocks.length !== 0) {\n        var keyValueResponse_1 = Array();\n        keyValueBlocks.forEach(function (keyValue) {\n            // We need the KeyValue blocks of EntityType = `KEY`, which has both key and value references.\n            if (keyValue.EntityTypes.indexOf('KEY') !== -1) {\n                keyValueResponse_1.push(constructKeyValue(keyValue, blockMap));\n            }\n        });\n        response.text.keyValues = keyValueResponse_1;\n    }\n    return response;\n}\n/**\n * Constructs a table object using data from its children cells.\n * @param {Textract.Block} table - Table block that has references (`Relationships`) to its cells\n * @param {[id: string]: Textract.Block} blockMap - Maps block Ids to blocks.\n */\nexport function constructTable(table, blockMap) {\n    var tableMatrix;\n    tableMatrix = [];\n    // visit each of the cell associated with the table's relationship.\n    table.Relationships.forEach(function (tableRelation) {\n        tableRelation.Ids.forEach(function (cellId) {\n            var cellBlock = blockMap[cellId];\n            var row = cellBlock.RowIndex - 1; // textract starts indexing at 1, so subtract it by 1.\n            var col = cellBlock.ColumnIndex - 1; // textract starts indexing at 1, so subtract it by 1.\n            // extract data contained inside the cell.\n            var content = extractContentsFromBlock(cellBlock, blockMap);\n            var cell = {\n                text: content.text,\n                boundingBox: getBoundingBox(cellBlock.Geometry),\n                polygon: getPolygon(cellBlock.Geometry),\n                selected: content.selected,\n                rowSpan: cellBlock.RowSpan,\n                columnSpan: cellBlock.ColumnSpan,\n            };\n            if (!tableMatrix[row])\n                tableMatrix[row] = [];\n            tableMatrix[row][col] = cell;\n        });\n    });\n    var rowSize = tableMatrix.length;\n    var columnSize = tableMatrix[0].length;\n    // Note that we leave spanned cells undefined for distinction\n    return {\n        size: { rows: rowSize, columns: columnSize },\n        table: tableMatrix,\n        boundingBox: getBoundingBox(table.Geometry),\n        polygon: getPolygon(table.Geometry),\n    };\n}\n/**\n * Constructs a key value object from its children key and value blocks.\n * @param {Textract.Block} KeyValue - KeyValue block that has references (`Relationships`) to its children.\n * @param {[id: string]: Textract.Block} blockMap - Maps block Ids to blocks.\n */\nexport function constructKeyValue(keyBlock, blockMap) {\n    var keyText = '';\n    var valueText = '';\n    var valueSelected;\n    keyBlock.Relationships.forEach(function (keyValueRelation) {\n        if (keyValueRelation.Type === 'CHILD') {\n            // relation refers to key\n            var contents = extractContentsFromBlock(keyBlock, blockMap);\n            keyText = contents.text;\n        }\n        else if (keyValueRelation.Type === 'VALUE') {\n            // relation refers to value\n            keyValueRelation.Ids.forEach(function (valueId) {\n                var valueBlock = blockMap[valueId];\n                var contents = extractContentsFromBlock(valueBlock, blockMap);\n                valueText = contents.text;\n                if (contents.selected != null)\n                    valueSelected = contents.selected;\n            });\n        }\n    });\n    return {\n        key: keyText,\n        value: { text: valueText, selected: valueSelected },\n        polygon: getPolygon(keyBlock.Geometry),\n        boundingBox: getBoundingBox(keyBlock.Geometry),\n    };\n}\n/**\n * Extracts text and selection from input block's children.\n * @param {Textract.Block}} block - Block that we want to extract contents from.\n * @param {[id: string]: Textract.Block} blockMap - Maps block Ids to blocks.\n */\nexport function extractContentsFromBlock(block, blockMap) {\n    var words = '';\n    var isSelected;\n    if (!block.Relationships) {\n        // some block might have no content\n        return { text: '', selected: undefined };\n    }\n    block.Relationships.forEach(function (relation) {\n        relation.Ids.forEach(function (contentId) {\n            var contentBlock = blockMap[contentId];\n            if (contentBlock.BlockType === 'WORD') {\n                words += contentBlock.Text + ' ';\n            }\n            else if (contentBlock.BlockType === 'SELECTION_ELEMENT') {\n                isSelected = contentBlock.SelectionStatus === 'SELECTED' ? true : false;\n            }\n        });\n    });\n    words = words.substr(0, words.length - 1); // remove trailing space.\n    return { text: words, selected: isSelected };\n}\n//# sourceMappingURL=IdentifyTextUtils.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { Credentials } from '@aws-amplify/core';\nimport Storage from '@aws-amplify/storage';\nimport { AbstractIdentifyPredictionsProvider } from '../types/Providers';\nimport * as Rekognition from 'aws-sdk/clients/rekognition';\nimport { isStorageSource, isFileSource, isBytesSource, isIdentifyCelebrities, isIdentifyFromCollection, } from '../types';\nimport * as Textract from 'aws-sdk/clients/textract';\nimport { makeCamelCase, makeCamelCaseArray, blobToArrayBuffer } from './Utils';\nimport { categorizeRekognitionBlocks, categorizeTextractBlocks, } from './IdentifyTextUtils';\nvar AmazonAIIdentifyPredictionsProvider = /** @class */ (function (_super) {\n    __extends(AmazonAIIdentifyPredictionsProvider, _super);\n    function AmazonAIIdentifyPredictionsProvider() {\n        return _super.call(this) || this;\n    }\n    AmazonAIIdentifyPredictionsProvider.prototype.getProviderName = function () {\n        return 'AmazonAIIdentifyPredictionsProvider';\n    };\n    /**\n     * Verify user input source and converts it into source object readable by Rekognition and Textract.\n     * Note that Rekognition and Textract use the same source interface, so we need not worry about types.\n     * @param {IdentifySource} source - User input source that directs to the object user wants\n     * to identify (storage, file, or bytes).\n     * @return {Promise<Rekognition.Image>} - Promise resolving to the converted source object.\n     */\n    AmazonAIIdentifyPredictionsProvider.prototype.configureSource = function (source) {\n        return new Promise(function (res, rej) {\n            if (isStorageSource(source)) {\n                var storageConfig = {\n                    level: source.level,\n                    identityId: source.identityId,\n                };\n                Storage.get(source.key, storageConfig)\n                    .then(function (url) {\n                    var parser = /https:\\/\\/([a-zA-Z0-9%-_.]+)\\.s3\\.[A-Za-z0-9%-._~]+\\/([a-zA-Z0-9%-._~/]+)\\?/;\n                    var parsedURL = url.match(parser);\n                    if (parsedURL.length < 3)\n                        rej('Invalid S3 key was given.');\n                    res({ S3Object: { Bucket: parsedURL[1], Name: parsedURL[2] } });\n                })\n                    .catch(function (err) { return rej(err); });\n            }\n            else if (isFileSource(source)) {\n                blobToArrayBuffer(source.file)\n                    .then(function (buffer) {\n                    res({ Bytes: buffer });\n                })\n                    .catch(function (err) { return rej(err); });\n            }\n            else if (isBytesSource(source)) {\n                var bytes = source.bytes;\n                if (bytes instanceof Blob) {\n                    blobToArrayBuffer(bytes)\n                        .then(function (buffer) {\n                        res({ Bytes: buffer });\n                    })\n                        .catch(function (err) { return rej(err); });\n                }\n                // everything else can be directly passed to Rekognition / Textract.\n                res({ Bytes: bytes });\n            }\n            else {\n                rej('Input source is not configured correctly.');\n            }\n        });\n    };\n    /**\n     * Recognize text from real-world images and documents (plain text, forms and tables). Detects text in the input\n     * image and converts it into machine-readable text.\n     * @param {IdentifySource} source - Object containing the source image and feature types to analyze.\n     * @return {Promise<IdentifyTextOutput>} - Promise resolving to object containing identified texts.\n     */\n    AmazonAIIdentifyPredictionsProvider.prototype.identifyText = function (input) {\n        var _this = this;\n        return new Promise(function (res, rej) { return __awaiter(_this, void 0, void 0, function () {\n            var credentials, _a, _b, _c, region, _d, _e, configFormat, inputDocument, format, featureTypes, textractParam_1, rekognitionParam, param;\n            var _this = this;\n            return __generator(this, function (_f) {\n                switch (_f.label) {\n                    case 0: return [4 /*yield*/, Credentials.get()];\n                    case 1:\n                        credentials = _f.sent();\n                        if (!credentials)\n                            return [2 /*return*/, rej('No credentials')];\n                        _a = this._config.identifyText, _b = _a === void 0 ? {} : _a, _c = _b.region, region = _c === void 0 ? '' : _c, _d = _b.defaults, _e = (_d === void 0 ? {} : _d).format, configFormat = _e === void 0 ? 'PLAIN' : _e;\n                        this.rekognition = new Rekognition({ region: region, credentials: credentials });\n                        this.textract = new Textract({ region: region, credentials: credentials });\n                        return [4 /*yield*/, this.configureSource(input.text.source)\n                                .then(function (data) { return (inputDocument = data); })\n                                .catch(function (err) {\n                                rej(err);\n                            })];\n                    case 2:\n                        _f.sent();\n                        format = input.text.format || configFormat;\n                        featureTypes = [];\n                        if (format === 'FORM' || format === 'ALL')\n                            featureTypes.push('FORMS');\n                        if (format === 'TABLE' || format === 'ALL')\n                            featureTypes.push('TABLES');\n                        if (featureTypes.length === 0) {\n                            textractParam_1 = {\n                                Document: inputDocument,\n                            };\n                            rekognitionParam = {\n                                Image: inputDocument,\n                            };\n                            this.rekognition.detectText(rekognitionParam, function (rekognitionErr, rekognitionData) {\n                                if (rekognitionErr)\n                                    return rej(rekognitionErr);\n                                var rekognitionResponse = categorizeRekognitionBlocks(rekognitionData.TextDetections);\n                                if (rekognitionResponse.text.words.length < 50) {\n                                    // did not hit the word limit, return the data\n                                    return res(rekognitionResponse);\n                                }\n                                _this.textract.detectDocumentText(textractParam_1, function (textractErr, textractData) {\n                                    if (textractErr)\n                                        return rej(textractErr);\n                                    // use the service that identified more texts.\n                                    if (rekognitionData.TextDetections.length >\n                                        textractData.Blocks.length) {\n                                        return res(rekognitionResponse);\n                                    }\n                                    else {\n                                        return res(categorizeTextractBlocks(textractData.Blocks));\n                                    }\n                                });\n                            });\n                        }\n                        else {\n                            param = {\n                                Document: inputDocument,\n                                FeatureTypes: featureTypes,\n                            };\n                            this.textract.analyzeDocument(param, function (err, data) {\n                                if (err)\n                                    return rej(err);\n                                var blocks = data.Blocks;\n                                res(categorizeTextractBlocks(blocks));\n                            });\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); });\n    };\n    /**\n     * Identify instances of real world entities from an image and if it contains unsafe content.\n     * @param {IdentifyLabelsInput} input - Object containing the source image and entity type to identify.\n     * @return {Promise<IdentifyLabelsOutput>} - Promise resolving to an array of identified entities.\n     */\n    AmazonAIIdentifyPredictionsProvider.prototype.identifyLabels = function (input) {\n        var _this = this;\n        return new Promise(function (res, rej) { return __awaiter(_this, void 0, void 0, function () {\n            var credentials, _a, _b, _c, region, _d, _e, type, inputImage, param, servicePromises, entityType;\n            return __generator(this, function (_f) {\n                switch (_f.label) {\n                    case 0: return [4 /*yield*/, Credentials.get()];\n                    case 1:\n                        credentials = _f.sent();\n                        if (!credentials)\n                            return [2 /*return*/, rej('No credentials')];\n                        _a = this._config.identifyLabels, _b = _a === void 0 ? {} : _a, _c = _b.region, region = _c === void 0 ? '' : _c, _d = _b.defaults, _e = (_d === void 0 ? {} : _d).type, type = _e === void 0 ? 'LABELS' : _e;\n                        this.rekognition = new Rekognition({ region: region, credentials: credentials });\n                        return [4 /*yield*/, this.configureSource(input.labels.source)\n                                .then(function (data) {\n                                inputImage = data;\n                            })\n                                .catch(function (err) {\n                                return rej(err);\n                            })];\n                    case 2:\n                        _f.sent();\n                        param = { Image: inputImage };\n                        servicePromises = [];\n                        entityType = input.labels.type || type;\n                        if (entityType === 'LABELS' || entityType === 'ALL') {\n                            servicePromises.push(this.detectLabels(param));\n                        }\n                        if (entityType === 'UNSAFE' || entityType === 'ALL') {\n                            servicePromises.push(this.detectModerationLabels(param));\n                        }\n                        // if (servicePromises.length === 0) {\n                        //     rej('You must specify entity type: LABELS | UNSAFE | ALL');\n                        // }\n                        Promise.all(servicePromises)\n                            .then(function (data) {\n                            var identifyResult = {};\n                            // concatenate resolved promises to a single object\n                            data.forEach(function (val) {\n                                identifyResult = __assign(__assign({}, identifyResult), val);\n                            });\n                            res(identifyResult);\n                        })\n                            .catch(function (err) { return rej(err); });\n                        return [2 /*return*/];\n                }\n            });\n        }); });\n    };\n    /**\n     * Calls Rekognition.detectLabels and organizes the returned data.\n     * @param {Rekognition.DetectLabelsRequest} param - parameter to be passed onto Rekognition\n     * @return {Promise<IdentifyLabelsOutput>} - Promise resolving to organized detectLabels response.\n     */\n    AmazonAIIdentifyPredictionsProvider.prototype.detectLabels = function (param) {\n        var _this = this;\n        return new Promise(function (res, rej) {\n            _this.rekognition.detectLabels(param, function (err, data) {\n                if (err)\n                    return rej(err);\n                if (!data.Labels)\n                    return res({ labels: null }); // no image was detected\n                var detectLabelData = data.Labels.map(function (val) {\n                    var boxes = val.Instances\n                        ? val.Instances.map(function (val) { return makeCamelCase(val.BoundingBox); })\n                        : undefined;\n                    return {\n                        name: val.Name,\n                        boundingBoxes: boxes,\n                        metadata: {\n                            confidence: val.Confidence,\n                            parents: makeCamelCaseArray(val.Parents),\n                        },\n                    };\n                });\n                return res({ labels: detectLabelData });\n            });\n        });\n    };\n    /**\n     * Calls Rekognition.detectModerationLabels and organizes the returned data.\n     * @param {Rekognition.DetectLabelsRequest} param - Parameter to be passed onto Rekognition\n     * @return {Promise<IdentifyLabelsOutput>} - Promise resolving to organized detectModerationLabels response.\n     */\n    AmazonAIIdentifyPredictionsProvider.prototype.detectModerationLabels = function (param) {\n        var _this = this;\n        return new Promise(function (res, rej) {\n            _this.rekognition.detectModerationLabels(param, function (err, data) {\n                if (err)\n                    return rej(err);\n                if (data.ModerationLabels.length !== 0) {\n                    return res({ unsafe: 'YES' });\n                }\n                else {\n                    return res({ unsafe: 'NO' });\n                }\n            });\n        });\n    };\n    /**\n     * Identify faces within an image that is provided as input, and match faces from a collection\n     * or identify celebrities.\n     * @param {IdentifyEntityInput} input - object containing the source image and face match options.\n     * @return {Promise<IdentifyEntityOutput>} Promise resolving to identify results.\n     */\n    AmazonAIIdentifyPredictionsProvider.prototype.identifyEntities = function (input) {\n        var _this = this;\n        return new Promise(function (res, rej) { return __awaiter(_this, void 0, void 0, function () {\n            var credentials, _a, _b, _c, region, _d, celebrityDetectionEnabled, _e, _f, _g, collectionIdConfig, _h, maxFacesConfig, inputImage, param, _j, _k, collectionId, _l, maxFaces, updatedParam;\n            var _this = this;\n            return __generator(this, function (_m) {\n                switch (_m.label) {\n                    case 0: return [4 /*yield*/, Credentials.get()];\n                    case 1:\n                        credentials = _m.sent();\n                        if (!credentials)\n                            return [2 /*return*/, rej('No credentials')];\n                        _a = this._config.identifyEntities, _b = _a === void 0 ? {} : _a, _c = _b.region, region = _c === void 0 ? '' : _c, _d = _b.celebrityDetectionEnabled, celebrityDetectionEnabled = _d === void 0 ? false : _d, _e = _b.defaults, _f = _e === void 0 ? {} : _e, _g = _f.collectionId, collectionIdConfig = _g === void 0 ? '' : _g, _h = _f.maxEntities, maxFacesConfig = _h === void 0 ? 50 : _h;\n                        // default arguments\n                        this.rekognition = new Rekognition({ region: region, credentials: credentials });\n                        return [4 /*yield*/, this.configureSource(input.entities.source)\n                                .then(function (data) { return (inputImage = data); })\n                                .catch(function (err) {\n                                return rej(err);\n                            })];\n                    case 2:\n                        _m.sent();\n                        param = { Image: inputImage };\n                        if (isIdentifyCelebrities(input.entities) &&\n                            input.entities.celebrityDetection) {\n                            if (!celebrityDetectionEnabled) {\n                                return [2 /*return*/, rej('Error: You have to enable celebrity detection first')];\n                            }\n                            this.rekognition.recognizeCelebrities(param, function (err, data) {\n                                if (err)\n                                    return rej(err);\n                                var faces = data.CelebrityFaces.map(function (celebrity) {\n                                    return {\n                                        boundingBox: makeCamelCase(celebrity.Face.BoundingBox),\n                                        landmarks: makeCamelCaseArray(celebrity.Face.Landmarks),\n                                        metadata: __assign(__assign({}, makeCamelCase(celebrity, ['Id', 'Name', 'Urls'])), { pose: makeCamelCase(celebrity.Face.Pose) }),\n                                    };\n                                });\n                                res({ entities: faces });\n                            });\n                        }\n                        else if (isIdentifyFromCollection(input.entities) &&\n                            input.entities.collection) {\n                            _j = input.entities, _k = _j.collectionId, collectionId = _k === void 0 ? collectionIdConfig : _k, _l = _j.maxEntities, maxFaces = _l === void 0 ? maxFacesConfig : _l;\n                            updatedParam = __assign(__assign({}, param), { CollectionId: collectionId, MaxFaces: maxFaces });\n                            this.rekognition.searchFacesByImage(updatedParam, function (err, data) {\n                                if (err)\n                                    return rej(err);\n                                var faces = data.FaceMatches.map(function (val) {\n                                    return {\n                                        boundingBox: makeCamelCase(val.Face.BoundingBox),\n                                        metadata: {\n                                            externalImageId: _this.decodeExternalImageId(val.Face.ExternalImageId),\n                                            similarity: val.Similarity,\n                                        },\n                                    };\n                                });\n                                res({ entities: faces });\n                            });\n                        }\n                        else {\n                            this.rekognition.detectFaces(param, function (err, data) {\n                                if (err)\n                                    return rej(err);\n                                var faces = data.FaceDetails.map(function (detail) {\n                                    // face attributes keys we want to extract from Rekognition's response\n                                    var attributeKeys = [\n                                        'Smile',\n                                        'Eyeglasses',\n                                        'Sunglasses',\n                                        'Gender',\n                                        'Beard',\n                                        'Mustache',\n                                        'EyesOpen',\n                                        'MouthOpen',\n                                    ];\n                                    var faceAttributes = makeCamelCase(detail, attributeKeys);\n                                    if (detail.Emotions) {\n                                        faceAttributes['emotions'] = detail.Emotions.map(function (emotion) { return emotion.Type; });\n                                    }\n                                    return {\n                                        boundingBox: makeCamelCase(detail.BoundingBox),\n                                        landmarks: makeCamelCaseArray(detail.Landmarks),\n                                        ageRange: makeCamelCase(detail.AgeRange),\n                                        attributes: makeCamelCase(detail, attributeKeys),\n                                        metadata: {\n                                            confidence: detail.Confidence,\n                                            pose: makeCamelCase(detail.Pose),\n                                        },\n                                    };\n                                });\n                                res({ entities: faces });\n                            });\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); });\n    };\n    AmazonAIIdentifyPredictionsProvider.prototype.decodeExternalImageId = function (externalImageId) {\n        return ('' + externalImageId).replace(/::/g, '/');\n    };\n    return AmazonAIIdentifyPredictionsProvider;\n}(AbstractIdentifyPredictionsProvider));\nexport default AmazonAIIdentifyPredictionsProvider;\n//# sourceMappingURL=AmazonAIIdentifyPredictionsProvider.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { Credentials } from '@aws-amplify/core';\nimport { AbstractInterpretPredictionsProvider } from '../types/Providers';\nimport { InterpretTextCategories, } from '../types';\nimport { Comprehend } from 'aws-sdk';\nvar AmazonAIInterpretPredictionsProvider = /** @class */ (function (_super) {\n    __extends(AmazonAIInterpretPredictionsProvider, _super);\n    function AmazonAIInterpretPredictionsProvider() {\n        return _super.call(this) || this;\n    }\n    AmazonAIInterpretPredictionsProvider.prototype.getProviderName = function () {\n        return 'AmazonAIInterpretPredictionsProvider';\n    };\n    AmazonAIInterpretPredictionsProvider.prototype.interpretText = function (input) {\n        var _this = this;\n        return new Promise(function (res, rej) { return __awaiter(_this, void 0, void 0, function () {\n            var credentials, _a, _b, _c, region, _d, _e, interpretTypeConfig, _f, _g, _h, _j, text, _k, interpretType, _l, _m, _o, language, comprehend, doAll, languagePromise, languageDetectionParams, entitiesPromise, LanguageCode, _p, entitiesDetectionParams, sentimentPromise, LanguageCode, _q, sentimentParams, syntaxPromise, LanguageCode, _r, syntaxParams, keyPhrasesPromise, LanguageCode, _s, keyPhrasesParams, results, err_1;\n            return __generator(this, function (_t) {\n                switch (_t.label) {\n                    case 0: return [4 /*yield*/, Credentials.get()];\n                    case 1:\n                        credentials = _t.sent();\n                        if (!credentials)\n                            return [2 /*return*/, rej('No credentials')];\n                        _a = this._config.interpretText, _b = _a === void 0 ? {} : _a, _c = _b.region, region = _c === void 0 ? '' : _c, _d = _b.defaults, _e = (_d === void 0 ? {} : _d).type, interpretTypeConfig = _e === void 0 ? '' : _e;\n                        _f = (input).text, _g = _f === void 0 ? {} : _f, _h = _g.source, _j = (_h === void 0 ? {} : _h).text, text = _j === void 0 ? '' : _j, _k = _g.type, interpretType = _k === void 0 ? interpretTypeConfig : _k;\n                        _l = (input).text, _m = (_l === void 0 ? {} : _l).source, _o = (_m === void 0 ? {} : _m).language, language = _o === void 0 ? undefined : _o;\n                        comprehend = new Comprehend({\n                            credentials: credentials,\n                            region: region,\n                        });\n                        doAll = interpretType === InterpretTextCategories.ALL;\n                        if (doAll || interpretType === InterpretTextCategories.LANGUAGE) {\n                            languageDetectionParams = {\n                                Text: text,\n                            };\n                            languagePromise = this.detectLanguage(languageDetectionParams, comprehend);\n                        }\n                        if (!(doAll || interpretType === InterpretTextCategories.ENTITIES)) return [3 /*break*/, 4];\n                        _p = language;\n                        if (_p) return [3 /*break*/, 3];\n                        return [4 /*yield*/, languagePromise];\n                    case 2:\n                        _p = (_t.sent());\n                        _t.label = 3;\n                    case 3:\n                        LanguageCode = _p;\n                        if (!LanguageCode) {\n                            return [2 /*return*/, rej('language code is required on source for this selection')];\n                        }\n                        entitiesDetectionParams = {\n                            Text: text,\n                            LanguageCode: LanguageCode,\n                        };\n                        entitiesPromise = this.detectEntities(entitiesDetectionParams, comprehend);\n                        _t.label = 4;\n                    case 4:\n                        if (!(doAll || interpretType === InterpretTextCategories.SENTIMENT)) return [3 /*break*/, 7];\n                        _q = language;\n                        if (_q) return [3 /*break*/, 6];\n                        return [4 /*yield*/, languagePromise];\n                    case 5:\n                        _q = (_t.sent());\n                        _t.label = 6;\n                    case 6:\n                        LanguageCode = _q;\n                        if (!LanguageCode) {\n                            return [2 /*return*/, rej('language code is required on source for this selection')];\n                        }\n                        sentimentParams = {\n                            Text: text,\n                            LanguageCode: LanguageCode,\n                        };\n                        sentimentPromise = this.detectSentiment(sentimentParams, comprehend);\n                        _t.label = 7;\n                    case 7:\n                        if (!(doAll || interpretType === InterpretTextCategories.SYNTAX)) return [3 /*break*/, 10];\n                        _r = language;\n                        if (_r) return [3 /*break*/, 9];\n                        return [4 /*yield*/, languagePromise];\n                    case 8:\n                        _r = (_t.sent());\n                        _t.label = 9;\n                    case 9:\n                        LanguageCode = _r;\n                        if (!LanguageCode) {\n                            return [2 /*return*/, rej('language code is required on source for this selection')];\n                        }\n                        syntaxParams = {\n                            Text: text,\n                            LanguageCode: LanguageCode,\n                        };\n                        syntaxPromise = this.detectSyntax(syntaxParams, comprehend);\n                        _t.label = 10;\n                    case 10:\n                        if (!(doAll || interpretType === InterpretTextCategories.KEY_PHRASES)) return [3 /*break*/, 13];\n                        _s = language;\n                        if (_s) return [3 /*break*/, 12];\n                        return [4 /*yield*/, languagePromise];\n                    case 11:\n                        _s = (_t.sent());\n                        _t.label = 12;\n                    case 12:\n                        LanguageCode = _s;\n                        if (!LanguageCode) {\n                            return [2 /*return*/, rej('language code is required on source for this selection')];\n                        }\n                        keyPhrasesParams = {\n                            Text: text,\n                            LanguageCode: LanguageCode,\n                        };\n                        keyPhrasesPromise = this.detectKeyPhrases(keyPhrasesParams, comprehend);\n                        _t.label = 13;\n                    case 13:\n                        _t.trys.push([13, 15, , 16]);\n                        return [4 /*yield*/, Promise.all([\n                                languagePromise,\n                                entitiesPromise,\n                                sentimentPromise,\n                                syntaxPromise,\n                                keyPhrasesPromise,\n                            ])];\n                    case 14:\n                        results = _t.sent();\n                        res({\n                            textInterpretation: {\n                                keyPhrases: results[4] || [],\n                                language: results[0] || '',\n                                sentiment: results[2],\n                                syntax: results[3] || [],\n                                textEntities: results[1] || [],\n                            },\n                        });\n                        return [3 /*break*/, 16];\n                    case 15:\n                        err_1 = _t.sent();\n                        rej(err_1);\n                        return [3 /*break*/, 16];\n                    case 16: return [2 /*return*/];\n                }\n            });\n        }); });\n    };\n    AmazonAIInterpretPredictionsProvider.prototype.detectKeyPhrases = function (params, comprehend) {\n        return new Promise(function (res, rej) {\n            comprehend.detectKeyPhrases(params, function (err, data) {\n                var _a = (data || {}).KeyPhrases, KeyPhrases = _a === void 0 ? [] : _a;\n                if (err) {\n                    if (err.code === 'AccessDeniedException') {\n                        rej('Not authorized, did you enable Interpret Text on predictions category Amplify CLI? try: ' +\n                            'amplify predictions add');\n                    }\n                    else {\n                        rej(err.message);\n                    }\n                }\n                else {\n                    res(KeyPhrases.map(function (_a) {\n                        var text = _a.Text;\n                        return { text: text };\n                    }));\n                }\n            });\n        });\n    };\n    AmazonAIInterpretPredictionsProvider.prototype.detectSyntax = function (params, comprehend) {\n        var _this = this;\n        return new Promise(function (res, rej) {\n            comprehend.detectSyntax(params, function (err, data) {\n                var _a = (data || {}).SyntaxTokens, SyntaxTokens = _a === void 0 ? [] : _a;\n                if (err) {\n                    if (err.code === 'AccessDeniedException') {\n                        rej('Not authorized, did you enable Interpret Text on predictions category Amplify CLI? try: ' +\n                            'amplify predictions add');\n                    }\n                    else {\n                        rej(err.message);\n                    }\n                }\n                else {\n                    res(_this.serializeSyntaxFromComprehend(SyntaxTokens));\n                }\n            });\n        });\n    };\n    AmazonAIInterpretPredictionsProvider.prototype.serializeSyntaxFromComprehend = function (tokens) {\n        var response = [];\n        if (tokens && Array.isArray(tokens)) {\n            response = tokens.map(function (_a) {\n                var _b = _a.Text, text = _b === void 0 ? '' : _b, _c = _a.PartOfSpeech, _d = (_c === void 0 ? {} : _c).Tag, syntax = _d === void 0 ? '' : _d;\n                return { text: text, syntax: syntax };\n            });\n        }\n        return response;\n    };\n    AmazonAIInterpretPredictionsProvider.prototype.detectSentiment = function (params, comprehend) {\n        return new Promise(function (res, rej) {\n            comprehend.detectSentiment(params, function (err, data) {\n                if (err) {\n                    if (err.code === 'AccessDeniedException') {\n                        rej('Not authorized, did you enable Interpret Text on predictions category Amplify CLI? try: ' +\n                            'amplify predictions add');\n                    }\n                    else {\n                        rej(err.message);\n                    }\n                }\n                else {\n                    var _a = (data), _b = _a.Sentiment, predominant = _b === void 0 ? '' : _b, _c = _a.SentimentScore, _d = _c === void 0 ? {} : _c, _e = _d.Positive, positive = _e === void 0 ? 0 : _e, _f = _d.Negative, negative = _f === void 0 ? 0 : _f, _g = _d.Neutral, neutral = _g === void 0 ? 0 : _g, _h = _d.Mixed, mixed = _h === void 0 ? 0 : _h;\n                    res({ predominant: predominant, positive: positive, negative: negative, neutral: neutral, mixed: mixed });\n                }\n            });\n        });\n    };\n    AmazonAIInterpretPredictionsProvider.prototype.detectEntities = function (params, comprehend) {\n        var _this = this;\n        return new Promise(function (res, rej) {\n            comprehend.detectEntities(params, function (err, data) {\n                var _a = (data || {}).Entities, Entities = _a === void 0 ? [] : _a;\n                if (err) {\n                    if (err.code === 'AccessDeniedException') {\n                        rej('Not authorized, did you enable Interpret Text on predictions category Amplify CLI? try: ' +\n                            'amplify predictions add');\n                    }\n                    else {\n                        rej(err.message);\n                    }\n                }\n                else {\n                    res(_this.serializeEntitiesFromComprehend(Entities));\n                }\n            });\n        });\n    };\n    AmazonAIInterpretPredictionsProvider.prototype.serializeEntitiesFromComprehend = function (data) {\n        var response = [];\n        if (data && Array.isArray(data)) {\n            response = data.map(function (_a) {\n                var type = _a.Type, text = _a.Text;\n                return { type: type, text: text };\n            });\n        }\n        return response;\n    };\n    AmazonAIInterpretPredictionsProvider.prototype.detectLanguage = function (params, comprehend) {\n        return new Promise(function (res, rej) {\n            comprehend.detectDominantLanguage(params, function (err, data) {\n                if (err) {\n                    if (err.code === 'AccessDeniedException') {\n                        rej('Not authorized, did you enable Interpret Text on predictions category Amplify CLI? try: ' +\n                            'amplify predictions add');\n                    }\n                    else {\n                        rej(err.message);\n                    }\n                }\n                else {\n                    var _a = (data || {}).Languages, LanguageCode = (_a === void 0 ? [''] : _a)[0].LanguageCode;\n                    if (!LanguageCode) {\n                        rej('Language not detected');\n                    }\n                    res(data.Languages[0].LanguageCode);\n                }\n            });\n        });\n    };\n    return AmazonAIInterpretPredictionsProvider;\n}(AbstractInterpretPredictionsProvider));\nexport default AmazonAIInterpretPredictionsProvider;\n//# sourceMappingURL=AmazonAIInterpretPredictionsProvider.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { AbstractPredictionsProvider } from '../types/Providers';\nimport { AmazonAIConvertPredictionsProvider, AmazonAIInterpretPredictionsProvider, AmazonAIIdentifyPredictionsProvider, } from '.';\nvar AmazonAIPredictionsProvider = /** @class */ (function (_super) {\n    __extends(AmazonAIPredictionsProvider, _super);\n    function AmazonAIPredictionsProvider() {\n        var _this = _super.call(this) || this;\n        _this.convertProvider = new AmazonAIConvertPredictionsProvider();\n        _this.identifyProvider = new AmazonAIIdentifyPredictionsProvider();\n        _this.interpretProvider = new AmazonAIInterpretPredictionsProvider();\n        return _this;\n    }\n    AmazonAIPredictionsProvider.prototype.getCategory = function () {\n        return 'Predictions';\n    };\n    AmazonAIPredictionsProvider.prototype.getProviderName = function () {\n        return 'AmazonAIPredictionsProvider';\n    };\n    AmazonAIPredictionsProvider.prototype.configure = function (config) {\n        this.convertProvider.configure(config.convert);\n        this.identifyProvider.configure(config.identify);\n        this.interpretProvider.configure(config.interpret);\n        return config;\n    };\n    AmazonAIPredictionsProvider.prototype.interpret = function (input) {\n        return this.interpretProvider.interpret(input);\n    };\n    AmazonAIPredictionsProvider.prototype.convert = function (input) {\n        return this.convertProvider.convert(input);\n    };\n    AmazonAIPredictionsProvider.prototype.identify = function (input) {\n        return this.identifyProvider.identify(input);\n    };\n    return AmazonAIPredictionsProvider;\n}(AbstractPredictionsProvider));\nexport default AmazonAIPredictionsProvider;\n//# sourceMappingURL=AmazonAIPredictionsProvider.js.map","function n(n){for(var t=arguments.length,r=Array(t>1?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];if(\"production\"!==process.env.NODE_ENV){var i=Q[n],o=i?\"function\"==typeof i?i.apply(null,r):i:\"unknown error nr: \"+n;throw Error(\"[Immer] \"+o)}throw Error(\"[Immer] minified error nr: \"+n+(r.length?\" \"+r.join(\",\"):\"\")+\". Find the full error at: https://bit.ly/38PiBHb\")}function t(n){return!!n&&!!n[G]}function r(n){return!!n&&(function(n){if(!n||\"object\"!=typeof n)return!1;var t=Object.getPrototypeOf(n);return!t||t===Object.prototype}(n)||Array.isArray(n)||!!n[q]||!!n.constructor[q]||c(n)||s(n))}function e(n){if(n&&n[G])return n[G].t}function i(n,t){0===o(n)?V(n).forEach((function(r){return t(r,n[r],n)})):n.forEach((function(r,e){return t(e,r,n)}))}function o(n){var t=n[G];return t?t.i>3?t.i-4:t.i:Array.isArray(n)?1:c(n)?2:s(n)?3:0}function u(n,t){return 2===o(n)?n.has(t):Object.prototype.hasOwnProperty.call(n,t)}function a(n,t){return 2===o(n)?n.get(t):n[t]}function f(n,t){return n===t?0!==n||1/n==1/t:n!=n&&t!=t}function c(n){return B&&n instanceof Map}function s(n){return H&&n instanceof Set}function v(n){return n.o||n.t}function p(t,r){if(void 0===r&&(r=!1),Array.isArray(t))return t.slice();var e=Object.create(Object.getPrototypeOf(t));return i(t,(function(i){if(i!==G){var o=Object.getOwnPropertyDescriptor(t,i),u=o.value;o.get&&(r||n(1),u=o.get.call(t)),o.enumerable?e[i]=u:Object.defineProperty(e,i,{value:u,writable:!0,configurable:!0})}})),e}function d(n,e){t(n)||Object.isFrozen(n)||!r(n)||(o(n)>1&&(n.set=n.add=n.clear=n.delete=l),Object.freeze(n),e&&i(n,(function(n,t){return d(t,!0)})))}function l(){n(2)}function h(t){var r=W[t];return r||n(\"production\"!==process.env.NODE_ENV?18:19,t),r}function y(n,t){W[n]=t}function b(){return\"production\"===process.env.NODE_ENV||J||n(0),J}function m(n,t){t&&(h(\"Patches\"),n.u=[],n.s=[],n.v=t)}function _(n){j(n),n.p.forEach(g),n.p=null}function j(n){n===J&&(J=n.l)}function O(n){return J={p:[],l:J,h:n,m:!0,_:0}}function g(n){var t=n[G];0===t.i||1===t.i?t.j():t.O=!0}function w(t,e){e._=e.p.length;var i=e.p[0],o=void 0!==t&&t!==i;return e.h.g||h(\"ES5\").P(e,t,o),o?(i[G].S&&(_(e),n(4)),r(t)&&(t=P(e,t),e.l||M(e,t)),e.u&&h(\"Patches\").M(i[G],t,e.u,e.s)):t=P(e,i,[]),_(e),e.u&&e.v(e.u,e.s),t!==U?t:void 0}function P(n,t,r){if(Object.isFrozen(t))return t;var e=t[G];if(!e)return i(t,(function(i,o){return S(n,e,t,i,o,r)})),t;if(e.A!==n)return t;if(!e.S)return M(n,e.t,!0),e.t;if(!e.I){e.I=!0,e.A._--;var o=4===e.i||5===e.i?e.o=p(e.k,!0):e.o;i(o,(function(t,i){return S(n,e,o,t,i,r)})),M(n,o,!1),r&&n.u&&h(\"Patches\").R(e,r,n.u,n.s)}return e.o}function S(e,i,c,s,v,p){if(\"production\"!==process.env.NODE_ENV&&v===c&&n(5),t(v)){var d=P(e,v,p&&i&&3!==i.i&&!u(i.D,s)?p.concat(s):void 0);if(h=s,y=d,2===(b=o(l=c))?l.set(h,y):3===b?(l.delete(h),l.add(y)):l[h]=y,!t(d))return;e.m=!1}var l,h,y,b;if((!i||!f(v,a(i.t,s)))&&r(v)){if(!e.h.N&&e._<1)return;P(e,v),i&&i.A.l||M(e,v)}}function M(n,t,r){void 0===r&&(r=!1),n.h.N&&n.m&&d(t,r)}function A(n,t){var r=n[G],e=Reflect.getOwnPropertyDescriptor(r?v(r):n,t);return e&&e.value}function z(n){if(!n.S){if(n.S=!0,0===n.i||1===n.i){var t=n.o=p(n.t);i(n.p,(function(n,r){t[n]=r})),n.p=void 0}n.l&&z(n.l)}}function x(n){n.o||(n.o=p(n.t))}function I(n,t,r){var e=c(t)?h(\"MapSet\").T(t,r):s(t)?h(\"MapSet\").F(t,r):n.g?function(n,t){var r=Array.isArray(n),e={i:r?1:0,A:t?t.A:b(),S:!1,I:!1,D:{},l:t,t:n,k:null,p:{},o:null,j:null,C:!1},i=e,o=X;r&&(i=[e],o=Y);var u=Proxy.revocable(i,o),a=u.revoke,f=u.proxy;return e.k=f,e.j=a,f}(t,r):h(\"ES5\").J(t,r);return(r?r.A:b()).p.push(e),e}function E(n,t){n.g?z(t):h(\"ES5\").$(t)}function k(){function e(n,t){var r=n[G];if(r&&!r.B){r.B=!0;var e=n[t];return r.B=!1,e}return n[t]}function o(n){n.S||(n.S=!0,n.l&&o(n.l))}function a(n){n.o||(n.o=c(n.t))}function c(n){var t=n&&n[G];if(t){t.B=!0;var r=p(t.k,!0);return t.B=!1,r}return p(n)}function s(n){for(var t=n.length-1;t>=0;t--){var r=n[t][G];if(!r.S)switch(r.i){case 5:l(r)&&o(r);break;case 4:d(r)&&o(r)}}}function d(n){for(var t=n.t,r=n.k,e=Object.keys(r),i=e.length-1;i>=0;i--){var o=e[i],a=t[o];if(void 0===a&&!u(t,o))return!0;var c=r[o],s=c&&c[G];if(s?s.t!==a:!f(c,a))return!0}return e.length!==Object.keys(t).length}function l(n){var t=n.k;if(t.length!==n.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!r||r.get)}function h(t){t.O&&n(3,JSON.stringify(v(t)))}var m={};y(\"ES5\",{J:function(n,t){var u=Array.isArray(n),s=c(n);i(s,(function(t){!function(n,t,i){var u=m[t];u?u.enumerable=i:m[t]=u={enumerable:i,get:function(){return function(n,t){h(n);var i=e(v(n),t);return n.B?i:i===e(n.t,t)&&r(i)?(a(n),n.o[t]=I(n.A.h,i,n)):i}(this[G],t)},set:function(n){!function(n,t,r){if(h(n),n.D[t]=!0,!n.S){if(f(r,e(v(n),t)))return;o(n),a(n)}n.o[t]=r}(this[G],t,n)}},Object.defineProperty(n,t,u)}(s,t,u||function(n,t){var r=Object.getOwnPropertyDescriptor(n,t);return!(!r||!r.enumerable)}(n,t))}));var p={i:u?5:4,A:t?t.A:b(),S:!1,B:!1,I:!1,D:{},l:t,t:n,k:s,o:null,O:!1,C:!1};return Object.defineProperty(s,G,{value:p,writable:!0}),s},$:o,P:function(n,r,e){n.p.forEach((function(n){n[G].B=!0})),e?t(r)&&r[G].A===n&&s(n.p):(n.u&&function n(t){if(t&&\"object\"==typeof t){var r=t[G];if(r){var e=r.t,a=r.k,f=r.D,c=r.i;if(4===c)i(a,(function(t){t!==G&&(void 0!==e[t]||u(e,t)?f[t]||n(a[t]):(f[t]=!0,o(r)))})),i(e,(function(n){void 0!==a[n]||u(a,n)||(f[n]=!1,o(r))}));else if(5===c){if(l(r)&&(o(r),f.length=!0),a.length<e.length)for(var s=a.length;s<e.length;s++)f[s]=!1;else for(var v=e.length;v<a.length;v++)f[v]=!0;for(var p=Math.min(a.length,e.length),d=0;d<p;d++)void 0===f[d]&&n(a[d])}}}}(n.p[0]),s(n.p))}})}function R(){function t(n){if(!n||\"object\"!=typeof n)return n;if(Array.isArray(n))return n.map(t);if(c(n))return new Map(Array.from(n.entries()).map((function(n){return[n[0],t(n[1])]})));if(s(n))return new Set(Array.from(n).map(t));var r=Object.create(Object.getPrototypeOf(n));for(var e in n)r[e]=t(n[e]);return r}var r=\"add\";y(\"Patches\",{H:function(e,i){return i.forEach((function(i){for(var u=i.path,f=i.op,c=e,s=0;s<u.length-1;s++)\"object\"!=typeof(c=a(c,u[s]))&&n(15,u.join(\"/\"));var v=o(c),p=t(i.value),d=u[u.length-1];switch(f){case\"replace\":switch(v){case 2:return c.set(d,p);case 3:n(16);default:return c[d]=p}case r:switch(v){case 1:return c.splice(d,0,p);case 2:return c.set(d,p);case 3:return c.add(p);default:return c[d]=p}case\"remove\":switch(v){case 1:return c.splice(d,1);case 2:return c.delete(d);case 3:return c.delete(i.value);default:return delete c[d]}default:n(17,f)}})),e},R:function(n,t,e,o){switch(n.i){case 0:case 4:case 2:return function(n,t,e,o){var f=n.t,c=n.o;i(n.D,(function(n,i){var s=a(f,n),v=a(c,n),p=i?u(f,n)?\"replace\":r:\"remove\";if(s!==v||\"replace\"!==p){var d=t.concat(n);e.push(\"remove\"===p?{op:p,path:d}:{op:p,path:d,value:v}),o.push(p===r?{op:\"remove\",path:d}:\"remove\"===p?{op:r,path:d,value:s}:{op:\"replace\",path:d,value:s})}}))}(n,t,e,o);case 5:case 1:return function(n,t,e,i){var o=n.t,u=n.D,a=n.o;if(a.length<o.length){var f=[a,o];o=f[0],a=f[1];var c=[i,e];e=c[0],i=c[1]}for(var s=a.length-o.length,v=0;o[v]===a[v]&&v<o.length;)++v;for(var p=o.length;p>v&&o[p-1]===a[p+s-1];)--p;for(var d=v;d<p;++d)if(u[d]&&a[d]!==o[d]){var l=t.concat([d]);e.push({op:\"replace\",path:l,value:a[d]}),i.push({op:\"replace\",path:l,value:o[d]})}for(var h=e.length,y=p+s-1;y>=p;--y){var b=t.concat([y]);e[h+y-p]={op:r,path:b,value:a[y]},i.push({op:\"remove\",path:b})}}(n,t,e,o);case 3:return function(n,t,e,i){var o=n.t,u=n.o,a=0;o.forEach((function(n){if(!u.has(n)){var o=t.concat([a]);e.push({op:\"remove\",path:o,value:n}),i.unshift({op:r,path:o,value:n})}a++})),a=0,u.forEach((function(n){if(!o.has(n)){var u=t.concat([a]);e.push({op:r,path:u,value:n}),i.unshift({op:\"remove\",path:u,value:n})}a++}))}(n,t,e,o)}},M:function(n,t,r,e){r.push({op:\"replace\",path:[],value:t}),e.push({op:\"replace\",path:[],value:n.t})}})}function D(){function t(n,t){function r(){this.constructor=n}u(n,t),n.prototype=(r.prototype=t.prototype,new r)}function e(n){n.o||(n.D=new Map,n.o=new Map(n.t))}function i(n){n.o||(n.o=new Set,n.t.forEach((function(t){if(r(t)){var e=I(n.A.h,t,n);n.p.set(t,e),n.o.add(e)}else n.o.add(t)})))}function o(t){t.O&&n(3,JSON.stringify(v(t)))}var u=function(n,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])})(n,t)},a=function(){function n(n,t){return this[G]={i:2,l:t,A:t?t.A:b(),S:!1,I:!1,o:void 0,D:void 0,t:n,k:this,C:!1,O:!1},this}t(n,Map);var i=n.prototype;return Object.defineProperty(i,\"size\",{get:function(){return v(this[G]).size}}),i.has=function(n){return v(this[G]).has(n)},i.set=function(n,t){var r=this[G];return o(r),v(r).get(n)!==t&&(e(r),E(r.A.h,r),r.D.set(n,!0),r.o.set(n,t),r.D.set(n,!0)),this},i.delete=function(n){if(!this.has(n))return!1;var t=this[G];return o(t),e(t),E(t.A.h,t),t.D.set(n,!1),t.o.delete(n),!0},i.clear=function(){var n=this[G];return o(n),e(n),E(n.A.h,n),n.D=new Map,n.o.clear()},i.forEach=function(n,t){var r=this;v(this[G]).forEach((function(e,i){n.call(t,r.get(i),i,r)}))},i.get=function(n){var t=this[G];o(t);var i=v(t).get(n);if(t.I||!r(i))return i;if(i!==t.t.get(n))return i;var u=I(t.A.h,i,t);return e(t),t.o.set(n,u),u},i.keys=function(){return v(this[G]).keys()},i.values=function(){var n,t=this,r=this.keys();return(n={})[L]=function(){return t.values()},n.next=function(){var n=r.next();return n.done?n:{done:!1,value:t.get(n.value)}},n},i.entries=function(){var n,t=this,r=this.keys();return(n={})[L]=function(){return t.entries()},n.next=function(){var n=r.next();if(n.done)return n;var e=t.get(n.value);return{done:!1,value:[n.value,e]}},n},i[L]=function(){return this.entries()},n}(),f=function(){function n(n,t){return this[G]={i:3,l:t,A:t?t.A:b(),S:!1,I:!1,o:void 0,t:n,k:this,p:new Map,O:!1,C:!1},this}t(n,Set);var r=n.prototype;return Object.defineProperty(r,\"size\",{get:function(){return v(this[G]).size}}),r.has=function(n){var t=this[G];return o(t),t.o?!!t.o.has(n)||!(!t.p.has(n)||!t.o.has(t.p.get(n))):t.t.has(n)},r.add=function(n){var t=this[G];return o(t),t.o?t.o.add(n):t.t.has(n)||(i(t),E(t.A.h,t),t.o.add(n)),this},r.delete=function(n){if(!this.has(n))return!1;var t=this[G];return o(t),i(t),E(t.A.h,t),t.o.delete(n)||!!t.p.has(n)&&t.o.delete(t.p.get(n))},r.clear=function(){var n=this[G];return o(n),i(n),E(n.A.h,n),n.o.clear()},r.values=function(){var n=this[G];return o(n),i(n),n.o.values()},r.entries=function(){var n=this[G];return o(n),i(n),n.o.entries()},r.keys=function(){return this.values()},r[L]=function(){return this.values()},r.forEach=function(n,t){for(var r=this.values(),e=r.next();!e.done;)n.call(t,e.value,e.value,this),e=r.next()},n}();y(\"MapSet\",{T:function(n,t){return new a(n,t)},F:function(n,t){return new f(n,t)}})}function N(){k(),D(),R()}function T(n){return n}function F(n){return n}var C,J,$=\"undefined\"!=typeof Symbol,B=\"undefined\"!=typeof Map,H=\"undefined\"!=typeof Set,K=\"undefined\"!=typeof Proxy&&void 0!==Proxy.revocable&&\"undefined\"!=typeof Reflect,U=$?Symbol(\"immer-nothing\"):((C={})[\"immer-nothing\"]=!0,C),q=$?Symbol(\"immer-draftable\"):\"__$immer_draftable\",G=$?Symbol(\"immer-state\"):\"__$immer_state\",L=$?Symbol.iterator:\"@@iterator\",Q={0:\"Illegal state\",1:\"Immer drafts cannot have computed properties\",2:\"This object has been frozen and should not be mutated\",3:function(n){return\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \"+n},4:\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",5:\"Immer forbids circular references\",6:\"The first or second argument to `produce` must be a function\",7:\"The third argument to `produce` must be a function or undefined\",8:\"First argument to `createDraft` must be a plain object, an array, or an immerable object\",9:\"First argument to `finishDraft` must be a draft returned by `createDraft`\",10:\"The given draft is already finalized\",11:\"Object.defineProperty() cannot be used on an Immer draft\",12:\"Object.setPrototypeOf() cannot be used on an Immer draft\",13:\"Immer only supports deleting array indices\",14:\"Immer only supports setting array indices and the 'length' property\",15:function(n){return\"Cannot apply patch, path doesn't resolve: \"+n},16:'Sets cannot have \"replace\" patches.',17:function(n){return\"Unsupported patch operation: \"+n},18:function(n){return\"The plugin for '\"+n+\"' has not been loaded into Immer. To enable the plugin, import and call `enable\"+n+\"()` when initializing your application.\"},19:\"plugin not loaded\",20:\"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\"},V=\"undefined\"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,W={},X={get:function(n,t){if(t===G)return n;var e=n.p;if(!n.S&&u(e,t))return e[t];var i=v(n)[t];if(n.I||!r(i))return i;if(n.S){if(i!==A(n.t,t))return i;e=n.o}return e[t]=I(n.A.h,i,n)},has:function(n,t){return t in v(n)},ownKeys:function(n){return Reflect.ownKeys(v(n))},set:function(n,t,r){if(!n.S){var e=A(n.t,t);if(r?f(e,r)||r===n.p[t]:f(e,r)&&t in n.t)return!0;x(n),z(n)}return n.D[t]=!0,n.o[t]=r,!0},deleteProperty:function(n,t){return void 0!==A(n.t,t)||t in n.t?(n.D[t]=!1,x(n),z(n)):n.D[t]&&delete n.D[t],n.o&&delete n.o[t],!0},getOwnPropertyDescriptor:function(n,t){var r=v(n),e=Reflect.getOwnPropertyDescriptor(r,t);return e&&(e.writable=!0,e.configurable=1!==n.i||\"length\"!==t),e},defineProperty:function(){n(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){n(12)}},Y={};i(X,(function(n,t){Y[n]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Y.deleteProperty=function(t,r){return\"production\"!==process.env.NODE_ENV&&isNaN(parseInt(r))&&n(13),X.deleteProperty.call(this,t[0],r)},Y.set=function(t,r,e){return\"production\"!==process.env.NODE_ENV&&\"length\"!==r&&isNaN(parseInt(r))&&n(14),X.set.call(this,t[0],r,e,t[0])};var Z=function(){function e(n){this.g=K,this.N=\"production\"!==process.env.NODE_ENV,\"boolean\"==typeof(null==n?void 0:n.useProxies)&&this.setUseProxies(n.useProxies),\"boolean\"==typeof(null==n?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var i=e.prototype;return i.produce=function(t,e,i){if(\"function\"==typeof t&&\"function\"!=typeof e){var o=e;e=t;var u=this;return function(n){var t=this;void 0===n&&(n=o);for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return u.produce(n,(function(n){var r;return(r=e).call.apply(r,[t,n].concat(i))}))}}var a;if(\"function\"!=typeof e&&n(6),void 0!==i&&\"function\"!=typeof i&&n(7),r(t)){var f=O(this),c=I(this,t,void 0),s=!0;try{a=e(c),s=!1}finally{s?_(f):j(f)}return\"undefined\"!=typeof Promise&&a instanceof Promise?a.then((function(n){return m(f,i),w(n,f)}),(function(n){throw _(f),n})):(m(f,i),w(a,f))}if((a=e(t))!==U)return void 0===a&&(a=t),this.N&&d(a,!0),a},i.produceWithPatches=function(n,t){var r,e,i=this;return\"function\"==typeof n?function(t){for(var r=arguments.length,e=Array(r>1?r-1:0),o=1;o<r;o++)e[o-1]=arguments[o];return i.produceWithPatches(t,(function(t){return n.apply(void 0,[t].concat(e))}))}:[this.produce(n,t,(function(n,t){r=n,e=t})),r,e]},i.createDraft=function(t){r(t)||n(8);var e=O(this),i=I(this,t,void 0);return i[G].C=!0,j(e),i},i.finishDraft=function(t,r){var e=t&&t[G];\"production\"!==process.env.NODE_ENV&&(e&&e.C||n(9),e.I&&n(10));var i=e.A;return m(i,r),w(void 0,i)},i.setAutoFreeze=function(n){this.N=n},i.setUseProxies=function(t){K||n(20),this.g=t},i.applyPatches=function(n,r){var e;for(e=r.length-1;e>=0;e--){var i=r[e];if(0===i.path.length&&\"replace\"===i.op){n=i.value;break}}var o=h(\"Patches\").H;return t(n)?o(n,r):this.produce(n,(function(n){return o(n,r.slice(e+1))}))},e}(),nn=new Z,tn=nn.produce,rn=nn.produceWithPatches.bind(nn),en=nn.setAutoFreeze.bind(nn),on=nn.setUseProxies.bind(nn),un=nn.applyPatches.bind(nn),an=nn.createDraft.bind(nn),fn=nn.finishDraft.bind(nn);export default tn;export{Z as Immer,un as applyPatches,T as castDraft,F as castImmutable,an as createDraft,N as enableAllPlugins,k as enableES5,D as enableMapSet,R as enablePatches,fn as finishDraft,q as immerable,t as isDraft,r as isDraftable,U as nothing,e as original,tn as produce,rn as produceWithPatches,en as setAutoFreeze,on as setUseProxies};\n//# sourceMappingURL=immer.esm.js.map\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Mutex } from '@aws-amplify/core';\nimport * as PushStream from 'zen-push';\nimport { ModelPredicateCreator } from '../predicates';\nimport { OpType, QueryOne, } from '../types';\nimport { isModelConstructor, STORAGE, validatePredicate } from '../util';\nimport getDefaultAdapter from './adapter/getDefaultAdapter';\nvar Storage = /** @class */ (function () {\n    function Storage(schema, namespaceResolver, getModelConstructorByModelName, modelInstanceCreator, adapter) {\n        this.schema = schema;\n        this.namespaceResolver = namespaceResolver;\n        this.getModelConstructorByModelName = getModelConstructorByModelName;\n        this.modelInstanceCreator = modelInstanceCreator;\n        this.adapter = adapter;\n        this.adapter = getDefaultAdapter();\n        this.pushStream = new PushStream();\n    }\n    Storage.getNamespace = function () {\n        var namespace = {\n            name: STORAGE,\n            relationships: {},\n            enums: {},\n            models: {},\n            nonModels: {},\n        };\n        return namespace;\n    };\n    Storage.prototype.init = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var resolve, reject;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.initialized !== undefined) {\n                            return [2 /*return*/];\n                        }\n                        this.initialized = new Promise(function (res, rej) {\n                            resolve = res;\n                            reject = rej;\n                        });\n                        this.adapter\n                            .setUp(this.schema, this.namespaceResolver, this.modelInstanceCreator, this.getModelConstructorByModelName)\n                            .then(resolve, reject);\n                        return [4 /*yield*/, this.initialized];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Storage.prototype.save = function (model, condition, mutator) {\n        return __awaiter(this, void 0, void 0, function () {\n            var result;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.init()];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, this.adapter.save(model, condition)];\n                    case 2:\n                        result = _a.sent();\n                        result.forEach(function (r) {\n                            var element = r[0], opType = r[1];\n                            var modelConstructor = Object.getPrototypeOf(element)\n                                .constructor;\n                            _this.pushStream.next({\n                                model: modelConstructor,\n                                opType: opType,\n                                element: element,\n                                mutator: mutator,\n                                condition: ModelPredicateCreator.getPredicates(condition, false),\n                            });\n                        });\n                        return [2 /*return*/, result];\n                }\n            });\n        });\n    };\n    Storage.prototype.delete = function (modelOrModelConstructor, condition, mutator) {\n        return __awaiter(this, void 0, void 0, function () {\n            var deleted, models, modelIds;\n            var _a;\n            var _this = this;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.init()];\n                    case 1:\n                        _b.sent();\n                        return [4 /*yield*/, this.adapter.delete(modelOrModelConstructor, condition)];\n                    case 2:\n                        _a = _b.sent(), models = _a[0], deleted = _a[1];\n                        modelIds = new Set(models.map(function (_a) {\n                            var id = _a.id;\n                            return id;\n                        }));\n                        if (!isModelConstructor(modelOrModelConstructor) &&\n                            !Array.isArray(deleted)) {\n                            deleted = [deleted];\n                        }\n                        deleted.forEach(function (model) {\n                            var modelConstructor = Object.getPrototypeOf(model)\n                                .constructor;\n                            var theCondition;\n                            if (!isModelConstructor(modelOrModelConstructor)) {\n                                theCondition = modelIds.has(model.id)\n                                    ? ModelPredicateCreator.getPredicates(condition, false)\n                                    : undefined;\n                            }\n                            _this.pushStream.next({\n                                model: modelConstructor,\n                                opType: OpType.DELETE,\n                                element: model,\n                                mutator: mutator,\n                                condition: theCondition,\n                            });\n                        });\n                        return [2 /*return*/, [models, deleted]];\n                }\n            });\n        });\n    };\n    Storage.prototype.query = function (modelConstructor, predicate, pagination) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.init()];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, this.adapter.query(modelConstructor, predicate, pagination)];\n                    case 2: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    Storage.prototype.queryOne = function (modelConstructor, firstOrLast) {\n        if (firstOrLast === void 0) { firstOrLast = QueryOne.FIRST; }\n        return __awaiter(this, void 0, void 0, function () {\n            var record;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.init()];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, this.adapter.queryOne(modelConstructor, firstOrLast)];\n                    case 2:\n                        record = _a.sent();\n                        return [2 /*return*/, record];\n                }\n            });\n        });\n    };\n    Storage.prototype.observe = function (modelConstructor, predicate, skipOwn) {\n        var _a;\n        var listenToAll = !modelConstructor;\n        var hasPredicate = !!predicate;\n        var result = this.pushStream.observable\n            .filter(function (_a) {\n            var mutator = _a.mutator;\n            return !skipOwn || mutator !== skipOwn;\n        })\n            .map(function (_a) {\n            var _mutator = _a.mutator, message = __rest(_a, [\"mutator\"]);\n            return message;\n        });\n        if (!listenToAll) {\n            var predicates_1, type_1;\n            if (hasPredicate) {\n                (_a = ModelPredicateCreator.getPredicates(predicate), predicates_1 = _a.predicates, type_1 = _a.type);\n            }\n            result = result.filter(function (_a) {\n                var model = _a.model, element = _a.element;\n                if (modelConstructor !== model) {\n                    return false;\n                }\n                if (hasPredicate) {\n                    return validatePredicate(element, type_1, predicates_1);\n                }\n                return true;\n            });\n        }\n        return result;\n    };\n    Storage.prototype.clear = function (completeObservable) {\n        if (completeObservable === void 0) { completeObservable = true; }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.initialized = undefined;\n                        return [4 /*yield*/, this.adapter.clear()];\n                    case 1:\n                        _a.sent();\n                        if (completeObservable) {\n                            this.pushStream.complete();\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return Storage;\n}());\nvar ExclusiveStorage = /** @class */ (function () {\n    function ExclusiveStorage(schema, namespaceResolver, getModelConstructorByModelName, modelInstanceCreator, adapter) {\n        this.mutex = new Mutex();\n        this.storage = new Storage(schema, namespaceResolver, getModelConstructorByModelName, modelInstanceCreator, adapter);\n    }\n    ExclusiveStorage.prototype.runExclusive = function (fn) {\n        return this.mutex.runExclusive(fn.bind(this, this.storage));\n    };\n    ExclusiveStorage.prototype.save = function (model, condition, mutator) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.runExclusive(function (storage) {\n                        return storage.save(model, condition, mutator);\n                    })];\n            });\n        });\n    };\n    ExclusiveStorage.prototype.delete = function (modelOrModelConstructor, condition, mutator) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.runExclusive(function (storage) {\n                        if (isModelConstructor(modelOrModelConstructor)) {\n                            var modelConstructor = modelOrModelConstructor;\n                            return storage.delete(modelConstructor, condition, mutator);\n                        }\n                        else {\n                            var model = modelOrModelConstructor;\n                            return storage.delete(model, condition, mutator);\n                        }\n                    })];\n            });\n        });\n    };\n    ExclusiveStorage.prototype.query = function (modelConstructor, predicate, pagination) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.runExclusive(function (storage) {\n                        return storage.query(modelConstructor, predicate, pagination);\n                    })];\n            });\n        });\n    };\n    ExclusiveStorage.prototype.queryOne = function (modelConstructor, firstOrLast) {\n        if (firstOrLast === void 0) { firstOrLast = QueryOne.FIRST; }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.runExclusive(function (storage) {\n                        return storage.queryOne(modelConstructor, firstOrLast);\n                    })];\n            });\n        });\n    };\n    ExclusiveStorage.getNamespace = function () {\n        return Storage.getNamespace();\n    };\n    ExclusiveStorage.prototype.observe = function (modelConstructor, predicate, skipOwn) {\n        return this.storage.observe(modelConstructor, predicate, skipOwn);\n    };\n    ExclusiveStorage.prototype.clear = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.storage.clear()];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return ExclusiveStorage;\n}());\nexport default ExclusiveStorage;\n//# sourceMappingURL=storage.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as Observable from 'zen-observable';\nimport { ConsoleLogger as Logger, Reachability } from '@aws-amplify/core';\nvar logger = new Logger('DataStore');\nvar RECONNECTING_IN = 5000; // 5s this may be configurable in the future\nvar DataStoreConnectivity = /** @class */ (function () {\n    function DataStoreConnectivity() {\n        this.connectionStatus = {\n            online: false,\n        };\n    }\n    DataStoreConnectivity.prototype.status = function () {\n        var _this = this;\n        if (this.observer) {\n            throw new Error('Subscriber already exists');\n        }\n        return new Observable(function (observer) {\n            _this.observer = observer;\n            // Will be used to forward socket connection changes, enhancing Reachability\n            var subs = new Reachability()\n                .networkMonitor()\n                .subscribe(function (_a) {\n                var online = _a.online;\n                _this.connectionStatus.online = online;\n                var observerResult = __assign({}, _this.connectionStatus); // copyOf status\n                observer.next(observerResult);\n            });\n            return function () {\n                subs.unsubscribe();\n            };\n        });\n    };\n    DataStoreConnectivity.prototype.socketDisconnected = function () {\n        var _this = this;\n        if (this.observer && typeof this.observer.next === 'function') {\n            this.observer.next({ online: false }); // Notify network issue from the socket\n            setTimeout(function () {\n                var observerResult = __assign({}, _this.connectionStatus); // copyOf status\n                _this.observer.next(observerResult);\n            }, RECONNECTING_IN); // giving time for socket cleanup and network status stabilization\n        }\n    };\n    return DataStoreConnectivity;\n}());\nexport default DataStoreConnectivity;\n//# sourceMappingURL=datastoreConnectivity.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar ModelMerger = /** @class */ (function () {\n    function ModelMerger(outbox, ownSymbol) {\n        this.outbox = outbox;\n        this.ownSymbol = ownSymbol;\n    }\n    ModelMerger.prototype.merge = function (exclusiveStorage, model) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                exclusiveStorage.runExclusive(function (storage) { return __awaiter(_this, void 0, void 0, function () {\n                    var mutationsForModel, isDelete;\n                    return __generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0: return [4 /*yield*/, this.outbox.getForModel(storage, model)];\n                            case 1:\n                                mutationsForModel = _a.sent();\n                                isDelete = model._deleted;\n                                if (!(mutationsForModel.length === 0)) return [3 /*break*/, 5];\n                                if (!isDelete) return [3 /*break*/, 3];\n                                return [4 /*yield*/, storage.delete(model, undefined, this.ownSymbol)];\n                            case 2:\n                                _a.sent();\n                                return [3 /*break*/, 5];\n                            case 3: return [4 /*yield*/, storage.save(model, undefined, this.ownSymbol)];\n                            case 4:\n                                _a.sent();\n                                _a.label = 5;\n                            case 5: return [2 /*return*/];\n                        }\n                    });\n                }); });\n                return [2 /*return*/];\n            });\n        });\n    };\n    return ModelMerger;\n}());\nexport { ModelMerger };\n//# sourceMappingURL=merger.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { ModelPredicateCreator } from '../predicates';\nimport { QueryOne, } from '../types';\nimport { SYNC } from '../util';\nimport { TransformerMutationType } from './utils';\n// TODO: Persist deleted ids\nvar MutationEventOutbox = /** @class */ (function () {\n    function MutationEventOutbox(schema, namespaceResolver, MutationEvent, ownSymbol) {\n        this.schema = schema;\n        this.namespaceResolver = namespaceResolver;\n        this.MutationEvent = MutationEvent;\n        this.ownSymbol = ownSymbol;\n    }\n    MutationEventOutbox.prototype.enqueue = function (storage, mutationEvent) {\n        return __awaiter(this, void 0, void 0, function () {\n            var mutationEventModelDefinition, predicate, first, incomingMutationType, incomingConditionJSON, incomingCondition;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        mutationEventModelDefinition = this.schema.namespaces[SYNC].models['MutationEvent'];\n                        predicate = ModelPredicateCreator.createFromExisting(mutationEventModelDefinition, function (c) {\n                            return c\n                                .modelId('eq', mutationEvent.modelId)\n                                .id('ne', _this.inProgressMutationEventId);\n                        });\n                        return [4 /*yield*/, storage.query(this.MutationEvent, predicate)];\n                    case 1:\n                        first = (_a.sent())[0];\n                        if (!(first === undefined)) return [3 /*break*/, 3];\n                        return [4 /*yield*/, storage.save(mutationEvent, undefined, this.ownSymbol)];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/];\n                    case 3:\n                        incomingMutationType = mutationEvent.operation;\n                        if (!(first.operation === TransformerMutationType.CREATE)) return [3 /*break*/, 8];\n                        if (!(incomingMutationType === TransformerMutationType.DELETE)) return [3 /*break*/, 5];\n                        // delete all for model\n                        return [4 /*yield*/, storage.delete(this.MutationEvent, predicate)];\n                    case 4:\n                        // delete all for model\n                        _a.sent();\n                        return [3 /*break*/, 7];\n                    case 5: \n                    // first gets updated with incoming's data, condition intentionally skiped\n                    return [4 /*yield*/, storage.save(this.MutationEvent.copyOf(first, function (draft) {\n                            draft.data = mutationEvent.data;\n                        }), undefined, this.ownSymbol)];\n                    case 6:\n                        // first gets updated with incoming's data, condition intentionally skiped\n                        _a.sent();\n                        _a.label = 7;\n                    case 7: return [3 /*break*/, 12];\n                    case 8:\n                        incomingConditionJSON = mutationEvent.condition;\n                        incomingCondition = JSON.parse(incomingConditionJSON);\n                        if (!(Object.keys(incomingCondition).length === 0)) return [3 /*break*/, 10];\n                        // delete all for model\n                        return [4 /*yield*/, storage.delete(this.MutationEvent, predicate)];\n                    case 9:\n                        // delete all for model\n                        _a.sent();\n                        _a.label = 10;\n                    case 10: \n                    // Enqueue new one\n                    return [4 /*yield*/, storage.save(mutationEvent, undefined, this.ownSymbol)];\n                    case 11:\n                        // Enqueue new one\n                        _a.sent();\n                        _a.label = 12;\n                    case 12: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    MutationEventOutbox.prototype.dequeue = function (storage) {\n        return __awaiter(this, void 0, void 0, function () {\n            var head;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.peek(storage)];\n                    case 1:\n                        head = _a.sent();\n                        return [4 /*yield*/, storage.delete(head)];\n                    case 2:\n                        _a.sent();\n                        this.inProgressMutationEventId = undefined;\n                        return [2 /*return*/, head];\n                }\n            });\n        });\n    };\n    /**\n     * Doing a peek() implies that the mutation goes \"inProgress\"\n     *\n     * @param storage\n     */\n    MutationEventOutbox.prototype.peek = function (storage) {\n        return __awaiter(this, void 0, void 0, function () {\n            var head;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, storage.queryOne(this.MutationEvent, QueryOne.FIRST)];\n                    case 1:\n                        head = _a.sent();\n                        this.inProgressMutationEventId = head ? head.id : undefined;\n                        return [2 /*return*/, head];\n                }\n            });\n        });\n    };\n    MutationEventOutbox.prototype.getForModel = function (storage, model) {\n        return __awaiter(this, void 0, void 0, function () {\n            var mutationEventModelDefinition, mutationEvents;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        mutationEventModelDefinition = this.schema.namespaces[SYNC].models\n                            .MutationEvent;\n                        return [4 /*yield*/, storage.query(this.MutationEvent, ModelPredicateCreator.createFromExisting(mutationEventModelDefinition, function (c) { return c.modelId('eq', model.id); }))];\n                    case 1:\n                        mutationEvents = _a.sent();\n                        return [2 /*return*/, mutationEvents];\n                }\n            });\n        });\n    };\n    return MutationEventOutbox;\n}());\nexport { MutationEventOutbox };\n//# sourceMappingURL=outbox.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport API from '@aws-amplify/api';\nimport { ConsoleLogger as Logger, jitteredExponentialRetry, NonRetryableError, } from '@aws-amplify/core';\nimport Observable from 'zen-observable-ts';\nimport { DISCARD, isModelFieldType, isTargetNameAssociation, OpType, } from '../../types';\nimport { exhaustiveCheck, USER } from '../../util';\nimport { buildGraphQLOperation, createMutationInstanceFromModelOperation, TransformerMutationType, } from '../utils';\nvar MAX_ATTEMPTS = 10;\nvar logger = new Logger('DataStore');\nvar MutationProcessor = /** @class */ (function () {\n    function MutationProcessor(schema, storage, userClasses, outbox, modelInstanceCreator, MutationEvent, conflictHandler, errorHandler) {\n        this.schema = schema;\n        this.storage = storage;\n        this.userClasses = userClasses;\n        this.outbox = outbox;\n        this.modelInstanceCreator = modelInstanceCreator;\n        this.MutationEvent = MutationEvent;\n        this.conflictHandler = conflictHandler;\n        this.errorHandler = errorHandler;\n        this.typeQuery = new WeakMap();\n        this.processing = false;\n        this.generateQueries();\n    }\n    MutationProcessor.prototype.generateQueries = function () {\n        var _this = this;\n        Object.values(this.schema.namespaces).forEach(function (namespace) {\n            Object.values(namespace.models)\n                .filter(function (_a) {\n                var syncable = _a.syncable;\n                return syncable;\n            })\n                .forEach(function (model) {\n                var createMutation = buildGraphQLOperation(namespace, model, 'CREATE')[0];\n                var updateMutation = buildGraphQLOperation(namespace, model, 'UPDATE')[0];\n                var deleteMutation = buildGraphQLOperation(namespace, model, 'DELETE')[0];\n                _this.typeQuery.set(model, [\n                    createMutation,\n                    updateMutation,\n                    deleteMutation,\n                ]);\n            });\n        });\n    };\n    MutationProcessor.prototype.isReady = function () {\n        return this.observer !== undefined;\n    };\n    MutationProcessor.prototype.start = function () {\n        var _this = this;\n        var observable = new Observable(function (observer) {\n            _this.observer = observer;\n            _this.resume();\n            return function () {\n                _this.pause();\n            };\n        });\n        return observable;\n    };\n    MutationProcessor.prototype.resume = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var head, namespaceName, _a, model, operation, data, condition, modelConstructor, result, opName, modelDefinition, error_1, record;\n            var _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (this.processing || !this.isReady()) {\n                            return [2 /*return*/];\n                        }\n                        this.processing = true;\n                        namespaceName = USER;\n                        _c.label = 1;\n                    case 1:\n                        _a = this.processing;\n                        if (!_a) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this.outbox.peek(this.storage)];\n                    case 2:\n                        _a = (head = _c.sent());\n                        _c.label = 3;\n                    case 3:\n                        if (!_a) return [3 /*break*/, 11];\n                        model = head.model, operation = head.operation, data = head.data, condition = head.condition;\n                        modelConstructor = this.userClasses[model];\n                        result = void 0;\n                        opName = void 0;\n                        modelDefinition = void 0;\n                        _c.label = 4;\n                    case 4:\n                        _c.trys.push([4, 6, , 7]);\n                        return [4 /*yield*/, this.jitteredRetry(namespaceName, model, operation, data, condition, modelConstructor, this.MutationEvent, head)];\n                    case 5:\n                        _b = _c.sent(), result = _b[0], opName = _b[1], modelDefinition = _b[2];\n                        return [3 /*break*/, 7];\n                    case 6:\n                        error_1 = _c.sent();\n                        if (error_1.message === 'Offline' || error_1.message === 'RetryMutation') {\n                            return [3 /*break*/, 1];\n                        }\n                        return [3 /*break*/, 7];\n                    case 7:\n                        if (!(result === undefined)) return [3 /*break*/, 9];\n                        logger.debug('done retrying');\n                        return [4 /*yield*/, this.outbox.dequeue(this.storage)];\n                    case 8:\n                        _c.sent();\n                        return [3 /*break*/, 1];\n                    case 9:\n                        record = result.data[opName];\n                        return [4 /*yield*/, this.outbox.dequeue(this.storage)];\n                    case 10:\n                        _c.sent();\n                        this.observer.next([operation, modelDefinition, record]);\n                        return [3 /*break*/, 1];\n                    case 11:\n                        // pauses itself\n                        this.pause();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    MutationProcessor.prototype.jitteredRetry = function (namespaceName, model, operation, data, condition, modelConstructor, MutationEvent, mutationEvent) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, jitteredExponentialRetry(function (model, operation, data, condition, modelConstructor, MutationEvent, mutationEvent) { return __awaiter(_this, void 0, void 0, function () {\n                            var _a, query, variables, graphQLCondition, opName, modelDefinition, tryWith, attempt, opType, result, err_1, error, retryWith, err_2, _b, opName_1, query_1, serverData, namespace, updatedMutation;\n                            var _c;\n                            return __generator(this, function (_d) {\n                                switch (_d.label) {\n                                    case 0:\n                                        _a = this.createQueryVariables(namespaceName, model, operation, data, condition), query = _a[0], variables = _a[1], graphQLCondition = _a[2], opName = _a[3], modelDefinition = _a[4];\n                                        tryWith = { query: query, variables: variables };\n                                        attempt = 0;\n                                        opType = this.opTypeFromTransformerOperation(operation);\n                                        _d.label = 1;\n                                    case 1:\n                                        _d.trys.push([1, 3, , 13]);\n                                        return [4 /*yield*/, API.graphql(tryWith)];\n                                    case 2:\n                                        result = (_d.sent());\n                                        return [2 /*return*/, [result, opName, modelDefinition]];\n                                    case 3:\n                                        err_1 = _d.sent();\n                                        if (!(err_1.errors && err_1.errors.length > 0)) return [3 /*break*/, 12];\n                                        error = err_1.errors[0];\n                                        if (error.message === 'Network Error') {\n                                            if (!this.processing) {\n                                                throw new NonRetryableError('Offline');\n                                            }\n                                            // TODO: Check errors on different env (react-native or other browsers)\n                                            throw new Error('Network Error');\n                                        }\n                                        if (!(error.errorType === 'ConflictUnhandled')) return [3 /*break*/, 11];\n                                        attempt++;\n                                        retryWith = void 0;\n                                        if (!(attempt > MAX_ATTEMPTS)) return [3 /*break*/, 4];\n                                        retryWith = DISCARD;\n                                        return [3 /*break*/, 7];\n                                    case 4:\n                                        _d.trys.push([4, 6, , 7]);\n                                        return [4 /*yield*/, this.conflictHandler({\n                                                modelConstructor: modelConstructor,\n                                                localModel: this.modelInstanceCreator(modelConstructor, variables.input),\n                                                remoteModel: this.modelInstanceCreator(modelConstructor, error.data),\n                                                operation: opType,\n                                                attempts: attempt,\n                                            })];\n                                    case 5:\n                                        retryWith = _d.sent();\n                                        return [3 /*break*/, 7];\n                                    case 6:\n                                        err_2 = _d.sent();\n                                        logger.warn('conflict trycatch', err_2);\n                                        return [3 /*break*/, 13];\n                                    case 7:\n                                        if (!(retryWith === DISCARD)) return [3 /*break*/, 9];\n                                        _b = buildGraphQLOperation(this.schema.namespaces[namespaceName], modelDefinition, 'GET')[0], opName_1 = _b[1], query_1 = _b[2];\n                                        return [4 /*yield*/, API.graphql({\n                                                query: query_1,\n                                                variables: { id: variables.input.id },\n                                            })];\n                                    case 8:\n                                        serverData = _d.sent();\n                                        return [2 /*return*/, [serverData, opName_1, modelDefinition]];\n                                    case 9:\n                                        namespace = this.schema.namespaces[namespaceName];\n                                        updatedMutation = createMutationInstanceFromModelOperation(namespace.relationships, modelDefinition, opType, modelConstructor, retryWith, graphQLCondition, MutationEvent, this.modelInstanceCreator, mutationEvent.id);\n                                        return [4 /*yield*/, this.storage.save(updatedMutation)];\n                                    case 10:\n                                        _d.sent();\n                                        throw new NonRetryableError('RetryMutation');\n                                    case 11:\n                                        try {\n                                            this.errorHandler({\n                                                localModel: this.modelInstanceCreator(modelConstructor, variables.input),\n                                                message: error.message,\n                                                operation: operation,\n                                                errorType: error.errorType,\n                                                errorInfo: error.errorInfo,\n                                                remoteModel: error.data\n                                                    ? this.modelInstanceCreator(modelConstructor, error.data)\n                                                    : null,\n                                            });\n                                        }\n                                        catch (err) {\n                                            logger.warn({ _err: err });\n                                        }\n                                        finally {\n                                            // Return empty tuple, dequeues the mutation\n                                            return [2 /*return*/, error.data\n                                                    ? [\n                                                        { data: (_c = {}, _c[opName] = error.data, _c) },\n                                                        opName,\n                                                        modelDefinition,\n                                                    ]\n                                                    : []];\n                                        }\n                                        _d.label = 12;\n                                    case 12: return [3 /*break*/, 13];\n                                    case 13:\n                                        if (tryWith) return [3 /*break*/, 1];\n                                        _d.label = 14;\n                                    case 14: return [2 /*return*/];\n                                }\n                            });\n                        }); }, [\n                            model,\n                            operation,\n                            data,\n                            condition,\n                            modelConstructor,\n                            MutationEvent,\n                            mutationEvent,\n                        ])];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    MutationProcessor.prototype.createQueryVariables = function (namespaceName, model, operation, data, condition) {\n        var modelDefinition = this.schema.namespaces[namespaceName].models[model];\n        var queriesTuples = this.typeQuery.get(modelDefinition);\n        var _a = queriesTuples.find(function (_a) {\n            var transformerMutationType = _a[0];\n            return transformerMutationType === operation;\n        }), opName = _a[1], query = _a[2];\n        var _b = JSON.parse(data), _version = _b._version, parsedData = __rest(_b, [\"_version\"]);\n        var filteredData = operation === TransformerMutationType.DELETE\n            ? { id: parsedData.id } // For DELETE mutations, only ID is sent\n            : Object.values(modelDefinition.fields)\n                .filter(function (_a) {\n                var type = _a.type, association = _a.association;\n                // connections\n                if (isModelFieldType(type)) {\n                    // BELONGS_TO\n                    if (isTargetNameAssociation(association) &&\n                        association.connectionType === 'BELONGS_TO') {\n                        return true;\n                    }\n                    // All other connections\n                    return false;\n                }\n                // scalars and non-model types\n                return true;\n            })\n                .map(function (_a) {\n                var name = _a.name, type = _a.type, association = _a.association;\n                var fieldName = name;\n                var val = parsedData[name];\n                if (isModelFieldType(type) &&\n                    isTargetNameAssociation(association)) {\n                    fieldName = association.targetName;\n                    val = parsedData[fieldName];\n                }\n                return [fieldName, val];\n            })\n                .reduce(function (acc, _a) {\n                var k = _a[0], v = _a[1];\n                acc[k] = v;\n                return acc;\n            }, {});\n        // Build mutation variables input object\n        var input = __assign(__assign({}, filteredData), { _version: _version });\n        var graphQLCondition = JSON.parse(condition);\n        var variables = __assign({ input: input }, (operation === TransformerMutationType.CREATE\n            ? {}\n            : {\n                condition: Object.keys(graphQLCondition).length > 0\n                    ? graphQLCondition\n                    : null,\n            }));\n        return [query, variables, graphQLCondition, opName, modelDefinition];\n    };\n    MutationProcessor.prototype.opTypeFromTransformerOperation = function (operation) {\n        switch (operation) {\n            case TransformerMutationType.CREATE:\n                return OpType.INSERT;\n            case TransformerMutationType.DELETE:\n                return OpType.DELETE;\n            case TransformerMutationType.UPDATE:\n                return OpType.UPDATE;\n            case TransformerMutationType.GET: // Intentionally blank\n                break;\n            default:\n                exhaustiveCheck(operation);\n        }\n    };\n    MutationProcessor.prototype.pause = function () {\n        this.processing = false;\n    };\n    return MutationProcessor;\n}());\nexport { MutationProcessor };\n//# sourceMappingURL=mutation.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport API from '@aws-amplify/api';\nimport Observable from 'zen-observable-ts';\nimport { buildGraphQLOperation } from '../utils';\nimport { jitteredExponentialRetry } from '@aws-amplify/core';\nvar DEFAULT_PAGINATION_LIMIT = 100;\nvar DEFAULT_MAX_RECORDS_TO_SYNC = 10000;\nvar SyncProcessor = /** @class */ (function () {\n    function SyncProcessor(schema, maxRecordsToSync, syncPageSize) {\n        if (maxRecordsToSync === void 0) { maxRecordsToSync = DEFAULT_MAX_RECORDS_TO_SYNC; }\n        if (syncPageSize === void 0) { syncPageSize = DEFAULT_PAGINATION_LIMIT; }\n        this.schema = schema;\n        this.maxRecordsToSync = maxRecordsToSync;\n        this.syncPageSize = syncPageSize;\n        this.typeQuery = new WeakMap();\n        this.generateQueries();\n    }\n    SyncProcessor.prototype.generateQueries = function () {\n        var _this = this;\n        Object.values(this.schema.namespaces).forEach(function (namespace) {\n            Object.values(namespace.models)\n                .filter(function (_a) {\n                var syncable = _a.syncable;\n                return syncable;\n            })\n                .forEach(function (model) {\n                var _a = buildGraphQLOperation(namespace, model, 'LIST')[0], opNameQuery = _a.slice(1);\n                _this.typeQuery.set(model, opNameQuery);\n            });\n        });\n    };\n    SyncProcessor.prototype.retrievePage = function (modelDefinition, lastSync, nextToken, limit) {\n        if (limit === void 0) { limit = null; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, opName, query, variables, data, _b, opResult, items, newNextToken, startedAt;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        _a = this.typeQuery.get(modelDefinition), opName = _a[0], query = _a[1];\n                        variables = {\n                            limit: limit,\n                            nextToken: nextToken,\n                            lastSync: lastSync,\n                        };\n                        return [4 /*yield*/, this.jitteredRetry(query, variables)];\n                    case 1:\n                        data = (_c.sent()).data;\n                        _b = opName, opResult = data[_b];\n                        items = opResult.items, newNextToken = opResult.nextToken, startedAt = opResult.startedAt;\n                        return [2 /*return*/, { nextToken: newNextToken, startedAt: startedAt, items: items }];\n                }\n            });\n        });\n    };\n    SyncProcessor.prototype.jitteredRetry = function (query, variables) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, jitteredExponentialRetry(function (query, variables) { return __awaiter(_this, void 0, void 0, function () {\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0: return [4 /*yield*/, API.graphql({\n                                            query: query,\n                                            variables: variables,\n                                        })];\n                                    case 1: return [2 /*return*/, _a.sent()];\n                                }\n                            });\n                        }); }, [query, variables])];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    SyncProcessor.prototype.start = function (typesLastSync) {\n        var _this = this;\n        var processing = true;\n        var maxRecordsToSync = this.maxRecordsToSync !== undefined\n            ? this.maxRecordsToSync\n            : DEFAULT_MAX_RECORDS_TO_SYNC;\n        var syncPageSize = this.syncPageSize !== undefined\n            ? this.syncPageSize\n            : DEFAULT_PAGINATION_LIMIT;\n        var parentPromises = new Map();\n        var observable = new Observable(function (observer) {\n            var sortedTypesLastSyncs = Object.values(_this.schema.namespaces).reduce(function (map, namespace) {\n                for (var _i = 0, _a = Array.from(namespace.modelTopologicalOrdering.keys()); _i < _a.length; _i++) {\n                    var modelName = _a[_i];\n                    var typeLastSync = typesLastSync.get(namespace.models[modelName]);\n                    map.set(namespace.models[modelName], typeLastSync);\n                }\n                return map;\n            }, new Map());\n            var allModelsReady = Array.from(sortedTypesLastSyncs.entries())\n                .filter(function (_a) {\n                var syncable = _a[0].syncable;\n                return syncable;\n            })\n                .map(function (_a) {\n                var modelDefinition = _a[0], _b = _a[1], namespace = _b[0], lastSync = _b[1];\n                return __awaiter(_this, void 0, void 0, function () {\n                    var done, nextToken, startedAt, items, recordsReceived, parents, promises, promise;\n                    var _this = this;\n                    return __generator(this, function (_c) {\n                        switch (_c.label) {\n                            case 0:\n                                done = false;\n                                nextToken = null;\n                                startedAt = null;\n                                items = null;\n                                recordsReceived = 0;\n                                parents = this.schema.namespaces[namespace].modelTopologicalOrdering.get(modelDefinition.name);\n                                promises = parents.map(function (parent) {\n                                    return parentPromises.get(namespace + \"_\" + parent);\n                                });\n                                promise = new Promise(function (res) { return __awaiter(_this, void 0, void 0, function () {\n                                    var limit;\n                                    var _a;\n                                    return __generator(this, function (_b) {\n                                        switch (_b.label) {\n                                            case 0: return [4 /*yield*/, Promise.all(promises)];\n                                            case 1:\n                                                _b.sent();\n                                                _b.label = 2;\n                                            case 2:\n                                                if (!processing) {\n                                                    return [2 /*return*/];\n                                                }\n                                                limit = Math.min(maxRecordsToSync - recordsReceived, syncPageSize);\n                                                return [4 /*yield*/, this.retrievePage(modelDefinition, lastSync, nextToken, limit)];\n                                            case 3:\n                                                (_a = _b.sent(), items = _a.items, nextToken = _a.nextToken, startedAt = _a.startedAt);\n                                                recordsReceived += items.length;\n                                                done = nextToken === null || recordsReceived >= maxRecordsToSync;\n                                                observer.next({\n                                                    namespace: namespace,\n                                                    modelDefinition: modelDefinition,\n                                                    items: items,\n                                                    done: done,\n                                                    startedAt: startedAt,\n                                                    isFullSync: !lastSync,\n                                                });\n                                                _b.label = 4;\n                                            case 4:\n                                                if (!done) return [3 /*break*/, 2];\n                                                _b.label = 5;\n                                            case 5:\n                                                res();\n                                                return [2 /*return*/];\n                                        }\n                                    });\n                                }); });\n                                parentPromises.set(namespace + \"_\" + modelDefinition.name, promise);\n                                return [4 /*yield*/, promise];\n                            case 1:\n                                _c.sent();\n                                return [2 /*return*/];\n                        }\n                    });\n                });\n            });\n            Promise.all(allModelsReady).then(function () {\n                observer.complete();\n            });\n            return function () {\n                processing = false;\n            };\n        });\n        return observable;\n    };\n    return SyncProcessor;\n}());\nexport { SyncProcessor };\n//# sourceMappingURL=sync.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nimport { CONTROL_MSG as PUBSUB_CONTROL_MSG } from '@aws-amplify/pubsub';\nimport Observable from 'zen-observable-ts';\nimport { ModelPredicateCreator } from '../predicates';\nimport { SYNC } from '../util';\nimport DataStoreConnectivity from './datastoreConnectivity';\nimport { ModelMerger } from './merger';\nimport { MutationEventOutbox } from './outbox';\nimport { MutationProcessor } from './processors/mutation';\nimport { CONTROL_MSG, SubscriptionProcessor } from './processors/subscription';\nimport { SyncProcessor } from './processors/sync';\nimport { createMutationInstanceFromModelOperation, predicateToGraphQLCondition, } from './utils';\nvar logger = new Logger('DataStore');\nvar ownSymbol = Symbol('sync');\nvar SyncEngine = /** @class */ (function () {\n    function SyncEngine(schema, namespaceResolver, modelClasses, userModelClasses, storage, modelInstanceCreator, maxRecordsToSync, syncPageSize, conflictHandler, errorHandler) {\n        this.schema = schema;\n        this.namespaceResolver = namespaceResolver;\n        this.modelClasses = modelClasses;\n        this.userModelClasses = userModelClasses;\n        this.storage = storage;\n        this.modelInstanceCreator = modelInstanceCreator;\n        this.maxRecordsToSync = maxRecordsToSync;\n        this.syncPageSize = syncPageSize;\n        this.started = false;\n        this.online = false;\n        this.processingMutations = false;\n        var MutationEvent = this.modelClasses['MutationEvent'];\n        this.outbox = new MutationEventOutbox(this.schema, this.namespaceResolver, MutationEvent, ownSymbol);\n        this.modelMerger = new ModelMerger(this.outbox, ownSymbol);\n        this.syncQueriesProcessor = new SyncProcessor(this.schema, maxRecordsToSync, syncPageSize);\n        this.subscriptionsProcessor = new SubscriptionProcessor(this.schema);\n        this.mutationsProcessor = new MutationProcessor(this.schema, this.storage, this.userModelClasses, this.outbox, this.modelInstanceCreator, MutationEvent, conflictHandler, errorHandler);\n    }\n    SyncEngine.prototype.start = function (params) {\n        var _this = this;\n        return new Observable(function (observer) {\n            logger.log('starting sync engine...');\n            _this.started = true;\n            var subscriptions = [];\n            (function () { return __awaiter(_this, void 0, void 0, function () {\n                var err_1, datastoreConnectivity;\n                var _this = this;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            _a.trys.push([0, 2, , 3]);\n                            return [4 /*yield*/, this.setupModels(params)];\n                        case 1:\n                            _a.sent();\n                            return [3 /*break*/, 3];\n                        case 2:\n                            err_1 = _a.sent();\n                            logger.error('Sync engine error on start', err_1);\n                            return [2 /*return*/];\n                        case 3:\n                            datastoreConnectivity = new DataStoreConnectivity();\n                            datastoreConnectivity.status().subscribe(function (_a) {\n                                var online = _a.online;\n                                return __awaiter(_this, void 0, void 0, function () {\n                                    var _b, ctlSubsObservable, dataSubsObservable, errorHandler, _c, _d, err_2, currentTimeStamp, modelLastSync, paginatingModels, syncQueriesObservable, syncQuerySubscription, err_3;\n                                    var _this = this;\n                                    return __generator(this, function (_e) {\n                                        switch (_e.label) {\n                                            case 0:\n                                                if (!(online && !this.online)) return [3 /*break*/, 10];\n                                                _b = this.subscriptionsProcessor.start(), ctlSubsObservable = _b[0], dataSubsObservable = _b[1];\n                                                errorHandler = this.disconnectionHandler(datastoreConnectivity);\n                                                _e.label = 1;\n                                            case 1:\n                                                _e.trys.push([1, 3, , 4]);\n                                                _d = (_c = subscriptions).push;\n                                                return [4 /*yield*/, this.waitForSubscriptionsReady(ctlSubsObservable, errorHandler)];\n                                            case 2:\n                                                _d.apply(_c, [_e.sent()]);\n                                                return [3 /*break*/, 4];\n                                            case 3:\n                                                err_2 = _e.sent();\n                                                observer.error(err_2);\n                                                return [2 /*return*/];\n                                            case 4:\n                                                logger.log('Realtime ready');\n                                                currentTimeStamp = new Date().getTime();\n                                                return [4 /*yield*/, this.getModelsMetadataWithNextFullSync(currentTimeStamp)];\n                                            case 5:\n                                                modelLastSync = _e.sent();\n                                                paginatingModels = new Set(modelLastSync.keys());\n                                                syncQueriesObservable = this.syncQueriesProcessor.start(modelLastSync);\n                                                if (this.isFullSync(modelLastSync)) {\n                                                    clearTimeout(this.fullSyncTimeoutId);\n                                                    this.fullSyncTimeoutId = undefined;\n                                                }\n                                                _e.label = 6;\n                                            case 6:\n                                                _e.trys.push([6, 8, , 9]);\n                                                return [4 /*yield*/, this.waitForSyncQueries(syncQueriesObservable, paginatingModels)];\n                                            case 7:\n                                                syncQuerySubscription = _e.sent();\n                                                if (syncQuerySubscription) {\n                                                    subscriptions.push(syncQuerySubscription);\n                                                }\n                                                return [3 /*break*/, 9];\n                                            case 8:\n                                                err_3 = _e.sent();\n                                                observer.error(err_3);\n                                                return [2 /*return*/];\n                                            case 9:\n                                                //#endregion\n                                                //#region process mutations\n                                                subscriptions.push(this.mutationsProcessor\n                                                    .start()\n                                                    .subscribe(function (_a) {\n                                                    var _transformerMutationType = _a[0], modelDefinition = _a[1], item = _a[2];\n                                                    var modelConstructor = _this.userModelClasses[modelDefinition.name];\n                                                    var model = _this.modelInstanceCreator(modelConstructor, item);\n                                                    _this.modelMerger.merge(_this.storage, model);\n                                                }));\n                                                //#endregion\n                                                // TODO: extract to function\n                                                subscriptions.push(dataSubsObservable.subscribe(function (_a) {\n                                                    var _transformerMutationType = _a[0], modelDefinition = _a[1], item = _a[2];\n                                                    var modelConstructor = _this.userModelClasses[modelDefinition.name];\n                                                    var model = _this.modelInstanceCreator(modelConstructor, item);\n                                                    _this.modelMerger.merge(_this.storage, model);\n                                                }));\n                                                return [3 /*break*/, 11];\n                                            case 10:\n                                                if (!online) {\n                                                    subscriptions.forEach(function (sub) { return sub.unsubscribe(); });\n                                                    subscriptions = [];\n                                                }\n                                                _e.label = 11;\n                                            case 11:\n                                                this.online = online;\n                                                return [2 /*return*/];\n                                        }\n                                    });\n                                });\n                            });\n                            this.storage\n                                .observe(null, null, ownSymbol)\n                                .filter(function (_a) {\n                                var model = _a.model;\n                                var modelDefinition = _this.getModelDefinition(model);\n                                return modelDefinition.syncable === true;\n                            })\n                                .subscribe({\n                                next: function (_a) {\n                                    var opType = _a.opType, model = _a.model, element = _a.element, condition = _a.condition;\n                                    return __awaiter(_this, void 0, void 0, function () {\n                                        var namespace, MutationEventConstructor, graphQLCondition, mutationEvent;\n                                        return __generator(this, function (_b) {\n                                            switch (_b.label) {\n                                                case 0:\n                                                    namespace = this.schema.namespaces[this.namespaceResolver(model)];\n                                                    MutationEventConstructor = this.modelClasses['MutationEvent'];\n                                                    graphQLCondition = predicateToGraphQLCondition(condition);\n                                                    mutationEvent = createMutationInstanceFromModelOperation(namespace.relationships, this.getModelDefinition(model), opType, model, element, graphQLCondition, MutationEventConstructor, this.modelInstanceCreator);\n                                                    return [4 /*yield*/, this.outbox.enqueue(this.storage, mutationEvent)];\n                                                case 1:\n                                                    _b.sent();\n                                                    if (this.online) {\n                                                        this.mutationsProcessor.resume();\n                                                    }\n                                                    return [2 /*return*/];\n                                            }\n                                        });\n                                    });\n                                },\n                            });\n                            return [2 /*return*/];\n                    }\n                });\n            }); })();\n            return function () {\n                subscriptions.forEach(function (sub) { return sub.unsubscribe(); });\n            };\n        });\n    };\n    SyncEngine.prototype.getModelsMetadataWithNextFullSync = function (currentTimeStamp) {\n        return __awaiter(this, void 0, void 0, function () {\n            var modelLastSync, _a;\n            var _this = this;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = Map.bind;\n                        return [4 /*yield*/, this.getModelsMetadata()];\n                    case 1:\n                        modelLastSync = new (_a.apply(Map, [void 0, (_b.sent()).map(function (_a) {\n                                var namespace = _a.namespace, model = _a.model, lastSync = _a.lastSync, lastFullSync = _a.lastFullSync, fullSyncInterval = _a.fullSyncInterval;\n                                var nextFullSync = lastFullSync + fullSyncInterval;\n                                var syncFrom = !lastFullSync || nextFullSync < currentTimeStamp\n                                    ? 0 // perform full sync if expired\n                                    : lastSync; // perform delta sync\n                                return [\n                                    _this.schema.namespaces[namespace].models[model],\n                                    [namespace, syncFrom],\n                                ];\n                            })]))();\n                        return [2 /*return*/, modelLastSync];\n                }\n            });\n        });\n    };\n    SyncEngine.prototype.isFullSync = function (modelsMap) {\n        for (var _i = 0, _a = Array.from(modelsMap.values()); _i < _a.length; _i++) {\n            var _b = _a[_i], syncFrom = _b[1];\n            if (syncFrom === 0) {\n                return true;\n            }\n        }\n        return false;\n    };\n    SyncEngine.prototype.waitForSyncQueries = function (observable, paginatingModels) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        if (!_this.online) {\n                            resolve();\n                        }\n                        var currentTimeStamp = new Date().getTime();\n                        var subscription = observable.subscribe({\n                            error: function (err) {\n                                reject(err);\n                            },\n                            next: function (_a) {\n                                var namespace = _a.namespace, modelDefinition = _a.modelDefinition, items = _a.items, done = _a.done, startedAt = _a.startedAt, isFullSync = _a.isFullSync;\n                                return __awaiter(_this, void 0, void 0, function () {\n                                    var promises, modelMetadata_1, fullSyncInterval;\n                                    var _this = this;\n                                    return __generator(this, function (_b) {\n                                        switch (_b.label) {\n                                            case 0:\n                                                promises = items.map(function (item) { return __awaiter(_this, void 0, void 0, function () {\n                                                    var modelConstructor, model;\n                                                    return __generator(this, function (_a) {\n                                                        modelConstructor = this.userModelClasses[modelDefinition.name];\n                                                        model = this.modelInstanceCreator(modelConstructor, item);\n                                                        return [2 /*return*/, this.modelMerger.merge(this.storage, model)];\n                                                    });\n                                                }); });\n                                                return [4 /*yield*/, Promise.all(promises)];\n                                            case 1:\n                                                _b.sent();\n                                                if (!done) return [3 /*break*/, 4];\n                                                paginatingModels.delete(modelDefinition);\n                                                return [4 /*yield*/, this.getModelMetadata(namespace, modelDefinition.name)];\n                                            case 2:\n                                                modelMetadata_1 = _b.sent();\n                                                modelMetadata_1 = this.modelClasses\n                                                    .ModelMetadata.copyOf(modelMetadata_1, function (draft) {\n                                                    draft.lastSync = startedAt;\n                                                    draft.lastFullSync = isFullSync\n                                                        ? currentTimeStamp\n                                                        : modelMetadata_1.lastFullSync;\n                                                });\n                                                fullSyncInterval = modelMetadata_1.fullSyncInterval;\n                                                return [4 /*yield*/, this.storage.save(modelMetadata_1, undefined, ownSymbol)];\n                                            case 3:\n                                                _b.sent();\n                                                // resolve promise if all done\n                                                if (paginatingModels.size === 0) {\n                                                    resolve(subscription);\n                                                }\n                                                if (isFullSync && !this.fullSyncTimeoutId) {\n                                                    // register next full sync when no full sync is already scheduled\n                                                    this.fullSyncTimeoutId = setTimeout(function () { return __awaiter(_this, void 0, void 0, function () {\n                                                        var currentTimeStamp, modelLastSync, paginatingModels, syncQueriesObservable;\n                                                        return __generator(this, function (_a) {\n                                                            switch (_a.label) {\n                                                                case 0:\n                                                                    currentTimeStamp = new Date().getTime();\n                                                                    return [4 /*yield*/, this.getModelsMetadataWithNextFullSync(currentTimeStamp)];\n                                                                case 1:\n                                                                    modelLastSync = _a.sent();\n                                                                    paginatingModels = new Set(modelLastSync.keys());\n                                                                    syncQueriesObservable = this.syncQueriesProcessor.start(modelLastSync);\n                                                                    this.fullSyncTimeoutId = undefined;\n                                                                    this.waitForSyncQueries(syncQueriesObservable, paginatingModels);\n                                                                    return [2 /*return*/];\n                                                            }\n                                                        });\n                                                    }); }, fullSyncInterval);\n                                                }\n                                                _b.label = 4;\n                                            case 4: return [2 /*return*/];\n                                        }\n                                    });\n                                });\n                            },\n                        });\n                    })];\n            });\n        });\n    };\n    SyncEngine.prototype.disconnectionHandler = function (datastoreConnectivity) {\n        return function (msg) {\n            // This implementation is tight to AWSAppSyncRealTimeProvider 'Connection closed', 'Timeout disconnect' msg\n            if (PUBSUB_CONTROL_MSG.CONNECTION_CLOSED === msg ||\n                PUBSUB_CONTROL_MSG.TIMEOUT_DISCONNECT === msg) {\n                datastoreConnectivity.socketDisconnected();\n            }\n        };\n    };\n    SyncEngine.prototype.waitForSubscriptionsReady = function (ctlSubsObservable, errorHandler) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        var subscription = ctlSubsObservable.subscribe({\n                            next: function (msg) {\n                                if (msg === CONTROL_MSG.CONNECTED) {\n                                    resolve(subscription);\n                                }\n                            },\n                            error: function (err) {\n                                reject(\"subscription failed \" + err);\n                                errorHandler(err);\n                            },\n                        });\n                    })];\n            });\n        });\n    };\n    SyncEngine.prototype.setupModels = function (params) {\n        return __awaiter(this, void 0, void 0, function () {\n            var fullSyncInterval, ModelMetadata, models, promises;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        fullSyncInterval = params.fullSyncInterval;\n                        ModelMetadata = this.modelClasses\n                            .ModelMetadata;\n                        models = [];\n                        Object.values(this.schema.namespaces).forEach(function (namespace) {\n                            Object.values(namespace.models)\n                                .filter(function (_a) {\n                                var syncable = _a.syncable;\n                                return syncable;\n                            })\n                                .forEach(function (model) {\n                                models.push([namespace.name, model.name]);\n                            });\n                        });\n                        promises = models.map(function (_a) {\n                            var namespace = _a[0], model = _a[1];\n                            return __awaiter(_this, void 0, void 0, function () {\n                                var modelMetadata;\n                                return __generator(this, function (_b) {\n                                    switch (_b.label) {\n                                        case 0: return [4 /*yield*/, this.getModelMetadata(namespace, model)];\n                                        case 1:\n                                            modelMetadata = _b.sent();\n                                            if (!(modelMetadata === undefined)) return [3 /*break*/, 3];\n                                            return [4 /*yield*/, this.storage.save(this.modelInstanceCreator(ModelMetadata, {\n                                                    model: model,\n                                                    namespace: namespace,\n                                                    lastSync: null,\n                                                    fullSyncInterval: fullSyncInterval,\n                                                    lastFullSync: null,\n                                                }), undefined, ownSymbol)];\n                                        case 2:\n                                            _b.sent();\n                                            return [3 /*break*/, 5];\n                                        case 3: return [4 /*yield*/, this.storage.save(this.modelClasses.ModelMetadata.copyOf(modelMetadata, function (draft) {\n                                                draft.fullSyncInterval = fullSyncInterval;\n                                            }))];\n                                        case 4:\n                                            _b.sent();\n                                            _b.label = 5;\n                                        case 5: return [2 /*return*/];\n                                    }\n                                });\n                            });\n                        });\n                        return [4 /*yield*/, Promise.all(promises)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SyncEngine.prototype.getModelsMetadata = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var ModelMetadata, modelsMetadata;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        ModelMetadata = this.modelClasses\n                            .ModelMetadata;\n                        return [4 /*yield*/, this.storage.query(ModelMetadata)];\n                    case 1:\n                        modelsMetadata = _a.sent();\n                        return [2 /*return*/, modelsMetadata];\n                }\n            });\n        });\n    };\n    SyncEngine.prototype.getModelMetadata = function (namespace, model) {\n        return __awaiter(this, void 0, void 0, function () {\n            var ModelMetadata, predicate, modelMetadata;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        ModelMetadata = this.modelClasses\n                            .ModelMetadata;\n                        predicate = ModelPredicateCreator.createFromExisting(this.schema.namespaces[SYNC].models[ModelMetadata.name], function (c) { return c.namespace('eq', namespace).model('eq', model); });\n                        return [4 /*yield*/, this.storage.query(ModelMetadata, predicate)];\n                    case 1:\n                        modelMetadata = (_a.sent())[0];\n                        return [2 /*return*/, modelMetadata];\n                }\n            });\n        });\n    };\n    SyncEngine.prototype.getModelDefinition = function (modelConstructor) {\n        var namespaceName = this.namespaceResolver(modelConstructor);\n        var modelDefinition = this.schema.namespaces[namespaceName].models[modelConstructor.name];\n        return modelDefinition;\n    };\n    SyncEngine.getNamespace = function () {\n        var namespace = {\n            name: SYNC,\n            relationships: {},\n            enums: {\n                OperationType: {\n                    name: 'OperationType',\n                    values: ['CREATE', 'UPDATE', 'DELETE'],\n                },\n            },\n            nonModels: {},\n            models: {\n                MutationEvent: {\n                    name: 'MutationEvent',\n                    pluralName: 'MutationEvents',\n                    syncable: false,\n                    fields: {\n                        id: {\n                            name: 'id',\n                            type: 'ID',\n                            isRequired: true,\n                            isArray: false,\n                        },\n                        model: {\n                            name: 'model',\n                            type: 'String',\n                            isRequired: true,\n                            isArray: false,\n                        },\n                        data: {\n                            name: 'data',\n                            type: 'String',\n                            isRequired: true,\n                            isArray: false,\n                        },\n                        modelId: {\n                            name: 'modelId',\n                            type: 'String',\n                            isRequired: true,\n                            isArray: false,\n                        },\n                        operation: {\n                            name: 'operation',\n                            type: {\n                                enum: 'Operationtype',\n                            },\n                            isArray: false,\n                            isRequired: true,\n                        },\n                        condition: {\n                            name: 'condition',\n                            type: 'String',\n                            isArray: false,\n                            isRequired: true,\n                        },\n                    },\n                },\n                ModelMetadata: {\n                    name: 'ModelMetadata',\n                    pluralName: 'ModelsMetadata',\n                    syncable: false,\n                    fields: {\n                        id: {\n                            name: 'id',\n                            type: 'ID',\n                            isRequired: true,\n                            isArray: false,\n                        },\n                        namespace: {\n                            name: 'namespace',\n                            type: 'String',\n                            isRequired: true,\n                            isArray: false,\n                        },\n                        model: {\n                            name: 'model',\n                            type: 'String',\n                            isRequired: true,\n                            isArray: false,\n                        },\n                        lastSync: {\n                            name: 'lastSync',\n                            type: 'Int',\n                            isRequired: false,\n                            isArray: false,\n                        },\n                        lastFullSync: {\n                            name: 'lastFullSync',\n                            type: 'Int',\n                            isRequired: false,\n                            isArray: false,\n                        },\n                        fullSyncInterval: {\n                            name: 'fullSyncInterval',\n                            type: 'Int',\n                            isRequired: true,\n                            isArray: false,\n                        },\n                    },\n                },\n            },\n        };\n        return namespace;\n    };\n    return SyncEngine;\n}());\nexport { SyncEngine };\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nimport { immerable, produce, setAutoFreeze } from 'immer';\nimport { v1 as uuid1, v4 as uuid4 } from 'uuid';\nimport Observable from 'zen-observable-ts';\nimport { isPredicatesAll, ModelPredicateCreator, } from '../predicates';\nimport Storage from '../storage/storage';\nimport { SyncEngine } from '../sync';\nimport { GraphQLScalarType, isGraphQLScalarType, } from '../types';\nimport { DATASTORE, establishRelation, exhaustiveCheck, isModelConstructor, STORAGE, SYNC, USER, } from '../util';\nsetAutoFreeze(true);\nvar logger = new Logger('DataStore');\nvar SETTING_SCHEMA_VERSION = 'schemaVersion';\nvar storage;\nvar schema;\nvar modelNamespaceMap = new WeakMap();\nvar getModelDefinition = function (modelConstructor) {\n    var namespace = modelNamespaceMap.get(modelConstructor);\n    return schema.namespaces[namespace].models[modelConstructor.name];\n};\nvar isValidModelConstructor = function (obj) {\n    return isModelConstructor(obj) && modelNamespaceMap.has(obj);\n};\nvar namespaceResolver = function (modelConstructor) {\n    return modelNamespaceMap.get(modelConstructor);\n};\nvar dataStoreClasses;\nvar userClasses;\nvar syncClasses;\nvar storageClasses;\nvar initSchema = function (userSchema) {\n    var _a;\n    if (schema !== undefined) {\n        throw new Error('The schema has already been initialized');\n    }\n    logger.log('validating schema', { schema: userSchema });\n    var internalUserNamespace = __assign({ name: USER }, userSchema);\n    logger.log('DataStore', 'Init models');\n    userClasses = createTypeClasses(internalUserNamespace);\n    logger.log('DataStore', 'Models initialized');\n    var dataStoreNamespace = getNamespace();\n    var storageNamespace = Storage.getNamespace();\n    var syncNamespace = SyncEngine.getNamespace();\n    dataStoreClasses = createTypeClasses(dataStoreNamespace);\n    storageClasses = createTypeClasses(storageNamespace);\n    syncClasses = createTypeClasses(syncNamespace);\n    schema = {\n        namespaces: (_a = {},\n            _a[dataStoreNamespace.name] = dataStoreNamespace,\n            _a[internalUserNamespace.name] = internalUserNamespace,\n            _a[storageNamespace.name] = storageNamespace,\n            _a[syncNamespace.name] = syncNamespace,\n            _a),\n        version: userSchema.version,\n    };\n    Object.keys(schema.namespaces).forEach(function (namespace) {\n        schema.namespaces[namespace].relationships = establishRelation(schema.namespaces[namespace]);\n        var modelAssociations = new Map();\n        Object.values(schema.namespaces[namespace].models).forEach(function (model) {\n            var wea = [];\n            Object.values(model.fields)\n                .filter(function (field) {\n                return field.association &&\n                    field.association.connectionType === 'BELONGS_TO' &&\n                    field.type.model !== model.name;\n            })\n                .forEach(function (field) { return wea.push(field.type.model); });\n            modelAssociations.set(model.name, wea);\n        });\n        var result = new Map();\n        var count = 1000;\n        while (true && count > 0) {\n            if (modelAssociations.size === 0) {\n                break;\n            }\n            count--;\n            if (count === 0) {\n                throw new Error('Models are not topologically sortable. Please verify your schema.');\n            }\n            for (var _i = 0, _a = Array.from(modelAssociations.keys()); _i < _a.length; _i++) {\n                var modelName = _a[_i];\n                var parents = modelAssociations.get(modelName);\n                if (parents.every(function (x) { return result.has(x); })) {\n                    result.set(modelName, parents);\n                }\n            }\n            Array.from(result.keys()).forEach(function (x) { return modelAssociations.delete(x); });\n        }\n        schema.namespaces[namespace].modelTopologicalOrdering = result;\n    });\n    return userClasses;\n};\nvar createTypeClasses = function (namespace) {\n    var classes = {};\n    Object.entries(namespace.models).forEach(function (_a) {\n        var modelName = _a[0], modelDefinition = _a[1];\n        var clazz = createModelClass(modelDefinition);\n        classes[modelName] = clazz;\n        modelNamespaceMap.set(clazz, namespace.name);\n    });\n    Object.entries(namespace.nonModels || {}).forEach(function (_a) {\n        var typeName = _a[0], typeDefinition = _a[1];\n        var clazz = createNonModelClass(typeDefinition);\n        classes[typeName] = clazz;\n    });\n    return classes;\n};\nvar instancesMetadata = new WeakSet();\nfunction modelInstanceCreator(modelConstructor, init) {\n    instancesMetadata.add(init);\n    return new modelConstructor(init);\n}\nvar initializeInstance = function (init, modelDefinition, draft) {\n    Object.entries(init).forEach(function (_a) {\n        var k = _a[0], v = _a[1];\n        var fieldDefinition = modelDefinition.fields[k];\n        if (fieldDefinition !== undefined) {\n            var type = fieldDefinition.type, isRequired = fieldDefinition.isRequired, name_1 = fieldDefinition.name, isArray = fieldDefinition.isArray;\n            if (isRequired && (v === null || v === undefined)) {\n                throw new Error(\"Field \" + name_1 + \" is required\");\n            }\n            if (isGraphQLScalarType(type)) {\n                var jsType_1 = GraphQLScalarType.getJSType(type);\n                if (isArray) {\n                    if (!Array.isArray(v)) {\n                        throw new Error(\"Field \" + name_1 + \" should be of type \" + jsType_1 + \"[], \" + typeof v + \" received. \" + v);\n                    }\n                    if (v.some(function (e) { return typeof e !== jsType_1; })) {\n                        var elemTypes = v.map(function (e) { return typeof e; }).join(',');\n                        throw new Error(\"All elements in the \" + name_1 + \" array should be of type \" + jsType_1 + \", [\" + elemTypes + \"] received. \" + v);\n                    }\n                }\n                else if (typeof v !== jsType_1 && v !== null) {\n                    throw new Error(\"Field \" + name_1 + \" should be of type \" + jsType_1 + \", \" + typeof v + \" received. \" + v);\n                }\n            }\n        }\n        draft[k] = v;\n    });\n};\nvar createModelClass = function (modelDefinition) {\n    var clazz = /** @class */ (function () {\n        function Model(init) {\n            var instance = produce(this, function (draft) {\n                initializeInstance(init, modelDefinition, draft);\n                var modelInstanceMetadata = instancesMetadata.has(init)\n                    ? init\n                    : {};\n                var _id = modelInstanceMetadata.id, _version = modelInstanceMetadata._version, _lastChangedAt = modelInstanceMetadata._lastChangedAt, _deleted = modelInstanceMetadata._deleted;\n                var id = \n                // instancesIds is set by modelInstanceCreator, it is accessible only internally\n                _id !== null && _id !== undefined\n                    ? _id\n                    : modelDefinition.syncable\n                        ? uuid4()\n                        : // Transform UUID v1 into a lexicographically sortable string for non-syncable models\n                            uuid1().replace(/^(.{8})-(.{4})-(.{4})/, '$3-$2-$1');\n                draft.id = id;\n                if (modelDefinition.syncable) {\n                    draft._version = _version;\n                    draft._lastChangedAt = _lastChangedAt;\n                    draft._deleted = _deleted;\n                }\n            });\n            return instance;\n        }\n        Model.copyOf = function (source, fn) {\n            var modelConstructor = Object.getPrototypeOf(source || {}).constructor;\n            if (!isValidModelConstructor(modelConstructor)) {\n                var msg = 'The source object is not a valid model';\n                logger.error(msg, { source: source });\n                throw new Error(msg);\n            }\n            return produce(source, function (draft) {\n                fn(draft);\n                draft.id = source.id;\n            });\n        };\n        return Model;\n    }());\n    clazz[immerable] = true;\n    Object.defineProperty(clazz, 'name', { value: modelDefinition.name });\n    return clazz;\n};\nvar createNonModelClass = function (typeDefinition) {\n    var clazz = /** @class */ (function () {\n        function Model(init) {\n            var instance = produce(this, function (draft) {\n                initializeInstance(init, typeDefinition, draft);\n            });\n            return instance;\n        }\n        return Model;\n    }());\n    clazz[immerable] = true;\n    Object.defineProperty(clazz, 'name', { value: typeDefinition.name });\n    return clazz;\n};\nvar save = function (model, condition) { return __awaiter(void 0, void 0, void 0, function () {\n    var modelConstructor, msg, modelDefinition, producedCondition, savedModel;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, start()];\n            case 1:\n                _a.sent();\n                modelConstructor = model\n                    ? model.constructor\n                    : undefined;\n                if (!isValidModelConstructor(modelConstructor)) {\n                    msg = 'Object is not an instance of a valid model';\n                    logger.error(msg, { model: model });\n                    throw new Error(msg);\n                }\n                modelDefinition = getModelDefinition(modelConstructor);\n                producedCondition = ModelPredicateCreator.createFromExisting(modelDefinition, condition);\n                return [4 /*yield*/, storage.runExclusive(function (s) { return __awaiter(void 0, void 0, void 0, function () {\n                        return __generator(this, function (_a) {\n                            switch (_a.label) {\n                                case 0: return [4 /*yield*/, s.save(model, producedCondition)];\n                                case 1:\n                                    _a.sent();\n                                    return [2 /*return*/, s.query(modelConstructor, ModelPredicateCreator.createForId(modelDefinition, model.id))];\n                            }\n                        });\n                    }); })];\n            case 2:\n                savedModel = (_a.sent())[0];\n                return [2 /*return*/, savedModel];\n        }\n    });\n}); };\nvar remove = function (modelOrConstructor, idOrCriteria) { return __awaiter(void 0, void 0, void 0, function () {\n    var condition, msg, modelConstructor, msg, msg, deleted, model, modelConstructor, msg, modelDefinition, idPredicate, msg, deleted;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, start()];\n            case 1:\n                _a.sent();\n                if (!modelOrConstructor) {\n                    msg = 'Model or Model Constructor required';\n                    logger.error(msg, { modelOrConstructor: modelOrConstructor });\n                    throw new Error(msg);\n                }\n                if (!isValidModelConstructor(modelOrConstructor)) return [3 /*break*/, 3];\n                modelConstructor = modelOrConstructor;\n                if (!idOrCriteria) {\n                    msg = 'Id to delete or criteria required. Do you want to delete all? Pass Predicates.ALL';\n                    logger.error(msg, { idOrCriteria: idOrCriteria });\n                    throw new Error(msg);\n                }\n                if (typeof idOrCriteria === 'string') {\n                    condition = ModelPredicateCreator.createForId(getModelDefinition(modelConstructor), idOrCriteria);\n                }\n                else {\n                    condition = ModelPredicateCreator.createFromExisting(getModelDefinition(modelConstructor), \n                    /**\n                     * idOrCriteria is always a ProducerModelPredicate<T>, never a symbol.\n                     * The symbol is used only for typing purposes. e.g. see Predicates.ALL\n                     */\n                    idOrCriteria);\n                    if (!condition || !ModelPredicateCreator.isValidPredicate(condition)) {\n                        msg = 'Criteria required. Do you want to delete all? Pass Predicates.ALL';\n                        logger.error(msg, { condition: condition });\n                        throw new Error(msg);\n                    }\n                }\n                return [4 /*yield*/, storage.delete(modelConstructor, condition)];\n            case 2:\n                deleted = (_a.sent())[0];\n                return [2 /*return*/, deleted];\n            case 3:\n                model = modelOrConstructor;\n                modelConstructor = Object.getPrototypeOf(model || {})\n                    .constructor;\n                if (!isValidModelConstructor(modelConstructor)) {\n                    msg = 'Object is not an instance of a valid model';\n                    logger.error(msg, { model: model });\n                    throw new Error(msg);\n                }\n                modelDefinition = getModelDefinition(modelConstructor);\n                idPredicate = ModelPredicateCreator.createForId(modelDefinition, model.id);\n                if (idOrCriteria) {\n                    if (typeof idOrCriteria !== 'function') {\n                        msg = 'Invalid criteria';\n                        logger.error(msg, { idOrCriteria: idOrCriteria });\n                        throw new Error(msg);\n                    }\n                    condition = idOrCriteria(idPredicate);\n                }\n                else {\n                    condition = idPredicate;\n                }\n                return [4 /*yield*/, storage.delete(model, condition)];\n            case 4:\n                deleted = (_a.sent())[0][0];\n                return [2 /*return*/, deleted];\n        }\n    });\n}); };\nvar observe = function (modelConstructor, idOrCriteria) {\n    var predicate;\n    if (idOrCriteria !== undefined && modelConstructor === undefined) {\n        var msg = 'Cannot provide criteria without a modelConstructor';\n        logger.error(msg, idOrCriteria);\n        throw new Error(msg);\n    }\n    if (modelConstructor && !isValidModelConstructor(modelConstructor)) {\n        var msg = 'Constructor is not for a valid model';\n        logger.error(msg, { modelConstructor: modelConstructor });\n        throw new Error(msg);\n    }\n    if (typeof idOrCriteria === 'string') {\n        predicate = ModelPredicateCreator.createForId(getModelDefinition(modelConstructor), idOrCriteria);\n    }\n    else {\n        predicate =\n            modelConstructor &&\n                ModelPredicateCreator.createFromExisting(getModelDefinition(modelConstructor), idOrCriteria);\n    }\n    return new Observable(function (observer) {\n        var handle;\n        (function () { return __awaiter(void 0, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, start()];\n                    case 1:\n                        _a.sent();\n                        handle = storage\n                            .observe(modelConstructor, predicate)\n                            .filter(function (_a) {\n                            var model = _a.model;\n                            return namespaceResolver(model) === USER;\n                        })\n                            .subscribe(observer);\n                        return [2 /*return*/];\n                }\n            });\n        }); })();\n        return function () {\n            if (handle) {\n                handle.unsubscribe();\n            }\n        };\n    });\n};\nvar query = function (modelConstructor, idOrCriteria, pagination) { return __awaiter(void 0, void 0, void 0, function () {\n    var msg, predicate_1, result, criteria, predicate, _a, limit, page;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0: return [4 /*yield*/, start()];\n            case 1:\n                _b.sent();\n                if (!isValidModelConstructor(modelConstructor)) {\n                    msg = 'Constructor is not for a valid model';\n                    logger.error(msg, { modelConstructor: modelConstructor });\n                    throw new Error(msg);\n                }\n                if (!(typeof idOrCriteria === 'string')) return [3 /*break*/, 3];\n                if (pagination !== undefined) {\n                    logger.warn('Pagination is ignored when querying by id');\n                }\n                predicate_1 = ModelPredicateCreator.createForId(getModelDefinition(modelConstructor), idOrCriteria);\n                return [4 /*yield*/, storage.query(modelConstructor, predicate_1)];\n            case 2:\n                result = (_b.sent())[0];\n                if (result) {\n                    return [2 /*return*/, result];\n                }\n                return [2 /*return*/, undefined];\n            case 3:\n                criteria = idOrCriteria;\n                predicate = !isPredicatesAll(criteria)\n                    ? ModelPredicateCreator.createFromExisting(getModelDefinition(modelConstructor), criteria)\n                    : undefined;\n                _a = pagination || {}, limit = _a.limit, page = _a.page;\n                if (page !== undefined && limit === undefined) {\n                    throw new Error('Limit is required when requesting a page');\n                }\n                if (page !== undefined) {\n                    if (typeof page !== 'number') {\n                        throw new Error('Page should be a number');\n                    }\n                    if (page < 0) {\n                        throw new Error(\"Page can't be negative\");\n                    }\n                }\n                if (limit !== undefined) {\n                    if (typeof limit !== 'number') {\n                        throw new Error('Limit should be a number');\n                    }\n                    if (limit < 0) {\n                        throw new Error(\"Limit can't be negative\");\n                    }\n                }\n                return [2 /*return*/, storage.query(modelConstructor, predicate, pagination)];\n        }\n    });\n}); };\nvar sync;\nvar amplifyConfig = {};\nvar conflictHandler;\nvar errorHandler;\nvar maxRecordsToSync;\nvar syncPageSize;\nvar fullSyncInterval;\nfunction configure(config) {\n    if (config === void 0) { config = {}; }\n    var configDataStore = config.DataStore, configConflictHandler = config.conflictHandler, configErrorHandler = config.errorHandler, configMaxRecordsToSync = config.maxRecordsToSync, configSyncPageSize = config.syncPageSize, configFullSyncInterval = config.fullSyncInterval, configFromAmplify = __rest(config, [\"DataStore\", \"conflictHandler\", \"errorHandler\", \"maxRecordsToSync\", \"syncPageSize\", \"fullSyncInterval\"]);\n    amplifyConfig = __assign(__assign({}, configFromAmplify), amplifyConfig);\n    conflictHandler =\n        (configDataStore && configDataStore.conflictHandler) ||\n            conflictHandler ||\n            config.conflictHandler ||\n            defaultConflictHandler;\n    errorHandler =\n        (configDataStore && configDataStore.errorHandler) ||\n            errorHandler ||\n            config.errorHandler ||\n            defaultErrorHandler;\n    maxRecordsToSync =\n        (configDataStore && configDataStore.maxRecordsToSync) ||\n            maxRecordsToSync ||\n            config.maxRecordsToSync;\n    syncPageSize =\n        (configDataStore && configDataStore.syncPageSize) ||\n            syncPageSize ||\n            config.syncPageSize;\n    fullSyncInterval =\n        (configDataStore && configDataStore.fullSyncInterval) ||\n            configFullSyncInterval ||\n            config.fullSyncInterval ||\n            24 * 60; // 1 day\n}\nfunction defaultConflictHandler(conflictData) {\n    var localModel = conflictData.localModel, modelConstructor = conflictData.modelConstructor, remoteModel = conflictData.remoteModel;\n    var _version = remoteModel._version;\n    return modelInstanceCreator(modelConstructor, __assign(__assign({}, localModel), { _version: _version }));\n}\nfunction defaultErrorHandler(error) {\n    logger.warn(error);\n}\nfunction getModelConstructorByModelName(namespaceName, modelName) {\n    var result;\n    switch (namespaceName) {\n        case DATASTORE:\n            result = dataStoreClasses[modelName];\n            break;\n        case USER:\n            result = userClasses[modelName];\n            break;\n        case SYNC:\n            result = syncClasses[modelName];\n            break;\n        case STORAGE:\n            result = storageClasses[modelName];\n            break;\n        default:\n            exhaustiveCheck(namespaceName);\n            break;\n    }\n    if (isValidModelConstructor(result)) {\n        return result;\n    }\n    else {\n        var msg = \"Model name is not valid for namespace. modelName: \" + modelName + \", namespace: \" + namespaceName;\n        logger.error(msg);\n        throw new Error(msg);\n    }\n}\nfunction checkSchemaVersion(storage, version) {\n    return __awaiter(this, void 0, void 0, function () {\n        var Setting, modelDefinition;\n        var _this = this;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    Setting = dataStoreClasses.Setting;\n                    modelDefinition = schema.namespaces[DATASTORE].models.Setting;\n                    return [4 /*yield*/, storage.runExclusive(function (s) { return __awaiter(_this, void 0, void 0, function () {\n                            var schemaVersionSetting, storedValue;\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0: return [4 /*yield*/, s.query(Setting, ModelPredicateCreator.createFromExisting(modelDefinition, function (c) {\n                                            return c.key('eq', SETTING_SCHEMA_VERSION);\n                                        }))];\n                                    case 1:\n                                        schemaVersionSetting = (_a.sent())[0];\n                                        if (!(schemaVersionSetting !== undefined)) return [3 /*break*/, 4];\n                                        storedValue = JSON.parse(schemaVersionSetting.value);\n                                        if (!(storedValue !== version)) return [3 /*break*/, 3];\n                                        return [4 /*yield*/, s.clear(false)];\n                                    case 2:\n                                        _a.sent();\n                                        _a.label = 3;\n                                    case 3: return [3 /*break*/, 6];\n                                    case 4: return [4 /*yield*/, s.save(modelInstanceCreator(Setting, {\n                                            key: SETTING_SCHEMA_VERSION,\n                                            value: JSON.stringify(version),\n                                        }))];\n                                    case 5:\n                                        _a.sent();\n                                        _a.label = 6;\n                                    case 6: return [2 /*return*/];\n                                }\n                            });\n                        }); })];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nvar syncSubscription;\nvar initResolve;\nvar initialized;\nfunction start() {\n    return __awaiter(this, void 0, void 0, function () {\n        var aws_appsync_graphqlEndpoint, fullSyncIntervalInMilliseconds;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!(initialized === undefined)) return [3 /*break*/, 1];\n                    initialized = new Promise(function (res) {\n                        initResolve = res;\n                    });\n                    return [3 /*break*/, 3];\n                case 1: return [4 /*yield*/, initialized];\n                case 2:\n                    _a.sent();\n                    return [2 /*return*/];\n                case 3:\n                    storage = new Storage(schema, namespaceResolver, getModelConstructorByModelName, modelInstanceCreator);\n                    return [4 /*yield*/, checkSchemaVersion(storage, schema.version)];\n                case 4:\n                    _a.sent();\n                    aws_appsync_graphqlEndpoint = amplifyConfig.aws_appsync_graphqlEndpoint;\n                    if (aws_appsync_graphqlEndpoint) {\n                        sync = new SyncEngine(schema, namespaceResolver, syncClasses, userClasses, storage, modelInstanceCreator, maxRecordsToSync, syncPageSize, conflictHandler, errorHandler);\n                        fullSyncIntervalInMilliseconds = fullSyncInterval * 1000 * 60;\n                        syncSubscription = sync\n                            .start({ fullSyncInterval: fullSyncIntervalInMilliseconds })\n                            .subscribe({\n                            error: function (err) {\n                                logger.warn('Sync error', err);\n                            },\n                        });\n                    }\n                    initResolve();\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction clear() {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (storage === undefined) {\n                        return [2 /*return*/];\n                    }\n                    if (syncSubscription && !syncSubscription.closed) {\n                        syncSubscription.unsubscribe();\n                    }\n                    return [4 /*yield*/, storage.clear()];\n                case 1:\n                    _a.sent();\n                    initialized = undefined; // Should re-initialize when start() is called.\n                    storage = undefined;\n                    sync = undefined;\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction getNamespace() {\n    var namespace = {\n        name: DATASTORE,\n        relationships: {},\n        enums: {},\n        nonModels: {},\n        models: {\n            Setting: {\n                name: 'Setting',\n                pluralName: 'Settings',\n                syncable: false,\n                fields: {\n                    id: {\n                        name: 'id',\n                        type: 'ID',\n                        isRequired: true,\n                        isArray: false,\n                    },\n                    key: {\n                        name: 'key',\n                        type: 'String',\n                        isRequired: true,\n                        isArray: false,\n                    },\n                    value: {\n                        name: 'value',\n                        type: 'String',\n                        isRequired: true,\n                        isArray: false,\n                    },\n                },\n            },\n        },\n    };\n    return namespace;\n}\nvar DataStore = /** @class */ (function () {\n    function DataStore() {\n    }\n    DataStore.getModuleName = function () {\n        return 'DataStore';\n    };\n    DataStore.query = query;\n    DataStore.save = save;\n    DataStore.delete = remove;\n    DataStore.observe = observe;\n    DataStore.configure = configure;\n    DataStore.clear = clear;\n    return DataStore;\n}());\nexport { initSchema, DataStore };\n//# sourceMappingURL=datastore.js.map","const instanceOfAny = (object, constructors) => constructors.some(c => object instanceof c);\n\nlet idbProxyableTypes;\r\nlet cursorAdvanceMethods;\r\n// This is a function to prevent it throwing up in node environments.\r\nfunction getIdbProxyableTypes() {\r\n    return idbProxyableTypes ||\r\n        (idbProxyableTypes = [IDBDatabase, IDBObjectStore, IDBIndex, IDBCursor, IDBTransaction]);\r\n}\r\n// This is a function to prevent it throwing up in node environments.\r\nfunction getCursorAdvanceMethods() {\r\n    return cursorAdvanceMethods || (cursorAdvanceMethods = [\r\n        IDBCursor.prototype.advance,\r\n        IDBCursor.prototype.continue,\r\n        IDBCursor.prototype.continuePrimaryKey,\r\n    ]);\r\n}\r\nconst cursorRequestMap = new WeakMap();\r\nconst transactionDoneMap = new WeakMap();\r\nconst transactionStoreNamesMap = new WeakMap();\r\nconst transformCache = new WeakMap();\r\nconst reverseTransformCache = new WeakMap();\r\nfunction promisifyRequest(request) {\r\n    const promise = new Promise((resolve, reject) => {\r\n        const unlisten = () => {\r\n            request.removeEventListener('success', success);\r\n            request.removeEventListener('error', error);\r\n        };\r\n        const success = () => {\r\n            resolve(wrap(request.result));\r\n            unlisten();\r\n        };\r\n        const error = () => {\r\n            reject(request.error);\r\n            unlisten();\r\n        };\r\n        request.addEventListener('success', success);\r\n        request.addEventListener('error', error);\r\n    });\r\n    promise.then((value) => {\r\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\r\n        // (see wrapFunction).\r\n        if (value instanceof IDBCursor) {\r\n            cursorRequestMap.set(value, request);\r\n        }\r\n        // Catching to avoid \"Uncaught Promise exceptions\"\r\n    }).catch(() => { });\r\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\r\n    // is because we create many promises from a single IDBRequest.\r\n    reverseTransformCache.set(promise, request);\r\n    return promise;\r\n}\r\nfunction cacheDonePromiseForTransaction(tx) {\r\n    // Early bail if we've already created a done promise for this transaction.\r\n    if (transactionDoneMap.has(tx))\r\n        return;\r\n    const done = new Promise((resolve, reject) => {\r\n        const unlisten = () => {\r\n            tx.removeEventListener('complete', complete);\r\n            tx.removeEventListener('error', error);\r\n            tx.removeEventListener('abort', error);\r\n        };\r\n        const complete = () => {\r\n            resolve();\r\n            unlisten();\r\n        };\r\n        const error = () => {\r\n            reject(tx.error);\r\n            unlisten();\r\n        };\r\n        tx.addEventListener('complete', complete);\r\n        tx.addEventListener('error', error);\r\n        tx.addEventListener('abort', error);\r\n    });\r\n    // Cache it for later retrieval.\r\n    transactionDoneMap.set(tx, done);\r\n}\r\nlet idbProxyTraps = {\r\n    get(target, prop, receiver) {\r\n        if (target instanceof IDBTransaction) {\r\n            // Special handling for transaction.done.\r\n            if (prop === 'done')\r\n                return transactionDoneMap.get(target);\r\n            // Polyfill for objectStoreNames because of Edge.\r\n            if (prop === 'objectStoreNames') {\r\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\r\n            }\r\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\r\n            if (prop === 'store') {\r\n                return receiver.objectStoreNames[1] ?\r\n                    undefined : receiver.objectStore(receiver.objectStoreNames[0]);\r\n            }\r\n        }\r\n        // Else transform whatever we get back.\r\n        return wrap(target[prop]);\r\n    },\r\n    has(target, prop) {\r\n        if (target instanceof IDBTransaction && (prop === 'done' || prop === 'store'))\r\n            return true;\r\n        return prop in target;\r\n    },\r\n};\r\nfunction addTraps(callback) {\r\n    idbProxyTraps = callback(idbProxyTraps);\r\n}\r\nfunction wrapFunction(func) {\r\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\r\n    // only create one new func per func.\r\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\r\n    if (func === IDBDatabase.prototype.transaction &&\r\n        !('objectStoreNames' in IDBTransaction.prototype)) {\r\n        return function (storeNames, ...args) {\r\n            const tx = func.call(unwrap(this), storeNames, ...args);\r\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\r\n            return wrap(tx);\r\n        };\r\n    }\r\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\r\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\r\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\r\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\r\n    // undefined if the end of the cursor has been reached.\r\n    if (getCursorAdvanceMethods().includes(func)) {\r\n        return function (...args) {\r\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\r\n            // the original object.\r\n            func.apply(unwrap(this), args);\r\n            return wrap(cursorRequestMap.get(this));\r\n        };\r\n    }\r\n    return function (...args) {\r\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\r\n        // the original object.\r\n        return wrap(func.apply(unwrap(this), args));\r\n    };\r\n}\r\nfunction transformCachableValue(value) {\r\n    if (typeof value === 'function')\r\n        return wrapFunction(value);\r\n    // This doesn't return, it just creates a 'done' promise for the transaction,\r\n    // which is later returned for transaction.done (see idbObjectHandler).\r\n    if (value instanceof IDBTransaction)\r\n        cacheDonePromiseForTransaction(value);\r\n    if (instanceOfAny(value, getIdbProxyableTypes()))\r\n        return new Proxy(value, idbProxyTraps);\r\n    // Return the same value back if we're not going to transform it.\r\n    return value;\r\n}\r\nfunction wrap(value) {\r\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\r\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\r\n    if (value instanceof IDBRequest)\r\n        return promisifyRequest(value);\r\n    // If we've already transformed this value before, reuse the transformed value.\r\n    // This is faster, but it also provides object equality.\r\n    if (transformCache.has(value))\r\n        return transformCache.get(value);\r\n    const newValue = transformCachableValue(value);\r\n    // Not all types are transformed.\r\n    // These may be primitive types, so they can't be WeakMap keys.\r\n    if (newValue !== value) {\r\n        transformCache.set(value, newValue);\r\n        reverseTransformCache.set(newValue, value);\r\n    }\r\n    return newValue;\r\n}\r\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { wrap as a, addTraps as b, instanceOfAny as c, reverseTransformCache as d, unwrap as e };\n","import { a as wrap, b as addTraps } from './chunk.js';\nexport { e as unwrap, a as wrap } from './chunk.js';\n\n/**\r\n * Open a database.\r\n *\r\n * @param name Name of the database.\r\n * @param version Schema version.\r\n * @param callbacks Additional callbacks.\r\n */\r\nfunction openDB(name, version, { blocked, upgrade, blocking } = {}) {\r\n    const request = indexedDB.open(name, version);\r\n    const openPromise = wrap(request);\r\n    if (upgrade) {\r\n        request.addEventListener('upgradeneeded', (event) => {\r\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction));\r\n        });\r\n    }\r\n    if (blocked)\r\n        request.addEventListener('blocked', () => blocked());\r\n    if (blocking)\r\n        openPromise.then(db => db.addEventListener('versionchange', blocking));\r\n    return openPromise;\r\n}\r\n/**\r\n * Delete a database.\r\n *\r\n * @param name Name of the database.\r\n */\r\nfunction deleteDB(name, { blocked } = {}) {\r\n    const request = indexedDB.deleteDatabase(name);\r\n    if (blocked)\r\n        request.addEventListener('blocked', () => blocked());\r\n    return wrap(request).then(() => undefined);\r\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\r\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\r\nconst cachedMethods = new Map();\r\nfunction getMethod(target, prop) {\r\n    if (!(target instanceof IDBDatabase &&\r\n        !(prop in target) &&\r\n        typeof prop === 'string'))\r\n        return;\r\n    if (cachedMethods.get(prop))\r\n        return cachedMethods.get(prop);\r\n    const targetFuncName = prop.replace(/FromIndex$/, '');\r\n    const useIndex = prop !== targetFuncName;\r\n    const isWrite = writeMethods.includes(targetFuncName);\r\n    if (\r\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\r\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\r\n        !(isWrite || readMethods.includes(targetFuncName)))\r\n        return;\r\n    const method = async function (storeName, ...args) {\r\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\r\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\r\n        let target = tx.store;\r\n        if (useIndex)\r\n            target = target.index(args.shift());\r\n        const returnVal = target[targetFuncName](...args);\r\n        if (isWrite)\r\n            await tx.done;\r\n        return returnVal;\r\n    };\r\n    cachedMethods.set(prop, method);\r\n    return method;\r\n}\r\naddTraps(oldTraps => ({\r\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\r\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\r\n}));\n\nexport { openDB, deleteDB };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nimport * as idb from 'idb';\nimport { ModelPredicateCreator } from '../../predicates';\nimport { isPredicateObj, OpType, QueryOne, } from '../../types';\nimport { exhaustiveCheck, getIndex, isModelConstructor, traverseModel, validatePredicate, isPrivateMode, } from '../../util';\nvar logger = new Logger('DataStore');\nvar DB_NAME = 'amplify-datastore';\nvar IndexedDBAdapter = /** @class */ (function () {\n    function IndexedDBAdapter() {\n    }\n    IndexedDBAdapter.prototype.checkPrivate = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var isPrivate;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, isPrivateMode().then(function (isPrivate) {\n                            return isPrivate;\n                        })];\n                    case 1:\n                        isPrivate = _a.sent();\n                        if (isPrivate) {\n                            logger.error(\"IndexedDB not supported in this browser's private mode\");\n                            return [2 /*return*/, Promise.reject(\"IndexedDB not supported in this browser's private mode\")];\n                        }\n                        else {\n                            return [2 /*return*/, Promise.resolve()];\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    IndexedDBAdapter.prototype.getStorenameForModel = function (modelConstructor) {\n        var namespace = this.namespaceResolver(modelConstructor);\n        var modelName = modelConstructor.name;\n        return this.getStorename(namespace, modelName);\n    };\n    IndexedDBAdapter.prototype.getStorename = function (namespace, modelName) {\n        var storeName = namespace + \"_\" + modelName;\n        return storeName;\n    };\n    IndexedDBAdapter.prototype.setUp = function (theSchema, namespaceResolver, modelInstanceCreator, getModelConstructorByModelName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, error_1;\n            var _this = this;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.checkPrivate()];\n                    case 1:\n                        _b.sent();\n                        if (!!this.initPromise) return [3 /*break*/, 2];\n                        this.initPromise = new Promise(function (res, rej) {\n                            _this.resolve = res;\n                            _this.reject = rej;\n                        });\n                        return [3 /*break*/, 4];\n                    case 2: return [4 /*yield*/, this.initPromise];\n                    case 3:\n                        _b.sent();\n                        _b.label = 4;\n                    case 4:\n                        this.schema = theSchema;\n                        this.namespaceResolver = namespaceResolver;\n                        this.modelInstanceCreator = modelInstanceCreator;\n                        this.getModelConstructorByModelName = getModelConstructorByModelName;\n                        _b.label = 5;\n                    case 5:\n                        _b.trys.push([5, 8, , 9]);\n                        if (!!this.db) return [3 /*break*/, 7];\n                        _a = this;\n                        return [4 /*yield*/, idb.openDB(DB_NAME, 1, {\n                                upgrade: function (db, _oldVersion, _newVersion, _txn) {\n                                    var keyPath = 'id';\n                                    Object.keys(theSchema.namespaces).forEach(function (namespaceName) {\n                                        var namespace = theSchema.namespaces[namespaceName];\n                                        Object.keys(namespace.models).forEach(function (modelName) {\n                                            var indexes = _this.schema.namespaces[namespaceName]\n                                                .relationships[modelName].indexes;\n                                            var storeName = _this.getStorename(namespaceName, modelName);\n                                            var store = db.createObjectStore(storeName, { keyPath: keyPath });\n                                            indexes.forEach(function (index) { return store.createIndex(index, index); });\n                                        });\n                                    });\n                                },\n                            })];\n                    case 6:\n                        _a.db = _b.sent();\n                        this.resolve();\n                        _b.label = 7;\n                    case 7: return [3 /*break*/, 9];\n                    case 8:\n                        error_1 = _b.sent();\n                        this.reject(error_1);\n                        return [3 /*break*/, 9];\n                    case 9: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    IndexedDBAdapter.prototype.save = function (model, condition) {\n        var e_1, _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var modelConstructor, storeName, connectedModels, namespaceName, set, connectionStoreNames, tx, store, fromDB, predicates, predicateObjs, type, isValid, msg, result, connectionStoreNames_1, connectionStoreNames_1_1, resItem, storeName_1, item, instance, store_1, id, opType, e_1_1;\n            var _this = this;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.checkPrivate()];\n                    case 1:\n                        _b.sent();\n                        modelConstructor = Object.getPrototypeOf(model)\n                            .constructor;\n                        storeName = this.getStorenameForModel(modelConstructor);\n                        connectedModels = traverseModel(modelConstructor.name, model, this.schema.namespaces[this.namespaceResolver(modelConstructor)], this.modelInstanceCreator, this.getModelConstructorByModelName);\n                        namespaceName = this.namespaceResolver(modelConstructor);\n                        set = new Set();\n                        connectionStoreNames = Object.values(connectedModels).map(function (_a) {\n                            var modelName = _a.modelName, item = _a.item, instance = _a.instance;\n                            var storeName = _this.getStorename(namespaceName, modelName);\n                            set.add(storeName);\n                            return { storeName: storeName, item: item, instance: instance };\n                        });\n                        tx = this.db.transaction(__spreadArrays([storeName], Array.from(set.values())), 'readwrite');\n                        store = tx.objectStore(storeName);\n                        return [4 /*yield*/, store.get(model.id)];\n                    case 2:\n                        fromDB = _b.sent();\n                        if (condition) {\n                            predicates = ModelPredicateCreator.getPredicates(condition);\n                            predicateObjs = predicates.predicates, type = predicates.type;\n                            isValid = validatePredicate(fromDB, type, predicateObjs);\n                            if (!isValid) {\n                                msg = 'Conditional update failed';\n                                logger.error(msg, { model: fromDB, condition: predicateObjs });\n                                throw new Error(msg);\n                            }\n                        }\n                        result = [];\n                        _b.label = 3;\n                    case 3:\n                        _b.trys.push([3, 12, 13, 18]);\n                        connectionStoreNames_1 = __asyncValues(connectionStoreNames);\n                        _b.label = 4;\n                    case 4: return [4 /*yield*/, connectionStoreNames_1.next()];\n                    case 5:\n                        if (!(connectionStoreNames_1_1 = _b.sent(), !connectionStoreNames_1_1.done)) return [3 /*break*/, 11];\n                        resItem = connectionStoreNames_1_1.value;\n                        storeName_1 = resItem.storeName, item = resItem.item, instance = resItem.instance;\n                        store_1 = tx.objectStore(storeName_1);\n                        id = item.id;\n                        return [4 /*yield*/, store_1.get(id)];\n                    case 6:\n                        opType = (_b.sent()) === undefined ? OpType.INSERT : OpType.UPDATE;\n                        if (!(id === model.id)) return [3 /*break*/, 8];\n                        return [4 /*yield*/, store_1.put(item)];\n                    case 7:\n                        _b.sent();\n                        result.push([instance, opType]);\n                        return [3 /*break*/, 10];\n                    case 8:\n                        if (!(opType === OpType.INSERT)) return [3 /*break*/, 10];\n                        return [4 /*yield*/, store_1.put(item)];\n                    case 9:\n                        _b.sent();\n                        result.push([instance, opType]);\n                        _b.label = 10;\n                    case 10: return [3 /*break*/, 4];\n                    case 11: return [3 /*break*/, 18];\n                    case 12:\n                        e_1_1 = _b.sent();\n                        e_1 = { error: e_1_1 };\n                        return [3 /*break*/, 18];\n                    case 13:\n                        _b.trys.push([13, , 16, 17]);\n                        if (!(connectionStoreNames_1_1 && !connectionStoreNames_1_1.done && (_a = connectionStoreNames_1.return))) return [3 /*break*/, 15];\n                        return [4 /*yield*/, _a.call(connectionStoreNames_1)];\n                    case 14:\n                        _b.sent();\n                        _b.label = 15;\n                    case 15: return [3 /*break*/, 17];\n                    case 16:\n                        if (e_1) throw e_1.error;\n                        return [7 /*endfinally*/];\n                    case 17: return [7 /*endfinally*/];\n                    case 18: return [4 /*yield*/, tx.done];\n                    case 19:\n                        _b.sent();\n                        return [2 /*return*/, result];\n                }\n            });\n        });\n    };\n    IndexedDBAdapter.prototype.load = function (namespaceName, srcModelName, records) {\n        var records_1, records_1_1, records_2, records_2_1;\n        var e_2, _a, e_3, _b, e_4, _c;\n        return __awaiter(this, void 0, void 0, function () {\n            var namespace, relations, connectionStoreNames, modelConstructor, tx, relations_1, relations_1_1, relation, fieldName, modelName, targetName, storeName, store, modelConstructor_1, _d, recordItem, connectionRecord, e_3_1, recordItem, connectionRecord, e_4_1, e_2_1;\n            var _this = this;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        namespace = this.schema.namespaces[namespaceName];\n                        relations = namespace.relationships[srcModelName].relationTypes;\n                        connectionStoreNames = relations.map(function (_a) {\n                            var modelName = _a.modelName;\n                            return _this.getStorename(namespaceName, modelName);\n                        });\n                        modelConstructor = this.getModelConstructorByModelName(namespaceName, srcModelName);\n                        if (connectionStoreNames.length === 0) {\n                            return [2 /*return*/, records.map(function (record) {\n                                    return _this.modelInstanceCreator(modelConstructor, record);\n                                })];\n                        }\n                        tx = this.db.transaction(__spreadArrays(connectionStoreNames), 'readonly');\n                        _e.label = 1;\n                    case 1:\n                        _e.trys.push([1, 34, 35, 40]);\n                        relations_1 = __asyncValues(relations);\n                        _e.label = 2;\n                    case 2: return [4 /*yield*/, relations_1.next()];\n                    case 3:\n                        if (!(relations_1_1 = _e.sent(), !relations_1_1.done)) return [3 /*break*/, 33];\n                        relation = relations_1_1.value;\n                        fieldName = relation.fieldName, modelName = relation.modelName, targetName = relation.targetName;\n                        storeName = this.getStorename(namespaceName, modelName);\n                        store = tx.objectStore(storeName);\n                        modelConstructor_1 = this.getModelConstructorByModelName(namespaceName, modelName);\n                        _d = relation.relationType;\n                        switch (_d) {\n                            case 'HAS_ONE': return [3 /*break*/, 4];\n                            case 'BELONGS_TO': return [3 /*break*/, 17];\n                            case 'HAS_MANY': return [3 /*break*/, 30];\n                        }\n                        return [3 /*break*/, 31];\n                    case 4:\n                        _e.trys.push([4, 10, 11, 16]);\n                        records_1 = __asyncValues(records);\n                        _e.label = 5;\n                    case 5: return [4 /*yield*/, records_1.next()];\n                    case 6:\n                        if (!(records_1_1 = _e.sent(), !records_1_1.done)) return [3 /*break*/, 9];\n                        recordItem = records_1_1.value;\n                        if (!recordItem[fieldName]) return [3 /*break*/, 8];\n                        return [4 /*yield*/, store.get(recordItem[fieldName])];\n                    case 7:\n                        connectionRecord = _e.sent();\n                        recordItem[fieldName] =\n                            connectionRecord &&\n                                this.modelInstanceCreator(modelConstructor_1, connectionRecord);\n                        _e.label = 8;\n                    case 8: return [3 /*break*/, 5];\n                    case 9: return [3 /*break*/, 16];\n                    case 10:\n                        e_3_1 = _e.sent();\n                        e_3 = { error: e_3_1 };\n                        return [3 /*break*/, 16];\n                    case 11:\n                        _e.trys.push([11, , 14, 15]);\n                        if (!(records_1_1 && !records_1_1.done && (_b = records_1.return))) return [3 /*break*/, 13];\n                        return [4 /*yield*/, _b.call(records_1)];\n                    case 12:\n                        _e.sent();\n                        _e.label = 13;\n                    case 13: return [3 /*break*/, 15];\n                    case 14:\n                        if (e_3) throw e_3.error;\n                        return [7 /*endfinally*/];\n                    case 15: return [7 /*endfinally*/];\n                    case 16: return [3 /*break*/, 32];\n                    case 17:\n                        _e.trys.push([17, 23, 24, 29]);\n                        records_2 = __asyncValues(records);\n                        _e.label = 18;\n                    case 18: return [4 /*yield*/, records_2.next()];\n                    case 19:\n                        if (!(records_2_1 = _e.sent(), !records_2_1.done)) return [3 /*break*/, 22];\n                        recordItem = records_2_1.value;\n                        if (!recordItem[targetName]) return [3 /*break*/, 21];\n                        return [4 /*yield*/, store.get(recordItem[targetName])];\n                    case 20:\n                        connectionRecord = _e.sent();\n                        recordItem[fieldName] =\n                            connectionRecord &&\n                                this.modelInstanceCreator(modelConstructor_1, connectionRecord);\n                        delete recordItem[targetName];\n                        _e.label = 21;\n                    case 21: return [3 /*break*/, 18];\n                    case 22: return [3 /*break*/, 29];\n                    case 23:\n                        e_4_1 = _e.sent();\n                        e_4 = { error: e_4_1 };\n                        return [3 /*break*/, 29];\n                    case 24:\n                        _e.trys.push([24, , 27, 28]);\n                        if (!(records_2_1 && !records_2_1.done && (_c = records_2.return))) return [3 /*break*/, 26];\n                        return [4 /*yield*/, _c.call(records_2)];\n                    case 25:\n                        _e.sent();\n                        _e.label = 26;\n                    case 26: return [3 /*break*/, 28];\n                    case 27:\n                        if (e_4) throw e_4.error;\n                        return [7 /*endfinally*/];\n                    case 28: return [7 /*endfinally*/];\n                    case 29: return [3 /*break*/, 32];\n                    case 30: \n                    // TODO: Lazy loading\n                    return [3 /*break*/, 32];\n                    case 31:\n                        exhaustiveCheck(relation.relationType);\n                        return [3 /*break*/, 32];\n                    case 32: return [3 /*break*/, 2];\n                    case 33: return [3 /*break*/, 40];\n                    case 34:\n                        e_2_1 = _e.sent();\n                        e_2 = { error: e_2_1 };\n                        return [3 /*break*/, 40];\n                    case 35:\n                        _e.trys.push([35, , 38, 39]);\n                        if (!(relations_1_1 && !relations_1_1.done && (_a = relations_1.return))) return [3 /*break*/, 37];\n                        return [4 /*yield*/, _a.call(relations_1)];\n                    case 36:\n                        _e.sent();\n                        _e.label = 37;\n                    case 37: return [3 /*break*/, 39];\n                    case 38:\n                        if (e_2) throw e_2.error;\n                        return [7 /*endfinally*/];\n                    case 39: return [7 /*endfinally*/];\n                    case 40: return [2 /*return*/, records.map(function (record) {\n                            return _this.modelInstanceCreator(modelConstructor, record);\n                        })];\n                }\n            });\n        });\n    };\n    IndexedDBAdapter.prototype.query = function (modelConstructor, predicate, pagination) {\n        return __awaiter(this, void 0, void 0, function () {\n            var storeName, namespaceName, predicates, predicateObjs_1, type_1, idPredicate, id, record, x, all, filtered, _a, _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0: return [4 /*yield*/, this.checkPrivate()];\n                    case 1:\n                        _c.sent();\n                        storeName = this.getStorenameForModel(modelConstructor);\n                        namespaceName = this.namespaceResolver(modelConstructor);\n                        if (!predicate) return [3 /*break*/, 8];\n                        predicates = ModelPredicateCreator.getPredicates(predicate);\n                        if (!predicates) return [3 /*break*/, 8];\n                        predicateObjs_1 = predicates.predicates, type_1 = predicates.type;\n                        idPredicate = predicateObjs_1.length === 1 &&\n                            predicateObjs_1.find(function (p) { return isPredicateObj(p) && p.field === 'id' && p.operator === 'eq'; });\n                        if (!idPredicate) return [3 /*break*/, 5];\n                        id = idPredicate.operand;\n                        return [4 /*yield*/, this.db.get(storeName, id)];\n                    case 2:\n                        record = _c.sent();\n                        if (!record) return [3 /*break*/, 4];\n                        return [4 /*yield*/, this.load(namespaceName, modelConstructor.name, [\n                                record,\n                            ])];\n                    case 3:\n                        x = (_c.sent())[0];\n                        return [2 /*return*/, [x]];\n                    case 4: return [2 /*return*/, []];\n                    case 5: return [4 /*yield*/, this.db.getAll(storeName)];\n                    case 6:\n                        all = _c.sent();\n                        filtered = predicateObjs_1\n                            ? all.filter(function (m) { return validatePredicate(m, type_1, predicateObjs_1); })\n                            : all;\n                        return [4 /*yield*/, this.load(namespaceName, modelConstructor.name, this.inMemoryPagination(filtered, pagination))];\n                    case 7: return [2 /*return*/, _c.sent()];\n                    case 8:\n                        _a = this.load;\n                        _b = [namespaceName,\n                            modelConstructor.name];\n                        return [4 /*yield*/, this.enginePagination(storeName, pagination)];\n                    case 9: return [4 /*yield*/, _a.apply(this, _b.concat([_c.sent()]))];\n                    case 10: return [2 /*return*/, _c.sent()];\n                }\n            });\n        });\n    };\n    IndexedDBAdapter.prototype.inMemoryPagination = function (records, pagination) {\n        if (pagination) {\n            var _a = pagination.page, page = _a === void 0 ? 0 : _a, _b = pagination.limit, limit = _b === void 0 ? 0 : _b;\n            var start = Math.max(0, page * limit) || 0;\n            var end = limit > 0 ? start + limit : records.length;\n            return records.slice(start, end);\n        }\n        return records;\n    };\n    IndexedDBAdapter.prototype.enginePagination = function (storeName, pagination) {\n        return __awaiter(this, void 0, void 0, function () {\n            var result, _a, page, _b, limit, initialRecord, cursor, pageResults, hasLimit, moreRecords, itemsLeft;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (!pagination) return [3 /*break*/, 7];\n                        _a = pagination.page, page = _a === void 0 ? 0 : _a, _b = pagination.limit, limit = _b === void 0 ? 0 : _b;\n                        initialRecord = Math.max(0, page * limit) || 0;\n                        return [4 /*yield*/, this.db\n                                .transaction(storeName)\n                                .objectStore(storeName)\n                                .openCursor()];\n                    case 1:\n                        cursor = _c.sent();\n                        if (!(initialRecord > 0)) return [3 /*break*/, 3];\n                        return [4 /*yield*/, cursor.advance(initialRecord)];\n                    case 2:\n                        _c.sent();\n                        _c.label = 3;\n                    case 3:\n                        pageResults = [];\n                        hasLimit = typeof limit === 'number' && limit > 0;\n                        moreRecords = true;\n                        itemsLeft = limit;\n                        _c.label = 4;\n                    case 4:\n                        if (!(moreRecords && cursor.value)) return [3 /*break*/, 6];\n                        pageResults.push(cursor.value);\n                        return [4 /*yield*/, cursor.continue()];\n                    case 5:\n                        cursor = _c.sent();\n                        if (hasLimit) {\n                            itemsLeft--;\n                            moreRecords = itemsLeft > 0 && cursor !== null;\n                        }\n                        else {\n                            moreRecords = cursor !== null;\n                        }\n                        return [3 /*break*/, 4];\n                    case 6:\n                        result = pageResults;\n                        return [3 /*break*/, 9];\n                    case 7: return [4 /*yield*/, this.db.getAll(storeName)];\n                    case 8:\n                        result = (_c.sent());\n                        _c.label = 9;\n                    case 9: return [2 /*return*/, result];\n                }\n            });\n        });\n    };\n    IndexedDBAdapter.prototype.queryOne = function (modelConstructor, firstOrLast) {\n        if (firstOrLast === void 0) { firstOrLast = QueryOne.FIRST; }\n        return __awaiter(this, void 0, void 0, function () {\n            var storeName, cursor, result;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.checkPrivate()];\n                    case 1:\n                        _a.sent();\n                        storeName = this.getStorenameForModel(modelConstructor);\n                        return [4 /*yield*/, this.db\n                                .transaction([storeName], 'readonly')\n                                .objectStore(storeName)\n                                .openCursor(undefined, firstOrLast === QueryOne.FIRST ? 'next' : 'prev')];\n                    case 2:\n                        cursor = _a.sent();\n                        result = cursor ? cursor.value : undefined;\n                        return [2 /*return*/, result && this.modelInstanceCreator(modelConstructor, result)];\n                }\n            });\n        });\n    };\n    IndexedDBAdapter.prototype.delete = function (modelOrModelConstructor, condition) {\n        return __awaiter(this, void 0, void 0, function () {\n            var deleteQueue, modelConstructor, nameSpace, storeName, models, relations, deletedModels, deletedModels, model, modelConstructor, nameSpace, storeName, tx, store, fromDB, msg, predicates, predicateObjs, type, isValid, msg, relations, relations, deletedModels;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.checkPrivate()];\n                    case 1:\n                        _a.sent();\n                        deleteQueue = [];\n                        if (!isModelConstructor(modelOrModelConstructor)) return [3 /*break*/, 9];\n                        modelConstructor = modelOrModelConstructor;\n                        nameSpace = this.namespaceResolver(modelConstructor);\n                        storeName = this.getStorenameForModel(modelConstructor);\n                        return [4 /*yield*/, this.query(modelConstructor, condition)];\n                    case 2:\n                        models = _a.sent();\n                        relations = this.schema.namespaces[nameSpace].relationships[modelConstructor.name].relationTypes;\n                        if (!(condition !== undefined)) return [3 /*break*/, 5];\n                        return [4 /*yield*/, this.deleteTraverse(relations, models, modelConstructor.name, nameSpace, deleteQueue)];\n                    case 3:\n                        _a.sent();\n                        return [4 /*yield*/, this.deleteItem(deleteQueue)];\n                    case 4:\n                        _a.sent();\n                        deletedModels = deleteQueue.reduce(function (acc, _a) {\n                            var items = _a.items;\n                            return acc.concat(items);\n                        }, []);\n                        return [2 /*return*/, [models, deletedModels]];\n                    case 5: return [4 /*yield*/, this.deleteTraverse(relations, models, modelConstructor.name, nameSpace, deleteQueue)];\n                    case 6:\n                        _a.sent();\n                        // Delete all\n                        return [4 /*yield*/, this.db\n                                .transaction([storeName], 'readwrite')\n                                .objectStore(storeName)\n                                .clear()];\n                    case 7:\n                        // Delete all\n                        _a.sent();\n                        deletedModels = deleteQueue.reduce(function (acc, _a) {\n                            var items = _a.items;\n                            return acc.concat(items);\n                        }, []);\n                        return [2 /*return*/, [models, deletedModels]];\n                    case 8: return [3 /*break*/, 17];\n                    case 9:\n                        model = modelOrModelConstructor;\n                        modelConstructor = Object.getPrototypeOf(model)\n                            .constructor;\n                        nameSpace = this.namespaceResolver(modelConstructor);\n                        storeName = this.getStorenameForModel(modelConstructor);\n                        if (!condition) return [3 /*break*/, 13];\n                        tx = this.db.transaction([storeName], 'readwrite');\n                        store = tx.objectStore(storeName);\n                        return [4 /*yield*/, store.get(model.id)];\n                    case 10:\n                        fromDB = _a.sent();\n                        if (fromDB === undefined) {\n                            msg = 'Model instance not found in storage';\n                            logger.warn(msg, { model: model });\n                            return [2 /*return*/, [[model], []]];\n                        }\n                        predicates = ModelPredicateCreator.getPredicates(condition);\n                        predicateObjs = predicates.predicates, type = predicates.type;\n                        isValid = validatePredicate(fromDB, type, predicateObjs);\n                        if (!isValid) {\n                            msg = 'Conditional update failed';\n                            logger.error(msg, { model: fromDB, condition: predicateObjs });\n                            throw new Error(msg);\n                        }\n                        return [4 /*yield*/, tx.done];\n                    case 11:\n                        _a.sent();\n                        relations = this.schema.namespaces[nameSpace].relationships[modelConstructor.name].relationTypes;\n                        return [4 /*yield*/, this.deleteTraverse(relations, [model], modelConstructor.name, nameSpace, deleteQueue)];\n                    case 12:\n                        _a.sent();\n                        return [3 /*break*/, 15];\n                    case 13:\n                        relations = this.schema.namespaces[nameSpace].relationships[modelConstructor.name].relationTypes;\n                        return [4 /*yield*/, this.deleteTraverse(relations, [model], modelConstructor.name, nameSpace, deleteQueue)];\n                    case 14:\n                        _a.sent();\n                        _a.label = 15;\n                    case 15: return [4 /*yield*/, this.deleteItem(deleteQueue)];\n                    case 16:\n                        _a.sent();\n                        deletedModels = deleteQueue.reduce(function (acc, _a) {\n                            var items = _a.items;\n                            return acc.concat(items);\n                        }, []);\n                        return [2 /*return*/, [[model], deletedModels]];\n                    case 17: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    IndexedDBAdapter.prototype.deleteItem = function (deleteQueue) {\n        var deleteQueue_1, deleteQueue_1_1;\n        var e_5, _a, e_6, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            var connectionStoreNames, tx, deleteItem, storeName, items, store, items_1, items_1_1, item, e_6_1, e_5_1;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        connectionStoreNames = deleteQueue.map(function (_a) {\n                            var storeName = _a.storeName;\n                            return storeName;\n                        });\n                        tx = this.db.transaction(__spreadArrays(connectionStoreNames), 'readwrite');\n                        _c.label = 1;\n                    case 1:\n                        _c.trys.push([1, 20, 21, 26]);\n                        deleteQueue_1 = __asyncValues(deleteQueue);\n                        _c.label = 2;\n                    case 2: return [4 /*yield*/, deleteQueue_1.next()];\n                    case 3:\n                        if (!(deleteQueue_1_1 = _c.sent(), !deleteQueue_1_1.done)) return [3 /*break*/, 19];\n                        deleteItem = deleteQueue_1_1.value;\n                        storeName = deleteItem.storeName, items = deleteItem.items;\n                        store = tx.objectStore(storeName);\n                        _c.label = 4;\n                    case 4:\n                        _c.trys.push([4, 12, 13, 18]);\n                        items_1 = __asyncValues(items);\n                        _c.label = 5;\n                    case 5: return [4 /*yield*/, items_1.next()];\n                    case 6:\n                        if (!(items_1_1 = _c.sent(), !items_1_1.done)) return [3 /*break*/, 11];\n                        item = items_1_1.value;\n                        if (!item) return [3 /*break*/, 10];\n                        if (!(typeof item === 'object')) return [3 /*break*/, 8];\n                        return [4 /*yield*/, store.delete(item['id'])];\n                    case 7:\n                        _c.sent();\n                        _c.label = 8;\n                    case 8: return [4 /*yield*/, store.delete(item.toString())];\n                    case 9:\n                        _c.sent();\n                        _c.label = 10;\n                    case 10: return [3 /*break*/, 5];\n                    case 11: return [3 /*break*/, 18];\n                    case 12:\n                        e_6_1 = _c.sent();\n                        e_6 = { error: e_6_1 };\n                        return [3 /*break*/, 18];\n                    case 13:\n                        _c.trys.push([13, , 16, 17]);\n                        if (!(items_1_1 && !items_1_1.done && (_b = items_1.return))) return [3 /*break*/, 15];\n                        return [4 /*yield*/, _b.call(items_1)];\n                    case 14:\n                        _c.sent();\n                        _c.label = 15;\n                    case 15: return [3 /*break*/, 17];\n                    case 16:\n                        if (e_6) throw e_6.error;\n                        return [7 /*endfinally*/];\n                    case 17: return [7 /*endfinally*/];\n                    case 18: return [3 /*break*/, 2];\n                    case 19: return [3 /*break*/, 26];\n                    case 20:\n                        e_5_1 = _c.sent();\n                        e_5 = { error: e_5_1 };\n                        return [3 /*break*/, 26];\n                    case 21:\n                        _c.trys.push([21, , 24, 25]);\n                        if (!(deleteQueue_1_1 && !deleteQueue_1_1.done && (_a = deleteQueue_1.return))) return [3 /*break*/, 23];\n                        return [4 /*yield*/, _a.call(deleteQueue_1)];\n                    case 22:\n                        _c.sent();\n                        _c.label = 23;\n                    case 23: return [3 /*break*/, 25];\n                    case 24:\n                        if (e_5) throw e_5.error;\n                        return [7 /*endfinally*/];\n                    case 25: return [7 /*endfinally*/];\n                    case 26: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    IndexedDBAdapter.prototype.deleteTraverse = function (relations, models, srcModel, nameSpace, deleteQueue) {\n        var relations_2, relations_2_1, models_1, models_1_1, models_2, models_2_1;\n        var e_7, _a, e_8, _b, e_9, _c;\n        return __awaiter(this, void 0, void 0, function () {\n            var rel, relationType, fieldName, modelName, storeName, _d, model, index_1, recordToDelete, e_8_1, index, model, childrenArray, e_9_1, e_7_1;\n            var _this = this;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        _e.trys.push([0, 36, 37, 42]);\n                        relations_2 = __asyncValues(relations);\n                        _e.label = 1;\n                    case 1: return [4 /*yield*/, relations_2.next()];\n                    case 2:\n                        if (!(relations_2_1 = _e.sent(), !relations_2_1.done)) return [3 /*break*/, 35];\n                        rel = relations_2_1.value;\n                        relationType = rel.relationType, fieldName = rel.fieldName, modelName = rel.modelName;\n                        storeName = this.getStorename(nameSpace, modelName);\n                        _d = relationType;\n                        switch (_d) {\n                            case 'HAS_ONE': return [3 /*break*/, 3];\n                            case 'HAS_MANY': return [3 /*break*/, 17];\n                            case 'BELONGS_TO': return [3 /*break*/, 32];\n                        }\n                        return [3 /*break*/, 33];\n                    case 3:\n                        _e.trys.push([3, 10, 11, 16]);\n                        models_1 = __asyncValues(models);\n                        _e.label = 4;\n                    case 4: return [4 /*yield*/, models_1.next()];\n                    case 5:\n                        if (!(models_1_1 = _e.sent(), !models_1_1.done)) return [3 /*break*/, 9];\n                        model = models_1_1.value;\n                        index_1 = getIndex(this.schema.namespaces[nameSpace].relationships[modelName]\n                            .relationTypes, srcModel);\n                        return [4 /*yield*/, this.db\n                                .transaction(storeName, 'readwrite')\n                                .objectStore(storeName)\n                                .index(index_1)\n                                .get(model.id)];\n                    case 6:\n                        recordToDelete = _e.sent();\n                        return [4 /*yield*/, this.deleteTraverse(this.schema.namespaces[nameSpace].relationships[modelName]\n                                .relationTypes, recordToDelete ? [recordToDelete] : [], modelName, nameSpace, deleteQueue)];\n                    case 7:\n                        _e.sent();\n                        _e.label = 8;\n                    case 8: return [3 /*break*/, 4];\n                    case 9: return [3 /*break*/, 16];\n                    case 10:\n                        e_8_1 = _e.sent();\n                        e_8 = { error: e_8_1 };\n                        return [3 /*break*/, 16];\n                    case 11:\n                        _e.trys.push([11, , 14, 15]);\n                        if (!(models_1_1 && !models_1_1.done && (_b = models_1.return))) return [3 /*break*/, 13];\n                        return [4 /*yield*/, _b.call(models_1)];\n                    case 12:\n                        _e.sent();\n                        _e.label = 13;\n                    case 13: return [3 /*break*/, 15];\n                    case 14:\n                        if (e_8) throw e_8.error;\n                        return [7 /*endfinally*/];\n                    case 15: return [7 /*endfinally*/];\n                    case 16: return [3 /*break*/, 34];\n                    case 17:\n                        index = getIndex(this.schema.namespaces[nameSpace].relationships[modelName]\n                            .relationTypes, srcModel);\n                        _e.label = 18;\n                    case 18:\n                        _e.trys.push([18, 25, 26, 31]);\n                        models_2 = __asyncValues(models);\n                        _e.label = 19;\n                    case 19: return [4 /*yield*/, models_2.next()];\n                    case 20:\n                        if (!(models_2_1 = _e.sent(), !models_2_1.done)) return [3 /*break*/, 24];\n                        model = models_2_1.value;\n                        return [4 /*yield*/, this.db\n                                .transaction(storeName, 'readwrite')\n                                .objectStore(storeName)\n                                .index(index)\n                                .getAll(model['id'])];\n                    case 21:\n                        childrenArray = _e.sent();\n                        return [4 /*yield*/, this.deleteTraverse(this.schema.namespaces[nameSpace].relationships[modelName]\n                                .relationTypes, childrenArray, modelName, nameSpace, deleteQueue)];\n                    case 22:\n                        _e.sent();\n                        _e.label = 23;\n                    case 23: return [3 /*break*/, 19];\n                    case 24: return [3 /*break*/, 31];\n                    case 25:\n                        e_9_1 = _e.sent();\n                        e_9 = { error: e_9_1 };\n                        return [3 /*break*/, 31];\n                    case 26:\n                        _e.trys.push([26, , 29, 30]);\n                        if (!(models_2_1 && !models_2_1.done && (_c = models_2.return))) return [3 /*break*/, 28];\n                        return [4 /*yield*/, _c.call(models_2)];\n                    case 27:\n                        _e.sent();\n                        _e.label = 28;\n                    case 28: return [3 /*break*/, 30];\n                    case 29:\n                        if (e_9) throw e_9.error;\n                        return [7 /*endfinally*/];\n                    case 30: return [7 /*endfinally*/];\n                    case 31: return [3 /*break*/, 34];\n                    case 32: \n                    // Intentionally blank\n                    return [3 /*break*/, 34];\n                    case 33:\n                        exhaustiveCheck(relationType);\n                        return [3 /*break*/, 34];\n                    case 34: return [3 /*break*/, 1];\n                    case 35: return [3 /*break*/, 42];\n                    case 36:\n                        e_7_1 = _e.sent();\n                        e_7 = { error: e_7_1 };\n                        return [3 /*break*/, 42];\n                    case 37:\n                        _e.trys.push([37, , 40, 41]);\n                        if (!(relations_2_1 && !relations_2_1.done && (_a = relations_2.return))) return [3 /*break*/, 39];\n                        return [4 /*yield*/, _a.call(relations_2)];\n                    case 38:\n                        _e.sent();\n                        _e.label = 39;\n                    case 39: return [3 /*break*/, 41];\n                    case 40:\n                        if (e_7) throw e_7.error;\n                        return [7 /*endfinally*/];\n                    case 41: return [7 /*endfinally*/];\n                    case 42:\n                        deleteQueue.push({\n                            storeName: this.getStorename(nameSpace, srcModel),\n                            items: models.map(function (record) {\n                                return _this.modelInstanceCreator(_this.getModelConstructorByModelName(nameSpace, srcModel), record);\n                            }),\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    IndexedDBAdapter.prototype.clear = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.checkPrivate()];\n                    case 1:\n                        _a.sent();\n                        this.db.close();\n                        return [4 /*yield*/, idb.deleteDB(DB_NAME)];\n                    case 2:\n                        _a.sent();\n                        this.db = undefined;\n                        this.initPromise = undefined;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return IndexedDBAdapter;\n}());\nexport default new IndexedDBAdapter();\n//# sourceMappingURL=indexeddb.js.map"],"sourceRoot":""}