<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test JSON.minify()</title>

<script type="text/javascript" src="minify.json.js"></script>

</head>

<body onload="check()">
<h1>Test JSON.minify()</h1>

<pre>console.log views.</pre>

<p>test #1</p>
<textarea id="orig_json1" cols="50" rows="12">
// this is a JSON file with comments
{
	"foo": "bar",	// this is cool
	"bar": [
		"baz", "bum", "zam"
	],
/* the rest of this document is just fluff
   in case you are interested. */
	"something": 10,
	"else": 20
}

/* NOTE: You can easily strip the whitespace and comments 
   from such a file with the JSON.minify() project hosted 
   here on github at http://github.com/getify/JSON.minify 
*/
</textarea>
<p>result #1</p>
<textarea id="new_json1" cols="50" rows="12"></textarea>


<p>test #2</p>
<textarea id="orig_json2" cols="50" rows="12">

{"/*":"*/","//":"",/*"//"*/"/*/"://
"//"}

</textarea>
<p>result #2</p>
<textarea id="new_json2" cols="50" rows="12"></textarea>


<p>test #3</p>
<textarea id="orig_json3" cols="50" rows="12">
/*
this is a 
multi line comment */{

"foo"
:
	"bar/*"// something
	,	"b\"az":/*
something else */"blah"

}
</textarea>
<p>result #3</p>
<textarea id="new_json3" cols="50" rows="12"></textarea>


<p>test #4</p>
<textarea id="orig_json4" cols="50" rows="12">
{"foo": "ba\"r//", "bar\\": "b\\\"a/*z", 
	"baz\\\\": /* yay */ "fo\\\\\"*/o" 
}
</textarea>
<p>result #4</p>
<textarea id="new_json4" cols="50" rows="12"></textarea>


<p>test #5</p>
<textarea id="orig_json5" cols="50" rows="12">
/** a */[{"foo": "ba\"r//", "bar\\": "b\\\"a/*z",
	"baz\\\\": /* yay */ "fo\\\\\"*/o",
	"spa\\\\m": /* aja*/ [ { "a": [1,2,3,4]}, {"b": 2}]
} /** aa */] //aaaa\n//aaaa
</textarea>
<p>result #5</p>
<textarea id="new_json5" cols="50" rows="12"></textarea>


<button	name="check" onclick="check()">check!!</button>

<script type="text/javascript">

	function check() {
		var old;
		for (var i = 1; i <= 5; i++) {
			old = document.getElementById("orig_json" + i).value;
			var minify = JSON.minify(old);
			try {
				console.log("index:", i);
				console.log(JSON.parse(minify));
			} catch(e) {
				console.error(e);
			}
			document.getElementById("new_json" + i).value = minify;
		}
	}
</script>

</body>
</html>
